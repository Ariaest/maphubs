webpackJsonp([1],[function(t,e,n){(function(t){"use strict";var e=n(1),i=n(28);t.Intl||(n(293),n(296),n(297),n(298),n(299)),n(300),n(168),n(596),n(599);var r=n(603);n(843),n(845),document.addEventListener("DOMContentLoaded",function(){var t=window.__appData;i.render(e.createElement(r,t),document.querySelector("#app"))})}).call(e,function(){return this}())},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(1),r=n(168),o=n(169),a=n(170),s=n(189)(a),u=n(194),l=n(274),c=n(282),h=n(286),f=n(287),p=n(266),d=n(268),g=n(290),m=i.createClass({displayName:"Header",mixins:[s.connect(u),s.connect(p)],__:function(t){return d.getLocaleString(this.state.locale,t)},propTypes:{activePage:i.PropTypes.string},componentDidMount:function(){r(this.refs.sideNav).sideNav(),r(".nav-tooltip").tooltip(),r(this.refs.explore).dropdown({inDuration:300,outDuration:225,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!0,alignment:"right"}),this.detectIE()&&h.showMessage({title:this.__("Unsupported Browser"),message:this.__("Unable to support Internet Explorer. Please use Firefox or Chrome.")})},detectIE:function(){if(void 0===window)return!1;if(this.getCookie("iecheck"))return!1;this.setCookie("iecheck",!0,1);var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);var n=t.indexOf("Trident/");if(n>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}return!1},setCookie:function(t,e,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="expires="+i.toUTCString();document.cookie=t+"="+e+"; "+r},getCookie:function(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""},render:function(){var t="nav-link-item",e="nav-link-item active",n="explore-dropdown-button nav-dropdown-button",r=t;if(this.props.activePage){var a=this.props.activePage;"map"==a?r=e:"explore"==a&&(n=e+" explore-dropdown-button nav-dropdown-button")}var s="";return MAPHUBS_CONFIG.mapHubsPro||(s=i.createElement("li",{className:"nav-link-wrapper nav-tooltip","data-position":"bottom","data-delay":"50","data-tooltip":this.__("Help us map in OpenStreetMap")},i.createElement("a",{className:r,href:"https://osm.mapforenvironment.org"},this.__("OpenStreetMap")))),i.createElement("header",null,i.createElement("nav",{style:{boxShadow:"0 0 1px rgba(0,0,0,0.7)"}},i.createElement("div",{className:"nav-wrapper z-depth-0"},i.createElement("a",{className:"brand-logo valign-wrapper",href:"/"},i.createElement("img",{className:"valign",width:MAPHUBS_CONFIG.logoWidth,height:MAPHUBS_CONFIG.logoHeight,style:{margin:"5px"},src:MAPHUBS_CONFIG.logo,alt:MAPHUBS_CONFIG.productName+" "+this.__("Logo")}),i.createElement("small",{id:"beta-text",style:{position:"absolute",top:"12px",left:MAPHUBS_CONFIG.logoWidth+5+"px",fontSize:"12px"}},MAPHUBS_CONFIG.betaText)),i.createElement("a",{ref:"sideNav",className:"button-collapse grey-text text-darken-4","data-activates":"side-nav-menu",href:"#"},i.createElement("i",{className:"material-icons"},"menu")),i.createElement("ul",{className:"right hide-on-med-and-down"},i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{className:r,href:"/map/new"},this.__("Make a Map"))),i.createElement("li",{className:"nav-dropdown-link-wrapper nav-link-wrapper"},i.createElement("a",{className:n,ref:"explore",href:"#!","data-activates":"explore-dropdown",style:{paddingRight:0}},this.__("Explore"),i.createElement("i",{className:"material-icons right",style:{marginLeft:0}},"arrow_drop_down")),i.createElement("ul",{id:"explore-dropdown",className:"dropdown-content"},i.createElement("li",null,i.createElement("a",{href:"/explore",className:"nav-hover-menu-item"},this.__("Explore"))),i.createElement("li",{className:"divider"}),i.createElement("li",null,i.createElement("a",{href:"/maps",className:"nav-hover-menu-item"},this.__("Maps"))),i.createElement("li",null,i.createElement("a",{href:"/stories",className:"nav-hover-menu-item"},this.__("Stories"))),i.createElement("li",null,i.createElement("a",{href:"/layers",className:"nav-hover-menu-item"},this.__("Layers"))),i.createElement("li",null,i.createElement("a",{href:"/hubs",className:"nav-hover-menu-item"},this.__("Hubs"))),i.createElement("li",null,i.createElement("a",{href:"/groups",className:"nav-hover-menu-item"},this.__("Groups"))))),s,i.createElement(g,null),i.createElement("li",{className:"nav-link-wrapper nav-tooltip","data-position":"bottom","data-delay":"50","data-tooltip":this.__("Search")},i.createElement("a",{className:"nav-link-item",href:"/search"},i.createElement("i",{className:"material-icons"},"search"))),i.createElement(o,{id:"user-menu-header"})),i.createElement("ul",{className:"side-nav",id:"side-nav-menu"},i.createElement(o,{id:"user-menu-sidenav",sideNav:!0}),i.createElement(g,{id:"locale-sidenav"}),i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{className:r,href:"/map/new"},this.__("Make a Map"))),i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{className:n,href:"/explore"},this.__("Explore"))),s,i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{href:"/search",className:"nav-link-item"},i.createElement("i",{className:"material-icons"},"search"),this.__("Search")))))),i.createElement(l,null),i.createElement(c,null),i.createElement(f,null))}});t.exports=m},,function(t,e,n){"use strict";var i=n(1),r=n(168),o=n(170),a=n(189)(o),s=n(194),u=n(195),l=n(206),c=n(266),h=n(268),f=i.createClass({displayName:"UserMenu",mixins:[a.connect(s),a.connect(c)],__:function(t){return h.getLocaleString(this.state.locale,t)},propTypes:{id:i.PropTypes.string,sideNav:i.PropTypes.bool},getDefaultProps:function(){return{id:"user-menu",sideNav:!1}},componentDidMount:function(){u.getUser(function(){})},componentDidUpdate:function(t){this.state.loggedIn&&!t.loggedIn&&r(this.refs.userButton).dropdown({inDuration:300,outDuration:225,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!0,alignment:"right"})},loginClick:function(){window.location="/login?returnTo="+window.location},logoutClick:function(){window.location="/logout?returnTo="+window.location},render:function(){var t=i.createElement("div",{style:{width:"194px"}});if(!this.state.loaded)return t;if(this.state.loggedIn&&this.state.user){var e="";this.state.user.admin&&(e=i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/admin/invite"},this.__("Invite Users")))),t=i.createElement("li",null,i.createElement("div",{ref:"userButton",className:"chip user-dropdown-button omh-btn",style:{marginRight:"5px",marginLeft:"5px",backgroundColor:"#FFF"},"data-activates":this.props.id},i.createElement(l,{email:this.state.user.email}),this.state.user.display_name,i.createElement("i",{className:"material-icons right",style:{marginLeft:0,color:"#212121",height:"30px",lineHeight:"30px",width:"15px"}},"arrow_drop_down")),i.createElement("ul",{id:this.props.id,className:"dropdown-content",style:{top:"100px"}},i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/"+this.state.user.display_name+"/maps"},this.__("My Maps"))),i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/"+this.state.user.display_name+"/stories"},this.__("My Stories"))),i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/"+this.state.user.display_name+"/groups"},this.__("My Groups"))),i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/"+this.state.user.display_name+"/hubs"},this.__("My Hubs"))),i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/settings"},this.__("Settings"))),e,i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/logout"},this.__("Logout")))))}else{var n="",r={};this.props.sideNav||(r={marginLeft:"1px",marginRight:"5px"}),MAPHUBS_CONFIG.mapHubsPro||(n=i.createElement("a",{className:"btn",style:r,href:"/signup"},this.__("Sign Up"))),t=i.createElement("span",null,i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{className:"nav-link-item",style:{float:this.props.sideNav?"inherit":"left"},href:"#",onClick:this.loginClick},this.__("Login"))),n)}return t}});t.exports=f},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(170),r=n(189)(i),o=n(195),a=n(196),s=n(201)("stores/user-store"),u=n(205).checkClientError;t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{user:{},loggedIn:!1,loaded:!1}},reset:function(){this.setState(this.getInitialState())},storeDidUpdate:function(){s("store updated")},login:function(t){this.setState({user:t,loggedIn:!0,loaded:!0})},getUser:function(t){var e=this;a.post("/api/user/details/json").type("json").accept("json").end(function(n,i){u(i,n,t,function(t){n?t(n):i.body&&i.body.loggedIn?(e.login(i.body.user),t()):(e.setState({loaded:!0}),t(JSON.stringify(i.body)))})})},logout:function(){this.setState(this.getInitialState()),this.trigger(this.state)},register:function(){},updatePassword:function(t,e,n,i,r){return this.state.loggedIn&&this.state.user.id!==t?(s("User ID mismatch, will not send request"),void r("User session error, please clear browser sessions/cache and try again.")):void(this.state.loggedIn||n?a.post("/api/user/updatepassword").type("json").accept("json").send({user_id:t,password:e,pass_reset:n,_csrf:i}).end(function(t,e){u(e,t,r,function(e){e(t)})}):(s("Pass reset key not found"),r("User session error, please clear browser sessions/cache and try again.")))},forgotPassword:function(t,e,n){a.post("/api/user/forgotpassword").type("json").accept("json").send({email:t,_csrf:e}).end(function(t,e){u(e,t,n,function(e){e(t)})})},signup:function(t,e,n,i,r,o,s,l){a.post("/api/user/signup").type("json").accept("json").send({username:t,name:e,email:n,password:i,joinmailinglist:r,inviteKey:o,_csrf:s}).end(function(t,e){u(e,t,l,function(e){e(t)})})},joinMailingList:function(t,e,n){a.post("/api/user/mailinglistsignup").type("json").accept("json").send({email:t,_csrf:e}).end(function(t,e){u(e,t,n,function(e){e(t)})})},resendConfirmation:function(t,e){a.post("/api/user/resendconfirmation").type("json").accept("json").send({_csrf:t}).end(function(t,n){u(n,t,e,function(e){e(t)})})},checkUserNameAvailable:function(t,e){}})},function(t,e,n){"use strict";var i=n(170),r=i.createActions({login:{},logout:{},register:{},getUser:{},updatePassword:{},forgotPassword:{},checkUserNameAvailable:{},signup:{},resendConfirmation:{},joinMailingList:{}});t.exports=r},,,,,,function(t,e,n){"use strict";var i=n(202);t.exports=function(t){return i("maphubs:"+t)}},,,,function(t,e,n){"use strict";var i=n(201)("clientError");t.exports={checkClientError:function(t,e,n,r){e&&t&&t.body&&t.body.error?(i(t.body.error),n(t.body.error)):e?(i(e.message),n(e.message)):t&&t.body&&void 0!==t.body.success&&0==t.body.success?t.body.error?(i(t.body.error),n(t.body.error)):(i("unknown error"),n("unknown error")):t.body.error?(i(t.body.error),n(t.body.error)):r(t.body.success?n:n)}}},function(t,e,n){"use strict";var i=n(1),r=n(207),o=i.createClass({displayName:"Gravatar",propTypes:{email:i.PropTypes.string,emailHash:i.PropTypes.string,size:i.PropTypes.number},getDefaultProps:function(){return{size:30}},render:function(){var t=null;t=this.props.emailHash?this.props.emailHash:r.createHash("md5").update(this.props.email.trim().toLowerCase()).digest("hex");var e="https://www.gravatar.com/avatar/"+t;return e+=this.props.size?"?s="+2*this.props.size+"&d=mm":"?d=mm",i.createElement("img",{className:"circle",height:this.props.size,width:this.props.size,style:{height:this.props.size+"px",width:this.props.size+"px",border:"1px solid #bbbbbb"},src:e,alt:"User Profile Photo"})}});t.exports=o},function(t,e,n){(function(i){function r(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function o(t,e){for(var n in t)e(t[n],n)}var a=n(212);e.createHash=n(214),e.createHmac=n(226),e.randomBytes=function(t,e){if(!e||!e.call)return new i(a(t));try{e.call(this,void 0,new i(a(t)))}catch(t){e(t)}},e.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var s=n(227)(e);e.pbkdf2=s.pbkdf2,e.pbkdf2Sync=s.pbkdf2Sync,n(229)(e,t.exports),o(["createCredentials","createSign","createVerify","createDiffieHellman"],function(t){e[t]=function(){r("sorry,",t,"is not implemented yet")}})}).call(e,n(208).Buffer)},function(t,e,n){(function(t){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function r(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=a.prototype):(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,e,n)}function s(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,n,i):"string"==typeof e?h(t,e,n):d(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e,n,i){return u(e),e<=0?o(t,e):void 0!==n?"string"==typeof i?o(t,e).fill(n,i):o(t,e).fill(n):o(t,e)}function c(t,e){if(u(e),t=o(t,e<0?0:0|g(e)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|y(e,n);t=o(t,i);var r=t.write(e,n);return r!==i&&(t=t.slice(0,r)),t}function f(t,e){var n=e.length<0?0:0|g(e.length);t=o(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function p(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),a.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=a.prototype):t=f(t,e),t}function d(t,e){if(a.isBuffer(e)){var n=0|g(e.length);return t=o(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||J(e.length)?o(t,0):f(t,e);if("Buffer"===e.type&&Q(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function m(t){return+t!=t&&(t=0),a.alloc(+t)}function y(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(i)return H(t).length;e=(""+e).toLowerCase(),i=!0}}function v(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,n);case"utf8":case"utf-8":return N(this,e,n);case"ascii":return L(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function b(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function _(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=a.from(e,i)),a.isBuffer(e))return 0===e.length?-1:x(t,e,n,i,r);if("number"==typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):x(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function x(t,e,n,i,r){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}var l;if(r){var c=-1;for(l=n;l<s;l++)if(o(t,l)===o(e,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===u)return c*a}else c!==-1&&(l-=l-c),c=-1}else for(n+u>s&&(n=s-u),l=n;l>=0;l--){for(var h=!0,f=0;f<u;f++)if(o(t,l+f)!==o(e,f)){h=!1;break}if(h)return l}return-1}function w(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function E(t,e,n,i){return Y(H(e,t.length-n),t,n,i)}function S(t,e,n,i){return Y(q(e),t,n,i)}function M(t,e,n,i){return S(t,e,n,i)}function T(t,e,n,i){return Y(W(e),t,n,i)}function C(t,e,n,i){return Y(X(e,t.length-n),t,n,i)}function I(t,e,n){return 0===e&&n===t.length?$.fromByteArray(t):$.fromByteArray(t.slice(e,n))}function N(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o=t[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r+s<=n){var u,l,c,h;switch(s){case 1:o<128&&(a=o);break;case 2:u=t[r+1],128===(192&u)&&(h=(31&o)<<6|63&u,h>127&&(a=h));break;case 3:u=t[r+1],l=t[r+2],128===(192&u)&&128===(192&l)&&(h=(15&o)<<12|(63&u)<<6|63&l,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:u=t[r+1],l=t[r+2],c=t[r+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(h=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c,h>65535&&h<1114112&&(a=h))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),r+=s}return P(i)}function P(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=tt));return n}function L(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function A(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function k(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=K(t[o]);return r}function R(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function O(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,i,r,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function F(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function z(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function j(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(t,e,n,i,r){return r||j(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(t,e,n,i,23,4),n+4}function G(t,e,n,i,r){return r||j(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(t,e,n,i,52,8),n+8}function U(t){if(t=V(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function V(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function K(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){e=e||1/0;for(var n,i=t.length,r=null,o=[],a=0;a<i;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function X(t,e){for(var n,i,r,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function W(t){return $.toByteArray(U(t))}function Y(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function J(t){return t!==t}var $=n(209),Z=n(210),Q=n(211);e.Buffer=a,e.SlowBuffer=m,e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),e.kMaxLength=r(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,n){return s(null,t,e,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,n){return l(null,t,e,n)},a.allocUnsafe=function(t){return c(null,t)},a.allocUnsafeSlow=function(t){return c(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=a.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)b(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?N(this,0,t):v.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,n,i,r){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var o=r-i,s=n-e,u=Math.min(o,s),l=this.slice(i,r),c=t.slice(e,n),h=0;h<u;++h)if(l[h]!==c[h]){o=l[h],s=c[h];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},a.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},a.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},a.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return M(this,t,e,n);case"base64":return T(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;a.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(a.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=a.prototype;else{var r=e-t;i=new a(r,void 0);for(var o=0;o<r;++o)i[o]=this[o+t]}return i},a.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},a.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},a.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},a.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},a.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),Z.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),Z.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),Z.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),Z.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;D(this,t,e,n,r,0)}var o=1,a=0;for(this[e]=255&t;++a<n&&(o*=256);)this[e+a]=t/o&255;return e+n},a.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;D(this,t,e,n,r,0)}var o=n-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+n},a.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):F(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):F(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):z(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):z(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);D(this,t,e,n,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},a.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);D(this,t,e,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},a.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):F(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):F(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):z(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):z(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,n){return B(this,t,e,!0,n)},a.prototype.writeFloatBE=function(t,e,n){return B(this,t,e,!1,n)},a.prototype.writeDoubleLE=function(t,e,n){return G(this,t,e,!0,n)},a.prototype.writeDoubleBE=function(t,e,n){return G(this,t,e,!1,n)},a.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},a.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=a.isBuffer(t)?t:H(new a(t,i).toString()),u=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%u]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,function(){return this}())},function(t,e){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return 3*t.length/4-n(t)}function r(t){var e,i,r,o,a,s,u=t.length;a=n(t),s=new c(3*u/4-a),r=a>0?u-4:u;var h=0;for(e=0,i=0;e<r;e+=4,i+=3)o=l[t.charCodeAt(e)]<<18|l[t.charCodeAt(e+1)]<<12|l[t.charCodeAt(e+2)]<<6|l[t.charCodeAt(e+3)],s[h++]=o>>16&255,s[h++]=o>>8&255,s[h++]=255&o;return 2===a?(o=l[t.charCodeAt(e)]<<2|l[t.charCodeAt(e+1)]>>4,s[h++]=255&o):1===a&&(o=l[t.charCodeAt(e)]<<10|l[t.charCodeAt(e+1)]<<4|l[t.charCodeAt(e+2)]>>2,s[h++]=o>>8&255,s[h++]=255&o),s}function o(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}function a(t,e,n){for(var i,r=[],a=e;a<n;a+=3)i=(t[a]<<16)+(t[a+1]<<8)+t[a+2],r.push(o(i));return r.join("")}function s(t){for(var e,n=t.length,i=n%3,r="",o=[],s=16383,l=0,c=n-i;l<c;l+=s)o.push(a(t,l,l+s>c?c:l+s));return 1===i?(e=t[n-1],r+=u[e>>2],r+=u[e<<4&63],r+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],r+=u[e>>10],r+=u[e>>4&63],r+=u[e<<2&63],r+="="),o.push(r),o.join("")}e.byteLength=i,e.toByteArray=r,e.fromByteArray=s;for(var u=[],l=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=h.length;f<p;++f)u[f]=h[f],l[h.charCodeAt(f)]=f;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?r-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,i),o-=l}return(p?-1:1)*a*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var a,s,u,l=8*o-r-1,c=(1<<l)-1,h=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=d,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(e,i){!function(){var r=("undefined"==typeof window?e:window)||{};_crypto=r.crypto||r.msCrypto||n(213),t.exports=function(t){if(_crypto.getRandomValues){var e=new i(t);return _crypto.getRandomValues(e),e}if(_crypto.randomBytes)return _crypto.randomBytes(t);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(e,function(){return this}(),n(208).Buffer)},function(t,e){},function(t,e,n){(function(e){function i(t){return function(){var n=[],i={update:function(t,i){return e.isBuffer(t)||(t=new e(t,i)),n.push(t),this},digest:function(i){var r=e.concat(n),o=t(r);return n=null,i?o.toString(i):o}};return i}}var r=n(215),o=i(n(223)),a=i(n(225));t.exports=function(t){return"md5"===t?new o:"rmd160"===t?new a:r(t)}}).call(e,n(208).Buffer)},function(t,e,n){var e=t.exports=function(t){var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n},i=n(208).Buffer,r=n(216)(i);e.sha1=n(217)(i,r),e.sha256=n(221)(i,r),e.sha512=n(222)(i,r)},function(t,e){t.exports=function(t){function e(e,n){this._block=new t(e),this._finalSize=n,this._blockSize=e,this._len=0,this._s=0}return e.prototype.init=function(){this._s=0,this._len=0},e.prototype.update=function(e,n){"string"==typeof e&&(n=n||"utf8",e=new t(e,n));for(var i=this._len+=e.length,r=this._s=this._s||0,o=0,a=this._block;r<i;){for(var s=Math.min(e.length,o+this._blockSize-r%this._blockSize),u=s-o,l=0;l<u;l++)a[r%this._blockSize+l]=e[l+o];r+=u,o+=u,r%this._blockSize===0&&this._update(a)}return this._s=r,this},e.prototype.digest=function(t){var e=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),e%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(e,this._blockSize-4);var n=this._update(this._block)||this._hash();return t?n.toString(t):n},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e}},function(t,e,n){var i=n(218).inherits;t.exports=function(t,e){function n(){return d.length?d.pop().init():this instanceof n?(this._w=p,e.call(this,64,56),this._h=null,void this.init()):new n}function r(t,e,n,i){return t<20?e&n|~e&i:t<40?e^n^i:t<60?e&n|e&i|n&i:e^n^i}function o(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function a(t,e){return t+e|0}function s(t,e){return t<<e|t>>>32-e}var u=0,l=4,c=8,h=12,f=16,p=new("undefined"==typeof Int32Array?Array:Int32Array)(80),d=[];return i(n,e),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,e.prototype.init.call(this),this},n.prototype._POOL=d,n.prototype._update=function(t){var e,n,i,u,l,c,h,f,p,d;e=c=this._a,n=h=this._b,i=f=this._c,u=p=this._d,l=d=this._e;for(var g=this._w,m=0;m<80;m++){var y=g[m]=m<16?t.readInt32BE(4*m):s(g[m-3]^g[m-8]^g[m-14]^g[m-16],1),v=a(a(s(e,5),r(m,n,i,u)),a(a(l,y),o(m)));l=u,u=i,i=s(n,30),n=e,e=v}this._a=a(e,c),this._b=a(n,h),this._c=a(i,f),this._d=a(u,p),this._e=a(l,d)},n.prototype._hash=function(){d.length<100&&d.push(this);var e=new t(20);return e.writeInt32BE(0|this._a,u),e.writeInt32BE(0|this._b,l),e.writeInt32BE(0|this._c,c),e.writeInt32BE(0|this._d,h),e.writeInt32BE(0|this._e,f),e},n}},function(t,e,n){(function(t,i){function r(t,n){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(n)?i.showHidden=n:n&&e._extend(i,n),x(i.showHidden)&&(i.showHidden=!1),x(i.depth)&&(i.depth=2),x(i.colors)&&(i.colors=!1),x(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),u(i,t,i.depth)}function o(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,n,i){if(t.customInspect&&n&&T(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return b(r)||(r=u(t,r,i)),r}var o=l(t,n);if(o)return o;var a=Object.keys(n),g=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),M(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(n);if(0===a.length){if(T(n)){var m=n.name?": "+n.name:"";return t.stylize("[Function"+m+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return t.stylize(Date.prototype.toString.call(n),"date");if(M(n))return c(n)}var y="",v=!1,_=["{","}"];if(d(n)&&(v=!0,_=["[","]"]),T(n)){var x=n.name?": "+n.name:"";y=" [Function"+x+"]"}if(w(n)&&(y=" "+RegExp.prototype.toString.call(n)),S(n)&&(y=" "+Date.prototype.toUTCString.call(n)),M(n)&&(y=" "+c(n)),0===a.length&&(!v||0==n.length))return _[0]+y+_[1];if(i<0)return w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var E;return E=v?h(t,n,i,g,a):a.map(function(e){return f(t,n,i,g,e,v)}),t.seen.pop(),p(E,y,_)}function l(t,e){if(x(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return v(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,i,r){for(var o=[],a=0,s=e.length;a<s;++a)L(e,String(a))?o.push(f(t,e,n,i,String(a),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(t,e,n,i,r,!0))}),o}function f(t,e,n,i,r,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},l.get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),L(i,r)||(a="["+r+"]"),s||(t.seen.indexOf(l.value)<0?(s=m(n)?u(t,l.value,null):u(t,l.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),x(a)){if(o&&r.match(/^\d+$/))return s;a=JSON.stringify(""+r),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,n){var i=0,r=t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function m(t){return null===t}function y(t){return null==t}function v(t){return"number"==typeof t}function b(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function x(t){return void 0===t}function w(t){return E(t)&&"[object RegExp]"===I(t)}function E(t){return"object"==typeof t&&null!==t}function S(t){return E(t)&&"[object Date]"===I(t)}function M(t){return E(t)&&("[object Error]"===I(t)||t instanceof Error)}function T(t){return"function"==typeof t}function C(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function I(t){return Object.prototype.toString.call(t)}function N(t){return t<10?"0"+t.toString(10):t.toString(10)}function P(){var t=new Date,e=[N(t.getHours()),N(t.getMinutes()),N(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var A=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(t).replace(A,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),s=i[n];n<o;s=i[++n])a+=m(s)||!E(s)?" "+s:" "+r(s);return a},e.deprecate=function(n,r){function o(){if(!a){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),a=!0}return n.apply(this,arguments)}if(x(t.process))return function(){return e.deprecate(n,r).apply(this,arguments)};if(i.noDeprecation===!0)return n;var a=!1;return o};var k,R={};e.debuglog=function(t){if(x(k)&&(k={APP_ENV:"browser",NODE_ENV:"production"}.NODE_DEBUG||""),t=t.toUpperCase(),!R[t])if(new RegExp("\\b"+t+"\\b","i").test(k)){var n=i.pid;R[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else R[t]=function(){};return R[t]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=g,e.isNull=m,e.isNullOrUndefined=y,e.isNumber=v,e.isString=b,e.isSymbol=_,e.isUndefined=x,e.isRegExp=w,e.isObject=E,e.isDate=S,e.isError=M,e.isFunction=T,e.isPrimitive=C,e.isBuffer=n(219);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",P(),e.format.apply(e,arguments))},e.inherits=n(220),e._extend=function(t,e){if(!e||!E(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(e,function(){return this}(),n(109))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{
constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){var i=n(218).inherits;t.exports=function(t,e){function n(){this.init(),this._w=p,e.call(this,64,56)}function r(t,e){return t>>>e|t<<32-e}function o(t,e){return t>>>e}function a(t,e,n){return t&e^~t&n}function s(t,e,n){return t&e^t&n^e&n}function u(t){return r(t,2)^r(t,13)^r(t,22)}function l(t){return r(t,6)^r(t,11)^r(t,25)}function c(t){return r(t,7)^r(t,18)^o(t,3)}function h(t){return r(t,17)^r(t,19)^o(t,10)}var f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);return i(n,e),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},n.prototype._update=function(t){var e,n,i,r,o,p,d,g,m,y,v=this._w;e=0|this._a,n=0|this._b,i=0|this._c,r=0|this._d,o=0|this._e,p=0|this._f,d=0|this._g,g=0|this._h;for(var b=0;b<64;b++){var _=v[b]=b<16?t.readInt32BE(4*b):h(v[b-2])+v[b-7]+c(v[b-15])+v[b-16];m=g+l(o)+a(o,p,d)+f[b]+_,y=u(e)+s(e,n,i),g=d,d=p,p=o,o=r+m,r=i,i=n,n=e,e=m+y}this._a=e+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=r+this._d|0,this._e=o+this._e|0,this._f=p+this._f|0,this._g=d+this._g|0,this._h=g+this._h|0},n.prototype._hash=function(){var e=new t(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},n}},function(t,e,n){var i=n(218).inherits;t.exports=function(t,e){function n(){this.init(),this._w=u,e.call(this,128,112)}function r(t,e,n){return t>>>n|e<<32-n}function o(t,e,n){return t&e^~t&n}function a(t,e,n){return t&e^t&n^e&n}var s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);return i(n,e),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},n.prototype._update=function(t){var e,n,i,u,l,c,h,f,p,d,g,m,y,v,b,_,x=this._w;e=0|this._a,n=0|this._b,i=0|this._c,u=0|this._d,l=0|this._e,c=0|this._f,h=0|this._g,f=0|this._h,p=0|this._al,d=0|this._bl,g=0|this._cl,m=0|this._dl,y=0|this._el,v=0|this._fl,b=0|this._gl,_=0|this._hl;for(var w=0;w<80;w++){var E,S,M=2*w;if(w<16)E=x[M]=t.readInt32BE(4*M),S=x[M+1]=t.readInt32BE(4*M+4);else{var T=x[M-30],C=x[M-30+1],I=r(T,C,1)^r(T,C,8)^T>>>7,N=r(C,T,1)^r(C,T,8)^r(C,T,7);T=x[M-4],C=x[M-4+1];var P=r(T,C,19)^r(C,T,29)^T>>>6,L=r(C,T,19)^r(T,C,29)^r(C,T,6),A=x[M-14],k=x[M-14+1],R=x[M-32],O=x[M-32+1];S=N+k,E=I+A+(S>>>0<N>>>0?1:0),S+=L,E=E+P+(S>>>0<L>>>0?1:0),S+=O,E=E+R+(S>>>0<O>>>0?1:0),x[M]=E,x[M+1]=S}var D=a(e,n,i),F=a(p,d,g),z=r(e,p,28)^r(p,e,2)^r(p,e,7),j=r(p,e,28)^r(e,p,2)^r(e,p,7),B=r(l,y,14)^r(l,y,18)^r(y,l,9),G=r(y,l,14)^r(y,l,18)^r(l,y,9),U=s[M],V=s[M+1],K=o(l,c,h),H=o(y,v,b),q=_+G,X=f+B+(q>>>0<_>>>0?1:0);q+=H,X=X+K+(q>>>0<H>>>0?1:0),q+=V,X=X+U+(q>>>0<V>>>0?1:0),q+=S,X=X+E+(q>>>0<S>>>0?1:0);var W=j+F,Y=z+D+(W>>>0<j>>>0?1:0);f=h,_=b,h=c,b=v,c=l,v=y,y=m+q|0,l=u+X+(y>>>0<m>>>0?1:0)|0,u=i,m=g,i=n,g=d,n=e,d=p,p=q+W|0,e=X+Y+(p>>>0<q>>>0?1:0)|0}this._al=this._al+p|0,this._bl=this._bl+d|0,this._cl=this._cl+g|0,this._dl=this._dl+m|0,this._el=this._el+y|0,this._fl=this._fl+v|0,this._gl=this._gl+b|0,this._hl=this._hl+_|0,this._a=this._a+e+(this._al>>>0<p>>>0?1:0)|0,this._b=this._b+n+(this._bl>>>0<d>>>0?1:0)|0,this._c=this._c+i+(this._cl>>>0<g>>>0?1:0)|0,this._d=this._d+u+(this._dl>>>0<m>>>0?1:0)|0,this._e=this._e+l+(this._el>>>0<y>>>0?1:0)|0,this._f=this._f+c+(this._fl>>>0<v>>>0?1:0)|0,this._g=this._g+h+(this._gl>>>0<b>>>0?1:0)|0,this._h=this._h+f+(this._hl>>>0<_>>>0?1:0)|0},n.prototype._hash=function(){function e(t,e,i){n.writeInt32BE(t,i),n.writeInt32BE(e,i+4)}var n=new t(64);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),e(this._g,this._gl,48),e(this._h,this._hl,56),n},n}},function(t,e,n){function i(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,i=-271733879,r=-1732584194,c=271733878,h=0;h<t.length;h+=16){var f=n,p=i,d=r,g=c;n=o(n,i,r,c,t[h+0],7,-680876936),c=o(c,n,i,r,t[h+1],12,-389564586),r=o(r,c,n,i,t[h+2],17,606105819),i=o(i,r,c,n,t[h+3],22,-1044525330),n=o(n,i,r,c,t[h+4],7,-176418897),c=o(c,n,i,r,t[h+5],12,1200080426),r=o(r,c,n,i,t[h+6],17,-1473231341),i=o(i,r,c,n,t[h+7],22,-45705983),n=o(n,i,r,c,t[h+8],7,1770035416),c=o(c,n,i,r,t[h+9],12,-1958414417),r=o(r,c,n,i,t[h+10],17,-42063),i=o(i,r,c,n,t[h+11],22,-1990404162),n=o(n,i,r,c,t[h+12],7,1804603682),c=o(c,n,i,r,t[h+13],12,-40341101),r=o(r,c,n,i,t[h+14],17,-1502002290),i=o(i,r,c,n,t[h+15],22,1236535329),n=a(n,i,r,c,t[h+1],5,-165796510),c=a(c,n,i,r,t[h+6],9,-1069501632),r=a(r,c,n,i,t[h+11],14,643717713),i=a(i,r,c,n,t[h+0],20,-373897302),n=a(n,i,r,c,t[h+5],5,-701558691),c=a(c,n,i,r,t[h+10],9,38016083),r=a(r,c,n,i,t[h+15],14,-660478335),i=a(i,r,c,n,t[h+4],20,-405537848),n=a(n,i,r,c,t[h+9],5,568446438),c=a(c,n,i,r,t[h+14],9,-1019803690),r=a(r,c,n,i,t[h+3],14,-187363961),i=a(i,r,c,n,t[h+8],20,1163531501),n=a(n,i,r,c,t[h+13],5,-1444681467),c=a(c,n,i,r,t[h+2],9,-51403784),r=a(r,c,n,i,t[h+7],14,1735328473),i=a(i,r,c,n,t[h+12],20,-1926607734),n=s(n,i,r,c,t[h+5],4,-378558),c=s(c,n,i,r,t[h+8],11,-2022574463),r=s(r,c,n,i,t[h+11],16,1839030562),i=s(i,r,c,n,t[h+14],23,-35309556),n=s(n,i,r,c,t[h+1],4,-1530992060),c=s(c,n,i,r,t[h+4],11,1272893353),r=s(r,c,n,i,t[h+7],16,-155497632),i=s(i,r,c,n,t[h+10],23,-1094730640),n=s(n,i,r,c,t[h+13],4,681279174),c=s(c,n,i,r,t[h+0],11,-358537222),r=s(r,c,n,i,t[h+3],16,-722521979),i=s(i,r,c,n,t[h+6],23,76029189),n=s(n,i,r,c,t[h+9],4,-640364487),c=s(c,n,i,r,t[h+12],11,-421815835),r=s(r,c,n,i,t[h+15],16,530742520),i=s(i,r,c,n,t[h+2],23,-995338651),n=u(n,i,r,c,t[h+0],6,-198630844),c=u(c,n,i,r,t[h+7],10,1126891415),r=u(r,c,n,i,t[h+14],15,-1416354905),i=u(i,r,c,n,t[h+5],21,-57434055),n=u(n,i,r,c,t[h+12],6,1700485571),c=u(c,n,i,r,t[h+3],10,-1894986606),r=u(r,c,n,i,t[h+10],15,-1051523),i=u(i,r,c,n,t[h+1],21,-2054922799),n=u(n,i,r,c,t[h+8],6,1873313359),c=u(c,n,i,r,t[h+15],10,-30611744),r=u(r,c,n,i,t[h+6],15,-1560198380),i=u(i,r,c,n,t[h+13],21,1309151649),n=u(n,i,r,c,t[h+4],6,-145523070),c=u(c,n,i,r,t[h+11],10,-1120210379),r=u(r,c,n,i,t[h+2],15,718787259),i=u(i,r,c,n,t[h+9],21,-343485551),n=l(n,f),i=l(i,p),r=l(r,d),c=l(c,g)}return Array(n,i,r,c)}function r(t,e,n,i,r,o){return l(c(l(l(e,t),l(i,o)),r),n)}function o(t,e,n,i,o,a,s){return r(e&n|~e&i,t,e,o,a,s)}function a(t,e,n,i,o,a,s){return r(e&i|n&~i,t,e,o,a,s)}function s(t,e,n,i,o,a,s){return r(e^n^i,t,e,o,a,s)}function u(t,e,n,i,o,a,s){return r(n^(e|~i),t,e,o,a,s)}function l(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n}function c(t,e){return t<<e|t>>>32-e}var h=n(224);t.exports=function(t){return h.hash(t,i,16)}},function(t,e,n){(function(e){function n(t,n){if(t.length%o!==0){var i=t.length+(o-t.length%o);t=e.concat([t,a],i)}for(var r=[],s=n?t.readInt32BE:t.readInt32LE,u=0;u<t.length;u+=o)r.push(s.call(t,u));return r}function i(t,n,i){for(var r=new e(n),o=i?r.writeInt32BE:r.writeInt32LE,a=0;a<t.length;a++)o.call(r,t[a],4*a,!0);return r}function r(t,r,o,a){e.isBuffer(t)||(t=new e(t));var u=r(n(t,a),t.length*s);return i(u,o,a)}var o=4,a=new e(o);a.fill(0);var s=8;t.exports={hash:r}}).call(e,n(208).Buffer)},function(t,e,n){(function(e){function n(t,e,n){return t^e^n}function i(t,e,n){return t&e|~t&n}function r(t,e,n){return(t|~e)^n}function o(t,e,n){return t&n|e&~n}function a(t,e,n){return t^(e|~n)}function s(t,e){return t<<e|t>>>32-e}function u(t){var n=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var i=g(t),r=8*t.length,o=8*t.length;i[r>>>5]|=128<<24-r%32,i[(r+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var a=0;a<i.length;a+=16)y(n,i,a);for(var a=0;a<5;a++){var s=n[a];n[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var u=m(n);return new e(u)}t.exports=u;/** @preserve
	(c) 2012 by Cédric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
var l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],f=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0],g=function(t){for(var e=[],n=0,i=0;n<t.length;n++,i+=8)e[i>>>5]|=t[n]<<24-i%32;return e},m=function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},y=function(t,e,u){for(var g=0;g<16;g++){var m=u+g,y=e[m];e[m]=16711935&(y<<8|y>>>24)|4278255360&(y<<24|y>>>8)}var v,b,_,x,w,E,S,M,T,C;E=v=t[0],S=b=t[1],M=_=t[2],T=x=t[3],C=w=t[4];for(var I,g=0;g<80;g+=1)I=v+e[u+l[g]]|0,I+=g<16?n(b,_,x)+p[0]:g<32?i(b,_,x)+p[1]:g<48?r(b,_,x)+p[2]:g<64?o(b,_,x)+p[3]:a(b,_,x)+p[4],I|=0,I=s(I,h[g]),I=I+w|0,v=w,w=x,x=s(_,10),_=b,b=I,I=E+e[u+c[g]]|0,I+=g<16?a(S,M,T)+d[0]:g<32?o(S,M,T)+d[1]:g<48?r(S,M,T)+d[2]:g<64?i(S,M,T)+d[3]:n(S,M,T)+d[4],I|=0,I=s(I,f[g]),I=I+C|0,E=C,C=T,T=s(M,10),M=S,S=I;I=t[1]+_+T|0,t[1]=t[2]+x+C|0,t[2]=t[3]+w+E|0,t[3]=t[4]+v+S|0,t[4]=t[0]+b+M|0,t[0]=I}}).call(e,n(208).Buffer)},function(t,e,n){(function(e){function i(t,n){if(!(this instanceof i))return new i(t,n);this._opad=u,this._alg=t;var a="sha512"===t?128:64;n=this._key=e.isBuffer(n)?n:new e(n),n.length>a?n=r(t).update(n).digest():n.length<a&&(n=e.concat([n,o],a));for(var s=this._ipad=new e(a),u=this._opad=new e(a),l=0;l<a;l++)s[l]=54^n[l],u[l]=92^n[l];this._hash=r(t).update(s)}var r=n(214),o=new e(128);o.fill(0),t.exports=i,i.prototype.update=function(t,e){return this._hash.update(t,e),this},i.prototype.digest=function(t){var e=this._hash.digest();return r(this._alg).update(this._opad).update(e).digest(t)}}).call(e,n(208).Buffer)},function(t,e,n){var i=n(228);t.exports=function(t,e){e=e||{};var n=i(t);return e.pbkdf2=n.pbkdf2,e.pbkdf2Sync=n.pbkdf2Sync,e}},function(t,e,n){(function(e){t.exports=function(t){function n(t,e,n,r,o,a){if("function"==typeof o&&(a=o,o=void 0),"function"!=typeof a)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var s;try{s=i(t,e,n,r,o)}catch(t){return a(t)}a(void 0,s)})}function i(n,i,r,o,a){if("number"!=typeof r)throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(o<0)throw new TypeError("Bad key length");a=a||"sha1",e.isBuffer(n)||(n=new e(n)),e.isBuffer(i)||(i=new e(i));var s,u,l,c=1,h=new e(o),f=new e(i.length+4);i.copy(f,0,0,i.length);for(var p=1;p<=c;p++){f.writeUInt32BE(p,i.length);var d=t.createHmac(a,n).update(f).digest();if(!s&&(s=d.length,l=new e(s),c=Math.ceil(o/s),u=o-(c-1)*s,o>(Math.pow(2,32)-1)*s))throw new TypeError("keylen exceeds maximum length");d.copy(l,0,0,s);for(var g=1;g<r;g++){d=t.createHmac(a,n).update(d).digest();for(var m=0;m<s;m++)l[m]^=d[m]}var y=(p-1)*s,v=p==c?u:s;l.copy(h,y,0,v)}return h}return{pbkdf2:n,pbkdf2Sync:i}}}).call(e,n(208).Buffer)},function(t,e,n){t.exports=function(t,e){function i(){return Object.keys(a)}e=e||{};var r=n(230)(t);e.createCipher=r.createCipher,e.createCipheriv=r.createCipheriv;var o=n(265)(t);e.createDecipher=o.createDecipher,e.createDecipheriv=o.createDecipheriv;var a=n(256);e.listCiphers=i}},function(t,e,n){(function(e){function i(t,n,s){return this instanceof i?(a.call(this),this._cache=new r,this._cipher=new o.AES(n),this._prev=new e(s.length),s.copy(this._prev),void(this._mode=t)):new i(t,n,s)}function r(){return this instanceof r?void(this.cache=new e("")):new r}var o=n(231),a=n(232),s=n(235),u=n(256),l=n(257),c=n(258);s(i,a),i.prototype._transform=function(t,e,n){this._cache.add(t);for(var i,r;i=this._cache.get();)r=this._mode.encrypt(this,i),this.push(r);n()},i.prototype._flush=function(t){var e=this._cache.flush();this.push(this._mode.encrypt(this,e)),this._cipher.scrub(),t()},r.prototype.add=function(t){this.cache=e.concat([this.cache,t])},r.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},r.prototype.flush=function(){for(var t=16-this.cache.length,n=new e(t),i=-1;++i<t;)n.writeUInt8(t,i);var r=e.concat([this.cache,n]);return r};var h={ECB:n(259),CBC:n(260),CFB:n(262),OFB:n(263),CTR:n(264)};t.exports=function(t){function n(t,n,r){var o=u[t];if(!o)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=new e(r)),"string"==typeof n&&(n=new e(n)),n.length!==o.key/8)throw new TypeError("invalid key length "+n.length);if(r.length!==o.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===o.type?new c(h[o.mode],n,r):new i(h[o.mode],n,r)}function r(e,i){var r=u[e];if(!r)throw new TypeError("invalid suite type");var o=l(t,i,r.key,r.iv);return n(e,o.key,o.iv)}return{createCipher:r,createCipheriv:n}}}).call(e,n(208).Buffer)},function(t,e,n){(function(t){function n(t){var e,n;return e=t>s||t<0?(n=Math.abs(t)%s,t<0?s-n:n):t}function i(t){var e,n,i;for(e=n=0,i=t.length;0<=i?n<i:n>i;e=0<=i?++n:--n)t[e]=0;return!1}function r(){var t;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var e,n;for(n=[],t=e=0;e<4;t=++e)n.push([]);return n}(),this.INV_SUB_MIX=function(){var e,n;for(n=[],t=e=0;e<4;t=++e)n.push([]);return n}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function o(t){for(var e=t.length/4,n=new Array(e),i=-1;++i<e;)n[i]=t.readUInt32BE(4*i);return n}function a(t){this._key=o(t),this._doReset()}var s=Math.pow(2,32);r.prototype.init=function(){var t,e,n,i,r,o,a,s,u,l;for(t=function(){var t,n;for(n=[],e=t=0;t<256;e=++t)e<128?n.push(e<<1):n.push(e<<1^283);return n}(),r=0,u=0,e=l=0;l<256;e=++l)n=u^u<<1^u<<2^u<<3^u<<4,n=n>>>8^255&n^99,this.SBOX[r]=n,this.INV_SBOX[n]=r,o=t[r],a=t[o],s=t[a],i=257*t[n]^16843008*n,this.SUB_MIX[0][r]=i<<24|i>>>8,this.SUB_MIX[1][r]=i<<16|i>>>16,this.SUB_MIX[2][r]=i<<8|i>>>24,this.SUB_MIX[3][r]=i,i=16843009*s^65537*a^257*o^16843008*r,this.INV_SUB_MIX[0][n]=i<<24|i>>>8,this.INV_SUB_MIX[1][n]=i<<16|i>>>16,this.INV_SUB_MIX[2][n]=i<<8|i>>>24,this.INV_SUB_MIX[3][n]=i,0===r?r=u=1:(r=o^t[t[t[s^o]]],u^=t[t[u]]);return!0};var u=new r;a.blockSize=16,a.prototype.blockSize=a.blockSize,a.keySize=32,a.prototype.keySize=a.keySize,a.ivSize=a.blockSize,a.prototype.ivSize=a.ivSize,a.prototype._doReset=function(){var t,e,n,i,r,o,a,s;for(n=this._key,e=n.length,this._nRounds=e+6,r=4*(this._nRounds+1),this._keySchedule=[],i=a=0;0<=r?a<r:a>r;i=0<=r?++a:--a)this._keySchedule[i]=i<e?n[i]:(o=this._keySchedule[i-1],i%e===0?(o=o<<8|o>>>24,o=u.SBOX[o>>>24]<<24|u.SBOX[o>>>16&255]<<16|u.SBOX[o>>>8&255]<<8|u.SBOX[255&o],o^=u.RCON[i/e|0]<<24):e>6&&i%e===4?o=u.SBOX[o>>>24]<<24|u.SBOX[o>>>16&255]<<16|u.SBOX[o>>>8&255]<<8|u.SBOX[255&o]:void 0,this._keySchedule[i-e]^o);for(this._invKeySchedule=[],t=s=0;0<=r?s<r:s>r;t=0<=r?++s:--s)i=r-t,o=this._keySchedule[i-(t%4?0:4)],this._invKeySchedule[t]=t<4||i<=4?o:u.INV_SUB_MIX[0][u.SBOX[o>>>24]]^u.INV_SUB_MIX[1][u.SBOX[o>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[o>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&o]];return!0},a.prototype.encryptBlock=function(e){e=o(new t(e));var n=this._doCryptBlock(e,this._keySchedule,u.SUB_MIX,u.SBOX),i=new t(16);return i.writeUInt32BE(n[0],0),i.writeUInt32BE(n[1],4),i.writeUInt32BE(n[2],8),i.writeUInt32BE(n[3],12),i},a.prototype.decryptBlock=function(e){e=o(new t(e));var n=[e[3],e[1]];e[1]=n[0],e[3]=n[1];var i=this._doCryptBlock(e,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX),r=new t(16);return r.writeUInt32BE(i[0],0),r.writeUInt32BE(i[3],4),r.writeUInt32BE(i[2],8),r.writeUInt32BE(i[1],12),r},a.prototype.scrub=function(){i(this._keySchedule),i(this._invKeySchedule),i(this._key)},a.prototype._doCryptBlock=function(t,e,i,r){var o,a,s,u,l,c,h,f,p,d,g,m;for(s=t[0]^e[0],u=t[1]^e[1],l=t[2]^e[2],c=t[3]^e[3],o=4,a=g=1,m=this._nRounds;1<=m?g<m:g>m;a=1<=m?++g:--g)h=i[0][s>>>24]^i[1][u>>>16&255]^i[2][l>>>8&255]^i[3][255&c]^e[o++],f=i[0][u>>>24]^i[1][l>>>16&255]^i[2][c>>>8&255]^i[3][255&s]^e[o++],p=i[0][l>>>24]^i[1][c>>>16&255]^i[2][s>>>8&255]^i[3][255&u]^e[o++],d=i[0][c>>>24]^i[1][s>>>16&255]^i[2][u>>>8&255]^i[3][255&l]^e[o++],s=h,u=f,l=p,c=d;return h=(r[s>>>24]<<24|r[u>>>16&255]<<16|r[l>>>8&255]<<8|r[255&c])^e[o++],f=(r[u>>>24]<<24|r[l>>>16&255]<<16|r[c>>>8&255]<<8|r[255&s])^e[o++],p=(r[l>>>24]<<24|r[c>>>16&255]<<16|r[s>>>8&255]<<8|r[255&u])^e[o++],d=(r[c>>>24]<<24|r[s>>>16&255]<<16|r[u>>>8&255]<<8|r[255&l])^e[o++],[n(h),n(f),n(p),n(d)]},e.AES=a}).call(e,n(208).Buffer)},function(t,e,n){(function(e){function i(){r.call(this)}var r=n(233).Transform,o=n(235);t.exports=i,o(i,r),i.prototype.update=function(t,n,i){this.write(t,n);for(var r,o=new e("");r=this.read();)o=e.concat([o,r]);return i&&(o=o.toString(i)),o},i.prototype.final=function(t){this.end();for(var n,i=new e("");n=this.read();)i=e.concat([i,n]);return t&&(i=i.toString(t)),i}}).call(e,n(208).Buffer)},function(t,e,n){function i(){r.call(this)}t.exports=i;var r=n(234).EventEmitter,o=n(235);o(i,r),i.Readable=n(236),i.Writable=n(252),i.Duplex=n(253),i.Transform=n(254),i.PassThrough=n(255),i.Stream=i,i.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&l.pause&&l.pause()}function i(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,t.end())}function a(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function s(t){if(u(),0===r.listenerCount(this,"error"))throw t}function u(){l.removeListener("data",n),t.removeListener("drain",i),l.removeListener("end",o),l.removeListener("close",a),l.removeListener("error",s),t.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),t.removeListener("close",u)}var l=this;l.on("data",n),t.on("drain",i),t._isStdio||e&&e.end===!1||(l.on("end",o),l.on("close",a));var c=!1;return l.on("error",s),t.on("error",s),l.on("end",u),l.on("close",u),t.on("close",u),t.emit("pipe",l),t}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;u<r;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(i){var r=function(){try{return n(233)}catch(t){}}();e=t.exports=n(237),e.Stream=r||e,e.Readable=e,e.Writable=n(245),e.Duplex=n(244),e.Transform=n(250),e.PassThrough=n(251),!i.browser&&"disable"==={APP_ENV:"browser",NODE_ENV:"production"}.READABLE_STREAM&&r&&(t.exports=r)}).call(e,n(109))},function(t,e,n){(function(e){"use strict";function i(t,e,n){return"function"==typeof t.prependListener?t.prependListener(e,n):void(t._events&&t._events[e]?L(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n))}function r(t,e){N=N||n(244),t=t||{},this.objectMode=!!t.objectMode,e instanceof N&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(j||(j=n(249).StringDecoder),this.decoder=new j(t.encoding),this.encoding=t.encoding)}function o(t){return N=N||n(244),this instanceof o?(this._readableState=new r(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void A.call(this)):new o(t)}function a(t,e,n,i,r){var o=c(e,n);if(o)t.emit("error",o);else if(null===n)e.reading=!1,h(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!r){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&r){var u=new Error("stream.unshift() after end event");t.emit("error",u)}else{var l;!e.decoder||r||i||(n=e.decoder.write(n),l=!e.objectMode&&0===n.length),r||(e.reading=!1),l||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&f(t))),d(t,e)}else r||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function u(t){return t>=G?t=G:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function l(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=u(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function c(t,e){var n=null;return R.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function h(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,f(t)}}function f(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(z("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?P(p,t):p(t))}function p(t){z("emit readable"),t.emit("readable"),_(t)}function d(t,e){e.readingMore||(e.readingMore=!0,P(g,t,e))}function g(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(z("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function m(t){return function(){var e=t._readableState;z("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&k(t,"data")&&(e.flowing=!0,_(t))}}function y(t){z("readable nexttick read 0"),t.read(0)}function v(t,e){e.resumeScheduled||(e.resumeScheduled=!0,P(b,t,e))}function b(t,e){e.reading||(z("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),_(t),e.flowing&&!e.reading&&t.read(0)}function _(t){var e=t._readableState;for(z("flow",e.flowing);e.flowing&&null!==t.read(););}function x(t,e){if(0===e.length)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=w(t,e.buffer,e.decoder),n}function w(t,e,n){var i;return t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():n?E(t,e):S(t,e),i}function E(t,e){var n=e.head,i=1,r=n.data;for(t-=r.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(r+=a===o.length?o:o.slice(0,t),t-=a,0===t){a===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++i}return e.length-=i,r}function S(t,e){var n=O.allocUnsafe(t),i=e.head,r=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var o=i.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),t-=a,0===t){a===o.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(a));break}++r}return e.length-=r,n}function M(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,P(T,e,t))}function T(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function C(t,e){for(var n=0,i=t.length;n<i;n++)e(t[n],n)}function I(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}t.exports=o;var N,P=n(238),L=n(239);o.ReadableState=r;var A,k=(n(234).EventEmitter,function(t,e){return t.listeners(e).length});!function(){try{A=n(233)}catch(t){}finally{A||(A=n(234).EventEmitter)}}();var R=n(208).Buffer,O=n(240),D=n(241);D.inherits=n(235);var F=n(242),z=void 0;z=F&&F.debuglog?F.debuglog("stream"):function(){};var j,B=n(243);D.inherits(o,A),o.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding,e!==n.encoding&&(t=O.from(t,e),e="")),a(this,n,t,e,!1)},o.prototype.unshift=function(t){var e=this._readableState;return a(this,e,t,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(t){return j||(j=n(249).StringDecoder),this._readableState.decoder=new j(t),this._readableState.encoding=t,this};var G=8388608;o.prototype.read=function(t){z("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return z("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?M(this):f(this),null;if(t=l(t,e),0===t&&e.ended)return 0===e.length&&M(this),null;var i=e.needReadable;z("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,z("length less than watermark",i)),e.ended||e.reading?(i=!1,z("reading or ended",i)):i&&(z("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=l(n,e)));var r;return r=t>0?x(t,e):null,null===r?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&M(this)),null!==r&&this.emit("data",r),r},o.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(t,n){function r(t){z("onunpipe"),t===f&&a()}function o(){z("onend"),t.end()}function a(){z("cleanup"),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("drain",y),t.removeListener("error",u),t.removeListener("unpipe",r),f.removeListener("end",o),f.removeListener("end",a),f.removeListener("data",s),v=!0,!p.awaitDrain||t._writableState&&!t._writableState.needDrain||y()}function s(e){z("ondata"),b=!1;var n=t.write(e);!1!==n||b||((1===p.pipesCount&&p.pipes===t||p.pipesCount>1&&I(p.pipes,t)!==-1)&&!v&&(z("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,b=!0),f.pause())}function u(e){z("onerror",e),h(),t.removeListener("error",u),0===k(t,"error")&&t.emit("error",e)}function l(){t.removeListener("finish",c),h()}function c(){z("onfinish"),t.removeListener("close",l),h()}function h(){z("unpipe"),f.unpipe(t)}var f=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=t;break;case 1:p.pipes=[p.pipes,t];break;default:p.pipes.push(t)}p.pipesCount+=1,z("pipe count=%d opts=%j",p.pipesCount,n);var d=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,g=d?o:a;p.endEmitted?P(g):f.once("end",g),t.on("unpipe",r);var y=m(f);t.on("drain",y);var v=!1,b=!1;return f.on("data",s),i(t,"error",u),t.once("close",l),t.once("finish",c),t.emit("pipe",f),p.flowing||(z("pipe resume"),f.resume()),t},o.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this);return this}var o=I(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},o.prototype.on=function(t,e){var n=A.prototype.on.call(this,t,e);if("data"===t)this._readableState.flowing!==!1&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&f(this,i):P(y,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var t=this._readableState;return t.flowing||(z("resume"),t.flowing=!0,v(this,t)),this},o.prototype.pause=function(){return z("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(z("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(t){var e=this._readableState,n=!1,i=this;t.on("end",function(){if(z("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(r){if(z("wrapped data"),e.decoder&&(r=e.decoder.write(r)),(!e.objectMode||null!==r&&void 0!==r)&&(e.objectMode||r&&r.length)){var o=i.push(r);o||(n=!0,t.pause())}});for(var r in t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return C(o,function(e){t.on(e,i.emit.bind(i,e))}),i._read=function(e){z("wrapped _read",e),n&&(n=!1,t.resume())},i},o._fromList=x}).call(e,n(109))},function(t,e,n){(function(e){"use strict";function n(t,n,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,i)});case 4:return e.nextTick(function(){t.call(null,n,i,r)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=n:t.exports=e.nextTick}).call(e,n(109))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){"use strict";var i=n(208),r=i.Buffer,o=i.SlowBuffer,a=i.kMaxLength||2147483647;e.alloc=function(t,e,n){if("function"==typeof r.alloc)return r.alloc(t,e,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof t)throw new TypeError("size must be a number");if(t>a)throw new RangeError("size is too large");var i=n,o=e;void 0===o&&(i=void 0,o=0);var s=new r(t);if("string"==typeof o)for(var u=new r(o,i),l=u.length,c=-1;++c<t;)s[c]=u[c%l];else s.fill(o);return s},e.allocUnsafe=function(t){if("function"==typeof r.allocUnsafe)return r.allocUnsafe(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>a)throw new RangeError("size is too large");return new r(t)},e.from=function(e,n,i){if("function"==typeof r.from&&(!t.Uint8Array||Uint8Array.from!==r.from))return r.from(e,n,i);if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("string"==typeof e)return new r(e,n);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=n;if(1===arguments.length)return new r(e);"undefined"==typeof o&&(o=0);var a=i;if("undefined"==typeof a&&(a=e.byteLength-o),o>=e.byteLength)throw new RangeError("'offset' is out of bounds");if(a>e.byteLength-o)throw new RangeError("'length' is out of bounds");return new r(e.slice(o,o+a))}if(r.isBuffer(e)){var s=new r(e.length);return e.copy(s,0,0,e.length),s}if(e){if(Array.isArray(e)||"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return new r(e);if("Buffer"===e.type&&Array.isArray(e.data))return new r(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},e.allocUnsafeSlow=function(t){if("function"==typeof r.allocUnsafeSlow)return r.allocUnsafeSlow(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>=a)throw new RangeError("size is too large");return new o(t)}}).call(e,function(){return this}())},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===m(t)}function i(t){return"boolean"==typeof t}function r(t){return null===t}function o(t){return null==t}function a(t){return"number"==typeof t}function s(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function l(t){return void 0===t}function c(t){return"[object RegExp]"===m(t)}function h(t){return"object"==typeof t&&null!==t}function f(t){return"[object Date]"===m(t)}function p(t){return"[object Error]"===m(t)||t instanceof Error}function d(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function m(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=i,e.isNull=r,e.isNullOrUndefined=o,e.isNumber=a,e.isString=s,e.isSymbol=u,e.isUndefined=l,e.isRegExp=c,e.isObject=h,e.isDate=f,e.isError=p,e.isFunction=d,e.isPrimitive=g,e.isBuffer=t.isBuffer}).call(e,n(208).Buffer)},function(t,e){},function(t,e,n){"use strict";function i(){this.head=null,this.tail=null,this.length=0}var r=(n(208).Buffer,n(240));t.exports=i,i.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},i.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},i.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},i.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e=r.allocUnsafe(t>>>0),n=this.head,i=0;n;)n.data.copy(e,i),i+=n.data.length,n=n.next;return e}},function(t,e,n){"use strict";function i(t){return this instanceof i?(l.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(t)}function r(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(t){t.end()}var a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=i;var s=n(238),u=n(241);u.inherits=n(235);var l=n(237),c=n(245);u.inherits(i,l);for(var h=a(c.prototype),f=0;f<h.length;f++){var p=h[f];i.prototype[p]||(i.prototype[p]=c.prototype[p])}},function(t,e,n){(function(e,i){"use strict";function r(){}function o(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function a(t,e){S=S||n(244),t=t||{},this.objectMode=!!t.objectMode,e instanceof S&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){g(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}function s(t){return S=S||n(244),A.call(s,this)||this instanceof S?(this._writableState=new a(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void I.call(this)):new s(t)}function u(t,e){var n=new Error("write after end");t.emit("error",n),M(e,n)}function l(t,e,n,i){var r=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):P.isBuffer(n)||"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),M(i,o),r=!1),r}function c(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=L.from(e,n)),e}function h(t,e,n,i,r){n=c(e,n,i),P.isBuffer(n)&&(i="buffer");var a=e.objectMode?1:n.length;e.length+=a;var s=e.length<e.highWaterMark;if(s||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest=new o(n,i,r),u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else f(t,e,!1,a,n,i,r);return s}function f(t,e,n,i,r,o,a){e.writelen=i,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function p(t,e,n,i,r){--e.pendingcb,n?M(r,i):r(i),t._writableState.errorEmitted=!0,t.emit("error",i)}function d(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function g(t,e){var n=t._writableState,i=n.sync,r=n.writecb;
if(d(n),e)p(t,n,i,e,r);else{var o=b(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||v(t,n),i?T(m,t,n,o,r):m(t,n,o,r)}}function m(t,e,n,i){n||y(t,e),e.pendingcb--,i(),x(t,e)}function y(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function v(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,r=new Array(i),o=e.corkedRequestsFree;o.entry=n;for(var a=0;n;)r[a]=n,n=n.next,a+=1;f(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new E(e)}else{for(;n;){var s=n.chunk,u=n.encoding,l=n.callback,c=e.objectMode?1:s.length;if(f(t,e,!1,c,s,u,l),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function b(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function _(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function x(t,e){var n=b(e);return n&&(0===e.pendingcb?(_(t,e),e.finished=!0,t.emit("finish")):_(t,e)),n}function w(t,e,n){e.ending=!0,x(t,e),n&&(e.finished?M(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function E(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}t.exports=s;var S,M=n(238),T=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?i:M;s.WritableState=a;var C=n(241);C.inherits=n(235);var I,N={deprecate:n(248)};!function(){try{I=n(233)}catch(t){}finally{I||(I=n(234).EventEmitter)}}();var P=n(208).Buffer,L=n(240);C.inherits(s,I),a.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(a.prototype,"buffer",{get:N.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}();var A;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(t){return!!A.call(this,t)||t&&t._writableState instanceof a}})):A=function(t){return t instanceof this},s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(t,e,n){var i=this._writableState,o=!1;return"function"==typeof e&&(n=e,e=null),P.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ended?u(this,n):l(this,i,t,n)&&(i.pendingcb++,o=h(this,i,t,e,n)),o},s.prototype.cork=function(){var t=this._writableState;t.corked++},s.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||v(this,t))},s.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},s.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},s.prototype._writev=null,s.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||w(this,i,n)}}).call(e,n(109),n(246).setImmediate)},,,function(t,e){(function(e){function n(t,e){function n(){if(!r){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}if(i("noDeprecation"))return t;var r=!1;return n}function i(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=n}).call(e,function(){return this}())},function(t,e,n){function i(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function r(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function a(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var s=n(208).Buffer,u=s.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),i(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=r)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(!(i>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived),e+=t.toString(this.encoding,0,r);var r=e.length-1,i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},l.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},l.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;e+=i.slice(0,n).toString(r)}return e}},function(t,e,n){"use strict";function i(t){this.afterTransform=function(e,n){return r(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(t,e,n){var i=t._transformState;i.transforming=!1;var r=i.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!==n&&void 0!==n&&t.push(n),r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);s.call(this,t),this._transformState=new i(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,n){a(e,t,n)}):a(e)})}function a(t,e,n){if(e)return t.emit("error",e);null!==n&&void 0!==n&&t.push(n);var i=t._writableState,r=t._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}t.exports=o;var s=n(244),u=n(241);u.inherits=n(235),u.inherits(o,s),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(t,e,n){"use strict";function i(t){return this instanceof i?void r.call(this,t):new i(t)}t.exports=i;var r=n(250),o=n(241);o.inherits=n(235),o.inherits(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(245)},function(t,e,n){t.exports=n(244)},function(t,e,n){t.exports=n(250)},function(t,e,n){t.exports=n(251)},function(t,e){e["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},e["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},e["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},e["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},e["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},e["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},e.aes128=e["aes-128-cbc"],e.aes192=e["aes-192-cbc"],e.aes256=e["aes-256-cbc"],e["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},e["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},e["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},e["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},e["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},e["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},e["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},e["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},e["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"}},function(t,e,n){(function(e){t.exports=function(t,n,i,r){i/=8,r=r||0;for(var o,a,s,u=0,l=0,c=new e(i),h=new e(r),f=0;;){if(o=t.createHash("md5"),f++>0&&o.update(a),o.update(n),a=o.digest(),s=0,i>0)for(;;){if(0===i)break;if(s===a.length)break;c[u++]=a[s],i--,s++}if(r>0&&s!==a.length)for(;;){if(0===r)break;if(s===a.length)break;h[l++]=a[s],r--,s++}if(0===i&&0===r)break}for(s=0;s<a.length;s++)a[s]=0;return{key:c,iv:h}}}).call(e,n(208).Buffer)},function(t,e,n){(function(e){function i(t,n,a,s){return this instanceof i?(o.call(this),this._cipher=new r.AES(n),this._prev=new e(a.length),this._cache=new e(""),this._secCache=new e(""),this._decrypt=s,a.copy(this._prev),void(this._mode=t)):new i(t,n,a)}var r=n(231),o=n(232),a=n(235);a(i,o),t.exports=i,i.prototype._transform=function(t,e,n){n(null,this._mode.encrypt(this,t,this._decrypt))},i.prototype._flush=function(t){this._cipher.scrub(),t()}}).call(e,n(208).Buffer)},function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},function(t,e,n){var i=n(261);e.encrypt=function(t,e){var n=i(e,t._prev);return t._prev=t._cipher.encryptBlock(n),t._prev},e.decrypt=function(t,e){var n=t._prev;t._prev=e;var r=t._cipher.decryptBlock(e);return i(r,n)}},function(t,e,n){(function(e){function n(t,n){for(var i=Math.min(t.length,n.length),r=new e(i),o=-1;++o<i;)r.writeUInt8(t[o]^n[o],o);return r}t.exports=n}).call(e,n(208).Buffer)},function(t,e,n){(function(t){function i(e,n,i){var o=n.length,a=r(n,e._cache);return e._cache=e._cache.slice(o),e._prev=t.concat([e._prev,i?n:a]),a}var r=n(261);e.encrypt=function(e,n,r){for(var o,a=new t("");n.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=new t("")),!(e._cache.length<=n.length)){a=t.concat([a,i(e,n,r)]);break}o=e._cache.length,a=t.concat([a,i(e,n.slice(0,o),r)]),n=n.slice(o)}return a}}).call(e,n(208).Buffer)},function(t,e,n){(function(t){function i(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}var r=n(261);e.encrypt=function(e,n){for(;e._cache.length<n.length;)e._cache=t.concat([e._cache,i(e)]);var o=e._cache.slice(0,n.length);return e._cache=e._cache.slice(n.length),r(n,o)}}).call(e,n(208).Buffer)},function(t,e,n){(function(t){function i(t){var e=t._cipher.encryptBlock(t._prev);return r(t._prev),e}function r(t){for(var e,n=t.length;n--;){if(e=t.readUInt8(n),255!==e){e++,t.writeUInt8(e,n);break}t.writeUInt8(0,n)}}var o=n(261);e.encrypt=function(e,n){for(;e._cache.length<n.length;)e._cache=t.concat([e._cache,i(e)]);var r=e._cache.slice(0,n.length);return e._cache=e._cache.slice(n.length),o(n,r)}}).call(e,n(208).Buffer)},function(t,e,n){(function(e){function i(t,n,o){return this instanceof i?(s.call(this),this._cache=new r,this._last=void 0,this._cipher=new a.AES(n),this._prev=new e(o.length),o.copy(this._prev),void(this._mode=t)):new i(t,n,o)}function r(){return this instanceof r?void(this.cache=new e("")):new r}function o(t){var e=t[15];if(16!==e)return t.slice(0,16-e)}var a=n(231),s=n(232),u=n(235),l=n(256),c=n(258),h=n(257);u(i,s),i.prototype._transform=function(t,e,n){this._cache.add(t);for(var i,r;i=this._cache.get();)r=this._mode.decrypt(this,i),this.push(r);n()},i.prototype._flush=function(t){var e=this._cache.flush();return e?(this.push(o(this._mode.decrypt(this,e))),void t()):t},r.prototype.add=function(t){this.cache=e.concat([this.cache,t])},r.prototype.get=function(){if(this.cache.length>16){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},r.prototype.flush=function(){if(this.cache.length)return this.cache};var f={ECB:n(259),CBC:n(260),CFB:n(262),OFB:n(263),CTR:n(264)};t.exports=function(t){function n(t,n,r){var o=l[t];if(!o)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=new e(r)),"string"==typeof n&&(n=new e(n)),n.length!==o.key/8)throw new TypeError("invalid key length "+n.length);if(r.length!==o.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===o.type?new c(f[o.mode],n,r,!0):new i(f[o.mode],n,r)}function r(e,i){var r=l[e];if(!r)throw new TypeError("invalid suite type");var o=h(t,i,r.key,r.iv);return n(e,o.key,o.iv)}return{createDecipher:r,createDecipheriv:n}}}).call(e,n(208).Buffer)},function(t,e,n){"use strict";var i=n(170),r=n(189)(i),o=n(267),a=n(196),s=n(201)("stores/local-store"),u=n(205).checkClientError;t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{locale:"en",_csrf:null}},reset:function(){this.setState(this.getInitialState())},storeDidUpdate:function(){s("store updated")},changeLocale:function(t){var e=this;a.post("/api/user/setlocale").type("json").accept("json").send({locale:t}).end(function(n,i){u(i,n,function(n){n?s(n):(s("changed locale to: "+t),e.setState({locale:t}),e.trigger(e.state))},function(t){t()})})}})},function(t,e,n){"use strict";var i=n(170),r=i.createActions({changeLocale:{}});t.exports=r},,,,,,,function(t,e,n){"use strict";var i=n(275),r=n(1),o=n(170),a=n(189)(o),s=n(280),u=n(281),l=r.createClass({displayName:"MapHubsNotification",mixins:[a.connect(s)],onDismiss:function(){u.dismissNotification()},render:function(){var t={};switch(this.state.position){case"topright":t={top:"60px",right:"20px",bottom:void 0,left:void 0};break;case"bottomright":t={top:void 0,right:"20px",bottom:"60px",left:void 0};break;case"topleft":t={top:"60px",right:void 0,bottom:void 0,left:"20px"};break;case"bottomleft":t={top:void 0,right:void 0,bottom:"60px",left:"20px"}}return r.createElement(i.Notification,{id:"omh-notification",isActive:this.state.isActive,message:this.state.message,action:this.state.action,onClick:this.state.onClick,dismissAfter:this.state.dismissAfter,onDismiss:this.onDismiss,barStyle:{background:this.state.backgroundColor},activeBarStyle:t,actionStyle:{color:this.state.color}})}});t.exports=l},,,,,,function(t,e,n){"use strict";var i=n(170),r=n(189)(i),o=n(281),a=n(201)("stores/notification-store"),s=n(168);t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{isActive:!1,message:"",action:null,onClick:function(){},backgroundColor:MAPHUBS_CONFIG.primaryColor,color:"white",position:"topright",dismissAfter:3e3,onDismiss:function(){}}},reset:function(){this.setState(this.getInitialState()),this.trigger(this.state)},storeDidUpdate:function(){a("store updated")},showNotification:function(t){if(t){var e=s.extend(this.getInitialState(),t);this.setState(e),this.setState({isActive:!0})}},dismissNotification:function(){this.state.onDismiss(),this.reset()}})},function(t,e,n){"use strict";var i=n(170),r=i.createActions({showNotification:{},dismissNotification:{}});t.exports=r},function(t,e,n){"use strict";var i=n(283),r=n(1),o=n(170),a=n(189)(o),s=n(285),u=n(286),l=n(266),c=n(268),h=r.createClass({displayName:"Message",mixins:[a.connect(s),a.connect(l)],__:function(t){return c.getLocaleString(this.state.locale,t)},onDismiss:function(){u.dismissMessage()},render:function(){return r.createElement(i.Modal,{id:"message-modal",show:this.state.show,fixedFooter:!1},r.createElement(i.ModalContent,null,r.createElement("h4",null,this.state.title),r.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.message.toString()}})),r.createElement(i.ModalFooter,null,r.createElement("a",{href:"#!",className:" modal-action modal-close waves-effect waves-light btn-flat",onClick:this.onDismiss},this.__("Okay"))))}});t.exports=h},function(t,e,n){"use strict";var i=n(1),r=n(168),o=n(284),a=i.createClass({displayName:"ModalContent",propTypes:{className:i.PropTypes.string,style:i.PropTypes.object,children:i.PropTypes.any},getDefaultProps:function(){return{style:{}}},render:function(){var t=o("modal-content",this.props.className);return i.createElement("div",{className:t,style:this.props.style},this.props.children)}}),s=i.createClass({displayName:"ModalFooter",propTypes:{className:i.PropTypes.string,children:i.PropTypes.any},render:function(){var t=o("modal-footer",this.props.className);return i.createElement("div",{className:t},this.props.children)}}),u=i.createClass({displayName:"Modal",propTypes:{id:i.PropTypes.string,show:i.PropTypes.bool.isRequired,className:i.PropTypes.string,fixedFooter:i.PropTypes.bool,dismissible:i.PropTypes.bool,in_duration:i.PropTypes.number,out_duration:i.PropTypes.number,opacity:i.PropTypes.number,ready:i.PropTypes.func,complete:i.PropTypes.func,children:i.PropTypes.any},getDefaultProps:function(){return{id:"modal",show:!1,fixedFooter:!1,className:"",dismissible:!0,opacity:.5,in_duration:300,out_duration:200,ready:function(){},complete:function(){}}},componentDidMount:function(){r(this.refs.modal).modal({dismissible:this.props.dismissible,opacity:this.props.opacity,in_duration:this.props.in_duration,out_duration:this.props.out_duration,ready:this.props.ready,complete:this.props.complete})},componentDidUpdate:function(t){if(this.props.show&&!t.show){r(this.refs.modal).modal("open");var e=document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}else t.show&&!this.props.show&&r(this.refs.modal).modal("close")},render:function(){var t="";return t=this.props.fixedFooter?o("modal","modal-fixed-footer",this.props.className):o("modal",this.props.className),i.createElement("div",{ref:"modal",id:this.props.id,className:t},this.props.children)}});t.exports={Modal:u,ModalContent:a,ModalFooter:s}},,function(t,e,n){"use strict";var i=n(170),r=n(189)(i),o=n(286),a=n(201)("stores/message-store"),s=n(168);t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{show:!1,title:"Message",message:"",onDismiss:null}},reset:function(){this.setState(this.getInitialState()),this.trigger(this.state)},storeDidUpdate:function(){a("store updated")},showMessage:function(t){if(t){var e=s.extend(this.getInitialState(),t);this.setState(e),this.setState({show:!0})}},dismissMessage:function(){this.state.onDismiss&&this.state.onDismiss(),this.reset()}})},function(t,e,n){"use strict";var i=n(170),r=i.createActions({showMessage:{},dismissMessage:{}});t.exports=r},function(t,e,n){"use strict";var i=n(283),r=n(1),o=n(170),a=n(189)(o),s=n(288),u=n(289),l=r.createClass({displayName:"Confirmation",mixins:[a.connect(s)],hide:function(){u.reset()},onNegativeResponse:function(){this.state.onNegativeResponse(),this.hide()},onPositiveResponse:function(){this.state.onPositiveResponse(),this.hide()},render:function(){return r.createElement(i.Modal,{id:"confirmation",show:this.state.show,fixedFooter:!1,dismissible:!1},r.createElement(i.ModalContent,null,r.createElement("h5",null,this.state.title),r.createElement("p",null,this.state.message)),r.createElement(i.ModalFooter,null,r.createElement("div",{className:"right"},r.createElement("a",{className:"waves-effect waves-light btn",style:{float:"none",marginRight:"15px"},onClick:this.onNegativeResponse},this.state.negativeButtonText),r.createElement("a",{className:"waves-effect waves-light btn",style:{float:"none"},onClick:this.onPositiveResponse},this.state.postitiveButtonText))))}});t.exports=l},function(t,e,n){"use strict";var i=n(170),r=n(189)(i),o=n(289),a=n(201)("stores/confirmation-store"),s=n(168),u=n(266),l=n(268);t.exports=i.createStore({mixins:[r,i.ListenerMixin],listenables:o,__:function(t){var e="en";return this.state&&this.state.locale&&(e=this.state.locale),l.getLocaleString(e,t)},getInitialState:function(){return this.listenTo(u.locale,this.updateLocale),this.getEmptyState()},getEmptyState:function(){return{show:!1,locale:u.state.locale,title:this.__("Confirmation"),message:this.__("Please confirm"),postitiveButtonText:this.__("Okay"),negativeButtonText:this.__("Cancel"),onPositiveResponse:function(){},onNegativeResponse:function(){}}},reset:function(){this.setState(this.getEmptyState())},updateLocale:function(t){this.setState({locale:t})},storeDidUpdate:function(){a("store updated")},showConfirmation:function(t){if(t){var e=s.extend(this.getInitialState(),t);this.setState(e),this.setState({show:!0})}}})},function(t,e,n){"use strict";var i=n(170),r=i.createActions({showConfirmation:{},positiveResponse:{},negativeResponse:{},reset:{}});t.exports=r},function(t,e,n){"use strict";var i=n(1),r=n(170),o=n(189)(r),a=n(194),s=n(267),u=n(266),l=n(268),c=n(168),h=i.createClass({displayName:"LocaleChooser",mixins:[o.connect(a),o.connect(u)],__:function(t){return l.getLocaleString(this.state.locale,t)},propTypes:{id:i.PropTypes.string},getDefaultProps:function(){return{id:"locale-dropdown"}},componentDidMount:function(){c(".locale-tooltip").tooltip(),c(this.refs.dropdownButton).dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,gutter:0,belowOrigin:!0,alignment:"right"})},shouldComponentUpdate:function(t,e){return this.state.locale!=e.locale},onChange:function(t){s.changeLocale(t),c(this.refs.dropdownMenu).hide()},render:function(){var t=this,e={en:{label:"EN"},fr:{label:"FR"},es:{label:"ES"},it:{label:"IT"}};return i.createElement("li",{className:"nav-link-wrapper nav-dropdown-link-wrapper locale-tooltip","data-position":"bottom","data-delay":"50","data-tooltip":this.__("Change Language")},i.createElement("a",{ref:"dropdownButton",className:"locale-dropdown-button nav-dropdown-button",href:"#!","data-activates":this.props.id,style:{paddingRight:0}},e[this.state.locale].label,i.createElement("i",{className:"material-icons right",style:{marginLeft:0}},"arrow_drop_down")),i.createElement("ul",{ref:"dropdownMenu",id:this.props.id,className:"dropdown-content"},i.createElement("li",null,i.createElement("a",{href:"#!",onClick:function(){t.onChange("en")},className:"nav-hover-menu-item"},"English (EN)")),i.createElement("li",null,i.createElement("a",{href:"#!",onClick:function(){t.onChange("fr")},className:"nav-hover-menu-item"},"Français (FR)")),i.createElement("li",null,i.createElement("a",{href:"#!",onClick:function(){t.onChange("es")},className:"nav-hover-menu-item"},"Español (ES)")),i.createElement("li",null,i.createElement("a",{href:"#!",onClick:function(){t.onChange("it")},className:"nav-hover-menu-item"},"Italiano (IT)"))))}});t.exports=h},,,,,,function(t,e){IntlPolyfill.__addLocaleData({locale:"en",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!0,formats:{short:"{1}, {0}",medium:"{1}, {0}",full:"{1} 'at' {0}",long:"{1} 'at' {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE, MMMM d, y",yMMMMd:"MMMM d, y",yMMMd:"MMM d, y",yMd:"M/d/yy"},timeFormats:{hmmsszzzz:"h:mm:ss a zzzz",hmsz:"h:mm:ss a z",hms:"h:mm:ss a",hm:"h:mm a"}},calendars:{buddhist:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["BE"],short:["BE"],long:["BE"]},dayPeriods:{am:"AM",pm:"PM"}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Mo1","Mo2","Mo3","Mo4","Mo5","Mo6","Mo7","Mo8","Mo9","Mo10","Mo11","Mo12"],long:["Month1","Month2","Month3","Month4","Month5","Month6","Month7","Month8","Month9","Month10","Month11","Month12"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriods:{am:"AM",pm:"PM"}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Mo1","Mo2","Mo3","Mo4","Mo5","Mo6","Mo7","Mo8","Mo9","Mo10","Mo11","Mo12"],long:["Month1","Month2","Month3","Month4","Month5","Month6","Month7","Month8","Month9","Month10","Month11","Month12"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriods:{am:"AM",pm:"PM"}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"AM",pm:"PM"}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["B","A","BCE","CE"],short:["BC","AD","BCE","CE"],long:["Before Christ","Anno Domini","Before Common Era","Common Era"]},dayPeriods:{am:"AM",pm:"PM"}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"],long:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"AM",pm:"PM"}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["Saka"],short:["Saka"],long:["Saka"]},dayPeriods:{am:"AM",pm:"PM"}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},japanese:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]
},eras:{narrow:["Taika (645–650)","Hakuchi (650–671)","Hakuhō (672–686)","Shuchō (686–701)","Taihō (701–704)","Keiun (704–708)","Wadō (708–715)","Reiki (715–717)","Yōrō (717–724)","Jinki (724–729)","Tenpyō (729–749)","Tenpyō-kampō (749-749)","Tenpyō-shōhō (749-757)","Tenpyō-hōji (757-765)","Tenpyō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770–780)","Ten-ō (781-782)","Enryaku (782–806)","Daidō (806–810)","Kōnin (810–824)","Tenchō (824–834)","Jōwa (834–848)","Kajō (848–851)","Ninju (851–854)","Saikō (854–857)","Ten-an (857-859)","Jōgan (859–877)","Gangyō (877–885)","Ninna (885–889)","Kanpyō (889–898)","Shōtai (898–901)","Engi (901–923)","Enchō (923–931)","Jōhei (931–938)","Tengyō (938–947)","Tenryaku (947–957)","Tentoku (957–961)","Ōwa (961–964)","Kōhō (964–968)","Anna (968–970)","Tenroku (970–973)","Ten’en (973–976)","Jōgen (976–978)","Tengen (978–983)","Eikan (983–985)","Kanna (985–987)","Eien (987–989)","Eiso (989–990)","Shōryaku (990–995)","Chōtoku (995–999)","Chōhō (999–1004)","Kankō (1004–1012)","Chōwa (1012–1017)","Kannin (1017–1021)","Jian (1021–1024)","Manju (1024–1028)","Chōgen (1028–1037)","Chōryaku (1037–1040)","Chōkyū (1040–1044)","Kantoku (1044–1046)","Eishō (1046–1053)","Tengi (1053–1058)","Kōhei (1058–1065)","Jiryaku (1065–1069)","Enkyū (1069–1074)","Shōho (1074–1077)","Shōryaku (1077–1081)","Eihō (1081–1084)","Ōtoku (1084–1087)","Kanji (1087–1094)","Kahō (1094–1096)","Eichō (1096–1097)","Jōtoku (1097–1099)","Kōwa (1099–1104)","Chōji (1104–1106)","Kashō (1106–1108)","Tennin (1108–1110)","Ten-ei (1110-1113)","Eikyū (1113–1118)","Gen’ei (1118–1120)","Hōan (1120–1124)","Tenji (1124–1126)","Daiji (1126–1131)","Tenshō (1131–1132)","Chōshō (1132–1135)","Hōen (1135–1141)","Eiji (1141–1142)","Kōji (1142–1144)","Ten’yō (1144–1145)","Kyūan (1145–1151)","Ninpei (1151–1154)","Kyūju (1154–1156)","Hōgen (1156–1159)","Heiji (1159–1160)","Eiryaku (1160–1161)","Ōho (1161–1163)","Chōkan (1163–1165)","Eiman (1165–1166)","Nin’an (1166–1169)","Kaō (1169–1171)","Shōan (1171–1175)","Angen (1175–1177)","Jishō (1177–1181)","Yōwa (1181–1182)","Juei (1182–1184)","Genryaku (1184–1185)","Bunji (1185–1190)","Kenkyū (1190–1199)","Shōji (1199–1201)","Kennin (1201–1204)","Genkyū (1204–1206)","Ken’ei (1206–1207)","Jōgen (1207–1211)","Kenryaku (1211–1213)","Kenpō (1213–1219)","Jōkyū (1219–1222)","Jōō (1222–1224)","Gennin (1224–1225)","Karoku (1225–1227)","Antei (1227–1229)","Kanki (1229–1232)","Jōei (1232–1233)","Tenpuku (1233–1234)","Bunryaku (1234–1235)","Katei (1235–1238)","Ryakunin (1238–1239)","En’ō (1239–1240)","Ninji (1240–1243)","Kangen (1243–1247)","Hōji (1247–1249)","Kenchō (1249–1256)","Kōgen (1256–1257)","Shōka (1257–1259)","Shōgen (1259–1260)","Bun’ō (1260–1261)","Kōchō (1261–1264)","Bun’ei (1264–1275)","Kenji (1275–1278)","Kōan (1278–1288)","Shōō (1288–1293)","Einin (1293–1299)","Shōan (1299–1302)","Kengen (1302–1303)","Kagen (1303–1306)","Tokuji (1306–1308)","Enkyō (1308–1311)","Ōchō (1311–1312)","Shōwa (1312–1317)","Bunpō (1317–1319)","Genō (1319–1321)","Genkō (1321–1324)","Shōchū (1324–1326)","Karyaku (1326–1329)","Gentoku (1329–1331)","Genkō (1331–1334)","Kenmu (1334–1336)","Engen (1336–1340)","Kōkoku (1340–1346)","Shōhei (1346–1370)","Kentoku (1370–1372)","Bunchū (1372–1375)","Tenju (1375–1379)","Kōryaku (1379–1381)","Kōwa (1381–1384)","Genchū (1384–1392)","Meitoku (1384–1387)","Kakei (1387–1389)","Kōō (1389–1390)","Meitoku (1390–1394)","Ōei (1394–1428)","Shōchō (1428–1429)","Eikyō (1429–1441)","Kakitsu (1441–1444)","Bun’an (1444–1449)","Hōtoku (1449–1452)","Kyōtoku (1452–1455)","Kōshō (1455–1457)","Chōroku (1457–1460)","Kanshō (1460–1466)","Bunshō (1466–1467)","Ōnin (1467–1469)","Bunmei (1469–1487)","Chōkyō (1487–1489)","Entoku (1489–1492)","Meiō (1492–1501)","Bunki (1501–1504)","Eishō (1504–1521)","Taiei (1521–1528)","Kyōroku (1528–1532)","Tenbun (1532–1555)","Kōji (1555–1558)","Eiroku (1558–1570)","Genki (1570–1573)","Tenshō (1573–1592)","Bunroku (1592–1596)","Keichō (1596–1615)","Genna (1615–1624)","Kan’ei (1624–1644)","Shōho (1644–1648)","Keian (1648–1652)","Jōō (1652–1655)","Meireki (1655–1658)","Manji (1658–1661)","Kanbun (1661–1673)","Enpō (1673–1681)","Tenna (1681–1684)","Jōkyō (1684–1688)","Genroku (1688–1704)","Hōei (1704–1711)","Shōtoku (1711–1716)","Kyōhō (1716–1736)","Genbun (1736–1741)","Kanpō (1741–1744)","Enkyō (1744–1748)","Kan’en (1748–1751)","Hōreki (1751–1764)","Meiwa (1764–1772)","An’ei (1772–1781)","Tenmei (1781–1789)","Kansei (1789–1801)","Kyōwa (1801–1804)","Bunka (1804–1818)","Bunsei (1818–1830)","Tenpō (1830–1844)","Kōka (1844–1848)","Kaei (1848–1854)","Ansei (1854–1860)","Man’en (1860–1861)","Bunkyū (1861–1864)","Genji (1864–1865)","Keiō (1865–1868)","M","T","S","H"],short:["Taika (645–650)","Hakuchi (650–671)","Hakuhō (672–686)","Shuchō (686–701)","Taihō (701–704)","Keiun (704–708)","Wadō (708–715)","Reiki (715–717)","Yōrō (717–724)","Jinki (724–729)","Tenpyō (729–749)","Tenpyō-kampō (749-749)","Tenpyō-shōhō (749-757)","Tenpyō-hōji (757-765)","Tenpyō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770–780)","Ten-ō (781-782)","Enryaku (782–806)","Daidō (806–810)","Kōnin (810–824)","Tenchō (824–834)","Jōwa (834–848)","Kajō (848–851)","Ninju (851–854)","Saikō (854–857)","Ten-an (857-859)","Jōgan (859–877)","Gangyō (877–885)","Ninna (885–889)","Kanpyō (889–898)","Shōtai (898–901)","Engi (901–923)","Enchō (923–931)","Jōhei (931–938)","Tengyō (938–947)","Tenryaku (947–957)","Tentoku (957–961)","Ōwa (961–964)","Kōhō (964–968)","Anna (968–970)","Tenroku (970–973)","Ten’en (973–976)","Jōgen (976–978)","Tengen (978–983)","Eikan (983–985)","Kanna (985–987)","Eien (987–989)","Eiso (989–990)","Shōryaku (990–995)","Chōtoku (995–999)","Chōhō (999–1004)","Kankō (1004–1012)","Chōwa (1012–1017)","Kannin (1017–1021)","Jian (1021–1024)","Manju (1024–1028)","Chōgen (1028–1037)","Chōryaku (1037–1040)","Chōkyū (1040–1044)","Kantoku (1044–1046)","Eishō (1046–1053)","Tengi (1053–1058)","Kōhei (1058–1065)","Jiryaku (1065–1069)","Enkyū (1069–1074)","Shōho (1074–1077)","Shōryaku (1077–1081)","Eihō (1081–1084)","Ōtoku (1084–1087)","Kanji (1087–1094)","Kahō (1094–1096)","Eichō (1096–1097)","Jōtoku (1097–1099)","Kōwa (1099–1104)","Chōji (1104–1106)","Kashō (1106–1108)","Tennin (1108–1110)","Ten-ei (1110-1113)","Eikyū (1113–1118)","Gen’ei (1118–1120)","Hōan (1120–1124)","Tenji (1124–1126)","Daiji (1126–1131)","Tenshō (1131–1132)","Chōshō (1132–1135)","Hōen (1135–1141)","Eiji (1141–1142)","Kōji (1142–1144)","Ten’yō (1144–1145)","Kyūan (1145–1151)","Ninpei (1151–1154)","Kyūju (1154–1156)","Hōgen (1156–1159)","Heiji (1159–1160)","Eiryaku (1160–1161)","Ōho (1161–1163)","Chōkan (1163–1165)","Eiman (1165–1166)","Nin’an (1166–1169)","Kaō (1169–1171)","Shōan (1171–1175)","Angen (1175–1177)","Jishō (1177–1181)","Yōwa (1181–1182)","Juei (1182–1184)","Genryaku (1184–1185)","Bunji (1185–1190)","Kenkyū (1190–1199)","Shōji (1199–1201)","Kennin (1201–1204)","Genkyū (1204–1206)","Ken’ei (1206–1207)","Jōgen (1207–1211)","Kenryaku (1211–1213)","Kenpō (1213–1219)","Jōkyū (1219–1222)","Jōō (1222–1224)","Gennin (1224–1225)","Karoku (1225–1227)","Antei (1227–1229)","Kanki (1229–1232)","Jōei (1232–1233)","Tenpuku (1233–1234)","Bunryaku (1234–1235)","Katei (1235–1238)","Ryakunin (1238–1239)","En’ō (1239–1240)","Ninji (1240–1243)","Kangen (1243–1247)","Hōji (1247–1249)","Kenchō (1249–1256)","Kōgen (1256–1257)","Shōka (1257–1259)","Shōgen (1259–1260)","Bun’ō (1260–1261)","Kōchō (1261–1264)","Bun’ei (1264–1275)","Kenji (1275–1278)","Kōan (1278–1288)","Shōō (1288–1293)","Einin (1293–1299)","Shōan (1299–1302)","Kengen (1302–1303)","Kagen (1303–1306)","Tokuji (1306–1308)","Enkyō (1308–1311)","Ōchō (1311–1312)","Shōwa (1312–1317)","Bunpō (1317–1319)","Genō (1319–1321)","Genkō (1321–1324)","Shōchū (1324–1326)","Karyaku (1326–1329)","Gentoku (1329–1331)","Genkō (1331–1334)","Kenmu (1334–1336)","Engen (1336–1340)","Kōkoku (1340–1346)","Shōhei (1346–1370)","Kentoku (1370–1372)","Bunchū (1372–1375)","Tenju (1375–1379)","Kōryaku (1379–1381)","Kōwa (1381–1384)","Genchū (1384–1392)","Meitoku (1384–1387)","Kakei (1387–1389)","Kōō (1389–1390)","Meitoku (1390–1394)","Ōei (1394–1428)","Shōchō (1428–1429)","Eikyō (1429–1441)","Kakitsu (1441–1444)","Bun’an (1444–1449)","Hōtoku (1449–1452)","Kyōtoku (1452–1455)","Kōshō (1455–1457)","Chōroku (1457–1460)","Kanshō (1460–1466)","Bunshō (1466–1467)","Ōnin (1467–1469)","Bunmei (1469–1487)","Chōkyō (1487–1489)","Entoku (1489–1492)","Meiō (1492–1501)","Bunki (1501–1504)","Eishō (1504–1521)","Taiei (1521–1528)","Kyōroku (1528–1532)","Tenbun (1532–1555)","Kōji (1555–1558)","Eiroku (1558–1570)","Genki (1570–1573)","Tenshō (1573–1592)","Bunroku (1592–1596)","Keichō (1596–1615)","Genna (1615–1624)","Kan’ei (1624–1644)","Shōho (1644–1648)","Keian (1648–1652)","Jōō (1652–1655)","Meireki (1655–1658)","Manji (1658–1661)","Kanbun (1661–1673)","Enpō (1673–1681)","Tenna (1681–1684)","Jōkyō (1684–1688)","Genroku (1688–1704)","Hōei (1704–1711)","Shōtoku (1711–1716)","Kyōhō (1716–1736)","Genbun (1736–1741)","Kanpō (1741–1744)","Enkyō (1744–1748)","Kan’en (1748–1751)","Hōreki (1751–1764)","Meiwa (1764–1772)","An’ei (1772–1781)","Tenmei (1781–1789)","Kansei (1789–1801)","Kyōwa (1801–1804)","Bunka (1804–1818)","Bunsei (1818–1830)","Tenpō (1830–1844)","Kōka (1844–1848)","Kaei (1848–1854)","Ansei (1854–1860)","Man’en (1860–1861)","Bunkyū (1861–1864)","Genji (1864–1865)","Keiō (1865–1868)","Meiji","Taishō","Shōwa","Heisei"],long:["Taika (645–650)","Hakuchi (650–671)","Hakuhō (672–686)","Shuchō (686–701)","Taihō (701–704)","Keiun (704–708)","Wadō (708–715)","Reiki (715–717)","Yōrō (717–724)","Jinki (724–729)","Tenpyō (729–749)","Tenpyō-kampō (749-749)","Tenpyō-shōhō (749-757)","Tenpyō-hōji (757-765)","Tenpyō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770–780)","Ten-ō (781-782)","Enryaku (782–806)","Daidō (806–810)","Kōnin (810–824)","Tenchō (824–834)","Jōwa (834–848)","Kajō (848–851)","Ninju (851–854)","Saikō (854–857)","Ten-an (857-859)","Jōgan (859–877)","Gangyō (877–885)","Ninna (885–889)","Kanpyō (889–898)","Shōtai (898–901)","Engi (901–923)","Enchō (923–931)","Jōhei (931–938)","Tengyō (938–947)","Tenryaku (947–957)","Tentoku (957–961)","Ōwa (961–964)","Kōhō (964–968)","Anna (968–970)","Tenroku (970–973)","Ten’en (973–976)","Jōgen (976–978)","Tengen (978–983)","Eikan (983–985)","Kanna (985–987)","Eien (987–989)","Eiso (989–990)","Shōryaku (990–995)","Chōtoku (995–999)","Chōhō (999–1004)","Kankō (1004–1012)","Chōwa (1012–1017)","Kannin (1017–1021)","Jian (1021–1024)","Manju (1024–1028)","Chōgen (1028–1037)","Chōryaku (1037–1040)","Chōkyū (1040–1044)","Kantoku (1044–1046)","Eishō (1046–1053)","Tengi (1053–1058)","Kōhei (1058–1065)","Jiryaku (1065–1069)","Enkyū (1069–1074)","Shōho (1074–1077)","Shōryaku (1077–1081)","Eihō (1081–1084)","Ōtoku (1084–1087)","Kanji (1087–1094)","Kahō (1094–1096)","Eichō (1096–1097)","Jōtoku (1097–1099)","Kōwa (1099–1104)","Chōji (1104–1106)","Kashō (1106–1108)","Tennin (1108–1110)","Ten-ei (1110-1113)","Eikyū (1113–1118)","Gen’ei (1118–1120)","Hōan (1120–1124)","Tenji (1124–1126)","Daiji (1126–1131)","Tenshō (1131–1132)","Chōshō (1132–1135)","Hōen (1135–1141)","Eiji (1141–1142)","Kōji (1142–1144)","Ten’yō (1144–1145)","Kyūan (1145–1151)","Ninpei (1151–1154)","Kyūju (1154–1156)","Hōgen (1156–1159)","Heiji (1159–1160)","Eiryaku (1160–1161)","Ōho (1161–1163)","Chōkan (1163–1165)","Eiman (1165–1166)","Nin’an (1166–1169)","Kaō (1169–1171)","Shōan (1171–1175)","Angen (1175–1177)","Jishō (1177–1181)","Yōwa (1181–1182)","Juei (1182–1184)","Genryaku (1184–1185)","Bunji (1185–1190)","Kenkyū (1190–1199)","Shōji (1199–1201)","Kennin (1201–1204)","Genkyū (1204–1206)","Ken’ei (1206–1207)","Jōgen (1207–1211)","Kenryaku (1211–1213)","Kenpō (1213–1219)","Jōkyū (1219–1222)","Jōō (1222–1224)","Gennin (1224–1225)","Karoku (1225–1227)","Antei (1227–1229)","Kanki (1229–1232)","Jōei (1232–1233)","Tenpuku (1233–1234)","Bunryaku (1234–1235)","Katei (1235–1238)","Ryakunin (1238–1239)","En’ō (1239–1240)","Ninji (1240–1243)","Kangen (1243–1247)","Hōji (1247–1249)","Kenchō (1249–1256)","Kōgen (1256–1257)","Shōka (1257–1259)","Shōgen (1259–1260)","Bun’ō (1260–1261)","Kōchō (1261–1264)","Bun’ei (1264–1275)","Kenji (1275–1278)","Kōan (1278–1288)","Shōō (1288–1293)","Einin (1293–1299)","Shōan (1299–1302)","Kengen (1302–1303)","Kagen (1303–1306)","Tokuji (1306–1308)","Enkyō (1308–1311)","Ōchō (1311–1312)","Shōwa (1312–1317)","Bunpō (1317–1319)","Genō (1319–1321)","Genkō (1321–1324)","Shōchū (1324–1326)","Karyaku (1326–1329)","Gentoku (1329–1331)","Genkō (1331–1334)","Kenmu (1334–1336)","Engen (1336–1340)","Kōkoku (1340–1346)","Shōhei (1346–1370)","Kentoku (1370–1372)","Bunchū (1372–1375)","Tenju (1375–1379)","Kōryaku (1379–1381)","Kōwa (1381–1384)","Genchū (1384–1392)","Meitoku (1384–1387)","Kakei (1387–1389)","Kōō (1389–1390)","Meitoku (1390–1394)","Ōei (1394–1428)","Shōchō (1428–1429)","Eikyō (1429–1441)","Kakitsu (1441–1444)","Bun’an (1444–1449)","Hōtoku (1449–1452)","Kyōtoku (1452–1455)","Kōshō (1455–1457)","Chōroku (1457–1460)","Kanshō (1460–1466)","Bunshō (1466–1467)","Ōnin (1467–1469)","Bunmei (1469–1487)","Chōkyō (1487–1489)","Entoku (1489–1492)","Meiō (1492–1501)","Bunki (1501–1504)","Eishō (1504–1521)","Taiei (1521–1528)","Kyōroku (1528–1532)","Tenbun (1532–1555)","Kōji (1555–1558)","Eiroku (1558–1570)","Genki (1570–1573)","Tenshō (1573–1592)","Bunroku (1592–1596)","Keichō (1596–1615)","Genna (1615–1624)","Kan’ei (1624–1644)","Shōho (1644–1648)","Keian (1648–1652)","Jōō (1652–1655)","Meireki (1655–1658)","Manji (1658–1661)","Kanbun (1661–1673)","Enpō (1673–1681)","Tenna (1681–1684)","Jōkyō (1684–1688)","Genroku (1688–1704)","Hōei (1704–1711)","Shōtoku (1711–1716)","Kyōhō (1716–1736)","Genbun (1736–1741)","Kanpō (1741–1744)","Enkyō (1744–1748)","Kan’en (1748–1751)","Hōreki (1751–1764)","Meiwa (1764–1772)","An’ei (1772–1781)","Tenmei (1781–1789)","Kansei (1789–1801)","Kyōwa (1801–1804)","Bunka (1804–1818)","Bunsei (1818–1830)","Tenpō (1830–1844)","Kōka (1844–1848)","Kaei (1848–1854)","Ansei (1854–1860)","Man’en (1860–1861)","Bunkyū (1861–1864)","Genji (1864–1865)","Keiō (1865–1868)","Meiji","Taishō","Shōwa","Heisei"]},dayPeriods:{am:"AM",pm:"PM"}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"AM",pm:"PM"}},roc:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["Before R.O.C.","Minguo"],short:["Before R.O.C.","Minguo"],long:["Before R.O.C.","Minguo"]},dayPeriods:{am:"AM",pm:"PM"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"{minusSign}{currency}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:".",group:",",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN¥",EUR:"€",GBP:"£",HKD:"HK$",ILS:"₪",INR:"₹",JPY:"¥",KRW:"₩",MXN:"MX$",NZD:"NZ$",TWD:"NT$",USD:"$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}})},function(t,e){IntlPolyfill.__addLocaleData({locale:"es",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1}, {0}",long:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"E d",Ehm:"E, h:mm a",EHm:"E, H:mm",Ehms:"E, h:mm:ss a",EHms:"E, H:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d MMM y G",GyMMMEd:"E, d MMM y G",GyMMMM:"MMMM 'de' y G",GyMMMMd:"d 'de' MMMM 'de' y G",GyMMMMEd:"E, d 'de' MMMM 'de' y G",h:"h a",H:"H",hm:"h:mm a",Hm:"H:mm",hms:"h:mm:ss a",Hms:"H:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"H:mm:ss v",hmsvvvv:"h:mm:ss a (vvvv)",Hmsvvvv:"H:mm:ss (vvvv)",hmv:"h:mm a v",Hmv:"H:mm v",M:"L",Md:"d/M",MEd:"E, d/M",MMd:"d/M",MMdd:"d/M",MMM:"LLL",MMMd:"d MMM",MMMEd:"E, d MMM",MMMMd:"d 'de' MMMM",MMMMEd:"E, d 'de' MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"d/M/y",yMEd:"EEE, d/M/y",yMM:"M/y",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"EEE, d MMM y",yMMMM:"MMMM 'de' y",yMMMMd:"d 'de' MMMM 'de' y",yMMMMEd:"EEE, d 'de' MMMM 'de' y",yQQQ:"QQQ y",yQQQQ:"QQQQ 'de' y"},dateFormats:{yMMMMEEEEd:"EEEE, d 'de' MMMM 'de' y",yMMMMd:"d 'de' MMMM 'de' y",yMMMd:"d MMM y",yMd:"d/M/yy"},timeFormats:{hmmsszzzz:"H:mm:ss (zzzz)",hmsz:"H:mm:ss z",hms:"H:mm:ss",hm:"H:mm"}},calendars:{buddhist:{months:{narrow:["E","F","M","A","M","J","J","A","S","O","N","D"],short:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],long:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["BE"],short:["BE"],long:["BE"]},dayPeriods:{am:"a. m.",pm:"p. m."}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},dayPeriods:{am:"a. m.",pm:"p. m."}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a. m.",pm:"p. m."}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},dayPeriods:{am:"a. m.",pm:"p. m."}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a. m.",pm:"p. m."}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"a. m.",pm:"p. m."}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a. m.",pm:"p. m."}},gregory:{months:{narrow:["E","F","M","A","M","J","J","A","S","O","N","D"],short:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],long:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["a. C.","d. C.","a. e. c.","e. c."],short:["a. C.","d. C.","a. e. c.","e. c."],long:["antes de Cristo","después de Cristo","antes de la era común","era común"]},dayPeriods:{am:"a. m.",pm:"p. m."}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"],long:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"a. m.",pm:"p. m."}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["Saka"],short:["Saka"],long:["Saka"]},dayPeriods:{am:"a. m.",pm:"p. m."}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"a. m.",pm:"p. m."}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"a. m.",pm:"p. m."}},japanese:{months:{narrow:["E","F","M","A","M","J","J","A","S","O","N","D"],short:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],long:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["Taika (645–650)","Hakuchi (650–671)","Hakuhō (672–686)","Shuchō (686–701)","Taihō (701–704)","Keiun (704–708)","Wadō (708–715)","Reiki (715–717)","Yōrō (717–724)","Jinki (724–729)","Tenpyō (729–749)","Tenpyō-kampō (749-749)","Tenpyō-shōhō (749-757)","Tenpyō-hōji (757-765)","Tenpyō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770–780)","Ten-ō (781-782)","Enryaku (782–806)","Daidō (806–810)","Kōnin (810–824)","Tenchō (824–834)","Jōwa (834–848)","Kajō (848–851)","Ninju (851–854)","Saikō (854–857)","Ten-an (857-859)","Jōgan (859–877)","Gangyō (877–885)","Ninna (885–889)","Kanpyō (889–898)","Shōtai (898–901)","Engi (901–923)","Enchō (923–931)","Jōhei (931–938)","Tengyō (938–947)","Tenryaku (947–957)","Tentoku (957–961)","Ōwa (961–964)","Kōhō (964–968)","Anna (968–970)","Tenroku (970–973)","Ten’en (973–976)","Jōgen (976–978)","Tengen (978–983)","Eikan (983–985)","Kanna (985–987)","Eien (987–989)","Eiso (989–990)","Shōryaku (990–995)","Chōtoku (995–999)","Chōhō (999–1004)","Kankō (1004–1012)","Chōwa (1012–1017)","Kannin (1017–1021)","Jian (1021–1024)","Manju (1024–1028)","Chōgen (1028–1037)","Chōryaku (1037–1040)","Chōkyū (1040–1044)","Kantoku (1044–1046)","Eishō (1046–1053)","Tengi (1053–1058)","Kōhei (1058–1065)","Jiryaku (1065–1069)","Enkyū (1069–1074)","Shōho (1074–1077)","Shōryaku (1077–1081)","Eihō (1081–1084)","Ōtoku (1084–1087)","Kanji (1087–1094)","Kahō (1094–1096)","Eichō (1096–1097)","Jōtoku (1097–1099)","Kōwa (1099–1104)","Chōji (1104–1106)","Kashō (1106–1108)","Tennin (1108–1110)","Ten-ei (1110-1113)","Eikyū (1113–1118)","Gen’ei (1118–1120)","Hōan (1120–1124)","Tenji (1124–1126)","Daiji (1126–1131)","Tenshō (1131–1132)","Chōshō (1132–1135)","Hōen (1135–1141)","Eiji (1141–1142)","Kōji (1142–1144)","Ten’yō (1144–1145)","Kyūan (1145–1151)","Ninpei (1151–1154)","Kyūju (1154–1156)","Hōgen (1156–1159)","Heiji (1159–1160)","Eiryaku (1160–1161)","Ōho (1161–1163)","Chōkan (1163–1165)","Eiman (1165–1166)","Nin’an (1166–1169)","Kaō (1169–1171)","Shōan (1171–1175)","Angen (1175–1177)","Jishō (1177–1181)","Yōwa (1181–1182)","Juei (1182–1184)","Genryaku (1184–1185)","Bunji (1185–1190)","Kenkyū (1190–1199)","Shōji (1199–1201)","Kennin (1201–1204)","Genkyū (1204–1206)","Ken’ei (1206–1207)","Jōgen (1207–1211)","Kenryaku (1211–1213)","Kenpō (1213–1219)","Jōkyū (1219–1222)","Jōō (1222–1224)","Gennin (1224–1225)","Karoku (1225–1227)","Antei (1227–1229)","Kanki (1229–1232)","Jōei (1232–1233)","Tenpuku (1233–1234)","Bunryaku (1234–1235)","Katei (1235–1238)","Ryakunin (1238–1239)","En’ō (1239–1240)","Ninji (1240–1243)","Kangen (1243–1247)","Hōji (1247–1249)","Kenchō (1249–1256)","Kōgen (1256–1257)","Shōka (1257–1259)","Shōgen (1259–1260)","Bun’ō (1260–1261)","Kōchō (1261–1264)","Bun’ei (1264–1275)","Kenji (1275–1278)","Kōan (1278–1288)","Shōō (1288–1293)","Einin (1293–1299)","Shōan (1299–1302)","Kengen (1302–1303)","Kagen (1303–1306)","Tokuji (1306–1308)","Enkyō (1308–1311)","Ōchō (1311–1312)","Shōwa (1312–1317)","Bunpō (1317–1319)","Genō (1319–1321)","Genkō (1321–1324)","Shōchū (1324–1326)","Karyaku (1326–1329)","Gentoku (1329–1331)","Genkō (1331–1334)","Kenmu (1334–1336)","Engen (1336–1340)","Kōkoku (1340–1346)","Shōhei (1346–1370)","Kentoku (1370–1372)","Bunchū (1372–1375)","Tenju (1375–1379)","Kōryaku (1379–1381)","Kōwa (1381–1384)","Genchū (1384–1392)","Meitoku (1384–1387)","Kakei (1387–1389)","Kōō (1389–1390)","Meitoku (1390–1394)","Ōei (1394–1428)","Shōchō (1428–1429)","Eikyō (1429–1441)","Kakitsu (1441–1444)","Bun’an (1444–1449)","Hōtoku (1449–1452)","Kyōtoku (1452–1455)","Kōshō (1455–1457)","Chōroku (1457–1460)","Kanshō (1460–1466)","Bunshō (1466–1467)","Ōnin (1467–1469)","Bunmei (1469–1487)","Chōkyō (1487–1489)","Entoku (1489–1492)","Meiō (1492–1501)","Bunki (1501–1504)","Eishō (1504–1521)","Taiei (1521–1528)","Kyōroku (1528–1532)","Tenbun (1532–1555)","Kōji (1555–1558)","Eiroku (1558–1570)","Genki (1570–1573)","Tenshō (1573–1592)","Bunroku (1592–1596)","Keichō (1596–1615)","Genna (1615–1624)","Kan’ei (1624–1644)","Shōho (1644–1648)","Keian (1648–1652)","Jōō (1652–1655)","Meireki (1655–1658)","Manji (1658–1661)","Kanbun (1661–1673)","Enpō (1673–1681)","Tenna (1681–1684)","Jōkyō (1684–1688)","Genroku (1688–1704)","Hōei (1704–1711)","Shōtoku (1711–1716)","Kyōhō (1716–1736)","Genbun (1736–1741)","Kanpō (1741–1744)","Enkyō (1744–1748)","Kan’en (1748–1751)","Hōreki (1751–1764)","Meiwa (1764–1772)","An’ei (1772–1781)","Tenmei (1781–1789)","Kansei (1789–1801)","Kyōwa (1801–1804)","Bunka (1804–1818)","Bunsei (1818–1830)","Tenpō (1830–1844)","Kōka (1844–1848)","Kaei (1848–1854)","Ansei (1854–1860)","Man’en (1860–1861)","Bunkyū (1861–1864)","Genji (1864–1865)","Keiō (1865–1868)","M","T","S","H"],short:["Taika (645–650)","Hakuchi (650–671)","Hakuhō (672–686)","Shuchō (686–701)","Taihō (701–704)","Keiun (704–708)","Wadō (708–715)","Reiki (715–717)","Yōrō (717–724)","Jinki (724–729)","Tenpyō (729–749)","Tenpyō-kampō (749-749)","Tenpyō-shōhō (749-757)","Tenpyō-hōji (757-765)","Tenpyō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770–780)","Ten-ō (781-782)","Enryaku (782–806)","Daidō (806–810)","Kōnin (810–824)","Tenchō (824–834)","Jōwa (834–848)","Kajō (848–851)","Ninju (851–854)","Saikō (854–857)","Ten-an (857-859)","Jōgan (859–877)","Gangyō (877–885)","Ninna (885–889)","Kanpyō (889–898)","Shōtai (898–901)","Engi (901–923)","Enchō (923–931)","Jōhei (931–938)","Tengyō (938–947)","Tenryaku (947–957)","Tentoku (957–961)","Ōwa (961–964)","Kōhō (964–968)","Anna (968–970)","Tenroku (970–973)","Ten’en (973–976)","Jōgen (976–978)","Tengen (978–983)","Eikan (983–985)","Kanna (985–987)","Eien (987–989)","Eiso (989–990)","Shōryaku (990–995)","Chōtoku (995–999)","Chōhō (999–1004)","Kankō (1004–1012)","Chōwa (1012–1017)","Kannin (1017–1021)","Jian (1021–1024)","Manju (1024–1028)","Chōgen (1028–1037)","Chōryaku (1037–1040)","Chōkyū (1040–1044)","Kantoku (1044–1046)","Eishō (1046–1053)","Tengi (1053–1058)","Kōhei (1058–1065)","Jiryaku (1065–1069)","Enkyū (1069–1074)","Shōho (1074–1077)","Shōryaku (1077–1081)","Eihō (1081–1084)","Ōtoku (1084–1087)","Kanji (1087–1094)","Kahō (1094–1096)","Eichō (1096–1097)","Jōtoku (1097–1099)","Kōwa (1099–1104)","Chōji (1104–1106)","Kashō (1106–1108)","Tennin (1108–1110)","Ten-ei (1110-1113)","Eikyū (1113–1118)","Gen’ei (1118–1120)","Hōan (1120–1124)","Tenji (1124–1126)","Daiji (1126–1131)","Tenshō (1131–1132)","Chōshō (1132–1135)","Hōen (1135–1141)","Eiji (1141–1142)","Kōji (1142–1144)","Ten’yō (1144–1145)","Kyūan (1145–1151)","Ninpei (1151–1154)","Kyūju (1154–1156)","Hōgen (1156–1159)","Heiji (1159–1160)","Eiryaku (1160–1161)","Ōho (1161–1163)","Chōkan (1163–1165)","Eiman (1165–1166)","Nin’an (1166–1169)","Kaō (1169–1171)","Shōan (1171–1175)","Angen (1175–1177)","Jishō (1177–1181)","Yōwa (1181–1182)","Juei (1182–1184)","Genryaku (1184–1185)","Bunji (1185–1190)","Kenkyū (1190–1199)","Shōji (1199–1201)","Kennin (1201–1204)","Genkyū (1204–1206)","Ken’ei (1206–1207)","Jōgen (1207–1211)","Kenryaku (1211–1213)","Kenpō (1213–1219)","Jōkyū (1219–1222)","Jōō (1222–1224)","Gennin (1224–1225)","Karoku (1225–1227)","Antei (1227–1229)","Kanki (1229–1232)","Jōei (1232–1233)","Tenpuku (1233–1234)","Bunryaku (1234–1235)","Katei (1235–1238)","Ryakunin (1238–1239)","En’ō (1239–1240)","Ninji (1240–1243)","Kangen (1243–1247)","Hōji (1247–1249)","Kenchō (1249–1256)","Kōgen (1256–1257)","Shōka (1257–1259)","Shōgen (1259–1260)","Bun’ō (1260–1261)","Kōchō (1261–1264)","Bun’ei (1264–1275)","Kenji (1275–1278)","Kōan (1278–1288)","Shōō (1288–1293)","Einin (1293–1299)","Shōan (1299–1302)","Kengen (1302–1303)","Kagen (1303–1306)","Tokuji (1306–1308)","Enkyō (1308–1311)","Ōchō (1311–1312)","Shōwa (1312–1317)","Bunpō (1317–1319)","Genō (1319–1321)","Genkō (1321–1324)","Shōchū (1324–1326)","Karyaku (1326–1329)","Gentoku (1329–1331)","Genkō (1331–1334)","Kenmu (1334–1336)","Engen (1336–1340)","Kōkoku (1340–1346)","Shōhei (1346–1370)","Kentoku (1370–1372)","Bunchū (1372–1375)","Tenju (1375–1379)","Kōryaku (1379–1381)","Kōwa (1381–1384)","Genchū (1384–1392)","Meitoku (1384–1387)","Kakei (1387–1389)","Kōō (1389–1390)","Meitoku (1390–1394)","Ōei (1394–1428)","Shōchō (1428–1429)","Eikyō (1429–1441)","Kakitsu (1441–1444)","Bun’an (1444–1449)","Hōtoku (1449–1452)","Kyōtoku (1452–1455)","Kōshō (1455–1457)","Chōroku (1457–1460)","Kanshō (1460–1466)","Bunshō (1466–1467)","Ōnin (1467–1469)","Bunmei (1469–1487)","Chōkyō (1487–1489)","Entoku (1489–1492)","Meiō (1492–1501)","Bunki (1501–1504)","Eishō (1504–1521)","Taiei (1521–1528)","Kyōroku (1528–1532)","Tenbun (1532–1555)","Kōji (1555–1558)","Eiroku (1558–1570)","Genki (1570–1573)","Tenshō (1573–1592)","Bunroku (1592–1596)","Keichō (1596–1615)","Genna (1615–1624)","Kan’ei (1624–1644)","Shōho (1644–1648)","Keian (1648–1652)","Jōō (1652–1655)","Meireki (1655–1658)","Manji (1658–1661)","Kanbun (1661–1673)","Enpō (1673–1681)","Tenna (1681–1684)","Jōkyō (1684–1688)","Genroku (1688–1704)","Hōei (1704–1711)","Shōtoku (1711–1716)","Kyōhō (1716–1736)","Genbun (1736–1741)","Kanpō (1741–1744)","Enkyō (1744–1748)","Kan’en (1748–1751)","Hōreki (1751–1764)","Meiwa (1764–1772)","An’ei (1772–1781)","Tenmei (1781–1789)","Kansei (1789–1801)","Kyōwa (1801–1804)","Bunka (1804–1818)","Bunsei (1818–1830)","Tenpō (1830–1844)","Kōka (1844–1848)","Kaei (1848–1854)","Ansei (1854–1860)","Man’en (1860–1861)","Bunkyū (1861–1864)","Genji (1864–1865)","Keiō (1865–1868)","Meiji","Taishō","Shōwa","Heisei"],
long:["Taika (645–650)","Hakuchi (650–671)","Hakuhō (672–686)","Shuchō (686–701)","Taihō (701–704)","Keiun (704–708)","Wadō (708–715)","Reiki (715–717)","Yōrō (717–724)","Jinki (724–729)","Tenpyō (729–749)","Tenpyō-kampō (749-749)","Tenpyō-shōhō (749-757)","Tenpyō-hōji (757-765)","Tenpyō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770–780)","Ten-ō (781-782)","Enryaku (782–806)","Daidō (806–810)","Kōnin (810–824)","Tenchō (824–834)","Jōwa (834–848)","Kajō (848–851)","Ninju (851–854)","Saikō (854–857)","Ten-an (857-859)","Jōgan (859–877)","Gangyō (877–885)","Ninna (885–889)","Kanpyō (889–898)","Shōtai (898–901)","Engi (901–923)","Enchō (923–931)","Jōhei (931–938)","Tengyō (938–947)","Tenryaku (947–957)","Tentoku (957–961)","Ōwa (961–964)","Kōhō (964–968)","Anna (968–970)","Tenroku (970–973)","Ten’en (973–976)","Jōgen (976–978)","Tengen (978–983)","Eikan (983–985)","Kanna (985–987)","Eien (987–989)","Eiso (989–990)","Shōryaku (990–995)","Chōtoku (995–999)","Chōhō (999–1004)","Kankō (1004–1012)","Chōwa (1012–1017)","Kannin (1017–1021)","Jian (1021–1024)","Manju (1024–1028)","Chōgen (1028–1037)","Chōryaku (1037–1040)","Chōkyū (1040–1044)","Kantoku (1044–1046)","Eishō (1046–1053)","Tengi (1053–1058)","Kōhei (1058–1065)","Jiryaku (1065–1069)","Enkyū (1069–1074)","Shōho (1074–1077)","Shōryaku (1077–1081)","Eihō (1081–1084)","Ōtoku (1084–1087)","Kanji (1087–1094)","Kahō (1094–1096)","Eichō (1096–1097)","Jōtoku (1097–1099)","Kōwa (1099–1104)","Chōji (1104–1106)","Kashō (1106–1108)","Tennin (1108–1110)","Ten-ei (1110-1113)","Eikyū (1113–1118)","Gen’ei (1118–1120)","Hōan (1120–1124)","Tenji (1124–1126)","Daiji (1126–1131)","Tenshō (1131–1132)","Chōshō (1132–1135)","Hōen (1135–1141)","Eiji (1141–1142)","Kōji (1142–1144)","Ten’yō (1144–1145)","Kyūan (1145–1151)","Ninpei (1151–1154)","Kyūju (1154–1156)","Hōgen (1156–1159)","Heiji (1159–1160)","Eiryaku (1160–1161)","Ōho (1161–1163)","Chōkan (1163–1165)","Eiman (1165–1166)","Nin’an (1166–1169)","Kaō (1169–1171)","Shōan (1171–1175)","Angen (1175–1177)","Jishō (1177–1181)","Yōwa (1181–1182)","Juei (1182–1184)","Genryaku (1184–1185)","Bunji (1185–1190)","Kenkyū (1190–1199)","Shōji (1199–1201)","Kennin (1201–1204)","Genkyū (1204–1206)","Ken’ei (1206–1207)","Jōgen (1207–1211)","Kenryaku (1211–1213)","Kenpō (1213–1219)","Jōkyū (1219–1222)","Jōō (1222–1224)","Gennin (1224–1225)","Karoku (1225–1227)","Antei (1227–1229)","Kanki (1229–1232)","Jōei (1232–1233)","Tenpuku (1233–1234)","Bunryaku (1234–1235)","Katei (1235–1238)","Ryakunin (1238–1239)","En’ō (1239–1240)","Ninji (1240–1243)","Kangen (1243–1247)","Hōji (1247–1249)","Kenchō (1249–1256)","Kōgen (1256–1257)","Shōka (1257–1259)","Shōgen (1259–1260)","Bun’ō (1260–1261)","Kōchō (1261–1264)","Bun’ei (1264–1275)","Kenji (1275–1278)","Kōan (1278–1288)","Shōō (1288–1293)","Einin (1293–1299)","Shōan (1299–1302)","Kengen (1302–1303)","Kagen (1303–1306)","Tokuji (1306–1308)","Enkyō (1308–1311)","Ōchō (1311–1312)","Shōwa (1312–1317)","Bunpō (1317–1319)","Genō (1319–1321)","Genkō (1321–1324)","Shōchū (1324–1326)","Karyaku (1326–1329)","Gentoku (1329–1331)","Genkō (1331–1334)","Kenmu (1334–1336)","Engen (1336–1340)","Kōkoku (1340–1346)","Shōhei (1346–1370)","Kentoku (1370–1372)","Bunchū (1372–1375)","Tenju (1375–1379)","Kōryaku (1379–1381)","Kōwa (1381–1384)","Genchū (1384–1392)","Meitoku (1384–1387)","Kakei (1387–1389)","Kōō (1389–1390)","Meitoku (1390–1394)","Ōei (1394–1428)","Shōchō (1428–1429)","Eikyō (1429–1441)","Kakitsu (1441–1444)","Bun’an (1444–1449)","Hōtoku (1449–1452)","Kyōtoku (1452–1455)","Kōshō (1455–1457)","Chōroku (1457–1460)","Kanshō (1460–1466)","Bunshō (1466–1467)","Ōnin (1467–1469)","Bunmei (1469–1487)","Chōkyō (1487–1489)","Entoku (1489–1492)","Meiō (1492–1501)","Bunki (1501–1504)","Eishō (1504–1521)","Taiei (1521–1528)","Kyōroku (1528–1532)","Tenbun (1532–1555)","Kōji (1555–1558)","Eiroku (1558–1570)","Genki (1570–1573)","Tenshō (1573–1592)","Bunroku (1592–1596)","Keichō (1596–1615)","Genna (1615–1624)","Kan’ei (1624–1644)","Shōho (1644–1648)","Keian (1648–1652)","Jōō (1652–1655)","Meireki (1655–1658)","Manji (1658–1661)","Kanbun (1661–1673)","Enpō (1673–1681)","Tenna (1681–1684)","Jōkyō (1684–1688)","Genroku (1688–1704)","Hōei (1704–1711)","Shōtoku (1711–1716)","Kyōhō (1716–1736)","Genbun (1736–1741)","Kanpō (1741–1744)","Enkyō (1744–1748)","Kan’en (1748–1751)","Hōreki (1751–1764)","Meiwa (1764–1772)","An’ei (1772–1781)","Tenmei (1781–1789)","Kansei (1789–1801)","Kyōwa (1801–1804)","Bunka (1804–1818)","Bunsei (1818–1830)","Tenpō (1830–1844)","Kōka (1844–1848)","Kaei (1848–1854)","Ansei (1854–1860)","Man’en (1860–1861)","Bunkyū (1861–1864)","Genji (1864–1865)","Keiō (1865–1868)","Meiji","Taishō","Shōwa","Heisei"]},dayPeriods:{am:"a. m.",pm:"p. m."}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"a. m.",pm:"p. m."}},roc:{months:{narrow:["E","F","M","A","M","J","J","A","S","O","N","D"],short:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],long:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["antes de R.O.C.","R.O.C."],short:["antes de R.O.C.","R.O.C."],long:["antes de R.O.C.","R.O.C."]},dayPeriods:{am:"a. m.",pm:"p. m."}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number} {currency}",negativePattern:"{minusSign}{number} {currency}"},percent:{positivePattern:"{number} {percentSign}",negativePattern:"{minusSign}{number} {percentSign}"}},symbols:{latn:{decimal:",",group:".",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{CAD:"CA$",ESP:"₧",EUR:"€",THB:"฿",USD:"$",VND:"₫",XPF:"CFPF"}}})},function(t,e){IntlPolyfill.__addLocaleData({locale:"fr",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1} 'à' {0}",full:"{1} 'à' {0}",long:"{1} 'à' {0}",availableFormats:{d:"d",E:"E",Ed:"E d",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d MMM y G",GyMMMEd:"E d MMM y G",h:"h a",H:"HH 'h'",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"dd/MM",MEd:"E dd/MM",MMM:"LLL",MMMd:"d MMM",MMMEd:"E d MMM",MMMMd:"d MMMM",ms:"mm:ss",y:"y",yM:"MM/y",yMd:"dd/MM/y",yMEd:"E dd/MM/y",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"E d MMM y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE d MMMM y",yMMMMd:"d MMMM y",yMMMd:"d MMM y",yMd:"dd/MM/y"},timeFormats:{hmmsszzzz:"HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{buddhist:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],long:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["E.B."],short:["ère b."],long:["ère bouddhiste"]},dayPeriods:{am:"AM",pm:"PM"}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1yuè","2yuè","3yuè","4yuè","5yuè","6yuè","7yuè","8yuè","9yuè","10yuè","11yuè","12yuè"],long:["zhēngyuè","èryuè","sānyuè","sìyuè","wǔyuè","liùyuè","qīyuè","bāyuè","jiǔyuè","shíyuè","shíyīyuè","shí’èryuè"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},dayPeriods:{am:"AM",pm:"PM"}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1yuè","2yuè","3yuè","4yuè","5yuè","6yuè","7yuè","8yuè","9yuè","10yuè","11yuè","12yuè"],long:["zhēngyuè","èryuè","sānyuè","sìyuè","wǔyuè","liùyuè","qīyuè","bāyuè","jiǔyuè","shíyuè","shíyīyuè","shí’èryuè"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},dayPeriods:{am:"AM",pm:"PM"}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"AM",pm:"PM"}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],long:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["av. J.-C.","ap. J.-C.","AEC","EC"],short:["av. J.-C.","ap. J.-C.","AEC","EC"],long:["avant Jésus-Christ","après Jésus-Christ","avant l’ère commune","de l’ère commune"]},dayPeriods:{am:"AM",pm:"PM"}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tisseri","Hesvan","Kislev","Tébeth","Schébat","Adar I","Adar","Nissan","Iyar","Sivan","Tamouz","Ab","Elloul","Adar II"],long:["Tisseri","Hesvan","Kislev","Tébeth","Schébat","Adar I","Adar","Nissan","Iyar","Sivan","Tamouz","Ab","Elloul","Adar II"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"AM",pm:"PM"}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["Saka"],short:["Saka"],long:["Saka"]},dayPeriods:{am:"AM",pm:"PM"}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["mouh.","saf.","rab. aw.","rab. th.","joum. oul.","joum. tha.","raj.","chaa.","ram.","chaw.","dhou. q.","dhou. h."],long:["mouharram","safar","rabia al awal","rabia ath-thani","joumada al oula","joumada ath-thania","rajab","chaabane","ramadan","chawwal","dhou al qi`da","dhou al-hijja"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["mouh.","saf.","rab. aw.","rab. th.","joum. oul.","joum. tha.","raj.","chaa.","ram.","chaw.","dhou. q.","dhou. h."],long:["mouharram","safar","rabia al awal","rabia ath-thani","joumada al oula","joumada ath-thania","rajab","chaabane","ramadan","chawwal","dhou al qi`da","dhou al-hijja"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},japanese:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],long:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["Taika (645–650)","Hakuchi (650–671)","Hakuhō (672–686)","Shuchō (686–701)","Taihō (701–704)","Keiun (704–708)","Wadō (708–715)","Reiki (715–717)","Yōrō (717–724)","Jinki (724–729)","Tenpyō (729–749)","Tenpyō-kampō (749-749)","Tenpyō-shōhō (749-757)","Tenpyō-hōji (757-765)","Tenpyō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770–780)","Ten-ō (781-782)","Enryaku (782–806)","Daidō (806–810)","Kōnin (810–824)","Tenchō (824–834)","Jōwa (834–848)","Kajō (848–851)","Ninju (851–854)","Saikō (854–857)","Ten-an (857-859)","Jōgan (859–877)","Gangyō (877–885)","Ninna (885–889)","Kanpyō (889–898)","Shōtai (898–901)","Engi (901–923)","Enchō (923–931)","Jōhei (931–938)","Tengyō (938–947)","Tenryaku (947–957)","Tentoku (957–961)","Ōwa (961–964)","Kōhō (964–968)","Anna (968–970)","Tenroku (970–973)","Ten’en (973–976)","Jōgen (976–978)","Tengen (978–983)","Eikan (983–985)","Kanna (985–987)","Eien (987–989)","Eiso (989–990)","Shōryaku (990–995)","Chōtoku (995–999)","Chōhō (999–1004)","Kankō (1004–1012)","Chōwa (1012–1017)","Kannin (1017–1021)","Jian (1021–1024)","Manju (1024–1028)","Chōgen (1028–1037)","Chōryaku (1037–1040)","Chōkyū (1040–1044)","Kantoku (1044–1046)","Eishō (1046–1053)","Tengi (1053–1058)","Kōhei (1058–1065)","Jiryaku (1065–1069)","Enkyū (1069–1074)","Shōho (1074–1077)","Shōryaku (1077–1081)","Eihō (1081–1084)","Ōtoku (1084–1087)","Kanji (1087–1094)","Kahō (1094–1096)","Eichō (1096–1097)","Jōtoku (1097–1099)","Kōwa (1099–1104)","Chōji (1104–1106)","Kashō (1106–1108)","Tennin (1108–1110)","Ten-ei (1110-1113)","Eikyū (1113–1118)","Gen’ei (1118–1120)","Hōan (1120–1124)","Tenji (1124–1126)","Daiji (1126–1131)","Tenshō (1131–1132)","Chōshō (1132–1135)","Hōen (1135–1141)","Eiji (1141–1142)","Kōji (1142–1144)","Ten’yō (1144–1145)","Kyūan (1145–1151)","Ninpei (1151–1154)","Kyūju (1154–1156)","Hōgen (1156–1159)","Heiji (1159–1160)","Eiryaku (1160–1161)","Ōho (1161–1163)","Chōkan (1163–1165)","Eiman (1165–1166)","Nin’an (1166–1169)","Kaō (1169–1171)","Shōan (1171–1175)","Angen (1175–1177)","Jishō (1177–1181)","Yōwa (1181–1182)","Juei (1182–1184)","Genryaku (1184–1185)","Bunji (1185–1190)","Kenkyū (1190–1199)","Shōji (1199–1201)","Kennin (1201–1204)","Genkyū (1204–1206)","Ken’ei (1206–1207)","Jōgen (1207–1211)","Kenryaku (1211–1213)","Kenpō (1213–1219)","Jōkyū (1219–1222)","Jōō (1222–1224)","Gennin (1224–1225)","Karoku (1225–1227)","Antei (1227–1229)","Kanki (1229–1232)","Jōei (1232–1233)","Tenpuku (1233–1234)","Bunryaku (1234–1235)","Katei (1235–1238)","Ryakunin (1238–1239)","En’ō (1239–1240)","Ninji (1240–1243)","Kangen (1243–1247)","Hōji (1247–1249)","Kenchō (1249–1256)","Kōgen (1256–1257)","Shōka (1257–1259)","Shōgen (1259–1260)","Bun’ō (1260–1261)","Kōchō (1261–1264)","Bun’ei (1264–1275)","Kenji (1275–1278)","Kōan (1278–1288)","Shōō (1288–1293)","Einin (1293–1299)","Shōan (1299–1302)","Kengen (1302–1303)","Kagen (1303–1306)","Tokuji (1306–1308)","Enkyō (1308–1311)","Ōchō (1311–1312)","Shōwa (1312–1317)","Bunpō (1317–1319)","Genō (1319–1321)","Genkō (1321–1324)","Shōchū (1324–1326)","Karyaku (1326–1329)","Gentoku (1329–1331)","Genkō (1331–1334)","Kenmu (1334–1336)","Engen (1336–1340)","Kōkoku (1340–1346)","Shōhei (1346–1370)","Kentoku (1370–1372)","Bunchū (1372–1375)","Tenju (1375–1379)","Kōryaku (1379–1381)","Kōwa (1381–1384)","Genchū (1384–1392)","Meitoku (1384–1387)","Kakei (1387–1389)","Kōō (1389–1390)","Meitoku (1390–1394)","Ōei (1394–1428)","Shōchō (1428–1429)","Eikyō (1429–1441)","Kakitsu (1441–1444)","Bun’an (1444–1449)","Hōtoku (1449–1452)","Kyōtoku (1452–1455)","Kōshō (1455–1457)","Chōroku (1457–1460)","Kanshō (1460–1466)","Bunshō (1466–1467)","Ōnin (1467–1469)","Bunmei (1469–1487)","Chōkyō (1487–1489)","Entoku (1489–1492)","Meiō (1492–1501)","Bunki (1501–1504)","Eishō (1504–1521)","Taiei (1521–1528)","Kyōroku (1528–1532)","Tenbun (1532–1555)","Kōji (1555–1558)","Eiroku (1558–1570)","Genki (1570–1573)","Tenshō (1573–1592)","Bunroku (1592–1596)","Keichō (1596–1615)","Genna (1615–1624)","Kan’ei (1624–1644)","Shōho (1644–1648)","Keian (1648–1652)","Jōō (1652–1655)","Meireki (1655–1658)","Manji (1658–1661)","Kanbun (1661–1673)","Enpō (1673–1681)","Tenna (1681–1684)","Jōkyō (1684–1688)","Genroku (1688–1704)","Hōei (1704–1711)","Shōtoku (1711–1716)","Kyōhō (1716–1736)","Genbun (1736–1741)","Kanpō (1741–1744)","Enkyō (1744–1748)","Kan’en (1748–1751)","Hōreki (1751–1764)","Meiwa (1764–1772)","An’ei (1772–1781)","Tenmei (1781–1789)","Kansei (1789–1801)","Kyōwa (1801–1804)","Bunka (1804–1818)","Bunsei (1818–1830)","Tenpō (1830–1844)","Kōka (1844–1848)","Kaei (1848–1854)","Ansei (1854–1860)","Man’en (1860–1861)","Bunkyū (1861–1864)","Genji (1864–1865)","Keiō (1865–1868)","M","T","S","H"],short:["Taika (645–650)","Hakuchi (650–671)","Hakuhō (672–686)","Shuchō (686–701)","Taihō (701–704)","Keiun (704–708)","Wadō (708–715)","Reiki (715–717)","Yōrō (717–724)","Jinki (724–729)","Tenpyō (729–749)","Tenpyō-kampō (749-749)","Tenpyō-shōhō (749-757)","Tenpyō-hōji (757-765)","Tenpyō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770–780)","Ten-ō (781-782)","Enryaku (782–806)","Daidō (806–810)","Kōnin (810–824)","Tenchō (824–834)","Jōwa (834–848)","Kajō (848–851)","Ninju (851–854)","Saikō (854–857)","Ten-an (857-859)","Jōgan (859–877)","Gangyō (877–885)","Ninna (885–889)","Kanpyō (889–898)","Shōtai (898–901)","Engi (901–923)","Enchō (923–931)","Jōhei (931–938)","Tengyō (938–947)","Tenryaku (947–957)","Tentoku (957–961)","Ōwa (961–964)","Kōhō (964–968)","Anna (968–970)","Tenroku (970–973)","Ten’en (973–976)","Jōgen (976–978)","Tengen (978–983)","Eikan (983–985)","Kanna (985–987)","Eien (987–989)","Eiso (989–990)","Shōryaku (990–995)","Chōtoku (995–999)","Chōhō (999–1004)","Kankō (1004–1012)","Chōwa (1012–1017)","Kannin (1017–1021)","Jian (1021–1024)","Manju (1024–1028)","Chōgen (1028–1037)","Chōryaku (1037–1040)","Chōkyū (1040–1044)","Kantoku (1044–1046)","Eishō (1046–1053)","Tengi (1053–1058)","Kōhei (1058–1065)","Jiryaku (1065–1069)","Enkyū (1069–1074)","Shōho (1074–1077)","Shōryaku (1077–1081)","Eihō (1081–1084)","Ōtoku (1084–1087)","Kanji (1087–1094)","Kahō (1094–1096)","Eichō (1096–1097)","Jōtoku (1097–1099)","Kōwa (1099–1104)","Chōji (1104–1106)","Kashō (1106–1108)","Tennin (1108–1110)","Ten-ei (1110-1113)","Eikyū (1113–1118)","Gen’ei (1118–1120)","Hōan (1120–1124)","Tenji (1124–1126)","Daiji (1126–1131)","Tenshō (1131–1132)","Chōshō (1132–1135)","Hōen (1135–1141)","Eiji (1141–1142)","Kōji (1142–1144)","Ten’yō (1144–1145)","Kyūan (1145–1151)","Ninpei (1151–1154)","Kyūju (1154–1156)","Hōgen (1156–1159)","Heiji (1159–1160)","Eiryaku (1160–1161)","Ōho (1161–1163)","Chōkan (1163–1165)","Eiman (1165–1166)","Nin’an (1166–1169)","Kaō (1169–1171)","Shōan (1171–1175)","Angen (1175–1177)","Jishō (1177–1181)","Yōwa (1181–1182)","Juei (1182–1184)","Genryaku (1184–1185)","Bunji (1185–1190)","Kenkyū (1190–1199)","Shōji (1199–1201)","Kennin (1201–1204)","Genkyū (1204–1206)","Ken’ei (1206–1207)","Jōgen (1207–1211)","Kenryaku (1211–1213)","Kenpō (1213–1219)","Jōkyū (1219–1222)","Jōō (1222–1224)","Gennin (1224–1225)","Karoku (1225–1227)","Antei (1227–1229)","Kanki (1229–1232)","Jōei (1232–1233)","Tenpuku (1233–1234)","Bunryaku (1234–1235)","Katei (1235–1238)","Ryakunin (1238–1239)","En’ō (1239–1240)","Ninji (1240–1243)","Kangen (1243–1247)","Hōji (1247–1249)","Kenchō (1249–1256)","Kōgen (1256–1257)","Shōka (1257–1259)","Shōgen (1259–1260)","Bun’ō (1260–1261)","Kōchō (1261–1264)","Bun’ei (1264–1275)","Kenji (1275–1278)","Kōan (1278–1288)","Shōō (1288–1293)","Einin (1293–1299)","Shōan (1299–1302)","Kengen (1302–1303)","Kagen (1303–1306)","Tokuji (1306–1308)","Enkyō (1308–1311)","Ōchō (1311–1312)","Shōwa (1312–1317)","Bunpō (1317–1319)","Genō (1319–1321)","Genkō (1321–1324)","Shōchū (1324–1326)","Karyaku (1326–1329)","Gentoku (1329–1331)","Genkō (1331–1334)","Kenmu (1334–1336)","Engen (1336–1340)","Kōkoku (1340–1346)","Shōhei (1346–1370)","Kentoku (1370–1372)","Bunchū (1372–1375)","Tenju (1375–1379)","Kōryaku (1379–1381)","Kōwa (1381–1384)","Genchū (1384–1392)","Meitoku (1384–1387)","Kakei (1387–1389)","Kōō (1389–1390)","Meitoku (1390–1394)","Ōei (1394–1428)","Shōchō (1428–1429)","Eikyō (1429–1441)","Kakitsu (1441–1444)","Bun’an (1444–1449)","Hōtoku (1449–1452)","Kyōtoku (1452–1455)","Kōshō (1455–1457)","Chōroku (1457–1460)","Kanshō (1460–1466)","Bunshō (1466–1467)","Ōnin (1467–1469)","Bunmei (1469–1487)","Chōkyō (1487–1489)","Entoku (1489–1492)","Meiō (1492–1501)","Bunki (1501–1504)","Eishō (1504–1521)","Taiei (1521–1528)","Kyōroku (1528–1532)","Tenbun (1532–1555)","Kōji (1555–1558)","Eiroku (1558–1570)","Genki (1570–1573)","Tenshō (1573–1592)","Bunroku (1592–1596)","Keichō (1596–1615)","Genna (1615–1624)","Kan’ei (1624–1644)","Shōho (1644–1648)","Keian (1648–1652)","Jōō (1652–1655)","Meireki (1655–1658)","Manji (1658–1661)","Kanbun (1661–1673)","Enpō (1673–1681)","Tenna (1681–1684)","Jōkyō (1684–1688)","Genroku (1688–1704)","Hōei (1704–1711)","Shōtoku (1711–1716)","Kyōhō (1716–1736)","Genbun (1736–1741)","Kanpō (1741–1744)","Enkyō (1744–1748)","Kan’en (1748–1751)","Hōreki (1751–1764)","Meiwa (1764–1772)","An’ei (1772–1781)","Tenmei (1781–1789)","Kansei (1789–1801)","Kyōwa (1801–1804)","Bunka (1804–1818)","Bunsei (1818–1830)","Tenpō (1830–1844)","Kōka (1844–1848)","Kaei (1848–1854)","Ansei (1854–1860)","Man’en (1860–1861)","Bunkyū (1861–1864)","Genji (1864–1865)","Keiō (1865–1868)","Meiji","Taishō","Shōwa","Heisei"],long:["Taika (645–650)","Hakuchi (650–671)","Hakuhō (672–686)","Shuchō (686–701)","Taihō (701–704)","Keiun (704–708)","Wadō (708–715)","Reiki (715–717)","Yōrō (717–724)","Jinki (724–729)","Tenpyō (729–749)","Tenpyō-kampō (749-749)","Tenpyō-shōhō (749-757)","Tenpyō-hōji (757-765)","Tenpyō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770–780)","Ten-ō (781-782)","Enryaku (782–806)","Daidō (806–810)","Kōnin (810–824)","Tenchō (824–834)","Jōwa (834–848)","Kajō (848–851)","Ninju (851–854)","Saikō (854–857)","Ten-an (857-859)","Jōgan (859–877)","Gangyō (877–885)","Ninna (885–889)","Kanpyō (889–898)","Shōtai (898–901)","Engi (901–923)","Enchō (923–931)","Jōhei (931–938)","Tengyō (938–947)","Tenryaku (947–957)","Tentoku (957–961)","Ōwa (961–964)","Kōhō (964–968)","Anna (968–970)","Tenroku (970–973)","Ten’en (973–976)","Jōgen (976–978)","Tengen (978–983)","Eikan (983–985)","Kanna (985–987)","Eien (987–989)","Eiso (989–990)","Shōryaku (990–995)","Chōtoku (995–999)","Chōhō (999–1004)","Kankō (1004–1012)","Chōwa (1012–1017)","Kannin (1017–1021)","Jian (1021–1024)","Manju (1024–1028)","Chōgen (1028–1037)","Chōryaku (1037–1040)","Chōkyū (1040–1044)","Kantoku (1044–1046)","Eishō (1046–1053)","Tengi (1053–1058)","Kōhei (1058–1065)","Jiryaku (1065–1069)","Enkyū (1069–1074)","Shōho (1074–1077)","Shōryaku (1077–1081)","Eihō (1081–1084)","Ōtoku (1084–1087)","Kanji (1087–1094)","Kahō (1094–1096)","Eichō (1096–1097)","Jōtoku (1097–1099)","Kōwa (1099–1104)","Chōji (1104–1106)","Kashō (1106–1108)","Tennin (1108–1110)","Ten-ei (1110-1113)","Eikyū (1113–1118)","Gen’ei (1118–1120)","Hōan (1120–1124)","Tenji (1124–1126)","Daiji (1126–1131)","Tenshō (1131–1132)","Chōshō (1132–1135)","Hōen (1135–1141)","Eiji (1141–1142)","Kōji (1142–1144)","Ten’yō (1144–1145)","Kyūan (1145–1151)","Ninpei (1151–1154)","Kyūju (1154–1156)","Hōgen (1156–1159)","Heiji (1159–1160)","Eiryaku (1160–1161)","Ōho (1161–1163)","Chōkan (1163–1165)","Eiman (1165–1166)","Nin’an (1166–1169)","Kaō (1169–1171)","Shōan (1171–1175)","Angen (1175–1177)","Jishō (1177–1181)","Yōwa (1181–1182)","Juei (1182–1184)","Genryaku (1184–1185)","Bunji (1185–1190)","Kenkyū (1190–1199)","Shōji (1199–1201)","Kennin (1201–1204)","Genkyū (1204–1206)","Ken’ei (1206–1207)","Jōgen (1207–1211)","Kenryaku (1211–1213)","Kenpō (1213–1219)","Jōkyū (1219–1222)","Jōō (1222–1224)","Gennin (1224–1225)","Karoku (1225–1227)","Antei (1227–1229)","Kanki (1229–1232)","Jōei (1232–1233)","Tenpuku (1233–1234)","Bunryaku (1234–1235)","Katei (1235–1238)","Ryakunin (1238–1239)","En’ō (1239–1240)","Ninji (1240–1243)","Kangen (1243–1247)","Hōji (1247–1249)","Kenchō (1249–1256)","Kōgen (1256–1257)","Shōka (1257–1259)","Shōgen (1259–1260)","Bun’ō (1260–1261)","Kōchō (1261–1264)","Bun’ei (1264–1275)","Kenji (1275–1278)","Kōan (1278–1288)","Shōō (1288–1293)","Einin (1293–1299)","Shōan (1299–1302)","Kengen (1302–1303)","Kagen (1303–1306)","Tokuji (1306–1308)","Enkyō (1308–1311)","Ōchō (1311–1312)","Shōwa (1312–1317)","Bunpō (1317–1319)","Genō (1319–1321)","Genkō (1321–1324)","Shōchū (1324–1326)","Karyaku (1326–1329)","Gentoku (1329–1331)","Genkō (1331–1334)","Kenmu (1334–1336)","Engen (1336–1340)","Kōkoku (1340–1346)","Shōhei (1346–1370)","Kentoku (1370–1372)","Bunchū (1372–1375)","Tenju (1375–1379)","Kōryaku (1379–1381)","Kōwa (1381–1384)","Genchū (1384–1392)","Meitoku (1384–1387)","Kakei (1387–1389)","Kōō (1389–1390)","Meitoku (1390–1394)","Ōei (1394–1428)","Shōchō (1428–1429)","Eikyō (1429–1441)","Kakitsu (1441–1444)","Bun’an (1444–1449)","Hōtoku (1449–1452)","Kyōtoku (1452–1455)","Kōshō (1455–1457)","Chōroku (1457–1460)","Kanshō (1460–1466)","Bunshō (1466–1467)","Ōnin (1467–1469)","Bunmei (1469–1487)","Chōkyō (1487–1489)","Entoku (1489–1492)","Meiō (1492–1501)","Bunki (1501–1504)","Eishō (1504–1521)","Taiei (1521–1528)","Kyōroku (1528–1532)","Tenbun (1532–1555)","Kōji (1555–1558)","Eiroku (1558–1570)","Genki (1570–1573)","Tenshō (1573–1592)","Bunroku (1592–1596)","Keichō (1596–1615)","Genna (1615–1624)","Kan’ei (1624–1644)","Shōho (1644–1648)","Keian (1648–1652)","Jōō (1652–1655)","Meireki (1655–1658)","Manji (1658–1661)","Kanbun (1661–1673)","Enpō (1673–1681)","Tenna (1681–1684)","Jōkyō (1684–1688)","Genroku (1688–1704)","Hōei (1704–1711)","Shōtoku (1711–1716)","Kyōhō (1716–1736)","Genbun (1736–1741)","Kanpō (1741–1744)","Enkyō (1744–1748)","Kan’en (1748–1751)","Hōreki (1751–1764)","Meiwa (1764–1772)","An’ei (1772–1781)","Tenmei (1781–1789)","Kansei (1789–1801)","Kyōwa (1801–1804)","Bunka (1804–1818)","Bunsei (1818–1830)","Tenpō (1830–1844)","Kōka (1844–1848)","Kaei (1848–1854)","Ansei (1854–1860)","Man’en (1860–1861)","Bunkyū (1861–1864)","Genji (1864–1865)","Keiō (1865–1868)","Meiji","Taishō","Shōwa","Heisei"]},dayPeriods:{am:"AM",pm:"PM"}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"AM",pm:"PM"}},roc:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],long:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["avant RdC","RdC"],short:["avant RdC","RdC"],long:["avant RdC","RdC"]},dayPeriods:{am:"AM",pm:"PM"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number} {currency}",negativePattern:"{minusSign}{number} {currency}"},percent:{positivePattern:"{number} {percentSign}",negativePattern:"{minusSign}{number} {percentSign}"}},symbols:{latn:{decimal:",",group:" ",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{ARS:"$AR",AUD:"$AU",BEF:"FB",BMD:"$BM",BND:"$BN",BRL:"R$",BSD:"$BS",BZD:"$BZ",CAD:"$CA",CLP:"$CL",COP:"$CO",CYP:"£CY",EUR:"€",FJD:"$FJ",FKP:"£FK",FRF:"F",GBP:"£GB",GIP:"£GI",IEP:"£IE",ILP:"£IL",ILS:"₪",INR:"₹",ITL:"₤IT",KRW:"₩",LBP:"£LB",MTP:"£MT",MXN:"$MX",NAD:"$NA",NZD:"$NZ",RHD:"$RH",SBD:"$SB",SGD:"$SG",SRD:"$SR",TTD:"$TT",USD:"$US",UYU:"$UY",VND:"₫",WST:"WS$",XAF:"FCFA",XOF:"CFA",XPF:"FCFP"}}})},function(t,e){IntlPolyfill.__addLocaleData({locale:"it",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1}, {0}",medium:"{1}, {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d",E:"ccc",Ed:"E d",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d MMM y G",GyMMMEd:"E d MMM y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d/M",MEd:"E d/M",MMM:"LLL",MMMd:"d MMM",MMMEd:"E d MMM",MMMMd:"d MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"d/M/y",yMEd:"E d/M/y",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"E d MMM y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE d MMMM y",yMMMMd:"d MMMM y",yMMMd:"dd MMM y",yMd:"dd/MM/yy"},timeFormats:{hmmsszzzz:"HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{buddhist:{months:{narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],
short:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],long:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["EB"],short:["EB"],long:["EB"]},dayPeriods:{am:"AM",pm:"PM"}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},dayPeriods:{am:"AM",pm:"PM"}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},dayPeriods:{am:"AM",pm:"PM"}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"AM",pm:"PM"}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],short:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],long:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["aC","dC","BCE","CE"],short:["a.C.","d.C.","a.E.V.","E.V."],long:["a.C.","d.C.","avanti Era Volgare","Era Volgare"]},dayPeriods:{am:"AM",pm:"PM"}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"],long:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"AM",pm:"PM"}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["Saka"],short:["Saka"],long:["Saka"]},dayPeriods:{am:"AM",pm:"PM"}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhuʻl-Q.","Dhuʻl-H."],long:["Muharram","Safar","Rabiʻ I","Rabiʻ II","Jumada I","Jumada II","Rajab","Shaʻban","Ramadan","Shawwal","Dhuʻl-Qiʻdah","Dhuʻl-Hijjah"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},japanese:{months:{narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],short:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],long:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["Taika (645–650)","Hakuchi (650–671)","Hakuhō (672–686)","Shuchō (686–701)","Taihō (701–704)","Keiun (704–708)","Wadō (708–715)","Reiki (715–717)","Yōrō (717–724)","Jinki (724–729)","Tenpyō (729–749)","Tenpyō-kampō (749-749)","Tenpyō-shōhō (749-757)","Tenpyō-hōji (757-765)","Tenpyō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770–780)","Ten-ō (781-782)","Enryaku (782–806)","Daidō (806–810)","Kōnin (810–824)","Tenchō (824–834)","Jōwa (834–848)","Kajō (848–851)","Ninju (851–854)","Saikō (854–857)","Ten-an (857-859)","Jōgan (859–877)","Gangyō (877–885)","Ninna (885–889)","Kanpyō (889–898)","Shōtai (898–901)","Engi (901–923)","Enchō (923–931)","Jōhei (931–938)","Tengyō (938–947)","Tenryaku (947–957)","Tentoku (957–961)","Ōwa (961–964)","Kōhō (964–968)","Anna (968–970)","Tenroku (970–973)","Ten’en (973–976)","Jōgen (976–978)","Tengen (978–983)","Eikan (983–985)","Kanna (985–987)","Eien (987–989)","Eiso (989–990)","Shōryaku (990–995)","Chōtoku (995–999)","Chōhō (999–1004)","Kankō (1004–1012)","Chōwa (1012–1017)","Kannin (1017–1021)","Jian (1021–1024)","Manju (1024–1028)","Chōgen (1028–1037)","Chōryaku (1037–1040)","Chōkyū (1040–1044)","Kantoku (1044–1046)","Eishō (1046–1053)","Tengi (1053–1058)","Kōhei (1058–1065)","Jiryaku (1065–1069)","Enkyū (1069–1074)","Shōho (1074–1077)","Shōryaku (1077–1081)","Eihō (1081–1084)","Ōtoku (1084–1087)","Kanji (1087–1094)","Kahō (1094–1096)","Eichō (1096–1097)","Jōtoku (1097–1099)","Kōwa (1099–1104)","Chōji (1104–1106)","Kashō (1106–1108)","Tennin (1108–1110)","Ten-ei (1110-1113)","Eikyū (1113–1118)","Gen’ei (1118–1120)","Hōan (1120–1124)","Tenji (1124–1126)","Daiji (1126–1131)","Tenshō (1131–1132)","Chōshō (1132–1135)","Hōen (1135–1141)","Eiji (1141–1142)","Kōji (1142–1144)","Ten’yō (1144–1145)","Kyūan (1145–1151)","Ninpei (1151–1154)","Kyūju (1154–1156)","Hōgen (1156–1159)","Heiji (1159–1160)","Eiryaku (1160–1161)","Ōho (1161–1163)","Chōkan (1163–1165)","Eiman (1165–1166)","Nin’an (1166–1169)","Kaō (1169–1171)","Shōan (1171–1175)","Angen (1175–1177)","Jishō (1177–1181)","Yōwa (1181–1182)","Juei (1182–1184)","Genryaku (1184–1185)","Bunji (1185–1190)","Kenkyū (1190–1199)","Shōji (1199–1201)","Kennin (1201–1204)","Genkyū (1204–1206)","Ken’ei (1206–1207)","Jōgen (1207–1211)","Kenryaku (1211–1213)","Kenpō (1213–1219)","Jōkyū (1219–1222)","Jōō (1222–1224)","Gennin (1224–1225)","Karoku (1225–1227)","Antei (1227–1229)","Kanki (1229–1232)","Jōei (1232–1233)","Tenpuku (1233–1234)","Bunryaku (1234–1235)","Katei (1235–1238)","Ryakunin (1238–1239)","En’ō (1239–1240)","Ninji (1240–1243)","Kangen (1243–1247)","Hōji (1247–1249)","Kenchō (1249–1256)","Kōgen (1256–1257)","Shōka (1257–1259)","Shōgen (1259–1260)","Bun’ō (1260–1261)","Kōchō (1261–1264)","Bun’ei (1264–1275)","Kenji (1275–1278)","Kōan (1278–1288)","Shōō (1288–1293)","Einin (1293–1299)","Shōan (1299–1302)","Kengen (1302–1303)","Kagen (1303–1306)","Tokuji (1306–1308)","Enkyō (1308–1311)","Ōchō (1311–1312)","Shōwa (1312–1317)","Bunpō (1317–1319)","Genō (1319–1321)","Genkō (1321–1324)","Shōchū (1324–1326)","Karyaku (1326–1329)","Gentoku (1329–1331)","Genkō (1331–1334)","Kenmu (1334–1336)","Engen (1336–1340)","Kōkoku (1340–1346)","Shōhei (1346–1370)","Kentoku (1370–1372)","Bunchū (1372–1375)","Tenju (1375–1379)","Kōryaku (1379–1381)","Kōwa (1381–1384)","Genchū (1384–1392)","Meitoku (1384–1387)","Kakei (1387–1389)","Kōō (1389–1390)","Meitoku (1390–1394)","Ōei (1394–1428)","Shōchō (1428–1429)","Eikyō (1429–1441)","Kakitsu (1441–1444)","Bun’an (1444–1449)","Hōtoku (1449–1452)","Kyōtoku (1452–1455)","Kōshō (1455–1457)","Chōroku (1457–1460)","Kanshō (1460–1466)","Bunshō (1466–1467)","Ōnin (1467–1469)","Bunmei (1469–1487)","Chōkyō (1487–1489)","Entoku (1489–1492)","Meiō (1492–1501)","Bunki (1501–1504)","Eishō (1504–1521)","Taiei (1521–1528)","Kyōroku (1528–1532)","Tenbun (1532–1555)","Kōji (1555–1558)","Eiroku (1558–1570)","Genki (1570–1573)","Tenshō (1573–1592)","Bunroku (1592–1596)","Keichō (1596–1615)","Genna (1615–1624)","Kan’ei (1624–1644)","Shōho (1644–1648)","Keian (1648–1652)","Jōō (1652–1655)","Meireki (1655–1658)","Manji (1658–1661)","Kanbun (1661–1673)","Enpō (1673–1681)","Tenna (1681–1684)","Jōkyō (1684–1688)","Genroku (1688–1704)","Hōei (1704–1711)","Shōtoku (1711–1716)","Kyōhō (1716–1736)","Genbun (1736–1741)","Kanpō (1741–1744)","Enkyō (1744–1748)","Kan’en (1748–1751)","Hōreki (1751–1764)","Meiwa (1764–1772)","An’ei (1772–1781)","Tenmei (1781–1789)","Kansei (1789–1801)","Kyōwa (1801–1804)","Bunka (1804–1818)","Bunsei (1818–1830)","Tenpō (1830–1844)","Kōka (1844–1848)","Kaei (1848–1854)","Ansei (1854–1860)","Man’en (1860–1861)","Bunkyū (1861–1864)","Genji (1864–1865)","Keiō (1865–1868)","M","T","S","H"],short:["Taika (645–650)","Hakuchi (650–671)","Hakuhō (672–686)","Shuchō (686–701)","Taihō (701–704)","Keiun (704–708)","Wadō (708–715)","Reiki (715–717)","Yōrō (717–724)","Jinki (724–729)","Tenpyō (729–749)","Tenpyō-kampō (749-749)","Tenpyō-shōhō (749-757)","Tenpyō-hōji (757-765)","Tenpyō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770–780)","Ten-ō (781-782)","Enryaku (782–806)","Daidō (806–810)","Kōnin (810–824)","Tenchō (824–834)","Jōwa (834–848)","Kajō (848–851)","Ninju (851–854)","Saikō (854–857)","Ten-an (857-859)","Jōgan (859–877)","Gangyō (877–885)","Ninna (885–889)","Kanpyō (889–898)","Shōtai (898–901)","Engi (901–923)","Enchō (923–931)","Jōhei (931–938)","Tengyō (938–947)","Tenryaku (947–957)","Tentoku (957–961)","Ōwa (961–964)","Kōhō (964–968)","Anna (968–970)","Tenroku (970–973)","Ten’en (973–976)","Jōgen (976–978)","Tengen (978–983)","Eikan (983–985)","Kanna (985–987)","Eien (987–989)","Eiso (989–990)","Shōryaku (990–995)","Chōtoku (995–999)","Chōhō (999–1004)","Kankō (1004–1012)","Chōwa (1012–1017)","Kannin (1017–1021)","Jian (1021–1024)","Manju (1024–1028)","Chōgen (1028–1037)","Chōryaku (1037–1040)","Chōkyū (1040–1044)","Kantoku (1044–1046)","Eishō (1046–1053)","Tengi (1053–1058)","Kōhei (1058–1065)","Jiryaku (1065–1069)","Enkyū (1069–1074)","Shōho (1074–1077)","Shōryaku (1077–1081)","Eihō (1081–1084)","Ōtoku (1084–1087)","Kanji (1087–1094)","Kahō (1094–1096)","Eichō (1096–1097)","Jōtoku (1097–1099)","Kōwa (1099–1104)","Chōji (1104–1106)","Kashō (1106–1108)","Tennin (1108–1110)","Ten-ei (1110-1113)","Eikyū (1113–1118)","Gen’ei (1118–1120)","Hōan (1120–1124)","Tenji (1124–1126)","Daiji (1126–1131)","Tenshō (1131–1132)","Chōshō (1132–1135)","Hōen (1135–1141)","Eiji (1141–1142)","Kōji (1142–1144)","Ten’yō (1144–1145)","Kyūan (1145–1151)","Ninpei (1151–1154)","Kyūju (1154–1156)","Hōgen (1156–1159)","Heiji (1159–1160)","Eiryaku (1160–1161)","Ōho (1161–1163)","Chōkan (1163–1165)","Eiman (1165–1166)","Nin’an (1166–1169)","Kaō (1169–1171)","Shōan (1171–1175)","Angen (1175–1177)","Jishō (1177–1181)","Yōwa (1181–1182)","Juei (1182–1184)","Genryaku (1184–1185)","Bunji (1185–1190)","Kenkyū (1190–1199)","Shōji (1199–1201)","Kennin (1201–1204)","Genkyū (1204–1206)","Ken’ei (1206–1207)","Jōgen (1207–1211)","Kenryaku (1211–1213)","Kenpō (1213–1219)","Jōkyū (1219–1222)","Jōō (1222–1224)","Gennin (1224–1225)","Karoku (1225–1227)","Antei (1227–1229)","Kanki (1229–1232)","Jōei (1232–1233)","Tenpuku (1233–1234)","Bunryaku (1234–1235)","Katei (1235–1238)","Ryakunin (1238–1239)","En’ō (1239–1240)","Ninji (1240–1243)","Kangen (1243–1247)","Hōji (1247–1249)","Kenchō (1249–1256)","Kōgen (1256–1257)","Shōka (1257–1259)","Shōgen (1259–1260)","Bun’ō (1260–1261)","Kōchō (1261–1264)","Bun’ei (1264–1275)","Kenji (1275–1278)","Kōan (1278–1288)","Shōō (1288–1293)","Einin (1293–1299)","Shōan (1299–1302)","Kengen (1302–1303)","Kagen (1303–1306)","Tokuji (1306–1308)","Enkyō (1308–1311)","Ōchō (1311–1312)","Shōwa (1312–1317)","Bunpō (1317–1319)","Genō (1319–1321)","Genkō (1321–1324)","Shōchū (1324–1326)","Karyaku (1326–1329)","Gentoku (1329–1331)","Genkō (1331–1334)","Kenmu (1334–1336)","Engen (1336–1340)","Kōkoku (1340–1346)","Shōhei (1346–1370)","Kentoku (1370–1372)","Bunchū (1372–1375)","Tenju (1375–1379)","Kōryaku (1379–1381)","Kōwa (1381–1384)","Genchū (1384–1392)","Meitoku (1384–1387)","Kakei (1387–1389)","Kōō (1389–1390)","Meitoku (1390–1394)","Ōei (1394–1428)","Shōchō (1428–1429)","Eikyō (1429–1441)","Kakitsu (1441–1444)","Bun’an (1444–1449)","Hōtoku (1449–1452)","Kyōtoku (1452–1455)","Kōshō (1455–1457)","Chōroku (1457–1460)","Kanshō (1460–1466)","Bunshō (1466–1467)","Ōnin (1467–1469)","Bunmei (1469–1487)","Chōkyō (1487–1489)","Entoku (1489–1492)","Meiō (1492–1501)","Bunki (1501–1504)","Eishō (1504–1521)","Taiei (1521–1528)","Kyōroku (1528–1532)","Tenbun (1532–1555)","Kōji (1555–1558)","Eiroku (1558–1570)","Genki (1570–1573)","Tenshō (1573–1592)","Bunroku (1592–1596)","Keichō (1596–1615)","Genna (1615–1624)","Kan’ei (1624–1644)","Shōho (1644–1648)","Keian (1648–1652)","Jōō (1652–1655)","Meireki (1655–1658)","Manji (1658–1661)","Kanbun (1661–1673)","Enpō (1673–1681)","Tenna (1681–1684)","Jōkyō (1684–1688)","Genroku (1688–1704)","Hōei (1704–1711)","Shōtoku (1711–1716)","Kyōhō (1716–1736)","Genbun (1736–1741)","Kanpō (1741–1744)","Enkyō (1744–1748)","Kan’en (1748–1751)","Hōreki (1751–1764)","Meiwa (1764–1772)","An’ei (1772–1781)","Tenmei (1781–1789)","Kansei (1789–1801)","Kyōwa (1801–1804)","Bunka (1804–1818)","Bunsei (1818–1830)","Tenpō (1830–1844)","Kōka (1844–1848)","Kaei (1848–1854)","Ansei (1854–1860)","Man’en (1860–1861)","Bunkyū (1861–1864)","Genji (1864–1865)","Keiō (1865–1868)","Meiji","Taishō","Shōwa","Heisei"],long:["Taika (645–650)","Hakuchi (650–671)","Hakuhō (672–686)","Shuchō (686–701)","Taihō (701–704)","Keiun (704–708)","Wadō (708–715)","Reiki (715–717)","Yōrō (717–724)","Jinki (724–729)","Tenpyō (729–749)","Tenpyō-kampō (749-749)","Tenpyō-shōhō (749-757)","Tenpyō-hōji (757-765)","Tenpyō-jingo (765-767)","Jingo-keiun (767-770)","Hōki (770–780)","Ten-ō (781-782)","Enryaku (782–806)","Daidō (806–810)","Kōnin (810–824)","Tenchō (824–834)","Jōwa (834–848)","Kajō (848–851)","Ninju (851–854)","Saikō (854–857)","Ten-an (857-859)","Jōgan (859–877)","Gangyō (877–885)","Ninna (885–889)","Kanpyō (889–898)","Shōtai (898–901)","Engi (901–923)","Enchō (923–931)","Jōhei (931–938)","Tengyō (938–947)","Tenryaku (947–957)","Tentoku (957–961)","Ōwa (961–964)","Kōhō (964–968)","Anna (968–970)","Tenroku (970–973)","Ten’en (973–976)","Jōgen (976–978)","Tengen (978–983)","Eikan (983–985)","Kanna (985–987)","Eien (987–989)","Eiso (989–990)","Shōryaku (990–995)","Chōtoku (995–999)","Chōhō (999–1004)","Kankō (1004–1012)","Chōwa (1012–1017)","Kannin (1017–1021)","Jian (1021–1024)","Manju (1024–1028)","Chōgen (1028–1037)","Chōryaku (1037–1040)","Chōkyū (1040–1044)","Kantoku (1044–1046)","Eishō (1046–1053)","Tengi (1053–1058)","Kōhei (1058–1065)","Jiryaku (1065–1069)","Enkyū (1069–1074)","Shōho (1074–1077)","Shōryaku (1077–1081)","Eihō (1081–1084)","Ōtoku (1084–1087)","Kanji (1087–1094)","Kahō (1094–1096)","Eichō (1096–1097)","Jōtoku (1097–1099)","Kōwa (1099–1104)","Chōji (1104–1106)","Kashō (1106–1108)","Tennin (1108–1110)","Ten-ei (1110-1113)","Eikyū (1113–1118)","Gen’ei (1118–1120)","Hōan (1120–1124)","Tenji (1124–1126)","Daiji (1126–1131)","Tenshō (1131–1132)","Chōshō (1132–1135)","Hōen (1135–1141)","Eiji (1141–1142)","Kōji (1142–1144)","Ten’yō (1144–1145)","Kyūan (1145–1151)","Ninpei (1151–1154)","Kyūju (1154–1156)","Hōgen (1156–1159)","Heiji (1159–1160)","Eiryaku (1160–1161)","Ōho (1161–1163)","Chōkan (1163–1165)","Eiman (1165–1166)","Nin’an (1166–1169)","Kaō (1169–1171)","Shōan (1171–1175)","Angen (1175–1177)","Jishō (1177–1181)","Yōwa (1181–1182)","Juei (1182–1184)","Genryaku (1184–1185)","Bunji (1185–1190)","Kenkyū (1190–1199)","Shōji (1199–1201)","Kennin (1201–1204)","Genkyū (1204–1206)","Ken’ei (1206–1207)","Jōgen (1207–1211)","Kenryaku (1211–1213)","Kenpō (1213–1219)","Jōkyū (1219–1222)","Jōō (1222–1224)","Gennin (1224–1225)","Karoku (1225–1227)","Antei (1227–1229)","Kanki (1229–1232)","Jōei (1232–1233)","Tenpuku (1233–1234)","Bunryaku (1234–1235)","Katei (1235–1238)","Ryakunin (1238–1239)","En’ō (1239–1240)","Ninji (1240–1243)","Kangen (1243–1247)","Hōji (1247–1249)","Kenchō (1249–1256)","Kōgen (1256–1257)","Shōka (1257–1259)","Shōgen (1259–1260)","Bun’ō (1260–1261)","Kōchō (1261–1264)","Bun’ei (1264–1275)","Kenji (1275–1278)","Kōan (1278–1288)","Shōō (1288–1293)","Einin (1293–1299)","Shōan (1299–1302)","Kengen (1302–1303)","Kagen (1303–1306)","Tokuji (1306–1308)","Enkyō (1308–1311)","Ōchō (1311–1312)","Shōwa (1312–1317)","Bunpō (1317–1319)","Genō (1319–1321)","Genkō (1321–1324)","Shōchū (1324–1326)","Karyaku (1326–1329)","Gentoku (1329–1331)","Genkō (1331–1334)","Kenmu (1334–1336)","Engen (1336–1340)","Kōkoku (1340–1346)","Shōhei (1346–1370)","Kentoku (1370–1372)","Bunchū (1372–1375)","Tenju (1375–1379)","Kōryaku (1379–1381)","Kōwa (1381–1384)","Genchū (1384–1392)","Meitoku (1384–1387)","Kakei (1387–1389)","Kōō (1389–1390)","Meitoku (1390–1394)","Ōei (1394–1428)","Shōchō (1428–1429)","Eikyō (1429–1441)","Kakitsu (1441–1444)","Bun’an (1444–1449)","Hōtoku (1449–1452)","Kyōtoku (1452–1455)","Kōshō (1455–1457)","Chōroku (1457–1460)","Kanshō (1460–1466)","Bunshō (1466–1467)","Ōnin (1467–1469)","Bunmei (1469–1487)","Chōkyō (1487–1489)","Entoku (1489–1492)","Meiō (1492–1501)","Bunki (1501–1504)","Eishō (1504–1521)","Taiei (1521–1528)","Kyōroku (1528–1532)","Tenbun (1532–1555)","Kōji (1555–1558)","Eiroku (1558–1570)","Genki (1570–1573)","Tenshō (1573–1592)","Bunroku (1592–1596)","Keichō (1596–1615)","Genna (1615–1624)","Kan’ei (1624–1644)","Shōho (1644–1648)","Keian (1648–1652)","Jōō (1652–1655)","Meireki (1655–1658)","Manji (1658–1661)","Kanbun (1661–1673)","Enpō (1673–1681)","Tenna (1681–1684)","Jōkyō (1684–1688)","Genroku (1688–1704)","Hōei (1704–1711)","Shōtoku (1711–1716)","Kyōhō (1716–1736)","Genbun (1736–1741)","Kanpō (1741–1744)","Enkyō (1744–1748)","Kan’en (1748–1751)","Hōreki (1751–1764)","Meiwa (1764–1772)","An’ei (1772–1781)","Tenmei (1781–1789)","Kansei (1789–1801)","Kyōwa (1801–1804)","Bunka (1804–1818)","Bunsei (1818–1830)","Tenpō (1830–1844)","Kōka (1844–1848)","Kaei (1848–1854)","Ansei (1854–1860)","Man’en (1860–1861)","Bunkyū (1861–1864)","Genji (1864–1865)","Keiō (1865–1868)","Meiji","Taishō","Shōwa","Heisei"]},dayPeriods:{am:"AM",pm:"PM"}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"AM",pm:"PM"}},roc:{months:{narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],short:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],long:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["Prima di R.O.C.","Minguo"],short:["Prima di R.O.C.","Minguo"],long:["Prima di R.O.C.","Minguo"]},dayPeriods:{am:"AM",pm:"PM"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number} {currency}",negativePattern:"{minusSign}{number} {currency}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:",",group:".",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{AUD:"A$",CAD:"CA$",CNY:"CN¥",EUR:"€",GBP:"£",ILS:"₪",INR:"₹",NZD:"NZ$",THB:"฿",USD:"US$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}})},function(t,e,n){(function(t){"use strict";function e(t,e,n){t[e]||Object[i](t,e,{writable:!0,configurable:!0,value:n})}if(n(301),n(592),n(593),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var i="defineProperty";e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(e,function(){return this}())},function(t,e,n){n(302),n(351),n(352),n(353),n(354),n(356),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(369),n(371),n(373),n(375),n(378),n(379),n(380),n(384),n(386),n(388),n(391),n(392),n(393),n(394),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(404),n(405),n(406),n(408),n(409),n(410),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(430),n(431),n(435),n(436),n(437),n(438),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(458),n(459),n(465),n(466),n(468),n(469),n(470),n(474),n(475),n(476),n(477),n(478),n(480),n(481),n(482),n(483),n(486),n(488),n(489),n(490),n(492),n(494),n(496),n(497),n(498),n(500),n(501),n(502),n(503),n(510),n(513),n(514),n(516),n(517),n(520),n(521),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(543),n(544),n(545),n(546),n(547),n(548),n(550),n(551),n(552),n(553),n(554),n(555),n(556),n(557),n(559),n(560),n(562),n(563),n(564),n(565),n(568),n(569),n(570),n(571),n(572),n(573),n(574),n(575),n(577),n(578),n(579),n(580),n(581),n(582),n(583),n(584),n(585),n(586),n(587),n(590),n(591),t.exports=n(308)},function(t,e,n){"use strict";var i=n(303),r=n(304),o=n(305),a=n(307),s=n(317),u=n(321).KEY,l=n(306),c=n(322),h=n(323),f=n(318),p=n(324),d=n(325),g=n(326),m=n(328),y=n(341),v=n(344),b=n(311),_=n(331),x=n(315),w=n(316),E=n(345),S=n(348),M=n(350),T=n(310),C=n(329),I=M.f,N=T.f,P=S.f,L=i.Symbol,A=i.JSON,k=A&&A.stringify,R="prototype",O=p("_hidden"),D=p("toPrimitive"),F={}.propertyIsEnumerable,z=c("symbol-registry"),j=c("symbols"),B=c("op-symbols"),G=Object[R],U="function"==typeof L,V=i.QObject,K=!V||!V[R]||!V[R].findChild,H=o&&l(function(){return 7!=E(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=I(G,e);i&&delete G[e],N(t,e,n),i&&t!==G&&N(G,e,i)}:N,q=function(t){var e=j[t]=E(L[R]);return e._k=t,e},X=U&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},W=function(t,e,n){return t===G&&W(B,e,n),b(t),e=x(e,!0),b(n),r(j,e)?(n.enumerable?(r(t,O)&&t[O][e]&&(t[O][e]=!1),n=E(n,{enumerable:w(0,!1)})):(r(t,O)||N(t,O,w(1,{})),t[O][e]=!0),H(t,e,n)):N(t,e,n)},Y=function(t,e){b(t);for(var n,i=y(e=_(e)),r=0,o=i.length;o>r;)W(t,n=i[r++],e[n]);return t},J=function(t,e){return void 0===e?E(t):Y(E(t),e)},$=function(t){var e=F.call(this,t=x(t,!0));return!(this===G&&r(j,t)&&!r(B,t))&&(!(e||!r(this,t)||!r(j,t)||r(this,O)&&this[O][t])||e)},Z=function(t,e){if(t=_(t),e=x(e,!0),t!==G||!r(j,e)||r(B,e)){var n=I(t,e);return!n||!r(j,e)||r(t,O)&&t[O][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=P(_(t)),i=[],o=0;n.length>o;)r(j,e=n[o++])||e==O||e==u||i.push(e);return i},tt=function(t){for(var e,n=t===G,i=P(n?B:_(t)),o=[],a=0;i.length>a;)!r(j,e=i[a++])||n&&!r(G,e)||o.push(j[e]);return o};U||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===G&&e.call(B,n),r(this,O)&&r(this[O],t)&&(this[O][t]=!1),H(this,t,w(1,n))};return o&&K&&H(G,t,{configurable:!0,set:e}),q(t)},s(L[R],"toString",function(){return this._k}),M.f=Z,T.f=W,n(349).f=S.f=Q,n(343).f=$,n(342).f=tt,o&&!n(327)&&s(G,"propertyIsEnumerable",$,!0),d.f=function(t){return q(p(t))}),a(a.G+a.W+a.F*!U,{Symbol:L});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)p(et[nt++]);for(var et=C(p.store),nt=0;et.length>nt;)g(et[nt++]);a(a.S+a.F*!U,"Symbol",{for:function(t){return r(z,t+="")?z[t]:z[t]=L(t)},keyFor:function(t){if(X(t))return m(z,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){K=!0},useSimple:function(){K=!1}}),a(a.S+a.F*!U,"Object",{create:J,defineProperty:W,defineProperties:Y,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:tt}),A&&a(a.S+a.F*(!U||l(function(){var t=L();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!X(t)){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);return e=i[1],"function"==typeof e&&(n=e),!n&&v(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!X(e))return e}),i[1]=e,k.apply(A,i)}}}),L[R][D]||n(309)(L[R],D,L[R].valueOf),h(L,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){t.exports=!n(306)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(303),r=n(308),o=n(309),a=n(317),s=n(319),u="prototype",l=function(t,e,n){var c,h,f,p,d=t&l.F,g=t&l.G,m=t&l.S,y=t&l.P,v=t&l.B,b=g?i:m?i[e]||(i[e]={}):(i[e]||{})[u],_=g?r:r[e]||(r[e]={}),x=_[u]||(_[u]={});g&&(n=e);for(c in n)h=!d&&b&&void 0!==b[c],f=(h?b:n)[c],p=v&&h?s(f,i):y&&"function"==typeof f?s(Function.call,f):f,b&&a(b,c,f,t&l.U),_[c]!=f&&o(_,c,p),y&&x[c]!=f&&(x[c]=f)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(310),r=n(316);t.exports=n(305)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(311),r=n(313),o=n(315),a=Object.defineProperty;e.f=n(305)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(312);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(305)&&!n(306)(function(){return 7!=Object.defineProperty(n(314)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(312),r=n(303).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){var i=n(312);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(303),r=n(309),o=n(304),a=n(318)("src"),s="toString",u=Function[s],l=(""+u).split(s);n(308).inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,n,s){var u="function"==typeof n;u&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(u&&(o(n,a)||r(n,a,t[e]?""+t[e]:l.join(String(e)))),t===i?t[e]=n:s?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,s,function(){return"function"==typeof this&&this[a]||u.call(this)})},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(320);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(318)("meta"),r=n(312),o=n(304),a=n(310).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(306)(function(){return u(Object.preventExtensions({}))}),c=function(t){a(t,i,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[i].i},f=function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[i].w},p=function(t){return l&&d.NEED&&u(t)&&!o(t,i)&&c(t),t},d=t.exports={KEY:i,NEED:!1,fastKey:h,getWeak:f,onFreeze:p}},function(t,e,n){var i=n(303),r="__core-js_shared__",o=i[r]||(i[r]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var i=n(310).f,r=n(304),o=n(324)("toStringTag");t.exports=function(t,e,n){
t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(322)("wks"),r=n(318),o=n(303).Symbol,a="function"==typeof o,s=t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:r)("Symbol."+t))};s.store=i},function(t,e,n){e.f=n(324)},function(t,e,n){var i=n(303),r=n(308),o=n(327),a=n(325),s=n(310).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e){t.exports=!1},function(t,e,n){var i=n(329),r=n(331);t.exports=function(t,e){for(var n,o=r(t),a=i(o),s=a.length,u=0;s>u;)if(o[n=a[u++]]===e)return n}},function(t,e,n){var i=n(330),r=n(340);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){var i=n(304),r=n(331),o=n(335)(!1),a=n(339)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),u=0,l=[];for(n in s)n!=a&&i(s,n)&&l.push(n);for(;e.length>u;)i(s,n=e[u++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){var i=n(332),r=n(334);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(333);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(331),r=n(336),o=n(338);t.exports=function(t){return function(e,n,a){var s,u=i(e),l=r(u.length),c=o(a,l);if(t&&n!=n){for(;l>c;)if(s=u[c++],s!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var i=n(337),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(337),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(322)("keys"),r=n(318);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(329),r=n(342),o=n(343);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var a,s=n(t),u=o.f,l=0;s.length>l;)u.call(t,a=s[l++])&&e.push(a);return e}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(333);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(311),r=n(346),o=n(340),a=n(339)("IE_PROTO"),s=function(){},u="prototype",l=function(){var t,e=n(314)("iframe"),i=o.length,r="<",a=">";for(e.style.display="none",n(347).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+a+"document.F=Object"+r+"/script"+a),t.close(),l=t.F;i--;)delete l[u][o[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[u]=i(t),n=new s,s[u]=null,n[a]=t):n=l(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(310),r=n(311),o=n(329);t.exports=n(305)?Object.defineProperties:function(t,e){r(t);for(var n,a=o(e),s=a.length,u=0;s>u;)i.f(t,n=a[u++],e[n]);return t}},function(t,e,n){t.exports=n(303).document&&document.documentElement},function(t,e,n){var i=n(331),r=n(349).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):r(i(t))}},function(t,e,n){var i=n(330),r=n(340).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){var i=n(343),r=n(316),o=n(331),a=n(315),s=n(304),u=n(313),l=Object.getOwnPropertyDescriptor;e.f=n(305)?l:function(t,e){if(t=o(t),e=a(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(307);i(i.S,"Object",{create:n(345)})},function(t,e,n){var i=n(307);i(i.S+i.F*!n(305),"Object",{defineProperty:n(310).f})},function(t,e,n){var i=n(307);i(i.S+i.F*!n(305),"Object",{defineProperties:n(346)})},function(t,e,n){var i=n(331),r=n(350).f;n(355)("getOwnPropertyDescriptor",function(){return function(t,e){return r(i(t),e)}})},function(t,e,n){var i=n(307),r=n(308),o=n(306);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],a={};a[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){var i=n(357),r=n(358);n(355)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(334);t.exports=function(t){return Object(i(t))}},function(t,e,n){var i=n(304),r=n(357),o=n(339)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(357),r=n(329);n(355)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){n(355)("getOwnPropertyNames",function(){return n(348).f})},function(t,e,n){var i=n(312),r=n(321).onFreeze;n(355)("freeze",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(312),r=n(321).onFreeze;n(355)("seal",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(312),r=n(321).onFreeze;n(355)("preventExtensions",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(312);n(355)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(312);n(355)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(312);n(355)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){var i=n(307);i(i.S+i.F,"Object",{assign:n(368)})},function(t,e,n){"use strict";var i=n(329),r=n(342),o=n(343),a=n(357),s=n(332),u=Object.assign;t.exports=!u||n(306)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=a(t),u=arguments.length,l=1,c=r.f,h=o.f;u>l;)for(var f,p=s(arguments[l++]),d=c?i(p).concat(c(p)):i(p),g=d.length,m=0;g>m;)h.call(p,f=d[m++])&&(n[f]=p[f]);return n}:u},function(t,e,n){var i=n(307);i(i.S,"Object",{is:n(370)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var i=n(307);i(i.S,"Object",{setPrototypeOf:n(372).set})},function(t,e,n){var i=n(312),r=n(311),o=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(319)(Function.call,n(350).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){"use strict";var i=n(374),r={};r[n(324)("toStringTag")]="z",r+""!="[object z]"&&n(317)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(t,e,n){var i=n(333),r=n(324)("toStringTag"),o="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),r))?n:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var i=n(307);i(i.P,"Function",{bind:n(376)})},function(t,e,n){"use strict";var i=n(320),r=n(312),o=n(377),a=[].slice,s={},u=function(t,e,n){if(!(e in s)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";s[e]=Function("F,a","return new F("+i.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=a.call(arguments,1),s=function(){var i=n.concat(a.call(arguments));return this instanceof s?u(e,i.length,i):o(e,i,t)};return r(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(310).f,r=n(316),o=n(304),a=Function.prototype,s=/^\s*function ([^ (]*)/,u="name",l=Object.isExtensible||function(){return!0};u in a||n(305)&&i(a,u,{configurable:!0,get:function(){try{var t=this,e=(""+t).match(s)[1];return o(t,u)||!l(t)||i(t,u,r(5,e)),e}catch(t){return""}}})},function(t,e,n){"use strict";var i=n(312),r=n(358),o=n(324)("hasInstance"),a=Function.prototype;o in a||n(310).f(a,o,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=r(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var i=n(307),r=n(381);i(i.G+i.F*(parseInt!=r),{parseInt:r})},function(t,e,n){var i=n(303).parseInt,r=n(382).trim,o=n(383),a=/^[\-+]?0[xX]/;t.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(t,e){var n=r(String(t),3);return i(n,e>>>0||(a.test(n)?16:10))}:i},function(t,e,n){var i=n(307),r=n(334),o=n(306),a=n(383),s="["+a+"]",u="​",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),h=function(t,e,n){var r={},s=o(function(){return!!a[t]()||u[t]()!=u}),l=r[t]=s?e(f):a[t];n&&(r[n]=l),i(i.P+i.F*s,"String",r)},f=h.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(c,"")),t};t.exports=h},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var i=n(307),r=n(385);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},function(t,e,n){var i=n(303).parseFloat,r=n(382).trim;t.exports=1/i(n(383)+"-0")!==-(1/0)?function(t){var e=r(String(t),3),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},function(t,e,n){"use strict";var i=n(303),r=n(304),o=n(333),a=n(387),s=n(315),u=n(306),l=n(349).f,c=n(350).f,h=n(310).f,f=n(382).trim,p="Number",d=i[p],g=d,m=d.prototype,y=o(n(345)(m))==p,v="trim"in String.prototype,b=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():f(e,3);var n,i,r,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+e}for(var a,u=e.slice(2),l=0,c=u.length;l<c;l++)if(a=u.charCodeAt(l),a<48||a>r)return NaN;return parseInt(u,i)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(y?u(function(){m.valueOf.call(n)}):o(n)!=p)?a(new g(b(e)),n,d):b(e)};for(var _,x=n(305)?l(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)r(g,_=x[w])&&!r(d,_)&&h(d,_,c(g,_));d.prototype=m,m.constructor=d,n(317)(i,p,d)}},function(t,e,n){var i=n(312),r=n(372).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&i(o)&&r&&r(t,o),t}},function(t,e,n){"use strict";var i=n(307),r=n(337),o=n(389),a=n(390),s=1..toFixed,u=Math.floor,l=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",h="0",f=function(t,e){for(var n=-1,i=e;++n<6;)i+=t*l[n],l[n]=i%1e7,i=u(i/1e7)},p=function(t){for(var e=6,n=0;--e>=0;)n+=l[e],l[e]=u(n/t),n=n%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==l[t]){var n=String(l[t]);e=""===e?n:e+a.call(h,7-n.length)+n}return e},g=function(t,e,n){return 0===e?n:e%2===1?g(t,e-1,n*t):g(t*t,e/2,n)},m=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};i(i.P+i.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(306)(function(){s.call({})})),"Number",{toFixed:function(t){var e,n,i,s,u=o(this,c),l=r(t),y="",v=h;if(l<0||l>20)throw RangeError(c);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(y="-",u=-u),u>1e-21)if(e=m(u*g(2,69,1))-69,n=e<0?u*g(2,-e,1):u/g(2,e,1),n*=4503599627370496,e=52-e,e>0){for(f(0,n),i=l;i>=7;)f(1e7,0),i-=7;for(f(g(10,i,1),0),i=e-1;i>=23;)p(1<<23),i-=23;p(1<<i),f(1,1),p(2),v=d()}else f(0,n),f(1<<-e,0),v=d()+a.call(h,l);return l>0?(s=v.length,v=y+(s<=l?"0."+a.call(h,l-s)+v:v.slice(0,s-l)+"."+v.slice(s-l))):v=y+v,v}})},function(t,e,n){var i=n(333);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=i(t))throw TypeError(e);return+t}},function(t,e,n){"use strict";var i=n(337),r=n(334);t.exports=function(t){var e=String(r(this)),n="",o=i(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){"use strict";var i=n(307),r=n(306),o=n(389),a=1..toPrecision;i(i.P+i.F*(r(function(){return"1"!==a.call(1,void 0)})||!r(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var i=n(307);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var i=n(307),r=n(303).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,n){var i=n(307);i(i.S,"Number",{isInteger:n(395)})},function(t,e,n){var i=n(312),r=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&r(t)===t}},function(t,e,n){var i=n(307);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(307),r=n(395),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return r(t)&&o(t)<=9007199254740991}})},function(t,e,n){var i=n(307);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var i=n(307);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var i=n(307),r=n(385);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(t,e,n){var i=n(307),r=n(381);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(t,e,n){var i=n(307),r=n(403),o=Math.sqrt,a=Math.acosh;i(i.S+i.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:r(t-1+o(t-1)*o(t+1))}})},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){function i(t){return isFinite(t=+t)&&0!=t?t<0?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}var r=n(307),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:i})},function(t,e,n){var i=n(307),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var i=n(307),r=n(407);i(i.S,"Math",{cbrt:function(t){return r(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){var i=n(307);i(i.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var i=n(307),r=Math.exp;i(i.S,"Math",{cosh:function(t){return(r(t=+t)+r(-t))/2}})},function(t,e,n){var i=n(307),r=n(411);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var i=n(307),r=n(407),o=Math.pow,a=o(2,-52),s=o(2,-23),u=o(2,127)*(2-s),l=o(2,-126),c=function(t){return t+1/a-1/a};i(i.S,"Math",{fround:function(t){var e,n,i=Math.abs(t),o=r(t);return i<l?o*c(i/l/s)*l*s:(e=(1+s/a)*i,n=e-(e-i),n>u||n!=n?o*(1/0):o*n)}})},function(t,e,n){var i=n(307),r=Math.abs;i(i.S,"Math",{hypot:function(t,e){for(var n,i,o=0,a=0,s=arguments.length,u=0;a<s;)n=r(arguments[a++]),u<n?(i=u/n,o=o*i*i+1,u=n):n>0?(i=n/u,o+=i*i):o+=n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,e,n){var i=n(307),r=Math.imul;i(i.S+i.F*n(306)(function(){return r(4294967295,5)!=-5||2!=r.length}),"Math",{imul:function(t,e){var n=65535,i=+t,r=+e,o=n&i,a=n&r;return 0|o*a+((n&i>>>16)*a+o*(n&r>>>16)<<16>>>0)}})},function(t,e,n){var i=n(307);i(i.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,n){var i=n(307);i(i.S,"Math",{log1p:n(403)})},function(t,e,n){var i=n(307);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var i=n(307);i(i.S,"Math",{sign:n(407)})},function(t,e,n){var i=n(307),r=n(411),o=Math.exp;i(i.S+i.F*n(306)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(r(t)-r(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var i=n(307),r=n(411),o=Math.exp;i(i.S,"Math",{tanh:function(t){var e=r(t=+t),n=r(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var i=n(307);i(i.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var i=n(307),r=n(338),o=String.fromCharCode,a=String.fromCodePoint;i(i.S+i.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],i=arguments.length,a=0;i>a;){if(e=+arguments[a++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")}})},function(t,e,n){var i=n(307),r=n(331),o=n(336);i(i.S,"String",{raw:function(t){for(var e=r(t.raw),n=o(e.length),i=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<i&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){"use strict";n(382)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var i=n(426)(!0);n(427)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var i=n(337),r=n(334);t.exports=function(t){return function(e,n){var o,a,s=String(r(e)),u=i(n),l=s.length;return u<0||u>=l?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):(o-55296<<10)+(a-56320)+65536)}}},function(t,e,n){"use strict";var i=n(327),r=n(307),o=n(317),a=n(309),s=n(304),u=n(428),l=n(429),c=n(323),h=n(358),f=n(324)("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",g="keys",m="values",y=function(){return this};t.exports=function(t,e,n,v,b,_,x){l(n,e,v);var w,E,S,M=function(t){if(!p&&t in N)return N[t];switch(t){case g:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",C=b==m,I=!1,N=t.prototype,P=N[f]||N[d]||b&&N[b],L=P||M(b),A=b?C?M("entries"):L:void 0,k="Array"==e?N.entries||P:P;if(k&&(S=h(k.call(new t)),S!==Object.prototype&&(c(S,T,!0),i||s(S,f)||a(S,f,y))),C&&P&&P.name!==m&&(I=!0,L=function(){return P.call(this)}),i&&!x||!p&&!I&&N[f]||a(N,f,L),u[e]=L,u[T]=y,b)if(w={values:C?L:M(m),keys:_?L:M(g),entries:A},x)for(E in w)E in N||o(N,E,w[E]);else r(r.P+r.F*(p||I),e,w);return w}},function(t,e){t.exports={}},function(t,e,n){"use strict";var i=n(345),r=n(316),o=n(323),a={};n(309)(a,n(324)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){"use strict";var i=n(307),r=n(426)(!1);i(i.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(307),r=n(336),o=n(432),a="endsWith",s=""[a];i(i.P+i.F*n(434)(a),"String",{endsWith:function(t){var e=o(this,t,a),n=arguments.length>1?arguments[1]:void 0,i=r(e.length),u=void 0===n?i:Math.min(r(n),i),l=String(t);return s?s.call(e,l,u):e.slice(u-l.length,u)===l}})},function(t,e,n){var i=n(433),r=n(334);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},function(t,e,n){var i=n(312),r=n(333),o=n(324)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,n){var i=n(324)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){"use strict";var i=n(307),r=n(432),o="includes";i(i.P+i.F*n(434)(o),"String",{includes:function(t){return!!~r(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var i=n(307);i(i.P,"String",{repeat:n(390)})},function(t,e,n){"use strict";var i=n(307),r=n(336),o=n(432),a="startsWith",s=""[a];i(i.P+i.F*n(434)(a),"String",{startsWith:function(t){var e=o(this,t,a),n=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return s?s.call(e,i,n):e.slice(n,n+i.length)===i}})},function(t,e,n){"use strict";n(439)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){var i=n(307),r=n(306),o=n(334),a=/"/g,s=function(t,e,n,i){var r=String(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(i).replace(a,"&quot;")+'"'),s+">"+r+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),i(i.P+i.F*r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){"use strict";n(439)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(439)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(439)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(439)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(439)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(439)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(439)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(439)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(439)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(439)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(439)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(439)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var i=n(307);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var i=n(307),r=n(357),o=n(315);i(i.P+i.F*n(306)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=r(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){"use strict";var i=n(307),r=n(306),o=Date.prototype.getTime,a=function(t){return t>9?t:"0"+t};i(i.P+i.F*(r(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!r(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),i=e<0?"-":e>9999?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}})},function(t,e,n){var i=Date.prototype,r="Invalid Date",o="toString",a=i[o],s=i.getTime;new Date(NaN)+""!=r&&n(317)(i,o,function(){var t=s.call(this);return t===t?a.call(this):r})},function(t,e,n){var i=n(324)("toPrimitive"),r=Date.prototype;i in r||n(309)(r,i,n(457))},function(t,e,n){"use strict";var i=n(311),r=n(315),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return r(i(this),t!=o)}},function(t,e,n){var i=n(307);i(i.S,"Array",{isArray:n(344)})},function(t,e,n){"use strict";var i=n(319),r=n(307),o=n(357),a=n(460),s=n(461),u=n(336),l=n(462),c=n(463);r(r.S+r.F*!n(464)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,h,f=o(t),p="function"==typeof this?this:Array,d=arguments.length,g=d>1?arguments[1]:void 0,m=void 0!==g,y=0,v=c(f);if(m&&(g=i(g,d>2?arguments[2]:void 0,2)),void 0==v||p==Array&&s(v))for(e=u(f.length),n=new p(e);e>y;y++)l(n,y,m?g(f[y],y):f[y]);else for(h=v.call(f),n=new p;!(r=h.next()).done;y++)l(n,y,m?a(h,g,[r.value,y],!0):r.value);return n.length=y,n}})},function(t,e,n){var i=n(311);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var i=n(428),r=n(324)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){"use strict";var i=n(310),r=n(316);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){var i=n(374),r=n(324)("iterator"),o=n(428);t.exports=n(308).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){var i=n(324)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var i=n(307),r=n(462);i(i.S+i.F*n(306)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)r(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var i=n(307),r=n(331),o=[].join;i(i.P+i.F*(n(332)!=Object||!n(467)(o)),"Array",{join:function(t){return o.call(r(this),void 0===t?",":t)}})},function(t,e,n){var i=n(306);t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){"use strict";var i=n(307),r=n(347),o=n(333),a=n(338),s=n(336),u=[].slice;i(i.P+i.F*n(306)(function(){r&&u.call(r)}),"Array",{slice:function(t,e){var n=s(this.length),i=o(this);if(e=void 0===e?n:e,"Array"==i)return u.call(this,t,e);for(var r=a(t,n),l=a(e,n),c=s(l-r),h=Array(c),f=0;f<c;f++)h[f]="String"==i?this.charAt(r+f):this[r+f];return h}})},function(t,e,n){"use strict";var i=n(307),r=n(320),o=n(357),a=n(306),s=[].sort,u=[1,2,3];i(i.P+i.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n(467)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),r(t))}})},function(t,e,n){"use strict";var i=n(307),r=n(471)(0),o=n(467)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(t){return r(this,t,arguments[1])}})},function(t,e,n){var i=n(319),r=n(332),o=n(357),a=n(336),s=n(472);t.exports=function(t,e){var n=1==t,u=2==t,l=3==t,c=4==t,h=6==t,f=5==t||h,p=e||s;return function(e,s,d){for(var g,m,y=o(e),v=r(y),b=i(s,d,3),_=a(v.length),x=0,w=n?p(e,_):u?p(e,0):void 0;_>x;x++)if((f||x in v)&&(g=v[x],m=b(g,x,y),t))if(n)w[x]=m;else if(m)switch(t){case 3:return!0;case 5:return g;case 6:return x;case 2:w.push(g)}else if(c)return!1;return h?-1:l||c?c:w}}},function(t,e,n){var i=n(473);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){var i=n(312),r=n(344),o=n(324)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},function(t,e,n){"use strict";var i=n(307),r=n(471)(1);i(i.P+i.F*!n(467)([].map,!0),"Array",{map:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(307),r=n(471)(2);i(i.P+i.F*!n(467)([].filter,!0),"Array",{filter:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(307),r=n(471)(3);i(i.P+i.F*!n(467)([].some,!0),"Array",{some:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(307),r=n(471)(4);i(i.P+i.F*!n(467)([].every,!0),"Array",{every:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(307),r=n(479);i(i.P+i.F*!n(467)([].reduce,!0),"Array",{reduce:function(t){return r(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){var i=n(320),r=n(357),o=n(332),a=n(336);t.exports=function(t,e,n,s,u){i(e);var l=r(t),c=o(l),h=a(l.length),f=u?h-1:0,p=u?-1:1;if(n<2)for(;;){if(f in c){s=c[f],f+=p;break}if(f+=p,u?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:h>f;f+=p)f in c&&(s=e(s,c[f],f,l));return s}},function(t,e,n){"use strict";var i=n(307),r=n(479);i(i.P+i.F*!n(467)([].reduceRight,!0),"Array",{reduceRight:function(t){return r(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var i=n(307),r=n(335)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(a||!n(467)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(307),r=n(331),o=n(337),a=n(336),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(u||!n(467)(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=r(this),n=a(e.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}})},function(t,e,n){var i=n(307);i(i.P,"Array",{copyWithin:n(484)}),n(485)("copyWithin")},function(t,e,n){"use strict";var i=n(357),r=n(338),o=n(336);t.exports=[].copyWithin||function(t,e){var n=i(this),a=o(n.length),s=r(t,a),u=r(e,a),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?a:r(l,a))-u,a-s),h=1;for(u<s&&s<u+c&&(h=-1,u+=c-1,s+=c-1);c-- >0;)u in n?n[s]=n[u]:delete n[s],s+=h,u+=h;return n}},function(t,e,n){var i=n(324)("unscopables"),r=Array.prototype;void 0==r[i]&&n(309)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){var i=n(307);i(i.P,"Array",{fill:n(487)}),n(485)("fill")},function(t,e,n){"use strict";var i=n(357),r=n(338),o=n(336);t.exports=function(t){for(var e=i(this),n=o(e.length),a=arguments.length,s=r(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,l=void 0===u?n:r(u,n);l>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var i=n(307),r=n(471)(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),i(i.P+i.F*a,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(485)(o)},function(t,e,n){"use strict";var i=n(307),r=n(471)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),i(i.P+i.F*a,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(485)(o)},function(t,e,n){n(491)("Array")},function(t,e,n){"use strict";var i=n(303),r=n(310),o=n(305),a=n(324)("species");t.exports=function(t){var e=i[t];o&&e&&!e[a]&&r.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var i=n(485),r=n(493),o=n(428),a=n(331);t.exports=n(427)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(303),r=n(387),o=n(310).f,a=n(349).f,s=n(433),u=n(495),l=i.RegExp,c=l,h=l.prototype,f=/a/g,p=/a/g,d=new l(f)!==f;if(n(305)&&(!d||n(306)(function(){return p[n(324)("match")]=!1,l(f)!=f||l(p)==p||"/a/i"!=l(f,"i")}))){l=function(t,e){var n=this instanceof l,i=s(t),o=void 0===e;return!n&&i&&t.constructor===l&&o?t:r(d?new c(i&&!o?t.source:t,e):c((i=t instanceof l)?t.source:t,i&&o?u.call(t):e),n?this:h,l)};for(var g=(function(t){t in l||o(l,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})}),m=a(c),y=0;m.length>y;)g(m[y++]);h.constructor=l,l.prototype=h,n(317)(i,"RegExp",l)}n(491)("RegExp")},function(t,e,n){"use strict";var i=n(311);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";n(497);var i=n(311),r=n(495),o=n(305),a="toString",s=/./[a],u=function(t){n(317)(RegExp.prototype,a,t,!0)};n(306)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?u(function(){
var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?r.call(t):void 0)}):s.name!=a&&u(function(){return s.call(this)})},function(t,e,n){n(305)&&"g"!=/./g.flags&&n(310).f(RegExp.prototype,"flags",{configurable:!0,get:n(495)})},function(t,e,n){n(499)("match",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){"use strict";var i=n(309),r=n(317),o=n(306),a=n(334),s=n(324);t.exports=function(t,e,n){var u=s(t),l=n(a,u,""[t]),c=l[0],h=l[1];o(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(r(String.prototype,t,c),i(RegExp.prototype,u,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}))}},function(t,e,n){n(499)("replace",2,function(t,e,n){return[function(i,r){"use strict";var o=t(this),a=void 0==i?void 0:i[e];return void 0!==a?a.call(i,o,r):n.call(String(o),i,r)},n]})},function(t,e,n){n(499)("search",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){n(499)("split",2,function(t,e,i){"use strict";var r=n(433),o=i,a=[].push,s="split",u="length",l="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[u]||2!="ab"[s](/(?:ab)*/)[u]||4!="."[s](/(.?)(.?)/)[u]||"."[s](/()()/)[u]>1||""[s](/.?/)[u]){var c=void 0===/()??/.exec("")[1];i=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!r(t))return o.call(n,t,e);var i,s,h,f,p,d=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,y=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,g+"g");for(c||(i=new RegExp("^"+v.source+"$(?!\\s)",g));(s=v.exec(n))&&(h=s.index+s[0][u],!(h>m&&(d.push(n.slice(m,s.index)),!c&&s[u]>1&&s[0].replace(i,function(){for(p=1;p<arguments[u]-2;p++)void 0===arguments[p]&&(s[p]=void 0)}),s[u]>1&&s.index<n[u]&&a.apply(d,s.slice(1)),f=s[0][u],m=h,d[u]>=y)));)v[l]===s.index&&v[l]++;return m===n[u]?!f&&v.test("")||d.push(""):d.push(n.slice(m)),d[u]>y?d.slice(0,y):d}}else"0"[s](void 0,0)[u]&&(i=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(n,r){var o=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,o,r):i.call(String(o),n,r)},i]})},function(t,e,n){"use strict";var i,r,o,a=n(327),s=n(303),u=n(319),l=n(374),c=n(307),h=n(312),f=n(320),p=n(504),d=n(505),g=n(506),m=n(507).set,y=n(508)(),v="Promise",b=s.TypeError,_=s.process,x=s[v],_=s.process,w="process"==l(_),E=function(){},S=!!function(){try{var t=x.resolve(1),e=(t.constructor={})[n(324)("species")]=function(t){t(E,E)};return(w||"function"==typeof PromiseRejectionEvent)&&t.then(E)instanceof e}catch(t){}}(),M=function(t,e){return t===e||t===x&&e===o},T=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},C=function(t){return M(x,t)?new I(t):new r(t)},I=r=function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw b("Bad Promise constructor");e=t,n=i}),this.resolve=f(e),this.reject=f(n)},N=function(t){try{t()}catch(t){return{error:t}}},P=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var i=t._v,r=1==t._s,o=0,a=function(e){var n,o,a=r?e.ok:e.fail,s=e.resolve,u=e.reject,l=e.domain;try{a?(r||(2==t._h&&k(t),t._h=1),a===!0?n=i:(l&&l.enter(),n=a(i),l&&l.exit()),n===e.promise?u(b("Promise-chain cycle")):(o=T(n))?o.call(n,s,u):s(n)):u(i)}catch(t){u(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&L(t)})}},L=function(t){m.call(s,function(){var e,n,i,r=t._v;if(A(t)&&(e=N(function(){w?_.emit("unhandledRejection",r,t):(n=s.onunhandledrejection)?n({promise:t,reason:r}):(i=s.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=w||A(t)?2:1),t._a=void 0,e)throw e.error})},A=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,i=0;n.length>i;)if(e=n[i++],e.fail||!A(e.promise))return!1;return!0},k=function(t){m.call(s,function(){var e;w?_.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},R=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),P(e,!0))},O=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw b("Promise can't be resolved itself");(e=T(t))?y(function(){var i={_w:n,_d:!1};try{e.call(t,u(O,i,1),u(R,i,1))}catch(t){R.call(i,t)}}):(n._v=t,n._s=1,P(n,!1))}catch(t){R.call({_w:n,_d:!1},t)}}};S||(x=function(t){p(this,x,v,"_h"),f(t),i.call(this);try{t(u(O,this,1),u(R,this,1))}catch(t){R.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(509)(x.prototype,{then:function(t,e){var n=C(g(this,x));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=w?_.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),I=function(){var t=new i;this.promise=t,this.resolve=u(O,t,1),this.reject=u(R,t,1)}),c(c.G+c.W+c.F*!S,{Promise:x}),n(323)(x,v),n(491)(v),o=n(308)[v],c(c.S+c.F*!S,v,{reject:function(t){var e=C(this),n=e.reject;return n(t),e.promise}}),c(c.S+c.F*(a||!S),v,{resolve:function(t){if(t instanceof x&&M(t.constructor,this))return t;var e=C(this),n=e.resolve;return n(t),e.promise}}),c(c.S+c.F*!(S&&n(464)(function(t){x.all(t).catch(E)})),v,{all:function(t){var e=this,n=C(e),i=n.resolve,r=n.reject,o=N(function(){var n=[],o=0,a=1;d(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||i(n))},r)}),--a||i(n)});return o&&r(o.error),n.promise},race:function(t){var e=this,n=C(e),i=n.reject,r=N(function(){d(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r&&i(r.error),n.promise}})},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(319),r=n(460),o=n(461),a=n(311),s=n(336),u=n(463),l={},c={},e=t.exports=function(t,e,n,h,f){var p,d,g,m,y=f?function(){return t}:u(t),v=i(n,h,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(p=s(t.length);p>b;b++)if(m=e?v(a(d=t[b])[0],d[1]):v(t[b]),m===l||m===c)return m}else for(g=y.call(t);!(d=g.next()).done;)if(m=r(g,v,d.value,e),m===l||m===c)return m};e.BREAK=l,e.RETURN=c},function(t,e,n){var i=n(311),r=n(320),o=n(324)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||void 0==(n=i(a)[o])?e:r(n)}},function(t,e,n){var i,r,o,a=n(319),s=n(377),u=n(347),l=n(314),c=n(303),h=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,g=0,m={},y="onreadystatechange",v=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},b=function(t){v.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++g]=function(){s("function"==typeof t?t:Function(t),e)},i(g),g},p=function(t){delete m[t]},"process"==n(333)(h)?i=function(t){h.nextTick(a(v,t,1))}:d?(r=new d,o=r.port2,r.port1.onmessage=b,i=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",b,!1)):i=y in l("script")?function(t){u.appendChild(l("script"))[y]=function(){u.removeChild(this),v.call(t)}}:function(t){setTimeout(a(v,t,1),0)}),t.exports={set:f,clear:p}},function(t,e,n){var i=n(303),r=n(507).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,u="process"==n(333)(a);t.exports=function(){var t,e,n,l=function(){var i,r;for(u&&(i=a.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(u)n=function(){a.nextTick(l)};else if(o){var c=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),n=function(){h.data=c=!c}}else if(s&&s.resolve){var f=s.resolve();n=function(){f.then(l)}}else n=function(){r.call(i,l)};return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){var i=n(317);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e,n){"use strict";var i=n(511);t.exports=n(512)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(this,t);return e&&e.v},set:function(t,e){return i.def(this,0===t?0:t,e)}},i,!0)},function(t,e,n){"use strict";var i=n(310).f,r=n(345),o=n(509),a=n(319),s=n(504),u=n(334),l=n(505),c=n(427),h=n(493),f=n(491),p=n(305),d=n(321).fastKey,g=p?"_s":"size",m=function(t,e){var n,i=d(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var h=t(function(t,i){s(t,h,e,"_i"),t._i=r(null),t._f=void 0,t._l=void 0,t[g]=0,void 0!=i&&l(i,n,t[c],t)});return o(h.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var e=this,n=m(e,t);if(n){var i=n.n,r=n.p;delete e._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),e._f==n&&(e._f=i),e._l==n&&(e._l=r),e[g]--}return!!n},forEach:function(t){s(this,h,"forEach");for(var e,n=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!m(this,t)}}),p&&i(h.prototype,"size",{get:function(){return u(this[g])}}),h},def:function(t,e,n){var i,r,o=m(t,e);return o?o.v=n:(t._l=o={i:r=d(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[g]++,"F"!==r&&(t._i[r]=o)),t},getEntry:m,setStrong:function(t,e,n){c(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?h(0,n.k):"values"==e?h(0,n.v):h(0,[n.k,n.v]):(t._t=void 0,h(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var i=n(303),r=n(307),o=n(317),a=n(509),s=n(321),u=n(505),l=n(504),c=n(312),h=n(306),f=n(464),p=n(323),d=n(387);t.exports=function(t,e,n,g,m,y){var v=i[t],b=v,_=m?"set":"add",x=b&&b.prototype,w={},E=function(t){var e=x[t];o(x,t,"delete"==t?function(t){return!(y&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(y||x.forEach&&!h(function(){(new b).entries().next()}))){var S=new b,M=S[_](y?{}:-0,1)!=S,T=h(function(){S.has(1)}),C=f(function(t){new b(t)}),I=!y&&h(function(){for(var t=new b,e=5;e--;)t[_](e,e);return!t.has(-0)});C||(b=e(function(e,n){l(e,b,t);var i=d(new v,e,b);return void 0!=n&&u(n,m,i[_],i),i}),b.prototype=x,x.constructor=b),(T||I)&&(E("delete"),E("has"),m&&E("get")),(I||M)&&E(_),y&&x.clear&&delete x.clear}else b=g.getConstructor(e,t,m,_),a(b.prototype,n),s.NEED=!0;return p(b,t),w[t]=b,r(r.G+r.W+r.F*(b!=v),w),y||g.setStrong(b,t,m),b}},function(t,e,n){"use strict";var i=n(511);t.exports=n(512)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(this,t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";var i,r=n(471)(0),o=n(317),a=n(321),s=n(368),u=n(515),l=n(312),c=a.getWeak,h=Object.isExtensible,f=u.ufstore,p={},d=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(l(t)){var e=c(t);return e===!0?f(this).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(this,t,e)}},m=t.exports=n(512)("WeakMap",d,g,u,!0,!0);7!=(new m).set((Object.freeze||Object)(p),7).get(p)&&(i=u.getConstructor(d),s(i.prototype,g),a.NEED=!0,r(["delete","has","get","set"],function(t){var e=m.prototype,n=e[t];o(e,t,function(e,r){if(l(e)&&!h(e)){this._f||(this._f=new i);var o=this._f[t](e,r);return"set"==t?this:o}return n.call(this,e,r)})}))},function(t,e,n){"use strict";var i=n(509),r=n(321).getWeak,o=n(311),a=n(312),s=n(504),u=n(505),l=n(471),c=n(304),h=l(5),f=l(6),p=0,d=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},m=function(t,e){return h(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=f(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var l=t(function(t,i){s(t,l,e,"_i"),t._i=p++,t._l=void 0,void 0!=i&&u(i,n,t[o],t)});return i(l.prototype,{delete:function(t){if(!a(t))return!1;var e=r(t);return e===!0?d(this).delete(t):e&&c(e,this._i)&&delete e[this._i]},has:function(t){if(!a(t))return!1;var e=r(t);return e===!0?d(this).has(t):e&&c(e,this._i)}}),l},def:function(t,e,n){var i=r(o(e),!0);return i===!0?d(t).set(e,n):i[t._i]=n,t},ufstore:d}},function(t,e,n){"use strict";var i=n(515);n(512)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(this,t,!0)}},i,!1,!0)},function(t,e,n){"use strict";var i=n(307),r=n(518),o=n(519),a=n(311),s=n(338),u=n(336),l=n(312),c=n(303).ArrayBuffer,h=n(506),f=o.ArrayBuffer,p=o.DataView,d=r.ABV&&c.isView,g=f.prototype.slice,m=r.VIEW,y="ArrayBuffer";i(i.G+i.W+i.F*(c!==f),{ArrayBuffer:f}),i(i.S+i.F*!r.CONSTR,y,{isView:function(t){return d&&d(t)||l(t)&&m in t}}),i(i.P+i.U+i.F*n(306)(function(){return!new f(2).slice(1,void 0).byteLength}),y,{slice:function(t,e){if(void 0!==g&&void 0===e)return g.call(a(this),t);for(var n=a(this).byteLength,i=s(t,n),r=s(void 0===e?n:e,n),o=new(h(this,f))(u(r-i)),l=new p(this),c=new p(o),d=0;i<r;)c.setUint8(d++,l.getUint8(i++));return o}}),n(491)(y)},function(t,e,n){for(var i,r=n(303),o=n(309),a=n(318),s=a("typed_array"),u=a("view"),l=!(!r.ArrayBuffer||!r.DataView),c=l,h=0,f=9,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<f;)(i=r[p[h++]])?(o(i.prototype,s,!0),o(i.prototype,u,!0)):c=!1;t.exports={ABV:l,CONSTR:c,TYPED:s,VIEW:u}},function(t,e,n){"use strict";var i=n(303),r=n(305),o=n(327),a=n(518),s=n(309),u=n(509),l=n(306),c=n(504),h=n(337),f=n(336),p=n(349).f,d=n(310).f,g=n(487),m=n(323),y="ArrayBuffer",v="DataView",b="prototype",_="Wrong length!",x="Wrong index!",w=i[y],E=i[v],S=i.Math,M=i.RangeError,T=i.Infinity,C=w,I=S.abs,N=S.pow,P=S.floor,L=S.log,A=S.LN2,k="buffer",R="byteLength",O="byteOffset",D=r?"_b":k,F=r?"_l":R,z=r?"_o":O,j=function(t,e,n){var i,r,o,a=Array(n),s=8*n-e-1,u=(1<<s)-1,l=u>>1,c=23===e?N(2,-24)-N(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for(t=I(t),t!=t||t===T?(r=t!=t?1:0,i=u):(i=P(L(t)/A),t*(o=N(2,-i))<1&&(i--,o*=2),t+=i+l>=1?c/o:c*N(2,1-l),t*o>=2&&(i++,o/=2),i+l>=u?(r=0,i=u):i+l>=1?(r=(t*o-1)*N(2,e),i+=l):(r=t*N(2,l-1)*N(2,e),i=0));e>=8;a[h++]=255&r,r/=256,e-=8);for(i=i<<e|r,s+=e;s>0;a[h++]=255&i,i/=256,s-=8);return a[--h]|=128*f,a},B=function(t,e,n){var i,r=8*n-e-1,o=(1<<r)-1,a=o>>1,s=r-7,u=n-1,l=t[u--],c=127&l;for(l>>=7;s>0;c=256*c+t[u],u--,s-=8);for(i=c&(1<<-s)-1,c>>=-s,s+=e;s>0;i=256*i+t[u],u--,s-=8);if(0===c)c=1-a;else{if(c===o)return i?NaN:l?-T:T;i+=N(2,e),c-=a}return(l?-1:1)*i*N(2,c-e)},G=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},U=function(t){return[255&t]},V=function(t){return[255&t,t>>8&255]},K=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},H=function(t){return j(t,52,8)},q=function(t){return j(t,23,4)},X=function(t,e,n){d(t[b],e,{get:function(){return this[n]}})},W=function(t,e,n,i){var r=+n,o=h(r);if(r!=o||o<0||o+e>t[F])throw M(x);var a=t[D]._b,s=o+t[z],u=a.slice(s,s+e);return i?u:u.reverse()},Y=function(t,e,n,i,r,o){var a=+n,s=h(a);if(a!=s||s<0||s+e>t[F])throw M(x);for(var u=t[D]._b,l=s+t[z],c=i(+r),f=0;f<e;f++)u[l+f]=c[o?f:e-f-1]},J=function(t,e){c(t,w,y);var n=+e,i=f(n);if(n!=i)throw M(_);return i};if(a.ABV){if(!l(function(){new w})||!l(function(){new w(.5)})){w=function(t){return new C(J(this,t))};for(var $,Z=w[b]=C[b],Q=p(C),tt=0;Q.length>tt;)($=Q[tt++])in w||s(w,$,C[$]);o||(Z.constructor=w)}var et=new E(new w(2)),nt=E[b].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||u(E[b],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else w=function(t){var e=J(this,t);this._b=g.call(Array(e),0),this[F]=e},E=function(t,e,n){c(this,E,v),c(t,w,v);var i=t[F],r=h(e);if(r<0||r>i)throw M("Wrong offset!");if(n=void 0===n?i-r:f(n),r+n>i)throw M(_);this[D]=t,this[z]=r,this[F]=n},r&&(X(w,R,"_l"),X(E,k,"_b"),X(E,R,"_l"),X(E,O,"_o")),u(E[b],{getInt8:function(t){return W(this,1,t)[0]<<24>>24},getUint8:function(t){return W(this,1,t)[0]},getInt16:function(t){var e=W(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=W(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return G(W(this,4,t,arguments[1]))},getUint32:function(t){return G(W(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return B(W(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return B(W(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){Y(this,1,t,U,e)},setUint8:function(t,e){Y(this,1,t,U,e)},setInt16:function(t,e){Y(this,2,t,V,e,arguments[2])},setUint16:function(t,e){Y(this,2,t,V,e,arguments[2])},setInt32:function(t,e){Y(this,4,t,K,e,arguments[2])},setUint32:function(t,e){Y(this,4,t,K,e,arguments[2])},setFloat32:function(t,e){Y(this,4,t,q,e,arguments[2])},setFloat64:function(t,e){Y(this,8,t,H,e,arguments[2])}});m(w,y),m(E,v),s(E[b],a.VIEW,!0),e[y]=w,e[v]=E},function(t,e,n){var i=n(307);i(i.G+i.W+i.F*!n(518).ABV,{DataView:n(519).DataView})},function(t,e,n){n(522)("Int8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){"use strict";if(n(305)){var i=n(327),r=n(303),o=n(306),a=n(307),s=n(518),u=n(519),l=n(319),c=n(504),h=n(316),f=n(309),p=n(509),d=n(337),g=n(336),m=n(338),y=n(315),v=n(304),b=n(370),_=n(374),x=n(312),w=n(357),E=n(461),S=n(345),M=n(358),T=n(349).f,C=n(463),I=n(318),N=n(324),P=n(471),L=n(335),A=n(506),k=n(492),R=n(428),O=n(464),D=n(491),F=n(487),z=n(484),j=n(310),B=n(350),G=j.f,U=B.f,V=r.RangeError,K=r.TypeError,H=r.Uint8Array,q="ArrayBuffer",X="Shared"+q,W="BYTES_PER_ELEMENT",Y="prototype",J=Array[Y],$=u.ArrayBuffer,Z=u.DataView,Q=P(0),tt=P(2),et=P(3),nt=P(4),it=P(5),rt=P(6),ot=L(!0),at=L(!1),st=k.values,ut=k.keys,lt=k.entries,ct=J.lastIndexOf,ht=J.reduce,ft=J.reduceRight,pt=J.join,dt=J.sort,gt=J.slice,mt=J.toString,yt=J.toLocaleString,vt=N("iterator"),bt=N("toStringTag"),_t=I("typed_constructor"),xt=I("def_constructor"),wt=s.CONSTR,Et=s.TYPED,St=s.VIEW,Mt="Wrong length!",Tt=P(1,function(t,e){return At(A(t,t[xt]),e)}),Ct=o(function(){return 1===new H(new Uint16Array([1]).buffer)[0]}),It=!!H&&!!H[Y].set&&o(function(){new H(1).set({})}),Nt=function(t,e){if(void 0===t)throw K(Mt);var n=+t,i=g(t);if(e&&!b(n,i))throw V(Mt);return i},Pt=function(t,e){var n=d(t);if(n<0||n%e)throw V("Wrong offset!");return n},Lt=function(t){if(x(t)&&Et in t)return t;throw K(t+" is not a typed array!")},At=function(t,e){if(!(x(t)&&_t in t))throw K("It is not a typed array constructor!");return new t(e)},kt=function(t,e){return Rt(A(t,t[xt]),e)},Rt=function(t,e){for(var n=0,i=e.length,r=At(t,i);i>n;)r[n]=e[n++];return r},Ot=function(t,e,n){G(t,e,{get:function(){return this._d[n]}})},Dt=function(t){var e,n,i,r,o,a,s=w(t),u=arguments.length,c=u>1?arguments[1]:void 0,h=void 0!==c,f=C(s);if(void 0!=f&&!E(f)){for(a=f.call(s),i=[],e=0;!(o=a.next()).done;e++)i.push(o.value);s=i}for(h&&u>2&&(c=l(c,arguments[2],2)),e=0,n=g(s.length),r=At(this,n);n>e;e++)r[e]=h?c(s[e],e):s[e];return r},Ft=function(){for(var t=0,e=arguments.length,n=At(this,e);e>t;)n[t]=arguments[t++];return n},zt=!!H&&o(function(){yt.call(new H(1))}),jt=function(){return yt.apply(zt?gt.call(Lt(this)):Lt(this),arguments)},Bt={copyWithin:function(t,e){return z.call(Lt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Lt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return F.apply(Lt(this),arguments)},filter:function(t){return kt(this,tt(Lt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return it(Lt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return rt(Lt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Lt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return at(Lt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Lt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return pt.apply(Lt(this),arguments)},lastIndexOf:function(t){return ct.apply(Lt(this),arguments)},map:function(t){return Tt(Lt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return ht.apply(Lt(this),arguments)},reduceRight:function(t){return ft.apply(Lt(this),arguments)},reverse:function(){for(var t,e=this,n=Lt(e).length,i=Math.floor(n/2),r=0;r<i;)t=e[r],e[r++]=e[--n],e[n]=t;return e},some:function(t){return et(Lt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return dt.call(Lt(this),t)},subarray:function(t,e){var n=Lt(this),i=n.length,r=m(t,i);return new(A(n,n[xt]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,g((void 0===e?i:m(e,i))-r))}},Gt=function(t,e){return kt(this,gt.call(Lt(this),t,e))},Ut=function(t){Lt(this);var e=Pt(arguments[1],1),n=this.length,i=w(t),r=g(i.length),o=0;if(r+e>n)throw V(Mt);for(;o<r;)this[e+o]=i[o++]},Vt={entries:function(){return lt.call(Lt(this))},keys:function(){return ut.call(Lt(this))},values:function(){return st.call(Lt(this))}},Kt=function(t,e){return x(t)&&t[Et]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ht=function(t,e){return Kt(t,e=y(e,!0))?h(2,t[e]):U(t,e)},qt=function(t,e,n){return!(Kt(t,e=y(e,!0))&&x(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?G(t,e,n):(t[e]=n.value,t)};wt||(B.f=Ht,j.f=qt),a(a.S+a.F*!wt,"Object",{getOwnPropertyDescriptor:Ht,defineProperty:qt}),o(function(){mt.call({})})&&(mt=yt=function(){return pt.call(this)});var Xt=p({},Bt);p(Xt,Vt),f(Xt,vt,Vt.values),p(Xt,{slice:Gt,set:Ut,constructor:function(){},toString:mt,toLocaleString:jt}),Ot(Xt,"buffer","b"),Ot(Xt,"byteOffset","o"),Ot(Xt,"byteLength","l"),Ot(Xt,"length","e"),G(Xt,bt,{get:function(){return this[Et]}}),t.exports=function(t,e,n,u){u=!!u;var l=t+(u?"Clamped":"")+"Array",h="Uint8Array"!=l,p="get"+t,d="set"+t,m=r[l],y=m||{},v=m&&M(m),b=!m||!s.ABV,w={},E=m&&m[Y],C=function(t,n){var i=t._d;return i.v[p](n*e+i.o,Ct)},I=function(t,n,i){var r=t._d;u&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[d](n*e+r.o,i,Ct)},N=function(t,e){G(t,e,{get:function(){return C(this,e)},set:function(t){return I(this,e,t)},enumerable:!0})};b?(m=n(function(t,n,i,r){c(t,m,l,"_d");var o,a,s,u,h=0,p=0;if(x(n)){if(!(n instanceof $||(u=_(n))==q||u==X))return Et in n?Rt(m,n):Dt.call(m,n);o=n,p=Pt(i,e);var d=n.byteLength;if(void 0===r){if(d%e)throw V(Mt);if(a=d-p,a<0)throw V(Mt)}else if(a=g(r)*e,a+p>d)throw V(Mt);s=a/e}else s=Nt(n,!0),a=s*e,o=new $(a);for(f(t,"_d",{b:o,o:p,l:a,e:s,v:new Z(o)});h<s;)N(t,h++)}),E=m[Y]=S(Xt),f(E,"constructor",m)):O(function(t){new m(null),new m(t)},!0)||(m=n(function(t,n,i,r){c(t,m,l);var o;return x(n)?n instanceof $||(o=_(n))==q||o==X?void 0!==r?new y(n,Pt(i,e),r):void 0!==i?new y(n,Pt(i,e)):new y(n):Et in n?Rt(m,n):Dt.call(m,n):new y(Nt(n,h))}),Q(v!==Function.prototype?T(y).concat(T(v)):T(y),function(t){t in m||f(m,t,y[t])}),m[Y]=E,i||(E.constructor=m));var P=E[vt],L=!!P&&("values"==P.name||void 0==P.name),A=Vt.values;f(m,_t,!0),f(E,Et,l),f(E,St,!0),f(E,xt,m),(u?new m(1)[bt]==l:bt in E)||G(E,bt,{get:function(){return l}}),w[l]=m,a(a.G+a.W+a.F*(m!=y),w),a(a.S,l,{BYTES_PER_ELEMENT:e,from:Dt,of:Ft}),W in E||f(E,W,e),a(a.P,l,Bt),D(l),a(a.P+a.F*It,l,{set:Ut}),a(a.P+a.F*!L,l,Vt),a(a.P+a.F*(E.toString!=mt),l,{toString:mt}),a(a.P+a.F*o(function(){new m(1).slice()}),l,{slice:Gt}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new m([1,2]).toLocaleString()})||!o(function(){E.toLocaleString.call([1,2])})),l,{toLocaleString:jt}),R[l]=L?P:A,i||L||f(E,vt,A)}}else t.exports=function(){}},function(t,e,n){n(522)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(522)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}},!0)},function(t,e,n){n(522)("Int16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(522)("Uint16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(522)("Int32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(522)("Uint32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(522)("Float32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(522)("Float64",8,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){var i=n(307),r=n(320),o=n(311),a=(n(303).Reflect||{}).apply,s=Function.apply;i(i.S+i.F*!n(306)(function(){a(function(){})}),"Reflect",{apply:function(t,e,n){var i=r(t),u=o(n);return a?a(i,e,u):s.call(i,e,u)}})},function(t,e,n){var i=n(307),r=n(345),o=n(320),a=n(311),s=n(312),u=n(306),l=n(376),c=(n(303).Reflect||{}).construct,h=u(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),f=!u(function(){c(function(){})});i(i.S+i.F*(h||f),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!h)return c(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(l.apply(t,i))}var u=n.prototype,p=r(s(u)?u:Object.prototype),d=Function.apply.call(t,p,e);return s(d)?d:p}})},function(t,e,n){var i=n(310),r=n(307),o=n(311),a=n(315);r(r.S+r.F*n(306)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return i.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var i=n(307),r=n(350).f,o=n(311);i(i.S,"Reflect",{deleteProperty:function(t,e){var n=r(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var i=n(307),r=n(311),o=function(t){this._t=r(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(429)(o,"Object",function(){var t,e=this,n=e._k;do if(e._i>=n.length)return{value:void 0,done:!0};while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),i(i.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){function i(t,e){var n,s,c=arguments.length<3?t:arguments[2];return l(t)===c?t[e]:(n=r.f(t,e))?a(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:u(s=o(t))?i(s,e,c):void 0}var r=n(350),o=n(358),a=n(304),s=n(307),u=n(312),l=n(311);s(s.S,"Reflect",{get:i})},function(t,e,n){var i=n(350),r=n(307),o=n(311);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return i.f(o(t),e)}})},function(t,e,n){var i=n(307),r=n(358),o=n(311);i(i.S,"Reflect",{getPrototypeOf:function(t){return r(o(t))}})},function(t,e,n){var i=n(307);i(i.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var i=n(307),r=n(311),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(t){return r(t),!o||o(t)}})},function(t,e,n){var i=n(307);i(i.S,"Reflect",{ownKeys:n(542)})},function(t,e,n){var i=n(349),r=n(342),o=n(311),a=n(303).Reflect;t.exports=a&&a.ownKeys||function(t){var e=i.f(o(t)),n=r.f;return n?e.concat(n(t)):e}},function(t,e,n){var i=n(307),r=n(311),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(t){r(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){function i(t,e,n){var u,f,p=arguments.length<4?t:arguments[3],d=o.f(c(t),e);if(!d){if(h(f=a(t)))return i(f,e,n,p);d=l(0)}return s(d,"value")?!(d.writable===!1||!h(p))&&(u=o.f(p,e)||l(0),u.value=n,r.f(p,e,u),!0):void 0!==d.set&&(d.set.call(p,n),!0)}var r=n(310),o=n(350),a=n(358),s=n(304),u=n(307),l=n(316),c=n(311),h=n(312);u(u.S,"Reflect",{set:i})},function(t,e,n){var i=n(307),r=n(372);r&&i(i.S,"Reflect",{setPrototypeOf:function(t,e){r.check(t,e);try{return r.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){"use strict";var i=n(307),r=n(335)(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(485)("includes")},function(t,e,n){"use strict";var i=n(307),r=n(426)(!0);i(i.P,"String",{at:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(307),r=n(549);i(i.P,"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){var i=n(336),r=n(390),o=n(334);t.exports=function(t,e,n,a){var s=String(o(t)),u=s.length,l=void 0===n?" ":String(n),c=i(e);if(c<=u||""==l)return s;var h=c-u,f=r.call(l,Math.ceil(h/l.length));return f.length>h&&(f=f.slice(0,h)),a?f+s:s+f}},function(t,e,n){"use strict";var i=n(307),r=n(549);i(i.P,"String",{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(382)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(382)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";var i=n(307),r=n(334),o=n(336),a=n(433),s=n(495),u=RegExp.prototype,l=function(t,e){this._r=t,this._s=e};n(429)(l,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),i(i.P,"String",{matchAll:function(t){if(r(this),!a(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in u?String(t.flags):s.call(t),i=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return i.lastIndex=o(t.lastIndex),new l(i,e)}})},function(t,e,n){n(326)("asyncIterator")},function(t,e,n){n(326)("observable")},function(t,e,n){var i=n(307),r=n(542),o=n(331),a=n(350),s=n(462);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n=o(t),i=a.f,u=r(n),l={},c=0;u.length>c;)s(l,e=u[c++],i(n,e));return l}})},function(t,e,n){var i=n(307),r=n(558)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){var i=n(329),r=n(331),o=n(343).f;t.exports=function(t){return function(e){for(var n,a=r(e),s=i(a),u=s.length,l=0,c=[];u>l;)o.call(a,n=s[l++])&&c.push(t?[n,a[n]]:a[n]);return c}}},function(t,e,n){var i=n(307),r=n(558)(!0);i(i.S,"Object",{entries:function(t){return r(t)}})},function(t,e,n){"use strict";var i=n(307),r=n(357),o=n(320),a=n(310);n(305)&&i(i.P+n(561),"Object",{__defineGetter__:function(t,e){a.f(r(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){t.exports=n(327)||!n(306)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(303)[t]})},function(t,e,n){"use strict";var i=n(307),r=n(357),o=n(320),a=n(310);n(305)&&i(i.P+n(561),"Object",{__defineSetter__:function(t,e){a.f(r(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var i=n(307),r=n(357),o=n(315),a=n(358),s=n(350).f;n(305)&&i(i.P+n(561),"Object",{__lookupGetter__:function(t){var e,n=r(this),i=o(t,!0);do if(e=s(n,i))return e.get;while(n=a(n))}})},function(t,e,n){"use strict";var i=n(307),r=n(357),o=n(315),a=n(358),s=n(350).f;n(305)&&i(i.P+n(561),"Object",{__lookupSetter__:function(t){var e,n=r(this),i=o(t,!0);do if(e=s(n,i))return e.set;while(n=a(n))}})},function(t,e,n){var i=n(307);i(i.P+i.R,"Map",{toJSON:n(566)("Map")})},function(t,e,n){var i=n(374),r=n(567);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,n){var i=n(505);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){var i=n(307);i(i.P+i.R,"Set",{toJSON:n(566)("Set")})},function(t,e,n){var i=n(307);i(i.S,"System",{global:n(303)})},function(t,e,n){var i=n(307),r=n(333);i(i.S,"Error",{isError:function(t){return"Error"===r(t)}})},function(t,e,n){var i=n(307);i(i.S,"Math",{iaddh:function(t,e,n,i){var r=t>>>0,o=e>>>0,a=n>>>0;return o+(i>>>0)+((r&a|(r|a)&~(r+a>>>0))>>>31)|0}})},function(t,e,n){var i=n(307);i(i.S,"Math",{isubh:function(t,e,n,i){var r=t>>>0,o=e>>>0,a=n>>>0;
return o-(i>>>0)-((~r&a|~(r^a)&r-a>>>0)>>>31)|0}})},function(t,e,n){var i=n(307);i(i.S,"Math",{imulh:function(t,e){var n=65535,i=+t,r=+e,o=i&n,a=r&n,s=i>>16,u=r>>16,l=(s*a>>>0)+(o*a>>>16);return s*u+(l>>16)+((o*u>>>0)+(l&n)>>16)}})},function(t,e,n){var i=n(307);i(i.S,"Math",{umulh:function(t,e){var n=65535,i=+t,r=+e,o=i&n,a=r&n,s=i>>>16,u=r>>>16,l=(s*a>>>0)+(o*a>>>16);return s*u+(l>>>16)+((o*u>>>0)+(l&n)>>>16)}})},function(t,e,n){var i=n(576),r=n(311),o=i.key,a=i.set;i.exp({defineMetadata:function(t,e,n,i){a(t,e,r(n),o(i))}})},function(t,e,n){var i=n(510),r=n(307),o=n(322)("metadata"),a=o.store||(o.store=new(n(514))),s=function(t,e,n){var r=a.get(t);if(!r){if(!n)return;a.set(t,r=new i)}var o=r.get(e);if(!o){if(!n)return;r.set(e,o=new i)}return o},u=function(t,e,n){var i=s(e,n,!1);return void 0!==i&&i.has(t)},l=function(t,e,n){var i=s(e,n,!1);return void 0===i?void 0:i.get(t)},c=function(t,e,n,i){s(n,i,!0).set(t,e)},h=function(t,e){var n=s(t,e,!1),i=[];return n&&n.forEach(function(t,e){i.push(e)}),i},f=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},p=function(t){r(r.S,"Reflect",t)};t.exports={store:a,map:s,has:u,get:l,set:c,keys:h,key:f,exp:p}},function(t,e,n){var i=n(576),r=n(311),o=i.key,a=i.map,s=i.store;i.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),i=a(r(e),n,!1);if(void 0===i||!i.delete(t))return!1;if(i.size)return!0;var u=s.get(e);return u.delete(n),!!u.size||s.delete(e)}})},function(t,e,n){var i=n(576),r=n(311),o=n(358),a=i.has,s=i.get,u=i.key,l=function(t,e,n){var i=a(t,e,n);if(i)return s(t,e,n);var r=o(e);return null!==r?l(t,r,n):void 0};i.exp({getMetadata:function(t,e){return l(t,r(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,n){var i=n(513),r=n(567),o=n(576),a=n(311),s=n(358),u=o.keys,l=o.key,c=function(t,e){var n=u(t,e),o=s(t);if(null===o)return n;var a=c(o,e);return a.length?n.length?r(new i(n.concat(a))):a:n};o.exp({getMetadataKeys:function(t){return c(a(t),arguments.length<2?void 0:l(arguments[1]))}})},function(t,e,n){var i=n(576),r=n(311),o=i.get,a=i.key;i.exp({getOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var i=n(576),r=n(311),o=i.keys,a=i.key;i.exp({getOwnMetadataKeys:function(t){return o(r(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,e,n){var i=n(576),r=n(311),o=n(358),a=i.has,s=i.key,u=function(t,e,n){var i=a(t,e,n);if(i)return!0;var r=o(e);return null!==r&&u(t,r,n)};i.exp({hasMetadata:function(t,e){return u(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var i=n(576),r=n(311),o=i.has,a=i.key;i.exp({hasOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var i=n(576),r=n(311),o=n(320),a=i.key,s=i.set;i.exp({metadata:function(t,e){return function(n,i){s(t,e,(void 0!==i?r:o)(n),a(i))}}})},function(t,e,n){var i=n(307),r=n(508)(),o=n(303).process,a="process"==n(333)(o);i(i.G,{asap:function(t){var e=a&&o.domain;r(e?e.bind(t):t)}})},function(t,e,n){"use strict";var i=n(307),r=n(303),o=n(308),a=n(508)(),s=n(324)("observable"),u=n(320),l=n(311),c=n(504),h=n(509),f=n(309),p=n(505),d=p.RETURN,g=function(t){return null==t?void 0:u(t)},m=function(t){var e=t._c;e&&(t._c=void 0,e())},y=function(t){return void 0===t._o},v=function(t){y(t)||(t._o=void 0,m(t))},b=function(t,e){l(t),this._c=void 0,this._o=t,t=new _(this);try{var n=e(t),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:u(n),this._c=n)}catch(e){return void t.error(e)}y(this)&&m(this)};b.prototype=h({},{unsubscribe:function(){v(this)}});var _=function(t){this._s=t};_.prototype=h({},{next:function(t){var e=this._s;if(!y(e)){var n=e._o;try{var i=g(n.next);if(i)return i.call(n,t)}catch(t){try{v(e)}finally{throw t}}}},error:function(t){var e=this._s;if(y(e))throw t;var n=e._o;e._o=void 0;try{var i=g(n.error);if(!i)throw t;t=i.call(n,t)}catch(t){try{m(e)}finally{throw t}}return m(e),t},complete:function(t){var e=this._s;if(!y(e)){var n=e._o;e._o=void 0;try{var i=g(n.complete);t=i?i.call(n,t):void 0}catch(t){try{m(e)}finally{throw t}}return m(e),t}}});var x=function(t){c(this,x,"Observable","_f")._f=u(t)};h(x.prototype,{subscribe:function(t){return new b(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||r.Promise)(function(n,i){u(t);var r=e.subscribe({next:function(e){try{return t(e)}catch(t){i(t),r.unsubscribe()}},error:i,complete:n})})}}),h(x,{from:function(t){var e="function"==typeof this?this:x,n=g(l(t)[s]);if(n){var i=l(n.call(t));return i.constructor===e?i:new e(function(t){return i.subscribe(t)})}return new e(function(e){var n=!1;return a(function(){if(!n){try{if(p(t,!1,function(t){if(e.next(t),n)return d})===d)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:x)(function(t){var e=!1;return a(function(){if(!e){for(var i=0;i<n.length;++i)if(t.next(n[i]),e)return;t.complete()}}),function(){e=!0}})}}),f(x.prototype,s,function(){return this}),i(i.G,{Observable:x}),n(491)("Observable")},function(t,e,n){var i=n(303),r=n(307),o=n(377),a=n(588),s=i.navigator,u=!!s&&/MSIE .\./.test(s.userAgent),l=function(t){return u?function(e,n){return t(o(a,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),n)}:t};r(r.G+r.B+r.F*u,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},function(t,e,n){"use strict";var i=n(589),r=n(377),o=n(320);t.exports=function(){for(var t=o(this),e=arguments.length,n=Array(e),a=0,s=i._,u=!1;e>a;)(n[a]=arguments[a++])===s&&(u=!0);return function(){var i,o=this,a=arguments.length,l=0,c=0;if(!u&&!a)return r(t,n,o);if(i=n.slice(),u)for(;e>l;l++)i[l]===s&&(i[l]=arguments[c++]);for(;a>c;)i.push(arguments[c++]);return r(t,i,o)}}},function(t,e,n){t.exports=n(303)},function(t,e,n){var i=n(307),r=n(507);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,n){for(var i=n(492),r=n(317),o=n(303),a=n(309),s=n(428),u=n(324),l=u("iterator"),c=u("toStringTag"),h=s.Array,f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],p=0;p<5;p++){var d,g=f[p],m=o[g],y=m&&m.prototype;if(y){y[l]||a(y,l,h),y[c]||a(y,c,g),s[g]=h;for(d in i)y[d]||r(y,d,i[d],!0)}}},function(t,e,n){(function(e,n){!function(e){"use strict";function i(t,e,n,i){var r=e&&e.prototype instanceof o?e:o,a=Object.create(r.prototype),s=new p(i||[]);return a._invoke=c(t,n,s),a}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function o(){}function a(){}function s(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){function e(n,i,o,a){var s=r(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&v.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(l).then(function(t){u.value=t,o(u)},a)}a(s.arg)}function i(t,n){function i(){return new Promise(function(i,r){e(t,n,i,r)})}return o=o?o.then(i,i):i()}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var o;this._invoke=i}function c(t,e,n){var i=S;return function(o,a){if(i===T)throw new Error("Generator is already running");if(i===C){if("throw"===o)throw a;return g()}for(;;){var s=n.delegate;if(s){if("return"===o||"throw"===o&&s.iterator[o]===m){n.delegate=null;var u=s.iterator.return;if(u){var l=r(u,s.iterator,a);if("throw"===l.type){o="throw",a=l.arg;continue}}if("return"===o)continue}var l=r(s.iterator[o],s.iterator,a);if("throw"===l.type){n.delegate=null,o="throw",a=l.arg;continue}o="next",a=m;var c=l.arg;if(!c.done)return i=M,c;n[s.resultName]=c.value,n.next=s.nextLoc,n.delegate=null}if("next"===o)n.sent=n._sent=a;else if("throw"===o){if(i===S)throw i=C,a;n.dispatchException(a)&&(o="next",a=m)}else"return"===o&&n.abrupt("return",a);i=T;var l=r(t,e,n);if("normal"===l.type){i=n.done?C:M;var c={value:l.arg,done:n.done};if(l.arg!==I)return c;n.delegate&&"next"===o&&(a=m)}else"throw"===l.type&&(i=C,o="throw",a=l.arg)}}}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var e=t[_];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(v.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=m,e.done=!0,e};return i.next=i}}return{next:g}}function g(){return{value:m,done:!0}}var m,y=Object.prototype,v=y.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},_=b.iterator||"@@iterator",x=b.toStringTag||"@@toStringTag",w="object"==typeof t,E=e.regeneratorRuntime;if(E)return void(w&&(t.exports=E));E=e.regeneratorRuntime=w?t.exports:{},E.wrap=i;var S="suspendedStart",M="suspendedYield",T="executing",C="completed",I={},N={};N[_]=function(){return this};var P=Object.getPrototypeOf,L=P&&P(P(d([])));L&&L!==y&&v.call(L,_)&&(N=L);var A=s.prototype=o.prototype=Object.create(N);a.prototype=A.constructor=s,s.constructor=a,s[x]=a.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(A),t},E.awrap=function(t){return{__await:t}},u(l.prototype),E.AsyncIterator=l,E.async=function(t,e,n,r){var o=new l(i(t,e,n,r));return E.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},u(A),A[x]="Generator",A.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},E.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&v.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=m)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return o.type="throw",o.arg=t,n.next=e,!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var a=v.call(r,"catchLoc"),s=v.call(r,"finallyLoc");if(a&&s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&v.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?this.next=r.finallyLoc:this.complete(o),I},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),I}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;f(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},I}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(109))},function(t,e,n){n(594),t.exports=n(308).RegExp.escape},function(t,e,n){var i=n(307),r=n(595)(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(t){return r(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},,,,function(t,e){},,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(604),o=i(r),a=n(1),s=n(167),u=n(170),l=n(189)(u),c=n(266),h=n(268),f=n(605),p=n(717),d=n(725),g=n(730),m=n(731),y=n(286),v=n(281),b=n(289),_=a.createClass({displayName:"AddPhotoPoint",mixins:[l.connect(g,{initWithProps:["layer"]}),l.connect(c,{initWithProps:["locale","_csrf"]})],__:function(t){return h.getLocaleString(this.state.locale,t)},propTypes:{layer:a.PropTypes.object.isRequired,locale:a.PropTypes.string.isRequired},getInitialState:function(){return{saving:!1}},componentDidMount:function(){var t=this;window.onbeforeunload=function(){if(!t.state.submitted)return t.__("You have not saved your data, your work will be lost.")}},showImageCrop:function(){this.refs.imagecrop.show()},resetPhoto:function(){m.resetPhoto(),this.showImageCrop()},onCrop:function(t,e){var n=this;m.setImage(t,e,function(t){t?y.showMessage({title:n.__("Failed to Save Photo"),message:this.__("An error occurred while processing this photo. Please confirm that the photo has valid GPS location information. Error Message: ")+t}):v.showNotification({message:n.__("Photo Added")})})},onSubmit:function(t){var e=this;this.setState({saving:!0}),m.submit(t,this.state._csrf,function(t){e.setState({saving:!1}),t?y.showMessage({title:e.__("Server Error"),message:t}):b.showConfirmation({title:e.__("Photo Saved"),message:e.__("Do you want to add another photo?"),postitiveButtonText:e.__("Yes"),negativeButtonText:e.__("No"),onPositiveResponse:function(){location.reload()},onNegativeResponse:function(){var t="unknown",n=["name","Name","NAME","nom","Nom","NOM","nombre","Nombre","NOMBRE"];n.forEach(function(n){"unknown"==t&&e.state.geoJSON.features[0].properties[n]&&(t=e.state.geoJSON.features[0].properties[n])});var i="/feature/"+e.state.layer.layer_id+"/"+e.state.mhid+"/"+t;window.location=i}})})},render:function(){var t="",e="",n="";return this.state.geoJSON?(t=a.createElement("div",{className:"row"},a.createElement("div",{className:"col m6 s12"},a.createElement("img",{style:{width:"100%",height:"auto"},src:this.state.image,alt:"uploaded photo"})),a.createElement("div",{className:"col m6 s12"},a.createElement("div",{style:{width:"400px"}},a.createElement(f,{ref:"map",style:{width:"100%",height:"400px"},showFeatureInfoEditButtons:!1,showLogo:!1,data:this.state.geoJSON}))),a.createElement("div",{className:"row no-margin"},a.createElement("button",{className:"btn",style:{marginLeft:"10px"},onClick:this.resetPhoto},this.__("Replace Photo")))),e=a.createElement(p,{presets:this.props.layer.presets,onSubmit:this.onSubmit})):n=a.createElement("div",{className:"row no-margin"},a.createElement("p",null,this.__("Upload a Photo with Location Information")),a.createElement("button",{className:"btn",style:{marginLeft:"10px"},onClick:this.showImageCrop},this.__("Add Photo"))),a.createElement("div",null,a.createElement(s,null),a.createElement("main",{style:{height:"calc(100% - 50px)",marginTop:0}},a.createElement("div",{className:"container"},a.createElement("div",{className:"row center-align"},a.createElement("h5",null,this.__("Add data to:")+" "+this.props.layer.name),n),t,a.createElement("div",{className:"row"},e)),a.createElement(d,{ref:"imagecrop",aspectRatio:1,lockAspect:!0,resize_max_width:1e3,resize_max_height:1e3,onCrop:this.onCrop}),a.createElement(o.default,{id:"saving",title:this.__("Saving"),subTitle:"",dismissible:!1,show:this.state.saving})))}});t.exports=_},function(t,e,n){"use strict";var i=n(283),r=n(1),o=r.createClass({displayName:"Progress",propTypes:{id:r.PropTypes.string,message:r.PropTypes.string,onClose:r.PropTypes.func,show:r.PropTypes.bool,title:r.PropTypes.string,subTitle:r.PropTypes.string},getDefaultProps:function(){return{id:"progress",show:!1,message:"",onClose:null}},getInitialState:function(){return{show:this.props.show}},componentWillReceiveProps:function(t){this.props.show!=t.show&&this.setState({show:t.show})},onClose:function(){this.setState({show:!1}),this.props.onClose&&this.props.onClose()},render:function(){var t="";return this.props.subTitle&&(t=r.createElement("div",{className:"row"},r.createElement("p",{className:"center"},this.props.subTitle))),r.createElement(i.Modal,{id:this.props.id,show:this.state.show,dismissible:!1,fixedFooter:!1},r.createElement(i.ModalContent,{className:"valign-wrapper"},r.createElement("div",{className:"container"},r.createElement("div",{className:"row"},r.createElement("h4",{className:"center"},this.props.title)),t,r.createElement("div",{className:"row"},r.createElement("div",{className:"progress"},r.createElement("div",{className:"indeterminate"}))))))}});t.exports=o},function(t,e,n){"use strict";var i=n(1),r=n(284),o=n(606),a=n(201)("map"),s=n(610),u=n(612),l=n(168),c=n(170),h=n(189)(c),f=n(648),p=n(649),d=n(608),g=n(266),m=n(660),y=n(268),v=n(610),b=n(664),_=n(665),x=n(681),w=n(685),E=n(687),S=n(688),M=n(694),T=n(695),C=n(700),I=n(701),N=n(713),P=n(714),L=n(715),A=n(716),k={};"undefined"!=typeof window&&(k=n(684));var R=i.createClass({displayName:"Map",mixins:[w,E,T,S,M,C,L,h.connect(m),h.connect(A),h.connect(p,{initWithProps:["baseMap"]}),h.connect(g)],__:function(t){return y.getLocaleString(this.state.locale,t)},propTypes:{className:i.PropTypes.string,id:i.PropTypes.string,maxBounds:i.PropTypes.object,maxZoom:i.PropTypes.number,minZoom:i.PropTypes.number,height:i.PropTypes.string,style:i.PropTypes.object,glStyle:i.PropTypes.object,features:i.PropTypes.array,tileJSONType:i.PropTypes.string,tileJSONUrl:i.PropTypes.string,data:i.PropTypes.object,interactive:i.PropTypes.bool,showPlayButton:i.PropTypes.bool,showLogo:i.PropTypes.bool,showFeatureInfoEditButtons:i.PropTypes.bool,fitBounds:i.PropTypes.array,disableScrollZoom:i.PropTypes.bool,enableRotation:i.PropTypes.bool,navPosition:i.PropTypes.string,baseMap:i.PropTypes.string,onChangeBaseMap:i.PropTypes.func,insetMap:i.PropTypes.bool,hoverInteraction:i.PropTypes.bool,interactionBufferSize:i.PropTypes.number,hash:i.PropTypes.bool,gpxLink:i.PropTypes.string,attributionControl:i.PropTypes.bool,allowLayerOrderOptimization:i.PropTypes.bool,children:i.PropTypes.any},getDefaultProps:function(){return{maxZoom:18,minZoom:5,className:"",interactive:!0,showFeatureInfoEditButtons:!0,showPlayButton:!0,navPosition:"top-right",baseMap:"default",showLogo:!0,insetMap:!0,hoverInteraction:!1,interactionBufferSize:10,hash:!0,attributionControl:!1,style:{},allowLayerOrderOptimization:!0}},getInitialState:function(){var t=null;this.props.fitBounds&&(t=this.props.fitBounds);var e=null,n=[];return this.props.glStyle&&(e=JSON.parse(JSON.stringify(this.props.glStyle)),n=this.getInteractiveLayers(e)),{id:this.props.id?this.props.id:"map",selectedFeatures:null,selected:!1,interactive:this.props.interactive,glStyle:e,interactiveLayers:n,mapLoaded:!1,restoreBounds:t,allowLayersToMoveMap:!t}},componentWillMount:function(){if(this.state.glStyle){var t=this.getInteractiveLayers(this.state.glStyle);this.setState({interactiveLayers:t})}},componentDidMount:function(){this.createMap()},shouldComponentUpdate:function(t,e){return!!(this.state.selected||e.selected||this.state.selectedFeatures||e.selectedFeatures)||(!v(this.props,t)||!v(this.state,e))},optimizeLayerOrder:function(t){var e=[],n=[];return this.props.allowLayerOrderOptimization?(t.layers.forEach(function(t){"symbol"===t.type?n.push(t):e.push(t)}),e.concat(n)):t.layers},addLayers:function(t,e){var n=this,i=this.optimizeLayerOrder(e);i.forEach(function(i){try{var r=e.sources[i.source];"osm"==i.source||"vector"!==r.type||r.url.startsWith("mapbox://")?"geojson"===r.type&&r.data?I["maphubs-vector"].addLayer(i,r,t,n):I[r.type]&&I[r.type].addLayer?I[r.type].addLayer(i,r,t):"raster"===r.type&&i.metadata&&i.metadata["maphubs:showBehindBaseMapLabels"]?t.addLayer(i,"water"):n.state.editing?t.addLayer(i,n.getFirstDrawLayerID()):t.addLayer(i):I["maphubs-vector"].addLayer(i,r,t,n)}catch(t){a("("+n.state.id+") Failed to add layer: "+i.id),a("("+n.state.id+") "+t)}})},removeAllLayers:function(t){var e=this;t&&t.layers&&t.layers.forEach(function(n){try{var i=t.sources[n.source];"osm"==n.source||"vector"!==i.type||i.url.startsWith("mapbox://")?"geojson"===i.type&&i.data?I["maphubs-vector"].removeLayer(n,e.map):I[i.type]&&I[i.type].removeLayer?I[i.type].removeLayer(n,e.map):e.map.removeLayer(n.id):I["maphubs-vector"].removeLayer(n,e.map)}catch(t){a("("+e.state.id+") Failed to remove layer: "+n.id)}})},removeAllSources:function(t){var e=this;t&&t.sources&&Object.keys(t.sources).forEach(function(n){try{I[t.sources[n].type]&&I[t.sources[n].type].remove?I[t.sources[n].type].remove(n,e.map):e.map.removeSource(n)}catch(t){a("("+e.state.id+") Failed to remove source: "+n)}})},reload:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this;a("("+i.state.id+") reload: start");try{this.clearSelection()}catch(t){a(t)}t||(t=this.props.glStyle),e||(e=t),this.removeAllLayers(t),this.removeAllSources(t),n?(a("("+i.state.id+") reload: base map"),this.map.setStyle(n,{diff:!1})):this.addMapData(this.map,e,this.props.data,function(){a("("+i.state.id+") reload: finished adding data")})},addMapData:function(t,e,n,i){var r=this;if(e&&e.sources){var o=[];Object.keys(e.sources).forEach(function(n){var i=e.sources[n],a=i.type,s=i.url;"osm"==n||"vector"!==a||s.startsWith("mapbox://")?"geojson"===a&&i.data?o.push(I["maphubs-vector"].load(n,i,t,r)):I[a]?o.push(I[a].load(n,i,t,r)):"raster"===a?(i.url&&(i.url=i.url.replace("{MAPHUBS_DOMAIN}",d.getBaseUrl())),t.addSource(n,i)):t.addSource(n,i):o.push(I["maphubs-vector"].load(n,i,t,r))}),u.all(o).then(function(){r.addLayers(t,e),i()}).catch(function(n){a("("+r.state.id+") "+n),r.addLayers(t,e),i()})}else n?(r.initGeoJSON(t,n),r.setState({mapLoaded:!0})):r.setState({mapLoaded:!0})},createMap:function(){var t=this;a("("+t.state.id+") Creating MapboxGL Map"),k.accessToken=MAPHUBS_CONFIG.MAPBOX_ACCESS_TOKEN,f.getBaseMapFromName(this.state.baseMap,function(e){k.supported()||alert("Your browser does not support Mapbox GL");var n=new k.Map({container:t.state.id,style:e,zoom:0,interactive:t.state.interactive,dragRotate:!!t.props.enableRotation,touchZoomRotate:!!t.props.enableRotation,center:[0,0],hash:t.props.hash,attributionControl:t.props.attributionControl});n.on("style.load",function(){a("("+t.state.id+") style.load"),t.addMapData(n,t.state.glStyle,t.props.data,function(){if(a("("+t.state.id+") finished adding map data"),!t.props.data&&t.state.restoreBounds){var e=t.state.restoreBounds;if(e.length>2){var i=new k.LngLat(e[0],e[1]),r=new k.LngLat(e[2],e[3]);e=new k.LngLatBounds(i,r)}a("("+t.state.id+") restoring bounds: "+t.state.restoreBounds),n.fitBounds(e,{animate:!1}),t.refs.insetMap&&t.refs.insetMap.fitBounds(e,{maxZoom:1.8,padding:10,animate:!1})}"en"!=t.state.locale&&(t.changeLocale(t.state.locale,t.map),t.refs.insetMap&&t.changeLocale(t.state.locale,t.refs.insetMap.getInsetMap())),t.state.forestAlerts&&t.restoreForestAlerts(),a("("+t.state.id+") MAP LOADED"),t.setState({mapLoaded:!0})}),t.refs.insetMap&&(t.refs.insetMap.getInsetMap()||t.refs.insetMap.createInsetMap(n.getCenter(),n.getBounds(),e))}),n.on("mousemove",t.mousemoveHandler),n.on("moveend",t.moveendHandler),n.on("click",t.clickHandler),t.state.interactive&&n.addControl(new k.NavigationControl,t.props.navPosition),n.addControl(new k.ScaleControl({maxWidth:175,unit:"metric"}),"bottom-right"),t.props.disableScrollZoom&&n.scrollZoom.disable(),t.map=n})},componentDidUpdate:function(t,e){if(this.state.interactive&&!e.interactive){this.map.addControl(new k.Navigation,this.props.navPosition);var n=this.map.interaction;n.enable(),l(this.refs.basemapButton).show(),l(this.refs.editBaseMapButton).show()}this.state.locale&&this.state.locale!=e.locale&&(this.changeLocale(this.state.locale,this.map),this.refs.insetMap&&this.changeLocale(this.state.locale,this.refs.insetMap.__getInsetMap()))},componentWillReceiveProps:function(t){var e=this;if(t.data&&this.map){var n=this.map.getSource("omh-geojson");n?(a("("+this.state.id+") update geoJSON data"),n.setData(t.data),this.zoomToData(t.data)):void 0===n&&this.props.data||(a("("+this.state.id+") init geoJSON data"),this.initGeoJSON(this.map,t.data))}var i=!1,r=null,o=this.state.allowLayersToMoveMap;if(t.fitBounds&&!s(this.props.fitBounds,t.fitBounds)&&this.map){if(a("("+this.state.id+") FIT BOUNDS CHANGING"),i=!0,o=!1,t.fitBounds.length>2){var u=new k.LngLat(t.fitBounds[0],t.fitBounds[1]),l=new k.LngLat(t.fitBounds[2],t.fitBounds[3]);r=new k.LngLatBounds(u,l)}else r=t.fitBounds;a("("+this.state.id+") bounds: "+r)}if(t.glStyle&&t.baseMap)if(s(this.state.glStyle,t.glStyle))s(this.state.baseMap,t.baseMap)?i&&r&&(a("("+this.state.id+") only bounds changing, bounds: "+r),Array.isArray(r)&&r.length>2&&(r=[[r[0],r[1]],[r[2],r[3]]]),a("("+this.state.id+") calling map fitBounds"),this.map.fitBounds(r,{animate:!1}),this.refs.insetMap&&this.refs.insetMap.fitBounds(r,{maxZoom:1.8,padding:10,animate:!1}),this.setState({allowLayersToMoveMap:o})):(a("("+this.state.id+") basemap changing from props"),o=!1,this.setState({allowLayersToMoveMap:o}),f.setBaseMap(t.baseMap),f.getBaseMapFromName(t.baseMap,function(t){e.reload(e.state.glStyle,e.state.glStyle,t)}));else{a("("+this.state.id+") glstyle changing from props"),this.state.mapLoaded&&!i&&null!=this.state.glStyle&&(a("("+this.state.id+") restoring current map position"),o=!1);var c=JSON.parse(JSON.stringify(this.state.glStyle)),h=JSON.parse(JSON.stringify(t.glStyle));this.setState({allowLayersToMoveMap:o,glStyle:h}),f.setBaseMap(t.baseMap),f.getBaseMapFromName(t.baseMap,function(t){e.reload(c,h,t);var n=e.getInteractiveLayers(h);e.setState({interactiveLayers:n})})}else if(t.glStyle&&!s(this.state.glStyle,t.glStyle)){a("("+this.state.id+") glstyle changing from props (default basemap)");var p=JSON.parse(JSON.stringify(t.glStyle));this.reload(this.state.glStyle,p);var d=this.getInteractiveLayers(p);this.setState({glStyle:p,allowLayersToMoveMap:o,interactiveLayers:d})}else t.baseMap&&!s(this.state.baseMap,t.baseMap)?(a("("+this.state.id+") basemap changing from props (no glstyle)"),this.setState({allowLayersToMoveMap:o}),f.setBaseMap(t.baseMap),f.getBaseMapFromName(t.baseMap,function(t){e.reload(this.state.glStyle,this.state.glStyle,t)})):i&&r&&(a("("+this.state.id+") only bounds changing"),r._ne&&r._sw?this.map.fitBounds(r,{animate:!1}):Array.isArray(r)&&r.length>2?this.map.fitBounds([[r[0],r[1]],[r[2],r[3]]],{animate:!1}):this.map.fitBounds(r,{animate:!1}),this.setState({allowLayersToMoveMap:o}))},componentWillUnmount:function(){this.map.remove()},startInteractive:function(){this.setState({interactive:!0}),this.props.enableRotation||(this.map.dragRotate.disable(),this.map.touchZoomRotate.disableRotation())},getBaseMap:function(){return this.state.baseMap},changeBaseMap:function(t){a("changing basemap to: "+t);var e=this;f.getBaseMapFromName(t,function(n){f.setBaseMap(t),e.setState({allowLayersToMoveMap:!1}),e.reload(e.state.glStyle,e.state.glStyle,n),e.refs.insetMap&&(e.refs.insetMap.reloadInset(n),e.refs.insetMap.fitBounds(e.map.getBounds(),{maxZoom:1.8,padding:10,animate:!1})),e.state.forestAlerts&&e.restoreForestAlerts(),e.props.onChangeBaseMap&&e.props.onChangeBaseMap(t)})},render:function(){var t=r("mode","map","active"),e="";this.state.selectedFeatures&&this.state.selectedFeatures.length>0&&(e=i.createElement(o,{features:this.state.selectedFeatures,selected:this.state.selected,onUnselected:this.handleUnselectFeature,showButtons:this.props.showFeatureInfoEditButtons,style:{}}));var n="";!this.state.interactive&&this.props.showPlayButton&&(n=i.createElement("a",{onClick:this.startInteractive,className:"btn-floating waves-effect waves-light",style:{position:"absolute",left:"50%",bottom:"50%",backgroundColor:"rgba(25,25,25,0.1)",zIndex:"999"}},i.createElement("i",{className:"material-icons"},"play_arrow")));var a="",s="";this.state.mapLoaded&&(this.props.showLogo&&(a=i.createElement("img",{style:{position:"absolute",left:"5px",bottom:"2px",zIndex:"1"},width:MAPHUBS_CONFIG.logoSmallWidth,height:MAPHUBS_CONFIG.logoSmallHeight,src:MAPHUBS_CONFIG.logoSmall,alt:"Logo"})),s=this.props.children);var u="";if(this.props.insetMap){var l="5px";this.props.showLogo&&(l="30px"),u=i.createElement(x,{ref:"insetMap",id:this.state.id,bottom:l})}var c="";this.state.enableMeasurementTools&&(c=i.createElement("div",null,i.createElement("div",{style:{position:"absolute",top:"46px",right:"10px",backgroundColor:"rgba(0,0,0,0.6)",color:"#FFF",height:"30px",paddingLeft:"5px",paddingRight:"5px",borderRadius:"4px",zIndex:"100",lineHeight:"30px"}},i.createElement("span",null,this.state.measurementMessage)),i.createElement(b,{top:"80px",right:"10px",icon:"close",show:!0,color:"#000",onClick:this.stopMeasurementTool,tooltipText:this.__("Exit Measurement")})));var h="";return this.state.showForestLoss&&(h=i.createElement(P,{style:{position:"absolute",bottom:"5px",left:"45%",right:"45%",fontSize:"32px",color:"#FFF",textShadow:"-1px 0 #000000, 0 1px #000000, 1px 0 #000000, 0 -1px #000000",zIndex:1}})),i.createElement("div",{ref:"mapcontainer",className:this.props.className,style:this.props.style},i.createElement("div",{id:this.state.id,ref:"map",className:t,style:{width:"100%",height:"100%"}},u,i.createElement(_,{show:this.state.interactive&&this.state.mapLoaded,gpxLink:this.props.gpxLink,toggleMeasurementTools:this.toggleMeasurementTools,enableMeasurementTools:this.state.enableMeasurementTools,toggleForestAlerts:this.toggleForestAlerts,toggleForestLoss:this.toggleForestLoss,calculateForestAlerts:this.calculateForestAlerts,forestAlerts:this.state.forestAlerts,onChangeBaseMap:this.changeBaseMap}),c,e,n,s,a,h),i.createElement(N,null))}});t.exports=R},function(t,e,n){"use strict";var i=n(1),r=n(607),o=n(284),a=n(170),s=n(189)(a),u=n(266),l=n(268),c=n(196),h=n(205).checkClientError,f=n(608),p=n(609),d=n(168),g=i.createClass({displayName:"FeatureBox",mixins:[s.connect(u)],__:function(t){return l.getLocaleString(this.state.locale,t)},propTypes:{features:i.PropTypes.array.isRequired,selected:i.PropTypes.bool.isRequired,onUnselected:i.PropTypes.func.isRequired,showButtons:i.PropTypes.bool,className:i.PropTypes.string},getDefaultProps:function(){return{showButtons:!0,selected:!1}},getInitialState:function(){return{selectedFeature:1,selected:this.props.selected,currentFeatures:this.props.features?this.props.features:[],maxHeight:"calc(100% - 50px)",layerLoaded:!1}},componentDidMount:function(){if(this.props.selected&&this.props.features){var t=this.props.features[0];t.properties.layer_id?this.getLayer(t.properties.layer_id,t.properties.maphubs_host):this.setState({layerLoaded:!0})}},componentWillReceiveProps:function(t){if(!this.state.selected)if(t.selected){var e=null;this.state.currentFeatures&&this.state.currentFeatures.length>0?(e=this.state.currentFeatures,this.setState({selected:t.selected,selectedFeature:1})):(e=t.features,this.setState({currentFeatures:t.features,selected:t.selected,selectedFeature:1}));var n=e[0];n.properties.layer_id?this.getLayer(n.properties.layer_id,n.properties.maphubs_host):this.setState({layerLoaded:!0})}else this.setState({currentFeatures:t.features})},componentDidUpdate:function(t,e){!e.layerLoaded&&this.state.layerLoaded&&d(".feature-box-tooltips").tooltip()},getLayer:function(t,e){var n,i=this;n=e&&"dev.docker"!==e&&e!==window.location.hostname?"https://"+e:f.getBaseUrl(),c.get(n+"/api/layer/info/"+t).type("json").accept("json").end(function(t,e){h(e,t,function(){},function(t){var n=e.body.layer;i.setState({
layer:n,layerLoaded:!0}),t()})})},handleCloseSelected:function(){this.setState({selected:!1,currentFeatures:[],selectedFeature:1}),this.props.onUnselected()},handleChangeSelectedFeature:function(t){this.setState({selectedFeature:t}),t.properties.layer_id?this.getLayer(t.properties.layer_id,t.properties.maphubs_host):this.setState({layerLoaded:!0})},render:function(){var t="",e="",n="",a="",s=f.getBaseUrl();if(this.state.selected){if(t=i.createElement("a",{style:{position:"absolute",top:0,right:0,cursor:"pointer"}},i.createElement("i",{className:"material-icons selected-feature-close",onClick:this.handleCloseSelected},"close")),1===this.state.currentFeatures.length?e=i.createElement("h6",{style:{position:"absolute",top:0,left:"5px",fontSize:"12px"}},this.__("Selected Feature")):this.state.currentFeatures.length>1&&(e=i.createElement("h6",{style:{position:"absolute",top:0,left:"5px",fontSize:"12px"}},this.__("Selected Features"))),this.props.showButtons){var u=-1,l=null,c=null,h="unknown";if(this.state.currentFeatures.length>0){var d=this.state.currentFeatures[this.state.selectedFeature-1];if(d&&d.properties){u=d.properties.mhid,l=d.properties.layer_id,c=d.properties.maphubs_host;var g=["name","Name","NAME","nom","Nom","NOM","nombre","Nombre","NOMBRE"];g.forEach(function(t){"unknown"==h&&d.properties[t]&&(h=d.properties[t])})}}var m="";this.state.layer&&(m=i.createElement("div",{style:{textAlign:"left"}},i.createElement("b",null,i.createElement("a",{className:"truncate",target:"_blank",href:s+"/lyr/"+this.state.layer.layer_id},this.state.layer.name)),i.createElement(p,{className:"left",group:this.state.layer.owned_by_group_id,size:15,fontSize:8})));var y,v;v="string"==typeof u&&u.includes(":")?u.split(":")[1]:u,y=c===window.location.hostname||"dev.docker"===c?"/feature/"+l+"/"+v+"/"+h:"https://"+c+"/feature/"+l+"/"+v+"/"+h,n=i.createElement("div",{className:"row",style:{marginTop:"10px",marginBottom:"10px"}},i.createElement("div",{className:"col s10 center"},m),i.createElement("div",{className:"col s2 center no-padding"},i.createElement("a",{href:y,className:"feature-box-tooltips","data-delay":"50","data-position":"bottom","data-tooltip":this.__("More Info")},i.createElement("i",{className:"material-icons omh-accent-color",style:{fontSize:32}},"info_outline"))))}}else n=this.state.currentFeatures.length>1?i.createElement("div",null,this.__("Showing Feature 1 of")," ",this.state.currentFeatures.length,i.createElement("p",null,this.__("Click to View All"))):i.createElement("h6",{className:"center-align",style:{margin:"auto"}},this.__("Click to Select"));var b=!1;this.props.showButtons&&this.state.selected&&this.state.currentFeatures.length>1&&(b=!0);var _="none",x="",w=[];if(this.state.currentFeatures.length>0&&this.state.layerLoaded){_="flex",d=this.state.currentFeatures[this.state.selectedFeature-1],d&&d.properties&&(w=d.properties);var E;this.state.layer&&(E=this.state.layer.presets),x=i.createElement(r,{attributes:w,selected:this.state.selected,multipleSelected:b,presets:E},i.createElement("div",{style:{position:"absolute",bottom:0,width:"100%",backgroundColor:"#FFF",borderTop:"1px solid #DDD"}},n,a))}var S=o("features","card",this.props.className);return i.createElement("div",{className:S,style:{display:_,maxHeight:this.state.maxHeight}},i.createElement("div",{className:"features-container"},t,e,i.createElement("div",{style:{width:"100%",display:"flex"}},x)))}});t.exports=g},function(t,e,n){"use strict";var i=n(1),r=i.createClass({displayName:"Attributes",propTypes:{attributes:i.PropTypes.object.isRequired,selected:i.PropTypes.bool.isRequired,multipleSelected:i.PropTypes.bool.isRequired,presets:i.PropTypes.array,children:i.PropTypes.any},render:function(){var t=this,e=i.createElement("div",{style:{height:"50px"}});this.props.multipleSelected&&(e=i.createElement("div",{style:{height:"118px"}}));var n="",r="",o=null;if(t.props.attributes.photo_url?o=t.props.attributes.photo_url:t.props.attributes["Photo URL"]&&(o=t.props.attributes["Photo URL"]),o&&(r=i.createElement("img",{src:o,style:{width:"180px",height:"auto"},alt:"feature photo"})),t.props.attributes&&Object.keys(t.props.attributes).length>0)if(this.props.presets){var a=this.props.presets;n=i.createElement("ul",{className:"collection",style:{marginTop:0}},r,a.map(function(e){if("undefined"!=typeof e.showOnMap&&e.showOnMap===!1)return"";var n=t.props.attributes[e.tag];return!n||"string"==typeof n&&"null"===n?"":("string"==typeof n&&n.startsWith("http")&&(n=i.createElement("a",{target:"_blank",href:n},n)),i.createElement("li",{key:e.tag,style:{paddingLeft:"5px",paddingRight:"5px",paddingTop:0,paddingBottom:0},className:"collection-item attribute-collection-item"},i.createElement("p",{style:{color:"rgb(158, 158, 158)",fontSize:"11px"}},e.label),i.createElement("p",{className:"word-wrap"},n)))}))}else n=i.createElement("ul",{className:"collection",style:{marginTop:0}},r,Object.keys(t.props.attributes).map(function(e){if("mhid"!==e||"layer_id"!==e||"maphubs_host"!==e){var n=t.props.attributes[e];return"string"==typeof n&&n.startsWith("http")&&(n=i.createElement("a",{target:"_blank",href:n},n)),i.createElement("li",{key:e,style:{padding:5},className:"collection-item attribute-collection-item"},i.createElement("p",{style:{color:"rgb(158, 158, 158)",fontSize:"11px"}},e),i.createElement("p",{className:"word-wrap"},n))}}));var s="0px";return this.props.selected&&(s="25px"),i.createElement("div",{style:{marginTop:s,width:"100%",overflowY:"auto",height:"calc(100% - 85px)",borderTop:"1px solid #DDD"}},n,e,this.props.children)}});t.exports=r},function(t,e){"use strict";t.exports={getBaseUrl:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n?(t=MAPHUBS_CONFIG.host_internal,e=MAPHUBS_CONFIG.internal_port):(t=MAPHUBS_CONFIG.host,e=MAPHUBS_CONFIG.port);var i="http://";MAPHUBS_CONFIG.https&&!n&&(i="https://");var r=i+t;return 80!=e&&(r+=":"+e),r},getUrlParameter:function(t){if("undefined"!=typeof window){var e,n,i=decodeURIComponent(window.location.search.substring(1)),r=i.split("&");for(n=0;n<r.length;n++)if(e=r[n].split("="),e[0]===t)return void 0===e[1]||e[1]}}}},function(t,e,n){"use strict";var i=n(1),r=n(608),o=n(168),a=n(610),s=n(284),u=i.createClass({displayName:"GroupTag",propTypes:{group:i.PropTypes.string.isRequired,size:i.PropTypes.number,chipWidth:i.PropTypes.number,fontSize:i.PropTypes.number,showTooltip:i.PropTypes.bool,className:i.PropTypes.string},getDefaultProps:function(){return{size:20,chipWidth:100,fontSize:10,showTooltip:!1}},componentDidMount:function(){this.props.showTooltip&&o(".group-tag-tooltip").tooltip(),o(this.refs.groupimg).error(function(){o(this).attr("src","/assets/missing_group.png")})},shouldComponentUpdate:function(t,e){return!a(this.props,t)||!a(this.state,e)},render:function(){var t=r.getBaseUrl(),e=this.props.size+"px",n=this.props.fontSize+"px",o=this.props.size.toString()+"px",a=this.props.chipWidth.toString()+"px",u=s(["chip","truncate",this.props.className]);return i.createElement("div",{className:u,style:{height:e,width:a,minWidth:"75px",marginBottom:"2px",border:"0.25pt solid #E4E4E4",lineHeight:e,fontSize:n}},i.createElement("a",{target:"_blank",className:"no-padding",href:t+"/group/"+this.props.group,style:{height:"initial"}},i.createElement("div",{className:"valign-wrapper",style:{height:e,width:o,backgroundColor:"white",marginRight:"0px",marginLeft:"-12px",float:"left"}},i.createElement("img",{ref:"groupimg",className:"valign",src:t+"/group/"+this.props.group+"/thumbnail",style:{height:e,width:"auto",marginRight:0,marginLeft:0,borderRadius:0},alt:"Group Photo"}))),i.createElement("a",{target:"_blank",className:"omh-accent-text group-tag-tooltip no-padding",style:{height:e,width:"auto",display:"inherit",lineHeight:e,fontSize:n},"data-position":"top","data-delay":"50","data-tooltip":this.props.group,href:t+"/group/"+this.props.group},this.props.group))}});t.exports=u},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(170),r=i.createActions({changeBaseMap:{},getBaseMapFromName:{},setBaseMap:{},updateMapPosition:{}});t.exports=r},function(t,e,n){"use strict";var i=n(170),r=n(189)(i),o=n(648),a=n(201)("stores/BaseMapStore"),s=n(196),u=n(650),l=n(652),c=n(654),h=n(655),f=n(657),p=n(658),d=n(659),g=n(659);t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{baseMap:"default",attribution:"© Mapbox © OpenStreetMap",bingImagerySet:null,updateWithMapPosition:!1}},setBaseMap:function(t){this.setState({baseMap:t})},debouncedUpdateMapPosition:c(function(t,e){var n=this;if(n.position){var i={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[n.position.lng,n.position.lat]}},r={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t.lng,t.lat]}},o=h(i,r,"kilometers");if(a("map moved: "+o+"km"),o<50&&Math.abs(n.position.zoom-t.zoom)<1)return void(n.position=t)}var c=[e[0][0],e[0][1],e[1][0],e[1][1]],f=t.lat,p=t.lng,d=Math.round(t.zoom),g="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.state.bingImagerySet+"/"+f+","+p+"?zl="+d+"&include=ImageryProviders&key="+MAPHUBS_CONFIG.BING_KEY,m="© Bing Maps";s.get(g).end(function(e,i){if(e)a(e);else{var r=i.body,o=[],s=u(c);if(r.resourceSets&&r.resourceSets.length>0&&r.resourceSets[0].resources&&r.resourceSets[0].resources.length>0&&r.resourceSets[0].resources[0].imageryProviders&&r.resourceSets[0].resources[0].imageryProviders.length>0){var h=r.resourceSets[0].resources[0],f="";h.vintageEnd&&(f='<b class="no-margin no-padding">('+h.vintageEnd+")</b>");var p=h.imageryProviders;p.forEach(function(t){for(var e=0;e<t.coverageAreas.length;e++){var n=u(t.coverageAreas[e].bbox);l(s,n)&&d>=t.coverageAreas[e].zoomMin&&d<=t.coverageAreas[e].zoomMax&&o.push(t.attribution)}}),m=m+": "+f+" "+o.toString()}n.position=t,n.setState({attribution:m})}})}),updateMapPosition:function(t,e){this.state.updateWithMapPosition&&this.debouncedUpdateMapPosition(t,e)},initialize:function(t){},getBingSource:function(t,e){var n="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+t+"?key="+MAPHUBS_CONFIG.BING_KEY+"&include=ImageryProviders";s.get(n).end(function(t,n){if(t)a(t);else{var i=n.body;e(i)}})},getBaseMapFromName:function(t,e){var n,i,r=this,o=!0;if(t||(t="default"),"default"==t)MAPHUBS_CONFIG.useMapboxBaseMaps?(n="light-v9",o=!0):(this.setState({attribution:'<a href="http://openmaptiles.org/" target="_blank">&copy; OpenMapTiles</a> <a href="http://www.openstreetmap.org/about/" target="_blank">&copy; OpenStreetMap contributors</a>',updateWithMapPosition:!1}),e(f));else if("dark"==t)MAPHUBS_CONFIG.useMapboxBaseMaps?(n="dark-v9",o=!0):(this.setState({attribution:'<a href="http://openmaptiles.org/" target="_blank">&copy; OpenMapTiles</a> <a href="http://www.openstreetmap.org/about/" target="_blank">&copy; OpenStreetMap contributors</a>',updateWithMapPosition:!1}),e(p));else if("outdoors"==t)MAPHUBS_CONFIG.useMapboxBaseMaps?(n="outdoors-v9",o=!0):(this.setState({attribution:'<a href="http://openmaptiles.org/" target="_blank">&copy; OpenMapTiles</a> <a href="http://www.openstreetmap.org/about/" target="_blank">&copy; OpenStreetMap contributors</a>',updateWithMapPosition:!1}),e(g));else if("streets"==t)MAPHUBS_CONFIG.useMapboxBaseMaps?(n="streets-v9",o=!0):(this.setState({attribution:'<a href="http://openmaptiles.org/" target="_blank">&copy; OpenMapTiles</a> <a href="http://www.openstreetmap.org/about/" target="_blank">&copy; OpenStreetMap contributors</a>',updateWithMapPosition:!1}),e(d));else if("mapbox-satellite"==t){if(!MAPHUBS_CONFIG.useMapboxBaseMaps)return this.getBaseMapFromName("bing-satellite",e);n="satellite-streets-v9",o=!0}else"stamen-toner"==t?(i={version:8,sources:{"stamen-toner-tiles":{type:"raster",tiles:["https://stamen-tiles-a.a.ssl.fastly.net/toner/{z}/{x}/{y}.png","https://stamen-tiles-b.a.ssl.fastly.net/toner/{z}/{x}/{y}.png","https://stamen-tiles-c.a.ssl.fastly.net/toner/{z}/{x}/{y}.png","https://stamen-tiles-d.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"stamen-toner-tiles",type:"raster",source:"stamen-toner-tiles",minzoom:0,maxzoom:22}]},this.setState({attribution:"Stamen Design (CC BY 3.0) Data by OpenStreetMap (ODbL)",updateWithMapPosition:!1}),e(i)):"stamen-terrain"==t?(i={version:8,sources:{"stamen-terrain-tiles":{type:"raster",tiles:["https://stamen-tiles-a.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png","https://stamen-tiles-b.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png","https://stamen-tiles-c.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png","https://stamen-tiles-d.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"stamen-terrain-tiles",type:"raster",source:"stamen-terrain-tiles",minzoom:0,maxzoom:22}]},this.setState({attribution:"Stamen Design (CC BY 3.0) Data by OpenStreetMap (ODbL)",updateWithMapPosition:!1}),e(i)):"stamen-watercolor"==t?(i={version:8,sources:{"stamen-watercolor-tiles":{type:"raster",tiles:["https://stamen-tiles-a.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png","https://stamen-tiles-b.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png","https://stamen-tiles-c.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png","https://stamen-tiles-d.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"stamen-watercolor-tiles",type:"raster",source:"stamen-watercolor-tiles",minzoom:0,maxzoom:22}]},this.setState({attribution:" Stamen Design (CC BY 3.0) Data by OpenStreetMap (CC BY SA)",updateWithMapPosition:!1}),e(i)):"landsat-2016"==t?(i={version:8,sources:{"landsat-2016":{type:"raster",tiles:["https://mapforenvironment.org/raster/congo-landsat-2016/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"landsat-2016",type:"raster",source:"landsat-2016",minzoom:3,maxzoom:12}]},this.setState({attribution:" Landsat 7",updateWithMapPosition:!1}),e(i)):"landsat-2014"==t?(i={version:8,sources:{"landsat-2014":{type:"raster",tiles:["https://mapforenvironment.org/raster/congo-landsat-2014/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"landsat-2014",type:"raster",source:"landsat-2014",minzoom:3,maxzoom:12}]},this.setState({attribution:" Landsat 7",updateWithMapPosition:!1}),e(i)):"bing-satellite"==t&&(i={version:8,sources:{"bing-tiles":{type:"raster",tiles:["https://ecn.t0.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=5522&mkt=en-us","https://ecn.t1.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=5522&mkt=en-us","https://ecn.t2.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=5522&mkt=en-us","https://ecn.t3.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=5522&mkt=en-us"],tileSize:256}},layers:[{id:"bing-tiles",type:"raster",source:"bing-tiles",minzoom:0,maxzoom:22}]},this.getBingSource("Aerial",function(){r.setState({attribution:"© Bing Maps",bingImagerySet:"Aerial",updateWithMapPosition:!0}),e(i)}));if(n){var a="mapbox://styles/mapbox/"+n;o&&(a+="?optimize=true"),this.setState({attribution:"© Mapbox © OpenStreetMap",updateWithMapPosition:!1}),e(a)}}})},function(t,e,n){var i=n(651).polygon;t.exports=function(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]],o=[t[2],t[1]];return i([[e,o,r,n,e]])}},function(t,e){function n(t,e){if(!t)throw new Error("No geometry passed");return{type:"Feature",properties:e||{},geometry:t}}t.exports.feature=n,t.exports.point=function(t,e){if(!t)throw new Error("No coordinates passed");if(void 0===t.length)throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");if("number"!=typeof t[0]||"number"!=typeof t[1])throw new Error("Coordinates must numbers");return n({type:"Point",coordinates:t},e)},t.exports.polygon=function(t,e){if(!t)throw new Error("No coordinates passed");for(var i=0;i<t.length;i++){var r=t[i];if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<r[r.length-1].length;o++)if(r[r.length-1][o]!==r[0][o])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e)},t.exports.lineString=function(t,e){if(!t)throw new Error("No coordinates passed");return n({type:"LineString",coordinates:t},e)},t.exports.featureCollection=function(t){if(!t)throw new Error("No features passed");return{type:"FeatureCollection",features:t}},t.exports.multiLineString=function(t,e){if(!t)throw new Error("No coordinates passed");return n({type:"MultiLineString",coordinates:t},e)},t.exports.multiPoint=function(t,e){if(!t)throw new Error("No coordinates passed");return n({type:"MultiPoint",coordinates:t},e)},t.exports.multiPolygon=function(t,e){if(!t)throw new Error("No coordinates passed");return n({type:"MultiPolygon",coordinates:t},e)},t.exports.geometryCollection=function(t,e){if(!t)throw new Error("No geometries passed");return n({type:"GeometryCollection",geometries:t},e)};var i={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373,feet:20908792.65};t.exports.radiansToDistance=function(t,e){var n=i[e||"kilometers"];if(void 0===n)throw new Error("Invalid unit");return t*n},t.exports.distanceToRadians=function(t,e){var n=i[e||"kilometers"];if(void 0===n)throw new Error("Invalid unit");return t/n},t.exports.distanceToDegrees=function(t,e){var n=i[e||"kilometers"];if(void 0===n)throw new Error("Invalid unit");return t/n*57.2958}},function(t,e,n){var i=n(653);t.exports=function(t,e){var n,r;n="Feature"===t.type?t.geometry:t,r="Feature"===e.type?e.geometry:e;var o=new i.io.GeoJSONReader,a=o.read(JSON.stringify(n)),s=o.read(JSON.stringify(r)),u=a.intersection(s);if(!u.isEmpty()){var l=new i.io.GeoJSONWriter,c=l.write(u);return{type:"Feature",properties:{},geometry:c}}}},function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function n(){}function i(){}function r(){}function o(){}function a(){}function s(){}function u(){}function l(t){this.name="RuntimeException",this.message=t,this.stack=(new Error).stack,Error.call(this,t)}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function h(){if(0===arguments.length)l.call(this);else if(1===arguments.length){var t=arguments[0];l.call(this,t)}}function f(){}function p(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)p.call(this,0,0);else if(1===arguments.length){var t=arguments[0];p.call(this,t.x,t.y,t.z)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];p.call(this,e,n,p.NULL_ORDINATE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.x=i,this.y=r,this.z=o}}function d(){if(this.dimensionsToTest=2,0===arguments.length)d.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new i("only 2 or 3 dimensions may be specified");this.dimensionsToTest=t}}function g(){}function m(){}function y(t){this.message=t||""}function v(){}function b(t){this.message=t||""}function _(t){this.message=t||""}function x(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function w(){if(x.apply(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}function E(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof p){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof E){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.init(r,o,a,s)}}function S(){}function M(){S.call(this,"Projective point not representable on the Cartesian plane.")}function T(){}function C(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1}function I(){}function N(t){this.str=t}function P(t){this.value=t}function L(){}function A(){if(this.hi=0,this.lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof A){var e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){var n=arguments[0];A.call(this,A.parse(n))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}}function k(){}function R(){}function O(){}function D(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof D&&arguments[1]instanceof D){var i=arguments[0],r=arguments[1];this.x=i.y*r.w-r.y*i.w,this.y=r.x*i.w-i.x*r.w,this.w=i.x*r.y-r.x*i.y}else if(arguments[0]instanceof p&&arguments[1]instanceof p){var o=arguments[0],a=arguments[1];this.x=o.y-a.y,this.y=a.x-o.x,this.w=o.x*a.y-a.x*o.y}}else if(3===arguments.length){var s=arguments[0],u=arguments[1],l=arguments[2];this.x=s,this.y=u,this.w=l}else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],d=arguments[3],g=c.y-h.y,m=h.x-c.x,y=c.x*h.y-h.x*c.y,v=f.y-d.y,b=d.x-f.x,_=f.x*d.y-d.x*f.y;this.x=m*_-b*y,this.y=v*y-g*_,this.w=g*b-v*m}}function F(){}function z(){}function j(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function B(){}function G(){}function U(){}function V(){}function K(){}function H(){}function q(){}function X(){}function W(){}function Y(){}function J(){}function $(){}function Z(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function Q(t){return null==t?ta:t.color}function tt(t){return null==t?null:t.parent}function et(t,e){null!==t&&(t.color=e)}function nt(t){return null==t?null:t.left}function it(t){return null==t?null:t.right}function rt(){this.root_=null,this.size_=0}function ot(){}function at(){}function st(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function ut(){}function lt(){}function ct(){}function ht(){}function ft(){this.geometries=null;var t=arguments[0],e=arguments[1];if(j.call(this,e),null===t&&(t=[]),j.hasNullElements(t))throw new i("geometries must not contain null elements");this.geometries=t}function pt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function dt(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,1===arguments.length){var t=arguments[0];dt.call(this,t,G.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n}}function gt(){this.count=null}function mt(){}function yt(){}function vt(){}function bt(){}function _t(){}function xt(){}function wt(){}function Et(){}function St(){this.points=null;var t=arguments[0],e=arguments[1];j.call(this,e),this.init(t)}function Mt(){}function Tt(){this.coordinates=null;var t=arguments[0],e=arguments[1];j.call(this,e),this.init(t)}function Ct(){}function It(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(j.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),j.hasNullElements(e))throw new i("holes must not contain null elements");if(t.isEmpty()&&j.hasNonEmptyElements(e))throw new i("shell is empty but holes are not");this.shell=t,this.holes=e}function Nt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function Pt(){if(arguments[0]instanceof p&&arguments[1]instanceof ie){var t=arguments[0],e=arguments[1];Pt.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(C(arguments[0],R)&&arguments[1]instanceof ie){var n=arguments[0],i=arguments[1];St.call(this,n,i),this.validateConstruction()}}function Lt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function At(){if(this.factory=null,this.isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.factory=t}}function kt(){}function Rt(){}function Ot(){}function Dt(){}function Ft(){if(this.dimension=3,this.coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];Ft.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this.coordinates[n]=new p}else if(C(arguments[0],R)){var i=arguments[0];if(null===i)return this.coordinates=new Array(0).fill(null),null;this.dimension=i.getDimension(),this.coordinates=new Array(i.size()).fill(null);for(var n=0;n<this.coordinates.length;n++)this.coordinates[n]=i.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this.coordinates=r,this.dimension=o,null===r&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this.coordinates=new Array(a).fill(null),this.dimension=s;for(var n=0;n<a;n++)this.coordinates[n]=new p}}function zt(){}function jt(t,e){return t===e||t!==t&&e!==e}function Bt(t,e){function n(t){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(t&&Gt.call(this,t))):new n(t)}return e||ra(t,"size",{get:Zt}),t.constructor=n,n.prototype=t,n}function Gt(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}function Ut(t){return this.has(t)&&(this._keys.splice(ia,1),this._values.splice(ia,1),this._itp.forEach(function(t){ia<t[0]&&t[0]--})),ia>-1}function Vt(t){return this.has(t)?this._values[ia]:void 0}function Kt(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||0===e)for(ia=t.length;ia--&&!jt(t[ia],e););else ia=t.indexOf(e);return ia>-1}function Ht(t){return Kt.call(this,this._keys,t)}function qt(t,e){return this.has(t)?this._values[ia]=e:this._values[this._keys.push(t)-1]=e,this}function Xt(){(this._keys||0).length=this._values.length=0}function Wt(){return $t(this._itp,this._keys)}function Yt(){return $t(this._itp,this._values)}function Jt(){return $t(this._itp,this._keys,this._values)}function $t(t,e,n){var i=[0],r=!1;return t.push(i),{next:function(){var o,a=i[0];return!r&&a<e.length?(o=n?[e[a],n[a]]:e[a],i[0]++):(r=!0,t.splice(t.indexOf(i),1)),{done:r,value:o}}}}function Zt(){return this._values.length}function Qt(t,e){for(var n=this.entries();;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this)}}function te(){this.map_=new aa}function ee(){if(this.modelType=null,this.scale=null,0===arguments.length)this.modelType=ee.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ne){var t=arguments[0];this.modelType=t,t===ee.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this.modelType=ee.FIXED,this.setScale(e)}else if(arguments[0]instanceof ee){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale}}function ne(){this.name=null;var t=arguments[0];this.name=t,ne.nameToTypeMap.put(t,this)}function ie(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,0===arguments.length)ie.call(this,new ee,0);else if(1===arguments.length){if(C(arguments[0],F)){var t=arguments[0];ie.call(this,new ee,0,t)}else if(arguments[0]instanceof ee){var e=arguments[0];ie.call(this,e,0,ie.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];ie.call(this,n,i,ie.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this.precisionModel=r,this.coordinateSequenceFactory=a,this.SRID=o}}function re(t){this.geometryFactory=t||new ie}function oe(t){this.parser=new re(t)}function ae(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new p,this.intPt[1]=new p,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function se(){ae.apply(this)}function ue(){}function le(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function ce(){}function he(){if(this.p0=null,this.p1=null,0===arguments.length)he.call(this,new p,new p);else if(1===arguments.length){var t=arguments[0];he.call(this,t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3];he.call(this,new p(i,r),new p(o,a))}}function fe(){if(this.matrix=null,0===arguments.length)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(lt.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];fe.call(this),this.set(t)}else if(arguments[0]instanceof fe){var e=arguments[0];fe.call(this),this.matrix[T.INTERIOR][T.INTERIOR]=e.matrix[T.INTERIOR][T.INTERIOR],this.matrix[T.INTERIOR][T.BOUNDARY]=e.matrix[T.INTERIOR][T.BOUNDARY],this.matrix[T.INTERIOR][T.EXTERIOR]=e.matrix[T.INTERIOR][T.EXTERIOR],this.matrix[T.BOUNDARY][T.INTERIOR]=e.matrix[T.BOUNDARY][T.INTERIOR],this.matrix[T.BOUNDARY][T.BOUNDARY]=e.matrix[T.BOUNDARY][T.BOUNDARY],this.matrix[T.BOUNDARY][T.EXTERIOR]=e.matrix[T.BOUNDARY][T.EXTERIOR],this.matrix[T.EXTERIOR][T.INTERIOR]=e.matrix[T.EXTERIOR][T.INTERIOR],this.matrix[T.EXTERIOR][T.BOUNDARY]=e.matrix[T.EXTERIOR][T.BOUNDARY],this.matrix[T.EXTERIOR][T.EXTERIOR]=e.matrix[T.EXTERIOR][T.EXTERIOR]}}function pe(){this.areaBasePt=null,this.triangleCent3=new p,this.areasum2=0,this.cg3=new p,this.lineCentSum=new p,this.totalLength=0,this.ptCount=0,this.ptCentSum=new p;var t=arguments[0];this.areaBasePt=null,this.add(t)}function de(t){this.message=t||""}function ge(){this.array_=[]}function me(){this.treeSet=new st,this.list=new x}function ye(){if(this.geomFactory=null,this.inputPts=null,1===arguments.length){var t=arguments[0];ye.call(this,ye.extractCoordinates(t),t.getFactory())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputPts=me.filterCoordinates(e),this.geomFactory=n}}function ve(){this.origin=null;var t=arguments[0];this.origin=t}function be(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function _e(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new he,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof St&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];_e.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.srcPts=n,this._isClosed=_e.isClosed(n),this.snapTolerance=i}}function xe(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function we(){if(be.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.snapTolerance=n,this.snapPts=i,this.isSelfSnap=r}}function Ee(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function Se(){this.commonCoord=null,this.ccFilter=new Me}function Me(){this.commonBitsX=new Ee,this.commonBitsY=new Ee}function Te(){this.trans=null;var t=arguments[0];this.trans=t}function Ce(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function Ie(){if(this.boundaryRule=G.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new i("Rule must be non-null");
this.boundaryRule=t}}function Ne(){}function Pe(){}function Le(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Ae(){}function ke(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function Re(){this._size=null,this.items=null,this._size=0,this.items=new x,this.items.add(null)}function Oe(){}function De(){}function Fe(){if(this.childBoundables=new x,this.bounds=null,this.level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.level=t}}function ze(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function je(){if(this.root=null,this.built=!1,this.itemBoundables=new x,this.nodeCapacity=null,0===arguments.length)je.call(this,je.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];f.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function Be(){}function Ge(){}function Ue(){if(0===arguments.length)Ue.call(this,Ue.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];je.call(this,t)}}function Ve(){var t=arguments[0];Fe.call(this,t)}function Ke(){}function He(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.segString=t,this.coord=new p(e),this.segmentIndex=n,this.segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}function qe(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function Xe(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function We(){}function Ye(){this.nodeList=new qe(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Je(){this.tempEnv1=new E,this.tempEnv2=new E,this.overlapSeg1=new he,this.overlapSeg2=new he}function $e(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=i}function Ze(){}function Qe(){}function tn(){}function en(){if(this.segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}function nn(){if(this.monoChains=new x,this.index=new Ue,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];en.call(this,t)}}function rn(){Je.apply(this),this.si=null;var t=arguments[0];this.si=t}function on(){if(this.pt=null,1===arguments.length){var t=arguments[0];l.call(this,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];l.call(this,on.msgWithCoord(e,n)),this.name="TopologyException",this.pt=new p(n)}}function an(){}function sn(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new x,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function un(){this.li=new se,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function ln(){this.nv=null;var t=arguments[0];this.nv=new un(ln.toSegmentStrings(t))}function cn(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function hn(){}function fn(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[hn.ON]=e}else if(arguments[0]instanceof fn){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this.init(3),this.location[hn.ON]=r,this.location[hn.LEFT]=o,this.location[hn.RIGHT]=a}}function pn(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new fn(t),this.elt[1]=new fn(t)}else if(arguments[0]instanceof pn){var e=arguments[0];this.elt[0]=new fn(e.elt[0]),this.elt[1]=new fn(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new fn(T.NONE),this.elt[1]=new fn(T.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this.elt[0]=new fn(r,o,a),this.elt[1]=new fn(r,o,a)}else if(4===arguments.length){var s=arguments[0],u=arguments[1],l=arguments[2],c=arguments[3];this.elt[0]=new fn(T.NONE,T.NONE,T.NONE),this.elt[1]=new fn(T.NONE,T.NONE,T.NONE),this.elt[s].setLocations(u,l,c)}}function dn(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new x,this.pts=new x,this.label=new pn(T.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new x,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function gn(){var t=arguments[0],e=arguments[1];dn.call(this,t,e)}function mn(){var t=arguments[0],e=arguments[1];dn.call(this,t,e)}function yn(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.label=t}}function vn(){yn.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new pn(0,T.NONE)}function bn(){this.nodeMap=new rt,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function _n(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,1===arguments.length){var t=arguments[0];this.edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];_n.call(this,e,n,i,null)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];_n.call(this,r),this.init(o,a),this.label=s}}function xn(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(_n.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function wn(){}function En(){if(this.edges=new x,this.nodes=null,this.edgeEndList=new x,0===arguments.length)this.nodes=new bn(new wn);else if(1===arguments.length){var t=arguments[0];this.nodes=new bn(t)}}function Sn(){this.geometryFactory=null,this.shellList=new x;var t=arguments[0];this.geometryFactory=t}function Mn(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new x,this.resultLineList=new x;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function Tn(){this.op=null,this.geometryFactory=null,this.resultPointList=new x;var t=arguments[0],e=arguments[1];arguments[2],this.op=t,this.geometryFactory=e}function Cn(){}function In(){this.geom=null;var t=arguments[0];this.geom=t}function Nn(){this.edgeMap=new rt,this.edgeList=null,this.ptInAreaLocation=[T.NONE,T.NONE]}function Pn(){Nn.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function Ln(){wn.apply(this)}function An(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function kn(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.eventType=kn.DELETE,this.xValue=t,this.insertEvent=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.eventType=kn.INSERT,this.label=n,this.xValue=i,this.obj=r}}function Rn(){}function On(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function Dn(){Rn.apply(this),this.events=new x,this.nOverlaps=null}function Fn(){this.min=r.POSITIVE_INFINITY,this.max=r.NEGATIVE_INFINITY}function zn(){}function jn(){Fn.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function Bn(){Fn.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function Gn(){this.leaves=new x,this.root=null,this.level=0}function Un(){if(this.lines=null,this.isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this.lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n}}function Vn(){this.items=new x}function Kn(){this.index=null;var t=arguments[0];if(!C(t,Ct))throw new i("Argument must be Polygonal");this.index=new qn(t)}function Hn(){this.counter=null;var t=arguments[0];this.counter=t}function qn(){this.index=new Gn;var t=arguments[0];this.init(t)}function Xn(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new p(t),this.segmentIndex=e,this.dist=n}function Wn(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function Yn(){}function Jn(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new E,this.env2=new E;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Yn;this.startIndex=e.getChainStartIndices(this.pts)}function $n(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this.depth[t][e]=$n.NULL_VALUE}function Zn(){if(yn.apply(this),this.pts=null,this.env=null,this.eiList=new Wn(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new $n,this.depthDelta=0,1===arguments.length){var t=arguments[0];Zn.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n}}function Qn(){if(En.apply(this),this.parentGeom=null,this.lineEdgeMap=new te,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new Ie,2===arguments.length){var t=arguments[0],e=arguments[1];Qn.call(this,t,e,G.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.argIndex=n,this.parentGeom=i,this.boundaryNodeRule=r,null!==i&&this.add(i)}}function ti(){if(this.li=new se,this.resultPrecisionModel=null,this.arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new Qn(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];ti.call(this,e,n,G.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];i.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new Qn(0,i,o),this.arg[1]=new Qn(1,r,o)}}function ei(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=ei.orientation(t)}function ni(){this.edges=new x,this.ocaMap=new rt}function ii(){this.ptLocator=new Ie,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new ni,this.resultPolyList=new x,this.resultLineList=new x,this.resultPointList=new x;var t=arguments[0],e=arguments[1];ti.call(this,t,e),this.graph=new En(new Ln),this.geomFact=t.getFactory()}function ri(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function oi(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function ai(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function si(){this.poly=null,this.centreY=null,this.hiY=r.MAX_VALUE,this.loY=-r.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=ai.avg(this.loY,this.hiY)}function ui(){this.centroid=null,this.minDistance=r.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null===this.interiorPoint&&this.addEndpoints(t)}function li(){this.centroid=null,this.minDistance=r.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function ci(){this.tempEnv1=new E,this.selectedSegment=new he}function hi(){this.items=new x,this.subnode=[null,null]}function fi(){if(this.min=null,this.max=null,0===arguments.length)this.min=0,this.max=0;else if(1===arguments.length){var t=arguments[0];this.init(t.min,t.max)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.init(e,n)}}function pi(){}function di(t,e){var n,i,r,o,a={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},s={32:8,64:11}[t];if(o||(n=e<0||1/e<0,isFinite(e)||(o=a[t],n&&(o.d+=1<<t/4-1),i=Math.pow(2,s)-1,r=0)),!o){for(i={32:127,64:1023}[t],r=Math.abs(e);r>=2;)i++,r/=2;for(;r<1&&i>0;)i--,r*=2;i<=0&&(r/=2),32===t&&i>254&&(o={d:n?255:127,c:128,b:0,a:0},i=Math.pow(2,s)-1,r=0)}return i}function gi(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function mi(){hi.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function yi(){}function vi(){hi.apply(this)}function bi(){this.root=null,this.minExtent=1,this.root=new vi}function _i(){}function xi(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new fi;var t=arguments[0];this.ring=t,this.buildIndex()}function wi(){ci.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function Ei(){}function Si(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function Mi(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function Ti(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new he,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,1===arguments.length){var t=arguments[0];Ti.call(this,t,!1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isConvex=n}}function Ci(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function Ii(){be.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function Ni(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function Pi(){this._isMarked=!1;var t=arguments[0];Ni.call(this,t)}function Li(){this.vertexMap=new te}function Ai(){this._isStart=!1;var t=arguments[0];Pi.call(this,t)}function ki(){Li.apply(this)}function Ri(){this.result=null,this.factory=null,this.graph=null,this.lines=new x,this.nodeEdgeStack=new ge,this.ringStartEdge=null,this.graph=new ki}function Oi(){this.items=new x,this.subnode=new Array(4).fill(null)}function Di(){this.pt=new p,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function Fi(){Oi.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function zi(){Oi.apply(this)}function ji(){this.root=null,this.minExtent=1,this.root=new zi}function Bi(t){this.geometryFactory=t||new ie}function Gi(t){this.geometryFactory=t||new ie,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Bi(this.geometryFactory)}function Ui(){this.parser=new Bi(this.geometryFactory)}function Vi(t){this.geometryFactory=t||new ie,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new re(this.geometryFactory)}function Ki(t){return[t.x,t.y]}function Hi(t,e){this.geometryFactory=t||new ie,this.ol=e||"undefined"!=typeof ol&&ol}function qi(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];qi.call(this,t,e,0,0)}else if(4===arguments.length){var n=arguments[0],i=arguments[1];arguments[2],arguments[3],this.noder=n,this.scaleFactor=i,this.isScaled=!this.isIntegerPrecision()}}function Xi(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,1===arguments.length){var t=arguments[0];this.inputGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2)}}function Wi(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function Yi(){if(this.quadrantSegments=Yi.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=Yi.CAP_ROUND,this.joinStyle=Yi.JOIN_ROUND,this.mitreLimit=Yi.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=Yi.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(r),this.setJoinStyle(o),this.setMitreLimit(a)}}function Ji(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function $i(){this.array_=[]}function Zi(){this.finder=null,this.dirEdgeList=new x,this.nodes=new x,this.rightMostCoord=null,this.env=null,this.finder=new Ji}function Qi(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=ce.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function tr(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new x}function er(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new he,this.seg1=new he,this.offset0=new he,this.offset1=new he,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new se,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Yi.JOIN_ROUND&&(this.closingSegLengthFactor=er.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function nr(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function ir(){this.subgraphs=null,this.seg=new he,this.cga=new ce;var t=arguments[0];this.subgraphs=t}function rr(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new he(t),this.leftDepth=e}function or(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new x;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function ar(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function sr(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new ni;var t=arguments[0];this.bufParams=t}function ur(){this.li=new se,this.segStrings=null;var t=arguments[0];this.segStrings=t}function lr(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,e<=0)throw new i("Scale factor must be non-zero");1!==e&&(this.pt=new p(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new p,this.p1Scaled=new p),this.initCorners(this.pt)}function cr(){this.index=null;var t=arguments[0];this.index=t}function hr(){ci.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function fr(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new x}function pr(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new se,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function dr(){if(this.argGeom=null,this.distance=null,this.bufParams=new Yi,this.resultGeometry=null,this.saveException=null,1===arguments.length){var t=arguments[0];this.argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n}}function gr(){this.comps=null;var t=arguments[0];this.comps=t}function mr(){if(this.component=null,this.segIndex=null,this.pt=null,2===arguments.length){var t=arguments[0],e=arguments[1];mr.call(this,t,mr.INSIDE_AREA,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.component=n,this.segIndex=i,this.pt=r}}function yr(){this.pts=null;var t=arguments[0];this.pts=t}function vr(){this.locations=null;var t=arguments[0];this.locations=t}function br(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new Ie,this.minDistanceLocation=null,this.minDistance=r.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];br.call(this,t,e,0)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=i,this.terminateDistance=o}}function _r(){this.factory=null,this.directedEdges=new x,this.coordinates=null;var t=arguments[0];this.factory=t}function xr(){this._isMarked=!1,this._isVisited=!1,this.data=null}function wr(){xr.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.from=t,this.to=e,this.edgeDirection=i,this.p0=t.getCoordinate(),this.p1=n;var r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y;this.quadrant=Ze.quadrant(r,o),this.angle=Math.atan2(o,r)}function Er(){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];wr.call(this,t,e,n,i)}function Sr(){if(xr.apply(this),this.dirEdge=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}function Mr(){this.outEdges=new x,this.sorted=!1}function Tr(){if(xr.apply(this),this.pt=null,this.deStar=null,1===arguments.length){var t=arguments[0];Tr.call(this,t,new Mr)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pt=e,this.deStar=n}}function Cr(){Sr.apply(this),this.line=null;var t=arguments[0];this.line=t}function Ir(){this.nodeMap=new rt}function Nr(){this.edges=new Z,this.dirEdges=new Z,this.nodeMap=new Ir}function Pr(){Nr.apply(this)}function Lr(){this.graph=new Pr,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function Ar(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];wr.call(this,t,e,n,i)}function kr(){Sr.apply(this),this.line=null;var t=arguments[0];this.line=t}function Rr(){this.geometryFactory=new ie,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function Or(){}function Dr(){if(this.edgeEnds=new x,1===arguments.length){var t=arguments[0];Dr.call(this,null,t)}else if(2===arguments.length){var e=(arguments[0],arguments[1]);_n.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new pn(e.getLabel())),this.insert(e)}}function Fr(){Nn.apply(this)}function zr(){var t=arguments[0],e=arguments[1];vn.call(this,t,e)}function jr(){wn.apply(this)}function Br(){this.nodes=new bn(new jr)}function Gr(){this.li=new se,this.geomGraph=null,this.nodeGraph=new Br,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function Ur(){this.graph=null,this.rings=new x,this.totalEnv=new E,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function Vr(){if(this.errorType=null,this.pt=null,1===arguments.length){var t=arguments[0];Vr.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.errorType=e,null!==n&&(this.pt=n.copy())}}function Kr(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function Hr(){this.factory=null,this.deList=new x,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function qr(){}function Xr(){Nr.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function Wr(){if(this.lineStringAdder=new Yr(this),this.graph=null,this.dangles=new x,this.cutEdges=new x,this.invalidRingLines=new x,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,0===arguments.length)Wr.call(this,!1);else if(1===arguments.length){var t=arguments[0];this.extractOnlyPolygonal=t}}function Yr(){this.p=null;var t=arguments[0];this.p=t}function Jr(){this.li=new se,this.ptLocator=new Ie,this.arg=null,this.nodes=new bn(new jr),this.im=null,this.isolatedEdges=new x,this.invalidPoint=null;var t=arguments[0];this.arg=t}function $r(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function Zr(){this.li=new se,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new p(t.getMinX(),t.getMinY()),this.diagUp1=new p(t.getMaxX(),t.getMaxY()),this.diagDown0=new p(t.getMinX(),t.getMaxY()),this.diagDown1=new p(t.getMaxX(),t.getMinY())}function Qr(){this._isDone=!1}function to(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function eo(){Qr.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function no(){Qr.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function io(){Qr.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new p,this.p1=new p;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new Zr(this.rectEnv)}function ro(){if(this._relate=null,2===arguments.length){var t=arguments[0],e=arguments[1];ti.call(this,t,e),this._relate=new Jr(this.arg)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];ti.call(this,n,i,r),this._relate=new Jr(this.arg)}}function oo(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=oo.extractFactory(t),this.inputGeoms=t}function ao(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function so(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function uo(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,null===this.inputPolys&&(this.inputPolys=new x)}function lo(){if(this.polygons=new x,this.lines=new x,this.points=new x,this.geomFact=null,1===arguments.length){if(C(arguments[0],m)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof j){var e=arguments[0];this.extract(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.geomFact=i,this.extract(n)}}function co(){At.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function ho(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function fo(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new he;var t=arguments[0];this.pts=t}function po(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function go(){be.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function mo(){if(this.parent=null,this.index=null,2===arguments.length){var t=arguments[0],e=arguments[1];mo.call(this,t,e,null,-1)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];he.call(this,n,i),this.parent=r,this.index=o}}function yo(){if(this.parentLine=null,this.segs=null,this.resultSegs=new x,this.minimumSize=null,1===arguments.length){var t=arguments[0];yo.call(this,t,2)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.parentLine=e,this.minimumSize=n,this.init()}}function vo(){this.index=new ji}function bo(){this.querySeg=null,this.items=new x;var t=arguments[0];this.querySeg=t}function _o(){this.li=new se,this.inputIndex=new vo,this.outputIndex=new vo,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function xo(){this.inputIndex=new vo,this.outputIndex=new vo,this.distanceTolerance=0}function wo(){this.inputGeom=null,this.lineSimplifier=new xo,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function Eo(){be.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function So(){this.tps=null;var t=arguments[0];this.tps=t}function Mo(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function To(){}function Co(){}function Io(){}function No(){if(this.p=null,1===arguments.length){var t=arguments[0];this.p=new p(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p=new p(e,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.p=new p(i,r,o)}}function Po(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];No.call(this,t)}function Lo(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function Ao(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0}function ko(){}function Ro(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function Oo(){if(this.seg=null,1===arguments.length){if("string"==typeof arguments[0]){var t=arguments[0];l.call(this,t);
}else if(arguments[0]instanceof he){var e=arguments[0];l.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new he(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];l.call(this,Oo.msgWithSpatial(n,i)),this.seg=new he(i)}}function Do(){}function Fo(){this.visitedKey=0,this.quadEdges=new x,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new he,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/Fo.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new Ro(this)}function zo(){}function jo(){this.triList=new x}function Bo(){this.triList=new x}function Go(){this.coordList=new w,this.triCoords=new x}function Uo(){if(this.ls=null,this.data=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.ls=new he(t,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.ls=new he(n,i),this.data=r}else if(6===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3],l=arguments[4],c=arguments[5];Uo.call(this,new p(o,a,s),new p(u,l,c))}else if(7===arguments.length){var h=arguments[0],f=arguments[1],d=arguments[2],g=arguments[3],m=arguments[4],y=arguments[5],v=arguments[6];Uo.call(this,new p(h,f,d),new p(g,m,y),v)}}function Vo(){}function Ko(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.p=new p(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.p=new p(n,i),this.left=null,this.right=null,this.count=1,this.data=r}}function Ho(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,0===arguments.length)Ho.call(this,0);else if(1===arguments.length){var t=arguments[0];this.tolerance=t}}function qo(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function Xo(){this.initialVertices=null,this.segVertices=null,this.segments=new x,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new Co,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new x(t),this.tolerance=e,this.kdt=new Ho(e)}function Wo(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Yo(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new rt}function Jo(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function $o(){}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments?parseInt(Number(arguments[1]),10)||0:0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)},e(n.prototype,{interfaces_:function(){return[]},getClass:function(){return n}}),n.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},r.isNaN=function(t){return Number.isNaN(t)},r.doubleToLongBits=function(t){return t},r.longBitsToDouble=function(t){return t},r.isInfinite=function(t){return!Number.isFinite(t)},r.MAX_VALUE=Number.MAX_VALUE,l.prototype=Object.create(Error.prototype),l.prototype.constructor=Error,c(h,l),e(h.prototype,{interfaces_:function(){return[]},getClass:function(){return h}}),e(f.prototype,{interfaces_:function(){return[]},getClass:function(){return f}}),f.shouldNeverReachHere=function(){if(0===arguments.length)f.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new h("Should never reach here"+(null!==t?": "+t:""))}},f.isTrue=function(){if(1===arguments.length){var t=arguments[0];f.isTrue(t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!e)throw null===n?new h:new h(n)}},f.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];f.equals(t,e,null)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(!i.equals(n))throw new h("Expected "+n+" but encountered "+i+(null!==r?": "+r:""))}},e(p.prototype,{setOrdinate:function(t,e){switch(t){case p.X:this.x=e;break;case p.Y:this.y=e;break;case p.Z:this.z=e;break;default:throw new i("Invalid ordinate index: "+t)}},equals2D:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!n.equalsWithTolerance(this.x,e.x,i)&&!!n.equalsWithTolerance(this.y,e.y,i)}},getOrdinate:function(t){switch(t){case p.X:return this.x;case p.Y:return this.y;case p.Z:return this.z}throw new i("Invalid ordinate index: "+t)},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||r.isNaN(this.z)&&r.isNaN(t.z))},equals:function(t){return t instanceof p&&this.equals2D(t)},equalInZ:function(t,e){return n.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{var t=null;return t}catch(t){if(t instanceof CloneNotSupportedException)return f.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}finally{}},copy:function(){return new p(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+p.hashCode(this.x),t=37*t+p.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[o,a,u]},getClass:function(){return p}}),p.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=r.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},e(d.prototype,{compare:function(t,e){var n=t,i=e,r=d.compare(n.x,i.x);if(0!==r)return r;var o=d.compare(n.y,i.y);if(0!==o)return o;if(this.dimensionsToTest<=2)return 0;var a=d.compare(n.z,i.z);return a},interfaces_:function(){return[s]},getClass:function(){return d}}),d.compare=function(t,e){return t<e?-1:t>e?1:r.isNaN(t)?r.isNaN(e)?0:-1:r.isNaN(e)?1:0},p.DimensionalComparator=d,p.serialVersionUID=0x5cbf2c235c7e5800,p.NULL_ORDINATE=r.NaN,p.X=0,p.Y=1,p.Z=2,g.prototype.hasNext=function(){},g.prototype.next=function(){},g.prototype.remove=function(){},m.prototype.add=function(){},m.prototype.addAll=function(){},m.prototype.isEmpty=function(){},m.prototype.iterator=function(){},m.prototype.size=function(){},m.prototype.toArray=function(){},m.prototype.remove=function(){},y.prototype=new Error,y.prototype.name="IndexOutOfBoundsException",v.prototype=Object.create(m.prototype),v.prototype.constructor=v,v.prototype.get=function(){},v.prototype.set=function(){},v.prototype.isEmpty=function(){},b.prototype=new Error,b.prototype.name="NoSuchElementException",_.prototype=new Error,_.prototype.name="OperationNotSupported",x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.prototype.ensureCapacity=function(){},x.prototype.interfaces_=function(){return[v,m]},x.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},x.prototype.clear=function(){this.array_=[]},x.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},x.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},x.prototype.iterator=function(){return new Zo(this)},x.prototype.get=function(t){if(t<0||t>=this.size())throw new y;return this.array_[t]},x.prototype.isEmpty=function(){return 0===this.array_.length},x.prototype.size=function(){return this.array_.length},x.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},x.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var Zo=function(t){this.arrayList_=t,this.position_=0};Zo.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new b;return this.arrayList_.get(this.position_++)},Zo.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Zo.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},Zo.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},c(w,x),e(w.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=!1,i=t.iterator();i.hasNext();)this.add(i.next(),e),n=!0;return n}return x.prototype.addAll.apply(this,arguments)},clone:function t(){for(var t=x.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},toCoordinateArray:function(){return this.toArray(w.coordArrayType)},add:function(){if(1===arguments.length){var t=arguments[0];x.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof p&&"boolean"==typeof arguments[1]){var i=arguments[0],r=arguments[1];if(!r&&this.size()>=1){var o=this.get(this.size()-1);if(o.equals2D(i))return null}x.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var a=arguments[0],s=arguments[1];return this.add(a,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1],c=arguments[2];if(c)for(var h=0;h<u.length;h++)this.add(u[h],l);else for(var h=u.length-1;h>=0;h--)this.add(u[h],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof p){var f=arguments[0],d=arguments[1],g=arguments[2];if(!g){var m=this.size();if(m>0){if(f>0){var y=this.get(f-1);if(y.equals2D(d))return null}if(f<m){var v=this.get(f);if(v.equals2D(d))return null}}}x.prototype.add.call(this,f,d)}}else if(4===arguments.length){var b=arguments[0],_=arguments[1],w=arguments[2],E=arguments[3],S=1;w>E&&(S=-1);for(var h=w;h!==E;h+=S)this.add(b[h],_);return!0}},closeRing:function(){this.size()>0&&this.add(new p(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return w}}),w.coordArrayType=new Array(0).fill(null),e(E.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof E))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new E;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny,i=this.maxx<t.maxx?this.maxx:t.maxx,r=this.maxy<t.maxy?this.maxy:t.maxy;return new E(e,i,n,r)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(1===arguments.length){if(arguments[0]instanceof p){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof E){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this.minx&&n<=this.maxx&&i>=this.miny&&i<=this.maxy}},intersects:function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof p){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this.maxx||n<this.minx||i>this.maxy||i<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(1===arguments.length){if(arguments[0]instanceof p){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof E){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=i,this.maxy=i):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),i<this.miny&&(this.miny=i),i>this.maxy&&(this.maxy=i))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof p){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},centre:function(){return this.isNull()?null:new p((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof p){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof E){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];r<o?(this.minx=r,this.maxx=o):(this.minx=o,this.maxx=r),a<s?(this.miny=a,this.maxy=s):(this.miny=s,this.maxy=a)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+p.hashCode(this.minx),t=37*t+p.hashCode(this.maxx),t=37*t+p.hashCode(this.miny),t=37*t+p.hashCode(this.maxy)},interfaces_:function(){return[o,u]},getClass:function(){return E}}),E.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(l>u||c<s||(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(i.y,r.y),c=Math.max(i.y,r.y),l>u||c<s))}},E.serialVersionUID=0x51845cd552189800,c(M,S),e(M.prototype,{interfaces_:function(){return[]},getClass:function(){return M}}),e(T.prototype,{interfaces_:function(){return[]},getClass:function(){return T}}),T.toLocationSymbol=function(t){switch(t){case T.EXTERIOR:return"e";case T.BOUNDARY:return"b";case T.INTERIOR:return"i";case T.NONE:return"-"}throw new i("Unknown location value: "+t)},T.INTERIOR=0,T.BOUNDARY=1,T.EXTERIOR=2,T.NONE=-1,e(I.prototype,{interfaces_:function(){return[]},getClass:function(){return I}}),I.log10=function(t){var e=Math.log(t);return r.isInfinite(e)?e:r.isNaN(e)?e:e/I.LOG_10},I.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},I.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},I.wrap=function(t,e){return t<0?e- -t%e:t%e},I.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],i=r;return o>i&&(i=o),a>i&&(i=a),s>i&&(i=s),i}},I.average=function(t,e){return(t+e)/2},I.LOG_10=Math.log(10),N.prototype.append=function(t){this.str+=t},N.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},N.prototype.toString=function(t){return this.str},P.prototype.intValue=function(){return this.value},P.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},P.isNaN=function(t){return Number.isNaN(t)},L.isWhitespace=function(t){return t<=32&&t>=0||127==t},L.toUpperCase=function(t){return t.toUpperCase()},e(A.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),i=A.magnitude(n.hi),r=A.TEN.pow(i);n=n.divide(r),n.gt(A.TEN)?(n=n.divide(A.TEN),i+=1):n.lt(A.ONE)&&(n=n.multiply(A.TEN),i-=1);for(var o=i+1,a=new N,s=A.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var l=Math.trunc(n.hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,a.append(h),n=n.subtract(A.valueOf(l)).multiply(A.TEN),c&&n.selfAdd(A.TEN);var f=!0,p=A.magnitude(n.hi);if(p<0&&Math.abs(p)>=s-u&&(f=!1),!f)break}return e[0]=i,a.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof A){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},equals:function(){if(1===arguments.length){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return 0===this.hi&&0===this.lo},selfSubtract:function(){if(arguments[0]instanceof A){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(1===arguments.length){if(arguments[0]instanceof A){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,a=null,s=null,u=null,l=null,c=null,h=null;return u=this.hi/n,l=A.SPLIT*u,r=l-u,h=A.SPLIT*n,r=l-r,o=u-r,a=h-n,c=u*n,a=h-a,s=n-a,h=r*a-c+r*s+o*a+o*s,l=(this.hi-c-h+this.lo-u*i)/n,h=u+l,this.hi=h,this.lo=u-h+l,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof A){var t=arguments[0],e=null,n=null,i=null,o=null,a=null,s=null,u=null,l=null;a=this.hi/t.hi,s=A.SPLIT*a,e=s-a,l=A.SPLIT*t.hi,e=s-e,n=a-e,i=l-t.hi,u=a*t.hi,i=l-i,o=t.hi-i,l=e*i-u+e*o+n*i+n*o,s=(this.hi-u-l+this.lo-a*t.lo)/t.hi,l=a+s;var c=l,h=a-l+s;return new A(c,h)}if("number"==typeof arguments[0]){var f=arguments[0];return r.isNaN(f)?A.createNaN():A.copy(this).selfDivide(f,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(0===t)return A.valueOf(1);var e=new A(this),n=A.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2===1&&n.selfMultiply(e),i/=2,i>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},ceil:function(){if(this.isNaN())return A.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new A(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()},setValue:function(){if(arguments[0]instanceof A){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return A.valueOf(0);if(this.isNegative())return A.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=A.valueOf(e),i=this.subtract(n.sqr()),r=i.hi*(.5*t);return n.add(r)},selfAdd:function(){if(1===arguments.length){if(arguments[0]instanceof A){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,a=null,s=null;return r=this.hi+e,a=r-this.hi,o=r-a,o=e-a+(this.hi-o),s=o+this.lo,n=r+s,i=s+(r-n),this.hi=n+i,this.lo=i+(n-this.hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],n=null,i=null,c=null,h=null,r=null,o=null,a=null,s=null;r=this.hi+u,c=this.lo+l,a=r-this.hi,s=c-this.lo,o=r-a,h=c-s,o=u-a+(this.hi-o),h=l-s+(this.lo-h),a=o+c,n=r+a,i=a+(r-n),a=h+i;var f=n+a,p=a+(n-f);return this.hi=f,this.lo=p,this}},selfMultiply:function(){if(1===arguments.length){if(arguments[0]instanceof A){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,a=null,s=null,u=null,l=null;u=A.SPLIT*this.hi,r=u-this.hi,l=A.SPLIT*n,r=u-r,o=this.hi-r,a=l-n,u=this.hi*n,a=l-a,s=n-a,l=r*a-u+r*s+o*a+o*s+(this.hi*i+this.lo*n);var c=u+l;r=u-c;var h=l+r;return this.hi=c,this.lo=h,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return A.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new A(t,e)},negate:function(){return this.isNaN()?this:new A(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}finally{}},multiply:function(){if(arguments[0]instanceof A){var t=arguments[0];return t.isNaN()?A.createNaN():A.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return r.isNaN(e)?A.createNaN():A.copy(this).selfMultiply(e,0)}},isNaN:function(){return r.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=A.magnitude(this.hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+A.stringOfChar("0",-i)+n;else if(n.indexOf(".")===-1){var o=i-n.length,a=A.stringOfChar("0",o);r=n+a+".0"}return this.isNegative()?"-"+r:r},reciprocal:function(){var t=null,e=null,n=null,i=null,r=null,o=null,a=null,s=null;r=1/this.hi,o=A.SPLIT*r,t=o-r,s=A.SPLIT*this.hi,t=o-t,e=r-t,n=s-this.hi,a=r*this.hi,n=s-n,i=this.hi-n,s=t*n-a+t*i+e*n+e*i,o=(1-a-s-r*this.lo)/this.hi;var u=r+o,l=r-u+o;return new A(u,l)},toSciNotation:function(){if(this.isZero())return A.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=A.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},abs:function(){return this.isNaN()?A.NaN:this.isNegative()?this.negate():new A(this)},isPositive:function(){return this.hi>0||0===this.hi&&this.lo>0},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof A){var t=arguments[0];return A.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return A.copy(this).selfAdd(e)}},init:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof A){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.hi=n,this.lo=i}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||0===this.hi&&this.lo<0},trunc:function(){return this.isNaN()?A.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[u,o,a]},getClass:function(){return A}}),A.sqr=function(t){return A.valueOf(t).selfMultiply(t)},A.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return A.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new A(e)}},A.sqrt=function(t){return A.valueOf(t).sqrt()},A.parse=function(t){for(var e=0,n=t.length;L.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new A,a=0,s=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,L.isDigit(l)){var c=l-"0";o.selfMultiply(A.TEN),o.selfAdd(c),a++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=P.parseInt(h)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+h+" in string "+t):e}finally{}break}throw new NumberFormatException("Unexpected character '"+l+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-u;if(0===p)f=o;else if(p>0){var d=A.TEN.pow(p);f=o.divide(d)}else if(p<0){var d=A.TEN.pow(-p);f=o.multiply(d)}return i?f.negate():f},A.createNaN=function(){return new A(r.NaN,r.NaN)},A.copy=function(t){return new A(t)},A.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n)),r=Math.pow(10,i);return 10*r<=e&&(i+=1),i},A.stringOfChar=function(t,e){for(var n=new N,i=0;i<e;i++)n.append(t);return n.toString()},A.PI=new A(3.141592653589793,1.2246467991473532e-16),A.TWO_PI=new A(6.283185307179586,2.4492935982947064e-16),A.PI_2=new A(1.5707963267948966,6.123233995736766e-17),A.E=new A(2.718281828459045,1.4456468917292502e-16),A.NaN=new A(r.NaN,r.NaN),A.EPS=1.23259516440783e-32,A.SPLIT=134217729,A.MAX_PRINT_DIGITS=32,A.TEN=A.valueOf(10),A.ONE=A.valueOf(1),A.SCI_NOT_EXPONENT_CHAR="E",A.SCI_NOT_ZERO="0.0E0",e(k.prototype,{interfaces_:function(){return[]},getClass:function(){return k}}),k.orientationIndex=function(t,e,n){var i=k.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=A.valueOf(e.x).selfAdd(-t.x),o=A.valueOf(e.y).selfAdd(-t.y),a=A.valueOf(n.x).selfAdd(-e.x),s=A.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},k.signOfDet2x2=function(t,e,n,i){var r=t.multiply(i).selfSubtract(e.multiply(n));return r.signum()},k.intersection=function(t,e,n,i){var r=A.valueOf(i.y).selfSubtract(n.y).selfMultiply(A.valueOf(e.x).selfSubtract(t.x)),o=A.valueOf(i.x).selfSubtract(n.x).selfMultiply(A.valueOf(e.y).selfSubtract(t.y)),a=r.subtract(o),s=A.valueOf(i.x).selfSubtract(n.x).selfMultiply(A.valueOf(t.y).selfSubtract(n.y)),u=A.valueOf(i.y).selfSubtract(n.y).selfMultiply(A.valueOf(t.x).selfSubtract(n.x)),l=s.subtract(u),c=l.selfDivide(a).doubleValue(),h=A.valueOf(t.x).selfAdd(A.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),f=A.valueOf(e.x).selfSubtract(t.x).selfMultiply(A.valueOf(t.y).selfSubtract(n.y)),d=A.valueOf(e.y).selfSubtract(t.y).selfMultiply(A.valueOf(t.x).selfSubtract(n.x)),g=f.subtract(d),m=g.selfDivide(a).doubleValue(),y=A.valueOf(n.y).selfAdd(A.valueOf(i.y).selfSubtract(n.y).selfMultiply(m)).doubleValue();return new p(h,y)},k.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=r-o;if(r>0){if(o<=0)return k.signum(a);i=r+o}else{if(!(r<0))return k.signum(a);if(o>=0)return k.signum(a);i=-r-o}var s=k.DP_SAFE_EPSILON*i;return a>=s||-a>=s?k.signum(a):2},k.signum=function(t){return t>0?1:t<0?-1:0},k.DP_SAFE_EPSILON=1e-15,e(R.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[a]},getClass:function(){return R}}),R.X=0,R.Y=1,R.Z=2,R.M=3,O.arraycopy=function(t,e,n,i,r){for(var o=0,a=e;a<e+r;a++)n[i+o]=t[a],o++},O.getProperty=function(t){return{"line.separator":"\n"}[t]},e(D.prototype,{getY:function(){var t=this.y/this.w;if(r.isNaN(t)||r.isInfinite(t))throw new M;return t},getX:function(){var t=this.x/this.w;if(r.isNaN(t)||r.isInfinite(t))throw new M;return t},getCoordinate:function(){var t=new p;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return D}}),D.intersection=function(t,e,n,i){var o=t.y-e.y,a=e.x-t.x,s=t.x*e.y-e.x*t.y,u=n.y-i.y,l=i.x-n.x,c=n.x*i.y-i.x*n.y,h=a*c-l*s,f=u*s-o*c,d=o*l-u*a,g=h/d,m=f/d;if(r.isNaN(g)||r.isInfinite(g)||r.isNaN(m)||r.isInfinite(m))throw new M;return new p(g,m)},e(F.prototype,{create:function(){1===arguments.length?arguments[0]instanceof Array?arguments[0]:C(arguments[0],R)&&arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return F}}),e(z.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return z}}),e(j.prototype,{isGeometryCollection:function(){return this.getSortIndex()===j.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof j))return!1;var n=e;return this.equalsExact(n)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(j.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return null!==t&&this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,i);
}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===j.SORTINDEX_GEOMETRYCOLLECTION)throw new i("This method does not support GeometryCollection arguments")},equal:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new E(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),a=r.compareTo(o);if(0!==a)return a}return n.hasNext()?1:i.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===j.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===j.SORTINDEX_MULTIPOINT||this.getSortIndex()===j.SORTINDEX_MULTILINESTRING||this.getSortIndex()===j.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[a,o,u]},getClass:function(){return j}}),j.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},j.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},j.serialVersionUID=0x799ea46522854c00,j.SORTINDEX_POINT=0,j.SORTINDEX_MULTIPOINT=1,j.SORTINDEX_LINESTRING=2,j.SORTINDEX_LINEARRING=3,j.SORTINDEX_MULTILINESTRING=4,j.SORTINDEX_POLYGON=5,j.SORTINDEX_MULTIPOLYGON=6,j.SORTINDEX_GEOMETRYCOLLECTION=7,j.geometryChangedFilter={interfaces_:function(){return[z]},filter:function(t){t.geometryChangedAction()}},e(B.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return B}}),e(G.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return G}}),e(U.prototype,{isInBoundary:function(t){return t%2===1},interfaces_:function(){return[G]},getClass:function(){return U}}),e(V.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[G]},getClass:function(){return V}}),e(K.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[G]},getClass:function(){return K}}),e(H.prototype,{isInBoundary:function(t){return 1===t},interfaces_:function(){return[G]},getClass:function(){return H}}),G.Mod2BoundaryNodeRule=U,G.EndPointBoundaryNodeRule=V,G.MultiValentEndPointBoundaryNodeRule=K,G.MonoValentEndPointBoundaryNodeRule=H,G.MOD2_BOUNDARY_RULE=new U,G.ENDPOINT_BOUNDARY_RULE=new V,G.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new K,G.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new H,G.OGC_SFS_BOUNDARY_RULE=G.MOD2_BOUNDARY_RULE,e(q.prototype,{interfaces_:function(){return[]},getClass:function(){return q}}),q.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},q.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(q.indexOf(i,e)<0)return i}return null},q.scroll=function(t,e){var n=q.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);O.arraycopy(t,n,i,0,t.length-n),O.arraycopy(t,0,i,t.length-n,n),O.arraycopy(i,0,t,0,t.length)},q.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var n=0;n<i.length;n++)if(0!==o.compare(i[n],r[n]))return!1;return!0}},q.intersection=function(t,e){for(var n=new w,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},q.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},q.removeRepeatedPoints=function(t){if(!q.hasRepeatedPoints(t))return t;var e=new w(t,!1);return e.toCoordinateArray()},q.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},q.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,n=0;n<t.length;n++)null!==t[n]&&(i[r++]=t[n]);return i},q.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new p(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],n=0;n<s;n++)o[a+n]=new p(i[r+n])},q.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},q.envelope=function(t){for(var e=new E,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},q.toCoordinateArray=function(t){return t.toArray(q.coordArrayType)},q.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},q.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},q.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},q.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},q.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},q.extract=function(t,e,n){e=I.clamp(e,0,t.length),n=I.clamp(n,-1,t.length);var i=n-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,a=e;a<=n;a++)r[o++]=t[a];return r},e(X.prototype,{compare:function(t,e){var n=t,i=e;return q.compare(n,i)},interfaces_:function(){return[s]},getClass:function(){return X}}),e(W.prototype,{compare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=q.compare(n,i),o=q.isEqualReversed(n,i);return o?0:r},OLDcompare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=q.increasingDirection(n),o=q.increasingDirection(i),a=r>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(i[s]);if(0!==l)return l;a+=r,s+=o}return 0},interfaces_:function(){return[s]},getClass:function(){return W}}),q.ForwardComparator=X,q.BidirectionalComparator=W,q.coordArrayType=new Array(0).fill(null),Y.prototype.get=function(){},Y.prototype.put=function(){},Y.prototype.size=function(){},Y.prototype.values=function(){},Y.prototype.entrySet=function(){},J.prototype=new Y,$.prototype=new m,$.prototype.contains=function(){},Z.prototype=new $,Z.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){var i=this.array_[e];if(i===t)return!0}return!1},Z.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},Z.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Z.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},Z.prototype.size=function(){return this.array_.length},Z.prototype.isEmpty=function(){return 0===this.array_.length},Z.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Z.prototype.iterator=function(){return new Qo(this)};var Qo=function(t){this.hashSet_=t,this.position_=0};Qo.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new b;return this.hashSet_.array_[this.position_++]},Qo.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Qo.prototype.remove=function(){throw new _};var ta=0,ea=1;rt.prototype=new J,rt.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},rt.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:ta,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do if(n=r,i=t.compareTo(r.key),i<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}while(null!==r);var a={key:t,left:null,right:null,value:e,parent:n,color:ta,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},rt.prototype.fixAfterInsertion=function(t){for(t.color=ea;null!=t&&t!=this.root_&&t.parent.color==ea;)if(tt(t)==nt(tt(tt(t)))){var e=it(tt(tt(t)));Q(e)==ea?(et(tt(t),ta),et(e,ta),et(tt(tt(t)),ea),t=tt(tt(t))):(t==it(tt(t))&&(t=tt(t),this.rotateLeft(t)),et(tt(t),ta),et(tt(tt(t)),ea),this.rotateRight(tt(tt(t))))}else{var e=nt(tt(tt(t)));Q(e)==ea?(et(tt(t),ta),et(e,ta),et(tt(tt(t)),ea),t=tt(tt(t))):(t==nt(tt(t))&&(t=tt(t),this.rotateRight(t)),et(tt(t),ta),et(tt(tt(t)),ea),this.rotateLeft(tt(tt(t))))}this.root_.color=ta},rt.prototype.values=function(){var t=new x,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=rt.successor(e));)t.add(e.value);return t},rt.prototype.entrySet=function(){var t=new Z,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=rt.successor(e));)t.add(e);return t},rt.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},rt.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},rt.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},rt.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var e=t.parent,n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e},rt.prototype.size=function(){return this.size_},e(ot.prototype,{interfaces_:function(){return[]},getClass:function(){return ot}}),at.prototype=new $,st.prototype=new at,st.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){var i=this.array_[e];if(0===i.compareTo(t))return!0}return!1},st.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){var i=this.array_[e];if(1===i.compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},st.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},st.prototype.remove=function(t){throw new _},st.prototype.size=function(){return this.array_.length},st.prototype.isEmpty=function(){return 0===this.array_.length},st.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},st.prototype.iterator=function(){return new na(this)};var na=function(t){this.treeSet_=t,this.position_=0};na.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new b;return this.treeSet_.array_[this.position_++]},na.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},na.prototype.remove=function(){throw new _},ut.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)return i=function(t,e){return t.compareTo(e)},void r.sort(i);if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else{if(3===arguments.length){e=r.slice(arguments[1],arguments[2]),e.sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t]);return}if(4===arguments.length){for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t]);return}}},ut.asList=function(t){for(var e=new x,n=0,i=t.length;n<i;n++)e.add(t[n]);return e},e(lt.prototype,{interfaces_:function(){return[]},getClass:function(){return lt}}),lt.toDimensionSymbol=function(t){switch(t){case lt.FALSE:return lt.SYM_FALSE;case lt.TRUE:return lt.SYM_TRUE;case lt.DONTCARE:return lt.SYM_DONTCARE;case lt.P:return lt.SYM_P;case lt.L:return lt.SYM_L;case lt.A:return lt.SYM_A}throw new i("Unknown dimension value: "+t)},lt.toDimensionValue=function(t){switch(L.toUpperCase(t)){case lt.SYM_FALSE:return lt.FALSE;case lt.SYM_TRUE:return lt.TRUE;case lt.SYM_DONTCARE:return lt.DONTCARE;case lt.SYM_P:return lt.P;case lt.SYM_L:return lt.L;case lt.SYM_A:return lt.A}throw new i("Unknown dimension symbol: "+t)},lt.P=0,lt.L=1,lt.A=2,lt.FALSE=-1,lt.TRUE=-2,lt.DONTCARE=-3,lt.SYM_FALSE="F",lt.SYM_TRUE="T",lt.SYM_DONTCARE="*",lt.SYM_P="0",lt.SYM_L="1",lt.SYM_A="2",e(ct.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return ct}}),e(ht.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return ht}}),c(ft,j),e(ft.prototype,{computeEnvelopeInternal:function(){for(var t=new E,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return j.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var i=this.geometries[n].getCoordinates(),r=0;r<i.length;r++)e++,t[e]=i[r];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var i=0;i<this.geometries.length;i++)if(!this.geometries[i].equalsExact(n.geometries[i],e))return!1;return!0}return j.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();ut.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=lt.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=lt.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=new st(ut.asList(this.geometries)),n=new st(ut.asList(t.geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=i,a=this.getNumGeometries(),s=o.getNumGeometries(),u=0;u<a&&u<s;){var l=this.getGeometryN(u),c=o.getGeometryN(u),h=l.compareToSameClass(c,r);if(0!==h)return h;u++}return u<a?1:u<s?-1:0}},apply:function(){if(C(arguments[0],B))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(C(arguments[0],ht)){var n=arguments[0];if(0===this.geometries.length)return null;for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(C(arguments[0],ct)){var i=arguments[0];i.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(i)}else if(C(arguments[0],z)){var r=arguments[0];r.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}},getBoundary:function(){return this.checkNotGeometryCollection(this),f.shouldNeverReachHere(),null},clone:function(){var t=j.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ft(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ft}}),ft.serialVersionUID=-0x4f07bcb1f857d800,c(pt,ft),e(pt.prototype,{getSortIndex:function(){return j.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?lt.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new dt(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new pt(t,this.factory)},interfaces_:function(){return[ot]},getClass:function(){return pt}}),pt.serialVersionUID=0x7155d2ab4afa8000,e(dt.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof St?this.boundaryLineString(this.geom):this.geom instanceof pt?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this.bnRule.isInBoundary(2);return e?t.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new x;this.endpointMap=new rt;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this.endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),a=o.getValue(),s=a.count;this.bnRule.isInBoundary(s)&&e.add(o.getKey())}return q.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);null===e&&(e=new gt,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return dt}}),dt.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new dt(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=new dt(n,i);return e.getBoundary()}},e(gt.prototype,{interfaces_:function(){return[]},getClass:function(){return gt}}),e(wt.prototype,{interfaces_:function(){return[]},getClass:function(){return wt}}),wt.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return new String(n)},wt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new bt,n=new mt(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",a=new yt(wt.getStackTrace(i)),s=new xt(a),u=0;u<r;u++)try{o+=s.readLine()+wt.NEWLINE}catch(t){if(!(t instanceof _t))throw t;f.shouldNeverReachHere()}finally{}return o}},wt.split=function(t,e){for(var n=e.length,i=new x,r=""+t,o=r.indexOf(e);o>=0;){var a=r.substring(0,o);i.add(a),r=r.substring(o+n),o=r.indexOf(e)}r.length>0&&i.add(r);for(var s=new Array(i.size()).fill(null),u=0;u<s.length;u++)s[u]=i.get(u);return s},wt.toString=function(){if(1===arguments.length){var t=arguments[0];return wt.SIMPLE_ORDINATE_FORMAT.format(t)}},wt.spaces=function(t){return wt.chars(" ",t)},wt.NEWLINE=O.getProperty("line.separator"),wt.SIMPLE_ORDINATE_FORMAT=new vt("0.#"),e(Et.prototype,{interfaces_:function(){return[]},getClass:function(){return Et}}),Et.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},Et.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,R.X)===t.getOrdinate(e-1,R.X)&&t.getOrdinate(0,R.Y)===t.getOrdinate(e-1,R.Y)},Et.isEqual=function(t,e){var n=t.size(),i=e.size();if(n!==i)return!1;for(var o=Math.min(t.getDimension(),e.getDimension()),a=0;a<n;a++)for(var s=0;s<o;s++){var u=t.getOrdinate(a,s),l=e.getOrdinate(a,s);if(!(t.getOrdinate(a,s)===e.getOrdinate(a,s)||r.isNaN(u)&&r.isNaN(l)))return!1}return!0},Et.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Et.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)Et.copy(e,r-1,i,o,1);return i},Et.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Et.swap(t,i,e-i)},Et.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Et.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)Et.copyCoord(t,e+o,n,i+o)},Et.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new N;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(wt.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},Et.ensureValidRing=function(t,e){var n=e.size();if(0===n)return e;if(n<=3)return Et.createClosedRing(t,e,4);var i=e.getOrdinate(0,R.X)===e.getOrdinate(n-1,R.X)&&e.getOrdinate(0,R.Y)===e.getOrdinate(n-1,R.Y);return i?e:Et.createClosedRing(t,e,n+1)},Et.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();Et.copy(e,0,i,0,r);for(var o=r;o<n;o++)Et.copy(e,0,i,o,1);return i},c(St,j),e(St.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new E:this.points.expandEnvelope(new E)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return j.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var i=0;i<this.points.size();i++)if(!this.equal(this.points.getCoordinate(i),n.points.getCoordinate(i),e))return!1;return!0}return j.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&Et.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?lt.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return ce.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();Et.reverse(t);var e=this.getFactory().createLineString(t);return e},compareToSameClass:function(){if(1===arguments.length){for(var t=arguments[0],e=t,n=0,i=0;n<this.points.size()&&i<e.points.size();){var r=this.points.getCoordinate(n).compareTo(e.points.getCoordinate(i));if(0!==r)return r;n++,i++}return n<this.points.size()?1:i<e.points.size()?-1:0}if(2===arguments.length){var o=arguments[0],a=arguments[1],e=o;return a.compare(this.points,e.points)}},apply:function(){if(C(arguments[0],B))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(C(arguments[0],ht)){var n=arguments[0];if(0===this.points.size())return null;for(var e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(C(arguments[0],ct)){var i=arguments[0];i.filter(this)}else if(C(arguments[0],z)){var r=arguments[0];r.filter(this)}},getBoundary:function(){return new dt(this).getBoundary()},isEquivalentClass:function(t){return t instanceof St},clone:function(){var t=j.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new St(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return 0===this.points.size()},init:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new i("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[ot]},getClass:function(){return St}}),St.serialVersionUID=0x2b2b51ba435c8e00,e(Mt.prototype,{interfaces_:function(){return[]},getClass:function(){return Mt}}),c(Tt,j),e(Tt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new E;var t=new E;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return j.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return j.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return lt.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=n;return i.compare(this.coordinates,e.coordinates)}},apply:function(){if(C(arguments[0],B)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(C(arguments[0],ht)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(C(arguments[0],ct)){var n=arguments[0];n.filter(this)}else if(C(arguments[0],z)){var i=arguments[0];i.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=j.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new Tt(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return 0===this.coordinates.size()},init:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),f.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[Mt]},getClass:function(){return Tt}}),Tt.serialVersionUID=0x44077bad161cbc00,e(Ct.prototype,{interfaces_:function(){return[]},getClass:function(){return Ct}}),c(It,j),e(It.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return j.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),i=0;i<n.length;i++)e++,t[e]=n[i];for(var r=0;r<this.holes.length;r++)for(var o=this.holes[r].getCoordinates(),a=0;a<o.length;a++)e++,t[e]=o[a];return t},getArea:function(){var t=0;t+=Math.abs(ce.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(ce.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),n=1;n<=4;n++){var i=t.getX(n),r=t.getY(n),s=i!==o,u=r!==a;if(s===u)return!1;o=i,a=r}return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,i=this.shell,r=n.shell;if(!i.equalsExact(r,e))return!1;if(this.holes.length!==n.holes.length)return!1;for(var o=0;o<this.holes.length;o++)if(!this.holes[o].equalsExact(n.holes[o],e))return!1;return!0}return j.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(0===arguments.length){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);ut.sort(this.holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);O.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=q.minCoordinate(e.getCoordinates());q.scroll(i,r),O.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],ce.isCCW(e.getCoordinates())===n&&q.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],o=i,e=this.shell,n=o.shell,a=e.compareToSameClass(n,r);if(0!==a)return a;for(var s=this.getNumInteriorRing(),u=o.getNumInteriorRing(),l=0;l<s&&l<u;){var c=this.getInteriorRingN(l),h=o.getInteriorRingN(l),f=c.compareToSameClass(h,r);if(0!==f)return f;l++}return l<s?1:l<u?-1:0}},apply:function(){if(C(arguments[0],B)){var t=arguments[0];this.shell.apply(t);
for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(C(arguments[0],ht)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(C(arguments[0],ct)){var i=arguments[0];i.filter(this)}else if(C(arguments[0],z)){var r=arguments[0];r.filter(this),this.shell.apply(r);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(r)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=j.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new It(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[Ct]},getClass:function(){return It}}),It.serialVersionUID=-0x307ffefd8dc97200,c(Nt,ft),e(Nt.prototype,{getSortIndex:function(){return j.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.geometries[t].getCoordinate()}return ft.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return lt.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Nt(t,this.factory)},interfaces_:function(){return[Mt]},getClass:function(){return Nt}}),Nt.serialVersionUID=-0x6fb1ed4162e0fc00,c(Pt,St),e(Pt.prototype,{getSortIndex:function(){return j.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return lt.FALSE},isClosed:function(){return!!this.isEmpty()||St.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();Et.reverse(t);var e=this.getFactory().createLinearRing(t);return e},validateConstruction:function(){if(!this.isEmpty()&&!St.prototype.isClosed.call(this))throw new i("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<Pt.MINIMUM_VALID_SIZE)throw new i("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new Pt(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return Pt}}),Pt.MINIMUM_VALID_SIZE=4,Pt.serialVersionUID=-0x3b229e262367a600,c(Lt,ft),e(Lt.prototype,{getSortIndex:function(){return j.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new x,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e],i=n.getBoundary(),r=0;r<i.getNumGeometries();r++)t.add(i.getGeometryN(r));var o=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(o))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Lt(t,this.factory)},interfaces_:function(){return[Ct]},getClass:function(){return Lt}}),Lt.serialVersionUID=-0x7a5aa1369171980,e(At.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return null===this.factory&&(this.factory=t.getFactory()),t instanceof ft?this.editGeometryCollection(t,e):t instanceof It?this.editPolygon(t,e):t instanceof Tt?e.edit(t,this.factory):t instanceof St?e.edit(t,this.factory):(f.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),i=new x,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===Nt?this.factory.createMultiPoint(i.toArray([])):n.getClass()===pt?this.factory.createMultiLineString(i.toArray([])):n.getClass()===Lt?this.factory.createMultiPolygon(i.toArray([])):this.factory.createGeometryCollection(i.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this.factory.createPolygon();for(var r=new x,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||r.add(a)}return this.factory.createPolygon(i,r.toArray([]))},interfaces_:function(){return[]},getClass:function(){return At}}),At.GeometryEditorOperation=kt,e(Rt.prototype,{edit:function(t,e){return t},interfaces_:function(){return[kt]},getClass:function(){return Rt}}),e(Ot.prototype,{edit:function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof Pt?e.createLinearRing(n):t instanceof St?e.createLineString(n):t instanceof Tt?n.length>0?e.createPoint(n[0]):e.createPoint():t},interfaces_:function(){return[kt]},getClass:function(){return Ot}}),e(Dt.prototype,{edit:function(t,e){return t instanceof Pt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof St?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Tt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[kt]},getClass:function(){return Dt}}),At.NoOpGeometryOperation=Rt,At.CoordinateOperation=Ot,At.CoordinateSequenceOperation=Dt,e(Ft.prototype,{setOrdinate:function(t,e,n){switch(e){case R.X:this.coordinates[t].x=n;break;case R.Y:this.coordinates[t].y=n;break;case R.Z:this.coordinates[t].z=n;break;default:throw new i("invalid ordinateIndex")}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case R.X:return this.coordinates[t].x;case R.Y:return this.coordinates[t].y;case R.Z:return this.coordinates[t].z}return r.NaN},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new p(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new Ft(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new Ft(t,this.dimension)},toString:function(){if(this.coordinates.length>0){var t=new N(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[R,u]},getClass:function(){return Ft}}),Ft.serialVersionUID=-0xcb44a778db18e00,e(zt.prototype,{readResolve:function(){return zt.instance()},create:function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Ft(t)}if(C(arguments[0],R)){var e=arguments[0];return new Ft(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new Ft(n):new Ft(n,i)}},interfaces_:function(){return[F,u]},getClass:function(){return zt}}),zt.instance=function(){return zt.instanceObject},zt.serialVersionUID=-0x38e49fa6cf6f2e00,zt.instanceObject=new zt;var ia,ra=Object.defineProperty,oa=Bt({delete:Ut,has:Ht,get:Vt,set:qt,keys:Wt,values:Yt,entries:Jt,forEach:Qt,clear:Xt}),aa="undefined"!=typeof Map&&Map.prototype.values?Map:oa;te.prototype=new Y,te.prototype.get=function(t){return this.map_.get(t)||null},te.prototype.put=function(t,e){return this.map_.set(t,e),e},te.prototype.values=function(){for(var t=new x,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},te.prototype.entrySet=function(){var t=new Z;return this.map_.entries().forEach(function(e){return t.add(e)}),t},te.prototype.size=function(){return this.map_.size()},e(ee.prototype,{equals:function(t){if(!(t instanceof ee))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new P(n).compareTo(new P(i))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===ee.FLOATING||this.modelType===ee.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===ee.FLOATING?t="Floating":this.modelType===ee.FLOATING_SINGLE?t="Floating-Single":this.modelType===ee.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if("number"==typeof arguments[0]){var t=arguments[0];if(r.isNaN(t))return t;if(this.modelType===ee.FLOATING_SINGLE){var e=t;return e}return this.modelType===ee.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof p){var n=arguments[0];if(this.modelType===ee.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===ee.FLOATING?t=16:this.modelType===ee.FLOATING_SINGLE?t=6:this.modelType===ee.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[u,o]},getClass:function(){return ee}}),ee.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},e(ne.prototype,{readResolve:function(){return ne.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[u]},getClass:function(){return ne}}),ne.serialVersionUID=-552860263173159e4,ne.nameToTypeMap=new te,ee.Type=ne,ee.serialVersionUID=0x6bee6404e9a25c00,ee.FIXED=new ne("FIXED"),ee.FLOATING=new ne("FLOATING"),ee.FLOATING_SINGLE=new ne("FLOATING SINGLE"),ee.maximumPreciseValue=9007199254740992,e(ie.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new p(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new p(t.getMinX(),t.getMinY()),new p(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new p(t.getMinX(),t.getMinY()),new p(t.getMinX(),t.getMaxY()),new p(t.getMaxX(),t.getMaxY()),new p(t.getMaxX(),t.getMinY()),new p(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(C(arguments[0],R)){var e=arguments[0];return new St(e,this)}}},createMultiLineString:function(){if(0===arguments.length)return new pt(null,this);if(1===arguments.length){var t=arguments[0];return new pt(t,this)}},buildGeometry:function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(ie.toGeometryArray(t));var s=t.iterator().next(),u=t.size()>1;if(u){if(s instanceof It)return this.createMultiPolygon(ie.toPolygonArray(t));if(s instanceof St)return this.createMultiLineString(ie.toLineStringArray(t));if(s instanceof Tt)return this.createMultiPoint(ie.toPointArray(t));f.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},createMultiPointFromCoords:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof p){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(C(arguments[0],R)){var e=arguments[0];return new Tt(e,this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(0===arguments.length)return new It(null,null,this);if(1===arguments.length){if(C(arguments[0],R)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Pt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new It(i,r,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(0===arguments.length)return new ft(null,this);if(1===arguments.length){var t=arguments[0];return new ft(t,this)}},createGeometry:function(t){var e=new At(this);return e.edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return arguments[1],this.coordinateSequenceFactory.create(t)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(C(arguments[0],R)){var e=arguments[0];return new Pt(e,this)}}},createMultiPolygon:function(){if(0===arguments.length)return new Lt(null,this);if(1===arguments.length){var t=arguments[0];return new Lt(t,this)}},createMultiPoint:function(){if(0===arguments.length)return new Nt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Nt(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(C(arguments[0],R)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),r=0;r<n.size();r++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Et.copy(n,r,o,0,1),i[r]=this.createPoint(o)}return this.createMultiPoint(i)}}},interfaces_:function(){return[u]},getClass:function(){return ie}}),ie.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.getDefaultCoordinateSequenceFactory=function(){return zt.instance()},ie.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ie.serialVersionUID=-0x5ea75f2051eeb400;var sa={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};e(re.prototype,{read:function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=sa.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(r=sa.emptyTypeStr.exec(t),r[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],la[n]&&(e=la[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!ua[e])return null;var n,i=e.toUpperCase();return n=t.isEmpty()?i+" EMPTY":i+"("+ua[e].apply(this,[t])+")"}});var ua={coordinate:function(t){return t.x+" "+t.y},point:function(t){return ua.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+ua.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;n<i;++n)e.push(ua.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;n<i;++n)e.push(ua.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+ua.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+ua.linestring.apply(this,[t.shell])+")");for(var n=0,i=t.holes.length;n<i;++n)e.push("("+ua.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+ua.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},la={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(sa.spaces);return this.geometryFactory.createPoint(new p(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(sa.trimParens,"$1"),i.push(la.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(sa.spaces),i.push(new p(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(sa.spaces),i.push(new p(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(sa.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(sa.trimParens,"$1"),i.push(la.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(sa.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(sa.trimParens,"$1"),n=la.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n.points),0===s?r=i:a.push(i);return this.geometryFactory.createPolygon(r,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(sa.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(sa.trimParens,"$1"),i.push(la.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}};e(oe.prototype,{write:function(t){return this.parser.write(t)}}),e(oe,{toLineString:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),e(ae.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new N;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,i){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=i,this.result=this.computeIntersect(t,e,n,i)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(0===arguments.length)null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==ae.NO_INTERSECTION},getEdgeDistance:function(t,e){var n=ae.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1]);return n},isCollinear:function(){return this.result===ae.COLLINEAR_INTERSECTION},toString:function(){return oe.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+oe.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return ae}}),ae.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);o=i>r?a:s,0!==o||t.equals(e)||(o=Math.max(a,s))}return f.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},ae.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return f.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},ae.DONT_INTERSECT=0,ae.DO_INTERSECT=1,ae.COLLINEAR=2,ae.NO_INTERSECTION=0,ae.POINT_INTERSECTION=1,ae.COLLINEAR_INTERSECTION=2,c(se,ae),e(se.prototype,{isInSegmentEnvelopes:function(t){var e=new E(this.inputLines[0][0],this.inputLines[0][1]),n=new E(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(3!==arguments.length)return ae.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,E.intersects(e,n,t)&&0===ce.orientationIndex(e,n,t)&&0===ce.orientationIndex(n,e,t)?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=ae.POINT_INTERSECTION,null):void(this.result=ae.NO_INTERSECTION)},normalizeToMinimum:function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},safeHCoordinateIntersection:function(t,e,n,i){var r=null;try{r=D.intersection(t,e,n,i)}catch(o){if(!(o instanceof M))throw o;r=se.nearestEndpoint(t,e,n,i)}finally{}return r},intersection:function(t,e,n,i){var r=this.intersectionWithNormalization(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new p(se.nearestEndpoint(t,e,n,i))),null!==this.precisionModel&&this.precisionModel.makePrecise(r),r},smallestInAbsValue:function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},checkDD:function(t,e,n,i,r){var o=k.intersection(t,e,n,i),a=this.isInSegmentEnvelopes(o);O.out.println("DD in env = "+a+"  --------------------- "+o),r.distance(o)>1e-4&&O.out.println("Distance = "+r.distance(o))},intersectionWithNormalization:function(t,e,n,i){var r=new p(t),o=new p(e),a=new p(n),s=new p(i),u=new p;this.normalizeToEnvCentre(r,o,a,s,u);var l=this.safeHCoordinateIntersection(r,o,a,s);return l.x+=u.x,l.y+=u.y,l},computeCollinearIntersection:function(t,e,n,i){var r=E.intersects(t,e,n),o=E.intersects(t,e,i),a=E.intersects(n,i,t),s=E.intersects(n,i,e);return r&&o?(this.intPt[0]=n,this.intPt[1]=i,ae.COLLINEAR_INTERSECTION):a&&s?(this.intPt[0]=t,this.intPt[1]=e,ae.COLLINEAR_INTERSECTION):r&&a?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||o||s?ae.COLLINEAR_INTERSECTION:ae.POINT_INTERSECTION):r&&s?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||o||a?ae.COLLINEAR_INTERSECTION:ae.POINT_INTERSECTION):o&&a?(this.intPt[0]=i,this.intPt[1]=t,!i.equals(t)||r||s?ae.COLLINEAR_INTERSECTION:ae.POINT_INTERSECTION):o&&s?(this.intPt[0]=i,this.intPt[1]=e,!i.equals(e)||r||a?ae.COLLINEAR_INTERSECTION:ae.POINT_INTERSECTION):ae.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,f=n.y>i.y?n.y:i.y,p=o>l?o:l,d=s<h?s:h,g=a>c?a:c,m=u<f?u:f,y=(p+d)/2,v=(g+m)/2;r.x=y,r.y=v,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},computeIntersect:function(t,e,n,i){if(this._isProper=!1,!E.intersects(t,e,n,i))return ae.NO_INTERSECTION;var r=ce.orientationIndex(t,e,n),o=ce.orientationIndex(t,e,i);if(r>0&&o>0||r<0&&o<0)return ae.NO_INTERSECTION;var a=ce.orientationIndex(n,i,t),s=ce.orientationIndex(n,i,e);if(a>0&&s>0||a<0&&s<0)return ae.NO_INTERSECTION;var u=0===r&&0===o&&0===a&&0===s;return u?this.computeCollinearIntersection(t,e,n,i):(0===r||0===o||0===a||0===s?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this.intPt[0]=e:0===r?this.intPt[0]=new p(n):0===o?this.intPt[0]=new p(i):0===a?this.intPt[0]=new p(t):0===s&&(this.intPt[0]=new p(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,i)),ae.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return se}}),se.nearestEndpoint=function(t,e,n,i){var r=t,o=ce.distancePointLine(t,n,i),a=ce.distancePointLine(e,n,i);return a<o&&(o=a,r=e),a=ce.distancePointLine(n,t,e),a<o&&(o=a,r=n),a=ce.distancePointLine(i,t,e),a<o&&(o=a,r=i),r},e(ue.prototype,{interfaces_:function(){return[]},getClass:function(){return ue}}),ue.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ue.signOfDet2x2(i,r,o,a)},ue.signOfDet2x2=function(t,e,n,i){var r=null,o=null,a=null,s=0;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(0<e?0<i?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):0<i?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),0<t){if(!(0<n))return r;if(!(t<=n))return r}else{if(0<n)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if(s+=1,a=Math.floor(n/t),n-=a*t,i-=a*e,i<0)return-r;if(i>e)return r;if(t>n+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if(a=Math.floor(t/n),t-=a*n,e-=a*i,e<0)return r;if(e>i)return-r;if(n>t+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}},e(le.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this.p.x>=n&&this.p.x<=i&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var r=t.x-this.p.x,o=t.y-this.p.y,a=e.x-this.p.x,s=e.y-this.p.y,u=ue.signOfDet2x2(r,o,a,s);if(0===u)return this.isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==T.EXTERIOR},getLocation:function(){return this.isPointOnSegment?T.BOUNDARY:this.crossingCount%2===1?T.INTERIOR:T.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return le}}),le.locatePointInRing=function(){if(arguments[0]instanceof p&&C(arguments[1],R)){for(var t=arguments[0],e=arguments[1],n=new le(t),i=new p,r=new p,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof p&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],n=new le(a),o=1;o<s.length;o++){var i=s[o],r=s[o-1];if(n.countSegment(i,r),n.isOnSegment())return n.getLocation()}return n.getLocation()}},e(ce.prototype,{interfaces_:function(){return[]},getClass:function(){return ce}}),ce.orientationIndex=function(t,e,n){return k.orientationIndex(t,e,n)},ce.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y,a=t[i-1].y;e+=r*(a-o)}return e/2}if(C(arguments[0],R)){var s=arguments[0],u=s.size();if(u<3)return 0;var l=new p,c=new p,h=new p;s.getCoordinate(0,c),s.getCoordinate(1,h);var n=c.x;h.x-=n;for(var e=0,i=1;i<u-1;i++)l.y=c.y,c.x=h.x,c.y=h.y,s.getCoordinate(i+1,h),h.x-=n,e+=c.x*(l.y-h.y);return e/2}},ce.distanceLineLine=function(t,e,n,i){if(t.equals(e))return ce.distancePointLine(t,n,i);if(n.equals(i))return ce.distancePointLine(i,t,e);var r=!1;if(E.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var a=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),s=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),u=s/o,l=a/o;(l<0||l>1||u<0||u>1)&&(r=!0)}}else r=!0;return r?I.min(ce.distancePointLine(t,n,i),ce.distancePointLine(e,n,i),ce.distancePointLine(n,t,e),ce.distancePointLine(i,t,e)):0},ce.isPointInRing=function(t,e){return ce.locatePointInRing(t,e)!==T.EXTERIOR},ce.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new p;t.getCoordinate(0,i);for(var r=i.x,o=i.y,a=1;a<e;a++){t.getCoordinate(a,i);var s=i.x,u=i.y,l=s-r,c=u-o;n+=Math.sqrt(l*l+c*c),r=s,
o=u}return n},ce.isCCW=function(t){var e=t.length-1;if(e<3)throw new i("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,o=1;o<=e;o++){var a=t[o];a.y>n.y&&(n=a,r=o)}var s=r;do s-=1,s<0&&(s=e);while(t[s].equals2D(n)&&s!==r);var u=r;do u=(u+1)%e;while(t[u].equals2D(n)&&u!==r);var l=t[s],c=t[u];if(l.equals2D(n)||c.equals2D(n)||l.equals2D(c))return!1;var h=ce.computeOrientation(l,n,c),f=!1;return f=0===h?l.x>c.x:h>0},ce.locatePointInRing=function(t,e){return le.locatePointInRing(t,e)},ce.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},ce.computeOrientation=function(t,e,n){return ce.orientationIndex(t,e,n)},ce.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new i("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var o=ce.distancePointLine(t,e[r],e[r+1]);o<n&&(n=o)}return n}if(3===arguments.length){var a=arguments[0],s=arguments[1],u=arguments[2];if(s.x===u.x&&s.y===u.y)return a.distance(s);var l=(u.x-s.x)*(u.x-s.x)+(u.y-s.y)*(u.y-s.y),c=((a.x-s.x)*(u.x-s.x)+(a.y-s.y)*(u.y-s.y))/l;if(c<=0)return a.distance(s);if(c>=1)return a.distance(u);var h=((s.y-a.y)*(u.x-s.x)-(s.x-a.x)*(u.y-s.y))/l;return Math.abs(h)*Math.sqrt(l)}},ce.isOnLine=function(t,e){for(var n=new se,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},ce.CLOCKWISE=-1,ce.RIGHT=ce.CLOCKWISE,ce.COUNTERCLOCKWISE=1,ce.LEFT=ce.COUNTERCLOCKWISE,ce.COLLINEAR=0,ce.STRAIGHT=ce.COLLINEAR,e(he.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof he){var t=arguments[0],e=ce.orientationIndex(this.p0,this.p1,t.p0),n=ce.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof p){var i=arguments[0];return ce.orientationIndex(this.p0,this.p1,i)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof he))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new se;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof p){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new p(t);var e=this.projectionFactor(t),n=new p;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof he){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var a=this.project(i.p0);r<0&&(a=this.p0),r>1&&(a=this.p1);var s=this.project(i.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new he(a,s)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return 0===t?this.p0:this.p1},distancePerpendicular:function(t){return ce.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return he.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;if(i<=0)return r.NaN;var o=((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i;return o},closestPoints:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=r.MAX_VALUE,o=null,a=this.closestPoint(t.p0);i=a.distance(t.p0),n[0]=a,n[1]=t.p0;var s=this.closestPoint(t.p1);o=s.distance(t.p1),o<i&&(i=o,n[0]=s,n[1]=t.p1);var u=t.closestPoint(this.p0);o=u.distance(this.p0),o<i&&(i=o,n[0]=this.p0,n[1]=u);var l=t.closestPoint(this.p1);return o=l.distance(this.p1),o<i&&(i=o,n[0]=this.p1,n[1]=l),n},closestPoint:function(t){var e=this.projectionFactor(t);if(e>0&&e<1)return this.project(t);var n=this.p0.distance(t),i=this.p1.distance(t);return n<i?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{var e=D.intersection(this.p0,this.p1,t.p0,t.p1);return e}catch(t){if(!(t instanceof M))throw t}finally{}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(r*r+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");s=e*r/a,u=e*o/a}var l=n-u,c=i+s,h=new p(l,c);return h},setCoordinates:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||r.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof he){var t=arguments[0];return ce.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof p){var e=arguments[0];return ce.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new p;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var i=Math.trunc(n)^Math.trunc(n>>32);return e^i},interfaces_:function(){return[o,u]},getClass:function(){return he}}),he.midPoint=function(t,e){return new p((t.x+e.x)/2,(t.y+e.y)/2)},he.serialVersionUID=0x2d2172135f411c00,e(fe.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){var t=fe.isTrue(this.matrix[T.INTERIOR][T.INTERIOR])||fe.isTrue(this.matrix[T.INTERIOR][T.BOUNDARY])||fe.isTrue(this.matrix[T.BOUNDARY][T.INTERIOR])||fe.isTrue(this.matrix[T.BOUNDARY][T.BOUNDARY]);return t&&this.matrix[T.EXTERIOR][T.INTERIOR]===lt.FALSE&&this.matrix[T.EXTERIOR][T.BOUNDARY]===lt.FALSE},isCoveredBy:function(){var t=fe.isTrue(this.matrix[T.INTERIOR][T.INTERIOR])||fe.isTrue(this.matrix[T.INTERIOR][T.BOUNDARY])||fe.isTrue(this.matrix[T.BOUNDARY][T.INTERIOR])||fe.isTrue(this.matrix[T.BOUNDARY][T.BOUNDARY]);return t&&this.matrix[T.INTERIOR][T.EXTERIOR]===lt.FALSE&&this.matrix[T.BOUNDARY][T.EXTERIOR]===lt.FALSE},set:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.matrix[n][i]=lt.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this.matrix[r][o]=a}},isContains:function(){return fe.isTrue(this.matrix[T.INTERIOR][T.INTERIOR])&&this.matrix[T.EXTERIOR][T.INTERIOR]===lt.FALSE&&this.matrix[T.EXTERIOR][T.BOUNDARY]===lt.FALSE},setAtLeast:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,lt.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this.matrix[r][o]<a&&(this.matrix[r][o]=a)}},setAtLeastIfValid:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},isWithin:function(){return fe.isTrue(this.matrix[T.INTERIOR][T.INTERIOR])&&this.matrix[T.INTERIOR][T.EXTERIOR]===lt.FALSE&&this.matrix[T.BOUNDARY][T.EXTERIOR]===lt.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):(t===lt.A&&e===lt.A||t===lt.L&&e===lt.L||t===lt.L&&e===lt.A||t===lt.P&&e===lt.A||t===lt.P&&e===lt.L)&&this.matrix[T.INTERIOR][T.INTERIOR]===lt.FALSE&&(fe.isTrue(this.matrix[T.INTERIOR][T.BOUNDARY])||fe.isTrue(this.matrix[T.BOUNDARY][T.INTERIOR])||fe.isTrue(this.matrix[T.BOUNDARY][T.BOUNDARY]))},isOverlaps:function(t,e){return t===lt.P&&e===lt.P||t===lt.A&&e===lt.A?fe.isTrue(this.matrix[T.INTERIOR][T.INTERIOR])&&fe.isTrue(this.matrix[T.INTERIOR][T.EXTERIOR])&&fe.isTrue(this.matrix[T.EXTERIOR][T.INTERIOR]):t===lt.L&&e===lt.L&&1===this.matrix[T.INTERIOR][T.INTERIOR]&&fe.isTrue(this.matrix[T.INTERIOR][T.EXTERIOR])&&fe.isTrue(this.matrix[T.EXTERIOR][T.INTERIOR])},isEquals:function(t,e){return t===e&&fe.isTrue(this.matrix[T.INTERIOR][T.INTERIOR])&&this.matrix[T.INTERIOR][T.EXTERIOR]===lt.FALSE&&this.matrix[T.BOUNDARY][T.EXTERIOR]===lt.FALSE&&this.matrix[T.EXTERIOR][T.INTERIOR]===lt.FALSE&&this.matrix[T.EXTERIOR][T.BOUNDARY]===lt.FALSE},toString:function(){for(var t=new N("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,lt.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(9!==t.length)throw new i("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!fe.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[T.INTERIOR][T.INTERIOR]===lt.FALSE&&this.matrix[T.INTERIOR][T.BOUNDARY]===lt.FALSE&&this.matrix[T.BOUNDARY][T.INTERIOR]===lt.FALSE&&this.matrix[T.BOUNDARY][T.BOUNDARY]===lt.FALSE},isCrosses:function(t,e){return t===lt.P&&e===lt.L||t===lt.P&&e===lt.A||t===lt.L&&e===lt.A?fe.isTrue(this.matrix[T.INTERIOR][T.INTERIOR])&&fe.isTrue(this.matrix[T.INTERIOR][T.EXTERIOR]):t===lt.L&&e===lt.P||t===lt.A&&e===lt.P||t===lt.A&&e===lt.L?fe.isTrue(this.matrix[T.INTERIOR][T.INTERIOR])&&fe.isTrue(this.matrix[T.EXTERIOR][T.INTERIOR]):t===lt.L&&e===lt.L&&0===this.matrix[T.INTERIOR][T.INTERIOR]},interfaces_:function(){return[a]},getClass:function(){return fe}}),fe.matches=function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===lt.SYM_DONTCARE||e===lt.SYM_TRUE&&(t>=0||t===lt.TRUE)||e===lt.SYM_FALSE&&t===lt.FALSE||e===lt.SYM_P&&t===lt.P||e===lt.SYM_L&&t===lt.L||e===lt.SYM_A&&t===lt.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=new fe(n);return r.matches(i)}},fe.isTrue=function(t){return t>=0||t===lt.TRUE};var ca=Object.freeze({Coordinate:p,CoordinateList:w,Envelope:E,LineSegment:he,GeometryFactory:ie,Geometry:j,Point:Tt,LineString:St,LinearRing:Pt,Polygon:It,GeometryCollection:ft,MultiPoint:Nt,MultiLineString:pt,MultiPolygon:Lt,Dimension:lt,IntersectionMatrix:fe,PrecisionModel:ee});e(pe.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){null===this.areaBasePt&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);if(0!==i){e+=i;var r=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=i*r;var o=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=i*o}}this.totalLength+=e,0===e&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=ce.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new p;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!ce.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,i){var r=i?1:-1;pe.centroid3(t,e,n,this.triangleCent3);var o=pe.area2(t,e,n);this.cg3.x+=r*o*this.triangleCent3.x,this.cg3.y+=r*o*this.triangleCent3.y,this.areasum2+=r*o},add:function(){if(arguments[0]instanceof It){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof j){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof Tt)this.addPoint(n.getCoordinate());else if(n instanceof St)this.addLineSegments(n.getCoordinates());else if(n instanceof It){var i=n;this.add(i)}else if(n instanceof ft)for(var r=n,e=0;e<r.getNumGeometries();e++)this.add(r.getGeometryN(e))}},interfaces_:function(){return[]},getClass:function(){return pe}}),pe.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},pe.centroid3=function(t,e,n,i){return i.x=t.x+e.x+n.x,i.y=t.y+e.y+n.y,null},pe.getCentroid=function(t){var e=new pe(t);return e.getCentroid()},de.prototype=new Error,de.prototype.name="EmptyStackException",ge.prototype=new v,ge.prototype.add=function(t){return this.array_.push(t),!0},ge.prototype.get=function(t){if(t<0||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},ge.prototype.push=function(t){return this.array_.push(t),t},ge.prototype.pop=function(t){if(0===this.array_.length)throw new de;return this.array_.pop()},ge.prototype.peek=function(){if(0===this.array_.length)throw new de;return this.array_[this.array_.length-1]},ge.prototype.empty=function(){return 0===this.array_.length},ge.prototype.isEmpty=function(){return this.empty()},ge.prototype.search=function(t){return this.array_.indexOf(t)},ge.prototype.size=function(){return this.array_.length},ge.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e(me.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[B]},getClass:function(){return me}}),me.filterCoordinates=function(t){for(var e=new me,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},e(ye.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return ut.sort(t,1,t.length,new ve(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new w;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(t=this.cleanRing(t),3===t.length)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){f.equals(t[0],t[t.length-1]);for(var e=new x,n=null,i=0;i<=t.length-2;i++){var r=t[i],o=t[i+1];r.equals(o)||null!==n&&this.isBetween(n,r,o)||(e.add(r),n=r)}e.add(t[t.length-1]);var a=new Array(e.size()).fill(null);return e.toArray(a)},isBetween:function(t,e,n){if(0!==ce.computeOrientation(t,e,n))return!1;if(t.x!==n.x){if(t.x<=e.x&&e.x<=n.x)return!0;if(n.x<=e.x&&e.x<=t.x)return!0}if(t.y!==n.y){if(t.y<=e.y&&e.y<=n.y)return!0;if(n.y<=e.y&&e.y<=t.y)return!0}return!1},reduce:function(t){var e=this.computeOctRing(t);if(null===e)return t;for(var n=new st,i=0;i<e.length;i++)n.add(e[i]);for(var i=0;i<t.length;i++)ce.isPointInRing(t[i],e)||n.add(t[i]);var r=q.toCoordinateArray(n);return r.length<3?this.padArray3(r):r},getConvexHull:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),i=this.toCoordinateArray(n);return this.lineOrPolygon(i)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var i=1;i<t.length;i++)t[i].x<e[0].x&&(e[0]=t[i]),t[i].x-t[i].y<e[1].x-e[1].y&&(e[1]=t[i]),t[i].y>e[2].y&&(e[2]=t[i]),t[i].x+t[i].y>e[3].x+e[3].y&&(e[3]=t[i]),t[i].x>e[4].x&&(e[4]=t[i]),t[i].x-t[i].y>e[5].x-e[5].y&&(e[5]=t[i]),t[i].y<e[6].y&&(e[6]=t[i]),t[i].x+t[i].y<e[7].x+e[7].y&&(e[7]=t[i]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=t.get(n);e[n]=i}return e},grahamScan:function(t){var e=null,n=new ge;e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var i=3;i<t.length;i++){for(e=n.pop();!n.empty()&&ce.computeOrientation(n.peek(),e,t[i])>0;)e=n.pop();e=n.push(e),e=n.push(t[i])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return ye}}),ye.extractCoordinates=function(t){var e=new me;return t.apply(e),e.getCoordinates()},e(ve.prototype,{compare:function(t,e){var n=t,i=e;return ve.polarCompare(this.origin,n,i)},interfaces_:function(){return[s]},getClass:function(){return ve}}),ve.polarCompare=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-t.x,a=n.y-t.y,s=ce.computeOrientation(t,e,n);if(s===ce.COUNTERCLOCKWISE)return 1;if(s===ce.CLOCKWISE)return-1;var u=i*i+r*r,l=o*o+a*a;return u<l?-1:u>l?1:0},ye.RadialComparator=ve,e(be.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof Pt&&!i.isEmpty()||(n=!1);for(var r=new x,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof Pt||(n=!1),r.add(a))}if(n)return this.factory.createPolygon(i,r.toArray([]));var s=new x;return null!==i&&s.add(i),s.addAll(r),this.factory.buildGeometry(s)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new x,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new x,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new x,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new x,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this.pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(ie.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof Tt)return this.transformPoint(t,null);if(t instanceof Nt)return this.transformMultiPoint(t,null);if(t instanceof Pt)return this.transformLinearRing(t,null);if(t instanceof St)return this.transformLineString(t,null);if(t instanceof pt)return this.transformMultiLineString(t,null);if(t instanceof It)return this.transformPolygon(t,null);if(t instanceof Lt)return this.transformMultiPolygon(t,null);if(t instanceof ft)return this.transformGeometryCollection(t,null);throw new i("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this.factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return be}}),e(_e.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new p(o)),0===i&&this._isClosed&&t.set(t.size()-1,new p(o)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new w(this.srcPts);this.snapVertices(e,t),this.snapSegments(e,t);var n=e.toCoordinateArray();return n},snapSegments:function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new p(r),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=r.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(this.seg.p0=e.get(o),this.seg.p1=e.get(o+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var a=this.seg.distance(t);a<this.snapTolerance&&a<n&&(n=a,i=o)}return i},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return _e}}),_e.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])},e(xe.prototype,{snapTo:function(t,e){var n=this.extractTargetCoordinates(t),i=new we(e,n);return i.transform(this.srcGeom)},snapToSelf:function(t,e){var n=this.extractTargetCoordinates(this.srcGeom),i=new we(t,n,!0),r=i.transform(this.srcGeom),o=r;return e&&C(o,Ct)&&(o=r.buffer(0)),o},computeSnapTolerance:function(t){var e=this.computeMinimumSegmentLength(t),n=e/10;return n},extractTargetCoordinates:function(t){for(var e=new st,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=r.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},interfaces_:function(){return[]},getClass:function(){return xe}}),xe.snap=function(t,e,n){var i=new Array(2).fill(null),r=new xe(t);i[0]=r.snapTo(e,n);var o=new xe(e);return i[1]=o.snapTo(i[0],n),i},xe.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=xe.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===ee.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(xe.computeOverlaySnapTolerance(r),xe.computeOverlaySnapTolerance(o))}},xe.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),n=Math.min(e.getHeight(),e.getWidth()),i=n*xe.SNAP_PRECISION_FACTOR;return i},xe.snapToSelf=function(t,e,n){var i=new xe(t);return i.snapToSelf(e,n)},xe.SNAP_PRECISION_FACTOR=1e-9,c(we,be),e(we.prototype,{snapLine:function(t,e){var n=new _e(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(i)},interfaces_:function(){return[]},getClass:function(){return we}}),e(Ee.prototype,{getCommon:function(){return r.longBitsToDouble(this.commonBits)},add:function(t){var e=r.doubleToLongBits(t);if(this.isFirst)return this.commonBits=e,this.commonSignExp=Ee.signExpBits(this.commonBits),this.isFirst=!1,null;var n=Ee.signExpBits(e);return n!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=Ee.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=Ee.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(1===arguments.length){var t=arguments[0],e=r.longBitsToDouble(t),n=Long.toBinaryString(t),i="0000000000000000000000000000000000000000000000000000000000000000"+n,o=i.substring(i.length-64),a=o.substring(0,1)+"  "+o.substring(1,12)+"(exp) "+o.substring(12)+" [ "+e+" ]";return a}},interfaces_:function(){return[]},getClass:function(){return Ee}}),Ee.getBit=function(t,e){var n=1<<e;return 0!==(t&n)?1:0},Ee.signExpBits=function(t){return t>>52},Ee.zeroLowerBits=function(t,e){var n=(1<<e)-1,i=~n,r=t&i;return r},Ee.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(Ee.getBit(t,i)!==Ee.getBit(e,i))return n;n++}return 52},e(Se.prototype,{addCommonBits:function(t){var e=new Te(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(0===this.commonCoord.x&&0===this.commonCoord.y)return t;var e=new p(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new Te(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return Se}}),e(Me.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new p(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[B]},getClass:function(){return Me}}),e(Te.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[ht]},getClass:function(){return Te}}),Se.CommonCoordinateFilter=Me,Se.Translater=Te,e(Ce.prototype,{next:function(){if(this.atStart)return this.atStart=!1,Ce.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new b;var t=this.parent.getGeometryN(this.index++);return t instanceof ft?(this.subcollectionIterator=new Ce(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[g]},getClass:function(){return Ce}}),Ce.isAtomic=function(t){return!(t instanceof ft)},e(Ie.prototype,{locateInternal:function(){if(arguments[0]instanceof p&&arguments[1]instanceof It){var t=arguments[0],e=arguments[1];if(e.isEmpty())return T.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===T.EXTERIOR)return T.EXTERIOR;if(i===T.BOUNDARY)return T.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),a=this.locateInPolygonRing(t,o);if(a===T.INTERIOR)return T.EXTERIOR;if(a===T.BOUNDARY)return T.BOUNDARY}return T.INTERIOR}if(arguments[0]instanceof p&&arguments[1]instanceof St){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return T.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!s.equals(l[0])&&!s.equals(l[l.length-1])?ce.isOnLine(s,l)?T.INTERIOR:T.EXTERIOR:T.BOUNDARY}if(arguments[0]instanceof p&&arguments[1]instanceof Tt){var c=arguments[0],h=arguments[1],f=h.getCoordinate();return f.equals2D(c)?T.INTERIOR:T.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?ce.locatePointInRing(t,e.getCoordinates()):T.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==T.EXTERIOR},updateLocationInfo:function(t){t===T.INTERIOR&&(this.isIn=!0),t===T.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof Tt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof St)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof It)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof pt)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof Lt)for(var o=e,i=0;i<o.getNumGeometries();i++){var a=o.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof ft)for(var s=new Ce(e);s.hasNext();){var u=s.next();u!==e&&this.computeLocation(t,u)}},locate:function(t,e){return e.isEmpty()?T.EXTERIOR:e instanceof St?this.locateInternal(t,e):e instanceof It?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?T.BOUNDARY:this.numBoundaries>0||this.isIn?T.INTERIOR:T.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return Ie}}),e(Ne.prototype,{interfaces_:function(){return[]},getClass:function(){return Ne}}),Ne.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof p&&arguments[1]instanceof p){var o=arguments[0],a=arguments[1],s=a.x-o.x,u=a.y-o.y;if(0===s&&0===u)throw new i("Cannot compute the octant for two identical points "+o);return Ne.octant(s,u)}},e(Pe.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return Pe}}),e(Le.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:Ne.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return oe.toLineString(new Ft(this.pts))},interfaces_:function(){return[Pe]},getClass:function(){return Le}}),e(Ae.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return Ae}}),e(ke.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[Ae,u]},getClass:function(){return ke}}),e(Re.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&(e=2*t,e!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return 0===this._size},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return Re}}),e(Oe.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return Oe}}),e(De.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){
return De}}),e(Fe.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){f.isTrue(null===this.bounds),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[Ae,u]},getClass:function(){return Fe}}),Fe.serialVersionUID=0x5a1e55ec41369800;var ha={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return ha.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?ut.sort(n,e):ut.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new x;return e.add(t),e}};e(ze.prototype,{expandToQueue:function(t,e){var n=ze.isComposite(this.boundable1),r=ze.isComposite(this.boundable2);if(n&&r)return ze.area(this.boundable1)>ze.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(r)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new i("neither boundable is composite")},isLeaves:function(){return!(ze.isComposite(this.boundable1)||ze.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,i){for(var r=t.getChildBoundables(),o=r.iterator();o.hasNext();){var a=o.next(),s=new ze(a,e,this.itemDistance);s.getDistance()<i&&n.add(s)}},getBoundable:function(t){return 0===t?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[o]},getClass:function(){return ze}}),ze.area=function(t){return t.getBounds().getArea()},ze.isComposite=function(t){return t instanceof Fe},e(je.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function t(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===arguments.length){for(var e=arguments[0],t=0,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof Fe?t+=this.size(i):i instanceof ke&&(t+=1)}return t}},removeItem:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof ke&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},itemsTree:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this.root);return null===t?new x:t}if(1===arguments.length){for(var e=arguments[0],n=new x,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Fe){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof ke?n.add(r.getItem()):f.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){f.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new ke(t,e))},boundablesAtLevel:function(){if(1===arguments.length){var t=arguments[0],e=new x;return this.boundablesAtLevel(t,this.root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(f.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Fe?this.boundablesAtLevel(n,a,r):(f.isTrue(a instanceof ke),n===-1&&r.add(a))}return null}},query:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new x;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,i)}else if(3===arguments.length)if(C(arguments[2],Oe)&&arguments[0]instanceof Object&&arguments[1]instanceof Fe)for(var r=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),u=0;u<s.size();u++){var l=s.get(u);this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof Fe?this.query(r,l,a):l instanceof ke?a.visitItem(l.getItem()):f.shouldNeverReachHere())}else if(C(arguments[2],v)&&arguments[0]instanceof Object&&arguments[1]instanceof Fe)for(var c=arguments[0],h=arguments[1],p=arguments[2],s=h.getChildBoundables(),u=0;u<s.size();u++){var l=s.get(u);this.getIntersectsOp().intersects(l.getBounds(),c)&&(l instanceof Fe?this.query(c,l,p):l instanceof ke?p.add(l.getItem()):f.shouldNeverReachHere())}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove(t,this.root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var a=null,s=i.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Fe&&(o=this.remove(n,u,r))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),o}},createHigherLevels:function(t,e){f.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===arguments.length){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof Fe){var r=this.depth(i);r>e&&(e=r)}}return e+1}},createParentBoundables:function(t,e){f.isTrue(!t.isEmpty());var n=new x;n.add(this.createNode(e));var i=new x(t);ha.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[u]},getClass:function(){return je}}),je.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},je.IntersectsOp=Be,je.serialVersionUID=-0x35ef64c82d4c5400,je.DEFAULT_NODE_CAPACITY=10,e(Ge.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Ge}}),c(Ue,je),e(Ue.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){f.isTrue(t.length>0);for(var n=new x,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},createNode:function(t){return new Ve(t)},size:function(){return 0===arguments.length?je.prototype.size.call(this):je.prototype.size.apply(this,arguments)},insert:function(){if(2!==arguments.length)return je.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void je.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return Ue.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new x;for(var a=0;r.hasNext()&&a<n;){var s=r.next();i[o].add(s),a++}}return i},query:function(){if(1===arguments.length){var t=arguments[0];return je.prototype.query.call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];je.prototype.query.call(this,e,n)}else if(3===arguments.length)if(C(arguments[2],Oe)&&arguments[0]instanceof Object&&arguments[1]instanceof Fe){var i=arguments[0],r=arguments[1],o=arguments[2];je.prototype.query.call(this,i,r,o)}else if(C(arguments[2],v)&&arguments[0]instanceof Object&&arguments[1]instanceof Fe){var a=arguments[0],s=arguments[1],u=arguments[2];je.prototype.query.call(this,a,s,u)}},getComparator:function(){return Ue.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return je.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return je.prototype.remove.call(this,t,e)}return je.prototype.remove.apply(this,arguments)},depth:function(){return 0===arguments.length?je.prototype.depth.call(this):je.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){f.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new x(t);ha.sort(i,Ue.xComparator);var r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)},nearestNeighbour:function(){if(1===arguments.length){if(C(arguments[0],Ge)){var t=arguments[0],e=new ze(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof ze){var n=arguments[0];return this.nearestNeighbour(n,r.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof Ue&&C(arguments[1],Ge)){var i=arguments[0],o=arguments[1],e=new ze(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(e)}if(arguments[0]instanceof ze&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],u=s,l=null,c=new Re;for(c.add(a);!c.isEmpty()&&u>0;){var h=c.poll(),f=h.getDistance();if(f>=u)break;h.isLeaves()?(u=f,l=h):h.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[0],d=arguments[1],g=arguments[2],m=new ke(p,d),e=new ze(this.getRoot(),m,g);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[De,u]},getClass:function(){return Ue}}),Ue.centreX=function(t){return Ue.avg(t.getMinX(),t.getMaxX())},Ue.avg=function(t,e){return(t+e)/2},Ue.centreY=function(t){return Ue.avg(t.getMinY(),t.getMaxY())},c(Ve,Fe),e(Ve.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new E(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Ve}}),Ue.STRtreeNode=Ve,Ue.serialVersionUID=0x39920f7d5f261e0,Ue.xComparator={interfaces_:function(){return[s]},compare:function(t,e){return je.compareDoubles(Ue.centreX(t.getBounds()),Ue.centreX(e.getBounds()))}},Ue.yComparator={interfaces_:function(){return[s]},compare:function(t,e){return je.compareDoubles(Ue.centreY(t.getBounds()),Ue.centreY(e.getBounds()))}},Ue.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},Ue.DEFAULT_NODE_CAPACITY=10,e(Ke.prototype,{interfaces_:function(){return[]},getClass:function(){return Ke}}),Ke.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Ke.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=Ke.relativeSign(e.x,n.x),r=Ke.relativeSign(e.y,n.y);switch(t){case 0:return Ke.compareValue(i,r);case 1:return Ke.compareValue(r,i);case 2:return Ke.compareValue(r,-i);case 3:return Ke.compareValue(-i,r);case 4:return Ke.compareValue(-i,-r);case 5:return Ke.compareValue(-r,-i);case 6:return Ke.compareValue(-r,i);case 7:return Ke.compareValue(i,-r)}return f.shouldNeverReachHere("invalid octant value"),0},Ke.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0},e(He.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Ke.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},isInterior:function(){return this._isInterior},interfaces_:function(){return[o]},getClass:function(){return He}}),e(qe.prototype,{getSplitCoordinates:function(){var t=new w;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new x;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),i=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(i)&&t.add(new P(e+1))}},addEdgeCoordinates:function(t,e,n){var i=e.segmentIndex-t.segmentIndex+2,r=this.edge.getCoordinate(e.segmentIndex),o=e.isInterior()||!e.coord.equals2D(r);o||i--,n.add(new p(t.coord),!1);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)n.add(this.edge.getCoordinate(a));o&&n.add(new p(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next(),o=this.findCollapseIndex(i,r,e);o&&t.add(new P(e[0])),i=r}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new p(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.getCoordinate(s);return r&&(o[a]=new p(e.coord)),new Ye(o,this.edge.getData())},add:function(t,e){var n=new He(this.edge,t,e,this.edge.getSegmentOctant(e)),i=this.nodeMap.get(n);return null!==i?(f.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0),i=n.getCoordinate(0);if(!i.equals2D(e[0]))throw new l("bad split edge start point at "+i);var r=t.get(t.size()-1),o=r.getCoordinates(),a=o[o.length-1];if(!a.equals2D(e[e.length-1]))throw new l("bad split edge end point at "+a)},interfaces_:function(){return[]},getClass:function(){return qe}}),e(Xe.prototype,{next:function(){return null===this.currNode?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):null===this.nextNode?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex>this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return null!==this.nextNode},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[g]},getClass:function(){return Xe}}),e(We.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[Pe]},getClass:function(){return We}}),e(Ye.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:Ne.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=(arguments[2],arguments[3]),o=new p(n.getIntersection(r));this.addIntersection(o,i)}},toString:function(){return oe.toLineString(new Ft(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,i=n+1;if(i<this.pts.length){var r=this.pts[i];t.equals2D(r)&&(n=i)}var o=this.nodeList.add(t,n);return o},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[We]},getClass:function(){return Ye}}),Ye.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new x;return Ye.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var o=r.next();o.getNodeList().addSplitEdges(i)}},e(Je.prototype,{overlap:function(){if(2===arguments.length)arguments[0],arguments[1];else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(i,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}},interfaces_:function(){return[]},getClass:function(){return Je}}),e($e.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,i){var r=this.pts[e],o=this.pts[n];if(i.tempEnv1.init(r,o),n-e===1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,i),a<n&&this.computeSelect(t,a,n,i)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(null===this.env){var t=this.pts[this.start],e=this.pts[this.end];this.env=new E(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,i,r,o){var a=this.pts[t],s=this.pts[e],u=n.pts[i],l=n.pts[r];if(e-t===1&&r-i===1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((i+r)/2);t<c&&(i<h&&this.computeOverlapsInternal(t,c,n,i,h,o),h<r&&this.computeOverlapsInternal(t,c,n,h,r,o)),c<e&&(i<h&&this.computeOverlapsInternal(c,e,n,i,h,o),h<r&&this.computeOverlapsInternal(c,e,n,h,r,o))},interfaces_:function(){return[]},getClass:function(){return $e}}),e(Ze.prototype,{interfaces_:function(){return[]},getClass:function(){return Ze}}),Ze.isNorthern=function(t){return t===Ze.NE||t===Ze.NW},Ze.isOpposite=function(t,e){if(t===e)return!1;var n=(t-e+4)%4;return 2===n},Ze.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(2===n)return-1;var i=t<e?t:e,r=t>e?t:e;return 0===i&&3===r?3:i},Ze.isInHalfPlane=function(t,e){return e===Ze.SE?t===Ze.SE||t===Ze.SW:t===e||t===e+1},Ze.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Ze.NE:Ze.SE:e>=0?Ze.NW:Ze.SW}if(arguments[0]instanceof p&&arguments[1]instanceof p){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new i("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Ze.NE:Ze.SE:r.y>=n.y?Ze.NW:Ze.SW}},Ze.NE=0,Ze.NW=1,Ze.SW=2,Ze.SE=3,e(Qe.prototype,{interfaces_:function(){return[]},getClass:function(){return Qe}}),Qe.getChainStartIndices=function(t){var e=0,n=new x;n.add(new P(e));do{var i=Qe.findChainEnd(t,e);n.add(new P(i)),e=i}while(e<t.length-1);var r=Qe.toIntArray(n);return r},Qe.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Ze.quadrant(t[n],t[n+1]),r=e+1;r<t.length;){if(!t[r-1].equals2D(t[r])){var o=Ze.quadrant(t[r-1],t[r]);if(o!==i)break}r++}return r-1},Qe.getChains=function(){if(1===arguments.length){var t=arguments[0];return Qe.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new x,r=Qe.getChainStartIndices(e),o=0;o<r.length-1;o++){var a=new $e(e,r[o],r[o+1],n);i.add(a)}return i}},Qe.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(tn.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return tn}}),e(en.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[tn]},getClass:function(){return en}}),c(nn,en),e(nn.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Ye.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=Qe.getChains(t.getCoordinates(),t),n=e.iterator();n.hasNext();){var i=n.next();i.setId(this.idCounter++),this.index.insert(i.getEnvelope(),i),this.monoChains.add(i)}},computeNodes:function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new rn(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this.index.query(n.getEnvelope()),r=i.iterator();r.hasNext();){var o=r.next();if(o.getId()>n.getId()&&(n.computeOverlaps(o,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return nn}}),c(rn,Je),e(rn.prototype,{overlap:function(){if(4!==arguments.length)return Je.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=t.getContext(),o=n.getContext();this.si.processIntersections(r,e,o,i)},interfaces_:function(){return[]},getClass:function(){return rn}}),nn.SegmentOverlapAction=rn,c(on,l),e(on.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return on}}),on.msgWithCoord=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(an.prototype,{processIntersections:function(t,e,n,i){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return an}}),e(sn.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,i){if(!this.findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this.isCheckEndSegmentsOnly){var r=this.isEndSegment(t,e)||this.isEndSegment(n,i);if(!r)return null}var o=t.getCoordinates()[e],a=t.getCoordinates()[e+1],s=n.getCoordinates()[i],u=n.getCoordinates()[i+1];this.li.computeIntersection(o,a,s,u),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=o,this.intSegments[1]=a,this.intSegments[2]=s,this.intSegments[3]=u,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return 0===e||e>=t.size()-2},hasIntersection:function(){return null!==this.interiorIntersection},isDone:function(){return!this.findAllIntersections&&null!==this.interiorIntersection},interfaces_:function(){return[an]},getClass:function(){return sn}}),sn.createAllIntersectionsFinder=function(t){var e=new sn(t);return e.setFindAllIntersections(!0),e},sn.createAnyIntersectionFinder=function(t){return new sn(t)},sn.createIntersectionCounter=function(t){var e=new sn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},e(un.prototype,{execute:function(){return null!==this.segInt?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new sn(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new nn;if(t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection())return this._isValid=!1,null},checkValid:function(){if(this.execute(),!this._isValid)throw new on(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+oe.toLineString(t[0],t[1])+" and "+oe.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return un}}),un.computeIntersections=function(t){var e=new un(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},e(ln.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return ln}}),ln.toSegmentStrings=function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Le(i.getCoordinates(),i))}return e},ln.checkValid=function(t){var e=new ln(t);e.checkValid()},e(cn.prototype,{map:function(t){for(var e=new x,n=0;n<t.getNumGeometries();n++){var i=this.mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(ie.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return cn}}),cn.map=function(t,e){var n=new cn(e);return n.map(t)},e(hn.prototype,{interfaces_:function(){return[]},getClass:function(){return hn}}),hn.opposite=function(t){return t===hn.LEFT?hn.RIGHT:t===hn.RIGHT?hn.LEFT:t},hn.ON=0,hn.LEFT=1,hn.RIGHT=2,e(fn.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==T.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===T.NONE&&(this.location[e]=t)},isLine:function(){return 1===this.location.length},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[hn.ON]=this.location[hn.ON],e[hn.LEFT]=T.NONE,e[hn.RIGHT]=T.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===T.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[hn.LEFT];this.location[hn.LEFT]=this.location[hn.RIGHT],this.location[hn.RIGHT]=t},toString:function(){var t=new N;return this.location.length>1&&t.append(T.toLocationSymbol(this.location[hn.LEFT])),t.append(T.toLocationSymbol(this.location[hn.ON])),this.location.length>1&&t.append(T.toLocationSymbol(this.location[hn.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[hn.ON]=t,this.location[hn.LEFT]=e,this.location[hn.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:T.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===T.NONE)return!0;return!1},setLocation:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(hn.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(T.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return fn}}),e(pn.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new fn(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(hn.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new N;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(hn.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new fn(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return pn}}),pn.toLineLabel=function(t){for(var e=new pn(T.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e},e(dn.prototype,{computeRing:function(){if(null!==this.ring)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=ce.isCCW(this.ring.getCoordinates())},isIsolated:function(){return 1===this.label.getGeometryCount()},computePoints:function(t){this.startDe=t;var e=t,n=!0;do{if(null===e)throw new on("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new on("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var i=e.getLabel();f.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),n=e.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this.pts.add(i[o])}else{var r=i.length-2;n&&(r=i.length-1);for(var o=r;o>=0;o--)this.pts.add(i[o])}},isHole:function(){return this._isHole},setInResult:function(){var t=this.startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this.startDe)},containsPoint:function(t){var e=this.getLinearRing(),n=e.getEnvelopeInternal();if(!n.contains(t))return!1;if(!ce.isPointInRing(t,e.getCoordinates()))return!1;for(var i=this.holes.iterator();i.hasNext();){
var r=i.next();if(r.containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return null===this.shell},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,hn.RIGHT);if(i===T.NONE)return null;if(this.label.getLocation(n)===T.NONE)return this.label.setLocation(n,i),null}},setShell:function(t){this.shell=t,null!==t&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();var i=t.createPolygon(this.getLinearRing(),e);return i},interfaces_:function(){return[]},getClass:function(){return dn}}),c(gn,dn),e(gn.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return gn}}),c(mn,dn),e(mn.prototype,{buildMinimalRings:function(){var t=new x,e=this.startDe;do{if(null===e.getMinEdgeRing()){var n=new gn(e,this.geometryFactory);t.add(n)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{var e=t.getNode();e.getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return mn}}),e(yn.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){f.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return yn}}),c(vn,yn),e(vn.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){var e=t.next();if(e.getEdge().isInResult())return!0}return!1},isIsolated:function(){return 1===this.label.getGeometryCount()},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=T.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==T.BOUNDARY&&(n=i)}return n},setLabel:function(){if(2!==arguments.length)return yn.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this.label?this.label=new pn(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof vn){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof pn)for(var e=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(e,n),r=this.label.getLocation(n);r===T.NONE&&this.label.setLocation(n,i)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(null===this.label)return null;var e=T.NONE;null!==this.label&&(e=this.label.getLocation(t));var n=null;switch(e){case T.BOUNDARY:n=T.INTERIOR;break;case T.INTERIOR:n=T.BOUNDARY;break;default:n=T.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return vn}}),e(bn.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof p){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof vn){var n=arguments[0],e=this.nodeMap.get(n.getCoordinate());return null===e?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new x,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===T.BOUNDARY&&e.add(i)}return e},add:function(t){var e=t.getCoordinate(),n=this.addNode(e);n.add(t)},interfaces_:function(){return[]},getClass:function(){return bn}}),e(_n.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:ce.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf("."),i=e.substring(n+1);return"  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=Ze.quadrant(this.dx,this.dy),f.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[o]},getClass:function(){return _n}}),c(xn,_n),e(xn.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new pn(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(this.depth[t]!==-999&&this.depth[t]!==e)throw new on("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function t(){for(var t=!0,e=0;e<2;e++)this.label.isArea(e)&&this.label.getLocation(e,hn.LEFT)===T.INTERIOR&&this.label.getLocation(e,hn.RIGHT)===T.INTERIOR||(t=!1);return t},setNextMin:function(t){this.nextMin=t},print:function(t){_n.prototype.print.call(this,t),t.print(" "+this.depth[hn.LEFT]+"/"+this.depth[hn.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,T.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,T.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===hn.LEFT&&(i=-1);var r=hn.opposite(t),o=n*i,a=e+o;this.setDepth(t,e),this.setDepth(r,a)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return xn}}),xn.depthFactor=function(t,e){return t===T.EXTERIOR&&e===T.INTERIOR?1:t===T.INTERIOR&&e===T.EXTERIOR?-1:0},e(wn.prototype,{createNode:function(t){return new vn(t,null)},interfaces_:function(){return[]},getClass:function(){return wn}}),e(En.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof vn){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof p){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){O.out.println(t)},isBoundaryNode:function(t,e){var n=this.nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===T.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,i){return!!t.equals(n)&&ce.computeOrientation(t,e,i)===ce.COLLINEAR&&Ze.quadrant(t,e)===Ze.quadrant(n,i)},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){O.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var i=new xn(n,!0),r=new xn(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},interfaces_:function(){return[]},getClass:function(){return En}}),En.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}},e(Sn.prototype,{sortShellsAndHoles:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},computePolygons:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next(),r=i.toPolygon(this.geometryFactory);e.add(r)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new on("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},buildMinimalEdgeRings:function(t,e,n){for(var i=new x,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else i.add(o)}return i},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){var n=e.next();if(n.containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new mn(i,this.geometryFactory);e.add(r),r.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},getPolygons:function(){var t=this.computePolygons(this.shellList);return t},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(i)&&ce.isPointInRing(r,l.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=u)}return o},findShell:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return f.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},add:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];En.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new x,o=this.buildMinimalEdgeRings(i,this.shellList,r);this.sortShellsAndHoles(o,this.shellList,r),this.placeFreeHoles(this.shellList,r)}},interfaces_:function(){return[]},getClass:function(){return Sn}}),e(Mn.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!ii.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getEdge();if(i.isLineEdge()&&!r.isCoveredSet()){var o=this.op.isCoveredByA(i.getCoordinate());r.setCovered(o)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(i),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var i=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(f.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(ii.isResultOfOp(i,e)&&e===ii.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return Mn}}),e(Tn.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==ii.INTERSECTION)){var i=n.getLabel();ii.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return Tn}}),e(Cn.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return Cn}}),e(In.prototype,{locate:function(t){return In.locate(t,this.geom)},interfaces_:function(){return[Cn]},getClass:function(){return In}}),In.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&ce.isPointInRing(t,e.getCoordinates())},In.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!In.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(In.isPointInRing(t,r))return!1}return!0},In.containsPoint=function(t,e){if(e instanceof It)return In.containsPointInPolygon(t,e);if(e instanceof ft)for(var n=new Ce(e);n.hasNext();){var i=n.next();if(i!==e&&In.containsPoint(t,i))return!0}return!1},In.locate=function(t,e){return e.isEmpty()?T.EXTERIOR:In.containsPoint(t,e)?T.INTERIOR:T.EXTERIOR},e(Nn.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return 0===e&&(n=this.edgeList.size()-1),this.edgeList.get(n)},propagateSideLabels:function(t){for(var e=T.NONE,n=this.iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea(t)&&r.getLocation(t,hn.LEFT)!==T.NONE&&(e=r.getLocation(t,hn.LEFT))}if(e===T.NONE)return null;for(var o=e,n=this.iterator();n.hasNext();){var i=n.next(),r=i.getLabel();if(r.getLocation(t,hn.ON)===T.NONE&&r.setLocation(t,hn.ON,o),r.isArea(t)){var a=r.getLocation(t,hn.LEFT),s=r.getLocation(t,hn.RIGHT);if(s!==T.NONE){if(s!==o)throw new on("side location conflict",i.getCoordinate());a===T.NONE&&f.shouldNeverReachHere("found single null side (at "+i.getCoordinate()+")"),o=a}else f.isTrue(r.getLocation(t,hn.LEFT)===T.NONE,"found single null side"),r.setLocation(t,hn.RIGHT,o),r.setLocation(t,hn.LEFT,o)}}},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},print:function(t){O.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel(),r=i.getLocation(t,hn.LEFT);f.isTrue(r!==T.NONE,"Found unlabelled area edge");for(var o=r,a=this.iterator();a.hasNext();){var s=a.next(),u=s.getLabel();f.isTrue(u.isArea(t),"Found non-area edge");var l=u.getLocation(t,hn.LEFT),c=u.getLocation(t,hn.RIGHT);if(l===c)return!1;if(c!==o)return!1;o=l}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){var n=this.edgeList.get(e);if(n===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return null===this.edgeList&&(this.edgeList=new x(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===T.NONE&&(this.ptInAreaLocation[t]=In.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new N;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next(),r=i.getLabel(),o=0;o<2;o++)r.isLine(o)&&r.getLocation(o)===T.BOUNDARY&&(e[o]=!0);for(var n=this.iterator();n.hasNext();)for(var i=n.next(),r=i.getLabel(),o=0;o<2;o++)if(r.isAnyNull(o)){var a=T.NONE;if(e[o])a=T.EXTERIOR;else{var s=i.getCoordinate();a=this.getLocation(o,s,t)}r.setAllLocationsIfNull(o,a)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return Nn}}),c(Pn,Nn),e(Pn.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,i=0;i<this.resultAreaEdgeList.size();i++){var r=this.resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this.SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===t)throw new on("no outgoing dirEdge found",this.getCoordinate());f.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Ze.isNorthern(r)&&Ze.isNorthern(o)?n:Ze.isNorthern(r)||Ze.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(f.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},print:function(t){O.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new x;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var i=this.edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},computeDepths:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth(hn.LEFT)),i=t.getDepth(hn.RIGHT),r=this.computeDepths(e+1,this.edgeList.size(),n),o=this.computeDepths(0,e,r);if(o!==i)throw new on("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var a=arguments[0],s=arguments[1],u=arguments[2],l=u,c=a;c<s;c++){var h=this.edgeList.get(c);h.getLabel(),h.setEdgeDepths(hn.RIGHT,l),l=h.getDepth(hn.LEFT)}return l}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();n.merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,i=this.SCANNING_FOR_INCOMING,r=this.resultAreaEdgeList.size()-1;r>=0;r--){var o=this.resultAreaEdgeList.get(r),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this.SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,i=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this.SCANNING_FOR_INCOMING}}i===this.LINKING_TO_OUTGOING&&(f.isTrue(null!==e,"found null for first outgoing dirEdge"),f.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var i=arguments[0],t=0,e=this.iterator();e.hasNext();){var n=e.next();n.getEdgeRing()===i&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=T.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=T.INTERIOR;break}if(i.isInResult()){t=T.EXTERIOR;break}}}if(t===T.NONE)return null;for(var r=t,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();n.isLineEdge()?n.getEdge().setCovered(r===T.INTERIOR):(n.isInResult()&&(r=T.EXTERIOR),i.isInResult()&&(r=T.INTERIOR))}},computeLabelling:function(t){Nn.prototype.computeLabelling.call(this,t),this.label=new pn(T.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next(),i=n.getEdge(),r=i.getLabel(),o=0;o<2;o++){var a=r.getLocation(o);a!==T.INTERIOR&&a!==T.BOUNDARY||this.label.setLocation(o,T.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Pn}}),c(Ln,wn),e(Ln.prototype,{createNode:function(t){return new vn(t,new Pn)},interfaces_:function(){return[]},getClass:function(){return Ln}}),e(An.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return An}}),e(kn.prototype,{isDelete:function(){return this.eventType===kn.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===kn.INSERT},isSameLabel:function(t){return null!==this.label&&this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[o]},getClass:function(){return kn}}),kn.INSERT=1,kn.DELETE=2,e(Rn.prototype,{interfaces_:function(){return[]},getClass:function(){return Rn}}),e(On.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(On.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next(),r=i.getCoordinate();if(t.isIntersection(r))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,a,s),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return On}}),On.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},c(Dn,Rn),e(Dn.prototype,{prepareEvents:function(){ha.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof On&&C(arguments[0],v)&&C(arguments[1],v)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&C(arguments[0],v)&&arguments[1]instanceof On){var a=arguments[0],s=arguments[1],u=arguments[2];u?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new An(n,r),a=new kn(e,n.getMinX(r),o);this.events.add(a),this.events.add(new kn(n.getMaxX(r),a))}},processOverlaps:function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(r.computeIntersections(s,i),this.nOverlaps++)}}},addEdges:function(){if(1===arguments.length)for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.addEdge(n,n)}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1],e=i.iterator();e.hasNext();){var n=e.next();this.addEdge(n,r)}},interfaces_:function(){return[]},getClass:function(){return Dn}}),e(Fn.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return oe.toLineString(new p(this.min,0),new p(this.max,0))},interfaces_:function(){return[]},getClass:function(){return Fn}}),e(zn.prototype,{compare:function(t,e){var n=t,i=e,r=(n.min+n.max)/2,o=(i.min+i.max)/2;return r<o?-1:r>o?1:0},interfaces_:function(){return[s]},getClass:function(){return zn}}),Fn.NodeComparator=zn,c(jn,Fn),e(jn.prototype,{query:function(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return jn}}),c(Bn,Fn),e(Bn.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){return this.intersects(t,e)?(null!==this.node1&&this.node1.query(t,e,n),void(null!==this.node2&&this.node2.query(t,e,n))):null},interfaces_:function(){return[]},getClass:function(){return Bn}}),e(Gn.prototype,{buildTree:function(){ha.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,n=new x;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new jn(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){return null!==this.root?null:void(this.root=this.buildTree())},printNode:function(t){O.out.println(oe.toLineString(new p(t.min,this.level),new p(t.max,this.level)))},init:function(){return null!==this.root?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n),r=n+1<t.size()?t.get(n):null;if(null===r)e.add(i);else{var o=new Bn(t.get(n),t.get(n+1));e.add(o)}}},interfaces_:function(){return[]},getClass:function(){return Gn}}),e(Un.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof Pt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof St&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[z]},getClass:function(){return Un}}),Un.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Un.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Un.getLines(e,n))}},Un.getLines=function(){if(1===arguments.length){var t=arguments[0];return Un.getLines(t,!1)}if(2===arguments.length){if(C(arguments[0],m)&&C(arguments[1],m)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();Un.getLines(r,n)}return n}if(arguments[0]instanceof j&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new x;return o.apply(new Un(s,a)),s}if(arguments[0]instanceof j&&C(arguments[1],m)){var u=arguments[0],l=arguments[1];return u instanceof St?l.add(u):u.apply(new Un(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&C(arguments[0],m)&&C(arguments[1],m)){for(var c=arguments[0],h=arguments[1],f=arguments[2],i=c.iterator();i.hasNext();){var r=i.next();Un.getLines(r,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof j&&C(arguments[1],m)){var p=arguments[0],d=arguments[1],g=arguments[2];return p.apply(new Un(d,g)),d}}},e(Vn.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Oe]},getClass:function(){return Vn}}),e(Kn.prototype,{locate:function(t){var e=new le(t),n=new Hn(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[Cn]},getClass:function(){return Kn}}),e(Hn.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1));
},interfaces_:function(){return[Oe]},getClass:function(){return Hn}}),e(qn.prototype,{init:function(t){for(var e=Un.getLines(t),n=e.iterator();n.hasNext();){var i=n.next(),r=i.getCoordinates();this.addLine(r)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new he(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this.index.insert(i,r,n)}},query:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Vn;return this.index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.index.query(i,r,o)}},interfaces_:function(){return[]},getClass:function(){return qn}}),Kn.SegmentVisitor=Hn,Kn.IntervalIndexedGeometry=qn,e(Xn.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[o]},getClass:function(){return Xn}}),e(Wn.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new p(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return r&&(o[a]=e.coord),new Zn(o,new pn(this.edge.label))},add:function(t,e,n){var i=new Xn(t,e,n),r=this.nodeMap.get(i);return null!==r?r:(this.nodeMap.put(i,i),i)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return Wn}}),e(Yn.prototype,{getChainStartIndices:function(t){var e=0,n=new x;n.add(new P(e));do{var i=this.findChainEnd(t,e);n.add(new P(i)),e=i}while(e<t.length-1);var r=Yn.toIntArray(n);return r},findChainEnd:function(t,e){for(var n=Ze.quadrant(t[e],t[e+1]),i=e+1;i<t.length;){var r=Ze.quadrant(t[i-1],t[i]);if(r!==n)break;i++}return i-1},interfaces_:function(){return[]},getClass:function(){return Yn}}),Yn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(Jn.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},computeIntersectsForChain:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[r],h=this.pts[o],f=a.pts[s],p=a.pts[u];if(o-r===1&&u-s===1)return l.addIntersections(this.e,r,a.e,s),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),g=Math.trunc((s+u)/2);r<d&&(s<g&&this.computeIntersectsForChain(r,d,a,s,g,l),g<u&&this.computeIntersectsForChain(r,d,a,g,u,l)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,l),g<u&&this.computeIntersectsForChain(d,o,a,g,u,l))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},interfaces_:function(){return[]},getClass:function(){return Jn}}),e($n.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this.depth[t][e]!==$n.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this.depth[n][1]===$n.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.depth[i][r]===$n.NULL_VALUE}},normalize:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this.depth[t][n]>e&&(i=1),this.depth[t][n]=i}}},getDelta:function(t){return this.depth[t][hn.RIGHT]-this.depth[t][hn.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?T.EXTERIOR:T.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==T.EXTERIOR&&i!==T.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=$n.depthAtLocation(i):this.depth[e][n]+=$n.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];a===T.INTERIOR&&this.depth[r][o]++}},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.depthAtLocation=function(t){return t===T.EXTERIOR?0:t===T.INTERIOR?1:$n.NULL_VALUE},$n.NULL_VALUE=-1,c(Zn,yn),e(Zn.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];var e=new Zn(t,pn.toLineLabel(this.label));return e},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof Zn))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,r=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0},getCoordinate:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){Zn.updateIM(this.label,t)},isCollapsed:function(){return!!this.label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return null===this.mce&&(this.mce=new Jn(this)),this.mce},getEnvelope:function(){if(null===this.env){this.env=new E;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,i){var r=new p(t.getIntersection(i)),o=e,a=t.getEdgeDistance(n,i),s=o+1;if(s<this.pts.length){var u=this.pts[s];r.equals2D(u)&&(o=s,a=0)}this.eiList.add(r,o,a)},toString:function(){var t=new N;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[]},getClass:function(){return Zn}}),Zn.updateIM=function(){if(2!==arguments.length)return yn.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,hn.ON),t.getLocation(1,hn.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,hn.LEFT),t.getLocation(1,hn.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,hn.RIGHT),t.getLocation(1,hn.RIGHT),2))},c(Qn,En),e(Qn.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e),i=n.getLabel(),r=1,o=T.NONE;o=i.getLocation(t,hn.ON),o===T.BOUNDARY&&r++;var a=Qn.determineBoundary(this.boundaryNodeRule,r);i.setLocation(t,a)},computeSelfNodes:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new On(n,!0,!1);o.setIsDoneIfProperInt(r);var a=this.createEdgeSetIntersector(),s=this.parentGeom instanceof Pt||this.parentGeom instanceof It||this.parentGeom instanceof Lt,u=i||!s;return a.computeIntersections(this.edges,o,u),this.addSelfIntersectionNodes(this.argIndex),o}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){var n=e.next();n.eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){var i=new On(e,n,!0);i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());var r=this.createEdgeSetIntersector();return r.computeIntersections(this.edges,t.edges,i),i},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof Tt){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this.argIndex,e,T.INTERIOR)}else if(arguments[0]instanceof p){var n=arguments[0];this.insertPoint(this.argIndex,n,T.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),T.EXTERIOR,T.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,T.INTERIOR,T.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],T.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],T.BOUNDARY)},addLineString:function(t){var e=q.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new Zn(e,new pn(this.argIndex,T.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),f.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},getBoundaryNodes:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===T.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var i=q.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=i[0],null;var r=e,o=n;ce.isCCW(i)&&(r=n,o=e);var a=new Zn(i,new pn(this.argIndex,T.BOUNDARY,r,o));this.lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this.argIndex,i[0],T.BOUNDARY)},insertPoint:function(t,e,n){var i=this.nodes.addNode(e),r=i.getLabel();null===r?i.label=new pn(t,n):r.setLocation(t,n)},createEdgeSetIntersector:function(){return new Dn},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},add:function(){if(1!==arguments.length)return En.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Lt&&(this.useBoundaryDeterminationRule=!1),t instanceof It)this.addPolygon(t);else if(t instanceof St)this.addLineString(t);else if(t instanceof Tt)this.addPoint(t);else if(t instanceof Nt)this.addCollection(t);else if(t instanceof pt)this.addCollection(t);else if(t instanceof Lt)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return C(this.parentGeom,Ct)&&this.parentGeom.getNumGeometries()>50?(null===this.areaPtLocator&&(this.areaPtLocator=new Kn(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(1===arguments.length){var t=arguments[0];return this.lineEdgeMap.get(t)}return En.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return Qn}}),Qn.determineBoundary=function(t,e){return t.isInBoundary(e)?T.BOUNDARY:T.INTERIOR},e(ti.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return ti}}),e(ei.prototype,{compareTo:function(t){var e=t,n=ei.compareOriented(this.pts,this._orientation,e.pts,e._orientation);return n},interfaces_:function(){return[o]},getClass:function(){return ei}}),ei.orientation=function(t){return 1===q.increasingDirection(t)},ei.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,a=e?t.length:-1,s=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;u+=r,l+=o;var h=u===a,f=l===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}},e(ni.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new ei(t.getCoordinates()),n=this.ocaMap.get(e);return n},add:function(t){this.edges.add(t);var e=new ei(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return ni}}),c(ii,ti),e(ii.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new pn(t.getLabel()),i.flip());var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,i){var r=new x;return r.addAll(t),r.addAll(e),r.addAll(n),r.isEmpty()?ii.createEmptyResult(i,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(r)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next(),r=this.ptLocator.locate(t,i);if(r!==T.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new x,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new x;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ln.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Sn(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var i=new Mn(this,this.geomFact,this.ptLocator);this.resultLineList=i.build(t);var r=new Tn(this,this.geomFact,this.ptLocator);this.resultPointList=r.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),i=this.graph.addNode(n.getCoordinate());i.setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&ii.isResultOfOp(i.getLocation(0,hn.RIGHT),i.getLocation(1,hn.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(f.isTrue(!i.isNull(r,hn.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,hn.LEFT,i.getLocation(r,hn.LEFT)),f.isTrue(!i.isNull(r,hn.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,hn.RIGHT,i.getLocation(r,hn.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(t++,i.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(i)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return ii}}),ii.overlayOp=function(t,e,n){var i=new ii(t,e),r=i.getResultGeometry(n);return r},ii.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return ii.createEmptyResult(ii.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return cn.map(t,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ii.INTERSECTION)},ii.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ii.createEmptyResult(ii.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ii.SYMDIFFERENCE)},ii.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case ii.INTERSECTION:o=Math.min(i,r);break;case ii.UNION:o=Math.max(i,r);break;case ii.DIFFERENCE:o=i;break;case ii.SYMDIFFERENCE:o=Math.max(i,r)}return o},ii.createEmptyResult=function(t,e,n,i){var r=null;switch(ii.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},ii.difference=function(t,e){return t.isEmpty()?ii.createEmptyResult(ii.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ii.DIFFERENCE))},ii.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return ii.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];switch(r===T.BOUNDARY&&(r=T.INTERIOR),o===T.BOUNDARY&&(o=T.INTERIOR),a){case ii.INTERSECTION:return r===T.INTERIOR&&o===T.INTERIOR;case ii.UNION:return r===T.INTERIOR||o===T.INTERIOR;case ii.DIFFERENCE:return r===T.INTERIOR&&o!==T.INTERIOR;case ii.SYMDIFFERENCE:return r===T.INTERIOR&&o!==T.INTERIOR||r!==T.INTERIOR&&o===T.INTERIOR}return!1}},ii.INTERSECTION=1,ii.UNION=2,ii.DIFFERENCE=3,ii.SYMDIFFERENCE=4,e(ri.prototype,{selfSnap:function(t){var e=new xe(t),n=e.snapTo(t,this.snapTolerance);return n},removeCommonBits:function(t){this.cbr=new Se,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),n=ii.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||O.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=xe.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t),n=xe.snap(e[0],e[1],this.snapTolerance);return n},interfaces_:function(){return[]},getClass:function(){return ri}}),ri.overlayOp=function(t,e,n){var i=new ri(t,e);return i.getResultGeometry(n)},ri.union=function(t,e){return ri.overlayOp(t,e,ii.UNION)},ri.intersection=function(t,e){return ri.overlayOp(t,e,ii.INTERSECTION)},ri.symDifference=function(t,e){return ri.overlayOp(t,e,ii.SYMDIFFERENCE)},ri.difference=function(t,e){return ri.overlayOp(t,e,ii.DIFFERENCE)},e(oi.prototype,{getResultGeometry:function(t){var e=null,n=!1,i=null;try{e=ii.overlayOp(this.geom[0],this.geom[1],t);var r=!0;r&&(n=!0)}catch(t){if(!(t instanceof l))throw t;i=t}finally{}if(!n)try{e=ri.overlayOp(this.geom[0],this.geom[1],t)}catch(t){throw t instanceof l?i:t}finally{}return e},interfaces_:function(){return[]},getClass:function(){return oi}}),oi.overlayOp=function(t,e,n){var i=new oi(t,e);return i.getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,ii.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,ii.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,ii.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,ii.DIFFERENCE)},e(ai.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,i=this.horizontalBisector(t);if(0===i.getLength())n=0,e=i.getCoordinate();else{var r=oi.overlayOp(i,t,ii.INTERSECTION),o=this.widestGeometry(r);n=o.getEnvelopeInternal().getWidth(),e=ai.centre(o.getEnvelopeInternal())}(null===this.interiorPoint||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function t(){if(arguments[0]instanceof ft){var e=arguments[0];if(e.isEmpty())return e;for(var t=e.getGeometryN(0),n=1;n<e.getNumGeometries();n++)e.getGeometryN(n).getEnvelopeInternal().getWidth()>t.getEnvelopeInternal().getWidth()&&(t=e.getGeometryN(n));return t}if(arguments[0]instanceof j){var i=arguments[0];return i instanceof ft?this.widestGeometry(i):i}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=si.getBisectorY(t);return this.factory.createLineString([new p(e.getMinX(),n),new p(e.getMaxX(),n)])},add:function(t){if(t instanceof It)this.addPolygon(t);else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return ai}}),ai.centre=function(t){return new p(ai.avg(t.getMinX(),t.getMaxX()),ai.avg(t.getMinY(),t.getMaxY()))},ai.avg=function(t,e){return(t+e)/2},e(si.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var e=ai.avg(this.hiY,this.loY);return e},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var i=e.getY(n);this.updateInterval(i)}},interfaces_:function(){return[]},getClass:function(){return si}}),si.getBisectorY=function(t){var e=new si(t);return e.getBisectorY()},ai.SafeBisectorFinder=si,e(ui.prototype,{addEndpoints:function(){if(arguments[0]instanceof j){var t=arguments[0];if(t instanceof St)this.addEndpoints(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var i=arguments[0];this.add(i[0]),this.add(i[i.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof j){var t=arguments[0];if(t instanceof St)this.addInterior(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array)for(var i=arguments[0],n=1;n<i.length-1;n++)this.add(i[n])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new p(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return ui}}),e(li.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof j){var t=arguments[0];if(t instanceof Tt)this.add(t.getCoordinate());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof p){var i=arguments[0],r=i.distance(this.centroid);r<this.minDistance&&(this.interiorPoint=new p(i),this.minDistance=r)}},interfaces_:function(){return[]},getClass:function(){return li}}),e(ci.prototype,{select:function(){if(1===arguments.length)arguments[0];else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},interfaces_:function(){return[]},getClass:function(){return ci}}),e(hi.prototype,{hasChildren:function(){for(var t=0;t<2;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<2;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return null===t||this.isSearchMatch(t)?(e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<2;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n?n:n=this.items.remove(e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<2;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return hi}}),hi.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},e(fi.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(1===arguments.length){var t=arguments[0];return this.overlaps(t.min,t.max)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(1===arguments.length){if(arguments[0]instanceof fi){var t=arguments[0];return this.contains(t.min,t.max)}if("number"==typeof arguments[0]){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return n>=this.min&&i<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return fi}}),pi.exponent=function(t){return di(64,t)-1023},pi.powerOf2=function(t){return Math.pow(2,t)},e(gi.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=gi.computeLevel(t),this.interval=new fi,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var n=pi.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return gi}}),gi.computeLevel=function(t){var e=t.getWidth(),n=pi.exponent(e)+1;return n},c(mi,hi),e(mi.prototype,{getInterval:function(){return this.interval},find:function(t){var e=hi.getSubnodeIndex(t,this.centre);if(e===-1)return this;if(null!==this.subnode[e]){var n=this.subnode[e];return n.find(t)}return this},insert:function(t){f.isTrue(null===this.interval||this.interval.contains(t.interval));var e=hi.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=hi.getSubnodeIndex(t,this.centre);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}var i=new fi(e,n),r=new mi(i,this.level-1);return r},interfaces_:function(){return[]},getClass:function(){return mi}}),mi.createNode=function(t){var e=new gi(t),n=new mi(e.getInterval(),e.getLevel());return n},mi.createExpanded=function(t,e){var n=new fi(e);null!==t&&n.expandToInclude(t.interval);var i=mi.createNode(n);return null!==t&&i.insert(t),i},e(yi.prototype,{interfaces_:function(){return[]},getClass:function(){return yi}});yi.isZeroWidth=function(t,e){var n=e-t;if(0===n)return!0;var i=Math.max(Math.abs(t),Math.abs(e)),r=n/i,o=pi.exponent(r);return o<=yi.MIN_BINARY_EXPONENT};yi.MIN_BINARY_EXPONENT=-50,c(vi,hi),e(vi.prototype,{insert:function(t,e){var n=hi.getSubnodeIndex(t,vi.origin);if(n===-1)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getInterval().contains(t)){var r=mi.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){
f.isTrue(t.getInterval().contains(e));var i=yi.isZeroWidth(e.getMin(),e.getMax()),r=null;r=i?t.find(e):t.getNode(e),r.add(n)},interfaces_:function(){return[]},getClass:function(){return vi}}),vi.origin=0,e(bi.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=bi.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];return this.query(new fi(t,t))}if(arguments[0]instanceof fi){var e=arguments[0],n=new x;return this.query(e,n),n}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.root.addAllItemsFromOverlapping(i,r)}},iterator:function(){var t=new x;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var n=bi.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},depth:function(){return null!==this.root?this.root.depth():0},nodeSize:function(){return null!==this.root?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return bi}}),bi.ensureExtent=function(t,e){var n=t.getMin(),i=t.getMax();return n!==i?t:(n===i&&(n-=e/2,i=n+e/2),new fi(n,i))},e(_i.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return _i}}),e(xi.prototype,{testLineSegment:function(t,e){var n=null,i=null,r=null,o=null,a=null,s=e.p0,u=e.p1;i=s.x-t.x,r=s.y-t.y,o=u.x-t.x,a=u.y-t.y,(r>0&&a<=0||a>0&&r<=0)&&(n=ue.signOfDet2x2(i,r,o,a)/(a-r),0<n&&this.crossings++)},buildIndex:function(){this.tree=new bi;for(var t=q.removeRepeatedPoints(this.ring.getCoordinates()),e=Qe.getChains(t),n=0;n<e.size();n++){var i=e.get(n),r=i.getEnvelope();this.interval.min=r.getMinY(),this.interval.max=r.getMaxY(),this.tree.insert(this.interval,i)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new E(r.NEGATIVE_INFINITY,r.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),i=new wi(this,t),o=n.iterator();o.hasNext();){var a=o.next();this.testMonotoneChain(e,i,a)}return this.crossings%2===1},interfaces_:function(){return[_i]},getClass:function(){return xi}}),c(wi,ci),e(wi.prototype,{select:function(){if(1!==arguments.length)return ci.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return wi}}),xi.MCSelecter=wi,e(Ei.prototype,{interfaces_:function(){return[]},getClass:function(){return Ei}}),Ei.toDegrees=function(t){return 180*t/Math.PI},Ei.normalize=function(t){for(;t>Math.PI;)t-=Ei.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ei.PI_TIMES_2;return t},Ei.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},Ei.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=n.x-e.x,a=n.y-e.y,s=i*o+r*a;return s>0},Ei.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=n.x-e.x,a=n.y-e.y,s=i*o+r*a;return s<0},Ei.interiorAngle=function(t,e,n){var i=Ei.angle(e,t),r=Ei.angle(e,n);return Math.abs(r-i)},Ei.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ei.PI_TIMES_2;t>=Ei.PI_TIMES_2&&(t=0)}else{for(;t>=Ei.PI_TIMES_2;)t-=Ei.PI_TIMES_2;t<0&&(t=0)}return t},Ei.angleBetween=function(t,e,n){var i=Ei.angle(e,t),r=Ei.angle(e,n);return Ei.diff(i,r)},Ei.diff=function(t,e){var n=null;return n=t<e?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n},Ei.toRadians=function(t){return t*Math.PI/180},Ei.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Ei.COUNTERCLOCKWISE:n<0?Ei.CLOCKWISE:Ei.NONE},Ei.angleBetweenOriented=function(t,e,n){var i=Ei.angle(e,t),r=Ei.angle(e,n),o=r-i;return o<=-Math.PI?o+Ei.PI_TIMES_2:o>Math.PI?o-Ei.PI_TIMES_2:o},Ei.PI_TIMES_2=2*Math.PI,Ei.PI_OVER_2=Math.PI/2,Ei.PI_OVER_4=Math.PI/4,Ei.COUNTERCLOCKWISE=ce.COUNTERCLOCKWISE,Ei.CLOCKWISE=ce.CLOCKWISE,Ei.NONE=ce.COLLINEAR,e(Si.prototype,{area:function(){return Si.area(this.p0,this.p1,this.p2)},signedArea:function(){return Si.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(null===t)throw new i("Supplied point is null.");return Si.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return Si.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return Si.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return Si.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return Si.area3D(this.p0,this.p1,this.p2)},centroid:function(){return Si.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return Si.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return Si}}),Si.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Si.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Si.det=function(t,e,n,i){return t*i-e*n},Si.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,a=n.x-r,s=i.x-r,u=n.y-o,l=i.y-o,c=a*l-s*u,h=t.x-r,f=t.y-o,p=(l*h-s*f)/c,d=(-u*h+a*f)/c,g=e.z+p*(n.z-e.z)+d*(i.z-e.z);return g},Si.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),a=i;return r>a&&(a=r),o>a&&(a=o),a},Si.isAcute=function(t,e,n){return!!Ei.isAcute(t,e,n)&&!!Ei.isAcute(e,n,t)&&!!Ei.isAcute(n,t,e)},Si.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,a=t.y-r,s=e.x-i,u=e.y-r,l=2*Si.det(o,a,s,u),c=Si.det(a,o*o+a*a,u,s*s+u*u),h=Si.det(o,o*o+a*a,s,s*s+u*u),f=i-c/l,d=r+h/l;return new p(f,d)},Si.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new D(t.x+n/2,t.y+i/2,1),o=new D(t.x-i+n/2,t.y+n+i/2,1);return new D(r,o)},Si.angleBisector=function(t,e,n){var i=e.distance(t),r=e.distance(n),o=i/(i+r),a=n.x-t.x,s=n.y-t.y,u=new p(t.x+o*a,t.y+o*s);return u},Si.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,l=r*u-o*s,c=o*a-i*u,h=i*s-r*a,f=l*l+c*c+h*h,p=Math.sqrt(f)/2;return p},Si.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new p(i,r)},Si.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),a=i+r+o,s=(i*t.x+r*e.x+o*n.x)/a,u=(i*t.y+r*e.y+o*n.y)/a;return new p(s,u)},e(Mi.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(1===this.input.getNumPoints()){var t=this.input.getCoordinates();return this.extremalPts=[new p(t[0])],null}var e=this.input.convexHull(),n=e.getCoordinates(),t=n;if(n[0].equals2D(n[n.length-1])&&(t=new Array(n.length-1).fill(null),q.copyDeep(n,0,t,0,n.length-1)),t.length<=2)return this.extremalPts=q.copyDeep(t),null;for(var i=Mi.lowestPoint(t),r=Mi.pointWitMinAngleWithX(t,i),o=0;o<t.length;o++){var a=Mi.pointWithMinAngleWithSegment(t,i,r);if(Ei.isObtuse(i,a,r))return this.extremalPts=[new p(i),new p(r)],null;if(Ei.isObtuse(a,i,r))i=a;else{if(!Ei.isObtuse(a,r,i))return this.extremalPts=[new p(i),new p(r),new p(a)],null;r=a}}f.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return null!==this.extremalPts?null:(this.computeCirclePoints(),this.computeCentre(),void(null!==this.centre&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),null===this.centre)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return 0===this.radius?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new p((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=Si.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return Mi}}),Mi.pointWitMinAngleWithX=function(t,e){for(var n=r.MAX_VALUE,i=null,o=0;o<t.length;o++){var a=t[o];if(a!==e){var s=a.x-e.x,u=a.y-e.y;u<0&&(u=-u);var l=Math.sqrt(s*s+u*u),c=u/l;c<n&&(n=c,i=a)}}return i},Mi.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},Mi.pointWithMinAngleWithSegment=function(t,e,n){for(var i=r.MAX_VALUE,o=null,a=0;a<t.length;a++){var s=t[a];if(s!==e&&s!==n){var u=Ei.angleBetween(e,s,n);u<i&&(i=u,o=s)}}return o},e(Ti.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),null===this.minWidthPt)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){t instanceof It?this.convexHullPts=t.getExteriorRing().getCoordinates():this.convexHullPts=t.getCoordinates(),0===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):1===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):2===this.convexHullPts.length||3===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=r.MAX_VALUE;for(var e=1,n=new he,i=0;i<t.length-1;i++)n.p0=t[i],n.p1=t[i+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(null!==this.minWidthPt)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new ye(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var i=e.distancePerpendicular(t[n]),r=i,o=n,a=o;r>=i;)i=r,o=a,a=Ti.nextIndex(t,o),r=e.distancePerpendicular(t[a]);return i<this.minWidth&&(this.minPtIndex=o,this.minWidth=i,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new he(e)),o},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),0===this.minWidth)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=r.MAX_VALUE,i=-r.MAX_VALUE,o=r.MAX_VALUE,a=-r.MAX_VALUE,s=0;s<this.convexHullPts.length;s++){var u=Ti.computeC(t,e,this.convexHullPts[s]);u>i&&(i=u),u<n&&(n=u);var l=Ti.computeC(-e,t,this.convexHullPts[s]);l>a&&(a=l),l<o&&(o=l)}var c=Ti.computeSegmentForLine(-t,-e,a),h=Ti.computeSegmentForLine(-t,-e,o),f=Ti.computeSegmentForLine(-e,t,i),p=Ti.computeSegmentForLine(-e,t,n),d=f.lineIntersection(c),g=p.lineIntersection(c),m=p.lineIntersection(h),y=f.lineIntersection(h),v=this.inputGeom.getFactory().createLinearRing([d,g,m,y,d]);return this.inputGeom.getFactory().createPolygon(v,null)},interfaces_:function(){return[]},getClass:function(){return Ti}}),Ti.nextIndex=function(t,e){return e++,e>=t.length&&(e=0),e},Ti.computeC=function(t,e,n){return t*n.y-e*n.x},Ti.getMinimumDiameter=function(t){return new Ti(t).getDiameter()},Ti.getMinimumRectangle=function(t){return new Ti(t).getMinimumRectangle()},Ti.computeSegmentForLine=function(t,e,n){var i=null,r=null;return Math.abs(e)>Math.abs(t)?(i=new p(0,n/e),r=new p(1,n/e-t/e)):(i=new p(n/t,0),r=new p(n/t-e/t,1)),new he(i,r)};var fa=Object.freeze({Centroid:pe,CGAlgorithms:ce,ConvexHull:ye,InteriorPointArea:ai,InteriorPointLine:ui,InteriorPointPoint:li,RobustLineIntersector:se,MCPointInRing:xi,MinimumBoundingCircle:Mi,MinimumDiameter:Ti});e(Ci.prototype,{getResultGeometry:function(){return new Ii(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<=0)throw new i("Tolerance must be positive");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Ci}}),Ci.densifyPoints=function(t,e,n){for(var i=new he,r=new w,o=0;o<t.length-1;o++){i.p0=t[o],i.p1=t[o+1],r.add(i.p0,!1);var a=i.getLength(),s=Math.trunc(a/e)+1;if(s>1)for(var u=a/s,l=1;l<s;l++){var c=l*u/a,h=i.pointAlong(c);n.makePrecise(h),r.add(h,!1)}}return r.add(t[t.length-1],!1),r.toCoordinateArray()},Ci.densify=function(t,e){var n=new Ci(t);return n.setDistanceTolerance(e),n.getResultGeometry()},c(Ii,be),e(Ii.prototype,{transformMultiPolygon:function(t,e){var n=be.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=be.prototype.transformPolygon.call(this,t,e);return e instanceof Lt?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=Ci.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof St&&1===i.length&&(i=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(i)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return Ii}}),Ci.DensifyTransformer=Ii;var pa=Object.freeze({Densifier:Ci});e(Ni.prototype,{find:function(t){var e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var i=n.oNext(),r=i.compareTo(t);if(r!==e||i===this)return n.insertAfter(t),null;n=i}while(n!==this);f.shouldNeverReachHere()},insertAfter:function(t){f.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function t(){var t=0,e=this;do t++,e=e.oNext();while(e!==this);return t},equals:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),i=t.deltaX(),r=t.deltaY();if(e===i&&n===r)return 0;var o=Ze.quadrant(e,n),a=Ze.quadrant(i,r);return o>a?1:o<a?-1:ce.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;2===t.degree();)if(t=t.prev(),t===this)return null;return t},compareTo:function(t){var e=t,n=this.compareAngularDirection(e);return n},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return Ni}}),Ni.init=function(t,e){if(null!==t._sym||null!==e._sym||null!==t._next||null!==e._next)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},Ni.create=function(t,e){var n=new Ni(t),i=new Ni(e);return n.init(i),n},c(Pi,Ni),e(Pi.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return Pi}}),Pi.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},Pi.isMarked=function(t){return t.isMarked()},Pi.setMark=function(t,e){t.setMark(e)},Pi.markBoth=function(t){t.mark(),t.sym().mark()},Pi.mark=function(t){t.mark()},e(Li.prototype,{insert:function(t,e,n){var i=this.create(t,e);null!==n?n.insert(i):this.vertexMap.put(t,i);var r=this.vertexMap.get(e);return null!==r?r.insert(i.sym()):this.vertexMap.put(e,i.sym()),i},create:function(t,e){var n=this.createEdge(t),i=this.createEdge(e);return Ni.init(n,i),n},createEdge:function(t){return new Ni(t)},addEdge:function(t,e){if(!Li.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),i=null;if(null!==n&&(i=n.find(e)),null!==i)return i;var r=this.insert(t,e,n);return r},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var n=this.vertexMap.get(t);return null===n?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return Li}}),Li.isValidEdge=function(t,e){var n=e.compareTo(t);return 0!==n},c(Ai,Pi),e(Ai.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return Ai}}),c(ki,Li),e(ki.prototype,{createEdge:function(t){return new Ai(t)},interfaces_:function(){return[]},getClass:function(){return ki}}),e(Ri.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym(),t.isStart())?null===this.ringStartEdge?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return null===this.result&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new w,n=t;for(e.add(n.orig().copy(),!1);2===n.sym().degree();){var i=n.next();if(i===t)break;e.add(i.orig().copy(),!1),n=i}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new w,n=t;for(this.ringStartEdge=null,Pi.markBoth(n),e.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);var i=n.next();if(i===t)return this.buildRing(this.ringStartEdge),null;e.add(i.orig().copy(),!1),n=i,Pi.markBoth(n)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do Pi.isMarked(e)||this.nodeEdgeStack.add(e),e=e.oNext();while(e!==t)},computeResult:function(){for(var t=this.graph.getVertexEdges(),e=t.iterator();e.hasNext();){var n=e.next();Pi.isMarked(n)||this.process(n)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();Pi.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof j){var t=arguments[0];t.apply({interfaces_:function(){return[z]},filter:function(t){t instanceof St&&this.add(t)}})}else if(C(arguments[0],m))for(var e=arguments[0],n=e.iterator();n.hasNext();){var i=n.next();this.add(i)}else if(arguments[0]instanceof St){var r=arguments[0];null===this.factory&&(this.factory=r.getFactory());for(var o=r.getCoordinateSequence(),a=!1,n=1;n<o.size();n++){var s=this.graph.addEdge(o.getCoordinate(n-1),o.getCoordinate(n));null!==s&&(a||(s.setStart(),a=!0))}}},interfaces_:function(){return[]},getClass:function(){return Ri}}),Ri.dissolve=function(t){var e=new Ri;return e.add(t),e.getResult()};var da=Object.freeze({LineDissolver:Ri}),ga=Object.freeze({GeometryGraph:Qn});e(Oi.prototype,{hasChildren:function(){for(var t=0;t<4;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<4;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;n<4;n++)null!==this.subnode[n]&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<4;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n?n:n=this.items.remove(e)},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;n<4;n++)null!==this.subnode[n]&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<4;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},isEmpty:function t(){var t=!0;this.items.isEmpty()||(t=!1);for(var e=0;e<4;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t},add:function(t){this.items.add(t)},interfaces_:function(){return[u]},getClass:function(){return Oi}}),Oi.getSubnodeIndex=function(t,e,n){var i=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(i=3),t.getMaxY()<=n&&(i=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(i=2),t.getMaxY()<=n&&(i=0)),i},e(Di.prototype,{getLevel:function(){return this.level},computeKey:function(){if(1===arguments.length){var t=arguments[0];for(this.level=Di.computeQuadLevel(t),this.env=new E,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=pi.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/i)*i,this.pt.y=Math.floor(n.getMinY()/i)*i,this.env.init(this.pt.x,this.pt.x+i,this.pt.y,this.pt.y+i)}},getEnvelope:function(){return this.env},getCentre:function(){return new p((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Di}}),Di.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),i=e>n?e:n,r=pi.exponent(i)+1;return r},c(Fi,Oi),e(Fi.prototype,{find:function(t){var e=Oi.getSubnodeIndex(t,this.centrex,this.centrey);if(e===-1)return this;if(null!==this.subnode[e]){var n=this.subnode[e];return n.find(t)}return this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=Oi.getSubnodeIndex(t,this.centrex,this.centrey);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0,i=0,r=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,i=this.env.getMinY(),r=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),i=this.env.getMinY(),r=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,i=this.centrey,r=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),i=this.centrey,r=this.env.getMaxY()}var o=new E(e,n,i,r),a=new Fi(o,this.level-1);return a},insertNode:function(t){f.isTrue(null===this.env||this.env.contains(t.env));var e=Oi.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return Fi}}),Fi.createNode=function(t){var e=new Di(t),n=new Fi(e.getEnvelope(),e.getLevel());return n},Fi.createExpanded=function(t,e){var n=new E(e);null!==t&&n.expandToInclude(t.env);var i=Fi.createNode(n);return null!==t&&i.insertNode(t),i},c(zi,Oi),e(zi.prototype,{insert:function(t,e){var n=Oi.getSubnodeIndex(t,zi.origin.x,zi.origin.y);if(n===-1)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getEnvelope().contains(t)){var r=Fi.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){f.isTrue(t.getEnvelope().contains(e));var i=yi.isZeroWidth(e.getMinX(),e.getMaxX()),r=yi.isZeroWidth(e.getMinY(),e.getMaxY()),o=null;o=i||r?t.find(e):t.getNode(e),o.add(n)},interfaces_:function(){return[]},getClass:function(){return zi}}),zi.origin=new p(0,0),e(ji.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=ji.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){var t=arguments[0],e=new Vn;return this.query(t,e),e.getItems()}if(2===arguments.length){var n=arguments[0],i=arguments[1];this.root.visit(n,i)}},queryAll:function(){var t=new x;return this.root.addAllItems(t),t},remove:function(t,e){var n=ji.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},depth:function(){return null!==this.root?this.root.depth():0},isEmpty:function(){return null===this.root},interfaces_:function(){return[De,u]},getClass:function(){return ji}}),ji.ensureExtent=function(t,e){var n=t.getMinX(),i=t.getMaxX(),r=t.getMinY(),o=t.getMaxY();return n!==i&&r!==o?t:(n===i&&(n-=e/2,i=n+e/2),r===o&&(r-=e/2,o=r+e/2),new E(n,i,r,o))},ji.serialVersionUID=-0x678b60c967a25400;var ma=Object.freeze({Quadtree:ji}),ya=Object.freeze({STRtree:Ue}),va=Object.freeze({quadtree:ma,strtree:ya}),ba=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];e(Bi.prototype,{read:function(t){var e=void 0;e="string"==typeof t?JSON.parse(t):t;var n=e.type;if(!_a[n])throw new Error("Unknown GeoJSON type: "+e.type);return ba.indexOf(n)!==-1?_a[n].apply(this,[e.coordinates]):"GeometryCollection"===n?_a[n].apply(this,[e.geometries]):_a[n].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!xa[e])throw new Error("Geometry is not supported");return xa[e].apply(this,[t])}});var _a={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!_a[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=_a.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function t(e){for(var t=[],n=0;n<e.length;++n){var i=e[n];t.push(new p(i[0],i[1]))}return t},bbox:function(t){return this.geometryFactory.createLinearRing([new p(t[0],t[1]),new p(t[2],t[1]),new p(t[2],t[3]),new p(t[0],t[3]),new p(t[0],t[1])])},Point:function(t){var e=new p(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(_a.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=_a.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(_a.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=_a.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],a=_a.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);i.push(s)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(_a.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},xa={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=xa.coordinate.apply(this,[t.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=xa.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(xa.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=xa.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=xa.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var i=0;i<t.holes.length;++i){var r=t.holes[i],o=xa.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=xa.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=i.getGeometryType();e.push(xa[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}};e(Gi.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===ee.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])}}),e(Ui.prototype,{write:function(t){return this.parser.write(t)}}),e(Vi.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===ee.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;e<n;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var i=0,r=t.geometries.length;i<r;i++)this.reducePrecision(t.geometries[i])}}),e(Hi.prototype,{read:function(t){var e=this.ol;return t instanceof e.geom.Point?this.convertFromPoint(t):t instanceof e.geom.LineString?this.convertFromLineString(t):t instanceof e.geom.LinearRing?this.convertFromLinearRing(t):t instanceof e.geom.Polygon?this.convertFromPolygon(t):t instanceof e.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof e.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof e.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof e.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new p(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new p(t[0],t[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new p(t[0],t[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,i=[],r=0;r<e.length;r++){var o=this.convertFromLinearRing(e[r]);0===r?n=o:i.push(o)}return this.geometryFactory.createPolygon(n,i)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(t){return this.convertFromPolygon(t);
},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0},convertToPoint:function(t){return new this.ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(Ki);return new this.ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(Ki);return new this.ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(Ki)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(Ki));return new this.ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(Ki))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new this.ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new this.ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var i=t.geometries[n];e.push(this.write(i))}return new this.ol.geom.GeometryCollection(e)}});var wa=Object.freeze({GeoJSONReader:Gi,GeoJSONWriter:Ui,OL3Parser:Hi,WKTReader:Vi,WKTWriter:oe});e(qi.prototype,{rescale:function(){if(C(arguments[0],m))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){var i=arguments[0],r=null,o=null;2===i.length&&(r=new p(i[0]),o=new p(i[1]));for(var e=0;e<i.length;e++)i[e].x=i[e].x/this.scaleFactor+this.offsetX,i[e].y=i[e].y/this.scaleFactor+this.offsetY;2===i.length&&i[0].equals2D(i[1])&&O.out.println(i)}},scale:function(){if(C(arguments[0],m)){for(var t=arguments[0],e=new x,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Ye(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),n=0;n<r.length;n++)o[n]=new p(Math.round((r[n].x-this.offsetX)*this.scaleFactor),Math.round((r[n].y-this.offsetY)*this.scaleFactor),r[n].z);var a=q.removeRepeatedPoints(o);return a}},isIntegerPrecision:function(){return 1===this.scaleFactor},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[tn]},getClass:function(){return qi}});var Ea=Object.freeze({MCIndexNoder:nn,ScaledNoder:qi,SegmentString:Pe});e(Xi.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new st,n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n),r=i.getCoordinate();if(e.contains(r))return this.nonSimpleLocation=r,!1;e.add(r)}return!0},isSimplePolygonal:function(t){for(var e=Un.getLines(t),n=e.iterator();n.hasNext();){var i=n.next();if(!this.isSimpleLinearGeometry(i))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new rt,n=t.getEdgeIterator();n.hasNext();){var i=n.next(),r=(i.getMaximumSegmentIndex(),i.isClosed()),o=i.getCoordinate(0);this.addEndpoint(e,o,r);var a=i.getCoordinate(i.getNumPoints()-1);this.addEndpoint(e,a,r)}for(var n=e.values().iterator();n.hasNext();){var s=n.next();if(s.isClosed&&2!==s.degree)return this.nonSimpleLocation=s.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new Qn(0,t),n=new se,i=e.computeSelfNodes(n,!0);return!(i.hasIntersection()&&(i.hasProperIntersection()?(this.nonSimpleLocation=i.getProperIntersectionPoint(),1):this.hasNonEndpointIntersection(e)||this.isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(e)))},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getMaximumSegmentIndex(),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next();if(!o.isEndPoint(i))return this.nonSimpleLocation=o.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var i=t.get(e);null===i&&(i=new Wi(e),t.put(e,i)),i.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,!!t.isEmpty()||(t instanceof St?this.isSimpleLinearGeometry(t):t instanceof pt?this.isSimpleLinearGeometry(t):t instanceof Nt?this.isSimpleMultiPoint(t):C(t,Ct)?this.isSimplePolygonal(t):!(t instanceof ft)||this.isSimpleGeometryCollection(t))},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return Xi}}),e(Wi.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Wi}}),Xi.EndpointInfo=Wi,e(Yi.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=Yi.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=Yi.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),t<=0&&(this.quadrantSegments=1),this.joinStyle!==Yi.JOIN_ROUND&&(this.quadrantSegments=Yi.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=t<0?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return Yi}}),Yi.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Yi.CAP_ROUND=1,Yi.CAP_FLAT=2,Yi.CAP_SQUARE=3,Yi.JOIN_ROUND=1,Yi.JOIN_MITRE=2,Yi.JOIN_BEVEL=3,Yi.DEFAULT_QUADRANT_SEGMENTS=8,Yi.DEFAULT_MITRE_LIMIT=5,Yi.DEFAULT_SIMPLIFY_FACTOR=.01,e(Ji.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();f.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],i=ce.computeOrientation(this.minCoord,n,e),r=!1;e.y<this.minCoord.y&&n.y<this.minCoord.y&&i===ce.COUNTERCLOCKWISE?r=!0:e.y>this.minCoord.y&&n.y>this.minCoord.y&&i===ce.CLOCKWISE&&(r=!0),r&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge(),i=n.getCoordinates();if(e<0||e+1>=i.length)return-1;if(i[e].y===i[e+1].y)return-1;var r=hn.LEFT;return i[e].y<i[e+1].y&&(r=hn.RIGHT),r},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this.minCoord||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}f.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var i=this.getRightmostSide(this.minDe,this.minIndex);i===hn.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Ji}}),$i.prototype.addLast=function(t){this.array_.push(t)},$i.prototype.removeFirst=function(){return this.array_.shift()},$i.prototype.isEmpty=function(){return 0===this.array_.length},e(Zi.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new on("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();i.setVisited(!0),this.copySymDepths(i)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(hn.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(hn.RIGHT)>=1&&e.getDepth(hn.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new Z,n=new $i,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var a=o.next(),s=a.getSym();if(!s.isVisited()){var u=s.getNode();e.contains(u)||(n.addLast(u),e.add(u))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(null===this.env){for(var t=new E,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),i=n.getEdge().getCoordinates(),r=0;r<i.length-1;r++)t.expandToInclude(i[r]);this.env=t}return this.env},addReachable:function(t){var e=new ge;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(hn.LEFT,t.getDepth(hn.RIGHT)),e.setDepth(hn.RIGHT,t.getDepth(hn.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this.dirEdgeList.add(i);var r=i.getSym(),o=r.getNode();o.isVisited()||e.push(o)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[o]},getClass:function(){return Zi}}),e(Qi.prototype,{isDeletable:function(t,e,n,i){var r=this.inputLine[t],o=this.inputLine[e],a=this.inputLine[n];return!!this.isConcave(r,o,a)&&!!this.isShallow(r,o,a,i)&&this.isShallowSampled(r,o,t,n,i)},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),i=!1;n<this.inputLine.length;){var r=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=Qi.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},isShallowConcavity:function(t,e,n,i){var r=ce.computeOrientation(t,e,n),o=r===this.angleOrientation;if(!o)return!1;var a=ce.distancePointLine(e,t,n);return a<i},isShallowSampled:function(t,e,n,i,r){var o=Math.trunc((i-n)/Qi.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<i;a+=o)if(!this.isShallow(t,e,this.inputLine[a],r))return!1;return!0},isConcave:function t(e,n,i){var r=ce.computeOrientation(e,n,i),t=r===this.angleOrientation;return t},simplify:function(t){this.distanceTol=Math.abs(t),t<0&&(this.angleOrientation=ce.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===Qi.DELETE;)e++;return e},isShallow:function(t,e,n,i){var r=ce.distancePointLine(e,t,n);return r<i},collapseLine:function(){for(var t=new w,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==Qi.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Qi}}),Qi.simplify=function(t,e){var n=new Qi(t);return n.simplify(e)},Qi.INIT=0,Qi.DELETE=1,Qi.KEEP=1,Qi.NUM_PTS_TO_CHECK=10,e(tr.prototype,{getCoordinates:function(){var t=this.ptList.toArray(tr.COORDINATE_ARRAY_TYPE);return t},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new p(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1),n=t.distance(e);return n<this.minimimVertexDistance},toString:function(){var t=new ie,e=t.createLineString(this.getCoordinates());return e.toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new p(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1),n=null;return this.ptList.size()>=2&&(n=this.ptList.get(this.ptList.size()-2)),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return tr}}),tr.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),e(er.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=ce.computeOrientation(this.s0,this.s1,this.s2),i=n===ce.CLOCKWISE&&this.side===hn.LEFT||n===ce.COUNTERCLOCKWISE&&this.side===hn.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new he(t,e),i=new he;this.computeOffsetSegment(n,hn.LEFT,this.distance,i);var r=new he;this.computeOffsetSegment(n,hn.RIGHT,this.distance,r);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this.bufParams.getEndCapStyle()){case Yi.CAP_ROUND:this.segList.addPt(i.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,ce.CLOCKWISE,this.distance),this.segList.addPt(r.p1);break;case Yi.CAP_FLAT:this.segList.addPt(i.p1),this.segList.addPt(r.p1);break;case Yi.CAP_SQUARE:var u=new p;u.x=Math.abs(this.distance)*Math.cos(s),u.y=Math.abs(this.distance)*Math.sin(s);var l=new p(i.p1.x+u.x,i.p1.y+u.y),c=new p(r.p1.x+u.x,r.p1.y+u.y);this.segList.addPt(l),this.segList.addPt(c)}},getCoordinates:function(){var t=this.segList.getCoordinates();return t},addMitreJoin:function(t,e,n,i){var r=!0,o=null;try{o=D.intersection(e.p0,e.p1,n.p0,n.p1);var a=i<=0?1:o.distance(t)/Math.abs(i);a>this.bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof M))throw t;o=new p(0,0),r=!1}finally{}r?this.segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,i,r){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);i===ce.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,s,c,i,r),this.segList.addPt(n)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*er.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===Yi.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===Yi.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new p(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new p(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new p(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new p(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,i){var r=this.seg0.p1,o=Ei.angle(r,this.seg0.p0),a=(Ei.angle(r,this.seg1.p1),Ei.angleBetweenOriented(this.seg0.p0,r,this.seg1.p1)),s=a/2,u=Ei.normalize(o+s),l=Ei.normalize(u+Math.PI),c=i*n,h=c*Math.abs(Math.sin(s)),f=n-h,d=r.x+c*Math.cos(l),g=r.y+c*Math.sin(l),m=new p(d,g),y=new he(r,m),v=y.pointAlongOffset(1,f),b=y.pointAlongOffset(1,-f);this.side===hn.LEFT?(this.segList.addPt(v),this.segList.addPt(b)):(this.segList.addPt(b),this.segList.addPt(v))},computeOffsetSegment:function(t,e,n,i){var r=e===hn.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=r*n*o/s,l=r*n*a/s;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u},addFilletArc:function(t,e,n,i,r){var o=i===ce.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this.filletAngleQuantum+.5);if(s<1)return null;var u=null,l=null;u=0,l=a/s;for(var c=u,h=new p;c<a;){var f=e+o*c;h.x=t.x+r*Math.cos(f),h.y=t.y+r*Math.sin(f),this.segList.addPt(h),c+=l}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*er.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var n=new p((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var i=new p((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(i)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new p(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new tr,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*er.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var e=this.li.getIntersectionNum();e>=2&&(this.bufParams.getJoinStyle()===Yi.JOIN_BEVEL||this.bufParams.getJoinStyle()===Yi.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,ce.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return er}}),er.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,er.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,er.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,er.MAX_CLOSING_SEG_LEN_FACTOR=80,e(nr.prototype,{getOffsetCurve:function(t,e){if(this.distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&q.reverse(o),o},computeSingleSidedBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var r=Qi.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],hn.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{n.addSegments(t,!1);var s=Qi.simplify(t,i),u=s.length-1;n.initSideSegments(s[0],s[1],hn.LEFT),n.addFirstSegment();for(var a=2;a<=u;a++)n.addNextSegment(s[a],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);e===hn.RIGHT&&(i=-i);var r=Qi.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(r[a],s)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),i=Qi.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],hn.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var a=Qi.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],hn.LEFT);for(var o=s-2;o>=0;o--)e.addNextSegment(a[o],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case Yi.CAP_ROUND:e.createCircle(t);break;case Yi.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this.distance=e,e<0&&!this.bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this.bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);var o=i.getCoordinates();return o},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return nr.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},computeOffsetCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){var r=Qi.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],hn.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{var s=Qi.simplify(t,i),u=s.length-1;n.initSideSegments(s[0],s[1],hn.LEFT),n.addFirstSegment();for(var a=2;a<=u;a++)n.addNextSegment(s[a],!0)}n.addLastSegment()},getSegGen:function(t){return new er(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return nr}}),nr.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new p(t[n]);return e},e(ir.prototype,{findStabbedSegments:function(){if(1===arguments.length){for(var t=arguments[0],e=new x,n=this.subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(C(arguments[2],v)&&arguments[0]instanceof p&&arguments[1]instanceof xn)for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),n=0;n<u.length-1;n++){this.seg.p0=u[n],this.seg.p1=u[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var l=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(l<o.x||this.seg.isHorizontal()||o.y<this.seg.p0.y||o.y>this.seg.p1.y||ce.computeOrientation(this.seg.p0,this.seg.p1,o)===ce.RIGHT)){var c=a.getDepth(hn.LEFT);this.seg.p0.equals(u[n])||(c=a.getDepth(hn.RIGHT));var h=new rr(this.seg,c);s.add(h)}}else if(C(arguments[2],v)&&arguments[0]instanceof p&&C(arguments[1],v))for(var f=arguments[0],d=arguments[1],g=arguments[2],n=d.iterator();n.hasNext();){var m=n.next();m.isForward()&&this.findStabbedSegments(f,m,g)}},getDepth:function(t){var e=this.findStabbedSegments(t);if(0===e.size())return 0;var n=ha.min(e);return n.leftDepth},interfaces_:function(){return[]},getClass:function(){return ir}}),e(rr.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return 0!==n?n:(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg),0!==n?n:this.upwardSeg.compareTo(e.upwardSeg))},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[o]},getClass:function(){return rr}}),ir.DepthSegment=rr,e(or.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,T.EXTERIOR,T.INTERIOR)},addPolygon:function(t){var e=this.distance,n=hn.LEFT;this.distance<0&&(e=-this.distance,n=hn.RIGHT);var i=t.getExteriorRing(),r=q.removeRepeatedPoints(i.getCoordinates());if(this.distance<0&&this.isErodedCompletely(i,this.distance))return null;if(this.distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,T.EXTERIOR,T.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=q.removeRepeatedPoints(a.getCoordinates());this.distance>0&&this.isErodedCompletely(a,-this.distance)||this.addPolygonRing(s,e,hn.opposite(n),T.INTERIOR,T.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new Si(t[0],t[1],t[2]),i=n.inCentre(),r=ce.distancePointLine(i,n.p0,n.p1);return r<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=q.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,T.EXTERIOR,T.INTERIOR)},addCurve:function(t,e,n){if(null===t||t.length<2)return null;var i=new Ye(t,new pn(0,T.BOUNDARY,e,n));this.curveList.add(i)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,i,r){if(0===e&&t.length<Pt.MINIMUM_VALID_SIZE)return null;var o=i,a=r;t.length>=Pt.MINIMUM_VALID_SIZE&&ce.isCCW(t)&&(o=r,a=i,n=hn.opposite(n));var s=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},add:function(t){if(t.isEmpty())return null;if(t instanceof It)this.addPolygon(t);else if(t instanceof St)this.addLineString(t);else if(t instanceof Tt)this.addPoint(t);else if(t instanceof Nt)this.addCollection(t);else if(t instanceof pt)this.addCollection(t);else if(t instanceof Lt)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return or}}),e(ar.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(ar.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,a,s),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[an]},getClass:function(){return ar}}),ar.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},e(sr.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new pn(t.getLabel()),i.flip()),n.merge(i);var r=sr.depthDelta(i),o=e.getDepthDelta(),a=o+r;e.setDepthDelta(a)}else this.edgeList.add(t),t.setDepthDelta(sr.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new x,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),a=new ir(n),s=a.getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},createSubgraphs:function(t){for(var e=new x,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Zi;r.create(i),e.add(r)}}return ha.sort(e,ha.reverseOrder()),e},createEmptyResultGeometry:function(){var t=this.geomFact.createPolygon();return t},getNoder:function(t){if(null!==this.workingNoder)return this.workingNoder;var e=new nn,n=new se;return n.setPrecisionModel(t),e.setSegmentIntersector(new ar(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var i=new nr(n,this.bufParams),r=new or(t,e,i),o=r.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this.graph=new En(new Ln),this.graph.addEdges(this.edgeList.getEdges());var a=this.createSubgraphs(this.graph),s=new Sn(this.geomFact);this.buildSubgraphs(a,s);var u=s.getPolygons();if(u.size()<=0)return this.createEmptyResultGeometry();var l=this.geomFact.buildGeometry(u);return l},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings(),r=i.iterator();r.hasNext();){var o=r.next(),a=o.getCoordinates();if(2!==a.length||!a[0].equals2D(a[1])){var s=o.getData(),u=new Zn(o.getCoordinates(),new pn(s));this.insertUniqueEdge(u)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return sr}}),sr.depthDelta=function(t){var e=t.getLocation(0,hn.LEFT),n=t.getLocation(0,hn.RIGHT);return e===T.INTERIOR&&n===T.EXTERIOR?1:e===T.EXTERIOR&&n===T.INTERIOR?-1:0},sr.convertSegStrings=function(t){for(var e=new ie,n=new x;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)},e(ur.prototype,{checkEndPtVertexIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next(),n=e.getCoordinates();this.checkEndPtVertexIntersections(n[0],this.segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this.segStrings)}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1],t=r.iterator();t.hasNext();)for(var e=t.next(),n=e.getCoordinates(),o=1;o<n.length-1;o++)if(n[o].equals(i))throw new l("found endpt/interior pt intersection at index "+o+" :pt "+i)},checkInteriorIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],a=r.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var c=0;c<s.length-1;c++)this.checkInteriorIntersections(r,u,o,c);else if(4===arguments.length){
var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3];if(h===p&&f===d)return null;var g=h.getCoordinates()[f],m=h.getCoordinates()[f+1],y=p.getCoordinates()[d],v=p.getCoordinates()[d+1];if(this.li.computeIntersection(g,m,y,v),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,g,m)||this.hasInteriorIntersection(this.li,y,v)))throw new l("found non-noded intersection at "+g+"-"+m+" and "+y+"-"+v)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0],i=n.getCoordinates(),t=0;t<i.length-2;t++)this.checkCollapse(i[t],i[t+1],i[t+2])},hasInteriorIntersection:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new l("found non-noded collapse at "+ur.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return ur}}),ur.fact=new ie,e(lr.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this.maxx<n||this.minx>i||this.maxy<r||this.miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return f.isTrue(!(a&&s),"Found bad envelope test"),s},initCorners:function(t){var e=.5;this.minx=t.x-e,this.maxx=t.x+e,this.miny=t.y-e,this.maxy=t.y+e,this.corner[0]=new p(this.maxx,this.maxy),this.corner[1]=new p(this.minx,this.maxy),this.corner[2]=new p(this.minx,this.miny),this.corner[3]=new p(this.maxx,this.miny)},intersects:function(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(null===this.safeEnv){var t=lr.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new E(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.hasIntersection()))))},intersectsToleranceSquare:function(t,e){var n=!1,i=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.isProper()||(this.li.hasIntersection()&&(i=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.isProper()||n&&i||t.equals(this.pt)||e.equals(this.pt)))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},interfaces_:function(){return[]},getClass:function(){return lr}}),lr.SAFE_ENV_EXPANSION_FACTOR=.75,e(cr.prototype,{snap:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new hr(e,n,i);return this.index.query(r,{interfaces_:function(){return[Oe]},visitItem:function(t){var e=t;e.select(r,o)}}),o.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return cr}}),c(hr,ci),e(hr.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(2!==arguments.length)return ci.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();return null!==this.parentEdge&&n===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},interfaces_:function(){return[]},getClass:function(){return hr}}),cr.HotPixelSnapAction=hr,e(fr.prototype,{processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];if(this.li.computeIntersection(r,o,a,s),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var u=0;u<this.li.getIntersectionNum();u++)this.interiorIntersections.add(this.li.getIntersection(u));t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[an]},getClass:function(){return fr}}),e(pr.prototype,{checkCorrectness:function(t){var e=Ye.getNodedSubstrings(t),n=new ur(e);try{n.checkValid()}catch(t){if(!(t instanceof S))throw t;t.printStackTrace()}finally{}},getNodedSubstrings:function(){return Ye.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new fr(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(C(arguments[0],m))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof Ye)for(var i=arguments[0],r=i.getCoordinates(),o=0;o<r.length;o++){var a=new lr(r[o],this.scaleFactor,this.li),s=this.pointSnapper.snap(a,i,o);s&&i.addIntersection(r[o],o)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new nn,this.pointSnapper=new cr(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new lr(n,this.scaleFactor,this.li);this.pointSnapper.snap(i)}},interfaces_:function(){return[tn]},getClass:function(){return pr}}),e(dr.prototype,{bufferFixedPrecision:function(t){var e=new qi(new pr(new ee(1)),t.getScale()),n=new sr(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(0===arguments.length){for(var t=dr.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof on))throw t;this.saveException=t}finally{}if(null!==this.resultGeometry)return null}throw this.saveException}if(1===arguments.length){var e=arguments[0],n=dr.precisionScaleFactor(this.argGeom,this.distance,e),i=new ee(n);this.bufferFixedPrecision(i)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===ee.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new sr(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(t){if(!(t instanceof l))throw t;this.saveException=t}finally{}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return dr}}),dr.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new dr(t),i=n.getResultGeometry(e);return i}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof j&&"number"==typeof arguments[1]){var r=arguments[0],o=arguments[1],a=arguments[2],s=new dr(r);s.setQuadrantSegments(a);var i=s.getResultGeometry(o);return i}if(arguments[2]instanceof Yi&&arguments[0]instanceof j&&"number"==typeof arguments[1]){var u=arguments[0],l=arguments[1],c=arguments[2],s=new dr(u,c),i=s.getResultGeometry(l);return i}}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],s=new dr(h);s.setQuadrantSegments(p),s.setEndCapStyle(d);var i=s.getResultGeometry(f);return i}},dr.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=I.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY())),o=e>0?e:0,a=r+2*o,s=Math.trunc(Math.log(a)/Math.log(10)+1),u=n-s,l=Math.pow(10,u);return l},dr.CAP_ROUND=Yi.CAP_ROUND,dr.CAP_BUTT=Yi.CAP_FLAT,dr.CAP_FLAT=Yi.CAP_FLAT,dr.CAP_SQUARE=Yi.CAP_SQUARE,dr.MAX_PRECISION_DIGITS=12;var Sa=Object.freeze({BufferOp:dr,BufferParameters:Yi});e(gr.prototype,{filter:function(t){t instanceof It&&this.comps.add(t)},interfaces_:function(){return[ct]},getClass:function(){return gr}}),gr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return gr.getPolygons(t,new x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof It?n.add(e):e instanceof ft&&e.apply(new gr(n)),n}},e(mr.prototype,{isInsideArea:function(){return this.segIndex===mr.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return mr}}),mr.INSIDE_AREA=-1,e(yr.prototype,{filter:function(t){t instanceof Tt&&this.pts.add(t)},interfaces_:function(){return[ct]},getClass:function(){return yr}}),yr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Tt?ha.singletonList(t):yr.getPoints(t,new x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Tt?n.add(e):e instanceof ft&&e.apply(new yr(n)),n}},e(vr.prototype,{filter:function(t){(t instanceof Tt||t instanceof St||t instanceof It)&&this.locations.add(new mr(t,0,t.getCoordinate()))},interfaces_:function(){return[ct]},getClass:function(){return vr}}),vr.getLocations=function(t){var e=new x;return t.apply(new vr(e)),e},e(br.prototype,{computeContainmentDistance:function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=gr.getPolygons(this.geom[e]);if(r.size()>0){var o=vr.getLocations(this.geom[i]);if(this.computeContainmentDistance(o,r,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[i]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&C(arguments[0],v)&&C(arguments[1],v)){for(var a=arguments[0],s=arguments[1],u=arguments[2],l=0;l<a.size();l++)for(var c=a.get(l),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),u),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof mr&&arguments[1]instanceof It){var f=arguments[0],p=arguments[1],d=arguments[2],g=f.getCoordinate();if(T.EXTERIOR!==this.ptLocator.locate(g,p))return this.minDistance=0,d[0]=f,d[1]=new mr(p,g),null}},computeMinDistanceLinesPoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=Un.getLines(this.geom[0]),n=Un.getLines(this.geom[1]),i=yr.getPoints(this.geom[0]),r=yr.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return null===t[0]?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){this.computeMinDistance();var t=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return t},computeMinDistance:function(){if(0===arguments.length){if(null!==this.minDistanceLocation)return null;if(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof St&&arguments[1]instanceof Tt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var a=ce.distancePointLine(r,i[o],i[o+1]);if(a<this.minDistance){this.minDistance=a;var s=new he(i[o],i[o+1]),u=s.closestPoint(r);n[0]=new mr(t,o,u),n[1]=new mr(e,0,r)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof St&&arguments[1]instanceof St){var l=arguments[0],c=arguments[1],h=arguments[2];if(l.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this.minDistance)return null;for(var i=l.getCoordinates(),f=c.getCoordinates(),o=0;o<i.length-1;o++)for(var p=0;p<f.length-1;p++){var a=ce.distanceLineLine(i[o],i[o+1],f[p],f[p+1]);if(a<this.minDistance){this.minDistance=a;var d=new he(i[o],i[o+1]),g=new he(f[p],f[p+1]),m=d.closestPoints(g);h[0]=new mr(l,o,m[0]),h[1]=new mr(c,p,m[1])}if(this.minDistance<=this.terminateDistance)return null}}},computeMinDistancePoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o),s=r.getCoordinate().distance(a.getCoordinate());if(s<this.minDistance&&(this.minDistance=s,n[0]=new mr(r,0,r.getCoordinate()),n[1]=new mr(a,0,a.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(null===this.geom[0]||null===this.geom[1])throw new i("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return br}}),br.distance=function(t,e){var n=new br(t,e);return n.distance()},br.isWithinDistance=function(t,e,n){var i=new br(t,e,n);return i.distance()<=n},br.nearestPoints=function(t,e){var n=new br(t,e);return n.nearestPoints()};var Ma=Object.freeze({DistanceOp:br});e(_r.prototype,{getCoordinates:function(){if(null===this.coordinates){for(var t=0,e=0,n=new w,i=this.directedEdges.iterator();i.hasNext();){var r=i.next();r.getEdgeDirection()?t++:e++,n.add(r.getEdge().getLine().getCoordinates(),!1,r.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),e>t&&q.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return _r}}),e(xr.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return xr}}),xr.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},xr.setVisited=function(t,e){for(;t.hasNext();){var n=t.next();n.setVisited(e)}},xr.setMarked=function(t,e){for(;t.hasNext();){var n=t.next();n.setMarked(e)}},c(wr,xr),e(wr.prototype,{isRemoved:function(){return null===this.parentEdge},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:ce.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),i=e.substring(n+1);t.print("  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[o]},getClass:function(){return wr}}),wr.toEdges=function(t){for(var e=new x,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},c(Er,wr),e(Er.prototype,{getNext:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(f.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return Er}}),c(Sr,xr),e(Sr.prototype,{isRemoved:function(){return null===this.dirEdge},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof Tr){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return Sr}}),e(Mr.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(ha.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof Sr){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n.getEdge()===t)return e}return-1}if(arguments[0]instanceof wr){var i=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n===i)return e}return-1}if(Number.isInteger(arguments[0])){var r=arguments[0],o=r%this.outEdges.size();return o<0&&(o+=this.outEdges.size()),o}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return Mr}}),c(Tr,xr),e(Tr.prototype,{isRemoved:function(){return null===this.pt},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(0===arguments.length)this.pt=null;else if(1===arguments.length){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return Tr}}),Tr.getEdgesBetween=function(t,e){var n=wr.toEdges(t.getOutEdges().getEdges()),i=new Z(n),r=wr.toEdges(e.getOutEdges().getEdges());return i.retainAll(r),i},c(Cr,Sr),e(Cr.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return Cr}}),e(Ir.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return Ir}}),e(Nr.prototype,{findNodesOfDegree:function(t){for(var e=new x,n=this.nodeIterator();n.hasNext();){var i=n.next();i.getDegree()===t&&e.add(i)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof Sr){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof wr){var e=arguments[0],n=e.getSym();null!==n&&n.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof Tr){for(var i=arguments[0],r=i.getOutEdges().getEdges(),o=r.iterator();o.hasNext();){var a=o.next(),n=a.getSym();null!==n&&this.remove(n),this.dirEdges.remove(a);var s=a.getEdge();null!==s&&this.edges.remove(s)}this.nodeMap.remove(i.getCoordinate()),i.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof Sr){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof wr){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof Tr){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof Sr){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof wr){var n=arguments[0];this.dirEdges.add(n)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return Nr}}),c(Pr,Nr),e(Pr.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=q.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),o=this.getNode(i),a=new Er(r,o,e[1],!0),s=new Er(o,r,e[e.length-2],!1),u=new Cr(t);u.setDirectedEdges(a,s),this.add(u)},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new Tr(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return Pr}}),e(Lr.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(f.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(null!==this.mergedLineStrings)return null;xr.setMarked(this.graph.nodeIterator(),!1),xr.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new x,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new x;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new _r(this.factory),n=t;do e.add(n),n.getEdge().setMarked(!0),n=n.getNext();while(null!==n&&n!==t);return e},add:function(){if(arguments[0]instanceof j){var t=arguments[0];t.apply({interfaces_:function(){return[z]},filter:function(t){t instanceof St&&this.add(t)}})}else if(C(arguments[0],m)){var e=arguments[0];this.mergedLineStrings=null;for(var n=e.iterator();n.hasNext();){var i=n.next();this.add(i)}}else if(arguments[0]instanceof St){var r=arguments[0];null===this.factory&&(this.factory=r.getFactory()),this.graph.addEdge(r)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return Lr}});var Ta=Object.freeze({LineMerger:Lr}),Ca=Object.freeze({OverlayOp:ii});c(Ar,wr),e(Ar.prototype,{getNext:function(){return this.next},isInRing:function(){return null!==this.edgeRing},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return Ar}}),c(kr,Sr),e(kr.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return kr}}),e(Rr.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),i=n[0],r=Rr.findDifferentPoint(n,i),o=e.findEdgeInSameDirection(i,r),a=e.findEdgeEnd(o),s=null;a.getLabel().getLocation(0,hn.RIGHT)===T.INTERIOR?s=a:a.getSym().getLabel().getLocation(0,hn.RIGHT)===T.INTERIOR&&(s=a.getSym()),f.isTrue(null!==s,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(s)},visitShellInteriors:function(t,e){if(t instanceof It){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof Lt)for(var i=t,r=0;r<i.getNumGeometries();r++){var n=i.getGeometryN(r);this.visitInteriorRing(n.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,hn.RIGHT)===T.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,n=t;do f.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext();while(n!==e)},buildEdgeRings:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&null===i.getEdgeRing()){var r=new mn(i,this.geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();var o=r.buildMinimalRings();e.addAll(o)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var i=n.getEdges(),r=i.get(0);if(r.getLabel().getLocation(0,hn.RIGHT)===T.INTERIOR)for(var o=0;o<i.size();o++)if(r=i.get(o),!r.isVisited())return this.disconnectedRingcoord=r.getCoordinate(),!0}}return!1},isInteriorsConnected:function(){var t=new x;this.geomGraph.computeSplitEdges(t);var e=new En(new Ln);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return Rr}}),Rr.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},e(Or.prototype,{createEdgeEndForNext:function(t,e,n,i){var r=n.segmentIndex+1;if(r>=t.getNumPoints()&&null===i)return null;var o=t.getCoordinate(r);null!==i&&i.segmentIndex===n.segmentIndex&&(o=i.coord);var a=new _n(t,n.coord,o,new pn(t.getLabel()));e.add(a)},createEdgeEndForPrev:function(t,e,n,i){var r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--}var o=t.getCoordinate(r);null!==i&&i.segmentIndex>=r&&(o=i.coord);var a=new pn(t.getLabel());a.flip();var s=new _n(t,n.coord,o,a);e.add(s)},computeEdgeEnds:function(){if(1===arguments.length){for(var t=arguments[0],e=new x,n=t;n.hasNext();){var i=n.next();this.computeEdgeEnds(i,e)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1],a=r.getEdgeIntersectionList();a.addEndpoints();var s=a.iterator(),u=null,l=null;if(!s.hasNext())return null;var c=s.next();do u=l,l=c,c=null,s.hasNext()&&(c=s.next()),null!==l&&(this.createEdgeEndForPrev(r,o,l,u),this.createEdgeEndForNext(r,o,l,c));while(null!==l)}},interfaces_:function(){return[]},getClass:function(){return Or}}),c(Dr,_n),e(Dr.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--> Label: "+this.label);for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,i=!1,r=this.iterator();r.hasNext();){var o=r.next(),a=o.getLabel().getLocation(t);a===T.BOUNDARY&&n++,a===T.INTERIOR&&(i=!0)}var a=T.NONE;i&&(a=T.INTERIOR),n>0&&(a=Qn.determineBoundary(e,n)),this.label.setLocation(t,a)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.getLabel().isArea()){var r=i.getLabel().getLocation(t,e);if(r===T.INTERIOR)return this.label.setLocation(t,e,T.INTERIOR),null;r===T.EXTERIOR&&this.label.setLocation(t,e,T.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,hn.LEFT),this.computeLabelSide(t,hn.RIGHT)},updateIM:function(t){Zn.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().isArea()&&(e=!0)}e?this.label=new pn(T.NONE,T.NONE,T.NONE):this.label=new pn(T.NONE);for(var r=0;r<2;r++)this.computeLabelOn(r,t),e&&this.computeLabelSides(r)},interfaces_:function(){return[]},getClass:function(){return Dr}}),c(Fr,Nn),e(Fr.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);null===e?(e=new Dr(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return Fr}}),c(zr,vn),e(zr.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return zr}}),c(jr,wn),e(jr.prototype,{createNode:function(t){return new zr(t,new Fr)},interfaces_:function(){return[]},getClass:function(){return jr}}),e(Br.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var i=n.next(),r=this.nodes.addNode(i.getCoordinate());r.setLabel(e,i.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new Or,n=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(n)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var i=n.next(),r=i.getLabel().getLocation(e),o=i.getEdgeIntersectionList().iterator();o.hasNext();){var a=o.next(),s=this.nodes.addNode(a.coord);r===T.BOUNDARY?s.setLabelBoundary(e):s.getLabel().isNull(e)&&s.setLabel(e,T.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Br}}),e(Gr.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){
var i=n.next();if(i.getEdgeEnds().size()>1)return this.invalidPoint=i.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return Gr}}),e(Ur.prototype,{buildIndex:function(){this.index=new Ue;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),i=this.index.query(e.getEnvelopeInternal()),r=0;r<i.size();r++){var o=i.get(r),a=o.getCoordinates();if(e!==o&&e.getEnvelopeInternal().intersects(o.getEnvelopeInternal())){var s=Kr.findPtNotNode(n,o,this.graph);if(null!==s){var u=ce.isPointInRing(s,a);if(u)return this.nestedPt=s,!1}}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return Ur}}),e(Vr.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return Vr.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return null!==this.pt&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return Vr}}),Vr.ERROR=0,Vr.REPEATED_POINT=1,Vr.HOLE_OUTSIDE_SHELL=2,Vr.NESTED_HOLES=3,Vr.DISCONNECTED_INTERIOR=4,Vr.SELF_INTERSECTION=5,Vr.RING_SELF_INTERSECTION=6,Vr.NESTED_SHELLS=7,Vr.DUPLICATE_RINGS=8,Vr.TOO_FEW_POINTS=9,Vr.INVALID_COORDINATE=10,Vr.RING_NOT_CLOSED=11,Vr.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],e(Kr.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!Kr.isValid(t[e]))return this.validErr=new Vr(Vr.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof It){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(var e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),null!==this.validErr)return null}},checkHolesNotNested:function(t,e){for(var n=new Ur(e),i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i);n.add(r)}var o=n.isNonNested();o||(this.validErr=new Vr(Vr.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new Gr(t),n=e.isNodeConsistentArea();return n?void(e.hasDuplicateRings()&&(this.validErr=new Vr(Vr.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new Vr(Vr.SELF_INTERSECTION,e.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),null===this.validErr},checkShellInsideHole:function(t,e,n){var i=t.getCoordinates(),r=e.getCoordinates(),o=Kr.findPtNotNode(i,e,n);if(null!==o){var a=ce.isPointInRing(o,r);if(!a)return o}var s=Kr.findPtNotNode(r,t,n);if(null!==s){var u=ce.isPointInRing(s,i);return u?s:null}return f.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null}},checkConnectedInteriors:function(t){var e=new Rr(t);e.isInteriorsConnected()||(this.validErr=new Vr(Vr.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new st,n=!0,i=t.iterator();i.hasNext();){var r=i.next();if(n)n=!1;else{if(e.contains(r.coord))return this.validErr=new Vr(Vr.RING_SELF_INTERSECTION,r.coord),null;e.add(r.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),i=new xi(n),r=0;r<t.getNumInteriorRing();r++){var o=t.getInteriorRingN(r),a=Kr.findPtNotNode(o.getCoordinates(),n,e);if(null===a)return null;var s=!i.isInside(a);if(s)return this.validErr=new Vr(Vr.HOLE_OUTSIDE_SHELL,a),null}},checkTooFewPoints:function(t){if(t.hasTooFewPoints())return this.validErr=new Vr(Vr.TOO_FEW_POINTS,t.getInvalidPoint()),null},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof Tt){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Nt){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof Pt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(n),null!==this.validErr)return null;var i=new Qn(0,n);if(this.checkTooFewPoints(i),null!==this.validErr)return null;var r=new se;i.computeSelfNodes(r,!0,!0),this.checkNoSelfIntersectingRings(i)}else if(arguments[0]instanceof St){var o=arguments[0];if(this.checkInvalidCoordinates(o.getCoordinates()),null!==this.validErr)return null;var i=new Qn(0,o);this.checkTooFewPoints(i)}else if(arguments[0]instanceof It){var a=arguments[0];if(this.checkInvalidCoordinates(a),null!==this.validErr)return null;if(this.checkClosedRings(a),null!==this.validErr)return null;var i=new Qn(0,a);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;if(this.checkHolesInShell(a,i),null!==this.validErr)return null;if(this.checkHolesNotNested(a,i),null!==this.validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof Lt){for(var s=arguments[0],u=0;u<s.getNumGeometries();u++){var l=s.getGeometryN(u);if(this.checkInvalidCoordinates(l),null!==this.validErr)return null;if(this.checkClosedRings(l),null!==this.validErr)return null}var i=new Qn(0,s);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;for(var u=0;u<s.getNumGeometries();u++){var l=s.getGeometryN(u);if(this.checkHolesInShell(l,i),null!==this.validErr)return null}for(var u=0;u<s.getNumGeometries();u++){var l=s.getGeometryN(u);if(this.checkHolesNotNested(l,i),null!==this.validErr)return null}if(this.checkShellsNotNested(s,i),null!==this.validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof ft)for(var c=arguments[0],u=0;u<c.getNumGeometries();u++){var h=c.getGeometryN(u);if(this.checkValid(h),null!==this.validErr)return null}else if(arguments[0]instanceof j){var f=arguments[0];if(this.validErr=null,f.isEmpty())return null;if(f instanceof Tt)this.checkValid(f);else if(f instanceof Nt)this.checkValid(f);else if(f instanceof Pt)this.checkValid(f);else if(f instanceof St)this.checkValid(f);else if(f instanceof It)this.checkValid(f);else if(f instanceof Lt)this.checkValid(f);else{if(!(f instanceof ft))throw new UnsupportedOperationException(f.getClass().getName());this.checkValid(f)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var i=t.getCoordinates(),r=e.getExteriorRing(),o=r.getCoordinates(),a=Kr.findPtNotNode(i,r,n);if(null===a)return null;var s=ce.isPointInRing(a,o);if(!s)return null;if(e.getNumInteriorRing()<=0)return this.validErr=new Vr(Vr.NESTED_SHELLS,a),null;for(var u=null,l=0;l<e.getNumInteriorRing();l++){var c=e.getInteriorRingN(l);if(u=this.checkShellInsideHole(t,c,n),null===u)return null}this.validErr=new Vr(Vr.NESTED_SHELLS,u)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this.validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this.validErr)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new Vr(Vr.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var i=t.getGeometryN(n),r=i.getExteriorRing(),o=0;o<t.getNumGeometries();o++)if(n!==o){var a=t.getGeometryN(o);if(this.checkShellNotNested(r,a,e),null!==this.validErr)return null}},interfaces_:function(){return[]},getClass:function(){return Kr}}),Kr.findPtNotNode=function(t,e,n){for(var i=n.findEdge(e),r=i.getEdgeIntersectionList(),o=0;o<t.length;o++){var a=t[o];if(!r.isIntersection(a))return a}return null},Kr.isValid=function(){if(arguments[0]instanceof j){var t=arguments[0],e=new Kr(t);return e.isValid()}if(arguments[0]instanceof p){var n=arguments[0];return!(r.isNaN(n.x)||r.isInfinite(n.x)||r.isNaN(n.y)||r.isInfinite(n.y))}},e(Hr.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(null===this.ringPts){for(var t=new w,e=this.deList.iterator();e.hasNext();){var n=e.next(),i=n.getEdge();Hr.addEdge(i.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),Kr.isValid(this.ring))},build:function(t){var e=t;do this.add(e),e.setRing(this),e=e.getNext(),f.isTrue(null!==e,"found null DE in ring"),f.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t)},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var t=null;if(null!==this.holes){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}var n=this.factory.createPolygon(this.ring,t);return n},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof Pt){var t=arguments[0];null===this.holes&&(this.holes=new x),this.holes.add(t)}else if(arguments[0]instanceof Hr){var e=arguments[0];e.setShell(this);var n=e.getRing();null===this.holes&&(this.holes=new x),this.holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing();if(n.isOuterHole())return n}return null},computeHole:function(){var t=this.getRing();this._isHole=ce.isCCW(t.getCoordinates())},hasShell:function(){return null!==this.shell},isOuterShell:function(){return null!==this.getOuterHole()},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return oe.toLineString(new Ft(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(null!==this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&O.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof S))throw t;O.out.println(this.ringPts)}finally{}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing().getShell();if(null!==n&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return Hr}}),Hr.findDirEdgesInRing=function(t){var e=t,n=new x;do n.add(e),e=e.getNext(),f.isTrue(null!==e,"found null DE in ring"),f.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t);return n},Hr.addEdge=function(t,e,n){if(e)for(var i=0;i<t.length;i++)n.add(t[i],!1);else for(var i=t.length-1;i>=0;i--)n.add(t[i],!1)},Hr.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),l=u.getRing(),c=l.getEnvelopeInternal();if(!c.equals(i)&&c.contains(i)){r=q.ptNotInList(n.getCoordinates(),l.getCoordinates());var h=!1;ce.isPointInRing(r,l.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=u,a=o.getRing().getEnvelopeInternal())}}return o},e(qr.prototype,{compare:function(t,e){var n=t,i=e;return n.getRing().getEnvelope().compareTo(i.getRing().getEnvelope())},interfaces_:function(){return[s]},getClass:function(){return qr}}),Hr.EnvelopeComparator=qr,c(Xr,Nr),e(Xr.prototype,{findEdgeRing:function(t){var e=new Hr(this.factory);return e.build(t),e},computeDepthParity:function(){if(0===arguments.length)for(;;){var t=null;if(null===t)return null;this.computeDepthParity(t)}else 1===arguments.length&&arguments[0]},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();Xr.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=q.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),o=this.getNode(i),a=new Ar(r,o,e[1],!0),s=new Ar(o,r,e[e.length-2],!1),u=new kr(t);u.setDirectedEdges(a,s),this.add(u)},deleteCutEdges:function(){this.computeNextCWEdges(),Xr.findLabeledEdgeRings(this.dirEdges);for(var t=new x,e=this.dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var i=n.getSym();if(n.getLabel()===i.getLabel()){n.setMarked(!0),i.setMarked(!0);var r=n.getEdge();t.add(r.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),Xr.label(this.dirEdges,-1);var t=Xr.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new x,n=this.dirEdges.iterator();n.hasNext();){var i=n.next();if(!i.isMarked()&&!i.isInRing()){var r=this.findEdgeRing(i);e.add(r)}}return e},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new Tr(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel(),r=Xr.findIntersectionNodes(n,i);if(null!==r)for(var o=r.iterator();o.hasNext();){var a=o.next();Xr.computeNextCCWEdges(a,i)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new Z,n=new ge,i=t.iterator();i.hasNext();)n.push(i.next());for(;!n.isEmpty();){var r=n.pop();Xr.deleteAllEdges(r);for(var o=r.getOutEdges().getEdges(),i=o.iterator();i.hasNext();){var a=i.next();a.setMarked(!0);var s=a.getSym();null!==s&&s.setMarked(!0);var u=a.getEdge();e.add(u.getLine());var l=a.getToNode();1===Xr.getDegreeNonDeleted(l)&&n.push(l)}}return e},interfaces_:function(){return[]},getClass:function(){return Xr}}),Xr.findLabeledEdgeRings=function(t){for(var e=new x,n=1,i=t.iterator();i.hasNext();){var r=i.next();if(!(r.isMarked()||r.getLabel()>=0)){e.add(r);var o=Hr.findDirEdgesInRing(r);Xr.label(o,n),n++}}return e},Xr.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),n=0,i=e.iterator();i.hasNext();){var r=i.next();r.isMarked()||n++}return n},Xr.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var i=n.next();i.setMarked(!0);var r=i.getSym();null!==r&&r.setMarked(!0)}},Xr.label=function(t,e){for(var n=t.iterator();n.hasNext();){var i=n.next();i.setLabel(e)}},Xr.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),n=null,i=null,r=e.getEdges().iterator();r.hasNext();){var o=r.next();if(!o.isMarked()){if(null===n&&(n=o),null!==i){var a=i.getSym();a.setNext(o)}i=o}}if(null!==i){var a=i.getSym();a.setNext(n)}},Xr.computeNextCCWEdges=function(t,e){for(var n=t.getOutEdges(),i=null,r=null,o=n.getEdges(),a=o.size()-1;a>=0;a--){var s=o.get(a),u=s.getSym(),l=null;s.getLabel()===e&&(l=s);var c=null;u.getLabel()===e&&(c=u),null===l&&null===c||(null!==c&&(r=c),null!==l&&(null!==r&&(r.setNext(l),r=null),null===i&&(i=l)))}null!==r&&(f.isTrue(null!==i),r.setNext(i))},Xr.getDegree=function(t,e){for(var n=t.getOutEdges().getEdges(),i=0,r=n.iterator();r.hasNext();){var o=r.next();o.getLabel()===e&&i++}return i},Xr.findIntersectionNodes=function(t,e){var n=t,i=null;do{var r=n.getFromNode();Xr.getDegree(r,e)>1&&(null===i&&(i=new x),i.add(r)),n=n.getNext(),f.isTrue(null!==n,"found null DE in ring"),f.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return i},e(Wr.prototype,{getGeometry:function(){return null===this.geomFactory&&(this.geomFactory=new ie),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(ie.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isValid()?e.add(r):n.add(r.getLineString())}},polygonize:function(){if(null!==this.polyList)return null;if(this.polyList=new x,null===this.graph)return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new x;this.invalidRingLines=new x,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),Wr.assignHolesToShells(this.holeList,this.shellList),ha.sort(this.shellList,new Hr.EnvelopeComparator);var n=!0;this.extractOnlyPolygonal&&(Wr.findDisjointShells(this.shellList),n=!1),this.polyList=Wr.extractPolygons(this.shellList,n)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(C(arguments[0],m))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}else if(arguments[0]instanceof St){var i=arguments[0];this.geomFactory=i.getFactory(),null===this.graph&&(this.graph=new Xr(this.geomFactory)),this.graph.addEdge(i)}else if(arguments[0]instanceof j){var r=arguments[0];r.apply(this.lineStringAdder)}},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new x,this.shellList=new x;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return Wr}}),Wr.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getOuterHole();null===i||i.isProcessed()||(n.setIncluded(!0),i.setProcessed(!0))}},Wr.extractPolygons=function(t,e){for(var n=new x,i=t.iterator();i.hasNext();){var r=i.next();(e||r.isIncluded())&&n.add(r.getPolygon())}return n},Wr.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var i=n.next();Wr.assignHoleToShell(i,e)}},Wr.assignHoleToShell=function(t,e){var n=Hr.findEdgeRingContaining(t,e);null!==n&&n.addHole(t)},Wr.findDisjointShells=function(t){Wr.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var i=n.next();i.isIncludedSet()||(i.updateIncluded(),i.isIncludedSet()||(e=!0))}}while(e)},e(Yr.prototype,{filter:function(t){t instanceof St&&this.p.add(t)},interfaces_:function(){return[z]},getClass:function(){return Yr}}),Wr.LineStringAdder=Yr;var Ia=Object.freeze({Polygonizer:Wr});e(Jr.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),i=this.arg[1].getGeometry().getDimension(),r=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===n&&2===i?r&&e.setAtLeast("212101212"):2===n&&1===i?(r&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):1===n&&2===i?(r&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):1===n&&1===i&&o&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var i=n.next();i.isIsolated()&&(this.labelIsolatedEdge(i,e,this.arg[e].getGeometry()),this.isolatedEdges.add(i))}},labelIsolatedEdge:function(t,e,n){if(n.getDimension()>0){var i=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,i)}else t.getLabel().setAllLocations(e,T.EXTERIOR)},computeIM:function(){var t=new fe;if(t.set(T.EXTERIOR,T.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new Or,i=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(i);var r=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),i=this.nodes.addNode(n.getCoordinate());i.setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),a=this.nodes.find(o.coord);a.getLabel().isNull(t)&&(i===T.BOUNDARY?a.setLabelBoundary(t):a.setLabel(t,T.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),a=this.nodes.addNode(o.coord);i===T.BOUNDARY?a.setLabelBoundary(t):a.getLabel().isNull(t)&&a.setLabel(t,T.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();f.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}for(var i=this.nodes.iterator();i.hasNext();){var r=i.next();r.updateIM(t),r.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(T.INTERIOR,T.EXTERIOR,e.getDimension()),t.set(T.BOUNDARY,T.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(T.EXTERIOR,T.INTERIOR,n.getDimension()),t.set(T.EXTERIOR,T.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return Jr}}),e($r.prototype,{isContainedInBoundary:function(t){if(t instanceof It)return!1;if(t instanceof Tt)return this.isPointContainedInBoundary(t);if(t instanceof St)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new p,i=new p,r=0;r<e.size()-1;r++)if(e.getCoordinate(r,n),e.getCoordinate(r+1,i),!this.isLineSegmentContainedInBoundary(n,i))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof Tt){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof p){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return!!this.rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)},interfaces_:function(){return[]},getClass:function(){return $r}}),$r.contains=function(t,e){var n=new $r(t);return n.contains(e)},e(Zr.prototype,{intersects:function(t,e){var n=new E(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t))return!0;if(this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var i=t;t=e,e=i}var r=!1;return e.y>t.y&&(r=!0),r?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return Zr}}),e(Qr.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof ft)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return Qr}}),e(to.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new eo(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new no(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var i=new io(this.rectangle);return i.applyTo(t),!!i.intersects()},interfaces_:function(){return[]},getClass:function(){return to}}),to.intersects=function(t,e){var n=new to(t);return n.intersects(e)},c(eo,Qr),e(eo.prototype,{isDone:function(){return this._intersects===!0},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return eo}}),c(no,Qr),e(no.prototype,{isDone:function(){return this._containsPoint===!0},visit:function(t){if(!(t instanceof It))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new p,i=0;i<4;i++)if(this.rectSeq.getCoordinate(i,n),e.contains(n)&&In.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return no}}),c(io,Qr),e(io.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return this.hasIntersection===!0},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=Un.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return io}}),c(ro,ti),e(ro.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return ro}}),ro.covers=function(t,e){return!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||ro.relate(t,e).isCovers())},ro.intersects=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&(t.isRectangle()?to.intersects(t,e):e.isRectangle()?to.intersects(e,t):ro.relate(t,e).isIntersects())},ro.touches=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&ro.relate(t,e).isTouches(t.getDimension(),e.getDimension())},ro.within=function(t,e){return e.contains(t)},ro.coveredBy=function(t,e){return ro.covers(e,t)},ro.relate=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new ro(t,e),i=n.getIntersectionMatrix();return i}if(3===arguments.length){if("string"==typeof arguments[2]&&arguments[0]instanceof j&&arguments[1]instanceof j){var r=arguments[0],o=arguments[1],a=arguments[2];return ro.relateWithCheck(r,o).matches(a)}if(C(arguments[2],G)&&arguments[0]instanceof j&&arguments[1]instanceof j){var s=arguments[0],u=arguments[1],l=arguments[2],n=new ro(s,u,l),i=n.getIntersectionMatrix();return i}}},ro.overlaps=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&ro.relate(t,e).isOverlaps(t.getDimension(),e.getDimension())},ro.disjoint=function(t,e){return!t.intersects(e)},ro.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ro.relate(t,e)},ro.crosses=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&ro.relate(t,e).isCrosses(t.getDimension(),e.getDimension())},ro.contains=function(t,e){return!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?$r.contains(t,e):ro.relate(t,e).isContains())};var Na=Object.freeze({RelateOp:ro});e(oo.prototype,{extractElements:function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this.skipEmpty&&i.isEmpty()||e.add(i)}},combine:function(){for(var t=new x,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return oo}}),oo.combine=function(){if(1===arguments.length){var t=arguments[0],e=new oo(t);return e.combine()}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=new oo(oo.createList(n,i));return e.combine()}if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],e=new oo(oo.createList(r,o,a));return e.combine()}},oo.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},oo.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new x;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],n=new x;return n.add(i),n.add(r),n.add(o),n}},e(ao.prototype,{union:function(){for(var t=new Ie,e=new st,n=0;n<this.pointGeom.getNumGeometries();n++){var i=this.pointGeom.getGeometryN(n),r=i.getCoordinate(),o=t.locate(r,this.otherGeom);o===T.EXTERIOR&&e.add(r)}if(0===e.size())return this.otherGeom;var a=null,s=q.toCoordinateArray(e);return a=1===s.length?this.geomFact.createPoint(s[0]):this.geomFact.createMultiPointFromCoords(s),oo.combine(a,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return ao}}),ao.union=function(t,e){var n=new ao(t,e);return n.union()},e(so.prototype,{filter:function(t){this.sortIndex!==-1&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[ct]},getClass:function(){return so}}),so.extract=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return so.extract(t,e,new x)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return n.getSortIndex()===i?r.add(n):n instanceof ft&&n.apply(new so(i,r)),r}},e(uo.prototype,{reduceToGeometries:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next(),r=null;C(i,v)?r=this.unionTree(i):i instanceof j&&(r=i),e.add(r)}return e},extractByEnvelope:function(t,e,n){for(var i=new x,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this.geomFactory.buildGeometry(i)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i)){var r=oo.combine(t,e);return r}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);
var o=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,o)},union:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new Ue(uo.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var i=t.itemsTree(),r=this.unionTree(i);return r},binaryUnion:function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=uo.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n===2)return this.unionSafe(uo.getGeometry(e,n),uo.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),r=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,i);return this.unionSafe(r,a)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},unionSafe:function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return uo.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t),n=this.binaryUnion(e);return n},unionUsingEnvelopeIntersection:function(t,e,n){var i=new x,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),a=this.unionActual(r,o);i.add(a);var s=oo.combine(i);return s},bufferUnion:function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),i=n.buffer(0);return i}if(2===arguments.length){var r=arguments[0],o=arguments[1],e=r.getFactory(),n=e.createGeometryCollection([r,o]),i=n.buffer(0);return i}},interfaces_:function(){return[]},getClass:function(){return uo}}),uo.restrictToPolygons=function(t){if(C(t,Ct))return t;var e=gr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ie.toPolygonArray(e))},uo.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},uo.union=function(t){var e=new uo(t);return e.union()},uo.STRTREE_NODE_CAPACITY=4,e(lo.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return oi.overlayOp(t,e,ii.UNION)},unionWithNull:function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},extract:function(){if(C(arguments[0],m))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.extract(n)}else if(arguments[0]instanceof j){var i=arguments[0];null===this.geomFact&&(this.geomFact=i.getFactory()),so.extract(i,j.SORTINDEX_POLYGON,this.polygons),so.extract(i,j.SORTINDEX_LINESTRING,this.lines),so.extract(i,j.SORTINDEX_POINT,this.points)}},union:function t(){if(null===this.geomFact)return null;var e=null;if(this.points.size()>0){var n=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(n)}var i=null;if(this.lines.size()>0){var r=this.geomFact.buildGeometry(this.lines);i=this.unionNoOpt(r)}var o=null;this.polygons.size()>0&&(o=uo.union(this.polygons));var a=this.unionWithNull(i,o),t=null;return t=null===e?a:null===a?e:ao.union(e,a),null===t?this.geomFact.createGeometryCollection():t},interfaces_:function(){return[]},getClass:function(){return lo}}),lo.union=function(){if(1===arguments.length){if(C(arguments[0],m)){var t=arguments[0],e=new lo(t);return e.union()}if(arguments[0]instanceof j){var n=arguments[0],e=new lo(n);return e.union()}}else if(2===arguments.length){var i=arguments[0],r=arguments[1],e=new lo(i,r);return e.union()}};var Pa=Object.freeze({UnaryUnionOp:lo}),La=Object.freeze({IsValidOp:Kr,ConsistentAreaTester:Gr}),Aa=Object.freeze({BoundaryOp:dt,IsSimpleOp:Xi,buffer:Sa,distance:Ma,linemerge:Ta,overlay:Ca,polygonize:Ia,relate:Na,union:Pa,valid:La});c(co,At.CoordinateOperation),e(co.prototype,{editCoordinates:function(t,e){if(0===t.length)return null;for(var n=new Array(t.length).fill(null),i=0;i<t.length;i++){var r=new p(t[i]);this.targetPM.makePrecise(r),n[i]=r}var o=new w(n,!1),a=o.toCoordinateArray(),s=0;e instanceof St&&(s=2),e instanceof Pt&&(s=4);var u=n;return this.removeCollapsed&&(u=null),a.length<s?u:a},interfaces_:function(){return[]},getClass:function(){return co}}),e(ho.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),i=n;return this.changePrecisionModel||(i=this.changePM(n,t.getPrecisionModel())),i},reducePointwise:function(t){var e=null;if(this.changePrecisionModel){var n=this.createFactory(t.getFactory(),this.targetPM);e=new At(n)}else e=new At;var i=this.removeCollapsed;t.getDimension()>=2&&(i=!0);var r=e.edit(t,new co(this.targetPM,i));return r},changePM:function(t,e){var n=this.createEditor(t.getFactory(),e);return n.edit(t,new At.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){var n=new ie(e,t.getSRID(),t.getCoordinateSequenceFactory());return n},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:C(e,Ct)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){if(t.getPrecisionModel()===e)return new At;var n=this.createFactory(t,e),i=new At(n);return i},interfaces_:function(){return[]},getClass:function(){return ho}}),ho.reduce=function(t,e){var n=new ho(e);return n.reduce(t)},ho.reducePointwise=function(t,e){var n=new ho(e);return n.setPointwise(!0),n.reduce(t)};var ka=Object.freeze({GeometryPrecisionReducer:ho});e(fo.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,i=t,r=t+1;r<e;r++){var o=this.seg.distance(this.pts[r]);o>n&&(n=o,i=r)}if(n<=this.distanceTolerance)for(var r=t+1;r<e;r++)this.usePt[r]=!1;else this.simplifySection(t,i),this.simplifySection(i,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);for(var e=new w,t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new p(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return fo}}),fo.simplify=function(t,e){var n=new fo(t);return n.setDistanceTolerance(e),n.simplify()},e(po.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new go(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<0)throw new i("Tolerance must be non-negative");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return po}}),po.simplify=function(t,e){var n=new po(t);return n.setDistanceTolerance(e),n.getResultGeometry()},c(go,be),e(go.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=be.prototype.transformPolygon.call(this,t,e);return e instanceof Lt?n:this.createValidArea(n)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=null;return i=0===n.length?new Array(0).fill(null):fo.simplify(n,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(i)},transformMultiPolygon:function(t,e){var n=be.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof It,i=be.prototype.transformLinearRing.call(this,t,e);return!n||i instanceof Pt?i:null},interfaces_:function(){return[]},getClass:function(){return go}}),po.DPTransformer=go,c(mo,he),e(mo.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return mo}}),e(yo.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(yo.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return 0===t?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(yo.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new mo(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return yo.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return yo}}),yo.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,i=0;i<t.size();i++)n=t.get(i),e[i]=n.p0;return e[e.length-1]=n.p1,e},e(vo.prototype,{remove:function(t){this.index.remove(new E(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof yo)for(var t=arguments[0],e=t.getSegments(),n=0;n<e.length;n++){var i=e[n];this.add(i)}else if(arguments[0]instanceof he){var r=arguments[0];this.index.insert(new E(r.p0,r.p1),r)}},query:function(t){var e=new E(t.p0,t.p1),n=new bo(t);this.index.query(e,n);var i=n.getItems();return i},interfaces_:function(){return[]},getClass:function(){return vo}}),e(bo.prototype,{visitItem:function(t){var e=t;E.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Oe]},getClass:function(){return bo}}),e(_o.prototype,{flatten:function(t,e){var n=this.linePts[t],i=this.linePts[e],r=new he(n,i);return this.remove(this.line,t,e),this.outputIndex.add(r),r},hasBadIntersection:function(t,e,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var i=new Array(2).fill(null);if(t+1===e){var r=this.line.getSegment(t);return this.line.addToResult(r),null}var o=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var a=n+1;a<this.line.getMinimumSize()&&(o=!1)}var s=new Array(1).fill(null),u=this.findFurthestPoint(this.linePts,t,e,s);s[0]>this.distanceTolerance&&(o=!1);var l=new he;if(l.p0=this.linePts[t],l.p1=this.linePts[e],i[0]=t,i[1]=e,this.hasBadIntersection(this.line,i,l)&&(o=!1),o){var r=this.flatten(t,e);return this.line.addToResult(r),null}this.simplifySection(t,u,n),this.simplifySection(u,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t),n=e.iterator();n.hasNext();){var i=n.next();if(this.hasInteriorIntersection(i,t))return!0}return!1},findFurthestPoint:function(t,e,n,i){var r=new he;r.p0=t[e],r.p1=t[n];for(var o=-1,a=e,s=e+1;s<n;s++){var u=t[s],l=r.distance(u);l>o&&(o=l,a=s)}return i[0]=o,a},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var i=e;i<n;i++){var r=t.getSegment(i);this.inputIndex.remove(r)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var i=this.inputIndex.query(n),r=i.iterator();r.hasNext();){var o=r.next();if(this.hasInteriorIntersection(o,n)){if(_o.isInLineSection(t,e,o))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return _o}}),_o.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var i=n.getIndex();return i>=e[0]&&i<e[1]},e(xo.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(var e=t.iterator();e.hasNext();){var n=new _o(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return xo}}),e(wo.prototype,{getResultGeometry:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new te,this.inputGeom.apply(new So(this)),this.lineSimplifier.simplify(this.linestringMap.values());var t=new Eo(this.linestringMap).transform(this.inputGeom);return t},setDistanceTolerance:function(t){if(t<0)throw new i("Tolerance must be non-negative");this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return wo}}),wo.simplify=function(t,e){var n=new wo(t);return n.setDistanceTolerance(e),n.getResultGeometry()},c(Eo,be),e(Eo.prototype,{transformCoordinates:function(t,e){if(0===t.size())return null;if(e instanceof St){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return be.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return Eo}}),e(So.prototype,{filter:function(t){if(t instanceof St){var e=t;if(e.isEmpty())return null;var n=e.isClosed()?4:2,i=new yo(e,n);this.tps.linestringMap.put(e,i)}},interfaces_:function(){return[z]},getClass:function(){return So}}),wo.LineStringTransformer=Eo,wo.LineStringMapBuilderFilter=So;var Ra=Object.freeze({DouglasPeuckerSimplifier:po,TopologyPreservingSimplifier:wo});e(Mo.prototype,{splitAt:function(){if(1===arguments.length){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=Mo.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.getConstrainedLength(n),o=r/this.segLen;i.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(o):this.splitPt=Mo.pointAlongReverse(this.seg,o)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return Mo}}),Mo.pointAlongReverse=function(t,e){var n=new p;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},e(To.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return To}}),e(Co.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),i=n.getLength(),r=i/2,o=new Mo(n),a=Co.projectedSplitPoint(t,e),s=2*a.distance(e)*.8,u=s;return u>r&&(u=r),o.setMinimumLength(u),o.splitAt(a),o.getSplitPoint()},interfaces_:function(){return[To]},getClass:function(){return Co}}),Co.projectedSplitPoint=function(t,e){var n=t.getLineSegment(),i=n.project(e);return i},e(Io.prototype,{interfaces_:function(){return[]},getClass:function(){return Io}}),Io.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},Io.isInCircleDDNormalized=function(t,e,n,i){var r=A.valueOf(t.x).selfSubtract(i.x),o=A.valueOf(t.y).selfSubtract(i.y),a=A.valueOf(e.x).selfSubtract(i.x),s=A.valueOf(e.y).selfSubtract(i.y),u=A.valueOf(n.x).selfSubtract(i.x),l=A.valueOf(n.y).selfSubtract(i.y),c=r.multiply(s).selfSubtract(a.multiply(o)),h=a.multiply(l).selfSubtract(u.multiply(s)),f=u.multiply(o).selfSubtract(r.multiply(l)),p=r.multiply(r).selfAdd(o.multiply(o)),d=a.multiply(a).selfAdd(s.multiply(s)),g=u.multiply(u).selfAdd(l.multiply(l)),m=p.selfMultiply(h).selfAdd(d.selfMultiply(f)).selfAdd(g.selfMultiply(c)),y=m.doubleValue()>0;return y},Io.checkRobustInCircle=function(t,e,n,i){var r=Io.isInCircleNonRobust(t,e,n,i),o=Io.isInCircleDDSlow(t,e,n,i),a=Io.isInCircleCC(t,e,n,i),s=Si.circumcentre(t,e,n);O.out.println("p radius diff a = "+Math.abs(i.distance(s)-t.distance(s))/t.distance(s)),r===o&&r===a||(O.out.println("inCircle robustness failure (double result = "+r+", DD result = "+o+", CC result = "+a+")"),O.out.println(oe.toLineString(new Ft([t,e,n,i]))),O.out.println("Circumcentre = "+oe.toPoint(s)+" radius = "+t.distance(s)),O.out.println("p radius diff a = "+Math.abs(i.distance(s)/t.distance(s)-1)),O.out.println("p radius diff b = "+Math.abs(i.distance(s)/e.distance(s)-1)),O.out.println("p radius diff c = "+Math.abs(i.distance(s)/n.distance(s)-1)),O.out.println())},Io.isInCircleDDFast=function(t,e,n,i){var r=A.sqr(t.x).selfAdd(A.sqr(t.y)).selfMultiply(Io.triAreaDDFast(e,n,i)),o=A.sqr(e.x).selfAdd(A.sqr(e.y)).selfMultiply(Io.triAreaDDFast(t,n,i)),a=A.sqr(n.x).selfAdd(A.sqr(n.y)).selfMultiply(Io.triAreaDDFast(t,e,i)),s=A.sqr(i.x).selfAdd(A.sqr(i.y)).selfMultiply(Io.triAreaDDFast(t,e,n)),u=r.selfSubtract(o).selfAdd(a).selfSubtract(s),l=u.doubleValue()>0;return l},Io.isInCircleCC=function(t,e,n,i){var r=Si.circumcentre(t,e,n),o=t.distance(r),a=i.distance(r)-o;return a<=0},Io.isInCircleNormalized=function(t,e,n,i){var r=t.x-i.x,o=t.y-i.y,a=e.x-i.x,s=e.y-i.y,u=n.x-i.x,l=n.y-i.y,c=r*s-a*o,h=a*l-u*s,f=u*o-r*l,p=r*r+o*o,d=a*a+s*s,g=u*u+l*l,m=p*h+d*f+g*c;return m>0},Io.isInCircleDDSlow=function(t,e,n,i){var r=A.valueOf(i.x),o=A.valueOf(i.y),a=A.valueOf(t.x),s=A.valueOf(t.y),u=A.valueOf(e.x),l=A.valueOf(e.y),c=A.valueOf(n.x),h=A.valueOf(n.y),f=a.multiply(a).add(s.multiply(s)).multiply(Io.triAreaDDSlow(u,l,c,h,r,o)),p=u.multiply(u).add(l.multiply(l)).multiply(Io.triAreaDDSlow(a,s,c,h,r,o)),d=c.multiply(c).add(h.multiply(h)).multiply(Io.triAreaDDSlow(a,s,u,l,r,o)),g=r.multiply(r).add(o.multiply(o)).multiply(Io.triAreaDDSlow(a,s,u,l,c,h)),m=f.subtract(p).add(d).subtract(g),y=m.doubleValue()>0;return y},Io.isInCircleNonRobust=function(t,e,n,i){var r=(t.x*t.x+t.y*t.y)*Io.triArea(e,n,i)-(e.x*e.x+e.y*e.y)*Io.triArea(t,n,i)+(n.x*n.x+n.y*n.y)*Io.triArea(t,e,i)-(i.x*i.x+i.y*i.y)*Io.triArea(t,e,n)>0;return r},Io.isInCircleRobust=function(t,e,n,i){return Io.isInCircleNormalized(t,e,n,i)},Io.triAreaDDSlow=function(t,e,n,i,r,o){return n.subtract(t).multiply(o.subtract(e)).subtract(i.subtract(e).multiply(r.subtract(t)))},Io.triAreaDDFast=function(t,e,n){var i=A.valueOf(e.x).selfSubtract(t.x).selfMultiply(A.valueOf(n.y).selfSubtract(t.y)),r=A.valueOf(e.y).selfSubtract(t.y).selfMultiply(A.valueOf(n.x).selfSubtract(t.x));return i.selfSubtract(r)},e(No.prototype,{circleCenter:function(t,e){var n=new No(this.getX(),this.getY()),i=this.bisector(n,t),r=this.bisector(t,e),o=new D(i,r),a=null;try{a=new No(o.getX(),o.getY())}catch(i){if(!(i instanceof M))throw i;O.err.println("a: "+n+"  b: "+t+"  c: "+e),O.err.println(i)}finally{}return a},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),i=e.getY()-t.getY(),r=new D(t.getX()+n/2,t.getY()+i/2,1),o=new D(t.getX()-i+n/2,t.getY()+n+i/2,1);return new D(r,o)},equals:function(){if(1===arguments.length){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return Io.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var i=t.getX(),r=t.getY(),o=e.getX()-i,a=n.getX()-i,s=e.getY()-r,u=n.getY()-r,l=o*u-a*s,c=this.getX()-i,h=this.getY()-r,f=(u*c-a*h)/l,p=(-s*c+o*h)/l,d=t.getZ()+f*(e.getZ()-t.getZ())+p*(n.getZ()-t.getZ());return d},midPoint:function(t){var e=(this.p.x+t.getX())/2,n=(this.p.y+t.getY())/2,i=(this.p.z+t.getZ())/2;return new No(e,n,i)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new No(t*this.p.x,t*this.p.y)},cross:function(){return new No(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new No(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=this,i=e.sub(t),r=n.sub(t),o=i.crossProduct(r);return o>0?No.LEFT:o<0?No.RIGHT:i.getX()*r.getX()<0||i.getY()*r.getY()<0?No.BEHIND:i.magn()<r.magn()?No.BEYOND:t.equals(n)?No.ORIGIN:e.equals(n)?No.DESTINATION:No.BETWEEN},sum:function(t){return new No(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),i=this.distance(n,t),r=this.distance(this,t),o=this.distance(t,e);return o<r&&(r=o),o=this.distance(e,this),o<r&&(r=o),i/r},interfaces_:function(){return[]},getClass:function(){return No}}),No.interpolateZ=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=e.distance(n),r=t.distance(e),o=n.z-e.z,a=e.z+o*(r/i);return a}if(4===arguments.length){var s=arguments[0],u=arguments[1],l=arguments[2],c=arguments[3],h=u.x,f=u.y,p=l.x-h,d=c.x-h,g=l.y-f,m=c.y-f,y=p*m-d*g,v=s.x-h,b=s.y-f,_=(m*v-d*b)/y,x=(-g*v+p*b)/y,w=u.z+_*(l.z-u.z)+x*(c.z-u.z);return w}},No.LEFT=0,No.RIGHT=1,No.BEYOND=2,No.BEHIND=3,No.BETWEEN=4,No.ORIGIN=5,No.DESTINATION=6,c(Po,No),e(Po.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return Po}}),e(Lo.prototype,{equalsNonOriented:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},toLineSegment:function(){return new he(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return oe.toLineString(t,e)},isLive:function(){return null!==this._rot},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return Lo}}),Lo.makeEdge=function(t,e){var n=new Lo,i=new Lo,r=new Lo,o=new Lo;n._rot=i,i._rot=r,r._rot=o,o._rot=n,n.setNext(n),i.setNext(o),r.setNext(r),o.setNext(i);var a=n;return a.setOrig(t),a.setDest(e),a},Lo.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();Lo.splice(t,e),Lo.splice(t.sym(),n),Lo.splice(t,e.lNext()),Lo.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},Lo.splice=function(t,e){var n=t.oNext().rot(),i=e.oNext().rot(),r=e.oNext(),o=t.oNext(),a=i.oNext(),s=n.oNext();t.setNext(r),e.setNext(o),n.setNext(a),i.setNext(s)},Lo.connect=function(t,e){var n=Lo.makeEdge(t.dest(),e.orig());return Lo.splice(n,t.lNext()),Lo.splice(n.sym(),e),n},e(Ao.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);Lo.splice(n,e);var i=n;do n=this.subdiv.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==i);for(;;){var r=e.oPrev();if(r.dest().rightOf(e)&&t.isInCircle(e.orig(),r.dest(),e.dest()))Lo.swap(e),e=e.oPrev();else{if(e.oNext()===i)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return Ao}}),e(ko.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return ko}}),e(Ro.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},findEdge:function(){var t=this.subdiv.getEdges();return t.iterator().next()},interfaces_:function(){return[ko]},getClass:function(){return Ro}}),c(Oo,l),e(Oo.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return Oo}}),Oo.msgWithSpatial=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(Do.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Do}}),e(Fo.prototype,{getTriangleVertices:function(t){var e=new Bo;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return!!t.equals(this.frameVertex[0])||!!t.equals(this.frameVertex[1])||!!t.equals(this.frameVertex[2])},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var n=Lo.connect(t,e);return this.quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new x,i=t;do{var r=t.rot().orig().getCoordinate();n.add(r),t=t.oPrev()}while(t!==i);var o=new w;o.addAll(n,!1),o.closeRing(),o.size()<4&&(O.out.println(o),o.add(o.get(o.size()-1),!0));var a=o.toCoordinateArray(),s=e.createPolygon(e.createLinearRing(a),null),u=i.orig();return s.setUserData(u.getCoordinate()),s},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);Lo.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return Lo.splice(e.sym(),n),Lo.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);Fo.getTriangleEdges(t,e);var n=new Array(3).fill(null);Fo.getTriangleEdges(t.sym(),n);var i=t.lNext().dest();if(this.isFrameVertex(i))return!0;var r=t.sym().lNext().dest();return!!this.isFrameVertex(r)},makeEdge:function(t,e){var n=Lo.makeEdge(t,e);return this.quadEdges.add(n),n},visitTriangles:function(t,e){this.visitedKey++;var n=new ge;n.push(this.startingEdge);for(var i=new Z;!n.empty();){var r=n.pop();if(!i.contains(r)){var o=this.fetchTriangleToVisit(r,n,e,i);null!==o&&t.visit(o)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate());var n=this.seg.distance(e);return n<this.edgeCoincidenceTolerance},getEnvelope:function(){return new E(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),n=t.getHeight(),i=0;i=e>n?10*e:10*n,this.frameVertex[0]=new No((t.getMaxX()+t.getMinX())/2,t.getMaxY()+i),this.frameVertex[1]=new No(t.getMinX()-i,t.getMinY()-i),this.frameVertex[2]=new No(t.getMaxX()+i,t.getMinY()-i),this.frameEnv=new E(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new Go;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new Z,n=this.quadEdges.iterator();n.hasNext();){var i=n.next(),r=i.orig();!t&&this.isFrameVertex(r)||e.add(r);var o=i.dest();!t&&this.isFrameVertex(o)||e.add(o)}return e},fetchTriangleToVisit:function(t,e,n,i){var r=t,o=0,a=!1;do{this.triEdges[o]=r,this.isFrameEdge(r)&&(a=!0);var s=r.sym();i.contains(s)||e.push(s),i.add(r),o++,r=r.lNext()}while(r!==t);return a&&!n?null:this.triEdges},getEdges:function(){if(0===arguments.length)return this.quadEdges;if(1===arguments.length){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var o=r.next();n[i++]=t.createLineString([o.orig().getCoordinate(),o.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new x,n=new Z,i=this.quadEdges.iterator();i.hasNext();){var r=i.next(),o=r.orig();n.contains(o)||(n.add(o),!t&&this.isFrameVertex(o)||e.add(r));var a=r.sym(),s=a.orig();n.contains(s)||(n.add(s),!t&&this.isFrameVertex(s)||e.add(a))}return e},getTriangleEdges:function(t){var e=new jo;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new x,n=new ge;n.push(this.startingEdge);for(var i=new Z;!n.empty();){var r=n.pop();if(!i.contains(r)){var o=r.getPrimary();!t&&this.isFrameEdge(o)||e.add(o),n.push(r.oNext()),n.push(r.sym().oNext()),i.add(r),i.add(r.sym())}}return e},delete:function(t){Lo.splice(t,t.oPrev()),Lo.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),i=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(i),t.delete(),e.delete(),n.delete(),i.delete()},locateFromEdge:function(t,e){for(var n=0,i=this.quadEdges.size(),r=e;;){if(n++,n>i)throw new Oo(r.toLineSegment());if(t.equals(r.orig())||t.equals(r.dest()))break;if(t.rightOf(r))r=r.sym();else if(t.rightOf(r.oNext())){if(t.rightOf(r.dPrev()))break;r=r.dPrev()}else r=r.oNext()}return r},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new zo,!0);for(var e=new x,n=this.getVertexUniqueEdges(!1),i=n.iterator();i.hasNext();){var r=i.next();e.add(this.getVoronoiCellPolygon(r,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(ie.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var o=r.next();n[i++]=t.createPolygon(t.createLinearRing(o),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);Lo.splice(n,e);var i=n;do n=this.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==i);return i},locate:function(){if(1===arguments.length){if(arguments[0]instanceof No){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof p){var e=arguments[0];return this.locator.locate(new No(e))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.locator.locate(new No(n));if(null===r)return null;var o=r;r.dest().getCoordinate().equals2D(n)&&(o=r.sym());var a=o;do{if(a.dest().getCoordinate().equals2D(i))return a;a=a.oNext()}while(a!==o);return null}},interfaces_:function(){return[]},getClass:function(){return Fo}}),Fo.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new i("Edges do not form a triangle")},e(zo.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),i=t[2].orig().getCoordinate(),r=Si.circumcentre(e,n,i),o=new No(r),a=0;a<3;a++)t[a].rot().setOrig(o)},interfaces_:function(){return[Do]},getClass:function(){return zo}}),e(jo.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[Do]},getClass:function(){return jo}}),e(Bo.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[Do]},getClass:function(){
return Bo}}),e(Go.prototype,{checkTriangleSize:function(t){var e="";t.length>=2?e=oe.toLineString(t[0],t[1]):t.length>=1&&(e=oe.toPoint(t[0]))},visit:function(t){this.coordList.clear();for(var e=0;e<3;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var i=this.coordList.toCoordinateArray();if(4!==i.length)return null;this.triCoords.add(i)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[Do]},getClass:function(){return Go}}),Fo.TriangleCircumcentreVisitor=zo,Fo.TriangleEdgesListVisitor=jo,Fo.TriangleVertexListVisitor=Bo,Fo.TriangleCoordinatesVisitor=Go,Fo.EDGE_COINCIDENCE_TOL_FACTOR=1e3,e(Uo.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){var t=this.ls.getCoordinate(1);return t.z},getStartZ:function(){var t=this.ls.getCoordinate(0);return t.z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){var t=this.ls.getCoordinate(1);return t.y},getStartX:function(){var t=this.ls.getCoordinate(0);return t.x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){var t=this.ls.getCoordinate(0);return t.y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){var t=this.ls.getCoordinate(1);return t.x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return Uo}}),e(Vo.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Vo}}),e(Ko.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return Ko}}),e(Ho.prototype,{insert:function(){if(1===arguments.length){var t=arguments[0];return this.insert(t,null)}if(2===arguments.length){var e=arguments[0],n=arguments[1];if(null===this.root)return this.root=new Ko(e,n),this.root;if(this.tolerance>0){var i=this.findBestMatchNode(e);if(null!==i)return i.increment(),i}return this.insertExact(e,n)}},query:function(){var t=arguments,e=this;if(1===arguments.length){var n=arguments[0],i=new x;return this.query(n,i),i}if(2===arguments.length)if(arguments[0]instanceof E&&C(arguments[1],v))!function(){var n=t[0],i=t[1];e.queryNode(e.root,n,!0,{interfaces_:function(){return[Vo]},visit:function(t){i.add(t)}})}();else if(arguments[0]instanceof E&&C(arguments[1],Vo)){var r=arguments[0],o=arguments[1];this.queryNode(this.root,r,!0,o)}},queryNode:function(t,e,n,i){if(null===t)return null;var r=null,o=null,a=null;n?(r=e.getMinX(),o=e.getMaxX(),a=t.getX()):(r=e.getMinY(),o=e.getMaxY(),a=t.getY());var s=r<a,u=a<=o;s&&this.queryNode(t.getLeft(),e,!n,i),e.contains(t.getCoordinate())&&i.visit(t),u&&this.queryNode(t.getRight(),e,!n,i)},findBestMatchNode:function(t){var e=new qo(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return null===this.root},insertExact:function(t,e){for(var n=this.root,i=this.root,r=!0,o=!0;null!==n;){if(null!==n){var a=t.distance(n.getCoordinate())<=this.tolerance;if(a)return n.increment(),n}o=r?t.x<n.getX():t.y<n.getY(),i=n,n=o?n.getLeft():n.getRight(),r=!r}this.numberOfNodes=this.numberOfNodes+1;var s=new Ko(t,e);return o?i.setLeft(s):i.setRight(s),s},interfaces_:function(){return[]},getClass:function(){return Ho}}),Ho.toCoordinates=function(){if(1===arguments.length){var t=arguments[0];return Ho.toCoordinates(t,!1)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new w,r=e.iterator();r.hasNext();)for(var o=r.next(),a=n?o.getCount():1,s=0;s<a;s++)i.add(o.getCoordinate(),!0);return i.toCoordinateArray()}},e(qo.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate()),n=e<=this.tolerance;if(!n)return null;var i=!1;(null===this.matchNode||e<this.matchDist||null!==this.matchNode&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(i=!0),i&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new E(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[Vo]},getClass:function(){return qo}}),Ho.BestMatchVisitor=qo,e(Xo.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do e=this.enforceGabriel(this.segments),t++;while(e>0&&t<Xo.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){var i=n.next();t[e++]=i.getCoordinate()}for(var r=this.segVertices.iterator();r.hasNext();){var i=r.next();t[e++]=i.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new ie,e=this.getPointArray(),n=new ye(e,t);this.convexHull=n.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),i=new p((e.x+n.x)/2,(e.y+n.y)/2),o=e.distance(i),a=new E(i);a.expandBy(o);for(var s=this.kdt.query(a),u=null,l=r.MAX_VALUE,c=s.iterator();c.hasNext();){var h=c.next(),f=h.getCoordinate();if(!f.equals2D(e)&&!f.equals2D(n)){var d=i.distance(f);if(d<o){var g=d;(null===u||g<l)&&(u=f,l=g)}}}return u},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new x,n=0,i=new x,r=t.iterator();r.hasNext();){var o=r.next(),a=this.findNonGabrielPoint(o);if(null!==a){this.splitPt=this.splitFinder.findSplitPoint(o,a);var s=this.createVertex(this.splitPt,o),u=(this.insertSite(s),new Uo(o.getStartX(),o.getStartY(),o.getStartZ(),s.getX(),s.getY(),s.getZ(),o.getData())),l=new Uo(s.getX(),s.getY(),s.getZ(),o.getEndX(),o.getEndY(),o.getEndZ(),o.getData());e.add(u),e.add(l),i.add(o),n+=1}}return t.removeAll(i),t.addAll(e),n},createVertex:function(){if(1===arguments.length){var t=arguments[0],e=null;return e=null!==this.vertexFactory?this.vertexFactory.createVertex(t,null):new Po(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=null;return e=null!==this.vertexFactory?this.vertexFactory.createVertex(n,i):new Po(n),e.setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=Xo.computeVertexEnvelope(this.initialVertices),e=Xo.computeVertexEnvelope(this.segVertices),n=new E(t);n.expandToInclude(e);var i=.2*n.getWidth(),r=.2*n.getHeight(),o=Math.max(i,r);this.computeAreaEnv=new E(n),this.computeAreaEnv.expandBy(o)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new Fo(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new Ro(this.subdiv)),this.incDel=new Ao(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof Po){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this.incDel.insertSite(t),t}if(arguments[0]instanceof p){var i=arguments[0];this.insertSite(this.createVertex(i))}},interfaces_:function(){return[]},getClass:function(){return Xo}}),Xo.computeVertexEnvelope=function(t){for(var e=new E,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i.getCoordinate())}return e},Xo.MAX_SPLIT_ITER=99,e(Wo.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Wo.envelope(this.siteCoords),e=Wo.toVertices(this.siteCoords);this.subdiv=new Fo(t,this.tolerance);var n=new Ao(this.subdiv);n.insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof j){var t=arguments[0];this.siteCoords=Wo.extractUniqueCoordinates(t)}else if(C(arguments[0],m)){var e=arguments[0];this.siteCoords=Wo.unique(q.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return Wo}}),Wo.extractUniqueCoordinates=function(t){if(null===t)return new w;var e=t.getCoordinates();return Wo.unique(e)},Wo.envelope=function(t){for(var e=new E,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i)}return e},Wo.unique=function(t){var e=q.copyDeep(t);ut.sort(e);var n=new w(e,!1);return n},Wo.toVertices=function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next();e.add(new No(i))}return e},e(Yo.prototype,{createSiteVertices:function(t){for(var e=new x,n=t.iterator();n.hasNext();){var i=n.next();this.constraintVertexMap.containsKey(i)||e.add(new Po(i))}return e},create:function(){if(null!==this.subdiv)return null;var t=Wo.envelope(this.siteCoords),e=new x;null!==this.constraintLines&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=Yo.createConstraintSegments(this.constraintLines));var n=this.createSiteVertices(this.siteCoords),i=new Xo(n,this.tolerance);i.setConstraints(e,new x(this.constraintVertexMap.values())),i.formInitialDelaunay(),i.enforceConstraints(),this.subdiv=i.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=Wo.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var i=new Po(e[n]);this.constraintVertexMap.put(e[n],i)}},interfaces_:function(){return[]},getClass:function(){return Yo}}),Yo.createConstraintSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=Un.getLines(t),n=new x,i=e.iterator();i.hasNext();){var r=i.next();Yo.createConstraintSegments(r,n)}return n}if(2===arguments.length)for(var o=arguments[0],a=arguments[1],s=o.getCoordinates(),i=1;i<s.length;i++)a.add(new Uo(s[i-1],s[i]))},e(Jo.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Wo.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv);var n=Wo.toVertices(this.siteCoords);this.subdiv=new Fo(t,this.tolerance);var i=new Ao(this.subdiv);i.insertSites(n)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return Jo.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof j){var t=arguments[0];this.siteCoords=Wo.extractUniqueCoordinates(t)}else if(C(arguments[0],m)){var e=arguments[0];this.siteCoords=Wo.unique(q.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Jo}}),Jo.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),i=new x,r=0;r<t.getNumGeometries();r++){var o=t.getGeometryN(r),a=null;e.contains(o.getEnvelopeInternal())?a=o:e.intersects(o.getEnvelopeInternal())&&(a=n.intersection(o),a.setUserData(o.getUserData())),null===a||a.isEmpty()||i.add(a)}return t.getFactory().createGeometryCollection(ie.toGeometryArray(i))};var Oa=Object.freeze({Vertex:No}),Da=Object.freeze({ConformingDelaunayTriangulationBuilder:Yo,DelaunayTriangulationBuilder:Wo,VoronoiDiagramBuilder:Jo,quadedge:Oa});e($o.prototype,{interfaces_:function(){return[]},getClass:function(){return $o}}),$o.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ii.createEmptyResult(ii.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ii.UNION)},e(j.prototype,{equalsTopo:function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&ro.relate(this,t).isEquals(this.getDimension(),t.getDimension())},union:function(){if(0===arguments.length)return lo.union(this);if(1===arguments.length){var t=arguments[0];return $o.union(this,t)}},isValid:function(){return Kr.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return ii.createEmptyResult(ii.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return cn.map(this,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),oi.overlayOp(this,t,ii.INTERSECTION)},covers:function(t){return ro.covers(this,t)},coveredBy:function(t){return ro.coveredBy(this,t)},touches:function(t){return ro.touches(this,t)},intersects:function(t){return ro.intersects(this,t)},within:function(t){return ro.within(this,t)},overlaps:function(t){return ro.overlaps(this,t)},disjoint:function(t){return ro.disjoint(this,t)},crosses:function(t){return ro.crosses(this,t)},buffer:function(){if(1===arguments.length){var t=arguments[0];return dr.bufferOp(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return dr.bufferOp(this,e,n)}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];return dr.bufferOp(this,i,r,o)}},convexHull:function(){return new ye(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return ro.relate.apply(ro,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=pe.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(0===e){var n=new li(this);t=n.getInteriorPoint()}else if(1===e){var n=new ui(this);t=n.getInteriorPoint()}else{var n=new ai(this);t=n.getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return ii.createEmptyResult(ii.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),oi.overlayOp(this,t,ii.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){var t=new oe;return t.write(this)},toString:function(){this.toText()},contains:function(t){return ro.contains(this,t)},difference:function(t){return this.isEmpty()?ii.createEmptyResult(ii.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),oi.overlayOp(this,t,ii.DIFFERENCE))},isSimple:function(){var t=new Xi(this);return t.isSimple()},isWithinDistance:function(t,e){var n=this.getEnvelopeInternal().distance(t.getEnvelopeInternal());return!(n>e)&&br.isWithinDistance(this,t,e)},distance:function(t){return br.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});var Fa="1.3.0 (6e65adb)";t.version=Fa,t.algorithm=fa,t.densify=pa,t.dissolve=da,t.geom=ca,t.geomgraph=ga,t.index=va,t.io=wa,t.noding=Ea,t.operation=Aa,t.precision=ka,t.simplify=Ra,t.triangulate=Da,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e){(function(e){function n(t,e,n){function r(e){var n=g,i=m;return g=m=void 0,S=e,v=t.apply(i,n)}function o(t){return S=t,b=setTimeout(c,e),M?r(t):v}function u(t){var n=t-E,i=t-S,r=e-n;return T?x(r,y-i):r}function l(t){var n=t-E,i=t-S;return void 0===E||n>=e||n<0||T&&i>=y}function c(){var t=w();return l(t)?h(t):void(b=setTimeout(c,u(t)))}function h(t){return b=void 0,C&&g?r(t):(g=m=void 0,v)}function f(){void 0!==b&&clearTimeout(b),S=0,g=E=m=b=void 0}function p(){return void 0===b?v:h(w())}function d(){var t=w(),n=l(t);if(g=arguments,m=this,E=t,n){if(void 0===b)return o(E);if(T)return b=setTimeout(c,e),r(E)}return void 0===b&&(b=setTimeout(c,e)),v}var g,m,y,v,b,E,S=0,M=!1,T=!1,C=!0;if("function"!=typeof t)throw new TypeError(s);return e=a(e)||0,i(n)&&(M=!!n.leading,T="maxWait"in n,y=T?_(a(n.maxWait)||0,e):y,C="trailing"in n?!!n.trailing:C),d.cancel=f,d.flush=p,d}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function r(t){return!!t&&"object"==typeof t}function o(t){return"symbol"==typeof t||r(t)&&b.call(t)==l}function a(t){if("number"==typeof t)return t;if(o(t))return u;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(c,"");var n=f.test(t);return n||p.test(t)?d(t.slice(2),n?2:8):h.test(t)?u:+t}var s="Expected a function",u=NaN,l="[object Symbol]",c=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,p=/^0o[0-7]+$/i,d=parseInt,g="object"==typeof e&&e&&e.Object===Object&&e,m="object"==typeof self&&self&&self.Object===Object&&self,y=g||m||Function("return this")(),v=Object.prototype,b=v.toString,_=Math.max,x=Math.min,w=function(){return y.Date.now()};t.exports=n}).call(e,function(){return this}())},function(t,e,n){var i=n(656).getCoord,r=n(651).radiansToDistance;t.exports=function(t,e,n){var o=Math.PI/180,a=i(t),s=i(e),u=o*(s[1]-a[1]),l=o*(s[0]-a[0]),c=o*a[1],h=o*s[1],f=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(c)*Math.cos(h);return r(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n)}},function(t,e){function n(t){if(!t)throw new Error("No obj passed");var e=i(t);if(e.length>1&&"number"==typeof e[0]&&"number"==typeof e[1])return e;throw new Error("Coordinate is not a valid Point")}function i(t){if(!t)throw new Error("No obj passed");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return r(e),e;throw new Error("No valid coordinates")}function r(t){if(t.length>1&&"number"==typeof t[0]&&"number"==typeof t[1])return!0;if(t[0].length)return r(t[0]);throw new Error("coordinates must only contain numbers")}function o(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function a(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function s(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0;i<t.features.length;i++){var r=t.features[i];if(!r||"Feature"!==r.type||!r.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+r.geometry.type)}}t.exports.geojsonType=o,t.exports.collectionOf=s,t.exports.featureOf=a,t.exports.getCoord=n,t.exports.getCoords=i},function(t,e){t.exports={version:8,name:"Positron",metadata:{"mapbox:autocomposite":!1,"mapbox:type":"template","mapbox:groups":{b6371a3f2f5a9932464fa3867530a2e5:{name:"Transportation",collapsed:!1},a14c9607bc7954ba1df7205bf660433f:{name:"Boundaries"},"101da9f13b64a08fa4b6ac1168e89e5f":{name:"Places",collapsed:!1}},"openmaptiles:version":"3.x","openmaptiles:mapbox:owner":"openmaptiles","openmaptiles:mapbox:source:url":"mapbox://openmaptiles.4qljc88t"},center:[10.184401828277089,-1.1368683772161603e-13],zoom:.8902641636539237,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:"https://tiles.maphubs.com/open-map-tiles/index.json"}},sprite:"https://openmaptiles.github.io/positron-gl-style/sprite",glyphs:"https://free.tilehosting.com/fonts/{fontstack}/{range}.pbf?key={key}",layers:[{id:"background",type:"background",paint:{"background-color":"rgb(242,243,240)"}},{id:"park",type:"fill",source:"openmaptiles","source-layer":"park",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"rgb(230, 233, 229)"}},{id:"water",type:"fill",source:"openmaptiles","source-layer":"water",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"rgb(194, 200, 202)","fill-antialias":!0,"fill-outline-color":{base:1,stops:[[0,"hsla(180, 6%, 63%, 0.82)"],[22,"hsla(180, 6%, 63%, 0.18)"]]}}},{id:"landcover_ice_shelf",type:"fill",source:"openmaptiles","source-layer":"landcover",maxzoom:8,filter:["all",["==","$type","Polygon"],["==","subclass","ice_shelf"]],layout:{visibility:"visible"},paint:{"fill-color":"hsl(0, 0%, 98%)","fill-opacity":.7}},{id:"landcover_glacier",type:"fill",source:"openmaptiles","source-layer":"landcover",maxzoom:8,filter:["all",["==","$type","Polygon"],["==","subclass","glacier"]],layout:{visibility:"visible"},paint:{"fill-color":"hsl(0, 0%, 98%)","fill-opacity":{base:1,stops:[[0,1],[8,.5]]}}},{id:"landuse_residential",type:"fill",source:"openmaptiles","source-layer":"landuse",maxzoom:16,filter:["all",["==","$type","Polygon"],["==","class","residential"]],layout:{visibility:"visible"},paint:{"fill-color":"rgb(234, 234, 230)","fill-opacity":{base:.6,stops:[[8,.8],[9,.6]]}}},{id:"landcover_wood",type:"fill",source:"openmaptiles","source-layer":"landcover",minzoom:10,filter:["all",["==","$type","Polygon"],["==","class","wood"]],layout:{visibility:"visible"},paint:{"fill-color":"rgb(220,224,220)","fill-opacity":{base:1,stops:[[8,0],[12,1]]}}},{id:"waterway",type:"line",source:"openmaptiles","source-layer":"waterway",filter:["==","$type","LineString"],layout:{visibility:"visible"},paint:{"line-color":"hsl(195, 17%, 78%)"}},{id:"water_name",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["==","$type","LineString"],layout:{"text-field":"{name}","symbol-placement":"line","text-rotation-alignment":"map","symbol-spacing":500,"text-font":["Metropolis Medium Italic","Klokantech Noto Sans Italic","Klokantech Noto Sans CJK Regular"],"text-size":12},paint:{"text-color":"rgb(157,169,177)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1}},{id:"building",type:"fill",source:"openmaptiles","source-layer":"building",minzoom:12,filter:["==","$type","Polygon"],paint:{"fill-color":"rgb(234, 234, 229)","fill-outline-color":"rgb(219, 219, 218)","fill-antialias":!0}},{id:"tunnel_motorway_casing",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"rgb(213, 213, 213)","line-width":{base:1.4,stops:[[5.8,0],[6,3],[20,40]]},"line-opacity":1}},{id:"tunnel_motorway_inner",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"rgb(234,234,234)","line-width":{base:1.4,stops:[[4,2],[6,1.3],[20,30]]}}},{id:"highway_path",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","class","path"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"rgb(234, 234, 234)","line-width":{base:1.2,stops:[[13,1],[20,10]]},"line-opacity":.9}},{id:"highway_minor",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:8,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"hsl(0, 0%, 88%)","line-width":{base:1.55,stops:[[13,1.8],[20,20]]},"line-opacity":.9}},{id:"highway_major_casing",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:11,filter:["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"rgb(213, 213, 213)","line-dasharray":[12,0],"line-width":{base:1.3,stops:[[10,3],[20,23]]}}},{id:"highway_major_inner",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:11,filter:["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fff","line-width":{base:1.3,stops:[[10,2],[20,20]]}}},{id:"highway_major_subtle",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",maxzoom:11,filter:["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"hsla(0, 0%, 85%, 0.69)","line-width":2}},{id:"highway_motorway_casing",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"rgb(213, 213, 213)","line-width":{base:1.4,stops:[[5.8,0],[6,3],[20,40]]},"line-dasharray":[2,0],"line-opacity":1}},{id:"highway_motorway_inner",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":{base:1,stops:[[5.8,"hsla(0, 0%, 85%, 0.53)"],[6,"#fff"]]},"line-width":{base:1.4,stops:[[4,2],[6,1.3],[20,30]]}}},{id:"highway_motorway_subtle",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",maxzoom:6,filter:["all",["==","$type","LineString"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"hsla(0, 0%, 85%, 0.53)","line-width":{base:1.4,stops:[[4,2],[6,1.3]]}}},{id:"railway_service",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:16,filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible","line-join":"round"},paint:{"line-color":"#dddddd","line-width":3}},{id:"railway_service_dashline",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:16,filter:["all",["==","$type","LineString"],["==","class","rail"],["has","service"]],layout:{visibility:"visible","line-join":"round"},paint:{"line-color":"#fafafa","line-width":2,"line-dasharray":[3,3]}},{id:"railway",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["==","$type","LineString"],["all",["!has","service"],["==","class","rail"]]],layout:{visibility:"visible","line-join":"round"},paint:{"line-color":"#dddddd","line-width":{base:1.3,stops:[[16,3],[20,7]]}}},{id:"railway_dashline",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["==","$type","LineString"],["all",["!has","service"],["==","class","rail"]]],layout:{visibility:"visible","line-join":"round"},paint:{"line-color":"#fafafa","line-width":{base:1.3,stops:[[16,2],[20,6]]},"line-dasharray":[3,3]}},{id:"highway_motorway_bridge_casing",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","motorway"]]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"rgb(213, 213, 213)","line-width":{base:1.4,stops:[[5.8,0],[6,5],[20,45]]},"line-dasharray":[2,0],"line-opacity":1}},{id:"highway_motorway_bridge_inner",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":{base:1,stops:[[5.8,"hsla(0, 0%, 85%, 0.53)"],[6,"#fff"]]},"line-width":{base:1.4,stops:[[4,2],[6,1.3],[20,30]]}}},{id:"highway_name_other",type:"symbol",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation_name",filter:["all",["!=","class","motorway"],["==","$type","LineString"]],layout:{"text-size":10,"text-max-angle":30,"text-transform":"uppercase","symbol-spacing":350,"text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"symbol-placement":"line",visibility:"visible","text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":"{name}"},paint:{"text-color":"#bbb","text-halo-color":"#fff","text-translate":[0,0],"text-halo-width":2,"text-halo-blur":1}},{id:"highway_name_motorway",type:"symbol",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation_name",filter:["all",["==","$type","LineString"],["==","class","motorway"]],layout:{"text-size":10,"symbol-spacing":350,"text-font":["Metropolis Light","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"symbol-placement":"line",visibility:"visible","text-rotation-alignment":"viewport","text-pitch-alignment":"viewport","text-field":"{ref}"},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"hsl(0, 0%, 100%)","text-translate":[0,2],"text-halo-width":1,"text-halo-blur":1}},{id:"boundary_state",type:"line",metadata:{"mapbox:group":"a14c9607bc7954ba1df7205bf660433f"},source:"openmaptiles","source-layer":"boundary",filter:["==","admin_level",4],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"rgb(230, 204, 207)","line-width":{base:1.3,stops:[[3,1],[22,15]]},"line-blur":.4,"line-dasharray":[2,2],"line-opacity":1}},{id:"boundary_country",type:"line",metadata:{"mapbox:group":"a14c9607bc7954ba1df7205bf660433f"},source:"openmaptiles","source-layer":"boundary",filter:["==","admin_level",2],layout:{"line-cap":"round","line-join":"round"
},paint:{"line-color":"rgb(230, 204, 207)","line-width":{base:1.1,stops:[[3,1],[22,20]]},"line-blur":{base:1,stops:[[0,.4],[22,4]]},"line-opacity":1}},{id:"place_other",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:14,filter:["all",["!in","class","city","suburb","town","village"],["==","$type","Point"]],layout:{"text-size":10,"text-transform":"uppercase","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-justify":"center",visibility:"visible","text-offset":[.5,0],"text-anchor":"center","text-field":"{name_en}"},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1}},{id:"place_suburb",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:15,filter:["all",["==","$type","Point"],["==","class","suburb"]],layout:{"text-size":10,"text-transform":"uppercase","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-justify":"center",visibility:"visible","text-offset":[.5,0],"text-anchor":"center","text-field":"{name_en}"},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1}},{id:"place_village",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:14,filter:["all",["==","$type","Point"],["==","class","village"]],layout:{"text-size":10,"text-transform":"uppercase","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":"left","text-field":"{name_en}"},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_town",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:15,filter:["all",["==","$type","Point"],["==","class","town"]],layout:{"text-size":10,"icon-image":{base:1,stops:[[0,"circle-11"],[8,""]]},"text-transform":"uppercase","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":{base:1,stops:[[0,"left"],[8,"center"]]},"text-field":"{name_en}"},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_city",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:14,filter:["all",["==","$type","Point"],["all",["!=","capital",2],["==","class","city"],[">","rank",3]]],layout:{"text-size":10,"icon-image":{base:1,stops:[[0,"circle-11"],[8,""]]},"text-transform":"uppercase","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":{base:1,stops:[[0,"left"],[8,"center"]]},"text-field":"{name_en}"},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_capital",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:12,filter:["all",["==","$type","Point"],["all",["==","capital",2],["==","class","city"]]],layout:{"text-size":14,"icon-image":{base:1,stops:[[0,"star-11"],[8,""]]},"text-transform":"uppercase","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":1,"text-anchor":{base:1,stops:[[0,"left"],[8,"center"]]},"text-field":"{name}"},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_city_large",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:12,filter:["all",["==","$type","Point"],["all",["!=","capital",2],["<=","rank",3],["==","class","city"]]],layout:{"text-size":14,"icon-image":{base:1,stops:[[0,"circle-11"],[8,""]]},"text-transform":"uppercase","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":{base:1,stops:[[0,"left"],[8,"center"]]},"text-field":"{name}"},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_state",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:12,filter:["all",["==","$type","Point"],["==","class","state"]],layout:{visibility:"visible","text-field":"{name_en}","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-transform":"uppercase","text-size":10},paint:{"text-color":"rgb(113, 129, 144)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1}},{id:"place_country_other",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:8,filter:["all",["==","$type","Point"],["all",["==","class","country"],[">=","rank",2]]],layout:{visibility:"visible","text-field":"{name_en}","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-transform":"uppercase","text-size":{base:1,stops:[[0,10],[6,12]]}},paint:{"text-halo-width":1.4,"text-halo-color":"rgba(236,236,234,0.7)","text-color":{base:1,stops:[[3,"rgb(157,169,177)"],[4,"rgb(153, 153, 153)"]]}}},{id:"place_country_major",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:6,filter:["all",["==","$type","Point"],["all",["<=","rank",1],["==","class","country"]]],layout:{visibility:"visible","text-field":"{name_en}","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-transform":"uppercase","text-size":{base:1.4,stops:[[0,10],[3,12],[4,14]]},"text-anchor":"center"},paint:{"text-halo-width":1.4,"text-halo-color":"rgba(236,236,234,0.7)","text-color":{base:1,stops:[[3,"rgb(157,169,177)"],[4,"rgb(153, 153, 153)"]]}}}],id:"ciwf3o3u2008z2pmq7pmvm6xq"}},function(t,e){t.exports={version:8,name:"Dark Matter",metadata:{"mapbox:autocomposite":!1,"mapbox:type":"template","mapbox:groups":{b6371a3f2f5a9932464fa3867530a2e5:{name:"Transportation",collapsed:!1},a14c9607bc7954ba1df7205bf660433f:{name:"Boundaries"},"101da9f13b64a08fa4b6ac1168e89e5f":{name:"Places",collapsed:!1}},"openmaptiles:version":"3.x","openmaptiles:mapbox:owner":"openmaptiles","openmaptiles:mapbox:source:url":"mapbox://openmaptiles.4qljc88t"},center:[20.745027854803,50.39944115761509],zoom:3.8053494517746405,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:"https://tiles.maphubs.com/open-map-tiles/index.json"}},sprite:"https://openmaptiles.github.io/dark-matter-gl-style/sprite",glyphs:"https://free.tilehosting.com/fonts/{fontstack}/{range}.pbf?key={key}",layers:[{id:"background",type:"background",paint:{"background-color":"rgb(12,12,12)"}},{id:"water",type:"fill",source:"openmaptiles","source-layer":"water",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"rgb(27 ,27 ,29)","fill-antialias":!1}},{id:"landcover_ice_shelf",type:"fill",source:"openmaptiles","source-layer":"landcover",maxzoom:8,filter:["all",["==","$type","Polygon"],["==","subclass","ice_shelf"]],layout:{visibility:"visible"},paint:{"fill-color":"rgb(12,12,12)","fill-opacity":.7}},{id:"landcover_glacier",type:"fill",source:"openmaptiles","source-layer":"landcover",maxzoom:8,filter:["all",["==","$type","Polygon"],["==","subclass","glacier"]],layout:{visibility:"visible"},paint:{"fill-color":"hsl(0, 1%, 2%)","fill-opacity":{base:1,stops:[[0,1],[8,.5]]}}},{id:"landuse_residential",type:"fill",source:"openmaptiles","source-layer":"landuse",maxzoom:9,filter:["all",["==","$type","Polygon"],["==","class","residential"]],layout:{visibility:"visible"},paint:{"fill-color":"hsl(0, 2%, 5%)","fill-opacity":.4}},{id:"landcover_wood",type:"fill",source:"openmaptiles","source-layer":"landcover",minzoom:10,filter:["all",["==","$type","Polygon"],["==","class","wood"]],layout:{visibility:"visible"},paint:{"fill-color":"rgb(32,32,32)","fill-opacity":{base:.3,stops:[[8,0],[10,.8],[13,.4]]},"fill-translate":[0,0],"fill-pattern":"wood-pattern"}},{id:"landuse_park",type:"fill",source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","park"]],layout:{visibility:"visible"},paint:{"fill-color":"rgb(32,32,32)"}},{id:"waterway",type:"line",source:"openmaptiles","source-layer":"waterway",filter:["==","$type","LineString"],layout:{visibility:"visible"},paint:{"line-color":"rgb(27 ,27 ,29)"}},{id:"water_name",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["==","$type","LineString"],layout:{"text-field":"{name}","symbol-placement":"line","text-rotation-alignment":"map","symbol-spacing":500,"text-font":["Metropolis Medium Italic","Klokantech Noto Sans Italic","Klokantech Noto Sans CJK Regular"],"text-size":12},paint:{"text-color":"hsla(0, 0%, 0%, 0.7)","text-halo-color":"hsl(0, 0%, 27%)"}},{id:"building",type:"fill",source:"openmaptiles","source-layer":"building",minzoom:12,filter:["==","$type","Polygon"],paint:{"fill-color":"rgb(10,10,10)","fill-outline-color":"rgb(27 ,27 ,29)","fill-antialias":!0}},{id:"highway_path",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","class","path"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"rgb(27 ,27 ,29)","line-width":{base:1.2,stops:[[13,1],[20,10]]},"line-opacity":.9,"line-dasharray":[1.5,1.5]}},{id:"highway_minor",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:8,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#181818","line-width":{base:1.55,stops:[[13,1.8],[20,20]]},"line-opacity":.9}},{id:"highway_major_casing",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:11,filter:["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"rgba(60,60,60,0.8)","line-dasharray":[12,0],"line-width":{base:1.3,stops:[[10,3],[20,23]]}}},{id:"highway_major_inner",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:11,filter:["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"hsl(0, 0%, 7%)","line-width":{base:1.3,stops:[[10,2],[20,20]]}}},{id:"highway_major_subtle",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",maxzoom:11,filter:["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#2a2a2a","line-width":2}},{id:"highway_motorway_casing",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["==","class","motorway"]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"rgba(60,60,60,0.8)","line-width":{base:1.4,stops:[[5.8,0],[6,3],[20,40]]},"line-dasharray":[2,0],"line-opacity":1}},{id:"highway_motorway_inner",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":{base:1,stops:[[5.8,"hsla(0, 0%, 85%, 0.53)"],[6,"#000"]]},"line-width":{base:1.4,stops:[[4,2],[6,1.3],[20,30]]}}},{id:"highway_motorway_subtle",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",maxzoom:6,filter:["all",["==","$type","LineString"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#181818","line-width":{base:1.4,stops:[[4,2],[6,1.3]]}}},{id:"railway_minor",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:16,filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible","line-join":"round"},paint:{"line-color":"rgb(35,35,35)","line-width":3}},{id:"railway_minor_dashline",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:16,filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible","line-join":"round"},paint:{"line-color":"rgb(12,12,12)","line-width":2,"line-dasharray":[3,3]}},{id:"railway",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["==","$type","LineString"],["==","class","rail"]],layout:{visibility:"visible","line-join":"round"},paint:{"line-width":{base:1.3,stops:[[16,3],[20,7]]},"line-color":"rgb(35,35,35)"}},{id:"railway_dashline",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["==","$type","LineString"],["==","class","rail"]],layout:{visibility:"visible","line-join":"round"},paint:{"line-color":"rgb(12,12,12)","line-width":{base:1.3,stops:[[16,2],[20,6]]},"line-dasharray":[3,3]}},{id:"highway_name_other",type:"symbol",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation_name",filter:["all",["!=","class","motorway"],["==","$type","LineString"]],layout:{"text-size":10,"text-max-angle":30,"text-transform":"uppercase","symbol-spacing":350,"text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"symbol-placement":"line",visibility:"visible","text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":"{name}"},paint:{"text-color":"rgba(80, 78, 78, 1)","text-translate":[0,0],"text-halo-color":"rgba(0, 0, 0, 1)","text-halo-width":1,"text-halo-blur":0}},{id:"highway_name_motorway",type:"symbol",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation_name",filter:["all",["==","$type","LineString"],["==","class","motorway"]],layout:{"text-size":10,"symbol-spacing":350,"text-font":["Metropolis Light","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"symbol-placement":"line",visibility:"visible","text-rotation-alignment":"viewport","text-pitch-alignment":"viewport","text-field":"{ref}"},paint:{"text-color":"hsl(0, 0%, 37%)","text-translate":[0,2]}},{id:"boundary_state",type:"line",metadata:{"mapbox:group":"a14c9607bc7954ba1df7205bf660433f"},source:"openmaptiles","source-layer":"boundary",filter:["==","admin_level",4],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"hsl(0, 0%, 21%)","line-width":{base:1.3,stops:[[3,1],[22,15]]},"line-blur":.4,"line-dasharray":[2,2],"line-opacity":1}},{id:"boundary_country",type:"line",metadata:{"mapbox:group":"a14c9607bc7954ba1df7205bf660433f"},source:"openmaptiles","source-layer":"boundary",filter:["==","admin_level",2],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsl(0, 0%, 23%)","line-width":{base:1.1,stops:[[3,1],[22,20]]},"line-blur":{base:1,stops:[[0,.4],[22,4]]},"line-opacity":1}},{id:"place_other",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:14,filter:["all",["==","$type","Point"],["in","class","hamlet","isolated_dwelling","neighbourhood"]],layout:{"text-size":10,"text-transform":"uppercase","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-justify":"center",visibility:"visible","text-offset":[.5,0],"text-anchor":"center","text-field":"{name_en}"},paint:{"text-color":"rgb(101,101,101)","text-halo-color":"rgba(0,0,0,0.7)","text-halo-width":1,"text-halo-blur":1}},{id:"place_suburb",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:15,filter:["all",["==","$type","Point"],["==","class","suburb"]],layout:{"text-size":10,"text-transform":"uppercase","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-justify":"center",visibility:"visible","text-offset":[.5,0],"text-anchor":"center","text-field":"{name_en}"},paint:{"text-color":"rgb(101,101,101)","text-halo-color":"rgba(0,0,0,0.7)","text-halo-width":1,"text-halo-blur":1}},{id:"place_village",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:14,filter:["all",["==","$type","Point"],["==","class","village"]],layout:{"text-size":10,"text-transform":"uppercase","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":"left","text-field":"{name_en}"},paint:{"text-color":"rgb(101,101,101)","text-halo-color":"rgba(0,0,0,0.7)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_town",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:15,filter:["all",["==","$type","Point"],["==","class","town"]],layout:{"text-size":10,"icon-image":{base:1,stops:[[0,"circle-11"],[9,""]]},"text-transform":"uppercase","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":{base:1,stops:[[0,"left"],[8,"center"]]},"text-field":"{name_en}"},paint:{"text-color":"rgb(101,101,101)","text-halo-color":"rgba(0,0,0,0.7)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_city",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:14,filter:["all",["==","$type","Point"],["any",["==","class","city"],[">","rank",2]]],layout:{"text-size":10,"icon-image":{base:1,stops:[[0,"circle-11"],[9,""]]},"text-transform":"uppercase","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":{base:1,stops:[[0,"left"],[8,"center"]]},"text-field":"{name_en}"},paint:{"text-color":"rgb(101,101,101)","text-halo-color":"rgba(0,0,0,0.7)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_city_large",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:12,filter:["all",["==","$type","Point"],["all",["<=","rank",3],["==","class","city"]]],layout:{"text-size":14,"icon-image":{base:1,stops:[[0,"circle-11"],[9,""]]},"text-transform":"uppercase","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":{base:1,stops:[[0,"left"],[8,"center"]]},"text-field":"{name}"},paint:{"text-color":"rgb(101,101,101)","text-halo-color":"rgba(0,0,0,0.7)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_state",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:12,filter:["all",["==","$type","Point"],["==","class","state"]],layout:{visibility:"visible","text-field":"{name_en}","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-transform":"uppercase","text-size":10},paint:{"text-color":"rgb(101,101,101)","text-halo-color":"rgba(0,0,0,0.7)","text-halo-width":1,"text-halo-blur":1}},{id:"place_country_other",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:8,filter:["all",["==","$type","Point"],["all",["==","class","country"],[">=","rank",2]]],layout:{visibility:"visible","text-field":"{name_en}","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-transform":"uppercase","text-size":{base:1,stops:[[0,10],[6,12]]}},paint:{"text-halo-width":1.4,"text-halo-color":"rgba(0,0,0,0.7)","text-color":"rgb(101,101,101)"}},{id:"place_country_major",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:6,filter:["all",["==","$type","Point"],["all",["<=","rank",1],["==","class","country"]]],layout:{visibility:"visible","text-field":"{name_en}","text-font":["Metropolis Regular","Klokantech Noto Sans Regular","Klokantech Noto Sans CJK Regular"],"text-transform":"uppercase","text-size":{base:1.4,stops:[[0,10],[3,12],[4,14]]},"text-anchor":"center"},paint:{"text-halo-width":1.4,"text-halo-color":"rgba(0,0,0,0.7)","text-color":"rgb(101,101,101)"}}],id:"ciwf4jmfe00882qmzvu5vh0zx"}},function(t,e){t.exports={version:8,name:"OSM Liberty",metadata:{"mapbox:type":"template"},sources:{natural_earth_shaded_relief:{maxzoom:6,tileSize:256,tiles:["https://klokantech.github.io/naturalearthtiles/tiles/natural_earth_2_shaded_relief.raster/{z}/{x}/{y}.png"],type:"raster"},openmaptiles:{type:"vector",url:"https://tiles.maphubs.com/open-map-tiles/index.json"}},sprite:"https://rawgit.com/lukasmartinelli/osm-liberty/gh-pages/sprites/osm-liberty",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"background",type:"background",paint:{"background-color":"rgb(239,239,239)"}},{id:"natural_earth",type:"raster",source:"natural_earth_shaded_relief",maxzoom:6,layout:{visibility:"visible"},paint:{"raster-opacity":{base:1.5,stops:[[0,.6],[6,.1]]}}},{id:"park",type:"fill",source:"openmaptiles","source-layer":"park",filter:["all"],paint:{"fill-color":"#d8e8c8","fill-opacity":.7,"fill-outline-color":"rgba(95, 208, 100, 1)"}},{id:"park_outline",type:"line",source:"openmaptiles","source-layer":"park",filter:["all"],layout:{},paint:{"line-dasharray":[1,1.5],"line-color":"rgba(228, 241, 215, 1)","line-opacity":1}},{id:"landuse_residential",type:"fill",metadata:{},source:"openmaptiles","source-layer":"landuse",maxzoom:8,filter:["==","class","residential"],layout:{visibility:"visible"},paint:{"fill-color":{base:1,stops:[[9,"hsla(0, 3%, 85%, 0.84)"],[12,"hsla(35, 57%, 88%, 0.49)"]]}}},{id:"landcover_wood",type:"fill",metadata:{},source:"openmaptiles","source-layer":"landcover",filter:["all",["==","class","wood"]],paint:{"fill-antialias":!1,"fill-color":"hsla(98, 61%, 72%, 0.7)","fill-opacity":.4}},{id:"landcover_grass",type:"fill",metadata:{},source:"openmaptiles","source-layer":"landcover",filter:["all",["==","class","grass"]],paint:{"fill-antialias":!1,"fill-color":"rgba(176, 213, 154, 1)","fill-opacity":.3}},{id:"landuse_cemetery",type:"fill",metadata:{},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],layout:{visibility:"visible"},paint:{"fill-color":"hsl(75, 37%, 81%)"}},{id:"landuse_hospital",type:"fill",metadata:{},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"#fde"}},{id:"landuse_school",type:"fill",metadata:{},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgb(236,238,204)"}},{id:"waterway_river",type:"line",metadata:{},source:"openmaptiles","source-layer":"waterway",filter:["==","class","river"],layout:{"line-cap":"round"},paint:{"line-color":"#a0c8f0","line-width":{base:1.2,stops:[[11,.5],[20,6]]}}},{id:"waterway_other",type:"line",metadata:{},source:"openmaptiles","source-layer":"waterway",filter:["all",["!=","class","river"]],layout:{"line-cap":"round"},paint:{"line-color":"#a0c8f0","line-width":{base:1.3,stops:[[13,.5],[20,6]]}}},{id:"water",type:"fill",metadata:{},source:"openmaptiles","source-layer":"water",paint:{"fill-color":"rgb(158,189,255)"}},{id:"aeroway_fill",type:"fill",metadata:{},source:"openmaptiles","source-layer":"aeroway",minzoom:11,filter:["==","$type","Polygon"],paint:{"fill-color":"rgba(229, 228, 224, 1)","fill-opacity":.7}},{id:"aeroway_runway",type:"line",metadata:{},source:"openmaptiles","source-layer":"aeroway",minzoom:11,filter:["all",["==","$type","LineString"],["==","class","runway"]],paint:{"line-color":"#f0ede9","line-width":{base:1.2,stops:[[11,3],[20,16]]}}},{id:"aeroway_taxiway",type:"line",metadata:{},source:"openmaptiles","source-layer":"aeroway",minzoom:11,filter:["all",["==","$type","LineString"],["==","class","taxiway"]],paint:{"line-color":"#f0ede9","line-width":{base:1.2,stops:[[11,.5],[20,6]]}}},{id:"tunnel_motorway_link_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway"],["==","ramp",1],["==","brunnel","tunnel"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#e9ac77","line-dasharray":[.5,.25],"line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"tunnel_service_track_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#cfcdca","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel_link_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","ramp","1"],["==","brunnel","tunnel"]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"tunnel_street_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","street","street_limited"]],layout:{"line-join":"round"},paint:{"line-color":"#cfcdca","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel_secondary_tertiary_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"tunnel_trunk_primary_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-width":{base:1.2,stops:[[5,.4],[6,.7],[7,1.75],[20,22]]}}},{id:"tunnel_motorway_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway"],["==","brunnel","tunnel"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#e9ac77","line-dasharray":[.5,.25],"line-width":{base:1.2,stops:[[5,.4],[6,.7],[7,1.75],[20,22]]}}},{id:"tunnel_path_pedestrian",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","tunnel"],["in","class","path","pedestrian"]],paint:{"line-color":"hsl(0, 0%, 100%)","line-dasharray":[1,.75],"line-width":{base:1.2,stops:[[14,.5],[20,10]]}}},{id:"tunnel_motorway_link",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway_link"],["==","ramp",1],["==","brunnel","tunnel"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#fc8","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"tunnel_service_track",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#fff","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel_link",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","ramp","1"],["==","brunnel","tunnel"]],layout:{"line-join":"round"},paint:{"line-color":"#fff4c6","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"tunnel_minor",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#fff","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel_secondary_tertiary",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#fff4c6","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"tunnel_trunk_primary",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#fff4c6","line-width":{base:1.2,stops:[[5,0],[7,1],[20,18]]}}},{id:"tunnel_motorway",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway"],["==","brunnel","tunnel"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#ffdaa6","line-width":{base:1.2,stops:[[5,0],[7,1],[20,18]]}}},{id:"tunnel_major_rail",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","rail"]],paint:{"line-color":"#bbb","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"tunnel_major_rail_hatching",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#bbb","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"road_area_pattern",type:"fill",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","Polygon"]],layout:{visibility:"visible"},paint:{"fill-pattern":"pedestrian_polygon"}},{id:"road_motorway_link_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"],["==","ramp",1]],
layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"road_service_track_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","service","track"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#cfcdca","line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"road_link_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["!in","class","pedestrian","path","track","service"],["==","ramp","1"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"road_minor_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["!in","brunnel","bridge","tunnel"],["in","class","minor"],["!=","ramp","1"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#cfcdca","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,20]]}}},{id:"road_secondary_tertiary_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"],["!=","ramp",1]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"road_trunk_primary_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary","trunk"],["!=","ramp",1]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[5,.4],[6,.7],[7,1.75],[20,22]]}}},{id:"road_motorway_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"],["!=","ramp","1"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#e9ac77","line-width":{base:1.2,stops:[[5,.4],[6,.7],[7,1.75],[20,22]]}}},{id:"road_path_pedestrian",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:14,filter:["all",["==","$type","LineString"],["!in","brunnel","bridge","tunnel"],["in","class","path","pedestrian"]],layout:{"line-join":"round"},paint:{"line-color":"hsl(0, 0%, 100%)","line-dasharray":[1,.7],"line-width":{base:1.2,stops:[[14,1],[20,10]]}}},{id:"road_motorway_link",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"],["==","ramp",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fc8","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"road_service_track",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","service","track"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fff","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"road_link",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["==","ramp",1],["!in","class","pedestrian","path","track","service"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fea","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"road_secondary_tertiary",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fea","line-width":{base:1.2,stops:[[6.5,0],[8,.5],[20,13]]}}},{id:"road_trunk_primary",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","primary","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fea","line-width":{base:1.2,stops:[[5,0],[7,1],[20,18]]}}},{id:"road_motorway",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"],["!=","ramp",1]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":{base:1,stops:[[5,"hsl(26, 87%, 62%)"],[6,"#fc8"]]},"line-width":{base:1.2,stops:[[5,0],[7,1],[20,18]]}}},{id:"road_major_rail",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","rail"]],paint:{"line-color":"#bbb","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"road_major_rail_hatching",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","rail"]],paint:{"line-color":"#bbb","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"road_minor-copy",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","minor"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fff","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,18]]}}},{id:"building",type:"fill",metadata:{},source:"openmaptiles","source-layer":"building",minzoom:13,maxzoom:14,layout:{visibility:"visible"},paint:{"fill-color":"hsl(35, 8%, 85%)","fill-outline-color":{base:1,stops:[[13,"hsla(35, 6%, 79%, 0.32)"],[14,"hsl(35, 6%, 79%)"]]}}},{id:"building-3d",type:"fill-extrusion",metadata:{},source:"openmaptiles","source-layer":"building",minzoom:14,layout:{visibility:"visible"},paint:{"fill-extrusion-color":"hsl(35, 8%, 85%)","fill-extrusion-height":{property:"render_height",type:"identity"},"fill-extrusion-base":{property:"render_min_height",type:"identity"},"fill-extrusion-opacity":.8}},{id:"bridge_motorway_link_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway_link"],["==","ramp",1],["==","brunnel","bridge"]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge_service_track_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#cfcdca","line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"bridge_link_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","link"],["==","brunnel","bridge"]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge_street_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","street","street_limited"]],layout:{"line-join":"round"},paint:{"line-color":"hsl(36, 6%, 74%)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,.5],[13,1],[14,4],[20,25]]}}},{id:"bridge_path_pedestrian_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["in","class","path","pedestrian"]],layout:{"line-join":"miter",visibility:"visible"},paint:{"line-color":"hsl(35, 6%, 80%)","line-dasharray":[1,0],"line-width":{base:1.2,stops:[[14,1.5],[20,18]]}}},{id:"bridge_secondary_tertiary_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"bridge_trunk_primary_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-width":{base:1.2,stops:[[5,.4],[6,.7],[7,1.75],[20,22]]}}},{id:"bridge_motorway_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway"],["==","brunnel","bridge"]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-width":{base:1.2,stops:[[5,.4],[6,.7],[7,1.75],[20,22]]}}},{id:"bridge_path_pedestrian",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["in","class","path","pedestrian"]],paint:{"line-color":"hsl(0, 0%, 100%)","line-dasharray":[1,.3],"line-width":{base:1.2,stops:[[14,.5],[20,10]]}}},{id:"bridge_motorway_link",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway_link"],["==","ramp",1],["==","brunnel","bridge"]],layout:{"line-join":"round"},paint:{"line-color":"#fc8","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge_service_track",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#fff","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"bridge_link",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","link"],["==","brunnel","bridge"]],layout:{"line-join":"round"},paint:{"line-color":"#fea","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge_street",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#fff","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,18]]}}},{id:"bridge_secondary_tertiary",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"#fea","line-width":{base:1.2,stops:[[6.5,0],[7,.5],[20,10]]}}},{id:"bridge_trunk_primary",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#fea","line-width":{base:1.2,stops:[[5,0],[7,1],[20,18]]}}},{id:"bridge_motorway",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway"],["==","brunnel","bridge"]],layout:{"line-join":"round"},paint:{"line-color":"#fc8","line-width":{base:1.2,stops:[[5,0],[7,1],[20,18]]}}},{id:"bridge_major_rail",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","rail"],["==","brunnel","bridge"]],paint:{"line-color":"#bbb","line-width":{base:1.4,stops:[[14,.4],[15,.75],[20,2]]}}},{id:"bridge_major_rail_hatching",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","rail"],["==","brunnel","bridge"]],paint:{"line-color":"#bbb","line-dasharray":[.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"boundary_3",type:"line",metadata:{},source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",3,4]],layout:{"line-join":"round"},paint:{"line-color":"#9e9cab","line-dasharray":[5,1],"line-width":{base:1,stops:[[4,.4],[5,1],[12,1.8]]}}},{id:"boundary_2",type:"line",metadata:{},source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsl(248, 1%, 41%)","line-opacity":{base:1,stops:[[0,.4],[4,1]]},"line-width":{base:1,stops:[[3,1],[5,1.2],[12,3]]}}},{id:"water_name_line",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"water_name",minzoom:0,filter:["all",["==","$type","LineString"]],layout:{"text-field":"{name}","text-font":["Roboto Regular"],"text-max-width":5,"text-size":12,"symbol-placement":"line"},paint:{"text-color":"#5d60be","text-halo-color":"rgba(255,255,255,0.7)","text-halo-width":1}},{id:"water_name_point",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"water_name",minzoom:0,filter:["==","$type","Point"],layout:{"text-field":"{name}","text-font":["Roboto Regular"],"text-max-width":5,"text-size":12},paint:{"text-color":"#5d60be","text-halo-color":"rgba(255,255,255,0.7)","text-halo-width":1}},{id:"poi_z16",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",20]],layout:{"icon-image":"{class}_11","text-anchor":"top","text-field":"{name}","text-font":["Roboto Condensed Italic"],"text-max-width":9,"text-offset":[0,.6],"text-padding":2,"text-size":12},paint:{"text-color":"#666","text-halo-blur":.5,"text-halo-color":"#ffffff","text-halo-width":1}},{id:"poi_z15",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],[">=","rank",7],["<","rank",20]],layout:{"icon-image":"{class}_11","text-anchor":"top","text-field":"{name}","text-font":["Roboto Condensed Italic"],"text-max-width":9,"text-offset":[0,.6],"text-padding":2,"text-size":12},paint:{"text-color":"#666","text-halo-blur":.5,"text-halo-color":"#ffffff","text-halo-width":1}},{id:"poi_z14",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],[">=","rank",1],["<","rank",7]],layout:{"icon-image":"{class}_11","text-anchor":"top","text-field":"{name}","text-font":["Roboto Condensed Italic"],"text-max-width":9,"text-offset":[0,.6],"text-padding":2,"text-size":12},paint:{"text-color":"#666","text-halo-blur":.5,"text-halo-color":"#ffffff","text-halo-width":1}},{id:"poi_transit",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"poi",filter:["all",["in","class","bus","rail","airport"]],layout:{"icon-image":"{maki}_11","text-anchor":"left","text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-max-width":9,"text-offset":[.9,0],"text-padding":2,"text-size":12,visibility:"visible"},paint:{"text-color":"#4898ff","text-halo-blur":.5,"text-halo-color":"#ffffff","text-halo-width":1}},{id:"road_label",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"transportation_name",filter:["all"],layout:{"symbol-placement":"line","text-anchor":"center","text-field":"{name}","text-font":["Roboto Regular"],"text-offset":[0,.15],"text-size":{base:1,stops:[[13,12],[14,13]]}},paint:{"text-color":"#765","text-halo-blur":.5,"text-halo-width":1}},{id:"road_shield",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6]],layout:{"icon-image":"default_{ref_length}","icon-rotation-alignment":"viewport","symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"symbol-spacing":500,"text-field":"{ref}","text-font":["Roboto Regular"],"text-offset":[0,.1],"text-rotation-alignment":"viewport","text-size":10,"icon-size":.8},paint:{}},{id:"place_other",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",filter:["all",["in","class","hamlet","island","islet","neighbourhood","suburb"]],layout:{"text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-letter-spacing":.1,"text-max-width":9,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-transform":"uppercase"},paint:{"text-color":"#633","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1.2}},{id:"place_village",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"]],layout:{"text-field":"{name_en}","text-font":["Roboto Regular"],"text-max-width":8,"text-size":{base:1.2,stops:[[10,12],[15,22]]}},paint:{"text-color":"#333","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1.2}},{id:"place_town",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"]],layout:{"icon-image":{base:1,stops:[[0,"dot_9"],[8,""]]},"text-anchor":"bottom","text-field":"{name_en}","text-font":["Roboto Regular"],"text-max-width":8,"text-offset":[0,0],"text-size":{base:1.2,stops:[[7,12],[11,16]]}},paint:{"text-color":"#333","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1.2}},{id:"place_city",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",minzoom:5,filter:["all",["==","class","city"]],layout:{"icon-image":{base:1,stops:[[0,"dot_9"],[8,""]]},"text-anchor":"bottom","text-field":"{name_en}","text-font":["Roboto Medium"],"text-max-width":8,"text-offset":[0,0],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"icon-allow-overlap":!0,"icon-optional":!1},paint:{"text-color":"#333","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1.2}},{id:"state",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",maxzoom:6,filter:["all",["==","class","state"]],layout:{"text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-size":{stops:[[4,11],[6,15]]},"text-transform":"uppercase"},paint:{"text-color":"#633","text-halo-color":"rgba(255,255,255,0.7)","text-halo-width":1}},{id:"country_3",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",filter:["all",[">=","rank",3],["==","class","country"]],layout:{"text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-max-width":6.25,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"none"},paint:{"text-color":"#334","text-halo-blur":1,"text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1}},{id:"country_2",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",filter:["all",["==","rank",2],["==","class","country"]],layout:{"text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-max-width":6.25,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"none"},paint:{"text-color":"#334","text-halo-blur":1,"text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1}},{id:"country_1",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",filter:["all",["==","rank",1],["==","class","country"]],layout:{"text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-max-width":6.25,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"none"},paint:{"text-color":"#334","text-halo-blur":1,"text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1}},{id:"continent",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"]],layout:{"text-field":"{name_en}","text-font":["Roboto Condensed Italic"],"text-size":13,"text-transform":"uppercase","text-justify":"center"},paint:{"text-color":"#633","text-halo-color":"rgba(255,255,255,0.7)","text-halo-width":1}}],id:"osm-liberty"}},function(t,e,n){"use strict";var i=n(170),r=n(189)(i),o=n(661),a=n(196),s=n(201)("stores/DataEditorStore"),u=n(662),l=n(663),c=n(205).checkClientError;t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{editing:!1,editingLayer:null,originals:[],edits:[],redo:[],selectedEditFeature:null}},reset:function(){this.setState(this.getInitialState())},storeDidUpdate:function(){s("store updated")},startEditing:function(t){this.setState({editing:!0,editingLayer:t})},stopEditing:function(){this.setState({editing:!1,editingLayer:null})},updateFeatures:function(t){var e=this,n=this;t.forEach(function(t){s("Updating feature: "+t.id);var i={status:"modify",geojson:JSON.parse(JSON.stringify(t))};e.state.selectedEditFeature&&t.id===e.state.selectedEditFeature.geojson.id&&(e.state.selectedEditFeature=i);var r=JSON.parse(JSON.stringify(i));n.state.edits.push(r),n.state.redo=[]}),this.trigger(this.state)},resetEdits:function(){this.setState({edits:[],redo:[]})},undoEdit:function(){if(this.state.edits.length>0){var t=this.state.edits.pop(),e=JSON.parse(JSON.stringify(t));this.state.redo.push(e);var n=this.getLastEditForID(t.geojson.id);this.state.selectedEditFeature&&t.geojson.id===this.state.selectedEditFeature.geojson.id&&(this.state.selectedEditFeature=n),"create"===t.status?o.onFeatureUpdate("delete",t):o.onFeatureUpdate("update",n),this.trigger(this.state)}},redoEdit:function(){if(this.state.redo.length>0){var t=this.state.redo.pop(),e=JSON.parse(JSON.stringify(t)),n=JSON.parse(JSON.stringify(t));this.state.edits.push(e),this.state.selectedEditFeature&&t.geojson.id===this.state.selectedEditFeature.geojson.id&&(this.state.selectedEditFeature=n),o.onFeatureUpdate("update",t),this.trigger(this.state)}},getLastEditForID:function(t){var e=[];if(l(this.state.edits,function(n){n.geojson.id===t&&e.push(n)}),e.length>0)return JSON.parse(JSON.stringify(e[0]));var n;return this.state.originals.forEach(function(e){e.geojson.id===t&&(n=e)}),n?JSON.parse(JSON.stringify(n)):null},saveEdits:function(t,e){var n=this,i=this.getUniqueFeatureIds(),r=[];i.forEach(function(t){var e=n.getAllEditsForFeatureId(t),i=e[e.length-1];e.length>1&&"create"===e[0].status&&(i.status="create"),r.push(i)}),a.post("/api/edits/save").type("json").accept("json").send({layer_id:this.state.editingLayer.layer_id,edits:r,_csrf:t}).end(function(t,i){c(i,t,e,function(e){t?e(t):(n.setState({originals:[],edits:[],redo:[],selectedEditFeature:null}),e())})})},getUniqueFeatureIds:function(){var t=[];return this.state.edits.forEach(function(e){var n=e.geojson.id;n&&!t.includes(n)&&t.push(n)}),t},getAllEditsForFeatureId:function(t){var e=[];return this.state.edits.forEach(function(n){n.geojson.id===t&&e.push(n)}),e},updateSelectedFeatureTags:function(t){var e=this,n=this.state.selectedEditFeature,i={status:"modify",geojson:JSON.parse(JSON.stringify(n.geojson))};u(i.geojson.properties,t);var r=JSON.parse(JSON.stringify(i));e.state.edits.push(r),e.state.redo=[],this.state.selectedEditFeature=n,this.trigger(this.state)},selectFeature:function(t,e){var n=this,i=this.getLastEditForID(t);if(i)this.setState({selectedEditFeature:i});else{var r=t.split(":")[1];a.get("/api/feature/json/"+this.state.editingLayer.layer_id+"/"+r+"/data.geojson").accept("json").end(function(i,r){c(r,i,e,function(e){var i=r.body,o=i.features[0],a={status:"original",geojson:o};a.geojson.id=t;var s=JSON.parse(JSON.stringify(a));n.state.originals.push(s),n.setState({selectedEditFeature:a}),e(a.geojson)})})}},createFeature:function(t){var e={status:"create",geojson:JSON.parse(JSON.stringify(t))};this.state.edits.push(e),this.setState({selectedEditFeature:e})},deleteFeature:function(t){var e={status:"delete",geojson:JSON.parse(JSON.stringify(t))};this.state.edits.push(e),this.state.redo=[],this.trigger(this.state)}})},function(t,e,n){"use strict";var i=n(170),r=i.createActions({saveEdits:{},startEditing:{},stopEditing:{},selectFeature:{},resetEdits:{},undoEdit:{},redoEdit:{},updateSelectedFeatureTags:{},updateFeatures:{},onFeatureUpdate:{},createFeature:{},deleteFeature:{}});t.exports=r},function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function i(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function r(t,e){var n=k(t)||g(t)?i(t.length,String):[],r=n.length,o=!!r;for(var a in t)!e&&!N.call(t,a)||o&&("length"==a||c(a,r))||n.push(a);return n}function o(t,e,n){var i=t[e];N.call(t,e)&&d(i,n)&&(void 0!==n||e in t)||(t[e]=n)}function a(t){if(!_(t))return p(t);var e=f(t),n=[];for(var i in t)("constructor"!=i||!e&&N.call(t,i))&&n.push(i);return n}function s(t,e){return e=A(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=A(i.length-e,0),a=Array(o);++r<o;)a[r]=i[e+r];r=-1;for(var s=Array(e+1);++r<e;)s[r]=i[r];return s[e]=a,n(t,this,s)}}function u(t,e,n,i){n||(n={});for(var r=-1,a=e.length;++r<a;){var s=e[r],u=i?i(n[s],t[s],s,n,t):void 0;o(n,s,void 0===u?t[s]:u)}return n}function l(t){return s(function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,a&&h(n[0],n[1],a)&&(o=r<3?void 0:o,r=1),e=Object(e);++i<r;){var s=n[i];s&&t(e,s,i,o)}return e})}function c(t,e){return e=null==e?E:e,!!e&&("number"==typeof t||C.test(t))&&t>-1&&t%1==0&&t<e}function h(t,e,n){if(!_(n))return!1;var i=typeof e;return!!("number"==i?m(n)&&c(e,n.length):"string"==i&&e in n)&&d(n[e],t)}function f(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||I;return t===n}function p(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function d(t,e){return t===e||t!==t&&e!==e}function g(t){return y(t)&&N.call(t,"callee")&&(!L.call(t,"callee")||P.call(t)==S)}function m(t){return null!=t&&b(t.length)&&!v(t)}function y(t){return x(t)&&m(t)}function v(t){var e=_(t)?P.call(t):"";return e==M||e==T}function b(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=E}function _(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function x(t){return!!t&&"object"==typeof t}function w(t){return m(t)?r(t,!0):a(t)}var E=9007199254740991,S="[object Arguments]",M="[object Function]",T="[object GeneratorFunction]",C=/^(?:0|[1-9]\d*)$/,I=Object.prototype,N=I.hasOwnProperty,P=I.toString,L=I.propertyIsEnumerable,A=Math.max,k=Array.isArray,R=l(function(t,e){u(e,w(e),t)});t.exports=R},function(t,e){function n(t,e){for(var n=t?t.length:0;n--&&e(t[n],n,t)!==!1;);return t}function i(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function r(t,e){return function(n){return t(e(n))}}function o(t,e){var n=R(t)||p(t)?i(t.length,String):[],r=n.length,o=!!r;for(var a in t)!e&&!I.call(t,a)||o&&("length"==a||c(a,r))||n.push(a);return n}function a(t,e){return t&&k(t,e,_)}function s(t){if(!h(t))return L(t);var e=[];for(var n in Object(t))I.call(t,n)&&"constructor"!=n&&e.push(n);return e}function u(t,e){return function(n,i){if(null==n)return n;if(!d(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=Object(n);(e?o--:++o<r)&&i(a[o],o,a)!==!1;);return n}}function l(t){return function(e,n,i){for(var r=-1,o=Object(e),a=i(e),s=a.length;s--;){var u=a[t?s:++r];if(n(o[u],u,o)===!1)break}return e}}function c(t,e){return e=null==e?w:e,!!e&&("number"==typeof t||T.test(t))&&t>-1&&t%1==0&&t<e}function h(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||C;return t===n}function f(t,e){var i=R(t)?n:A;return i(t,"function"==typeof e?e:x)}function p(t){return g(t)&&I.call(t,"callee")&&(!P.call(t,"callee")||N.call(t)==E)}function d(t){return null!=t&&y(t.length)&&!m(t)}function g(t){return b(t)&&d(t)}function m(t){var e=v(t)?N.call(t):"";return e==S||e==M}function y(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=w}function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function b(t){return!!t&&"object"==typeof t}function _(t){return d(t)?o(t):s(t)}function x(t){return t}var w=9007199254740991,E="[object Arguments]",S="[object Function]",M="[object GeneratorFunction]",T=/^(?:0|[1-9]\d*)$/,C=Object.prototype,I=C.hasOwnProperty,N=C.toString,P=C.propertyIsEnumerable,L=r(Object.keys,Object),A=u(a,!0),k=l(!0),R=Array.isArray;t.exports=f},function(t,e,n){"use strict";var i=n(1),r=n(168),o=i.createClass({displayName:"MapToolButton",propTypes:{icon:i.PropTypes.string,top:i.PropTypes.string,right:i.PropTypes.string,bottom:i.PropTypes.string,left:i.PropTypes.string,tooltipText:i.PropTypes.string,color:i.PropTypes.string,onClick:i.PropTypes.func.isRequired,show:i.PropTypes.bool,disabled:i.PropTypes.bool},getDefaultProps:function(){return{icon:"edit",top:"10px",color:MAPHUBS_CONFIG.primaryColor,right:"10px",bottom:"auto",left:"auto",tooltipText:"",show:!0,disabled:!1}},componentDidMount:function(){this.props.tooltipText&&""!=this.props.tooltipText&&r(this.refs.mapToolButton).tooltip()},onClick:function(t){this.props.disabled||(r(this.refs.mapToolButton).tooltip("remove"),r(this.refs.mapToolButton).tooltip(),this.props.onClick(t))},render:function(){if(this.props.show){var t="white",e=this.props.color;return this.props.disabled&&(t="#DFDFDF",e="#9F9F9F"),i.createElement("a",{ref:"mapToolButton",onClick:this.onClick,style:{position:"absolute",top:this.props.top,right:this.props.right,bottom:this.props.bottom,left:this.props.left,height:"30px",zIndex:"100",lineHeight:"30px",borderRadius:"4px",textAlign:"center",boxShadow:"0 2px 5px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)",width:"30px"},"data-position":"bottom","data-delay":"50","data-tooltip":this.props.tooltipText},i.createElement("i",{className:"material-icons",style:{height:"30px",lineHeight:"30px",width:"30px",color:e,borderRadius:"4px",cursor:"pointer",backgroundColor:t,borderColor:"#ddd",borderStyle:"solid",borderWidth:"1px",textAlign:"center",fontSize:"18px"}},this.props.icon))}return null}});t.exports=o},function(t,e,n){"use strict";var i=n(1),r=n(168),o=n(666),a=n(667),s=n(669),u=n(679),l=n(170),c=n(189)(l),h=n(266),f=n(268),p=n(680),d=i.createClass({displayName:"MapToolPanel",mixins:[c.connect(h)],__:function(t){return f.getLocaleString(this.state.locale,t)},propTypes:{show:i.PropTypes.bool,gpxLink:i.PropTypes.string,onChangeBaseMap:i.PropTypes.func.isRequired,toggleMeasurementTools:i.PropTypes.func.isRequired,toggleForestAlerts:i.PropTypes.func.isRequired,toggleForestLoss:i.PropTypes.func.isRequired,calculateForestAlerts:i.PropTypes.func.isRequired,enableMeasurementTools:i.PropTypes.bool,forestAlerts:i.PropTypes.object,forestLoss:i.PropTypes.object},getDefaultProps:function(){return{show:!1,buttonTooltipText:"",enableMeasurementTools:!1,forestAlerts:{enableGLAD2017:!1,result:null},forestLoss:{enableForestLoss:!1,result:null}}},componentDidMount:function(){r(this.refs.mapToolButton).tooltip(),r(this.refs.mapToolButton).sideNav({menuWidth:240,edge:"right",closeOnClick:!1,draggable:!1}),r(this.refs.mapToolPanel).collapsible()},closePanel:function(){r(this.refs.mapToolButton).sideNav("hide")},onChangeBaseMap:function(t){this.closePanel(),this.props.onChangeBaseMap(t)},toggleMeasurementTools:function(t){t.enableMeasurementTools&&this.closePanel(),this.props.toggleMeasurementTools(t.enableMeasurementTools)},toggleForestAlerts:function(t){this.props.toggleForestAlerts(t)},toggleForestLoss:function(t){this.props.toggleForestLoss(t)},render:function(){var t="";return this.props.forestAlerts.result&&(t=i.createElement("div",null,i.createElement("div",{className:"row no-margin"},i.createElement("div",{className:"col s12",style:{height:"50px",border:"1px solid #ddd"}},i.createElement("span",null,i.createElement("b",null,this.__("Alert Count: ")),this.props.forestAlerts.result.alertCount))),i.createElement("div",{className:"row no-margin"},i.createElement("div",{className:"col s12",style:{height:"50px",border:"1px solid #ddd"}},i.createElement("span",null,i.createElement("b",null,this.__("Total Area: ")),this.props.forestAlerts.result.areaMessage))))),i.createElement("div",null,i.createElement("a",{ref:"mapToolButton",href:"#","data-activates":"map-tool-panel",style:{display:this.props.show?"inherit":"none",position:"absolute",top:"10px",right:"10px",height:"30px",zIndex:"100",borderRadius:"4px",lineHeight:"30px",textAlign:"center",boxShadow:"0 2px 5px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)",width:"30px"},"data-position":"bottom","data-delay":"50",
"data-tooltip":this.__("Tools")},i.createElement("i",{className:"material-icons",style:{height:"30px",lineHeight:"30px",width:"30px",color:"#000",borderRadius:"4px",cursor:"pointer",backgroundColor:"white",borderColor:"#ddd",borderStyle:"none",borderWidth:"1px",textAlign:"center",fontSize:"18px"}},"build")),i.createElement("div",{className:"side-nav",id:"map-tool-panel",style:{backgroundColor:"#FFF",height:"calc(100% - 100px)",overflow:"hidden",padding:0,marginTop:"50px",border:"1px solid #d3d3d3"}},i.createElement("ul",{ref:"mapToolPanel",className:"collapsible no-margin","data-collapsible":"accordion",style:{height:"100%"}},i.createElement("li",null,i.createElement("div",{className:"collapsible-header",style:{borderBottom:"1px solid #ddd"}},i.createElement("i",{className:"material-icons"},"layers"),this.__("Change Base Map")),i.createElement("div",{className:"collapsible-body"},i.createElement("div",{style:{height:"calc(100vh - 250px)",overflow:"auto"}},i.createElement(a,{onChange:this.onChangeBaseMap})))),i.createElement("li",null,i.createElement("div",{className:"collapsible-header",style:{borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd"}},i.createElement("i",{className:"material-icons"},"straighten"),this.__("Measurement Tools")),i.createElement("div",{className:"collapsible-body center"},i.createElement("div",{style:{height:"calc(100vh - 250px)",overflow:"auto"}},i.createElement(s.Form,{onChange:this.toggleMeasurementTools},i.createElement("b",null,this.__("Show Measurement Tools")),i.createElement(u,{name:"enableMeasurementTools",labelOff:this.__("Off"),labelOn:this.__("On"),className:"col s12",checked:this.props.enableMeasurementTools}))))),i.createElement("li",null,i.createElement("div",{className:"collapsible-header",style:{borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd"}},i.createElement("i",{className:"material-icons"},"warning"),this.__("Forest Alerts")),i.createElement("div",{className:"collapsible-body center"},i.createElement("div",{style:{height:"calc(100vh - 250px)",overflow:"auto"}},i.createElement(s.Form,{onChange:this.toggleForestAlerts},i.createElement("b",null,this.__("2017 GLAD Alerts")),i.createElement(u,{name:"enableGLAD2017",labelOff:this.__("Off"),labelOn:this.__("On"),className:"col s12",checked:this.props.forestAlerts.enableGLAD2017})),i.createElement("button",{className:"btn",onClick:this.props.calculateForestAlerts},this.__("Calculate")),t,i.createElement(s.Form,{onChange:this.toggleForestLoss},i.createElement("b",null,this.__("2001 - 2014 Forest Loss")),i.createElement(u,{name:"enableForestLoss",labelOff:this.__("Off"),labelOn:this.__("On"),className:"col s12",checked:this.props.forestLoss.enableForestLoss})),i.createElement("button",{className:"btn-floating",style:{marginRight:"5px"},onClick:p.play},i.createElement("i",{className:"material-icons"},"play_arrow")),i.createElement("button",{className:"btn-floating",onClick:p.stop},i.createElement("i",{className:"material-icons"},"pause"))))),i.createElement("li",null,i.createElement("div",{className:"collapsible-header",style:{borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd"}},i.createElement("i",{className:"material-icons"},"edit"),this.__("Edit OpenStreetMap")),i.createElement("div",{className:"collapsible-body"},i.createElement("div",{style:{height:"calc(100vh - 250px)",overflow:"auto"}},i.createElement(o,{gpxLink:this.props.gpxLink})))))))}});t.exports=d},function(t,e,n){"use strict";var i=n(1),r=(n(648),n(170)),o=n(189)(r),a=n(266),s=n(268),u=i.createClass({displayName:"EditBaseMapBox",mixins:[o.connect(a)],__:function(t){return s.getLocaleString(this.state.locale,t)},propTypes:{gpxLink:i.PropTypes.string},getLinks:function(){var t=window.location.hash.replace("#",""),e=t.split("/"),n=Math.round(e[0]),i=e[1],r=e[2],o="https://www.openstreetmap.org/edit#map="+n+"/"+i+"/"+r,a="http://id.loggingroads.org/#map="+n+"/"+r+"/"+i;return this.props.gpxLink&&(o+="&gpx="+this.props.gpxLink,a+="&gpx="+this.props.gpxLink),{osm:o,loggingroads:a}},openOSM:function(){var t=this.getLinks();window.location=t.osm},openLogginRoads:function(){var t=this.getLinks();window.location=t.loggingroads},render:function(){return i.createElement("div",{style:{width:"100%",textAlign:"center"}},i.createElement("p",{style:{padding:"5px"}},"Edit OpenStreetMap at this location"),i.createElement("ul",{className:"collection with-header custom-scroll-bar",style:{margin:0,width:"100%",overflow:"auto"}},i.createElement("li",{className:"collection-item",style:{paddingLeft:0}},i.createElement("a",{className:"btn",onClick:this.openOSM},this.__("OpenStreetMap"))),i.createElement("li",{className:"collection-item",style:{paddingLeft:0}},i.createElement("a",{className:"btn",onClick:this.openLoggingRoads},this.__("LoggingRoads")))))}});t.exports=u},function(t,e,n){"use strict";var i=n(1),r=n(668),o=n(669),a=n(170),s=n(189)(a),u=n(649),l=n(266),c=n(268),h=i.createClass({displayName:"BaseMapSelection",mixins:[s.connect(u),s.connect(l)],__:function(t){return c.getLocaleString(this.state.locale,t)},propTypes:{onChange:i.PropTypes.func.isRequired},onChange:function(t){this.props.onChange(t)},render:function(){var t=[{value:"default",label:this.__("Default (Light)")},{value:"dark",label:this.__("Dark")},{value:"streets",label:this.__("Streets")}];return MAPHUBS_CONFIG.useMapboxBaseMaps&&(t.push({value:"outdoors",label:this.__("Outdoors")}),t.push({value:"mapbox-satellite",label:this.__("Mapbox Satellite")})),t.push({value:"bing-satellite",label:this.__("Bing Aerial")}),t.push({value:"landsat-2016",label:this.__("Landsat - 2016")}),t.push({value:"landsat-2014",label:this.__("Landsat - 2014")}),t.push({value:"stamen-toner",label:this.__("Stamen - Toner")}),t.push({value:"stamen-terrain",label:this.__("Stamen - Terrain")}),t.push({value:"stamen-watercolor",label:this.__("Stamen - Watercolor")}),i.createElement("div",{style:{width:"100%",marginRight:"10px",backgroundColor:"white",textAlign:"left"}},i.createElement(o.Form,null,i.createElement("h6",null,this.__("Choose a Base Map")),i.createElement(r,{name:"baseMap",label:"",className:"base-map-selection",defaultValue:this.state.baseMap,options:t,onChange:this.onChange})))}});t.exports=h},function(t,e,n){"use strict";var i=n(1),r=n(669),o=n(284),a=n(676),s=i.createClass({displayName:"Radio",mixins:[a,r.Mixin],propTypes:{className:i.PropTypes.string,dataTooltip:i.PropTypes.string,dataDelay:i.PropTypes.number,dataPosition:i.PropTypes.string,defaultValue:i.PropTypes.string,label:i.PropTypes.string,name:i.PropTypes.string,onChange:i.PropTypes.func,options:i.PropTypes.array},getDefaultProps:function(){return{options:{},defaultValue:void 0,dataDelay:100}},changeValue:function(t){this.setValue(t.target.id),this.props.onChange&&this.props.onChange(t.target.id)},componentWillMount:function(){this.setValue(this.props.defaultValue)},render:function(){var t=o(this.props.className,{tooltipped:!!this.props.dataTooltip}),e=this.getValue(),n=this.props.name,r=this;return i.createElement("div",{className:t,"data-delay":this.props.dataDelay,"data-position":this.props.dataPosition,"data-tooltip":this.props.dataTooltip},i.createElement("label",null,this.props.label),this.props.options.map(function(t){var o=!1;return t.value==e&&(o=!0),i.createElement("p",{key:t.value},i.createElement("input",{name:n,type:"radio",id:t.value,onChange:r.changeValue,checked:o}),i.createElement("label",{htmlFor:t.value},t.label))}))}});t.exports=s},function(t,e,n){(function(e){"use strict";function i(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=e.React||n(1),s={},u=n(670),l=n(671),c=n(672),h=n(673),f=n(674),p=n(675),d={},g=[];s.Mixin=h,s.HOC=f,s.Decorator=p,s.defaults=function(t){d=t},s.addValidationRule=function(t,e){u[t]=e},s.Form=a.createClass({displayName:"Formsy",getInitialState:function(){return{isValid:!0,isSubmitting:!1,canChange:!1}},getDefaultProps:function(){return{onSuccess:function(){},onError:function(){},onSubmit:function(){},onValidSubmit:function(){},onInvalidSubmit:function(){},onValid:function(){},onInvalid:function(){},onChange:function(){},validationErrors:null,preventExternalInvalidation:!1}},childContextTypes:{formsy:a.PropTypes.object},getChildContext:function(){var t=this;return{formsy:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,validate:this.validate,isFormDisabled:this.isFormDisabled,isValidValue:function(e,n){return t.runValidation(e,n).isValid}}}},componentWillMount:function(){this.inputs=[]},componentDidMount:function(){this.validateForm()},componentWillUpdate:function(){this.prevInputNames=this.inputs.map(function(t){return t.props.name})},componentDidUpdate:function(){this.props.validationErrors&&"object"===o(this.props.validationErrors)&&Object.keys(this.props.validationErrors).length>0&&this.setInputValidationErrors(this.props.validationErrors);var t=this.inputs.map(function(t){return t.props.name});c.arraysDiffer(this.prevInputNames,t)&&this.validateForm()},reset:function(t){this.setFormPristine(!0),this.resetModel(t)},submit:function(t){t&&t.preventDefault(),this.setFormPristine(!1);var e=this.getModel();this.props.onSubmit(e,this.resetModel,this.updateInputsWithError),this.state.isValid?this.props.onValidSubmit(e,this.resetModel,this.updateInputsWithError):this.props.onInvalidSubmit(e,this.resetModel,this.updateInputsWithError)},mapModel:function(t){return this.props.mapping?this.props.mapping(t):l.toObj(Object.keys(t).reduce(function(e,n){for(var i=n.split("."),r=e;i.length;){var o=i.shift();r=r[o]=i.length?r[o]||{}:t[n]}return e},{}))},getModel:function(){var t=this.getCurrentValues();return this.mapModel(t)},resetModel:function(t){this.inputs.forEach(function(e){var n=e.props.name;t&&t.hasOwnProperty(n)?e.setValue(t[n]):e.resetValue()}),this.validateForm()},setInputValidationErrors:function(t){this.inputs.forEach(function(e){var n=e.props.name,i=[{_isValid:!(n in t),_validationError:"string"==typeof t[n]?[t[n]]:t[n]}];e.setState.apply(e,i)})},isChanged:function(){return!c.isSame(this.getPristineValues(),this.getCurrentValues())},getPristineValues:function(){return this.inputs.reduce(function(t,e){var n=e.props.name;return t[n]=e.props.value,t},{})},updateInputsWithError:function(t){var e=this;Object.keys(t).forEach(function(n,i){var r=c.find(e.inputs,function(t){return t.props.name===n});if(!r)throw new Error("You are trying to update an input that does not exist. Verify errors object with input names. "+JSON.stringify(t));var o=[{_isValid:e.props.preventExternalInvalidation||!1,_externalError:"string"==typeof t[n]?[t[n]]:t[n]}];r.setState.apply(r,o)})},isFormDisabled:function(){return this.props.disabled},getCurrentValues:function(){return this.inputs.reduce(function(t,e){var n=e.props.name;return t[n]=e.state._value,t},{})},setFormPristine:function(t){this.setState({_formSubmitted:!t}),this.inputs.forEach(function(e,n){e.setState({_formSubmitted:!t,_isPristine:t})})},validate:function(t){this.state.canChange&&this.props.onChange(this.getCurrentValues(),this.isChanged());var e=this.runValidation(t);t.setState({_isValid:e.isValid,_isRequired:e.isRequired,_validationError:e.error,_externalError:null},this.validateForm)},runValidation:function(t,e){var n=this.getCurrentValues(),i=t.props.validationErrors,r=t.props.validationError;e=2===arguments.length?e:t.state._value;var o=this.runRules(e,n,t._validations),a=this.runRules(e,n,t._requiredValidations);"function"==typeof t.validate&&(o.failed=t.validate()?[]:["failed"]);var s=!!Object.keys(t._requiredValidations).length&&!!a.success.length,u=!(o.failed.length||this.props.validationErrors&&this.props.validationErrors[t.props.name]);return{isRequired:s,isValid:!s&&u,error:function(){if(u&&!s)return g;if(o.errors.length)return o.errors;if(this.props.validationErrors&&this.props.validationErrors[t.props.name])return"string"==typeof this.props.validationErrors[t.props.name]?[this.props.validationErrors[t.props.name]]:this.props.validationErrors[t.props.name];if(s){var e=i[a.success[0]];return e?[e]:null}return o.failed.length?o.failed.map(function(t){return i[t]?i[t]:r}).filter(function(t,e,n){return n.indexOf(t)===e}):void 0}.call(this)}},runRules:function(t,e,n){var i={errors:[],failed:[],success:[]};return Object.keys(n).length&&Object.keys(n).forEach(function(r){if(u[r]&&"function"==typeof n[r])throw new Error("Formsy does not allow you to override default validations: "+r);if(!u[r]&&"function"!=typeof n[r])throw new Error("Formsy does not have the validation rule: "+r);if("function"==typeof n[r]){var o=n[r](e,t);return void("string"==typeof o?(i.errors.push(o),i.failed.push(r)):o||i.failed.push(r))}if("function"!=typeof n[r]){var o=u[r](e,t,n[r]);return void("string"==typeof o?(i.errors.push(o),i.failed.push(r)):o?i.success.push(r):i.failed.push(r))}return i.success.push(r)}),i},validateForm:function(){var t=this,e=function(){var t=this.inputs.every(function(t){return t.state._isValid});this.setState({isValid:t}),t?this.props.onValid():this.props.onInvalid(),this.setState({canChange:!0})}.bind(this);this.inputs.forEach(function(n,i){var r=t.runValidation(n);r.isValid&&n.state._externalError&&(r.isValid=!1),n.setState({_isValid:r.isValid,_isRequired:r.isRequired,_validationError:r.error,_externalError:!r.isValid&&n.state._externalError?n.state._externalError:null},i===t.inputs.length-1?e:null)}),!this.inputs.length&&this.isMounted()&&this.setState({canChange:!0})},attachToForm:function(t){this.inputs.indexOf(t)===-1&&this.inputs.push(t),this.validate(t)},detachFromForm:function(t){var e=this.inputs.indexOf(t);e!==-1&&(this.inputs=this.inputs.slice(0,e).concat(this.inputs.slice(e+1))),this.validateForm()},render:function(){var t=this.props,e=(t.mapping,t.validationErrors,t.onSubmit,t.onValid,t.onValidSubmit,t.onInvalid,t.onInvalidSubmit,t.onChange,t.reset,t.preventExternalInvalidation,t.onSuccess,t.onError,i(t,["mapping","validationErrors","onSubmit","onValid","onValidSubmit","onInvalid","onInvalidSubmit","onChange","reset","preventExternalInvalidation","onSuccess","onError"]));return a.createElement("form",r({},e,{onSubmit:this.submit}),this.props.children)}}),e.exports||e.module||e.define&&e.define.amd||(e.Formsy=s),t.exports=s}).call(e,function(){return this}())},function(t,e){"use strict";var n=function(t){return null!==t&&void 0!==t},i=function(t){return""===t},r={isDefaultRequiredValue:function(t,e){return void 0===e||""===e},isExisty:function(t,e){return n(e)},matchRegexp:function(t,e,r){return!n(e)||i(e)||r.test(e)},isUndefined:function(t,e){return void 0===e},isEmptyString:function(t,e){return i(e)},isEmail:function(t,e){return r.matchRegexp(t,e,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},isUrl:function(t,e){return r.matchRegexp(t,e,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i)},isTrue:function(t,e){return e===!0},isFalse:function(t,e){return e===!1},isNumeric:function(t,e){return"number"==typeof e||r.matchRegexp(t,e,/^[-+]?(?:\d*[.])?\d+$/)},isAlpha:function(t,e){return r.matchRegexp(t,e,/^[A-Z]+$/i)},isAlphanumeric:function(t,e){return r.matchRegexp(t,e,/^[0-9A-Z]+$/i)},isInt:function(t,e){return r.matchRegexp(t,e,/^(?:[-+]?(?:0|[1-9]\d*))$/)},isFloat:function(t,e){return r.matchRegexp(t,e,/^(?:[-+]?(?:\d+))?(?:\.\d*)?(?:[eE][\+\-]?(?:\d+))?$/)},isWords:function(t,e){return r.matchRegexp(t,e,/^[A-Z\s]+$/i)},isSpecialWords:function(t,e){return r.matchRegexp(t,e,/^[A-Z\s\u00C0-\u017F]+$/i)},isLength:function(t,e,r){return!n(e)||i(e)||e.length===r},equals:function(t,e,r){return!n(e)||i(e)||e==r},equalsField:function(t,e,n){return e==t[n]},maxLength:function(t,e,i){return!n(e)||e.length<=i},minLength:function(t,e,r){return!n(e)||i(e)||e.length>=r}};t.exports=r},function(t,e){function n(t){return Object.keys(t).reduce(function(e,n){var i=n.match(/[^\[]*/i),r=n.match(/\[.*?\]/g)||[];r=[i[0]].concat(r).map(function(t){return t.replace(/\[|\]/g,"")});for(var o=e;r.length;){var a=r.shift();a in o?o=o[a]:(o[a]=r.length?isNaN(r[0])?{}:[]:t[n],o=o[a])}return e},{})}function i(t){function e(t,n,i){return Array.isArray(i)||"[object Object]"===Object.prototype.toString.call(i)?(Object.keys(i).forEach(function(r){e(t,n+"["+r+"]",i[r])}),t):(t[n]=i,t)}var n=Object.keys(t);return n.reduce(function(n,i){return e(n,i,t[i])},{})}t.exports={fromObj:i,toObj:n}},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={arraysDiffer:function(t,e){var n=!1;return t.length!==e.length?n=!0:t.forEach(function(t,i){this.isSame(t,e[i])||(n=!0)},this),n},objectsDiffer:function(t,e){var n=!1;return Object.keys(t).length!==Object.keys(e).length?n=!0:Object.keys(t).forEach(function(i){this.isSame(t[i],e[i])||(n=!0)},this),n},isSame:function(t,e){return("undefined"==typeof t?"undefined":n(t))===("undefined"==typeof e?"undefined":n(e))&&(Array.isArray(t)&&Array.isArray(e)?!this.arraysDiffer(t,e):"function"==typeof t?t.toString()===e.toString():"object"===("undefined"==typeof t?"undefined":n(t))&&null!==t&&null!==e?!this.objectsDiffer(t,e):t===e)},find:function(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n];if(e(r))return r}return null}}},function(t,e,n){(function(e){"use strict";var i=n(672),r=e.React||n(1),o=function(t){return"string"==typeof t?t.split(/\,(?![^{\[]*[}\]])/g).reduce(function(t,e){var n=e.split(":"),i=n.shift();if(n=n.map(function(t){try{return JSON.parse(t)}catch(e){return t}}),n.length>1)throw new Error("Formsy does not support multiple args on string validations. Use object format of validations instead.");return t[i]=!n.length||n[0],t},{}):t||{}};t.exports={getInitialState:function(){return{_value:this.props.value,_isRequired:!1,_isValid:!0,_isPristine:!0,_pristineValue:this.props.value,_validationError:[],_externalError:null,_formSubmitted:!1}},contextTypes:{formsy:r.PropTypes.object},getDefaultProps:function(){return{validationError:"",validationErrors:{}}},componentWillMount:function(){var t=function(){this.setValidations(this.props.validations,this.props.required),this.context.formsy.attachToForm(this)}.bind(this);if(!this.props.name)throw new Error("Form Input requires a name property when used");t()},componentWillReceiveProps:function(t){this.setValidations(t.validations,t.required)},componentDidUpdate:function(t){i.isSame(this.props.value,t.value)||this.setValue(this.props.value),i.isSame(this.props.validations,t.validations)&&i.isSame(this.props.required,t.required)||this.context.formsy.validate(this)},componentWillUnmount:function(){this.context.formsy.detachFromForm(this)},setValidations:function(t,e){this._validations=o(t)||{},this._requiredValidations=e===!0?{isDefaultRequiredValue:!0}:o(e)},setValue:function(t){this.setState({_value:t,_isPristine:!1},function(){this.context.formsy.validate(this)}.bind(this))},resetValue:function(){this.setState({_value:this.state._pristineValue,_isPristine:!0},function(){this.context.formsy.validate(this)})},getValue:function(){return this.state._value},hasValue:function(){return""!==this.state._value},getErrorMessage:function(){var t=this.getErrorMessages();return t.length?t[0]:null},getErrorMessages:function(){return!this.isValid()||this.showRequired()?this.state._externalError||this.state._validationError||[]:[]},isFormDisabled:function(){return this.context.formsy.isFormDisabled()},isValid:function(){return this.state._isValid},isPristine:function(){return this.state._isPristine},isFormSubmitted:function(){return this.state._formSubmitted},isRequired:function(){return!!this.props.required},showRequired:function(){return this.state._isRequired},showError:function(){return!this.showRequired()&&!this.isValid()},isValidValue:function(t){return this.context.formsy.isValidValue.call(null,this,t)}}}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";function i(t){return t.displayName||t.name||("string"==typeof t?t:"Component")}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o=e.React||n(1),a=n(673);t.exports=function(t){return o.createClass({displayName:"Formsy("+i(t)+")",mixins:[a],render:function(){var e=this.props.innerRef,n=r({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props);return e&&(n.ref=e),o.createElement(t,n)}})}}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=e.React||n(1),o=n(673);t.exports=function(){return function(t){return r.createClass({mixins:[o],render:function(){return r.createElement(t,i({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props))}})}}}).call(e,function(){return this}())},function(t,e,n){t.exports=n(677)},function(t,e,n){"use strict";var i=n(678),r={shouldComponentUpdate:function(t,e){return i(this,t,e)}};t.exports=r},function(t,e,n){"use strict";function i(t,e,n){return!r(t.props,e)||!r(t.state,n)}var r=n(113);t.exports=i},function(t,e,n){"use strict";var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=n(1),o=n(669),a=n(284),s=n(168),u=n(676),l=n(201)("Toggle"),c=r.createClass({displayName:"Toggle",mixins:[u,o.Mixin],propTypes:{className:r.PropTypes.string,dataTooltip:r.PropTypes.string,dataDelay:r.PropTypes.number,dataPosition:r.PropTypes.string,labelOn:r.PropTypes.string.isRequired,labelOff:r.PropTypes.string.isRequired,name:r.PropTypes.string.isRequired,style:r.PropTypes.object,disabled:r.PropTypes.bool,onChange:r.PropTypes.func,defaultChecked:r.PropTypes.bool,checked:r.PropTypes.bool},getDefaultProps:function(){return{style:{},defaultChecked:!1,dataDelay:100,disabled:!1}},changeValue:function(t){t.stopPropagation();var e=t.currentTarget.checked;l("change value: "+e),e!==this.getValue()&&this.setValue(e),this.props.onChange&&this.props.onChange(t.currentTarget.checked)},componentWillMount:function(){"checked"in this.props?this.setValue(this.props.checked):this.setValue(this.props.defaultChecked)},componentDidMount:function(){this.props.dataTooltip&&s(this.refs.toggle).tooltip()},componentWillReceiveProps:function(t){var e=this.props.checked;"checked"in t&&t.checked!==e&&this.setValue(t.checked)},componentDidUpdate:function(t){!t.dataTooltip&&this.props.dataTooltip&&s(this.refs.toggle).tooltip()},render:function(){var t=i({},this.props);delete t.defaultChecked;var e=a("switch",this.props.className,{tooltipped:!!this.props.dataTooltip}),n=this.getValue();return"boolean"==typeof n&&(n=n?1:0),r.createElement("div",{ref:"toggle",className:e,disabled:t.disabled,"data-delay":t.dataDelay,"data-position":t.dataPosition,style:t.style,"data-tooltip":t.dataTooltip},r.createElement("label",null,t.labelOff,r.createElement("input",{type:"checkbox",id:t.name,checked:!!n,disabled:t.disabled,onChange:this.changeValue}),r.createElement("span",{className:"lever"}),t.labelOn))}});t.exports=c},function(t,e,n){"use strict";var i=n(170),r=i.createActions({play:{},stop:{},reset:{},tick:{}});t.exports=r},function(t,e,n){"use strict";var i=n(1),r=n(201)("map"),o=n(168),a=n(682),s=n(664),u={};"undefined"!=typeof window&&(u=n(684));var l=i.createClass({displayName:"InsetMap",propTypes:{id:i.PropTypes.string,bottom:i.PropTypes.string,attributionControl:i.PropTypes.bool,collapsed:i.PropTypes.bool},getDefaultProps:function(){return{id:"map",bottom:"30px",attributionControl:!1,collapsed:!1}},getInitialState:function(){return{collapsed:this.props.collapsed}},componentDidMount:function(){this.refs.insetMap&&o(this.refs.insetMap).show()},componentDidUpdate:function(){this.insetMap&&(this.state.collapsed||o(this.refs.insetMapArrow).show(),this.insetMapActive||(o(this.refs.insetMap).addClass("z-depth-1"),o(this.refs.insetMap).css("border","0.5px solid rgba(222,222,222,50)"),this.insetMapActive=!0))},createInsetMap:function(t,e,n){var i=this,r=new u.Map({container:this.props.id+"_inset",style:n,zoom:0,interactive:!1,center:t,attributionControl:this.props.attributionControl});r.on("style.load",function(){r.fitBounds(e,{maxZoom:1.8,padding:10});var t=i.getGeoJSONFromBounds(e);t.features[0].properties={v:1};var n=a(t);n.properties={v:1},r.addSource("inset-bounds",{type:"geojson",data:t}),r.addSource("inset-centroid",{type:"geojson",data:n}),r.addLayer({id:"bounds",type:"line",source:"inset-bounds",paint:{"line-color":"rgb(244, 118, 144)","line-opacity":.75,"line-width":5}}),r.addLayer({id:"center",type:"circle",source:"inset-centroid",paint:{"circle-color":"rgb(244, 118, 144)","circle-opacity":.75}}),i.showInsetAsPoint()?(r.setFilter("center",["==","v",1]),r.setFilter("bounds",["==","v",2])):(r.setFilter("center",["==","v",2]),r.setFilter("bounds",["==","v",1]))}),i.insetMap=r},reloadInset:function(t){this.insetMap&&this.insetMap.setStyle(t)},fitBounds:function(t,e){this.insetMap&&this.insetMap.fitBounds(t,e)},toggleCollapsed:function(){this.state.collapsed?this.setState({collapsed:!1}):(this.setState({collapsed:!0}),o(this.refs.insetMap).show())},getInsetMap:function(){return this.insetMap},getGeoJSONFromBounds:function(t){var e=t.getNorthWest().toArray(),n=t.getNorthEast().toArray(),i=t.getSouthEast().toArray(),r=t.getSouthWest().toArray(),o=e;return{type:"FeatureCollection",features:[{type:"Feature",properties:{name:"bounds"},geometry:{type:"Polygon",coordinates:[[e,n,i,r,o]]}}]}},showInsetAsPoint:function(t){return!!(t&&t>9)},updateInsetGeomFromBounds:function(t,e){if(this.insetMap){var n=this.insetMap.getSource("inset-bounds"),i=this.insetMap.getSource("inset-centroid");if(n)try{var o=this.getGeoJSONFromBounds(t);o.features[0].properties={v:1},n.setData(o);var s=a(o);s.properties={v:1},i.setData(s),this.setState({insetGeoJSONData:n,insetGeoJSONCentroidData:i}),e<2.3?(this.insetMap.setFilter("center",["==","v",2]),this.insetMap.setFilter("bounds",["==","v",2])):this.showInsetAsPoint(e)?(this.insetMap.setFilter("center",["==","v",1]),this.insetMap.setFilter("bounds",["==","v",2])):(this.insetMap.setFilter("center",["==","v",2]),this.insetMap.setFilter("bounds",["==","v",1])),this.insetMap.fitBounds(t,{maxZoom:1.8,padding:10,animate:!1})}catch(t){r(t)}}},render:function(){return this.state.collapsed?i.createElement("div",{style:{position:"absolute",bottom:this.props.bottom,left:"5px",minHeight:"100px",maxHeight:"145px",minWidth:"100px",maxWidth:"145px",height:"25vw",width:"25vw"}},i.createElement("div",{id:this.props.id+"_inset",ref:"insetMap",style:{display:"none"}},i.createElement(s,{onClick:this.toggleCollapsed,color:"#212121",top:"auto",right:"auto",bottom:"5px",left:"5px",icon:"near_me"}))):i.createElement("div",{style:{position:"absolute",bottom:this.props.bottom,left:"5px",minHeight:"100px",maxHeight:"145px",minWidth:"100px",maxWidth:"145px",height:"25vw",width:"25vw"}},i.createElement("div",{id:this.props.id+"_inset",ref:"insetMap",className:"map",style:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"none",zIndex:1}}),i.createElement("i",{className:"material-icons",ref:"insetMapArrow",onClick:this.toggleCollapsed,style:{position:"absolute",top:"-5px",right:"-5px",height:"30px",display:"none",lineHeight:"30px",width:"30px",color:"#717171",cursor:"pointer",textAlign:"center",zIndex:2,transform:"rotate(45deg)",fontSize:"18px"}},"arrow_downward"))}});t.exports=l},function(t,e,n){var i=n(683).coordEach,r=n(651).point;t.exports=function(t){var e=0,n=0,o=0;return i(t,function(t){e+=t[0],n+=t[1],o++},!0),r([e/o,n/o])}},,function(t,e){!function(n){if("object"==typeof e&&"undefined"!=typeof t)t.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.mapboxgl=n()}}(function(){var t;return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t){var r=t[i].paintVertexArray;if(0!==r.length){var o=r.serialize(e),a=r.constructor.serialize();n[i]={array:o,type:a}}}return n}var r=t("./program_configuration"),o=function(t,e){this.vertexOffset=t,this.primitiveOffset=e,this.vertexLength=0,this.primitiveLength=0},a=function(t,e,n){var i=this;this.globalProperties={zoom:n};
var o=t.layoutVertexArrayType;this.layoutVertexArray=new o;var a=t.elementArrayType;a&&(this.elementArray=new a);var s=t.elementArrayType2;s&&(this.elementArray2=new s),this.layerData={};for(var u=0,l=e;u<l.length;u+=1){var c=l[u],h=r.createDynamic(t.paintAttributes||[],c,n);i.layerData[c.id]={layer:c,programConfiguration:h,paintVertexArray:new h.PaintVertexArray}}this.segments=[],this.segments2=[]};a.prototype.prepareSegment=function(t){var e=this.segments[this.segments.length-1];return(!e||e.vertexLength+t>a.MAX_VERTEX_ARRAY_LENGTH)&&(e=new o(this.layoutVertexArray.length,this.elementArray.length),this.segments.push(e)),e},a.prototype.prepareSegment2=function(t){var e=this.segments2[this.segments2.length-1];return(!e||e.vertexLength+t>a.MAX_VERTEX_ARRAY_LENGTH)&&(e=new o(this.layoutVertexArray.length,this.elementArray2.length),this.segments2.push(e)),e},a.prototype.populatePaintArrays=function(t){var e=this;for(var n in this.layerData){var i=e.layerData[n];0!==i.paintVertexArray.bytesPerElement&&i.programConfiguration.populatePaintArray(i.layer,i.paintVertexArray,e.layoutVertexArray.length,e.globalProperties,t)}},a.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},a.prototype.serialize=function(t){return{layoutVertexArray:this.layoutVertexArray.serialize(t),elementArray:this.elementArray&&this.elementArray.serialize(t),elementArray2:this.elementArray2&&this.elementArray2.serialize(t),paintVertexArrays:i(this.layerData,t),segments:this.segments,segments2:this.segments2}},a.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,e.exports=a},{"./program_configuration":15}],2:[function(t,e,n){"use strict";var i=t("./array_group"),r=t("./buffer_group"),o=t("../util/util"),a=function(t,e){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,t.arrays?this.buffers=new r(e,t.layers,t.zoom,t.arrays):this.arrays=new i(e,t.layers,t.zoom)};a.prototype.populate=function(t,e){for(var n=this,i=0,r=t;i<r.length;i+=1){var o=r[i];n.layers[0].filter(o)&&(n.addFeature(o),e.featureIndex.insert(o,n.index))}},a.prototype.isEmpty=function(){return this.arrays.isEmpty()},a.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map(function(t){return t.id}),arrays:this.arrays.serialize(t)}},a.prototype.destroy=function(){this.buffers&&(this.buffers.destroy(),this.buffers=null)},e.exports=a,a.deserialize=function(t,e){if(e){for(var n={},i=0,r=t;i<r.length;i+=1){var a=r[i],s=a.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==s.length)for(var u=s[0].createBucket(o.extend({layers:s},a)),l=0,c=s;l<c.length;l+=1){var h=c[l];n[h.id]=u}}return n}}},{"../util/util":131,"./array_group":1,"./buffer_group":9}],3:[function(t,e,n){"use strict";function i(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}var r=t("../bucket"),o=t("../vertex_array_type"),a=t("../element_array_type"),s=t("../load_geometry"),u=t("../extent"),l={layoutVertexArrayType:o([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:a(),paintAttributes:[{property:"circle-color",type:"Uint8"},{property:"circle-radius",type:"Uint16",multiplier:10},{property:"circle-blur",type:"Uint16",multiplier:10},{property:"circle-opacity",type:"Uint8",multiplier:255},{property:"circle-stroke-color",type:"Uint8"},{property:"circle-stroke-width",type:"Uint16",multiplier:10},{property:"circle-stroke-opacity",type:"Uint8",multiplier:255}]},c=function(t){function e(e){t.call(this,e,l)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this.arrays,n=0,r=s(t);n<r.length;n+=1)for(var o=r[n],a=0,l=o;a<l.length;a+=1){var c=l[a],h=c.x,f=c.y;if(!(h<0||h>=u||f<0||f>=u)){var p=e.prepareSegment(4),d=p.vertexLength;i(e.layoutVertexArray,h,f,-1,-1),i(e.layoutVertexArray,h,f,1,-1),i(e.layoutVertexArray,h,f,1,1),i(e.layoutVertexArray,h,f,-1,1),e.elementArray.emplaceBack(d,d+1,d+2),e.elementArray.emplaceBack(d,d+3,d+2),p.vertexLength+=4,p.primitiveLength+=2}}e.populatePaintArrays(t.properties)},e}(r);e.exports=c},{"../bucket":2,"../element_array_type":10,"../extent":11,"../load_geometry":13,"../vertex_array_type":17}],4:[function(t,e,n){"use strict";var i=t("../bucket"),r=t("../vertex_array_type"),o=t("../element_array_type"),a=t("../load_geometry"),s=t("earcut"),u=t("../../util/classify_rings"),l=500,c={layoutVertexArrayType:r([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:o(3),elementArrayType2:o(2),paintAttributes:[{property:"fill-color",type:"Uint8"},{property:"fill-outline-color",type:"Uint8"},{property:"fill-opacity",type:"Uint8",multiplier:255}]},h=function(t){function e(e){t.call(this,e,c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this.arrays,n=0,i=u(a(t),l);n<i.length;n+=1){for(var r=i[n],o=0,c=0,h=r;c<h.length;c+=1){var f=h[c];o+=f.length}for(var p=e.prepareSegment(o),d=p.vertexLength,g=[],m=[],y=0,v=r;y<v.length;y+=1){var b=v[y];if(0!==b.length){b!==r[0]&&m.push(g.length/2);var _=e.prepareSegment2(b.length),x=_.vertexLength;e.layoutVertexArray.emplaceBack(b[0].x,b[0].y),e.elementArray2.emplaceBack(x+b.length-1,x),g.push(b[0].x),g.push(b[0].y);for(var w=1;w<b.length;w++)e.layoutVertexArray.emplaceBack(b[w].x,b[w].y),e.elementArray2.emplaceBack(x+w-1,x+w),g.push(b[w].x),g.push(b[w].y);_.vertexLength+=b.length,_.primitiveLength+=b.length}}for(var E=s(g,m),S=0;S<E.length;S+=3)e.elementArray.emplaceBack(d+E[S],d+E[S+1],d+E[S+2]);p.vertexLength+=o,p.primitiveLength+=E.length/3}e.populatePaintArrays(t.properties)},e}(i);e.exports=h},{"../../util/classify_rings":115,"../bucket":2,"../element_array_type":10,"../load_geometry":13,"../vertex_array_type":17,earcut:143}],5:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){t.emplaceBack(e,n,2*Math.floor(i*d)+a,r*d*2,o*d*2,Math.round(s))}function r(t,e){return t.x===e.x&&(t.x<0||t.x>l)||t.y===e.y&&(t.y<0||t.y>l)}var o=t("../bucket"),a=t("../vertex_array_type"),s=t("../element_array_type"),u=t("../load_geometry"),l=t("../extent"),c=t("earcut"),h=t("../../util/classify_rings"),f=500,p={layoutVertexArrayType:a([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal",components:3,type:"Int16"},{name:"a_edgedistance",components:1,type:"Int16"}]),elementArrayType:s(3),paintAttributes:[{property:"fill-extrusion-base",type:"Uint16"},{property:"fill-extrusion-height",type:"Uint16"},{property:"fill-extrusion-color",type:"Uint8"}]},d=Math.pow(2,13),g=function(t){function e(e){t.call(this,e,p)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this.arrays,n=0,o=h(u(t),f);n<o.length;n+=1){for(var a=o[n],s=0,l=0,p=a;l<p.length;l+=1){var d=p[l];s+=d.length}for(var g=e.prepareSegment(5*s),m=[],y=[],v=[],b=0,_=a;b<_.length;b+=1){var x=_[b];if(0!==x.length){x!==a[0]&&y.push(m.length/2);for(var w=0,E=0;E<x.length;E++){var S=x[E];if(i(e.layoutVertexArray,S.x,S.y,0,0,1,1,0),v.push(g.vertexLength++),E>=1){var M=x[E-1];if(!r(S,M)){var T=S.sub(M)._perp()._unit();i(e.layoutVertexArray,S.x,S.y,T.x,T.y,0,0,w),i(e.layoutVertexArray,S.x,S.y,T.x,T.y,0,1,w),w+=M.dist(S),i(e.layoutVertexArray,M.x,M.y,T.x,T.y,0,0,w),i(e.layoutVertexArray,M.x,M.y,T.x,T.y,0,1,w);var C=g.vertexLength;e.elementArray.emplaceBack(C,C+1,C+2),e.elementArray.emplaceBack(C+1,C+2,C+3),g.vertexLength+=4,g.primitiveLength+=2}}m.push(S.x),m.push(S.y)}}}for(var I=c(m,y),N=0;N<I.length;N+=3)e.elementArray.emplaceBack(v[I[N]],v[I[N+1]],v[I[N+2]]);g.primitiveLength+=I.length/3}e.populatePaintArrays(t.properties)},e}(o);e.exports=g},{"../../util/classify_rings":115,"../bucket":2,"../element_array_type":10,"../extent":11,"../load_geometry":13,"../vertex_array_type":17,earcut:143}],6:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,a){t.emplaceBack(e.x<<1|i,e.y<<1|r,Math.round(l*n.x)+128,Math.round(l*n.y)+128,(0===o?0:o<0?-1:1)+1|(a*p&63)<<2,a*p>>6)}var r=t("../bucket"),o=t("../vertex_array_type"),a=t("../element_array_type"),s=t("../load_geometry"),u=t("../extent"),l=63,c=Math.cos(37.5*(Math.PI/180)),h=15,f=15,p=.5,d=Math.pow(2,f-1)/p,g={layoutVertexArrayType:o([{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}]),paintAttributes:[{property:"line-color",type:"Uint8"},{property:"line-blur",multiplier:10,type:"Uint8"},{property:"line-opacity",multiplier:10,type:"Uint8"},{property:"line-gap-width",multiplier:10,type:"Uint8",name:"a_gapwidth"},{property:"line-offset",multiplier:1,type:"Int8"}],elementArrayType:a()},m=function(t){function e(e){t.call(this,e,g)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this,n=this.layers[0].layout,i=n["line-join"],r=n["line-cap"],o=n["line-miter-limit"],a=n["line-round-limit"],u=0,l=s(t,f);u<l.length;u+=1){var c=l[u];e.addLine(c,t.properties,i,r,o,a)}},e.prototype.addLine=function(t,e,n,i,r,o){for(var a=this,s=t.length;s>2&&t[s-1].equals(t[s-2]);)s--;if(!(t.length<2)){"bevel"===n&&(r=1.05);var l=h*(u/(512*this.overscaling)),f=t[0],p=t[s-1],d=f.equals(p),g=this.arrays,m=g.prepareSegment(10*s);if(2!==s||!d){this.distance=0;var y,v,b,_,x,w,E,S=i,M=d?"butt":i,T=!0;this.e1=this.e2=this.e3=-1,d&&(y=t[s-2],x=f.sub(y)._unit()._perp());for(var C=0;C<s;C++)if(b=d&&C===s-1?t[1]:t[C+1],!b||!t[C].equals(b)){x&&(_=x),y&&(v=y),y=t[C],x=b?b.sub(y)._unit()._perp():_,_=_||x;var I=_.add(x);0===I.x&&0===I.y||I._unit();var N=I.x*x.x+I.y*x.y,P=0!==N?1/N:1/0,L=N<c&&v&&b;if(L&&C>0){var A=y.dist(v);if(A>2*l){var k=y.sub(y.sub(v)._mult(l/A)._round());a.distance+=k.dist(v),a.addCurrentVertex(k,a.distance,_.mult(1),0,0,!1,m),v=k}}var R=v&&b,O=R?n:b?S:M;if(R&&"round"===O&&(P<o?O="miter":P<=2&&(O="fakeround")),"miter"===O&&P>r&&(O="bevel"),"bevel"===O&&(P>2&&(O="flipbevel"),P<r&&(O="miter")),v&&(a.distance+=y.dist(v)),"miter"===O)I._mult(P),a.addCurrentVertex(y,a.distance,I,0,0,!1,m);else if("flipbevel"===O){if(P>100)I=x.clone().mult(-1);else{var D=_.x*x.y-_.y*x.x>0?-1:1,F=P*_.add(x).mag()/_.sub(x).mag();I._perp()._mult(F*D)}a.addCurrentVertex(y,a.distance,I,0,0,!1,m),a.addCurrentVertex(y,a.distance,I.mult(-1),0,0,!1,m)}else if("bevel"===O||"fakeround"===O){var z=_.x*x.y-_.y*x.x>0,j=-Math.sqrt(P*P-1);if(z?(E=0,w=j):(w=0,E=j),T||a.addCurrentVertex(y,a.distance,_,w,E,!1,m),"fakeround"===O){for(var B,G=Math.floor(8*(.5-(N-.5))),U=0;U<G;U++)B=x.mult((U+1)/(G+1))._add(_)._unit(),a.addPieSliceVertex(y,a.distance,B,z,m);a.addPieSliceVertex(y,a.distance,I,z,m);for(var V=G-1;V>=0;V--)B=_.mult((V+1)/(G+1))._add(x)._unit(),a.addPieSliceVertex(y,a.distance,B,z,m)}b&&a.addCurrentVertex(y,a.distance,x,-w,-E,!1,m)}else"butt"===O?(T||a.addCurrentVertex(y,a.distance,_,0,0,!1,m),b&&a.addCurrentVertex(y,a.distance,x,0,0,!1,m)):"square"===O?(T||(a.addCurrentVertex(y,a.distance,_,1,1,!1,m),a.e1=a.e2=-1),b&&a.addCurrentVertex(y,a.distance,x,-1,-1,!1,m)):"round"===O&&(T||(a.addCurrentVertex(y,a.distance,_,0,0,!1,m),a.addCurrentVertex(y,a.distance,_,1,1,!0,m),a.e1=a.e2=-1),b&&(a.addCurrentVertex(y,a.distance,x,-1,-1,!0,m),a.addCurrentVertex(y,a.distance,x,0,0,!1,m)));if(L&&C<s-1){var K=y.dist(b);if(K>2*l){var H=y.add(b.sub(y)._mult(l/K)._round());a.distance+=H.dist(y),a.addCurrentVertex(H,a.distance,x.mult(1),0,0,!1,m),y=H}}T=!1}g.populatePaintArrays(e)}}},e.prototype.addCurrentVertex=function(t,e,n,r,o,a,s){var u,l=a?1:0,c=this.arrays,h=c.layoutVertexArray,f=c.elementArray;u=n.clone(),r&&u._sub(n.perp()._mult(r)),i(h,t,u,l,0,r,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(f.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),o&&u._sub(n.perp()._mult(o)),i(h,t,u,l,1,-o,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(f.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>d/2&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,r,o,a,s))},e.prototype.addPieSliceVertex=function(t,e,n,r,o){var a=r?1:0;n=n.mult(r?-1:1);var s=this.arrays,u=s.layoutVertexArray,l=s.elementArray;i(u,t,n,0,a,0,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(l.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},e}(r);e.exports=m},{"../bucket":2,"../element_array_type":10,"../extent":11,"../load_geometry":13,"../vertex_array_type":17}],7:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s,u,l,c){t.emplaceBack(e,n,Math.round(64*i),Math.round(64*r),o/4,a/4,10*(l||0),c,10*(s||0),10*Math.min(u||25,25))}function r(t,e,n,i,r){return t.emplaceBack(e.x,e.y,Math.round(n.x),Math.round(n.y),10*i,10*r)}var o=t("point-geometry"),a=t("../array_group"),s=t("../buffer_group"),u=t("../vertex_array_type"),l=t("../element_array_type"),c=t("../extent"),h=t("../../symbol/anchor"),f=t("../../symbol/get_anchors"),p=t("../../util/token"),d=t("../../symbol/quads"),g=t("../../symbol/shaping"),m=t("../../symbol/resolve_text"),y=t("../../symbol/mergelines"),v=t("../../symbol/clip_line"),b=t("../../util/util"),_=t("../../util/script_detection"),x=t("../load_geometry"),w=t("../../symbol/collision_feature"),E=t("../../util/find_pole_of_inaccessibility"),S=t("../../util/classify_rings"),M=t("vector-tile").VectorTileFeature,T=t("../../source/rtl_text_plugin"),C=g.shapeText,I=g.shapeIcon,N=g.WritingMode,P=d.getGlyphQuads,L=d.getIconQuads,A=l(),k=u([{name:"a_pos",components:2,type:"Int16"},{name:"a_offset",components:2,type:"Int16"},{name:"a_texture_pos",components:2,type:"Uint16"},{name:"a_data",components:4,type:"Uint8"}]),R={glyph:{layoutVertexArrayType:k,elementArrayType:A},icon:{layoutVertexArrayType:k,elementArrayType:A},collisionBox:{layoutVertexArrayType:u([{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}]),elementArrayType:l(2)}},O=function(t){var e=this;if(this.collisionBoxArray=t.collisionBoxArray,this.symbolQuadsArray=t.symbolQuadsArray,this.symbolInstancesArray=t.symbolInstancesArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.sdfIcons=t.sdfIcons,this.iconsNeedLinear=t.iconsNeedLinear,this.adjustedTextSize=t.adjustedTextSize,this.adjustedIconSize=t.adjustedIconSize,this.fontstack=t.fontstack,t.arrays){this.buffers={};for(var n in t.arrays)t.arrays[n]&&(e.buffers[n]=new s(R[n],t.layers,t.zoom,t.arrays[n]))}};O.prototype.populate=function(t,e){var n=this,i=this.layers[0].layout,r=i["text-field"],o=i["text-font"],a=i["icon-image"],s=r&&o,u=a;if(this.features=[],s||u){for(var l=e.iconDependencies,c=e.glyphDependencies,h=c[o]=c[o]||{},f=0;f<t.length;f++){var d=t[f];if(n.layers[0].filter(d)){var g;s&&(g=T.applyArabicShaping?T.applyArabicShaping(m(d,i)):m(d,i));var v;if(u&&(v=p(d.properties,a)),(g||v)&&(n.features.push({text:g,icon:v,index:f,sourceLayerIndex:d.sourceLayerIndex,geometry:x(d),properties:d.properties,type:M.types[d.type]}),v&&(l[v]=!0),g))for(var b=0;b<g.length;b++)h[g.charCodeAt(b)]=!0}}"line"===i["symbol-placement"]&&(this.features=y(this.features))}},O.prototype.isEmpty=function(){return this.arrays.icon.isEmpty()&&this.arrays.glyph.isEmpty()&&this.arrays.collisionBox.isEmpty()},O.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map(function(t){return t.id}),sdfIcons:this.sdfIcons,iconsNeedLinear:this.iconsNeedLinear,adjustedTextSize:this.adjustedTextSize,adjustedIconSize:this.adjustedIconSize,fontstack:this.fontstack,arrays:b.mapObject(this.arrays,function(e){return e.isEmpty()?null:e.serialize(t)})}},O.prototype.destroy=function(){this.buffers&&(this.buffers.icon&&this.buffers.icon.destroy(),this.buffers.glyph&&this.buffers.glyph.destroy(),this.buffers.collisionBox&&this.buffers.collisionBox.destroy(),this.buffers=null)},O.prototype.createArrays=function(){var t=this;this.arrays=b.mapObject(R,function(e){return new a(e,t.layers,t.zoom)})},O.prototype.prepare=function(t,e){var n=this;this.createArrays(),this.adjustedTextMaxSize=this.layers[0].getLayoutValue("text-size",{zoom:18}),this.adjustedTextSize=this.layers[0].getLayoutValue("text-size",{zoom:this.zoom+1}),this.adjustedIconMaxSize=this.layers[0].getLayoutValue("icon-size",{zoom:18}),this.adjustedIconSize=this.layers[0].getLayoutValue("icon-size",{zoom:this.zoom+1});var i=512*this.overscaling;this.tilePixelRatio=c/i,this.compareText={},this.iconsNeedLinear=!1,this.symbolInstancesStartIndex=this.symbolInstancesArray.length;var r=this.layers[0].layout,o=.5,a=.5;switch(r["text-anchor"]){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(r["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}for(var s="right"===r["text-justify"]?1:"left"===r["text-justify"]?0:.5,u=24,l=r["text-line-height"]*u,h="line"!==r["symbol-placement"]?r["text-max-width"]*u:0,f=r["text-letter-spacing"]*u,p=[r["text-offset"][0]*u,r["text-offset"][1]*u],d=this.fontstack=r["text-font"].join(","),g="map"===r["text-rotation-alignment"]&&"line"===r["symbol-placement"],m=0,y=this.features;m<y.length;m+=1){var v,x=y[m];if(x.text){var w=_.allowsVerticalWritingMode(x.text);v={},v[N.horizontal]=C(x.text,t[d],h,l,o,a,s,f,p,u,N.horizontal),v[N.vertical]=w&&g&&C(x.text,t[d],h,l,o,a,s,f,p,u,N.vertical)}else v={};var E;if(x.icon){var S=e[x.icon],M=n.layers[0].getLayoutValue("icon-offset",{zoom:n.zoom},x.properties);E=I(S,M),S&&(void 0===n.sdfIcons?n.sdfIcons=S.sdf:n.sdfIcons!==S.sdf&&b.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==S.pixelRatio?n.iconsNeedLinear=!0:0===r["icon-rotate"]&&n.layers[0].isLayoutValueFeatureConstant("icon-rotate")||(n.iconsNeedLinear=!0))}(v[N.horizontal]||E)&&n.addFeature(x,v,E)}this.symbolInstancesEndIndex=this.symbolInstancesArray.length},O.prototype.addFeature=function(t,e,n){var i=this,r=this.layers[0].layout,o=24,a=this.adjustedTextSize/o,s=void 0!==this.adjustedTextMaxSize?this.adjustedTextMaxSize:this.adjustedTextSize,u=this.tilePixelRatio*a,l=this.tilePixelRatio*s/o,p=this.tilePixelRatio*this.adjustedIconSize,d=this.tilePixelRatio*r["symbol-spacing"],g=r["symbol-avoid-edges"],m=r["text-padding"]*this.tilePixelRatio,y=r["icon-padding"]*this.tilePixelRatio,b=r["text-max-angle"]/180*Math.PI,_="map"===r["text-rotation-alignment"]&&"line"===r["symbol-placement"],x="map"===r["icon-rotation-alignment"]&&"line"===r["symbol-placement"],w=r["text-allow-overlap"]||r["icon-allow-overlap"]||r["text-ignore-placement"]||r["icon-ignore-placement"],M=r["symbol-placement"],T=d/2,C=function(r,o){var a=!(o.x<0||o.x>c||o.y<0||o.y>c);if(!g||a){var s=a||w;i.addSymbolInstance(o,r,e,n,i.layers[0],s,i.symbolInstancesArray.length,i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,u,m,_,p,y,x,{zoom:i.zoom},t.properties)}};if("line"===M)for(var I=0,P=v(t.geometry,0,0,c,c);I<P.length;I+=1)for(var L=P[I],A=f(L,d,b,e[N.vertical]||e[N.horizontal],n,o,l,i.overscaling,c),k=0,R=A;k<R.length;k+=1){var O=R[k],D=e[N.horizontal];D&&i.anchorIsTooClose(D.text,T,O)||C(L,O)}else if("Polygon"===t.type)for(var F=0,z=S(t.geometry,0);F<z.length;F+=1){var j=z[F],B=E(j,16);C(j[0],new h(B.x,B.y,0))}else if("LineString"===t.type)for(var G=0,U=t.geometry;G<U.length;G+=1){var V=U[G];C(V,new h(V[0].x,V[0].y,0))}else if("Point"===t.type)for(var K=0,H=t.geometry;K<H.length;K+=1)for(var q=H[K],X=0,W=q;X<W.length;X+=1){var Y=W[X];C([Y],new h(Y.x,Y.y,0))}},O.prototype.anchorIsTooClose=function(t,e,n){var i=this.compareText;if(t in i){for(var r=i[t],o=r.length-1;o>=0;o--)if(n.dist(r[o])<e)return!0}else i[t]=[];return i[t].push(n),!1},O.prototype.place=function(t,e){var n=this;this.createArrays();var i=this.layers[0].layout,r=t.maxScale,o="map"===i["text-rotation-alignment"]&&"line"===i["symbol-placement"],a="map"===i["icon-rotation-alignment"]&&"line"===i["symbol-placement"],s=i["text-allow-overlap"]||i["icon-allow-overlap"]||i["text-ignore-placement"]||i["icon-ignore-placement"];if(s){var u=this.symbolInstancesArray.toArray(this.symbolInstancesStartIndex,this.symbolInstancesEndIndex),l=t.angle,c=Math.sin(l),h=Math.cos(l);this.sortedSymbolInstances=u.sort(function(t,e){var n=c*t.anchorPointX+h*t.anchorPointY|0,i=c*e.anchorPointX+h*e.anchorPointY|0;return n-i||e.index-t.index})}for(var f=this.symbolInstancesStartIndex;f<this.symbolInstancesEndIndex;f++){var p=n.sortedSymbolInstances?n.sortedSymbolInstances[f-n.symbolInstancesStartIndex]:n.symbolInstancesArray.get(f),d={boxStartIndex:p.textBoxStartIndex,boxEndIndex:p.textBoxEndIndex},g={boxStartIndex:p.iconBoxStartIndex,boxEndIndex:p.iconBoxEndIndex},m=!(p.textBoxStartIndex===p.textBoxEndIndex),y=!(p.iconBoxStartIndex===p.iconBoxEndIndex),v=i["text-optional"]||!m,b=i["icon-optional"]||!y,_=m?t.placeCollisionFeature(d,i["text-allow-overlap"],i["symbol-avoid-edges"]):t.minScale,x=y?t.placeCollisionFeature(g,i["icon-allow-overlap"],i["symbol-avoid-edges"]):t.minScale;v||b?!b&&_?_=Math.max(x,_):!v&&x&&(x=Math.max(x,_)):x=_=Math.max(x,_),m&&(t.insertCollisionFeature(d,_,i["text-ignore-placement"]),_<=r&&n.addSymbols(n.arrays.glyph,p.glyphQuadStartIndex,p.glyphQuadEndIndex,_,i["text-keep-upright"],o,t.angle,p.writingModes)),y&&(t.insertCollisionFeature(g,x,i["icon-ignore-placement"]),x<=r&&n.addSymbols(n.arrays.icon,p.iconQuadStartIndex,p.iconQuadEndIndex,x,i["icon-keep-upright"],a,t.angle))}e&&this.addToDebugBuffers(t)},O.prototype.addSymbols=function(t,e,n,r,o,a,s,u){for(var l=this,c=t.elementArray,h=t.layoutVertexArray,f=this.zoom,p=Math.max(Math.log(r)/Math.LN2+f,0),d=e;d<n;d++){var g=l.symbolQuadsArray.get(d).SymbolQuad,m=(g.anchorAngle+s+Math.PI)%(2*Math.PI);if(u&N.vertical){if(a&&g.writingMode===N.vertical){if(o&&a&&m<=5*Math.PI/4||m>7*Math.PI/4)continue}else if(o&&a&&m<=3*Math.PI/4||m>5*Math.PI/4)continue}else if(o&&a&&(m<=Math.PI/2||m>3*Math.PI/2))continue;var y=g.tl,v=g.tr,b=g.bl,_=g.br,x=g.tex,w=g.anchorPoint,E=Math.max(f+Math.log(g.minScale)/Math.LN2,p),S=Math.min(f+Math.log(g.maxScale)/Math.LN2,25);if(!(S<=E)){E===p&&(E=0);var M=Math.round(g.glyphAngle/(2*Math.PI)*256),T=t.prepareSegment(4),C=T.vertexLength;i(h,w.x,w.y,y.x,y.y,x.x,x.y,E,S,p,M),i(h,w.x,w.y,v.x,v.y,x.x+x.w,x.y,E,S,p,M),i(h,w.x,w.y,b.x,b.y,x.x,x.y+x.h,E,S,p,M),i(h,w.x,w.y,_.x,_.y,x.x+x.w,x.y+x.h,E,S,p,M),c.emplaceBack(C,C+1,C+2),c.emplaceBack(C+1,C+2,C+3),T.vertexLength+=4,T.primitiveLength+=2}}},O.prototype.addToDebugBuffers=function(t){for(var e=this,n=this.arrays.collisionBox,i=n.layoutVertexArray,a=n.elementArray,s=-t.angle,u=t.yStretch,l=this.symbolInstancesStartIndex;l<this.symbolInstancesEndIndex;l++){var c=e.symbolInstancesArray.get(l);c.textCollisionFeature={boxStartIndex:c.textBoxStartIndex,boxEndIndex:c.textBoxEndIndex},c.iconCollisionFeature={boxStartIndex:c.iconBoxStartIndex,boxEndIndex:c.iconBoxEndIndex};for(var h=0;h<2;h++){var f=c[0===h?"textCollisionFeature":"iconCollisionFeature"];if(f)for(var p=f.boxStartIndex;p<f.boxEndIndex;p++){var d=e.collisionBoxArray.get(p),g=d.anchorPoint,m=new o(d.x1,d.y1*u)._rotate(s),y=new o(d.x2,d.y1*u)._rotate(s),v=new o(d.x1,d.y2*u)._rotate(s),b=new o(d.x2,d.y2*u)._rotate(s),_=Math.max(0,Math.min(25,e.zoom+Math.log(d.maxScale)/Math.LN2)),x=Math.max(0,Math.min(25,e.zoom+Math.log(d.placementScale)/Math.LN2)),w=n.prepareSegment(4),E=w.vertexLength;r(i,g,m,_,x),r(i,g,y,_,x),r(i,g,b,_,x),r(i,g,v,_,x),a.emplaceBack(E,E+1),a.emplaceBack(E+1,E+2),a.emplaceBack(E+2,E+3),a.emplaceBack(E+3,E),w.vertexLength+=4,w.primitiveLength+=4}}}},O.prototype.addSymbolInstance=function(t,e,n,i,r,o,a,s,u,l,c,h,f,p,d,g,m,y,v){var _,x,E,S=this,M=[];for(var T in n){var C=parseInt(T,10);n[C]&&(M=M.concat(o?P(t,n[C],h,e,r,p,C):[]),_=new w(s,e,t,u,l,c,n[C],h,f,p,!1))}var I=this.symbolQuadsArray.length;if(M&&M.length)for(var A=0;A<M.length;A++)S.addSymbolQuad(M[A]);var k=this.symbolQuadsArray.length,R=_?_.boxStartIndex:this.collisionBoxArray.length,D=_?_.boxEndIndex:this.collisionBoxArray.length;i&&(E=o?L(t,i,d,e,r,m,n[N.horizontal],y,v):[],x=new w(s,e,t,u,l,c,i,d,g,m,!0));var F=this.symbolQuadsArray.length;E&&1===E.length&&this.addSymbolQuad(E[0]);var z=this.symbolQuadsArray.length,j=x?x.boxStartIndex:this.collisionBoxArray.length,B=x?x.boxEndIndex:this.collisionBoxArray.length;z>O.MAX_QUADS&&b.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),k>O.MAX_QUADS&&b.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");var G=(n[N.vertical]?N.vertical:0)|(n[N.horizontal]?N.horizontal:0);return this.symbolInstancesArray.emplaceBack(R,D,j,B,I,k,F,z,t.x,t.y,a,G)},O.prototype.addSymbolQuad=function(t){return this.symbolQuadsArray.emplaceBack(t.anchorPoint.x,t.anchorPoint.y,t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y,t.tex.h,t.tex.w,t.tex.x,t.tex.y,t.anchorAngle,t.glyphAngle,t.maxScale,t.minScale,t.writingMode)},O.MAX_QUADS=65535,e.exports=O},{"../../source/rtl_text_plugin":51,"../../symbol/anchor":77,"../../symbol/clip_line":79,"../../symbol/collision_feature":81,"../../symbol/get_anchors":83,"../../symbol/mergelines":86,"../../symbol/quads":87,"../../symbol/resolve_text":88,"../../symbol/shaping":89,"../../util/classify_rings":115,"../../util/find_pole_of_inaccessibility":121,"../../util/script_detection":128,"../../util/token":130,"../../util/util":131,"../array_group":1,"../buffer_group":9,"../element_array_type":10,"../extent":11,"../load_geometry":13,"../vertex_array_type":17,"point-geometry":200,"vector-tile":209}],8:[function(t,e,n){"use strict";var i={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT"},r=function(t,e,n){this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.attributes=e.members,this.itemSize=e.bytesPerElement,this.type=n,this.arrayType=e};r.fromStructArray=function(t,e){return new r(t.serialize(),t.constructor.serialize(),e)},r.prototype.bind=function(t){var e=t[this.type];this.buffer?t.bindBuffer(e,this.buffer):(this.gl=t,this.buffer=t.createBuffer(),t.bindBuffer(e,this.buffer),t.bufferData(e,this.arrayBuffer,t.STATIC_DRAW),this.arrayBuffer=null)},r.prototype.setVertexAttribPointers=function(t,e,n){for(var r=this,o=0;o<this.attributes.length;o++){var a=r.attributes[o],s=e[a.name];void 0!==s&&t.vertexAttribPointer(s,a.components,t[i[a.type]],!1,r.arrayType.bytesPerElement,a.offset+(r.arrayType.bytesPerElement*n||0))}},r.prototype.destroy=function(){this.buffer&&this.gl.deleteBuffer(this.buffer)},r.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"},e.exports=r},{}],9:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("./buffer"),o=t("./program_configuration"),a=t("../render/vertex_array_object"),s=function(t,e,n,s){var u=this;this.layoutVertexBuffer=new r(s.layoutVertexArray,t.layoutVertexArrayType.serialize(),r.BufferType.VERTEX),s.elementArray&&(this.elementBuffer=new r(s.elementArray,t.elementArrayType.serialize(),r.BufferType.ELEMENT)),s.elementArray2&&(this.elementBuffer2=new r(s.elementArray2,t.elementArrayType2.serialize(),r.BufferType.ELEMENT)),this.layerData={};for(var l=0,c=e;l<c.length;l+=1){var h=c[l],f=s.paintVertexArrays&&s.paintVertexArrays[h.id],p=o.createDynamic(t.paintAttributes||[],h,n),d=f?new r(f.array,f.type,r.BufferType.VERTEX):null;u.layerData[h.id]={programConfiguration:p,paintVertexBuffer:d}}this.segments=s.segments,this.segments2=s.segments2;for(var g=0,m=[this.segments,this.segments2];g<m.length;g+=1)for(var y=m[g],v=0,b=y||[];v<b.length;v+=1){var _=b[v];_.vaos=i.mapObject(u.layerData,function(){return new a})}};s.prototype.destroy=function(){var t=this;this.layoutVertexBuffer.destroy(),this.elementBuffer&&this.elementBuffer.destroy(),this.elementBuffer2&&this.elementBuffer2.destroy();for(var e in this.layerData){var n=t.layerData[e].paintVertexBuffer;n&&n.destroy()}for(var i=0,r=[this.segments,this.segments2];i<r.length;i+=1)for(var o=r[i],a=0,s=o||[];a<s.length;a+=1){var u=s[a];for(var l in u.vaos)u.vaos[l].destroy()}},e.exports=s},{"../render/vertex_array_object":39,"../util/util":131,"./buffer":8,"./program_configuration":15}],10:[function(t,e,n){"use strict";function i(t){return r({members:[{type:"Uint16",name:"vertices",components:t||3}]})}var r=t("../util/struct_array");e.exports=i},{"../util/struct_array":129}],11:[function(t,e,n){"use strict";e.exports=8192},{}],12:[function(t,e,n){"use strict";function i(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function r(t,e){return e-t}function o(t){return t["line-gap-width"]>0?t["line-gap-width"]+2*t["line-width"]:t["line-width"]}function a(t,e,n,i,r){if(!e[0]&&!e[1])return t;e=u.convert(e),"viewport"===n&&e._rotate(-i);for(var o=[],a=0;a<t.length;a++){for(var s=t[a],l=[],c=0;c<s.length;c++)l.push(s[c].sub(e._mult(r)));o.push(l)}return o}function s(t,e){for(var n=[],i=new u(0,0),r=0;r<t.length;r++){for(var o=t[r],a=[],s=0;s<o.length;s++){var l=o[s-1],c=o[s],h=o[s+1],f=0===s?i:c.sub(l)._unit()._perp(),p=s===o.length-1?i:h.sub(c)._unit()._perp(),d=f._add(p)._unit(),g=d.x*p.x+d.y*p.y;d._mult(1/g),a.push(d._mult(e)._add(c))}n.push(a)}return n}var u=t("point-geometry"),l=t("./load_geometry"),c=t("./extent"),h=t("feature-filter"),f=t("../util/struct_array"),p=t("grid-index"),d=t("../util/dictionary_coder"),g=t("vector-tile"),m=t("pbf"),y=t("../util/vectortile_to_geojson"),v=t("../util/util").arraysIntersect,b=t("../util/intersection_tests"),_=b.multiPolygonIntersectsBufferedMultiPoint,x=b.multiPolygonIntersectsMultiPolygon,w=b.multiPolygonIntersectsBufferedMultiLine,E=f({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]}),S=function(t,e,n){if(t.grid){var i=t,r=e;t=i.coord,e=i.overscaling,this.grid=new p(i.grid),this.featureIndexArray=new E(i.featureIndexArray),this.rawTileData=r,this.bucketLayerIDs=i.bucketLayerIDs}else this.grid=new p(c,16,0),this.featureIndexArray=new E;this.coord=t,this.overscaling=e,this.x=t.x,this.y=t.y,this.z=t.z-Math.log(e)/Math.LN2,this.setCollisionTile(n)};S.prototype.insert=function(t,e){var n=this,i=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(t.index,t.sourceLayerIndex,e);for(var r=l(t),o=0;o<r.length;o++){for(var a=r[o],s=[1/0,1/0,-(1/0),-(1/0)],u=0;u<a.length;u++){var c=a[u];s[0]=Math.min(s[0],c.x),s[1]=Math.min(s[1],c.y),s[2]=Math.max(s[2],c.x),s[3]=Math.max(s[3],c.y)}n.grid.insert(i,s[0],s[1],s[2],s[3])}},S.prototype.setCollisionTile=function(t){this.collisionTile=t},S.prototype.serialize=function(t){var e=this.grid.toArrayBuffer();return t&&t.push(e),{coord:this.coord,overscaling:this.overscaling,grid:e,featureIndexArray:this.featureIndexArray.serialize(t),bucketLayerIDs:this.bucketLayerIDs}},S.prototype.query=function(t,e){this.vtLayers||(this.vtLayers=new g.VectorTile(new m(this.rawTileData)).layers,this.sourceLayerCoder=new d(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));var n={},a=t.params||{},s=c/t.tileSize/t.scale,l=h(a.filter),f=0;for(var p in e){var y=e[p],v=y.paint,b=0;"line"===y.type?b=o(v)/2+Math.abs(v["line-offset"])+i(v["line-translate"]):"fill"===y.type?b=i(v["fill-translate"]):"fill-extrusion"===y.type?b=i(v["fill-extrusion-translate"]):"circle"===y.type&&(b=v["circle-radius"]+i(v["circle-translate"])),f=Math.max(f,b*s)}for(var _=t.queryGeometry.map(function(t){return t.map(function(t){return new u(t.x,t.y)})}),x=1/0,w=1/0,E=-(1/0),S=-(1/0),M=0;M<_.length;M++)for(var T=_[M],C=0;C<T.length;C++){var I=T[C];x=Math.min(x,I.x),w=Math.min(w,I.y),E=Math.max(E,I.x),S=Math.max(S,I.y)}var N=this.grid.query(x-f,w-f,E+f,S+f);N.sort(r),this.filterMatching(n,N,this.featureIndexArray,_,l,a.layers,e,t.bearing,s);var P=this.collisionTile.queryRenderedSymbols(_,t.scale);return P.sort(),this.filterMatching(n,P,this.collisionTile.collisionBoxArray,_,l,a.layers,e,t.bearing,s),n},S.prototype.filterMatching=function(t,e,n,i,r,u,c,h,f){for(var p,d=this,g=0;g<e.length;g++){var m=e[g];if(m!==p){p=m;var b=n.get(m),E=d.bucketLayerIDs[b.bucketIndex];if(!u||v(u,E)){var S=d.sourceLayerCoder.decode(b.sourceLayerIndex),M=d.vtLayers[S],T=M.feature(b.featureIndex);if(r(T))for(var C=null,I=0;I<E.length;I++){
var N=E[I];if(!(u&&u.indexOf(N)<0)){var P=c[N];if(P){var L;if("symbol"!==P.type){C||(C=l(T));var A=P.paint;if("line"===P.type){L=a(i,A["line-translate"],A["line-translate-anchor"],h,f);var k=o(A)/2*f;if(A["line-offset"]&&(C=s(C,A["line-offset"]*f)),!w(L,C,k))continue}else if("fill"===P.type||"fill-extrusion"===P.type){var R=P.type;if(L=a(i,A[R+"-translate"],A[R+"-translate-anchor"],h,f),!x(L,C))continue}else if("circle"===P.type){L=a(i,A["circle-translate"],A["circle-translate-anchor"],h,f);var O=A["circle-radius"]*f;if(!_(L,C,O))continue}}var D=new y(T,d.z,d.x,d.y);D.layer=P.serialize();var F=t[N];void 0===F&&(F=t[N]=[]),F.push(D)}}}}}}},e.exports=S},{"../util/dictionary_coder":117,"../util/intersection_tests":124,"../util/struct_array":129,"../util/util":131,"../util/vectortile_to_geojson":132,"./extent":11,"./load_geometry":13,"feature-filter":145,"grid-index":157,pbf:198,"point-geometry":200,"vector-tile":209}],13:[function(t,e,n){"use strict";function i(t){return{min:-1*Math.pow(2,t-1),max:Math.pow(2,t-1)-1}}var r=t("../util/util"),o=t("./extent"),a={15:i(15),16:i(16)};e.exports=function(t,e){for(var n=a[e||16],i=o/t.extent,s=t.loadGeometry(),u=0;u<s.length;u++)for(var l=s[u],c=0;c<l.length;c++){var h=l[c];h.x=Math.round(h.x*i),h.y=Math.round(h.y*i),(h.x<n.min||h.x>n.max||h.y<n.min||h.y>n.max)&&r.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return s}},{"../util/util":131,"./extent":11}],14:[function(t,e,n){"use strict";var i=t("../util/struct_array"),r=i({members:[{name:"a_pos",type:"Int16",components:2}]});e.exports=r},{"../util/struct_array":129}],15:[function(t,e,n){"use strict";function i(t,e,n,i){if(!t.zoomStops)return e.getPaintValue(t.property,n,i);var r=t.zoomStops.map(function(r){return e.getPaintValue(t.property,a.extend({},n,{zoom:r}),i)});return 1===r.length?r[0]:r}function r(t,e){var n=t.property.replace(e.type+"-","").replace(/-/g,"_"),i="color"===e._paintSpecifications[t.property].type;return a.extend({name:"a_"+n,components:i?4:1,multiplier:i?255:1},t)}var o=t("./vertex_array_type"),a=t("../util/util"),s=function(){this.attributes=[],this.uniforms=[],this.interpolationUniforms=[],this.pragmas={vertex:{},fragment:{}},this.cacheKey=""};s.createDynamic=function(t,e,n){for(var i=new s,a=0,u=t;a<u.length;a+=1){var l=u[a],c=r(l,e),h=c.name.slice(2);e.isPaintValueFeatureConstant(c.property)?i.addZoomAttribute(h,c):e.isPaintValueZoomConstant(c.property)?i.addPropertyAttribute(h,c):i.addZoomAndPropertyAttribute(h,c,e,n)}return i.PaintVertexArray=o(i.attributes),i},s.createStatic=function(t){for(var e=new s,n=0,i=t;n<i.length;n+=1){var r=i[n];e.addUniform(r,"u_"+r)}return e},s.prototype.addUniform=function(t,e){var n=this.getPragmas(t);n.define.push("uniform {precision} {type} "+e+";"),n.initialize.push("{precision} {type} "+t+" = "+e+";"),this.cacheKey+="/u_"+t},s.prototype.addZoomAttribute=function(t,e){this.uniforms.push(e),this.addUniform(t,e.name)},s.prototype.addPropertyAttribute=function(t,e){var n=this.getPragmas(t);this.attributes.push(e),n.define.push("varying {precision} {type} "+t+";"),n.vertex.define.push("attribute {precision} {type} "+e.name+";"),n.vertex.initialize.push(t+" = "+e.name+" / "+e.multiplier+".0;"),this.cacheKey+="/a_"+t},s.prototype.addZoomAndPropertyAttribute=function(t,e,n,i){var r=this,o=this.getPragmas(t);o.define.push("varying {precision} {type} "+t+";");for(var s=0,u=n.getPaintValueStopZoomLevels(e.property);s<u.length&&u[s]<i;)s++;var l=Math.max(0,Math.min(u.length-4,s-2)),c="u_"+t+"_t";o.vertex.define.push("uniform lowp float "+c+";"),this.interpolationUniforms.push({name:c,property:e.property,stopOffset:l});for(var h=[],f=0;f<4;f++)h.push(u[Math.min(l+f,u.length-1)]);var p=[];if(1===e.components)this.attributes.push(a.extend({},e,{components:4,zoomStops:h})),o.vertex.define.push("attribute {precision} vec4 "+e.name+";"),p.push(e.name);else for(var d=0;d<4;d++){var g=e.name+d;p.push(g),r.attributes.push(a.extend({},e,{name:g,zoomStops:[h[d]]})),o.vertex.define.push("attribute {precision} {type} "+g+";")}o.vertex.initialize.push(t+" = evaluate_zoom_function_"+e.components+"(            "+p.join(", ")+", "+c+") / "+e.multiplier+".0;"),this.cacheKey+="/z_"+t},s.prototype.getPragmas=function(t){return this.pragmas[t]||(this.pragmas[t]={define:[],initialize:[]},this.pragmas[t].fragment={define:[],initialize:[]},this.pragmas[t].vertex={define:[],initialize:[]}),this.pragmas[t]},s.prototype.applyPragmas=function(t,e){var n=this;return t.replace(/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,function(t,i,r,o,a){return n.pragmas[a][i].concat(n.pragmas[a][e][i]).join("\n").replace(/{type}/g,o).replace(/{precision}/g,r)})},s.prototype.populatePaintArray=function(t,e,n,r,o){var a=e.length;e.resize(n);for(var s=0,u=this.attributes;s<u.length;s+=1)for(var l=u[s],c=i(l,t,r,o),h=a;h<n;h++){var f=e.get(h);if(4===l.components)for(var p=0;p<4;p++)f[l.name+p]=c[p]*l.multiplier;else f[l.name]=c*l.multiplier}},s.prototype.setUniforms=function(t,e,n,i){for(var r=0,o=this.uniforms;r<o.length;r+=1){var a=o[r],s=n.getPaintValue(a.property,i);4===a.components?t.uniform4fv(e[a.name],s):t.uniform1f(e[a.name],s)}for(var u=0,l=this.interpolationUniforms;u<l.length;u+=1){var c=l[u],h=n.getPaintInterpolationT(c.property,i);t.uniform1f(e[c.name],Math.max(0,Math.min(4,h-c.stopOffset)))}},e.exports=s},{"../util/util":131,"./vertex_array_type":17}],16:[function(t,e,n){"use strict";var i=t("../util/struct_array"),r=i({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]});e.exports=r},{"../util/struct_array":129}],17:[function(t,e,n){"use strict";function i(t){return r({members:t,alignment:4})}var r=t("../util/struct_array");e.exports=i},{"../util/struct_array":129}],18:[function(t,e,n){"use strict";var i=function(t,e,n){this.column=t,this.row=e,this.zoom=n};i.prototype.clone=function(){return new i(this.column,this.row,this.zoom)},i.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},i.prototype.sub=function(t){return this.clone()._sub(t)},i.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},i.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this},e.exports=i},{}],19:[function(t,e,n){"use strict";var i=t("../util/util").wrap,r=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};r.prototype.wrap=function(){return new r(i(this.lng,-180,180),this.lat)},r.prototype.toArray=function(){return[this.lng,this.lat]},r.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},r.convert=function(t){if(t instanceof r)return t;if(t&&t.hasOwnProperty("lng")&&t.hasOwnProperty("lat"))return new r(t.lng,t.lat);if(Array.isArray(t)&&2===t.length)return new r(t[0],t[1]);throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},e.exports=r},{"../util/util":131}],20:[function(t,e,n){"use strict";var i=t("./lng_lat"),r=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};r.prototype.setNorthEast=function(t){return this._ne=i.convert(t),this},r.prototype.setSouthWest=function(t){return this._sw=i.convert(t),this},r.prototype.extend=function(t){var e,n,o=this._sw,a=this._ne;if(t instanceof i)e=t,n=t;else{if(!(t instanceof r))return Array.isArray(t)?t.every(Array.isArray)?this.extend(r.convert(t)):this.extend(i.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return o||a?(o.lng=Math.min(e.lng,o.lng),o.lat=Math.min(e.lat,o.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new i(e.lng,e.lat),this._ne=new i(n.lng,n.lat)),this},r.prototype.getCenter=function(){return new i((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},r.prototype.getSouthWest=function(){return this._sw},r.prototype.getNorthEast=function(){return this._ne},r.prototype.getNorthWest=function(){return new i(this.getWest(),this.getNorth())},r.prototype.getSouthEast=function(){return new i(this.getEast(),this.getSouth())},r.prototype.getWest=function(){return this._sw.lng},r.prototype.getSouth=function(){return this._sw.lat},r.prototype.getEast=function(){return this._ne.lng},r.prototype.getNorth=function(){return this._ne.lat},r.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},r.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},r.convert=function(t){return!t||t instanceof r?t:new r(t)},e.exports=r},{"./lng_lat":19}],21:[function(t,e,n){"use strict";var i=t("./lng_lat"),r=t("point-geometry"),o=t("./coordinate"),a=t("../util/util"),s=t("../util/interpolate"),u=t("../source/tile_coord"),l=t("../data/extent"),c=t("@mapbox/gl-matrix"),h=c.vec4,f=c.mat4,p=c.mat2,d=function(t,e,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new i(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0},g={minZoom:{},maxZoom:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};g.minZoom.get=function(){return this._minZoom},g.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},g.maxZoom.get=function(){return this._maxZoom},g.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},g.worldSize.get=function(){return this.tileSize*this.scale},g.centerPoint.get=function(){return this.size._div(2)},g.size.get=function(){return new r(this.width,this.height)},g.bearing.get=function(){return-this.angle/Math.PI*180},g.bearing.set=function(t){var e=-a.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=p.create(),p.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},g.pitch.get=function(){return this._pitch/Math.PI*180},g.pitch.set=function(t){var e=a.clamp(t,0,60)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},g.fov.get=function(){return this._fov/Math.PI*180},g.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},g.zoom.get=function(){return this._zoom},g.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},g.center.get=function(){return this._center},g.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},d.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},d.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),n=e;if(e<t.minzoom)return[];e>t.maxzoom&&(e=t.maxzoom);var i=this.pointCoordinate(this.centerPoint,e),o=new r(i.column-.5,i.row-.5),a=[this.pointCoordinate(new r(0,0),e),this.pointCoordinate(new r(this.width,0),e),this.pointCoordinate(new r(this.width,this.height),e),this.pointCoordinate(new r(0,this.height),e)];return u.cover(e,a,t.reparseOverscaled?n:e,this._renderWorldCopies).sort(function(t,e){return o.dist(t)-o.dist(e)})},d.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},g.unmodified.get=function(){return this._unmodified},d.prototype.zoomScale=function(t){return Math.pow(2,t)},d.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},d.prototype.project=function(t){return new r(this.lngX(t.lng),this.latY(t.lat))},d.prototype.unproject=function(t){return new i(this.xLng(t.x),this.yLat(t.y))},g.x.get=function(){return this.lngX(this.center.lng)},g.y.get=function(){return this.latY(this.center.lat)},g.point.get=function(){return new r(this.x,this.y)},d.prototype.lngX=function(t){return(180+t)*this.worldSize/360},d.prototype.latY=function(t){var e=180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360));return(180-e)*this.worldSize/360},d.prototype.xLng=function(t){return 360*t/this.worldSize-180},d.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},d.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n))},d.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},d.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},d.prototype.locationCoordinate=function(t){return new o(this.lngX(t.lng)/this.tileSize,this.latY(t.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},d.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new i(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},d.prototype.pointCoordinate=function(t,e){void 0===e&&(e=this.tileZoom);var n=0,i=[t.x,t.y,0,1],r=[t.x,t.y,1,1];h.transformMat4(i,i,this.pixelMatrixInverse),h.transformMat4(r,r,this.pixelMatrixInverse);var a=i[3],u=r[3],l=i[0]/a,c=r[0]/u,f=i[1]/a,p=r[1]/u,d=i[2]/a,g=r[2]/u,m=d===g?0:(n-d)/(g-d);return new o(s(l,c,m)/this.tileSize,s(f,p,m)/this.tileSize,this.zoom)._zoomTo(e)},d.prototype.coordinatePoint=function(t){var e=t.zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return h.transformMat4(n,n,this.pixelMatrix),new r(n[0]/n[3],n[1]/n[3])},d.prototype.calculatePosMatrix=function(t,e){var n=t.toCoordinate(e),i=this.worldSize/this.zoomScale(n.zoom),r=f.identity(new Float64Array(16));return f.translate(r,r,[n.column*i,n.row*i,0]),f.scale(r,r,[i/l,i/l,1]),f.multiply(r,this.projMatrix,r),new Float32Array(r)},d.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,n,i,o,a,s,u,l=this.size,c=this._unmodified;this.latRange&&(t=this.latY(this.latRange[1]),e=this.latY(this.latRange[0]),o=e-t<l.y?l.y/(e-t):0),this.lngRange&&(n=this.lngX(this.lngRange[0]),i=this.lngX(this.lngRange[1]),a=i-n<l.x?l.x/(i-n):0);var h=Math.max(a||0,o||0);if(h)return this.center=this.unproject(new r(a?(i+n)/2:this.x,o?(e+t)/2:this.y)),this.zoom+=this.scaleZoom(h),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var f=this.y,p=l.y/2;f-p<t&&(u=t+p),f+p>e&&(u=e-p)}if(this.lngRange){var d=this.x,g=l.x/2;d-g<n&&(s=n+g),d+g>i&&(s=i-g)}void 0===s&&void 0===u||(this.center=this.unproject(new r(void 0!==s?s:this.x,void 0!==u?u:this.y))),this._unmodified=c,this._constraining=!1}},d.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,n=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),i=Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance,r=1.01*i,o=new Float64Array(16);f.perspective(o,this._fov,this.width/this.height,1,r),f.scale(o,o,[1,-1,1]),f.translate(o,o,[0,0,-this.cameraToCenterDistance]),f.rotateX(o,o,this._pitch),f.rotateZ(o,o,this.angle),f.translate(o,o,[-this.x,-this.y,0]);var a=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));if(f.scale(o,o,[1,1,a,1]),this.projMatrix=o,o=f.create(),f.scale(o,o,[this.width/2,-this.height/2,1]),f.translate(o,o,[1,-1,0]),this.pixelMatrix=f.multiply(new Float64Array(16),o,this.projMatrix),o=f.invert(new Float64Array(16),this.pixelMatrix),!o)throw new Error("failed to invert matrix");this.pixelMatrixInverse=o}},Object.defineProperties(d.prototype,g),e.exports=d},{"../data/extent":11,"../source/tile_coord":55,"../util/interpolate":123,"../util/util":131,"./coordinate":18,"./lng_lat":19,"@mapbox/gl-matrix":135,"point-geometry":200}],22:[function(t,e,n){"use strict";var i,r=t("./util/worker_pool");e.exports=function(){return i||(i=new r),i}},{"./util/worker_pool":134}],23:[function(t,e,n){"use strict";var i={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};e.exports=function(t,e,n,r){r=r||1;var o,a,s,u,l,c,h,f,p=[];for(o=0,a=t.length;o<a;o++)if(l=i[t[o]]){for(f=null,s=0,u=l[1].length;s<u;s+=2)l[1][s]===-1&&l[1][s+1]===-1?f=null:(c=e+l[1][s]*r,h=n-l[1][s+1]*r,f&&p.push(f.x,f.y,c,h),f={x:c,y:h});e+=l[0]*r}return p}},{}],24:[function(t,e,n){"use strict";var i=t("./util/browser"),r=e.exports={};r.version=t("../package.json").version,r.workerCount=Math.max(Math.floor(i.hardwareConcurrency/2),1),r.Map=t("./ui/map"),r.NavigationControl=t("./ui/control/navigation_control"),r.GeolocateControl=t("./ui/control/geolocate_control"),r.AttributionControl=t("./ui/control/attribution_control"),r.ScaleControl=t("./ui/control/scale_control"),r.Popup=t("./ui/popup"),r.Marker=t("./ui/marker"),r.Style=t("./style/style"),r.LngLat=t("./geo/lng_lat"),r.LngLatBounds=t("./geo/lng_lat_bounds"),r.Point=t("point-geometry"),r.Evented=t("./util/evented"),r.util=t("./util/util"),r.supported=t("./util/browser").supported;var o=t("./util/ajax");r.util.getJSON=o.getJSON,r.util.getArrayBuffer=o.getArrayBuffer;var a=t("./util/config");r.config=a;var s=t("./source/rtl_text_plugin");r.setRTLTextPlugin=s.setRTLTextPlugin,Object.defineProperty(r,"accessToken",{get:function(){return a.ACCESS_TOKEN},set:function(t){a.ACCESS_TOKEN=t}})},{"../package.json":218,"./geo/lng_lat":19,"./geo/lng_lat_bounds":20,"./source/rtl_text_plugin":51,"./style/style":65,"./ui/control/attribution_control":95,"./ui/control/geolocate_control":96,"./ui/control/navigation_control":97,"./ui/control/scale_control":98,"./ui/map":107,"./ui/marker":108,"./ui/popup":109,"./util/ajax":111,"./util/browser":112,"./util/config":116,"./util/evented":120,"./util/util":131,"point-geometry":200}],25:[function(t,e,n){"use strict";function i(t,e,n){var i=t.gl,o=t.transform,a=o.tileSize,s=n.paint["background-color"],u=n.paint["background-pattern"],l=n.paint["background-opacity"],c=!u&&1===s[3]&&1===l;if(t.isOpaquePass===c){i.disable(i.STENCIL_TEST),t.setDepthSublayer(0);var h;u?(h=t.useProgram("fillPattern",t.basicFillProgramConfiguration),r.prepare(u,t,h),t.tileExtentPatternVAO.bind(i,h,t.tileExtentBuffer)):(h=t.useProgram("fill",t.basicFillProgramConfiguration),i.uniform4fv(h.u_color,s),t.tileExtentVAO.bind(i,h,t.tileExtentBuffer)),i.uniform1f(h.u_opacity,l);for(var f=o.coveringTiles({tileSize:a}),p=0,d=f;p<d.length;p+=1){var g=d[p];u&&r.setTile({coord:g,tileSize:a},t,h),i.uniformMatrix4fv(h.u_matrix,!1,t.transform.calculatePosMatrix(g)),i.drawArrays(i.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}var r=t("./pattern");e.exports=i},{"./pattern":37}],26:[function(t,e,n){"use strict";function i(t,e,n,i){if(!t.isOpaquePass){var o=t.gl;t.setDepthSublayer(0),t.depthMask(!1),o.disable(o.STENCIL_TEST);for(var a=0;a<i.length;a++){var s=i[a],u=e.getTile(s),l=u.getBucket(n);if(l){var c=l.buffers,h=c.layerData[n.id],f=h.programConfiguration,p=t.useProgram("circle",f);f.setUniforms(o,p,n,{zoom:t.transform.zoom}),"map"===n.paint["circle-pitch-scale"]?(o.uniform1i(p.u_scale_with_map,!0),o.uniform2f(p.u_extrude_scale,t.transform.pixelsToGLUnits[0]*t.transform.cameraToCenterDistance,t.transform.pixelsToGLUnits[1]*t.transform.cameraToCenterDistance)):(o.uniform1i(p.u_scale_with_map,!1),o.uniform2fv(p.u_extrude_scale,t.transform.pixelsToGLUnits)),o.uniform1f(p.u_devicepixelratio,r.devicePixelRatio),o.uniformMatrix4fv(p.u_matrix,!1,t.translatePosMatrix(s.posMatrix,u,n.paint["circle-translate"],n.paint["circle-translate-anchor"]));for(var d=0,g=c.segments;d<g.length;d+=1){var m=g[d];m.vaos[n.id].bind(o,p,c.layoutVertexBuffer,c.elementBuffer,h.paintVertexBuffer,m.vertexOffset),o.drawElements(o.TRIANGLES,3*m.primitiveLength,o.UNSIGNED_SHORT,3*m.primitiveOffset*2)}}}}}var r=t("../util/browser");e.exports=i},{"../util/browser":112}],27:[function(t,e,n){"use strict";function i(t,e,n,i){var r=t.gl;r.enable(r.STENCIL_TEST);for(var o=t.useProgram("collisionBox"),a=0;a<i.length;a++){var s=i[a],u=e.getTile(s),l=u.getBucket(n);if(l){var c=l.buffers.collisionBox;if(c){r.uniformMatrix4fv(o.u_matrix,!1,s.posMatrix),t.enableTileClippingMask(s),t.lineWidth(1),r.uniform1f(o.u_scale,Math.pow(2,t.transform.zoom-u.coord.z)),r.uniform1f(o.u_zoom,10*t.transform.zoom),r.uniform1f(o.u_maxzoom,10*(u.coord.z+1));for(var h=0,f=c.segments;h<f.length;h+=1){var p=f[h];p.vaos[n.id].bind(r,o,c.layoutVertexBuffer,c.elementBuffer,null,p.vertexOffset),r.drawElements(r.LINES,2*p.primitiveLength,r.UNSIGNED_SHORT,2*p.primitiveOffset*2)}}}}}e.exports=i},{}],28:[function(t,e,n){"use strict";function i(t,e,n){for(var i=0;i<n.length;i++)r(t,e,n[i])}function r(t,e,n){var i=t.gl;i.disable(i.STENCIL_TEST),t.lineWidth(1*a.devicePixelRatio);var r=n.posMatrix,f=t.useProgram("debug");i.uniformMatrix4fv(f.u_matrix,!1,r),i.uniform4f(f.u_color,1,0,0,1),t.debugVAO.bind(i,f,t.debugBuffer),i.drawArrays(i.LINE_STRIP,0,t.debugBuffer.length);for(var p=o(n.toString(),50,200,5),d=new h,g=0;g<p.length;g+=2)d.emplaceBack(p[g],p[g+1]);var m=l.fromStructArray(d,l.BufferType.VERTEX),y=new c;y.bind(i,f,m),i.uniform4f(f.u_color,1,1,1,1);for(var v=e.getTile(n).tileSize,b=u/(Math.pow(2,t.transform.zoom-n.z)*v),_=[[-1,-1],[-1,1],[1,-1],[1,1]],x=0;x<_.length;x++){var w=_[x];i.uniformMatrix4fv(f.u_matrix,!1,s.translate([],r,[b*w[0],b*w[1],0])),i.drawArrays(i.LINES,0,m.length)}i.uniform4f(f.u_color,0,0,0,1),i.uniformMatrix4fv(f.u_matrix,!1,r),i.drawArrays(i.LINES,0,m.length)}var o=t("../lib/debugtext"),a=t("../util/browser"),s=t("@mapbox/gl-matrix").mat4,u=t("../data/extent"),l=t("../data/buffer"),c=t("./vertex_array_object"),h=t("../data/pos_array");e.exports=i},{"../data/buffer":8,"../data/extent":11,"../data/pos_array":14,"../lib/debugtext":23,"../util/browser":112,"./vertex_array_object":39,"@mapbox/gl-matrix":135}],29:[function(t,e,n){"use strict";function i(t,e,n,i){var s=t.gl;s.enable(s.STENCIL_TEST);var u=!n.paint["fill-pattern"]&&n.isPaintValueFeatureConstant("fill-color")&&n.isPaintValueFeatureConstant("fill-opacity")&&1===n.paint["fill-color"][3]&&1===n.paint["fill-opacity"];t.isOpaquePass===u&&(t.setDepthSublayer(1),r(t,e,n,i,o)),!t.isOpaquePass&&n.paint["fill-antialias"]&&(t.lineWidth(2),t.depthMask(!1),t.setDepthSublayer(n.getPaintProperty("fill-outline-color")?2:0),r(t,e,n,i,a))}function r(t,e,n,i,r){for(var o=!0,a=0,s=i;a<s.length;a+=1){var u=s[a],l=e.getTile(u),c=l.getBucket(n);c&&(t.enableTileClippingMask(u),r(t,e,n,l,u,c.buffers,o),o=!1)}}function o(t,e,n,i,r,o,a){for(var u=t.gl,l=o.layerData[n.id],c=s("fill",n.paint["fill-pattern"],t,l,n,i,r,a),h=0,f=o.segments;h<f.length;h+=1){var p=f[h];p.vaos[n.id].bind(u,c,o.layoutVertexBuffer,o.elementBuffer,l.paintVertexBuffer,p.vertexOffset),u.drawElements(u.TRIANGLES,3*p.primitiveLength,u.UNSIGNED_SHORT,3*p.primitiveOffset*2)}}function a(t,e,n,i,r,o,a){var u=t.gl,l=o.layerData[n.id],c=n.paint["fill-pattern"]&&!n.getPaintProperty("fill-outline-color"),h=s("fillOutline",c,t,l,n,i,r,a);u.uniform2f(h.u_world,u.drawingBufferWidth,u.drawingBufferHeight);for(var f=0,p=o.segments2;f<p.length;f+=1){var d=p[f];d.vaos[n.id].bind(u,h,o.layoutVertexBuffer,o.elementBuffer2,l.paintVertexBuffer,d.vertexOffset),u.drawElements(u.LINES,2*d.primitiveLength,u.UNSIGNED_SHORT,2*d.primitiveOffset*2)}}function s(t,e,n,i,r,o,a,s){var l,c=n.currentProgram;return e?(l=n.useProgram(t+"Pattern",i.programConfiguration),(s||l!==c)&&(i.programConfiguration.setUniforms(n.gl,l,r,{zoom:n.transform.zoom}),u.prepare(r.paint["fill-pattern"],n,l)),u.setTile(o,n,l)):(l=n.useProgram(t,i.programConfiguration),(s||l!==c)&&i.programConfiguration.setUniforms(n.gl,l,r,{zoom:n.transform.zoom})),n.gl.uniformMatrix4fv(l.u_matrix,!1,n.translatePosMatrix(a.posMatrix,o,r.paint["fill-translate"],r.paint["fill-translate-anchor"])),l}var u=t("./pattern");e.exports=i},{"./pattern":37}],30:[function(t,e,n){"use strict";function i(t,e,n,i){if(0!==n.paint["fill-extrusion-opacity"]){var a=t.gl;a.disable(a.STENCIL_TEST),a.enable(a.DEPTH_TEST),t.depthMask(!0);var s=new r(a,t,n);s.bindFramebuffer(),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);for(var u=0;u<i.length;u++)o(t,e,n,i[u]);s.unbindFramebuffer(),s.renderToMap()}}function r(t,e,n){this.gl=t,this.width=e.width,this.height=e.height,this.painter=e,this.layer=n,this.texture=null,this.fbo=null,this.fbos=this.painter.preFbos[this.width]&&this.painter.preFbos[this.width][this.height]}function o(t,e,n,i){if(!t.isOpaquePass){var r=e.getTile(i),o=r.getBucket(n);if(o){var s=o.buffers,u=t.gl,l=n.paint["fill-extrusion-pattern"],c=s.layerData[n.id],f=c.programConfiguration,p=t.useProgram(l?"fillExtrusionPattern":"fillExtrusion",f);f.setUniforms(u,p,n,{
zoom:t.transform.zoom}),l&&(h.prepare(l,t,p),h.setTile(r,t,p),u.uniform1f(p.u_height_factor,-Math.pow(2,i.z)/r.tileSize/8)),t.gl.uniformMatrix4fv(p.u_matrix,!1,t.translatePosMatrix(i.posMatrix,r,n.paint["fill-extrusion-translate"],n.paint["fill-extrusion-translate-anchor"])),a(p,t);for(var d=0,g=s.segments;d<g.length;d+=1){var m=g[d];m.vaos[n.id].bind(u,p,s.layoutVertexBuffer,s.elementBuffer,c.paintVertexBuffer,m.vertexOffset),u.drawElements(u.TRIANGLES,3*m.primitiveLength,u.UNSIGNED_SHORT,3*m.primitiveOffset*2)}}}}function a(t,e){var n=e.gl,i=e.style.light,r=i.calculated.position,o=[r.x,r.y,r.z],a=f.create();"viewport"===i.calculated.anchor&&f.fromRotation(a,-e.transform.angle),d.transformMat3(o,o,a),n.uniform3fv(t.u_lightpos,o),n.uniform1f(t.u_lightintensity,i.calculated.intensity),n.uniform3fv(t.u_lightcolor,i.calculated.color.slice(0,3))}var s=t("@mapbox/gl-matrix"),u=t("../data/buffer"),l=t("./vertex_array_object"),c=t("../data/pos_array"),h=t("./pattern"),f=s.mat3,p=s.mat4,d=s.vec3;e.exports=i,r.prototype.bindFramebuffer=function(){var t=this.gl;if(this.texture=this.painter.getViewportTexture(this.width,this.height),t.activeTexture(t.TEXTURE1),this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),this.texture.width=this.width,this.texture.height=this.height),this.fbos)this.fbo=this.fbos.pop(),t.bindFramebuffer(t.FRAMEBUFFER,this.fbo),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0);else{this.fbo=t.createFramebuffer();var e=t.createRenderbuffer(),n=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,e),t.bindRenderbuffer(t.RENDERBUFFER,n),t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,this.width,this.height),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,this.fbo),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,e),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}},r.prototype.unbindFramebuffer=function(){this.painter.bindDefaultFramebuffer(),this.fbos?this.fbos.push(this.fbo):(this.painter.preFbos[this.width]||(this.painter.preFbos[this.width]={}),this.painter.preFbos[this.width][this.height]=[this.fbo]),this.painter.saveViewportTexture(this.texture)},r.prototype.renderToMap=function(){var t=this.gl,e=this.painter,n=e.useProgram("extrusionTexture");t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.texture),t.uniform1f(n.u_opacity,this.layer.paint["fill-extrusion-opacity"]),t.uniform1i(n.u_texture,1),t.uniformMatrix4fv(n.u_matrix,!1,p.ortho(p.create(),0,e.width,e.height,0,0,1)),t.disable(t.DEPTH_TEST),t.uniform1i(n.u_xdim,e.width),t.uniform1i(n.u_ydim,e.height);var i=new c;i.emplaceBack(0,0),i.emplaceBack(e.width,0),i.emplaceBack(0,e.height),i.emplaceBack(e.width,e.height);var r=u.fromStructArray(i,u.BufferType.VERTEX),o=new l;o.bind(t,n,r),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.enable(t.DEPTH_TEST)}},{"../data/buffer":8,"../data/pos_array":14,"./pattern":37,"./vertex_array_object":39,"@mapbox/gl-matrix":135}],31:[function(t,e,n){"use strict";function i(t,e,n,i,a,s,u,l,c){var h,f,p,d,g=e.gl,m=a.paint["line-dasharray"],y=a.paint["line-pattern"];if(l||c){var v=1/o(n,1,e.transform.tileZoom);if(m){h=e.lineAtlas.getDash(m.from,"round"===a.layout["line-cap"]),f=e.lineAtlas.getDash(m.to,"round"===a.layout["line-cap"]);var b=h.width*m.fromScale,_=f.width*m.toScale;g.uniform2f(t.u_patternscale_a,v/b,-h.height/2),g.uniform2f(t.u_patternscale_b,v/_,-f.height/2),g.uniform1f(t.u_sdfgamma,e.lineAtlas.width/(256*Math.min(b,_)*r.devicePixelRatio)/2)}else if(y){if(p=e.spriteAtlas.getPosition(y.from,!0),d=e.spriteAtlas.getPosition(y.to,!0),!p||!d)return;g.uniform2f(t.u_pattern_size_a,p.size[0]*y.fromScale/v,d.size[1]),g.uniform2f(t.u_pattern_size_b,d.size[0]*y.toScale/v,d.size[1])}g.uniform2f(t.u_gl_units_to_pixels,1/e.transform.pixelsToGLUnits[0],1/e.transform.pixelsToGLUnits[1])}l&&(m?(g.uniform1i(t.u_image,0),g.activeTexture(g.TEXTURE0),e.lineAtlas.bind(g),g.uniform1f(t.u_tex_y_a,h.y),g.uniform1f(t.u_tex_y_b,f.y),g.uniform1f(t.u_mix,m.t)):y&&(g.uniform1i(t.u_image,0),g.activeTexture(g.TEXTURE0),e.spriteAtlas.bind(g,!0),g.uniform2fv(t.u_pattern_tl_a,p.tl),g.uniform2fv(t.u_pattern_br_a,p.br),g.uniform2fv(t.u_pattern_tl_b,d.tl),g.uniform2fv(t.u_pattern_br_b,d.br),g.uniform1f(t.u_fade,y.t)),g.uniform1f(t.u_width,a.paint["line-width"])),e.enableTileClippingMask(s);var x=e.translatePosMatrix(s.posMatrix,n,a.paint["line-translate"],a.paint["line-translate-anchor"]);g.uniformMatrix4fv(t.u_matrix,!1,x),g.uniform1f(t.u_ratio,1/o(n,1,e.transform.zoom));for(var w=0,E=i.segments;w<E.length;w+=1){var S=E[w];S.vaos[a.id].bind(g,t,i.layoutVertexBuffer,i.elementBuffer,u.paintVertexBuffer,S.vertexOffset),g.drawElements(g.TRIANGLES,3*S.primitiveLength,g.UNSIGNED_SHORT,3*S.primitiveOffset*2)}}var r=t("../util/browser"),o=t("../source/pixels_to_tile_units");e.exports=function(t,e,n,r){if(!t.isOpaquePass){t.setDepthSublayer(0),t.depthMask(!1);var o=t.gl;if(o.enable(o.STENCIL_TEST),!(n.paint["line-width"]<=0))for(var a,s=n.paint["line-dasharray"]?"lineSDF":n.paint["line-pattern"]?"linePattern":"line",u=!0,l=0,c=r;l<c.length;l+=1){var h=c[l],f=e.getTile(h),p=f.getBucket(n);if(p){var d=p.buffers.layerData[n.id],g=t.currentProgram,m=t.useProgram(s,d.programConfiguration),y=u||m!==g,v=a!==f.coord.z;y&&d.programConfiguration.setUniforms(t.gl,m,n,{zoom:t.transform.zoom}),i(m,t,f,p.buffers,n,h,d,y,v),a=f.coord.z,u=!1}}}}},{"../source/pixels_to_tile_units":48,"../util/browser":112}],32:[function(t,e,n){"use strict";function i(t,e,n,i){if(!t.isOpaquePass){var o=t.gl;o.enable(o.DEPTH_TEST),t.depthMask(!0),o.depthFunc(o.LESS);for(var a=i.length&&i[0].z,s=0;s<i.length;s++){var u=i[s];t.setDepthSublayer(u.z-a),r(t,e,n,u)}o.depthFunc(o.LEQUAL)}}function r(t,e,n,i){var r=t.gl;r.disable(r.STENCIL_TEST);var l=e.getTile(i),c=t.transform.calculatePosMatrix(i,e.getSource().maxzoom);l.registerFadeDuration(t.style.animationLoop,n.paint["raster-fade-duration"]);var h=t.useProgram("raster");r.uniformMatrix4fv(h.u_matrix,!1,c),r.uniform1f(h.u_brightness_low,n.paint["raster-brightness-min"]),r.uniform1f(h.u_brightness_high,n.paint["raster-brightness-max"]),r.uniform1f(h.u_saturation_factor,s(n.paint["raster-saturation"])),r.uniform1f(h.u_contrast_factor,a(n.paint["raster-contrast"])),r.uniform3fv(h.u_spin_weights,o(n.paint["raster-hue-rotate"]));var f,p,d=l.sourceCache&&l.sourceCache.findLoadedParent(i,0,{}),g=u(l,d,n,t.transform);r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,l.texture),r.activeTexture(r.TEXTURE1),d?(r.bindTexture(r.TEXTURE_2D,d.texture),f=Math.pow(2,d.coord.z-l.coord.z),p=[l.coord.x*f%1,l.coord.y*f%1]):r.bindTexture(r.TEXTURE_2D,l.texture),r.uniform2fv(h.u_tl_parent,p||[0,0]),r.uniform1f(h.u_scale_parent,f||1),r.uniform1f(h.u_buffer_scale,1),r.uniform1f(h.u_fade_t,g.mix),r.uniform1f(h.u_opacity,g.opacity*n.paint["raster-opacity"]),r.uniform1i(h.u_image0,0),r.uniform1i(h.u_image1,1);var m=l.boundsBuffer||t.rasterBoundsBuffer,y=l.boundsVAO||t.rasterBoundsVAO;y.bind(r,h,m),r.drawArrays(r.TRIANGLE_STRIP,0,m.length)}function o(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}function a(t){return t>0?1/(1-t):1+t}function s(t){return t>0?1-1/(1.001-t):-t}function u(t,e,n,i){var r=n.paint["raster-fade-duration"];if(t.sourceCache&&r>0){var o=Date.now(),a=(o-t.timeAdded)/r,s=e?(o-e.timeAdded)/r:-1,u=t.sourceCache.getSource(),c=i.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!e||Math.abs(e.coord.z-c)>Math.abs(t.coord.z-c),f=l.clamp(h?a:1-s,0,1);return e?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var l=t("../util/util");e.exports=i},{"../util/util":131}],33:[function(t,e,n){"use strict";function i(t,e,n,i){if(!t.isOpaquePass){var o=!(n.layout["text-allow-overlap"]||n.layout["icon-allow-overlap"]||n.layout["text-ignore-placement"]||n.layout["icon-ignore-placement"]),a=t.gl;o?a.disable(a.STENCIL_TEST):a.enable(a.STENCIL_TEST),t.setDepthSublayer(0),t.depthMask(!1),r(t,e,n,i,!1,n.paint["icon-translate"],n.paint["icon-translate-anchor"],n.layout["icon-rotation-alignment"],n.layout["icon-rotation-alignment"],n.layout["icon-size"],n.paint["icon-halo-width"],n.paint["icon-halo-color"],n.paint["icon-halo-blur"],n.paint["icon-opacity"],n.paint["icon-color"]),r(t,e,n,i,!0,n.paint["text-translate"],n.paint["text-translate-anchor"],n.layout["text-rotation-alignment"],n.layout["text-pitch-alignment"],n.layout["text-size"],n.paint["text-halo-width"],n.paint["text-halo-color"],n.paint["text-halo-blur"],n.paint["text-opacity"],n.paint["text-color"]),e.map.showCollisionBoxes&&l(t,e,n,i)}}function r(t,e,n,i,r,s,u,l,c,h,f,p,d,g,m){if(r||!t.style.sprite||t.style.sprite.loaded()){var y=t.gl,v="map"===l,b="map"===c,_=b;_?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST);for(var x,w,E=0,S=i;E<S.length;E+=1){var M=S[E],T=e.getTile(M),C=T.getBucket(n);if(C){var I=r?C.buffers.glyph:C.buffers.icon;if(I&&I.segments.length){var N=r||C.sdfIcons;x&&C.fontstack===w||(x=t.useProgram(N?"symbolSDF":"symbolIcon"),o(x,t,r,N,v,b,C.fontstack,h,C.iconsNeedLinear,r?C.adjustedTextSize:C.adjustedIconSize,g)),t.enableTileClippingMask(M),y.uniformMatrix4fv(x.u_matrix,!1,t.translatePosMatrix(M.posMatrix,T,s,u)),a(x,t,n,T,I,r,N,b,h,f,p,d,m),w=C.fontstack}}}_||y.enable(y.DEPTH_TEST)}}function o(t,e,n,i,r,o,a,s,l,c,h){var f=e.gl,p=e.transform;if(f.uniform1i(t.u_rotate_with_map,r),f.uniform1i(t.u_pitch_with_map,o),f.activeTexture(f.TEXTURE0),f.uniform1i(t.u_texture,0),n){var d=a&&e.glyphSource.getGlyphAtlas(a);if(!d)return;d.updateTexture(f),f.uniform2f(t.u_texsize,d.width/4,d.height/4)}else{var g=e.options.rotating||e.options.zooming,m=1!==s||u.devicePixelRatio!==e.spriteAtlas.pixelRatio||l,y=o||p.pitch;e.spriteAtlas.bind(f,i||g||m||y),f.uniform2f(t.u_texsize,e.spriteAtlas.width/4,e.spriteAtlas.height/4)}f.activeTexture(f.TEXTURE1),e.frameHistory.bind(f),f.uniform1i(t.u_fadetexture,1);var v=Math.log(s/c)/Math.LN2||0;f.uniform1f(t.u_zoom,10*(p.zoom-v)),f.uniform1f(t.u_pitch,p.pitch/360*2*Math.PI),f.uniform1f(t.u_bearing,p.bearing/360*2*Math.PI),f.uniform1f(t.u_aspect_ratio,p.width/p.height),f.uniform1f(t.u_opacity,h)}function a(t,e,n,i,r,o,a,u,l,g,m,y,v){var b=e.gl,_=e.transform,x=l/(o?24:1);if(u){var w=c(i,x,_.zoom);b.uniform2f(t.u_extrude_scale,w,w)}else{var E=_.cameraToCenterDistance*x;b.uniform2f(t.u_extrude_scale,_.pixelsToGLUnits[0]*E,_.pixelsToGLUnits[1]*E)}if(a){var S=x*(u?Math.cos(_._pitch):1)*_.cameraToCenterDistance;g&&(b.uniform1f(t.u_gamma,(y*f/h+d)/S),b.uniform4fv(t.u_color,m),b.uniform1f(t.u_buffer,(p-g/x)/h),s(r,n,b,t)),b.uniform1f(t.u_gamma,d/S),b.uniform4fv(t.u_color,v),b.uniform1f(t.u_buffer,.75)}s(r,n,b,t)}function s(t,e,n,i){for(var r=0,o=t.segments;r<o.length;r+=1){var a=o[r];a.vaos[e.id].bind(n,i,t.layoutVertexBuffer,t.elementBuffer,null,a.vertexOffset),n.drawElements(n.TRIANGLES,3*a.primitiveLength,n.UNSIGNED_SHORT,3*a.primitiveOffset*2)}}var u=t("../util/browser"),l=t("./draw_collision_debug"),c=t("../source/pixels_to_tile_units");e.exports=i;var h=8,f=1.19,p=6,d=.105/u.devicePixelRatio},{"../source/pixels_to_tile_units":48,"../util/browser":112,"./draw_collision_debug":27}],34:[function(t,e,n){"use strict";var i=function(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.previousZoom=0,this.firstFrame=!0};i.prototype.record=function(t,e,n){var i=this;this.firstFrame&&(t=0,this.firstFrame=!1),e=Math.floor(10*e);var r;if(e<this.previousZoom)for(r=e+1;r<=this.previousZoom;r++)i.changeTimes[r]=t,i.changeOpacities[r]=i.opacities[r];else for(r=e;r>this.previousZoom;r--)i.changeTimes[r]=t,i.changeOpacities[r]=i.opacities[r];for(r=0;r<256;r++){var o=t-i.changeTimes[r],a=255*(n?o/n:1);r<=e?i.opacities[r]=i.changeOpacities[r]+a:i.opacities[r]=i.changeOpacities[r]-a}this.changed=!0,this.previousZoom=e},i.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.changed&&(t.texSubImage2D(t.TEXTURE_2D,0,0,0,256,1,t.ALPHA,t.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,256,1,0,t.ALPHA,t.UNSIGNED_BYTE,this.array))},e.exports=i},{}],35:[function(t,e,n){"use strict";var i=t("../util/util"),r=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};r.prototype.setSprite=function(t){this.sprite=t},r.prototype.getDash=function(t,e){var n=t.join(",")+e;return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},r.prototype.addDash=function(t,e){var n=this,r=e?7:0,o=2*r+1,a=128;if(this.nextRow+o>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var s=0,u=0;u<t.length;u++)s+=t[u];for(var l=this.width/s,c=l/2,h=t.length%2===1,f=-r;f<=r;f++)for(var p=n.nextRow+r+f,d=n.width*p,g=h?-t[t.length-1]:0,m=t[0],y=1,v=0;v<this.width;v++){for(;m<v/l;)g=m,m+=t[y],h&&y===t.length-1&&(m+=t[0]),y++;var b,_=Math.abs(v-g*l),x=Math.abs(v-m*l),w=Math.min(_,x),E=y%2===1;if(e){var S=r?f/r*(c+1):0;if(E){var M=c-Math.abs(S);b=Math.sqrt(w*w+M*M)}else b=c-Math.sqrt(w*w+S*S)}else b=(E?1:-1)*w;n.data[3+4*(d+v)]=Math.max(0,Math.min(255,b+a))}var T={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:s};return this.nextRow+=o,this.dirty=!0,T},r.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))},e.exports=r},{"../util/util":131}],36:[function(t,e,n){"use strict";var i=t("../util/browser"),r=t("@mapbox/gl-matrix").mat4,o=t("./frame_history"),a=t("../source/source_cache"),s=t("../data/extent"),u=t("../source/pixels_to_tile_units"),l=t("../util/util"),c=t("../data/buffer"),h=t("./vertex_array_object"),f=t("../data/raster_bounds_array"),p=t("../data/pos_array"),d=t("../data/program_configuration"),g=t("./shaders"),m={symbol:t("./draw_symbol"),circle:t("./draw_circle"),line:t("./draw_line"),fill:t("./draw_fill"),"fill-extrusion":t("./draw_fill_extrusion"),raster:t("./draw_raster"),background:t("./draw_background"),debug:t("./draw_debug")},y=function(t,e){this.gl=t,this.transform=e,this.reusableTextures={tiles:{},viewport:null},this.preFbos={},this.frameHistory=new o,this.setup(),this.numSublayers=a.maxUnderzooming+a.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE),this.basicFillProgramConfiguration=d.createStatic(["color","opacity"]),this.emptyProgramConfiguration=new d};y.prototype.resize=function(t,e){var n=this.gl;this.width=t*i.devicePixelRatio,this.height=e*i.devicePixelRatio,n.viewport(0,0,this.width,this.height)},y.prototype.setup=function(){var t=this.gl;t.verbose=!0,t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.STENCIL_TEST),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),this._depthMask=!1,t.depthMask(!1);var e=new p;e.emplaceBack(0,0),e.emplaceBack(s,0),e.emplaceBack(0,s),e.emplaceBack(s,s),this.tileExtentBuffer=c.fromStructArray(e,c.BufferType.VERTEX),this.tileExtentVAO=new h,this.tileExtentPatternVAO=new h;var n=new p;n.emplaceBack(0,0),n.emplaceBack(s,0),n.emplaceBack(s,s),n.emplaceBack(0,s),n.emplaceBack(0,0),this.debugBuffer=c.fromStructArray(n,c.BufferType.VERTEX),this.debugVAO=new h;var i=new f;i.emplaceBack(0,0,0,0),i.emplaceBack(s,0,32767,0),i.emplaceBack(0,s,0,32767),i.emplaceBack(s,s,32767,32767),this.rasterBoundsBuffer=c.fromStructArray(i,c.BufferType.VERTEX),this.rasterBoundsVAO=new h},y.prototype.clearColor=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},y.prototype.clearStencil=function(){var t=this.gl;t.clearStencil(0),t.stencilMask(255),t.clear(t.STENCIL_BUFFER_BIT)},y.prototype.clearDepth=function(){var t=this.gl;t.clearDepth(1),this.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT)},y.prototype._renderTileClippingMasks=function(t){var e=this,n=this.gl;n.colorMask(!1,!1,!1,!1),this.depthMask(!1),n.disable(n.DEPTH_TEST),n.enable(n.STENCIL_TEST),n.stencilMask(248),n.stencilOp(n.KEEP,n.KEEP,n.REPLACE);var i=1;this._tileClippingMaskIDs={};for(var r=0,o=t;r<o.length;r+=1){var a=o[r],s=e._tileClippingMaskIDs[a.id]=i++<<3;n.stencilFunc(n.ALWAYS,s,248);var u=e.useProgram("fill",e.basicFillProgramConfiguration);n.uniformMatrix4fv(u.u_matrix,!1,a.posMatrix),e.tileExtentVAO.bind(n,u,e.tileExtentBuffer),n.drawArrays(n.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}n.stencilMask(0),n.colorMask(!0,!0,!0,!0),this.depthMask(!0),n.enable(n.DEPTH_TEST)},y.prototype.enableTileClippingMask=function(t){var e=this.gl;e.stencilFunc(e.EQUAL,this._tileClippingMaskIDs[t.id],248)},y.prototype.prepareBuffers=function(){},y.prototype.bindDefaultFramebuffer=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},y.prototype.render=function(t,e){if(this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.spriteAtlas=t.spriteAtlas,this.spriteAtlas.setSprite(t.sprite),this.glyphSource=t.glyphSource,this.frameHistory.record(Date.now(),this.transform.zoom,t.getTransition().duration),this.prepareBuffers(),this.clearColor(),this.clearDepth(),this.showOverdrawInspector(e.showOverdrawInspector),this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.isOpaquePass=!0,this.renderPass(),this.isOpaquePass=!1,this.renderPass(),this.options.showTileBoundaries){var n=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];n&&m.debug(this,n,n.getVisibleCoordinates())}},y.prototype.renderPass=function(){var t,e,n=this,i=this.style._order;this.currentLayer=this.isOpaquePass?i.length-1:0,this.isOpaquePass?this._showOverdrawInspector||this.gl.disable(this.gl.BLEND):this.gl.enable(this.gl.BLEND);for(var r=0;r<i.length;r++){var o=n.style._layers[i[n.currentLayer]];o.source!==(t&&t.id)&&(t=n.style.sourceCaches[o.source],e=[],t&&(t.prepare&&t.prepare(),n.clearStencil(),e=t.getVisibleCoordinates(),t.getSource().isTileClipped&&n._renderTileClippingMasks(e)),n.isOpaquePass||e.reverse()),n.renderLayer(n,t,o,e),n.currentLayer+=n.isOpaquePass?-1:1}},y.prototype.depthMask=function(t){t!==this._depthMask&&(this._depthMask=t,this.gl.depthMask(t))},y.prototype.renderLayer=function(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||i.length)&&(this.id=n.id,m[n.type](t,e,n,i))},y.prototype.setDepthSublayer=function(t){var e=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,n=e-1+this.depthRange;this.gl.depthRange(n,e)},y.prototype.translatePosMatrix=function(t,e,n,i){if(!n[0]&&!n[1])return t;if("viewport"===i){var o=Math.sin(-this.transform.angle),a=Math.cos(-this.transform.angle);n=[n[0]*a-n[1]*o,n[0]*o+n[1]*a]}var s=[u(e,n[0],this.transform.zoom),u(e,n[1],this.transform.zoom),0],l=new Float32Array(16);return r.translate(l,t,s),l},y.prototype.saveTileTexture=function(t){var e=this.reusableTextures.tiles[t.size];e?e.push(t):this.reusableTextures.tiles[t.size]=[t]},y.prototype.saveViewportTexture=function(t){this.reusableTextures.viewport=t},y.prototype.getTileTexture=function(t){var e=this.reusableTextures.tiles[t];return e&&e.length>0?e.pop():null},y.prototype.getViewportTexture=function(t,e){var n=this.reusableTextures.viewport;if(n)return n.width===t&&n.height===e?n:(this.gl.deleteTexture(n),void(this.reusableTextures.viewport=null))},y.prototype.lineWidth=function(t){this.gl.lineWidth(l.clamp(t,this.lineWidthRange[0],this.lineWidthRange[1]))},y.prototype.showOverdrawInspector=function(t){if(t||this._showOverdrawInspector){this._showOverdrawInspector=t;var e=this.gl;if(t){e.blendFunc(e.CONSTANT_COLOR,e.ONE);var n=8,i=1/n;e.blendColor(i,i,i,0),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)}else e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}},y.prototype.createProgram=function(t,e){var n=this.gl,r=n.createProgram(),o=g[t],a="#define MAPBOX_GL_JS\n#define DEVICE_PIXEL_RATIO "+i.devicePixelRatio.toFixed(1)+"\n";this._showOverdrawInspector&&(a+="#define OVERDRAW_INSPECTOR;\n");var s=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(s,e.applyPragmas(a+g.prelude.fragmentSource+o.fragmentSource,"fragment")),n.compileShader(s),n.attachShader(r,s);var u=n.createShader(n.VERTEX_SHADER);n.shaderSource(u,e.applyPragmas(a+g.prelude.vertexSource+o.vertexSource,"vertex")),n.compileShader(u),n.attachShader(r,u),n.linkProgram(r);for(var l=n.getProgramParameter(r,n.ACTIVE_ATTRIBUTES),c={program:r,numAttributes:l},h=0;h<l;h++){var f=n.getActiveAttrib(r,h);c[f.name]=n.getAttribLocation(r,f.name)}for(var p=n.getProgramParameter(r,n.ACTIVE_UNIFORMS),d=0;d<p;d++){var m=n.getActiveUniform(r,d);c[m.name]=n.getUniformLocation(r,m.name)}return c},y.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=this.createProgram(t,e)),this.cache[n]},y.prototype.useProgram=function(t,e){var n=this.gl,i=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.currentProgram!==i&&(n.useProgram(i.program),this.currentProgram=i),i},e.exports=y},{"../data/buffer":8,"../data/extent":11,"../data/pos_array":14,"../data/program_configuration":15,"../data/raster_bounds_array":16,"../source/pixels_to_tile_units":48,"../source/source_cache":53,"../util/browser":112,"../util/util":131,"./draw_background":25,"./draw_circle":26,"./draw_debug":28,"./draw_fill":29,"./draw_fill_extrusion":30,"./draw_line":31,"./draw_raster":32,"./draw_symbol":33,"./frame_history":34,"./shaders":38,"./vertex_array_object":39,"@mapbox/gl-matrix":135}],37:[function(t,e,n){"use strict";var i=t("../source/pixels_to_tile_units");n.prepare=function(t,e,n){var i=e.gl,r=e.spriteAtlas.getPosition(t.from,!0),o=e.spriteAtlas.getPosition(t.to,!0);r&&o&&(i.uniform1i(n.u_image,0),i.uniform2fv(n.u_pattern_tl_a,r.tl),i.uniform2fv(n.u_pattern_br_a,r.br),i.uniform2fv(n.u_pattern_tl_b,o.tl),i.uniform2fv(n.u_pattern_br_b,o.br),i.uniform1f(n.u_mix,t.t),i.uniform2fv(n.u_pattern_size_a,r.size),i.uniform2fv(n.u_pattern_size_b,o.size),i.uniform1f(n.u_scale_a,t.fromScale),i.uniform1f(n.u_scale_b,t.toScale),i.activeTexture(i.TEXTURE0),e.spriteAtlas.bind(i,!0))},n.setTile=function(t,e,n){var r=e.gl;r.uniform1f(n.u_tile_units_to_pixels,1/i(t,1,e.transform.tileZoom));var o=Math.pow(2,t.coord.z),a=t.tileSize*Math.pow(2,e.transform.tileZoom)/o,s=a*(t.coord.x+t.coord.w*o),u=a*t.coord.y;r.uniform2f(n.u_pixel_coord_upper,s>>16,u>>16),r.uniform2f(n.u_pixel_coord_lower,65535&s,65535&u)}},{"../source/pixels_to_tile_units":48}],38:[function(t,e,n){"use strict";t("path");e.exports={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\nfloat evaluate_zoom_function_1(const vec4 values, const float t) {\n    if (t < 1.0) {\n        return mix(values[0], values[1], t);\n    } else if (t < 2.0) {\n        return mix(values[1], values[2], t - 1.0);\n    } else {\n        return mix(values[2], values[3], t - 2.0);\n    }\n}\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\n    if (t < 1.0) {\n        return mix(value0, value1, t);\n    } else if (t < 2.0) {\n        return mix(value1, value2, t - 1.0);\n    } else {\n        return mix(value2, value3, t - 2.0);\n    }\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},circle:{fragmentSource:"#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    float extrude_length = length(v_extrude);\n    float antialiased_blur = -max(blur, v_antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform vec2 u_extrude_scale;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main(void) {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * (radius + stroke_width) * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    if (u_scale_with_map) {\n        gl_Position.xy += extrude;\n    } else {\n        gl_Position.xy += extrude * gl_Position.w;\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n}\n"},collisionBox:{fragmentSource:"uniform float u_zoom;\nuniform float u_maxzoom;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    if (v_placement_zoom > u_zoom) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    if (u_zoom >= v_max_zoom) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos + a_extrude / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n}\n"},debug:{fragmentSource:"uniform lowp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize lowp vec4 color\n\n    gl_FragColor = v_color;\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\nuniform lowp vec4 u_outline_color;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize lowp vec4 color\n\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\n    float t = mod(a_normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n#ifdef OUTLINE\n    color = u_outline_color;\n#endif\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    float t = mod(a_normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(a_edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_texture;\nuniform float u_opacity;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_texture, v_pos) * u_opacity;\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform int u_xdim;\nuniform int u_ydim;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos.x = a_pos.x / float(u_xdim);\n    v_pos.y = 1.0 - a_pos.y / float(u_ydim);\n}\n"},line:{fragmentSource:"#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a, u_pattern_br_a, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b, u_pattern_br_b, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\nuniform mediump float u_width;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset;\n \n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp float u_opacity;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * u_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n    if (u_rotate_with_map) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},symbolSDF:{fragmentSource:"uniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform lowp float u_buffer;\nuniform lowp float u_gamma;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    lowp float dist = texture2D(u_texture, v_tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\n    lowp float gamma = u_gamma * v_gamma_scale;\n    lowp float alpha = smoothstep(u_buffer - gamma, u_buffer + gamma, dist) * fade_alpha;\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform bool u_pitch_with_map;\nuniform mediump float u_pitch;\nuniform mediump float u_bearing;\nuniform mediump float u_aspect_ratio;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    // pitch-alignment: map\n    // rotation-alignment: map | viewport\n    if (u_pitch_with_map) {\n        lowp float angle = u_rotate_with_map ? (a_data[1] / 256.0 * 2.0 * PI) : u_bearing;\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, asin, -1.0 * asin, acos);\n        vec2 offset = RotationMatrix * a_offset;\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: map\n    } else if (u_rotate_with_map) {\n        // foreshortening factor to apply on pitched maps\n        // as a label goes from horizontal <=> vertical in angle\n        // it goes from 0% foreshortening to up to around 70% foreshortening\n        lowp float pitchfactor = 1.0 - cos(u_pitch * sin(u_pitch * 0.75));\n\n        lowp float lineangle = a_data[1] / 256.0 * 2.0 * PI;\n\n        // use the lineangle to position points a,b along the line\n        // project the points and calculate the label angle in projected space\n        // this calculation allows labels to be rendered unskewed on pitched maps\n        vec4 a = u_matrix * vec4(a_pos, 0, 1);\n        vec4 b = u_matrix * vec4(a_pos + vec2(cos(lineangle),sin(lineangle)), 0, 1);\n        lowp float angle = atan((b[1]/b[3] - a[1]/a[3])/u_aspect_ratio, b[0]/b[3] - a[0]/a[3]);\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, -1.0 * asin, asin, acos);\n\n        vec2 offset = RotationMatrix * (vec2((1.0-pitchfactor)+(pitchfactor*cos(angle*2.0)), 1.0) * a_offset);\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: viewport\n    } else {\n        vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_gamma_scale = gl_Position.w;\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"}}},{path:137}],39:[function(t,e,n){"use strict";var i=function(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundElementBuffer=null,this.boundVertexOffset=null,this.vao=null};i.prototype.bind=function(t,e,n,i,r,o){void 0===t.extVertexArrayObject&&(t.extVertexArrayObject=t.getExtension("OES_vertex_array_object"));var a=!this.vao||this.boundProgram!==e||this.boundVertexBuffer!==n||this.boundVertexBuffer2!==r||this.boundElementBuffer!==i||this.boundVertexOffset!==o;!t.extVertexArrayObject||a?(this.freshBind(t,e,n,i,r,o),this.gl=t):t.extVertexArrayObject.bindVertexArrayOES(this.vao)},i.prototype.freshBind=function(t,e,n,i,r,o){var a,s=e.numAttributes;if(t.extVertexArrayObject)this.vao&&this.destroy(),this.vao=t.extVertexArrayObject.createVertexArrayOES(),t.extVertexArrayObject.bindVertexArrayOES(this.vao),a=0,this.boundProgram=e,this.boundVertexBuffer=n,this.boundVertexBuffer2=r,this.boundElementBuffer=i,this.boundVertexOffset=o;else{a=t.currentNumAttributes||0;for(var u=s;u<a;u++)t.disableVertexAttribArray(u);
}for(var l=a;l<s;l++)t.enableVertexAttribArray(l);n.bind(t),n.setVertexAttribPointers(t,e,o),r&&(r.bind(t),r.setVertexAttribPointers(t,e,o)),i&&i.bind(t),t.currentNumAttributes=s},i.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},e.exports=i},{}],40:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/ajax"),o=t("../util/evented"),a=t("./load_arcgis_mapserver"),s=/\{ *([\w_]+) *\}/g,u=function(t,e){return t.replace(s,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})},l=function(t,e){if(e){var n=Math.abs(t.x+t.y)%e.length;return e[n]}return null},c=function(t){function e(e,n,r,o){var s=this;t.call(this),this.id=e,this.dispatcher=r,this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.tileSize=512,this._loaded=!1,this.dispatcher=r,i.extend(this,i.pick(n,["url","scheme","tileSize"])),this.setEventedParent(o),this.fire("dataloading",{dataType:"source"}),a(n,function(t,e){return t?s.fire("error",t):(i.extend(s,e),s.fire("data",{dataType:"source"}),void s.fire("source.load"))})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){this.map=t;var e=this.url.split("?")[0];this.tileUrl=e+" /tile/{z}/{y}/{x}";var n=new RegExp(/tiles.arcgis(online)?\.com/g);n.test(this.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),this.subdomains=["1","2","3","4"]),this.token&&(this.tileUrl+="?token="+this.token)},e.prototype.serialize=function(){return{type:"arcgisraster",url:this.url,tileSize:this.tileSize,tiles:this.tiles}},e.prototype.loadTile=function(t,e){function n(n,i){if(delete t.request,t.aborted)return this.state="unloaded",e(null);if(n)return this.state="errored",e(n);var r=this.map.painter.gl;t.texture=this.map.painter.getTileTexture(i.width),t.texture?(r.bindTexture(r.TEXTURE_2D,t.texture),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,i)):(t.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,t.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,i),t.texture.size=i.width),r.generateMipmap(r.TEXTURE_2D),t.state="loaded",e(null)}var o=t.coord,a=u(this.tileUrl,i.extend({s:l(o,this.subdomains),z:this._lodMap&&this._lodMap[o.z]?this._lodMap[o.z]:o.z,x:o.x,y:o.y},this.options));t.request=r.getImage(a,n.bind(this))},e.prototype.abortTile=function(t){t.request&&(t.request.abort(),delete t.request)},e.prototype.unloadTile=function(t){t.texture&&this.map.painter.saveTileTexture(t.texture)},e}(o);e.exports=c},{"../util/ajax":111,"../util/evented":120,"../util/util":131,"./load_arcgis_mapserver":46}],41:[function(t,e,n){"use strict";var i=t("./image_source"),r=t("../util/window"),o=function(t){function e(e,n,i,r){t.call(this,e,n,i,r),this.options=n,this.animate=!n.hasOwnProperty("animate")||n.animate}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){if(this.canvas=this.canvas||r.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions(this.canvas))return this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero."));var t;this.play=function(){t=this.map.style.animationLoop.set(1/0),this.map._rerender()},this.pause=function(){this.map.style.animationLoop.cancel(t)},this._finishLoading()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.canvas&&(this.animate&&this.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){var t=!1;this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||this.tile&&this._prepareImage(this.map.painter.gl,this.canvas,t)},e.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},e.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},e}(i);e.exports=o},{"../util/window":114,"./image_source":45}],42:[function(t,e,n){"use strict";function i(t){var e=a.document.createElement("a");return e.href=t,e.href}var r=t("../util/evented"),o=t("../util/util"),a=t("../util/window"),s=t("../data/extent"),u=function(t){function e(e,n,i,r){t.call(this),n=n||{},this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=i,this.setEventedParent(r),this._data=n.data,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type);var a=s/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:s,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:Math.min(n.clusterMaxZoom,this.maxzoom-1)||this.maxzoom-1,extent:s,radius:(n.clusterRadius||50)*a,log:!1}},n.workerOptions)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){return e?void t.fire("error",{error:e}):(t.fire("data",{dataType:"source"}),void t.fire("source.load"))})},e.prototype.onAdd=function(t){this.load(),this.map=t},e.prototype.setData=function(t){var e=this;return this._data=t,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){return t?e.fire("error",{error:t}):void e.fire("data",{dataType:"source"})}),this},e.prototype._updateWorkerData=function(t){var e=this,n=o.extend({},this.workerOptions),r=this._data;"string"==typeof r?n.url=i(r):n.data=JSON.stringify(r),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n){e._loaded=!0,t(n)})},e.prototype.loadTile=function(t,e){var n=this,i=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,r={type:this.type,uid:t.uid,coord:t.coord,zoom:t.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,overscaling:i,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};t.workerID=this.dispatcher.send("loadTile",r,function(i,r){if(t.unloadVectorData(),!t.aborted)return i?e(i):(t.loadVectorData(r,n.map.painter),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(n)),e(null))},this.workerID)},e.prototype.abortTile=function(t){t.aborted=!0},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},function(){},t.workerID)},e.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id},function(){})},e.prototype.serialize=function(){return{type:this.type,data:this._data}},e}(r);e.exports=u},{"../data/extent":11,"../util/evented":120,"../util/util":131,"../util/window":114}],43:[function(t,e,n){"use strict";var i=t("../util/ajax"),r=t("geojson-rewind"),o=t("./geojson_wrapper"),a=t("vt-pbf"),s=t("supercluster"),u=t("geojson-vt"),l=t("./vector_tile_worker_source"),c=function(t){function e(e,n,i){t.call(this,e,n),i&&(this.loadGeoJSON=i),this._geoJSONIndexes={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadVectorData=function(t,e){var n=t.source,i=t.coord;if(!this._geoJSONIndexes[n])return e(null,null);var r=this._geoJSONIndexes[n].getTile(Math.min(i.z,t.maxZoom),i.x,i.y);if(!r)return e(null,null);var s=new o(r.features);s.name="_geojsonTileLayer";var u=a({layers:{_geojsonTileLayer:s}});0===u.byteOffset&&u.byteLength===u.buffer.byteLength||(u=new Uint8Array(u)),s.rawData=u.buffer,e(null,s)},e.prototype.loadData=function(t,e){var n=function(n,i){var o=this;return n?e(n):"object"!=typeof i?e(new Error("Input data is not a valid GeoJSON object.")):(r(i,!0),void this._indexData(i,t,function(n,i){return n?e(n):(o._geoJSONIndexes[t.source]=i,void e(null))}))}.bind(this);this.loadGeoJSON(t,n)},e.prototype.loadGeoJSON=function(t,e){if(t.url)i.getJSON(t.url,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}},e.prototype.removeSource=function(t){this._geoJSONIndexes[t.source]&&delete this._geoJSONIndexes[t.source]},e.prototype._indexData=function(t,e,n){try{e.cluster?n(null,s(e.superclusterOptions).load(t.features)):n(null,u(t,e.geojsonVtOptions))}catch(t){return n(t)}},e}(l);e.exports=c},{"../util/ajax":111,"./geojson_wrapper":44,"./vector_tile_worker_source":57,"geojson-rewind":146,"geojson-vt":152,supercluster:203,"vt-pbf":213}],44:[function(t,e,n){"use strict";var i=t("point-geometry"),r=t("vector-tile").VectorTileFeature,o=t("../data/extent"),a=function(t){var e=this;if(this.type=t.type,1===t.type){this.rawGeometry=[];for(var n=0;n<t.geometry.length;n++)e.rawGeometry.push([t.geometry[n]])}else this.rawGeometry=t.geometry;this.properties=t.tags,this.extent=o};a.prototype.loadGeometry=function(){var t=this,e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],o=[],a=0;a<r.length;a++)o.push(new i(r[a][0],r[a][1]));t.geometry.push(o)}return this.geometry},a.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-(1/0),i=1/0,r=-(1/0),o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),i=Math.min(i,u.y),r=Math.max(r,u.y)}return[e,i,n,r]},a.prototype.toGeoJSON=function(){r.prototype.toGeoJSON.call(this)};var s=function(t){this.features=t,this.length=t.length,this.extent=o};s.prototype.feature=function(t){return new a(this.features[t])},e.exports=s},{"../data/extent":11,"point-geometry":200,"vector-tile":209}],45:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/window"),o=t("./tile_coord"),a=t("../geo/lng_lat"),s=t("point-geometry"),u=t("../util/evented"),l=t("../util/ajax"),c=t("../data/extent"),h=t("../data/raster_bounds_array"),f=t("../data/buffer"),p=t("../render/vertex_array_object"),d=function(t){function e(e,n,i,r){t.call(this),this.id=e,this.dispatcher=i,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.setEventedParent(r),this.options=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,l.getImage(this.options.url,function(e,n){return e?t.fire("error",{error:e}):(t.image=n,void t._finishLoading())})},e.prototype._finishLoading=function(){this.fire("source.load"),this.map&&this.setCoordinates(this.coordinates)},e.prototype.onAdd=function(t){this.load(),this.map=t,this.image&&this.setCoordinates(this.coordinates)},e.prototype.setCoordinates=function(t){this.coordinates=t;var e=this.map,n=t.map(function(t){return e.transform.locationCoordinate(a.convert(t)).zoomTo(0)}),r=this.centerCoord=i.getCoordinatesCenter(n);return r.column=Math.round(r.column),r.row=Math.round(r.row),this.minzoom=this.maxzoom=r.zoom,this.coord=new o(r.zoom,r.column,r.row),this._tileCoords=n.map(function(t){var e=t.zoomTo(r.zoom);return new s(Math.round((e.column-r.column)*c),Math.round((e.row-r.row)*c))}),this.fire("data",{dataType:"source"}),this},e.prototype._setTile=function(t){this.tile=t;var e=32767,n=new h;n.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),n.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,e,0),n.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,e),n.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,e,e),this.tile.buckets={},this.tile.boundsBuffer=f.fromStructArray(n,f.BufferType.VERTEX),this.tile.boundsVAO=new p},e.prototype.prepare=function(){this.tile&&this.image&&this._prepareImage(this.map.painter.gl,this.image)},e.prototype._prepareImage=function(t,e,n){"loaded"!==this.tile.state?(this.tile.state="loaded",this.tile.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.tile.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)):n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e):(e instanceof r.HTMLVideoElement||e instanceof r.ImageData||e instanceof r.HTMLCanvasElement)&&(t.bindTexture(t.TEXTURE_2D,this.tile.texture),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e))},e.prototype.loadTile=function(t,e){this.coord&&this.coord.toString()===t.coord.toString()?(this._setTile(t),e(null)):(t.state="errored",e(null))},e.prototype.serialize=function(){return{type:"image",urls:this.url,coordinates:this.coordinates}},e}(u);e.exports=d},{"../data/buffer":8,"../data/extent":11,"../data/raster_bounds_array":16,"../geo/lng_lat":19,"../render/vertex_array_object":39,"../util/ajax":111,"../util/evented":120,"../util/util":131,"../util/window":114,"./tile_coord":55,"point-geometry":200}],46:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/ajax"),o=t("../util/browser"),a={0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763},s=function(t,e,n){var i=Math.abs(t/e-1);return i<n};e.exports=function(t,e){var n=function(t,n){if(t)return e(t);var r=i.pick(n,["tileInfo","initialExtent","spatialReference","tileServers","documentInfo"]);r._lodMap={};var o=.1,u=n.spatialReference.latestWkid||n.spatialReference.wkid;if(102100===u||3857===u){var l=n.tileInfo.lods,c=a;r.minzoom=l[0].level,r.maxzoom=l[l.length-1].level;for(var h=0;h<l.length;h++){var f=l[h];for(var p in c){var d=c[p];if(s(f.resolution,d,o)){r._lodMap[p]=f.level;break}}}}else e(new Error("non-mercator spatial reference"));e(null,r)};t.url?r.getJSON(t.url,n):o.frame(n.bind(null,null,t))}},{"../util/ajax":111,"../util/browser":112,"../util/util":131}],47:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/ajax"),o=t("../util/browser"),a=t("../util/mapbox").normalizeSourceURL;e.exports=function(t,e){var n=function(t,n){if(t)return e(t);var r=i.pick(n,["tiles","minzoom","maxzoom","attribution"]);n.vector_layers&&(r.vectorLayers=n.vector_layers,r.vectorLayerIds=r.vectorLayers.map(function(t){return t.id})),e(null,r)};t.url?r.getJSON(a(t.url),n):o.frame(n.bind(null,null,t))}},{"../util/ajax":111,"../util/browser":112,"../util/mapbox":127,"../util/util":131}],48:[function(t,e,n){"use strict";var i=t("../data/extent");e.exports=function(t,e,n){return e*(i/(t.tileSize*Math.pow(2,n-t.coord.z)))}},{"../data/extent":11}],49:[function(t,e,n){"use strict";function i(t,e){var n=t.coord,i=e.coord;return n.z-i.z||n.y-i.y||n.w-i.w||n.x-i.x}function r(t){for(var e=t[0]||{},n=1;n<t.length;n++){var i=t[n];for(var r in i){var o=i[r],a=e[r];if(void 0===a)a=e[r]=o;else for(var s=0;s<o.length;s++)a.push(o[s])}}return e}var o=t("./tile_coord");n.rendered=function(t,e,n,o,a,s){var u=t.tilesIn(n);u.sort(i);for(var l=[],c=0;c<u.length;c++){var h=u[c];h.tile.featureIndex&&l.push(h.tile.featureIndex.query({queryGeometry:h.queryGeometry,scale:h.scale,tileSize:h.tile.tileSize,bearing:s,params:o},e))}return r(l)},n.source=function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),i=[],r={},a=0;a<n.length;a++){var s=n[a],u=new o(Math.min(s.sourceMaxZoom,s.coord.z),s.coord.x,s.coord.y,0).id;r[u]||(r[u]=!0,s.querySourceFeatures(i,e))}return i}},{"./tile_coord":55}],50:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/ajax"),o=t("../util/evented"),a=t("./load_tilejson"),s=t("../util/mapbox").normalizeTileURL,u=function(t){function e(e,n,r,o){t.call(this),this.id=e,this.dispatcher=r,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this.options=n,i.extend(this,i.pick(n,["url","scheme","tileSize"]))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),a(this.options,function(e,n){return e?t.fire("error",e):(i.extend(t,n),t.fire("data",{dataType:"source"}),void t.fire("source.load"))})},e.prototype.onAdd=function(t){this.load(),this.map=t},e.prototype.serialize=function(){return{type:"raster",url:this.url,tileSize:this.tileSize,tiles:this.tiles}},e.prototype.loadTile=function(t,e){function n(n,i){if(delete t.request,t.aborted)return this.state="unloaded",e(null);if(n)return this.state="errored",e(n);t.setExpiryData(i),delete i.cacheControl,delete i.expires;var r=this.map.painter.gl;t.texture=this.map.painter.getTileTexture(i.width),t.texture?(r.bindTexture(r.TEXTURE_2D,t.texture),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,i)):(t.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,t.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,i),t.texture.size=i.width),r.generateMipmap(r.TEXTURE_2D),t.state="loaded",e(null)}var i=s(t.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);t.request=r.getImage(i,n.bind(this))},e.prototype.abortTile=function(t){t.request&&(t.request.abort(),delete t.request)},e.prototype.unloadTile=function(t){t.texture&&this.map.painter.saveTileTexture(t.texture)},e}(o);e.exports=u},{"../util/ajax":111,"../util/evented":120,"../util/mapbox":127,"../util/util":131,"./load_tilejson":47}],51:[function(t,e,n){"use strict";var i=t("../util/ajax"),r=t("../util/window"),o=[],a=!1,s=null;e.exports.registerForPluginAvailability=function(t){s?t(s):o.push(t)},e.exports.errorCallback=null,e.exports.setRTLTextPlugin=function(t,n){if(a)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=!0,e.exports.errorCallback=n,i.getArrayBuffer(t,function(t,e){if(t)n(t);else{s=r.URL.createObjectURL(new r.Blob([e.data]),{type:"text/javascript"});for(var i=0,a=o;i<a.length;i+=1){var u=a[i];u(s)}}})}},{"../util/ajax":111,"../util/window":114}],52:[function(t,e,n){"use strict";var i=t("../util/util"),r={vector:t("../source/vector_tile_source"),raster:t("../source/raster_tile_source"),arcgisraster:t("../source/arcgis_raster_tile_source"),geojson:t("../source/geojson_source"),video:t("../source/video_source"),image:t("../source/image_source"),canvas:t("../source/canvas_source")};n.create=function(t,e,n,o){if(e=new r[e.type](t,e,n,o),e.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+e.id);return i.bindAll(["load","abort","unload","serialize","prepare"],e),e},n.getType=function(t){return r[t]},n.setType=function(t,e){r[t]=e}},{"../source/arcgis_raster_tile_source":40,"../source/canvas_source":41,"../source/geojson_source":42,"../source/image_source":45,"../source/raster_tile_source":50,"../source/vector_tile_source":56,"../source/video_source":58,"../util/util":131}],53:[function(t,e,n){"use strict";function i(t,e,n){var i=n.zoomTo(Math.min(t.z,e));return{x:(i.column-(t.x+t.w*Math.pow(2,t.z)))*p,y:(i.row-t.y)*p}}function r(t,e){return t%32-e%32}function o(t){return"raster"===t||"image"===t||"video"===t}var a=t("./source"),s=t("./tile"),u=t("../util/evented"),l=t("./tile_coord"),c=t("../util/lru_cache"),h=t("../geo/coordinate"),f=t("../util/util"),p=t("../data/extent"),d=function(t){function e(e,n,i){t.call(this),this.id=e,this.dispatcher=i,this.on("source.load",function(){this._sourceLoaded=!0}),this.on("error",function(){this._sourceErrored=!0}),this.on("data",function(t){this._sourceLoaded&&"source"===t.dataType&&(this.reload(),this.transform&&this.update(this.transform))}),this._source=a.create(e,n,i,this),this._tiles={},this._cache=new c(0,this.unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._isIdRenderable=this._isIdRenderable.bind(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){this.map=t,this._source&&this._source.onAdd&&this._source.onAdd(t)},e.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},e.prototype.loaded=function(){var t=this;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in this._tiles){var n=t._tiles[e];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0},e.prototype.getSource=function(){return this._source},e.prototype.loadTile=function(t,e){return this._source.loadTile(t,e)},e.prototype.unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t)},e.prototype.abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t)},e.prototype.serialize=function(){return this._source.serialize()},e.prototype.prepare=function(){if(this._sourceLoaded&&this._source.prepare)return this._source.prepare()},e.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(r)},e.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},e.prototype._isIdRenderable=function(t){return this._tiles[t].hasData()&&!this._coveredTiles[t]},e.prototype.reload=function(){var t=this;this._cache.reset();for(var e in this._tiles)t.reloadTile(e,"reloading")},e.prototype.reloadTile=function(t,e){var n=this._tiles[t];"loading"!==n.state&&(n.state=e),this.loadTile(n,this._tileLoaded.bind(this,n,t))},e.prototype._tileLoaded=function(t,e,n){return n?(t.state="errored",void this._source.fire("error",{tile:t,error:n})):(t.sourceCache=this,t.timeAdded=(new Date).getTime(),this._setTileReloadTimer(e,t),this._source.fire("data",{tile:t,coord:t.coord,dataType:"tile"}),void(this.map&&(this.map.painter.tileExtentVAO.vao=null)))},e.prototype.getTile=function(t){return this.getTileByID(t.id)},e.prototype.getTileByID=function(t){return this._tiles[t]},e.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},e.prototype.findLoadedChildren=function(t,e,n){var i=this,r=!1;for(var o in this._tiles){var a=i._tiles[o];if(!(n[o]||!a.hasData()||a.coord.z<=t.z||a.coord.z>e)){var s=Math.pow(2,Math.min(a.coord.z,i._source.maxzoom)-Math.min(t.z,i._source.maxzoom));if(Math.floor(a.coord.x/s)===t.x&&Math.floor(a.coord.y/s)===t.y)for(n[o]=!0,r=!0;a&&a.coord.z-1>t.z;){var u=a.coord.parent(i._source.maxzoom).id;a=i._tiles[u],a&&a.hasData()&&(delete n[o],n[u]=!0)}}}return r},e.prototype.findLoadedParent=function(t,e,n){for(var i=this,r=t.z-1;r>=e;r--){t=t.parent(i._source.maxzoom);var o=i._tiles[t.id];if(o&&o.hasData())return n[t.id]=!0,o;if(i._cache.has(t.id))return n[t.id]=!0,i._cache.get(t.id)}},e.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/t.tileSize)+1,n=Math.ceil(t.height/t.tileSize)+1,i=e*n,r=5;this._cache.setMaxSize(Math.floor(i*r))},e.prototype.update=function(t){var n=this;if(this._sourceLoaded){var i,r,a,s;this.updateCacheSize(t);var u=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),c=Math.max(u-e.maxOverzooming,this._source.minzoom),h=Math.max(u+e.maxUnderzooming,this._source.minzoom),p={};this._coveredTiles={};var d;for(d=this.used?this._source.coord?[this._source.coord]:t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}):[],i=0;i<d.length;i++)r=d[i],a=n.addTile(r),p[r.id]=!0,a.hasData()||n.findLoadedChildren(r,h,p)||(s=n.findLoadedParent(r,c,p),s&&n.addTile(s.coord));var g={};if(o(this._source.type))for(var m=Object.keys(p),y=0;y<m.length;y++){var v=m[y];r=l.fromID(v),a=n._tiles[v],a&&("undefined"==typeof a.fadeEndTime||a.fadeEndTime>=Date.now())&&(n.findLoadedChildren(r,h,p)&&(p[v]=!0),s=n.findLoadedParent(r,c,g),s&&n.addTile(s.coord))}var b;for(b in g)p[b]||(n._coveredTiles[b]=!0);for(b in g)p[b]=!0;var _=f.keysDifference(this._tiles,p);for(i=0;i<_.length;i++)n.removeTile(+_[i]);this.transform=t}},e.prototype.addTile=function(t){var e=this._tiles[t.id];if(e)return e;var n=t.wrapped();if(e=this._tiles[n.id],e||(e=this._cache.get(n.id),e&&(e.redoPlacement(this._source),this._cacheTimers[n.id]&&(clearTimeout(this._cacheTimers[n.id]),this._cacheTimers[n.id]=void 0,this._setTileReloadTimer(n.id,e)))),!e){var i=t.z,r=i>this._source.maxzoom?Math.pow(2,i-this._source.maxzoom):1;e=new s(n,this._source.tileSize*r,this._source.maxzoom),this.loadTile(e,this._tileLoaded.bind(this,e,t.id))}return e.uses++,this._tiles[t.id]=e,this._source.fire("dataloading",{tile:e,coord:e.coord,dataType:"tile"}),e},e.prototype._setTileReloadTimer=function(t,e){var n=this,i=e.getExpiry();i&&(this._timers[t]=setTimeout(function(){n.reloadTile(t,"expired"),n._timers[t]=void 0},i-(new Date).getTime()))},e.prototype._setCacheInvalidationTimer=function(t,e){var n=this,i=e.getExpiry();i&&(this._cacheTimers[t]=setTimeout(function(){n._cache.remove(t),n._cacheTimers[t]=void 0},i-(new Date).getTime()))},e.prototype.removeTile=function(t){var e=this._tiles[t];if(e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),this._timers[t]=void 0),this._source.fire("data",{tile:e,coord:e.coord,dataType:"tile"}),!(e.uses>0)))if(e.hasData()){var n=e.coord.wrapped().id;this._cache.add(n,e),this._setCacheInvalidationTimer(n,e)}else e.aborted=!0,this.abortTile(e),this.unloadTile(e)},e.prototype.clearTiles=function(){var t=this;for(var e in this._tiles)t.removeTile(e);this._cache.reset()},e.prototype.tilesIn=function(t){for(var e=this,n={},r=this.getIds(),o=1/0,a=1/0,s=-(1/0),u=-(1/0),c=t[0].zoom,f=0;f<t.length;f++){var d=t[f];o=Math.min(o,d.column),a=Math.min(a,d.row),s=Math.max(s,d.column),u=Math.max(u,d.row)}for(var g=0;g<r.length;g++){var m=e._tiles[r[g]],y=l.fromID(r[g]),v=[i(y,m.sourceMaxZoom,new h(o,a,c)),i(y,m.sourceMaxZoom,new h(s,u,c))];if(v[0].x<p&&v[0].y<p&&v[1].x>=0&&v[1].y>=0){for(var b=[],_=0;_<t.length;_++)b.push(i(y,m.sourceMaxZoom,t[_]));var x=n[m.coord.id];void 0===x&&(x=n[m.coord.id]={tile:m,coord:y,queryGeometry:[],scale:Math.pow(2,e.transform.zoom-m.coord.z)}),x.queryGeometry.push(b)}}var w=[];for(var E in n)w.push(n[E]);return w},e.prototype.redoPlacement=function(){for(var t=this,e=this.getIds(),n=0;n<e.length;n++){var i=t.getTileByID(e[n]);i.redoPlacement(t._source)}},e.prototype.getVisibleCoordinates=function(){for(var t=this,e=this.getRenderableIds().map(l.fromID),n=0,i=e;n<i.length;n+=1){var r=i[n];r.posMatrix=t.transform.calculatePosMatrix(r,t._source.maxzoom)}return e},e}(u);d.maxOverzooming=10,d.maxUnderzooming=3,e.exports=d},{"../data/extent":11,"../geo/coordinate":18,"../util/evented":120,"../util/lru_cache":126,"../util/util":131,"./source":52,"./tile":54,"./tile_coord":55}],54:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../data/bucket"),o=t("../data/feature_index"),a=t("vector-tile"),s=t("pbf"),u=t("../util/vectortile_to_geojson"),l=t("feature-filter"),c=t("../symbol/collision_tile"),h=t("../symbol/collision_box"),f=t("../symbol/symbol_instances"),p=t("../symbol/symbol_quads"),d=function(t,e,n){this.coord=t,this.uid=i.uniqueId(),this.uses=0,this.tileSize=e,this.sourceMaxZoom=n,this.buckets={},this.expires=null,this.cacheControl=null,this.state="loading"};d.prototype.registerFadeDuration=function(t,e){var n=e+this.timeAdded;n<Date.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n,t.set(this.fadeEndTime-Date.now()))},d.prototype.loadVectorData=function(t,e){this.hasData()&&this.unloadVectorData(e),this.state="loaded",t&&(t.rawTileData&&(this.rawTileData=t.rawTileData),this.collisionBoxArray=new h(t.collisionBoxArray),this.collisionTile=new c(t.collisionTile,this.collisionBoxArray),this.symbolInstancesArray=new f(t.symbolInstancesArray),this.symbolQuadsArray=new p(t.symbolQuadsArray),this.featureIndex=new o(t.featureIndex,this.rawTileData,this.collisionTile),this.buckets=r.deserialize(t.buckets,e.style))},d.prototype.reloadSymbolData=function(t,e){var n=this;if("unloaded"!==this.state){this.collisionTile=new c(t.collisionTile,this.collisionBoxArray),this.featureIndex.setCollisionTile(this.collisionTile);for(var o in this.buckets){var a=n.buckets[o];"symbol"===a.layers[0].type&&(a.destroy(),delete n.buckets[o])}i.extend(this.buckets,r.deserialize(t.buckets,e))}},d.prototype.unloadVectorData=function(){var t=this;for(var e in this.buckets)t.buckets[e].destroy();this.buckets={},this.collisionBoxArray=null,this.symbolQuadsArray=null,this.symbolInstancesArray=null,this.collisionTile=null,this.featureIndex=null,this.state="unloaded"},d.prototype.redoPlacement=function(t){var e=this;if("vector"===t.type||"geojson"===t.type)return"loaded"!==this.state?void(this.redoWhenDone=!0):void(this.collisionTile&&(this.state="reloading",t.dispatcher.send("redoPlacement",{type:t.type,uid:this.uid,source:t.id,angle:t.map.transform.angle,pitch:t.map.transform.pitch,showCollisionBoxes:t.map.showCollisionBoxes},function(n,i){e.reloadSymbolData(i,t.map.style),t.fire("data",{tile:e,coord:e.coord,dataType:"tile"}),t.map&&(t.map.painter.tileExtentVAO.vao=null),e.state="loaded",e.redoWhenDone&&(e.redoWhenDone=!1,e.redoPlacement(t))},this.workerID)))},d.prototype.getBucket=function(t){return this.buckets[t.id]},d.prototype.querySourceFeatures=function(t,e){var n=this;if(this.rawTileData){this.vtLayers||(this.vtLayers=new a.VectorTile(new s(this.rawTileData)).layers);var i=this.vtLayers._geojsonTileLayer||this.vtLayers[e.sourceLayer];if(i)for(var r=l(e&&e.filter),o={z:this.coord.z,x:this.coord.x,y:this.coord.y},c=0;c<i.length;c++){var h=i.feature(c);if(r(h)){var f=new u(h,n.coord.z,n.coord.x,n.coord.y);f.tile=o,t.push(f)}}}},d.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},d.prototype.setExpiryData=function(t){t.cacheControl&&(this.cacheControl=t.cacheControl),t.expires&&(this.expires=t.expires)},d.prototype.getExpiry=function(){if(this.cacheControl){var t=i.parseCacheControl(this.cacheControl);if(t["max-age"])return this.timeAdded+1e3*t["max-age"]}else if(this.expires)return new Date(this.expires).getTime()},e.exports=d},{"../data/bucket":2,"../data/feature_index":12,"../symbol/collision_box":80,"../symbol/collision_tile":82,"../symbol/symbol_instances":91,"../symbol/symbol_quads":92,"../util/util":131,"../util/vectortile_to_geojson":132,"feature-filter":145,pbf:198,"vector-tile":209}],55:[function(t,e,n){"use strict";function i(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function r(t,e,n,i,r){var o=Math.max(n,Math.floor(e.y0)),a=Math.min(i,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var u=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,h=e.dx<0,f=o;f<a;f++){var p=u*Math.max(0,Math.min(t.dy,f+c-t.y0))+t.x0,d=l*Math.max(0,Math.min(e.dy,f+h-e.y0))+e.x0;r(Math.floor(d),Math.ceil(p),f)}}function o(t,e,n,o,a,s){
var u,l=i(t,e),c=i(e,n),h=i(n,t);l.dy>c.dy&&(u=l,l=c,c=u),l.dy>h.dy&&(u=l,l=h,h=u),c.dy>h.dy&&(u=c,c=h,h=u),l.dy&&r(h,l,o,a,s),c.dy&&r(h,c,o,a,s)}function a(t,e,n){for(var i,r="",o=t;o>0;o--)i=1<<o-1,r+=(e&i?1:0)+(n&i?2:0);return r}var s=t("whoots-js"),u=t("../geo/coordinate"),l=function(t,e,n,i){isNaN(i)&&(i=0),this.z=+t,this.x=+e,this.y=+n,this.w=+i,i*=2,i<0&&(i=i*-1-1);var r=1<<this.z;this.id=32*(r*r*i+r*this.y+this.x)+this.z,this.posMatrix=null};l.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},l.prototype.toCoordinate=function(t){var e=Math.min(this.z,void 0===t?this.z:t),n=Math.pow(2,e),i=this.y,r=this.x+n*this.w;return new u(r,i,e)},l.prototype.url=function(t,e,n){var i=s.getTileBBox(this.x,this.y,this.z),r=a(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,e||this.z)).replace("{x}",this.x).replace("{y}","tms"===n?Math.pow(2,this.z)-this.y-1:this.y).replace("{quadkey}",r).replace("{bbox-epsg-3857}",i)},l.prototype.parent=function(t){return 0===this.z?null:this.z>t?new l(this.z-1,this.x,this.y,this.w):new l(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},l.prototype.wrapped=function(){return new l(this.z,this.x,this.y,0)},l.prototype.children=function(t){if(this.z>=t)return[new l(this.z+1,this.x,this.y,this.w)];var e=this.z+1,n=2*this.x,i=2*this.y;return[new l(e,n,i,this.w),new l(e,n+1,i,this.w),new l(e,n,i+1,this.w),new l(e,n+1,i+1,this.w)]},l.cover=function(t,e,n,i){function r(t,e,r){var o,u,c,h;if(r>=0&&r<=a)for(o=t;o<e;o++)u=Math.floor(o/a),c=(o%a+a)%a,0!==u&&i!==!0||(h=new l(n,c,r,u),s[h.id]=h)}void 0===i&&(i=!0);var a=1<<t,s={};return o(e[0],e[1],e[2],0,a,r),o(e[2],e[3],e[0],0,a,r),Object.keys(s).map(function(t){return s[t]})},l.fromID=function(t){var e=t%32,n=1<<e,i=(t-e)/32,r=i%n,o=(i-r)/n%n,a=Math.floor(i/(n*n));return a%2!==0&&(a=a*-1-1),a/=2,new l(e,r,o,a)},e.exports=l},{"../geo/coordinate":18,"whoots-js":217}],56:[function(t,e,n){"use strict";var i=t("../util/evented"),r=t("../util/util"),o=t("./load_tilejson"),a=t("../util/mapbox").normalizeTileURL,s=function(t){function e(e,n,i,o){if(t.call(this),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,r.extend(this,r.pick(n,["url","scheme","tileSize"])),this._options=r.extend({type:"vector"},n),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),o(this._options,function(e,n){return e?void t.fire("error",e):(r.extend(t,n),t.fire("data",{dataType:"source"}),void t.fire("source.load"))})},e.prototype.onAdd=function(t){this.load(),this.map=t},e.prototype.serialize=function(){return r.extend({},this._options)},e.prototype.loadTile=function(t,e){function n(n,i){if(!t.aborted){if(n)return e(n);t.setExpiryData(i),t.loadVectorData(i,this.map.painter),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(this)),e(null),t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)}}var i=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,r={url:a(t.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),uid:t.uid,coord:t.coord,zoom:t.coord.z,tileSize:this.tileSize*i,type:this.type,source:this.id,overscaling:i,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};t.workerID&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=e:this.dispatcher.send("reloadTile",r,n.bind(this),t.workerID):t.workerID=this.dispatcher.send("loadTile",r,n.bind(this))},e.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},e}(i);e.exports=s},{"../util/evented":120,"../util/mapbox":127,"../util/util":131,"./load_tilejson":47}],57:[function(t,e,n){"use strict";var i=t("../util/ajax"),r=t("vector-tile"),o=t("pbf"),a=t("./worker_tile"),s=t("../util/util"),u=function(t,e,n){this.actor=t,this.layerIndex=e,n&&(this.loadVectorData=n),this.loading={},this.loaded={}};u.prototype.loadTile=function(t,e){function n(t,n){return delete this.loading[i][r],t?e(t):n?(o.vectorTile=n,o.parse(n,this.layerIndex,this.actor,function(t,i,r){if(t)return e(t);var o={};n.expires&&(o.expires=n.expires),n.cacheControl&&(o.cacheControl=n.cacheControl),e(null,s.extend({rawTileData:n.rawData},i,o),r)}),this.loaded[i]=this.loaded[i]||{},void(this.loaded[i][r]=o)):e(null,null)}var i=t.source,r=t.uid;this.loading[i]||(this.loading[i]={});var o=this.loading[i][r]=new a(t);o.abort=this.loadVectorData(t,n.bind(this))},u.prototype.reloadTile=function(t,e){function n(t,n){if(this.reloadCallback){var i=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,o.layerIndex,o.actor,i)}e(t,n)}var i=this.loaded[t.source],r=t.uid,o=this;if(i&&i[r]){var a=i[r];"parsing"===a.status?a.reloadCallback=e:"done"===a.status&&a.parse(a.vectorTile,this.layerIndex,this.actor,n.bind(a))}},u.prototype.abortTile=function(t){var e=this.loading[t.source],n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort(),delete e[n])},u.prototype.removeTile=function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n]},u.prototype.loadVectorData=function(t,e){function n(t,n){if(t)return e(t);var i=new r.VectorTile(new o(n.data));i.rawData=n.data,i.cacheControl=n.cacheControl,i.expires=n.expires,e(t,i)}var a=i.getArrayBuffer(t.url,n.bind(this));return function(){a.abort()}},u.prototype.redoPlacement=function(t,e){var n=this.loaded[t.source],i=this.loading[t.source],r=t.uid;if(n&&n[r]){var o=n[r],a=o.redoPlacement(t.angle,t.pitch,t.showCollisionBoxes);a.result&&e(null,a.result,a.transferables)}else i&&i[r]&&(i[r].angle=t.angle)},e.exports=u},{"../util/ajax":111,"../util/util":131,"./worker_tile":60,pbf:198,"vector-tile":209}],58:[function(t,e,n){"use strict";var i=t("../util/ajax"),r=t("./image_source"),o=function(t){function e(e,n,i,r){t.call(this,e,n,i,r),this.roundZoom=!0,this.type="video",this.options=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this,e=this.options;this.urls=e.urls,i.getVideo(e.urls,function(e,n){if(e)return t.fire("error",{error:e});t.video=n,t.video.loop=!0;var i;t.video.addEventListener("playing",function(){i=t.map.style.animationLoop.set(1/0),t.map._rerender()}),t.video.addEventListener("pause",function(){t.map.style.animationLoop.cancel(i)}),t.map&&t.video.play(),t._finishLoading()})},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(t){this.map||(this.load(),this.map=t,this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){!this.tile||this.video.readyState<2||this._prepareImage(this.map.painter.gl,this.video)},e.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},e}(r);e.exports=o},{"../util/ajax":111,"./image_source":45}],59:[function(t,e,n){"use strict";var i=t("../util/actor"),r=t("../style/style_layer_index"),o=t("./vector_tile_worker_source"),a=t("./geojson_worker_source"),s=t("./rtl_text_plugin"),u=function(t){var e=this;this.self=t,this.actor=new i(t,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:a},this.workerSources={},this.self.registerWorkerSource=function(t,n){if(e.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');e.workerSourceTypes[t]=n},this.self.registerRTLTextPlugin=function(t){if(s.applyArabicShaping||s.processBidirectionalText)throw new Error("RTL text plugin already registered.");s.applyArabicShaping=t.applyArabicShaping,s.processBidirectionalText=t.processBidirectionalText}};u.prototype.setLayers=function(t,e){this.getLayerIndex(t).replace(e)},u.prototype.updateLayers=function(t,e){this.getLayerIndex(t).update(e.layers,e.removedIds,e.symbolOrder)},u.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type).loadTile(e,n)},u.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type).reloadTile(e,n)},u.prototype.abortTile=function(t,e){this.getWorkerSource(t,e.type).abortTile(e)},u.prototype.removeTile=function(t,e){this.getWorkerSource(t,e.type).removeTile(e)},u.prototype.removeSource=function(t,e){var n=this.getWorkerSource(t,e.type);void 0!==n.removeSource&&n.removeSource(e)},u.prototype.redoPlacement=function(t,e,n){this.getWorkerSource(t,e.type).redoPlacement(e,n)},u.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t)}},u.prototype.loadRTLTextPlugin=function(t,e,n){try{s.applyArabicShaping||s.processBidirectionalText||this.self.importScripts(e)}catch(t){n(t)}},u.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e},u.prototype.getWorkerSource=function(t,e){var n=this;if(this.workerSources[t]||(this.workerSources[t]={}),!this.workerSources[t][e]){var i={send:function(e,i,r,o){n.actor.send(e,i,r,o,t)}};this.workerSources[t][e]=new this.workerSourceTypes[e](i,this.getLayerIndex(t))}return this.workerSources[t][e]},e.exports=function(t){return new u(t)}},{"../style/style_layer_index":73,"../util/actor":110,"./geojson_worker_source":43,"./rtl_text_plugin":51,"./vector_tile_worker_source":57}],60:[function(t,e,n){"use strict";function i(t,e){for(var n=0,i=t.layers;n<i.length;n+=1){var r=i[n];r.recalculate(e)}}function r(t,e){return t.filter(function(t){return!t.isEmpty()}).map(function(t){return t.serialize(e)})}var o=t("../data/feature_index"),a=t("../symbol/collision_tile"),s=t("../symbol/collision_box"),u=t("../util/dictionary_coder"),l=t("../util/util"),c=t("../symbol/symbol_instances"),h=t("../symbol/symbol_quads"),f=function(t){this.coord=t.coord,this.uid=t.uid,this.zoom=t.zoom,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=t.overscaling,this.angle=t.angle,this.pitch=t.pitch,this.showCollisionBoxes=t.showCollisionBoxes};f.prototype.parse=function(t,e,n,f){var p=this;t.layers||(t={layers:{_geojsonTileLayer:t}}),this.status="parsing",this.data=t,this.collisionBoxArray=new s,this.symbolInstancesArray=new c,this.symbolQuadsArray=new h;var d=new u(Object.keys(t.layers).sort()),g=new o(this.coord,this.overscaling);g.bucketLayerIDs={};var m={},y=0,v={featureIndex:g,iconDependencies:{},glyphDependencies:{}},b=e.familiesBySource[this.source];for(var _ in b){var x=t.layers[_];if(x){1===x.version&&l.warnOnce('Vector tile source "'+p.source+'" layer "'+_+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=d.encode(_),E=[],S=0;S<x.length;S++){var M=x.feature(S);M.index=S,M.sourceLayerIndex=w,E.push(M)}for(var T=0,C=b[_];T<C.length;T+=1){var I=C[T],N=I[0];if(!(N.minzoom&&p.zoom<N.minzoom||N.maxzoom&&p.zoom>=N.maxzoom||N.layout&&"none"===N.layout.visibility)){for(var P=0,L=I;P<L.length;P+=1){var A=L[P];A.recalculate(p.zoom)}var k=m[N.id]=N.createBucket({index:y,layers:I,zoom:p.zoom,overscaling:p.overscaling,collisionBoxArray:p.collisionBoxArray,symbolQuadsArray:p.symbolQuadsArray,symbolInstancesArray:p.symbolInstancesArray});k.populate(E,v),g.bucketLayerIDs[y]=I.map(function(t){return t.id}),y++}}}}var R=function(t){p.status="done";var e=[];f(null,{buckets:r(l.values(m),e),featureIndex:g.serialize(e),collisionTile:t.serialize(e),collisionBoxArray:p.collisionBoxArray.serialize(),symbolInstancesArray:p.symbolInstancesArray.serialize(),symbolQuadsArray:p.symbolQuadsArray.serialize()},e)};this.symbolBuckets=[];for(var O=e.symbolOrder.length-1;O>=0;O--){var D=m[e.symbolOrder[O]];D&&p.symbolBuckets.push(D)}if(0===this.symbolBuckets.length)return R(new a(this.angle,this.pitch,this.collisionBoxArray));var F=0,z=Object.keys(v.iconDependencies),j=l.mapObject(v.glyphDependencies,function(t){return Object.keys(t).map(Number)}),B=function(t){if(t)return f(t);if(F++,2===F){for(var e=new a(p.angle,p.pitch,p.collisionBoxArray),n=0,r=p.symbolBuckets;n<r.length;n+=1){var o=r[n];i(o,p.zoom),o.prepare(j,z),o.place(e,p.showCollisionBoxes)}R(e)}};Object.keys(j).length?n.send("getGlyphs",{uid:this.uid,stacks:j},function(t,e){j=e,B(t)}):B(),z.length?n.send("getIcons",{icons:z},function(t,e){z=e,B(t)}):B()},f.prototype.redoPlacement=function(t,e,n){var o=this;if(this.angle=t,this.pitch=e,"done"!==this.status)return{};for(var s=new a(this.angle,this.pitch,this.collisionBoxArray),u=0,l=this.symbolBuckets;u<l.length;u+=1){var c=l[u];i(c,o.zoom),c.place(s,n)}var h=[];return{result:{buckets:r(this.symbolBuckets,h),collisionTile:s.serialize(h)},transferables:h}},e.exports=f},{"../data/feature_index":12,"../symbol/collision_box":80,"../symbol/collision_tile":82,"../symbol/symbol_instances":91,"../symbol/symbol_quads":92,"../util/dictionary_coder":117,"../util/util":131}],61:[function(t,e,n){"use strict";var i=function(){this.n=0,this.times=[]};i.prototype.stopped=function(){return this.times=this.times.filter(function(t){return t.time>=(new Date).getTime()}),!this.times.length},i.prototype.set=function(t){return this.times.push({id:this.n,time:t+(new Date).getTime()}),this.n++},i.prototype.cancel=function(t){this.times=this.times.filter(function(e){return e.id!==t})},e.exports=i},{}],62:[function(t,e,n){"use strict";var i=t("../util/evented"),r=t("../util/ajax"),o=t("../util/browser"),a=t("../util/mapbox").normalizeSpriteURL,s=function(){this.x=0,this.y=0,this.width=0,this.height=0,this.pixelRatio=1,this.sdf=!1},u=function(t){function e(e,n){var i=this;t.call(this),this.base=e,this.retina=o.devicePixelRatio>1,this.setEventedParent(n);var s=this.retina?"@2x":"";r.getJSON(a(e,s,".json"),function(t,e){return t?void i.fire("error",{error:t}):(i.data=e,void(i.imgData&&i.fire("data",{dataType:"style"})))}),r.getImage(a(e,s,".png"),function(t,e){if(t)return void i.fire("error",{error:t});i.imgData=o.getImageData(e);for(var n=0;n<i.imgData.length;n+=4){var r=i.imgData[n+3]/255;i.imgData[n+0]*=r,i.imgData[n+1]*=r,i.imgData[n+2]*=r}i.width=e.width,i.data&&i.fire("data",{dataType:"style"})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toJSON=function(){return this.base},e.prototype.loaded=function(){return!(!this.data||!this.imgData)},e.prototype.resize=function(){var t=this;if(o.devicePixelRatio>1!==this.retina){var n=new e(this.base);n.on("data",function(){t.data=n.data,t.imgData=n.imgData,t.width=n.width,t.retina=n.retina})}},e.prototype.getSpritePosition=function(t){if(!this.loaded())return new s;var e=this.data&&this.data[t];return e&&this.imgData?e:new s},e}(i);e.exports=u},{"../util/ajax":111,"../util/browser":112,"../util/evented":120,"../util/mapbox":127}],63:[function(t,e,n){"use strict";var i=t("./style_spec"),r=t("../util/util"),o=t("../util/evented"),a=t("./validate_style"),s=t("./style_declaration"),u=t("./style_transition"),l="-transition",c=function(t){function e(e){t.call(this),this.properties=["anchor","color","position","intensity"],this._specifications=i.light,this.set(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){var e=this;if(!this._validate(a.light,t)){this._declarations={},this._transitions={},this._transitionOptions={},this.calculated={},t=r.extend({anchor:this._specifications.anchor.default,color:this._specifications.color.default,position:this._specifications.position.default,intensity:this._specifications.intensity.default},t);for(var n=0,i=this.properties;n<i.length;n+=1){var o=i[n];e._declarations[o]=new s(e._specifications[o],t[o])}return this}},e.prototype.getLight=function(){return{anchor:this.getLightProperty("anchor"),color:this.getLightProperty("color"),position:this.getLightProperty("position"),intensity:this.getLightProperty("intensity")}},e.prototype.getLightProperty=function(t){return r.endsWith(t,l)?this._transitionOptions[t]:this._declarations[t]&&this._declarations[t].value},e.prototype.getLightValue=function(t,e){if("position"===t){var n=this._transitions[t].calculate(e),i=r.sphericalToCartesian(n);return{x:i[0],y:i[1],z:i[2]}}return this._transitions[t].calculate(e)},e.prototype.setLight=function(t){var e=this;if(!this._validate(a.light,t))for(var n in t){var i=t[n];r.endsWith(n,l)?e._transitionOptions[n]=i:null===i||void 0===i?delete e._declarations[n]:e._declarations[n]=new s(e._specifications[n],i)}},e.prototype.recalculate=function(t){var e=this;for(var n in this._declarations)e.calculated[n]=e.getLightValue(n,{zoom:t})},e.prototype._applyLightDeclaration=function(t,e,n,i,o){var a=n.transition?this._transitions[t]:void 0,c=this._specifications[t];if(null!==e&&void 0!==e||(e=new s(c,c.default)),!a||a.declaration.json!==e.json){var h=r.extend({duration:300,delay:0},i,this.getLightProperty(t+l)),f=this._transitions[t]=new u(c,e,a,h);f.instant()||(f.loopID=o.set(f.endTime-Date.now())),a&&o.cancel(a.loopID)}},e.prototype.updateLightTransitions=function(t,e,n){var i,r=this;for(i in this._declarations)r._applyLightDeclaration(i,r._declarations[i],t,e,n)},e.prototype._validate=function(t,e){return a.emitErrors(this,t.call(a,r.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:i})))},e}(o);e.exports=c},{"../util/evented":120,"../util/util":131,"./style_declaration":66,"./style_spec":74,"./style_transition":75,"./validate_style":76}],64:[function(t,e,n){"use strict";var i=t("csscolorparser").parseCSSColor,r=t("../util/util"),o=t("mapbox-gl-function"),a={};e.exports=function t(e){if(e&&o.isFunctionDefinition(e))return e.stops?r.extend({},e,{stops:e.stops.map(function(e){return[e[0],t(e[1])]})}):e;if("string"==typeof e){if(!a[e]){var n=i(e);if(!n)throw new Error("Invalid color "+e);a[e]=[n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]]}return a[e]}if(Array.isArray(e))return e;throw new Error("Invalid color "+e)}},{"../util/util":131,csscolorparser:142,"mapbox-gl-function":167}],65:[function(t,e,n){"use strict";var i=t("../util/evented"),r=t("./style_layer"),o=t("./image_sprite"),a=t("./light"),s=t("../symbol/glyph_source"),u=t("../symbol/sprite_atlas"),l=t("../render/line_atlas"),c=t("../util/util"),h=t("../util/ajax"),f=t("../util/mapbox"),p=t("../util/browser"),d=t("../util/dispatcher"),g=t("./animation_loop"),m=t("./validate_style"),y=t("../source/source"),v=t("../source/query_features"),b=t("../source/source_cache"),_=t("./style_spec"),x=t("mapbox-gl-function"),w=t("../global_worker_pool"),E=t("mapbox-gl-style-spec/lib/deref"),S=t("mapbox-gl-style-spec/lib/diff"),M=t("../source/rtl_text_plugin"),T=c.pick(S.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition"]),C=c.pick(S.operations,["setCenter","setZoom","setBearing","setPitch"]),I=function(t){function e(e,n,i){var r=this;t.call(this),this.map=n,this.animationLoop=n&&n.animationLoop||new g,this.dispatcher=new d(w(),this),this.spriteAtlas=new u(1024,1024),this.lineAtlas=new l(256,512),this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory={},this._loaded=!1,c.bindAll(["_redoPlacement"],this),this._resetUpdates(),i=c.extend({validate:"string"!=typeof e||!f.isMapboxURL(e)},i),this.setEventedParent(n),this.fire("dataloading",{dataType:"style"});var a=this;M.registerForPluginAvailability(function(t){a.dispatcher.broadcast("loadRTLTextPlugin",t,M.errorCallback);for(var e in a.sourceCaches)a.sourceCaches[e].reload()});var y=function(t,e){if(t)return void r.fire("error",{error:t});if(!i.validate||!m.emitErrors(r,m(e))){r._loaded=!0,r.stylesheet=e,r.updateClasses();for(var n in e.sources)r.addSource(n,e.sources[n],i);e.sprite&&(r.sprite=new o(e.sprite,r)),r.glyphSource=new s(e.glyphs),r._resolve(),r.fire("data",{dataType:"style"}),r.fire("style.load")}};"string"==typeof e?h.getJSON(f.normalizeStyleURL(e),y):p.frame(y.bind(this,null,e)),this.on("source.load",function(t){var e=r.sourceCaches[t.sourceId].getSource();if(e&&e.vectorLayerIds)for(var n in r._layers){var i=r._layers[n];i.source===e.id&&r._validateLayer(i)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(t.sourceLayer&&e){var n=e.getSource();("geojson"===n.type||n.vectorLayerIds&&n.vectorLayerIds.indexOf(t.sourceLayer)===-1)&&this.fire("error",{error:new Error('Source layer "'+t.sourceLayer+'" does not exist on source "'+n.id+'" as specified by style layer "'+t.id+'"')})}},e.prototype.loaded=function(){var t=this;if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!t.sourceCaches[e].loaded())return!1;return!(this.sprite&&!this.sprite.loaded())},e.prototype._resolve=function(){var t=this,e=E(this.stylesheet.layers);this._order=e.map(function(t){return t.id}),this._layers={};for(var n=0,i=e;n<i.length;n+=1){var o=i[n];o=r.create(o),o.setEventedParent(t,{layer:{id:o.id}}),t._layers[o.id]=o}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new a(this.stylesheet.light)},e.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},e.prototype._applyClasses=function(t,e){var n=this;if(this._loaded){t=t||[],e=e||{transition:!0};var i=this.stylesheet.transition||{},r=this._updatedAllPaintProps?this._layers:this._updatedPaintProps;for(var o in r){var a=n._layers[o],s=n._updatedPaintProps[o];if(n._updatedAllPaintProps||s.all)a.updatePaintTransitions(t,e,i,n.animationLoop,n.zoomHistory);else for(var u in s)n._layers[o].updatePaintTransition(u,t,e,i,n.animationLoop,n.zoomHistory)}this.light.updateLightTransitions(e,i,this.animationLoop)}},e.prototype._recalculate=function(t){var e=this;if(this._loaded){for(var n in this.sourceCaches)e.sourceCaches[n].used=!1;this._updateZoomHistory(t);for(var i=0,r=this._order;i<r.length;i+=1){var o=r[i],a=e._layers[o];a.recalculate(t),!a.isHidden(t)&&a.source&&(e.sourceCaches[a.source].used=!0)}this.light.recalculate(t);var s=300;Math.floor(this.z)!==Math.floor(t)&&this.animationLoop.set(s),this.z=t}},e.prototype._updateZoomHistory=function(t){var e=this.zoomHistory;void 0===e.lastIntegerZoom&&(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=0,e.lastZoom=t),Math.floor(e.lastZoom)<Math.floor(t)?(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=Date.now()):Math.floor(e.lastZoom)>Math.floor(t)&&(e.lastIntegerZoom=Math.floor(t+1),e.lastIntegerZoomTime=Date.now()),e.lastZoom=t},e.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},e.prototype.update=function(t,e){var n=this;if(this._changed){var i=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(i.length||r.length||this._updatedSymbolOrder)&&this._updateWorkerLayers(i,r);for(var o in this._updatedSources){var a=n._updatedSources[o];"reload"===a?n._reloadSource(o):"clear"===a&&n._clearSource(o)}this._applyClasses(t,e),this._resetUpdates(),this.fire("data",{dataType:"style"})}},e.prototype._updateWorkerLayers=function(t,e){var n=this,i=this._updatedSymbolOrder?this._order.filter(function(t){return"symbol"===n._layers[t].type}):null;this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e,symbolOrder:i})},e.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSymbolOrder=!1,this._updatedSources={},this._updatedPaintProps={},this._updatedAllPaintProps=!1},e.prototype.setState=function(t){var e=this;if(this._checkLoaded(),m.emitErrors(this,m(t)))return!1;t=c.extend({},t),t.layers=E(t.layers);var n=S(this.serialize(),t).filter(function(t){return!(t.command in C)});if(0===n.length)return!1;var i=n.filter(function(t){return!(t.command in T)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return n.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},e.prototype.addSource=function(t,e,n){if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e)+".");var i=["vector","raster","geojson","video","image","canvas"],r=i.indexOf(e.type)>=0;if(!r||!this._validate(m.source,"sources."+t,e,null,n)){var o=this.sourceCaches[t]=new b(t,e,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:o.loaded(),source:o.serialize(),sourceId:t}}),o.onAdd(this.map),this._changed=!0}},e.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");var e=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],e.setEventedParent(null),e.clearTiles(),e.onRemove&&e.onRemove(this.map),this._changed=!0},e.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},e.prototype.addLayer=function(t,e,n){this._checkLoaded();var i=t.id;if("object"==typeof t.source&&(this.addSource(i,t.source),t=c.extend(t,{source:i})),!this._validate(m.layer,"layers."+i,t,{arrayIndex:-1},n)){var o=r.create(t);this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}});var a=e?this._order.indexOf(e):this._order.length;if(this._order.splice(a,0,i),this._layers[i]=o,this._removedLayers[i]&&o.source){var s=this._removedLayers[i];delete this._removedLayers[i],this._updatedSources[o.source]=s.type!==o.type?"clear":"reload"}this._updateLayer(o),"symbol"===o.type&&(this._updatedSymbolOrder=!0),this.updateClasses(i)}},e.prototype.moveLayer=function(t,e){this._checkLoaded(),this._changed=!0;var n=this._layers[t];if(!n)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")});var i=this._order.indexOf(t);this._order.splice(i,1);var r=e?this._order.indexOf(e):this._order.length;this._order.splice(r,0,t),"symbol"===n.type&&(this._updatedSymbolOrder=!0,n.source&&!this._updatedSources[n.source]&&(this._updatedSources[n.source]="reload"))},e.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(!e)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")});e.setEventedParent(null);var n=this._order.indexOf(t);this._order.splice(n,1),"symbol"===e.type&&(this._updatedSymbolOrder=!0),this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t]},e.prototype.getLayer=function(t){return this._layers[t]},e.prototype.setLayerZoomRange=function(t,e,n){this._checkLoaded();var i=this.getLayer(t);return i?void(i.minzoom===e&&i.maxzoom===n||(null!=e&&(i.minzoom=e),null!=n&&(i.maxzoom=n),this._updateLayer(i))):void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")})},e.prototype.setFilter=function(t,e){this._checkLoaded();var n=this.getLayer(t);return n?void(null!==e&&void 0!==e&&this._validate(m.filter,"layers."+n.id+".filter",e)||c.deepEqual(n.filter,e)||(n.filter=c.clone(e),this._updateLayer(n))):void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")})},e.prototype.getFilter=function(t){return c.clone(this.getLayer(t).filter)},e.prototype.setLayoutProperty=function(t,e,n){this._checkLoaded();var i=this.getLayer(t);return i?void(c.deepEqual(i.getLayoutProperty(e),n)||(i.setLayoutProperty(e,n),this._updateLayer(i))):void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")})},e.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},e.prototype.setPaintProperty=function(t,e,n,i){this._checkLoaded();var r=this.getLayer(t);if(!r)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")});if(!c.deepEqual(r.getPaintProperty(e,i),n)){var o=r.isPaintValueFeatureConstant(e);r.setPaintProperty(e,n,i);var a=!(n&&x.isFunctionDefinition(n)&&"$zoom"!==n.property&&void 0!==n.property);a&&o||this._updateLayer(r),this.updateClasses(t,e)}},e.prototype.getPaintProperty=function(t,e,n){return this.getLayer(t).getPaintProperty(e,n)},e.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},e.prototype.updateClasses=function(t,e){if(this._changed=!0,t){var n=this._updatedPaintProps;n[t]||(n[t]={}),n[t][e||"all"]=!0}else this._updatedAllPaintProps=!0},e.prototype.serialize=function(){var t=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(e){return t._layers[e].serialize()})},function(t){return void 0!==t})},e.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload"),this._changed=!0},e.prototype._flattenRenderedFeatures=function(t){for(var e=this,n=[],i=this._order.length-1;i>=0;i--)for(var r=e._order[i],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s[r];if(u)for(var l=0,c=u;l<c.length;l+=1){var h=c[l];n.push(h)}}return n},e.prototype.queryRenderedFeatures=function(t,e,n,i){var r=this;e&&e.filter&&this._validate(m.filter,"queryRenderedFeatures.filter",e.filter);var o={};if(e&&e.layers)for(var a=0,s=e.layers;a<s.length;a+=1){var u=s[a],l=r._layers[u];if(!l)return void r.fire("error",{error:"The layer '"+u+"' does not exist in the map's style and cannot be queried for features."});o[l.source]=!0}var c=[];for(var h in this.sourceCaches)if(!e.layers||o[h]){var f=v.rendered(r.sourceCaches[h],r._layers,t,e,n,i);c.push(f)}return this._flattenRenderedFeatures(c)},e.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(m.filter,"querySourceFeatures.filter",e.filter);var n=this.sourceCaches[t];return n?v.source(n,e):[]},e.prototype.addSourceType=function(t,e,n){return y.getType(t)?n(new Error('A source type called "'+t+'" already exists.')):(y.setType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},e.prototype.getLight=function(){return this.light.getLight()},e.prototype.setLight=function(t,e){this._checkLoaded();var n=this.light.getLight(),i=!1;for(var r in t)if(!c.deepEqual(t[r],n[r])){i=!0;break}if(i){var o=this.stylesheet.transition||{};this.light.setLight(t),this.light.updateLightTransitions(e||{transition:!0},o,this.animationLoop)}},e.prototype._validate=function(t,e,n,i,r){return(!r||r.validate!==!1)&&m.emitErrors(this,t.call(m,c.extend({key:e,style:this.serialize(),value:n,styleSpec:_},i)))},e.prototype._remove=function(){var t=this;for(var e in this.sourceCaches)t.sourceCaches[e].clearTiles();this.dispatcher.remove()},e.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},e.prototype._reloadSource=function(t){this.sourceCaches[t].reload()},e.prototype._updateSources=function(t){var e=this;for(var n in this.sourceCaches)e.sourceCaches[n].update(t)},e.prototype._redoPlacement=function(){var t=this;for(var e in this.sourceCaches)t.sourceCaches[e].redoPlacement()},e.prototype.getIcons=function(t,e,n){var i=this,r=function(){
i.spriteAtlas.setSprite(i.sprite),i.spriteAtlas.addIcons(e.icons,n)};this.sprite.loaded()?r():this.sprite.on("data",r)},e.prototype.getGlyphs=function(t,e,n){function i(t,e,i){t&&console.error(t),s[i]=e,a--,0===a&&n(null,s)}var r=this,o=e.stacks,a=Object.keys(o).length,s={};for(var u in o)r.glyphSource.getSimpleGlyphs(u,o[u],e.uid,i)},e}(i);e.exports=I},{"../global_worker_pool":22,"../render/line_atlas":35,"../source/query_features":49,"../source/rtl_text_plugin":51,"../source/source":52,"../source/source_cache":53,"../symbol/glyph_source":85,"../symbol/sprite_atlas":90,"../util/ajax":111,"../util/browser":112,"../util/dispatcher":118,"../util/evented":120,"../util/mapbox":127,"../util/util":131,"./animation_loop":61,"./image_sprite":62,"./light":63,"./style_layer":67,"./style_spec":74,"./validate_style":76,"mapbox-gl-function":167,"mapbox-gl-style-spec/lib/deref":168,"mapbox-gl-style-spec/lib/diff":169}],66:[function(t,e,n){"use strict";var i=t("mapbox-gl-function"),r=t("./parse_color"),o=t("../util/util"),a=function(t,e){var n=this;this.value=o.clone(e),this.isFunction=i.isFunctionDefinition(e),this.json=JSON.stringify(this.value),this.minimum=t.minimum,this.isColor="color"===t.type;var a=this.isColor&&this.value?r(this.value):e,s=t.default;if(s&&"color"===t.type&&(s=r(s)),this.function=i[t.function||"piecewise-constant"](a,s),this.isFeatureConstant=this.function.isFeatureConstant,this.isZoomConstant=this.function.isZoomConstant,!this.isFeatureConstant&&!this.isZoomConstant){this.stopZoomLevels=[];for(var u=[],l=0,c=this.value.stops;l<c.length;l+=1){var h=c[l],f=h[0].zoom;n.stopZoomLevels.indexOf(f)<0&&(n.stopZoomLevels.push(f),u.push([f,u.length]))}this.functionInterpolationT=i.interpolated({stops:u,base:e.base,colorSpace:e.colorSpace})}};a.prototype.calculate=function(t,e){var n=this.function(t&&t.zoom,e||{});return this.isColor&&n?r(n):void 0!==this.minimum&&n<this.minimum?this.minimum:n},a.prototype.calculateInterpolationT=function(t,e){return this.functionInterpolationT(t&&t.zoom,e||{})},e.exports=a},{"../util/util":131,"./parse_color":64,"mapbox-gl-function":167}],67:[function(t,e,n){"use strict";function i(t){return t.value}var r=t("../util/util"),o=t("./style_transition"),a=t("./style_declaration"),s=t("./style_spec"),u=t("./validate_style"),l=t("./parse_color"),c=t("../util/evented"),h="-transition",f=function(t){function e(e){var n=this;t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.source=e.source,this.sourceLayer=e["source-layer"],this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.filter=e.filter,this.paint={},this.layout={},this._paintSpecifications=s["paint_"+this.type],this._layoutSpecifications=s["layout_"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var i,r,o={validate:!1};for(var a in e){var u=a.match(/^paint(?:\.(.*))?$/);if(u){var l=u[1]||"";for(i in e[a])n.setPaintProperty(i,e[a][i],l,o)}}for(r in e.layout)n.setLayoutProperty(r,e.layout[r],o);for(i in this._paintSpecifications)n.paint[i]=n.getPaintValue(i);for(r in this._layoutSpecifications)n._updateLayoutValue(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setLayoutProperty=function(t,e,n){if(null==e)delete this._layoutDeclarations[t];else{var i="layers."+this.id+".layout."+t;if(this._validate(u.layoutProperty,i,t,e,n))return;this._layoutDeclarations[t]=new a(this._layoutSpecifications[t],e)}this._updateLayoutValue(t)},e.prototype.getLayoutProperty=function(t){return this._layoutDeclarations[t]&&this._layoutDeclarations[t].value},e.prototype.getLayoutValue=function(t,e,n){var i=this._layoutSpecifications[t],r=this._layoutDeclarations[t];return r?r.calculate(e,n):i.default},e.prototype.setPaintProperty=function(t,e,n,i){var o="layers."+this.id+(n?'["paint.'+n+'"].':".paint.")+t;if(r.endsWith(t,h))if(this._paintTransitionOptions[n||""]||(this._paintTransitionOptions[n||""]={}),null===e||void 0===e)delete this._paintTransitionOptions[n||""][t];else{if(this._validate(u.paintProperty,o,t,e,i))return;this._paintTransitionOptions[n||""][t]=e}else if(this._paintDeclarations[n||""]||(this._paintDeclarations[n||""]={}),null===e||void 0===e)delete this._paintDeclarations[n||""][t];else{if(this._validate(u.paintProperty,o,t,e,i))return;this._paintDeclarations[n||""][t]=new a(this._paintSpecifications[t],e)}},e.prototype.getPaintProperty=function(t,e){return e=e||"",r.endsWith(t,h)?this._paintTransitionOptions[e]&&this._paintTransitionOptions[e][t]:this._paintDeclarations[e]&&this._paintDeclarations[e][t]&&this._paintDeclarations[e][t].value},e.prototype.getPaintValue=function(t,e,n){var i=this._paintSpecifications[t],r=this._paintTransitions[t];return r?r.calculate(e,n):"color"===i.type&&i.default?l(i.default):i.default},e.prototype.getPaintValueStopZoomLevels=function(t){var e=this._paintTransitions[t];return e?e.declaration.stopZoomLevels:[]},e.prototype.getPaintInterpolationT=function(t,e){var n=this._paintTransitions[t];return n.declaration.calculateInterpolationT(e)},e.prototype.isPaintValueFeatureConstant=function(t){var e=this._paintTransitions[t];return!e||e.declaration.isFeatureConstant},e.prototype.isLayoutValueFeatureConstant=function(t){var e=this._layoutDeclarations[t];return!e||e.isFeatureConstant},e.prototype.isPaintValueZoomConstant=function(t){var e=this._paintTransitions[t];return!e||e.declaration.isZoomConstant},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.layout.visibility},e.prototype.updatePaintTransitions=function(t,e,n,i,o){for(var a=this,s=r.extend({},this._paintDeclarations[""]),u=0;u<t.length;u++)r.extend(s,a._paintDeclarations[t[u]]);var l;for(l in s)a._applyPaintDeclaration(l,s[l],e,n,i,o);for(l in this._paintTransitions)l in s||a._applyPaintDeclaration(l,null,e,n,i,o)},e.prototype.updatePaintTransition=function(t,e,n,i,r,o){for(var a=this,s=this._paintDeclarations[""][t],u=0;u<e.length;u++){var l=a._paintDeclarations[e[u]];l&&l[t]&&(s=l[t])}this._applyPaintDeclaration(t,s,n,i,r,o)},e.prototype.recalculate=function(t){var e=this;for(var n in this._paintTransitions)e.paint[n]=e.getPaintValue(n,{zoom:t});for(var i in this._layoutFunctions)e.layout[i]=e.getLayoutValue(i,{zoom:t})},e.prototype.serialize=function(){var t=this,e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:r.mapObject(this._layoutDeclarations,i)};for(var n in this._paintDeclarations){var o=""===n?"paint":"paint."+n;e[o]=r.mapObject(t._paintDeclarations[n],i)}return r.filterObject(e,function(t,e){return void 0!==t&&!("layout"===e&&!Object.keys(t).length)})},e.prototype._applyPaintDeclaration=function(t,e,n,i,s,u){var l=n.transition?this._paintTransitions[t]:void 0,c=this._paintSpecifications[t];if(null!==e&&void 0!==e||(e=new a(c,c.default)),!l||l.declaration.json!==e.json){var f=r.extend({duration:300,delay:0},i,this.getPaintProperty(t+h)),p=this._paintTransitions[t]=new o(c,e,l,f,u);p.instant()||(p.loopID=s.set(p.endTime-Date.now())),l&&s.cancel(l.loopID)}},e.prototype._updateLayoutValue=function(t){var e=this._layoutDeclarations[t];e&&e.isFunction?this._layoutFunctions[t]=!0:(delete this._layoutFunctions[t],this.layout[t]=this.getLayoutValue(t))},e.prototype._validate=function(t,e,n,i,r){return(!r||r.validate!==!1)&&u.emitErrors(this,t.call(u,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:s,style:{glyphs:!0,sprite:!0}}))},e}(c);e.exports=f;var p={circle:t("./style_layer/circle_style_layer"),fill:t("./style_layer/fill_style_layer"),"fill-extrusion":t("./style_layer/fill_extrusion_style_layer"),line:t("./style_layer/line_style_layer"),symbol:t("./style_layer/symbol_style_layer")};f.create=function(t){var e=p[t.type]||f;return new e(t)}},{"../util/evented":120,"../util/util":131,"./parse_color":64,"./style_declaration":66,"./style_layer/circle_style_layer":68,"./style_layer/fill_extrusion_style_layer":69,"./style_layer/fill_style_layer":70,"./style_layer/line_style_layer":71,"./style_layer/symbol_style_layer":72,"./style_spec":74,"./style_transition":75,"./validate_style":76}],68:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/circle_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new r(t)},e}(i);e.exports=o},{"../../data/bucket/circle_bucket":3,"../style_layer":67}],69:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/fill_extrusion_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,n,i){var r=t.prototype.getPaintValue.call(this,e,n,i);return"fill-extrusion-color"===e&&r&&(r[3]=1),r},e.prototype.createBucket=function(t){return new r(t)},e}(i);e.exports=o},{"../../data/bucket/fill_extrusion_bucket":5,"../style_layer":67}],70:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/fill_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,n,i){var r=this;if("fill-outline-color"===e){if(void 0===this.getPaintProperty("fill-outline-color"))return t.prototype.getPaintValue.call(this,"fill-color",n,i);for(var o=this._paintTransitions["fill-outline-color"];o;){var a=o&&o.declaration&&o.declaration.value;if(!a)return t.prototype.getPaintValue.call(r,"fill-color",n,i);o=o.oldTransition}}return t.prototype.getPaintValue.call(this,e,n,i)},e.prototype.getPaintValueStopZoomLevels=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):t.prototype.getPaintValueStopZoomLevels.call(this,e)},e.prototype.getPaintInterpolationT=function(e,n){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.getPaintInterpolationT.call(this,"fill-color",n):t.prototype.getPaintInterpolationT.call(this,e,n)},e.prototype.isPaintValueFeatureConstant=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):t.prototype.isPaintValueFeatureConstant.call(this,e)},e.prototype.isPaintValueZoomConstant=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.isPaintValueZoomConstant.call(this,"fill-color"):t.prototype.isPaintValueZoomConstant.call(this,e)},e.prototype.createBucket=function(t){return new r(t)},e}(i);e.exports=o},{"../../data/bucket/fill_bucket":4,"../style_layer":67}],71:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/line_bucket"),o=t("../../util/util"),a=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,n,i){var r=t.prototype.getPaintValue.call(this,e,n,i);if(r&&"line-dasharray"===e){var a=this.getPaintValue("line-width",o.extend({},n,{zoom:Math.floor(n.zoom)}),i);r.fromScale*=a,r.toScale*=a}return r},e.prototype.createBucket=function(t){return new r(t)},e}(i);e.exports=a},{"../../data/bucket/line_bucket":6,"../../util/util":131,"../style_layer":67}],72:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/symbol_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayoutValue=function(e,n,i){var r=t.prototype.getLayoutValue.call(this,e,n,i);if("auto"!==r)return r;switch(e){case"text-rotation-alignment":case"icon-rotation-alignment":return"line"===this.getLayoutValue("symbol-placement",n,i)?"map":"viewport";case"text-pitch-alignment":return this.getLayoutValue("text-rotation-alignment",n,i);default:return r}},e.prototype.createBucket=function(t){return new r(t)},e}(i);e.exports=o},{"../../data/bucket/symbol_bucket":7,"../style_layer":67}],73:[function(t,e,n){"use strict";var i=t("./style_layer"),r=t("../util/util"),o=t("feature-filter"),a=t("mapbox-gl-style-spec/lib/group_by_layout"),s=function(t){t&&this.replace(t)};s.prototype.replace=function(t){var e=this;this.symbolOrder=[];for(var n=0,i=t;n<i.length;n+=1){var r=i[n];"symbol"===r.type&&e.symbolOrder.push(r.id)}this._layerConfigs={},this._layers={},this.update(t,[])},s.prototype.update=function(t,e,n){for(var s=this,u=0,l=t;u<l.length;u+=1){var c=l[u];s._layerConfigs[c.id]=c;var h=s._layers[c.id]=i.create(c);h.updatePaintTransitions({},{transition:!1}),h.filter=o(h.filter)}for(var f=0,p=e;f<p.length;f+=1){var d=p[f];delete s._layerConfigs[d],delete s._layers[d]}n&&(this.symbolOrder=n),this.familiesBySource={};for(var g=a(r.values(this._layerConfigs)),m=0,y=g;m<y.length;m+=1){var v=y[m],b=v.map(function(t){return s._layers[t.id]}),_=b[0];if(!_.layout||"none"!==_.layout.visibility){var x=_.source||"",w=s.familiesBySource[x];w||(w=s.familiesBySource[x]={});var E=_.sourceLayer||"_geojsonTileLayer",S=w[E];S||(S=w[E]=[]),S.push(b)}}},e.exports=s},{"../util/util":131,"./style_layer":67,"feature-filter":145,"mapbox-gl-style-spec/lib/group_by_layout":171}],74:[function(t,e,n){"use strict";e.exports=t("mapbox-gl-style-spec/reference/latest.min")},{"mapbox-gl-style-spec/reference/latest.min":194}],75:[function(t,e,n){"use strict";function i(t,e,n){if(void 0!==t&&void 0!==e)return{from:t.to,fromScale:t.toScale,to:e.to,toScale:e.toScale,t:n}}var r=t("../util/util"),o=t("../util/interpolate"),a={lastIntegerZoom:0,lastIntegerZoomTime:0,lastZoom:0},s=function(t,e,n,r,s){this.declaration=e,this.startTime=this.endTime=(new Date).getTime(),this.oldTransition=n,this.duration=r.duration||0,this.delay=r.delay||0,this.zoomTransitioned="piecewise-constant"===t.function&&t.transition,this.interp=this.zoomTransitioned?i:o[t.type],this.zoomHistory=s||a,this.instant()||(this.endTime=this.startTime+this.duration+this.delay),n&&n.endTime<=this.startTime&&delete n.oldTransition};s.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},s.prototype.calculate=function(t,e,n){var i=this._calculateTargetValue(t,e);if(this.instant())return i;if(n=n||Date.now(),n>=this.endTime)return i;var o=this.oldTransition.calculate(t,e,this.startTime),a=r.easeCubicInOut((n-this.startTime-this.delay)/this.duration);return this.interp(o,i,a)},s.prototype._calculateTargetValue=function(t,e){if(!this.zoomTransitioned)return this.declaration.calculate(t,e);var n=t.zoom,i=this.zoomHistory.lastIntegerZoom,r=n>i?2:.5,a=this.declaration.calculate({zoom:n>i?n-1:n+1},e),s=this.declaration.calculate({zoom:n},e),u=Math.min((Date.now()-this.zoomHistory.lastIntegerZoomTime)/this.duration,1),l=Math.abs(n-i),c=o(u,1,l);return void 0!==a&&void 0!==s?{from:a,fromScale:r,to:s,toScale:1,t:c}:void 0},e.exports=s},{"../util/interpolate":123,"../util/util":131}],76:[function(t,e,n){"use strict";e.exports=t("mapbox-gl-style-spec/lib/validate_style.min"),e.exports.emitErrors=function(t,e){if(e&&e.length){for(var n=0;n<e.length;n++)t.fire("error",{error:new Error(e[n].message)});return!0}return!1}},{"mapbox-gl-style-spec/lib/validate_style.min":193}],77:[function(t,e,n){"use strict";var i=t("point-geometry"),r=function(t){function e(e,n,i,r){t.call(this,e,n),this.angle=i,void 0!==r&&(this.segment=r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);e.exports=r},{"point-geometry":200}],78:[function(t,e,n){"use strict";function i(t,e,n,i,r){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=t[a-1],h=t[a],f=t[a+1];if(!f)return!1;var p=c.angleTo(h)-h.angleTo(f);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:p}),l+=p;s-u[0].distance>i;)l-=u.shift().angleDelta;if(l>r)return!1;a++,s+=h.dist(f)}return!0}e.exports=i},{}],79:[function(t,e,n){"use strict";function i(t,e,n,i,o){for(var a=[],s=0;s<t.length;s++)for(var u,l=t[s],c=0;c<l.length-1;c++){var h=l[c],f=l[c+1];h.x<e&&f.x<e||(h.x<e?h=new r(e,h.y+(f.y-h.y)*((e-h.x)/(f.x-h.x)))._round():f.x<e&&(f=new r(e,h.y+(f.y-h.y)*((e-h.x)/(f.x-h.x)))._round()),h.y<n&&f.y<n||(h.y<n?h=new r(h.x+(f.x-h.x)*((n-h.y)/(f.y-h.y)),n)._round():f.y<n&&(f=new r(h.x+(f.x-h.x)*((n-h.y)/(f.y-h.y)),n)._round()),h.x>=i&&f.x>=i||(h.x>=i?h=new r(i,h.y+(f.y-h.y)*((i-h.x)/(f.x-h.x)))._round():f.x>=i&&(f=new r(i,h.y+(f.y-h.y)*((i-h.x)/(f.x-h.x)))._round()),h.y>=o&&f.y>=o||(h.y>=o?h=new r(h.x+(f.x-h.x)*((o-h.y)/(f.y-h.y)),o)._round():f.y>=o&&(f=new r(h.x+(f.x-h.x)*((o-h.y)/(f.y-h.y)),o)._round()),u&&h.equals(u[u.length-1])||(u=[h],a.push(u)),u.push(f)))))}return a}var r=t("point-geometry");e.exports=i},{"point-geometry":200}],80:[function(t,e,n){"use strict";var i=t("../util/struct_array"),r=t("point-geometry"),o=i({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});Object.defineProperty(o.prototype.StructType.prototype,"anchorPoint",{get:function(){return new r(this.anchorPointX,this.anchorPointY)}}),e.exports=o},{"../util/struct_array":129,"point-geometry":200}],81:[function(t,e,n){"use strict";var i=function(t,e,n,i,r,o,a,s,u,l,c){var h=a.top*s-u,f=a.bottom*s+u,p=a.left*s-u,d=a.right*s+u;if(this.boxStartIndex=t.length,l){var g=f-h,m=d-p;if(g>0)if(g=Math.max(10*s,g),c){var y=e[n.segment+1].sub(e[n.segment])._unit()._mult(m),v=[n.sub(y),n.add(y)];this._addLineCollisionBoxes(t,v,n,0,m,g,i,r,o)}else this._addLineCollisionBoxes(t,e,n,n.segment,m,g,i,r,o)}else t.emplaceBack(n.x,n.y,p,h,d,f,1/0,i,r,o,0,0,0,0,0);this.boxEndIndex=t.length};i.prototype._addLineCollisionBoxes=function(t,e,n,i,r,o,a,s,u){var l=o/2,c=Math.floor(r/l),h=-o/2,f=this.boxes,p=n,d=i+1,g=h;do{if(d--,d<0)return f;g-=e[d].dist(p),p=e[d]}while(g>-r/2);for(var m=e[d].dist(e[d+1]),y=0;y<c;y++){for(var v=-r/2+y*l;g+m<v;){if(g+=m,d++,d+1>=e.length)return f;m=e[d].dist(e[d+1])}var b=v-g,_=e[d],x=e[d+1],w=x.sub(_)._unit()._mult(b)._add(_)._round(),E=Math.max(Math.abs(v-h)-l/2,0),S=r/2/E;t.emplaceBack(w.x,w.y,-o/2,-o/2,o/2,o/2,S,a,s,u,0,0,0,0,0)}return f},e.exports=i},{}],82:[function(t,e,n){"use strict";var i=t("point-geometry"),r=t("../data/extent"),o=t("grid-index"),a=t("../util/intersection_tests"),s=function(t,e,n){if("object"==typeof t){var i=t;n=e,t=i.angle,e=i.pitch,this.grid=new o(i.grid),this.ignoredGrid=new o(i.ignoredGrid)}else this.grid=new o(r,12,6),this.ignoredGrid=new o(r,12,0);this.minScale=.5,this.maxScale=2,this.angle=t,this.pitch=e;var a=Math.sin(t),s=Math.cos(t);if(this.rotationMatrix=[s,-a,a,s],this.reverseRotationMatrix=[s,a,-a,s],this.yStretch=1/Math.cos(e/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3),this.collisionBoxArray=n,0===n.length){n.emplaceBack();var u=32767;n.emplaceBack(0,0,0,-u,0,u,u,0,0,0,0,0,0,0,0,0),n.emplaceBack(r,0,0,-u,0,u,u,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,0,-u,0,u,0,u,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,r,-u,0,u,0,u,0,0,0,0,0,0,0,0,0)}this.tempCollisionBox=n.get(0),this.edges=[n.get(1),n.get(2),n.get(3),n.get(4)]};s.prototype.serialize=function(t){var e=this.grid.toArrayBuffer(),n=this.ignoredGrid.toArrayBuffer();return t&&(t.push(e),t.push(n)),{angle:this.angle,pitch:this.pitch,grid:e,ignoredGrid:n}},s.prototype.placeCollisionFeature=function(t,e,n){for(var r=this,o=this.collisionBoxArray,a=this.minScale,s=this.rotationMatrix,u=this.yStretch,l=t.boxStartIndex;l<t.boxEndIndex;l++){var c=o.get(l),h=c.anchorPoint._matMult(s),f=h.x,p=h.y,d=f+c.x1,g=p+c.y1*u,m=f+c.x2,y=p+c.y2*u;if(c.bbox0=d,c.bbox1=g,c.bbox2=m,c.bbox3=y,!e)for(var v=r.grid.query(d,g,m,y),b=0;b<v.length;b++){var _=o.get(v[b]),x=_.anchorPoint._matMult(s);if(a=r.getPlacementScale(a,h,c,x,_),a>=r.maxScale)return a}if(n){var w;if(r.angle){var E=r.reverseRotationMatrix,S=new i(c.x1,c.y1).matMult(E),M=new i(c.x2,c.y1).matMult(E),T=new i(c.x1,c.y2).matMult(E),C=new i(c.x2,c.y2).matMult(E);w=r.tempCollisionBox,w.anchorPointX=c.anchorPoint.x,w.anchorPointY=c.anchorPoint.y,w.x1=Math.min(S.x,M.x,T.x,C.x),w.y1=Math.min(S.y,M.x,T.x,C.x),w.x2=Math.max(S.x,M.x,T.x,C.x),w.y2=Math.max(S.y,M.x,T.x,C.x),w.maxScale=c.maxScale}else w=c;for(var I=0;I<this.edges.length;I++){var N=r.edges[I];if(a=r.getPlacementScale(a,c.anchorPoint,w,N.anchorPoint,N),a>=r.maxScale)return a}}}return a},s.prototype.queryRenderedSymbols=function(t,e){var n={},r=[];if(0===t.length||0===this.grid.length&&0===this.ignoredGrid.length)return r;for(var o=this.collisionBoxArray,s=this.rotationMatrix,u=this.yStretch,l=[],c=1/0,h=1/0,f=-(1/0),p=-(1/0),d=0;d<t.length;d++)for(var g=t[d],m=0;m<g.length;m++){var y=g[m].matMult(s);c=Math.min(c,y.x),h=Math.min(h,y.y),f=Math.max(f,y.x),p=Math.max(p,y.y),l.push(y)}for(var v=this.grid.query(c,h,f,p),b=this.ignoredGrid.query(c,h,f,p),_=0;_<b.length;_++)v.push(b[_]);for(var x=Math.pow(2,Math.ceil(Math.log(e)/Math.LN2*10)/10),w=0;w<v.length;w++){var E=o.get(v[w]),S=E.sourceLayerIndex,M=E.featureIndex;if(void 0===n[S]&&(n[S]={}),!n[S][M]&&!(x<E.placementScale||x>E.maxScale)){var T=E.anchorPoint.matMult(s),C=T.x+E.x1/e,I=T.y+E.y1/e*u,N=T.x+E.x2/e,P=T.y+E.y2/e*u,L=[new i(C,I),new i(N,I),new i(N,P),new i(C,P)];a.polygonIntersectsPolygon(l,L)&&(n[S][M]=!0,r.push(v[w]))}}return r},s.prototype.getPlacementScale=function(t,e,n,i,r){var o=e.x-i.x,a=e.y-i.y,s=(r.x1-n.x2)/o,u=(r.x2-n.x1)/o,l=(r.y1-n.y2)*this.yStretch/a,c=(r.y2-n.y1)*this.yStretch/a;(isNaN(s)||isNaN(u))&&(s=u=1),(isNaN(l)||isNaN(c))&&(l=c=1);var h=Math.min(Math.max(s,u),Math.max(l,c)),f=r.maxScale,p=n.maxScale;return h>f&&(h=f),h>p&&(h=p),h>t&&h>=r.placementScale&&(t=h),t},s.prototype.insertCollisionFeature=function(t,e,n){for(var i=this,r=n?this.ignoredGrid:this.grid,o=this.collisionBoxArray,a=t.boxStartIndex;a<t.boxEndIndex;a++){var s=o.get(a);s.placementScale=e,e<i.maxScale&&r.insert(a,s.bbox0,s.bbox1,s.bbox2,s.bbox3)}},e.exports=s},{"../data/extent":11,"../util/intersection_tests":124,"grid-index":157,"point-geometry":200}],83:[function(t,e,n){"use strict";function i(t,e,n,i,o,a,s,u,l){var c=i?.6*a*s:0,h=Math.max(i?i.right-i.left:0,o?o.right-o.left:0),f=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;e-h*s<e/4&&(e=h*s+e/4);var p=2*a,d=f?e/2*u%e:(h/2+p)*s*u%e;return r(t,d,e,c,n,h*s,f,!1,l)}function r(t,e,n,i,u,l,c,h,f){for(var p=l/2,d=0,g=0;g<t.length-1;g++)d+=t[g].dist(t[g+1]);for(var m=0,y=e-n,v=[],b=0;b<t.length-1;b++){for(var _=t[b],x=t[b+1],w=_.dist(x),E=x.angleTo(_);y+n<m+w;){y+=n;var S=(y-m)/w,M=o(_.x,x.x,S),T=o(_.y,x.y,S);if(M>=0&&M<f&&T>=0&&T<f&&y-p>=0&&y+p<=d){var C=new a(M,T,E,b)._round();i&&!s(t,C,l,i,u)||v.push(C)}}m+=w}return h||v.length||c||(v=r(t,m/2,n,i,u,l,c,!0,f)),v}var o=t("../util/interpolate"),a=t("../symbol/anchor"),s=t("./check_max_angle");e.exports=i},{"../symbol/anchor":77,"../util/interpolate":123,"./check_max_angle":78}],84:[function(t,e,n){"use strict";var i=t("shelf-pack"),r=t("../util/util"),o=4,a=128,s=2048,u=function(){this.width=a,this.height=a,this.bin=new i(this.width,this.height),this.index={},this.ids={},this.data=new Uint8Array(this.width*this.height)};u.prototype.getGlyphs=function(){var t,e,n,i={};for(var r in this.ids)t=r.split("#"),e=t[0],n=t[1],i[e]||(i[e]=[]),i[e].push(n);return i},u.prototype.getRects=function(){var t,e,n,i=this,r={};for(var o in this.ids)t=o.split("#"),e=t[0],n=t[1],r[e]||(r[e]={}),r[e][n]=i.index[o];return r},u.prototype.addGlyph=function(t,e,n,i){var o=this;if(!n)return null;var a=e+"#"+n.id;if(this.index[a])return this.ids[a].indexOf(t)<0&&this.ids[a].push(t),this.index[a];if(!n.bitmap)return null;var s=n.width+2*i,u=n.height+2*i,l=1,c=s+2*l,h=u+2*l;c+=4-c%4,h+=4-h%4;var f=this.bin.packOne(c,h);if(f||(this.resize(),f=this.bin.packOne(c,h)),!f)return r.warnOnce("glyph bitmap overflow"),null;this.index[a]=f,this.ids[a]=[t];for(var p=this.data,d=n.bitmap,g=0;g<u;g++)for(var m=o.width*(f.y+g+l)+f.x+l,y=s*g,v=0;v<s;v++)p[m+v]=d[y+v];return this.dirty=!0,f},u.prototype.resize=function(){var t=this,e=this.width,n=this.height;if(!(e>=s||n>=s)){this.texture&&(this.gl&&this.gl.deleteTexture(this.texture),this.texture=null),this.width*=o,this.height*=o,this.bin.resize(this.width,this.height);for(var i=new ArrayBuffer(this.width*this.height),r=0;r<n;r++){var a=new Uint8Array(t.data.buffer,n*r,e),u=new Uint8Array(i,n*r*o,e);u.set(a)}this.data=new Uint8Array(i)}},u.prototype.bind=function(t){this.gl=t,this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,null))},u.prototype.updateTexture=function(t){this.bind(t),this.dirty&&(t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data),this.dirty=!1)},e.exports=u},{"../util/util":131,"shelf-pack":202}],85:[function(t,e,n){"use strict";function i(t,e,n,i){return i=i||"abc",n.replace("{s}",i[t.length%i.length]).replace("{fontstack}",t).replace("{range}",e)}var r=t("../util/mapbox").normalizeGlyphsURL,o=t("../util/ajax"),a=t("../util/verticalize_punctuation"),s=t("../util/glyphs"),u=t("../symbol/glyph_atlas"),l=t("pbf"),c=function(t,e,n){var i=1;this.advance=t.advance,this.left=t.left-n-i,this.top=t.top+n+i,this.rect=e},h=function(t){this.url=t&&r(t),this.atlases={},this.stacks={},this.loading={}};h.prototype.getSimpleGlyphs=function(t,e,n,i){var r=this;void 0===this.stacks[t]&&(this.stacks[t]={}),void 0===this.atlases[t]&&(this.atlases[t]=new u);for(var o={},s=this.stacks[t],l=this.atlases[t],h=3,f={},p=0,d=function(e){var i=Math.floor(e/256);if(s[i]){var r=s[i].glyphs[e],a=l.addGlyph(n,t,r,h);r&&(o[e]=new c(r,a,h))}else void 0===f[i]&&(f[i]=[],p++),f[i].push(e)},g=0;g<e.length;g++){var m=e[g],y=String.fromCharCode(m);d(m),a.lookup[y]&&d(a.lookup[y].charCodeAt(0))}p||i(void 0,o,t);var v=function(e,a,s){if(!e)for(var u=r.stacks[t][a]=s.stacks[0],d=0;d<f[a].length;d++){var g=f[a][d],m=u.glyphs[g],y=l.addGlyph(n,t,m,h);m&&(o[g]=new c(m,y,h))}p--,p||i(void 0,o,t)};for(var b in f)r.loadRange(t,b,v)},h.prototype.loadRange=function(t,e,n){if(256*e>65535)return n("glyphs > 65535 not supported");void 0===this.loading[t]&&(this.loading[t]={});var r=this.loading[t];if(r[e])r[e].push(n);else{r[e]=[n];var a=256*e+"-"+(256*e+255),u=i(t,a,this.url);o.getArrayBuffer(u,function(t,n){for(var i=!t&&new s(new l(n.data)),o=0;o<r[e].length;o++)r[e][o](t,e,i);delete r[e]})}},h.prototype.getGlyphAtlas=function(t){return this.atlases[t]},e.exports=h},{"../symbol/glyph_atlas":84,"../util/ajax":111,"../util/glyphs":122,"../util/mapbox":127,"../util/verticalize_punctuation":133,pbf:198}],86:[function(t,e,n){"use strict";e.exports=function(t){function e(e){s.push(t[e]),u++}function n(t,e,n){var i=a[t];return delete a[t],a[e]=i,s[i].geometry[0].pop(),s[i].geometry[0]=s[i].geometry[0].concat(n[0]),i}function i(t,e,n){var i=o[e];return delete o[e],o[t]=i,s[i].geometry[0].shift(),s[i].geometry[0]=n[0].concat(s[i].geometry[0]),i}function r(t,e,n){var i=n?e[0][e[0].length-1]:e[0][0];return t+":"+i.x+":"+i.y}for(var o={},a={},s=[],u=0,l=0;l<t.length;l++){var c=t[l],h=c.geometry,f=c.text;if(f){var p=r(f,h),d=r(f,h,!0);if(p in a&&d in o&&a[p]!==o[d]){var g=i(p,d,h),m=n(p,d,s[g].geometry);delete o[p],delete a[d],a[r(f,s[m].geometry,!0)]=m,s[g].geometry=null}else p in a?n(p,d,h):d in o?i(p,d,h):(e(l),o[p]=u-1,a[d]=u-1)}else e(l)}return s.filter(function(t){return t.geometry})}},{}],87:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s,u,l,c){this.anchorPoint=t,this.tl=e,this.tr=n,this.bl=i,this.br=r,this.tex=o,this.anchorAngle=a,this.glyphAngle=s,this.minScale=u,this.maxScale=l,this.writingMode=c}function r(t,e,n,r,o,a,l,c,h){var f,p,d,g,m=e.image.rect,y=o.layout,v=1,b=e.left-v,_=b+m.w/e.image.pixelRatio,x=e.top-v,w=x+m.h/e.image.pixelRatio;if("none"!==y["icon-text-fit"]&&l){var E=_-b,S=w-x,M=y["text-size"]/24,T=l.left*M,C=l.right*M,I=l.top*M,N=l.bottom*M,P=C-T,L=N-I,A=y["icon-text-fit-padding"][0],k=y["icon-text-fit-padding"][1],R=y["icon-text-fit-padding"][2],O=y["icon-text-fit-padding"][3],D="width"===y["icon-text-fit"]?.5*(L-S):0,F="height"===y["icon-text-fit"]?.5*(P-E):0,z="width"===y["icon-text-fit"]||"both"===y["icon-text-fit"]?P:E,j="height"===y["icon-text-fit"]||"both"===y["icon-text-fit"]?L:S;f=new s(T+F-O,I+D-A),p=new s(T+F+k+z,I+D-A),d=new s(T+F+k+z,I+D+R+j),g=new s(T+F-O,I+D+R+j)}else f=new s(b,x),p=new s(_,x),d=new s(_,w),g=new s(b,w);var B=o.getLayoutValue("icon-rotate",c,h)*Math.PI/180;if(a){var G=r[t.segment];if(t.y===G.y&&t.x===G.x&&t.segment+1<r.length){var U=r[t.segment+1];B+=Math.atan2(t.y-U.y,t.x-U.x)+Math.PI}else B+=Math.atan2(t.y-G.y,t.x-G.x)}if(B){var V=Math.sin(B),K=Math.cos(B),H=[K,-V,V,K];f=f.matMult(H),p=p.matMult(H),g=g.matMult(H),d=d.matMult(H)}return[new i(new s(t.x,t.y),f,p,g,d,e.image.rect,0,0,u,1/0)]}function o(t,e,n,r,o,l){for(var c=o.layout["text-rotate"]*Math.PI/180,h=o.layout["text-keep-upright"],f=e.positionedGlyphs,p=[],d=0;d<f.length;d++){var g=f[d],m=g.glyph;if(m){var y=m.rect;if(y){var v,b=(g.x+m.advance/2)*n,_=u;l?(v=[],_=a(v,t,b,r,t.segment,!0),h&&(_=Math.min(_,a(v,t,b,r,t.segment,!1)))):v=[{anchorPoint:new s(t.x,t.y),offset:0,angle:0,maxScale:1/0,minScale:u}];var x=g.x+m.left,w=g.y-m.top,E=x+y.w,S=w+y.h,M=new s(g.x,m.advance/2),T=new s(x,w),C=new s(E,w),I=new s(x,S),N=new s(E,S);0!==g.angle&&(T._sub(M)._rotate(g.angle)._add(M),C._sub(M)._rotate(g.angle)._add(M),I._sub(M)._rotate(g.angle)._add(M),N._sub(M)._rotate(g.angle)._add(M));for(var P=0;P<v.length;P++){var L=v[P],A=T,k=C,R=I,O=N;if(c){var D=Math.sin(c),F=Math.cos(c),z=[F,-D,D,F];A=A.matMult(z),k=k.matMult(z),R=R.matMult(z),O=O.matMult(z)}var j=Math.max(L.minScale,_),B=(t.angle+L.offset+2*Math.PI)%(2*Math.PI),G=(L.angle+L.offset+2*Math.PI)%(2*Math.PI);p.push(new i(L.anchorPoint,A,k,R,O,y,B,G,j,L.maxScale,e.writingMode))}}}}return p}function a(t,e,n,i,r,o){var a=!o;n<0&&(o=!o),o&&r++;var l=new s(e.x,e.y),c=i[r],h=1/0;n=Math.abs(n);for(var f=u;;){var p=l.dist(c),d=n/p,g=Math.atan2(c.y-l.y,c.x-l.x);if(o||(g+=Math.PI),t.push({anchorPoint:l,offset:a?Math.PI:0,minScale:d,maxScale:h,angle:(g+2*Math.PI)%(2*Math.PI)}),d<=f)break;for(l=c;l.equals(c);)if(r+=o?1:-1,c=i[r],!c)return d;var m=c.sub(l)._unit();l=l.sub(m._mult(p)),h=d}return f}var s=t("point-geometry");e.exports={getIconQuads:r,getGlyphQuads:o,SymbolQuad:i};var u=.5},{"point-geometry":200}],88:[function(t,e,n){"use strict";var i=t("../util/token");e.exports=function(t,e){var n=i(t.properties,e["text-field"]);if(n){n=n.toString();var r=e["text-transform"];return"uppercase"===r?n=n.toLocaleUpperCase():"lowercase"===r&&(n=n.toLocaleLowerCase()),n}}},{"../util/token":130}],89:[function(t,e,n){"use strict";function i(t,e,n,i,r){this.codePoint=t,this.x=e,this.y=n,this.glyph=i||null,this.angle=r}function r(t,e,n,i,r,o,a){this.positionedGlyphs=t,this.text=e,this.top=n,this.bottom=i,this.left=r,this.right=o,this.writingMode=a}function o(t,e){for(var n=[],i=0,r=0,o=e;r<o.length;r+=1){
var a=o[r];n.push(t.substring(i,a)),i=a}return i<t.length&&n.push(t.substring(i,t.length)),n}function a(t,e,n,i,a,s,u,l,c,h,d){var g=t.trim();d===x.vertical&&(g=b(g));var m,y=[],v=new r(y,g,c[1],c[1],c[0],c[0],d);return m=_.processBidirectionalText?_.processBidirectionalText(g,f(g,l,n,e)):o(g,f(g,l,n,e)),p(v,e,m,i,a,s,u,c,d,l,h),!!y.length&&v}function s(t,e,n,i){var r=0;for(var o in t){var a=i[t.charCodeAt(o)];a&&(r+=a.advance+e)}var s=Math.max(1,Math.ceil(r/n));return r/s}function u(t,e,n,i){var r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function l(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function c(t,e,n,i,r,o){for(var a=null,s=u(e,n,r,o),l=0,c=i;l<c.length;l+=1){var h=c[l],f=e-h.x,p=u(f,n,r,o)+h.badness;p<=s&&(a=h,s=p)}return{index:t,x:e,priorBreak:a,badness:s}}function h(t){return t?h(t.priorBreak).concat(t.index):[]}function f(t,e,n,i){if(!n)return[];if(!t)return[];for(var r=[],o=s(t,e,n,i),a=0,u=0;u<t.length;u++){var f=t.charCodeAt(u),p=i[f];p&&!w[f]&&(a+=p.advance+e),u<t.length-1&&(E[f]||v.charAllowsIdeographicBreaking(f))&&r.push(c(u+1,a,o,r,l(f,t.charCodeAt(u+1)),!1))}return h(c(t.length,a,o,r,0,!0))}function p(t,e,n,r,o,a,s,u,l,c,h){var f=-17,p=0,m=f,y=0,b=t.positionedGlyphs;for(var _ in n){var w=n[_].trim();if(w.length){for(var E=b.length,S=0;S<w.length;S++){var M=w.charCodeAt(S),T=e[M];T&&(v.charHasUprightVerticalOrientation(M)&&l!==x.horizontal?(b.push(new i(M,p,0,T,-Math.PI/2)),p+=h+c):(b.push(new i(M,p,m,T,0)),p+=T.advance+c))}if(b.length!==E){var C=p-c;y=Math.max(C,y),d(b,e,E,b.length-1,s)}p=0,m+=r}else m+=r}g(b,s,o,a,y,r,n.length,u);var I=n.length*r;t.top+=-a*I,t.bottom=t.top+I,t.left+=-o*y,t.right=t.left+y}function d(t,e,n,i,r){if(r)for(var o=e[t[i].codePoint].advance,a=(t[i].x+o)*r,s=n;s<=i;s++)t[s].x-=a}function g(t,e,n,i,r,o,a,s){for(var u=(e-n)*r+s[0],l=(-i*a+.5)*o+s[1],c=0;c<t.length;c++)t[c].x+=u,t[c].y+=l}function m(t,e){if(!t||!t.rect)return null;var n=e[0],i=e[1],r=n-t.width/2,o=r+t.width,a=i-t.height/2,s=a+t.height;return new y(t,a,s,r,o)}function y(t,e,n,i,r){this.image=t,this.top=e,this.bottom=n,this.left=i,this.right=r}var v=t("../util/script_detection"),b=t("../util/verticalize_punctuation"),_=t("../source/rtl_text_plugin"),x={horizontal:1,vertical:2};e.exports={shapeText:a,shapeIcon:m,WritingMode:x};var w={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},E={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0}},{"../source/rtl_text_plugin":51,"../util/script_detection":128,"../util/verticalize_punctuation":133}],90:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s,u,l,c){var h,f,p=i*e+n,d=s*o+a;if(c)for(d-=o,f=-1;f<=l;f++,p=((f+l)%l+i)*e+n,d+=o)for(h=-1;h<=u;h++)r[d+h]=t[p+(h+u)%u];else for(f=0;f<l;f++,p+=e,d+=o)for(h=0;h<u;h++)r[d+h]=t[p+h]}var r=t("shelf-pack"),o=t("../util/browser"),a=t("../util/util"),s=function(t,e,n,i,r){this.rect=t,this.width=e,this.height=n,this.sdf=i,this.pixelRatio=r},u=function(t,e){this.width=t,this.height=e,this.bin=new r(t,e),this.images={},this.data=!1,this.texture=0,this.filter=0,this.pixelRatio=1,this.dirty=!0};u.prototype.allocateImage=function(t,e){t/=this.pixelRatio,e/=this.pixelRatio;var n=2,i=t+n+(4-(t+n)%4),r=e+n+(4-(e+n)%4),o=this.bin.packOne(i,r);return o?o:(a.warnOnce("SpriteAtlas out of space."),null)},u.prototype.getImage=function(t,e){if(this.images[t])return this.images[t];if(!this.sprite)return null;var n=this.sprite.getSpritePosition(t);if(!n.width||!n.height)return null;var i=this.allocateImage(n.width,n.height);if(!i)return null;var r=new s(i,n.width/n.pixelRatio,n.height/n.pixelRatio,n.sdf,n.pixelRatio/this.pixelRatio);return this.images[t]=r,this.copy(i,n,e),r},u.prototype.getPosition=function(t,e){var n=this.getImage(t,e),i=n&&n.rect;if(!i)return null;var r=n.width*n.pixelRatio,o=n.height*n.pixelRatio,a=1;return{size:[n.width,n.height],tl:[(i.x+a)/this.width,(i.y+a)/this.height],br:[(i.x+a+r)/this.width,(i.y+a+o)/this.height]}},u.prototype.allocate=function(){var t=this;if(!this.data){var e=Math.floor(this.width*this.pixelRatio),n=Math.floor(this.height*this.pixelRatio);this.data=new Uint32Array(e*n);for(var i=0;i<this.data.length;i++)t.data[i]=0}},u.prototype.copy=function(t,e,n){if(this.sprite.imgData){var r=new Uint32Array(this.sprite.imgData.buffer);this.allocate();var o=this.data,a=1;i(r,this.sprite.width,e.x,e.y,o,this.width*this.pixelRatio,(t.x+a)*this.pixelRatio,(t.y+a)*this.pixelRatio,e.width,e.height,n),this.dirty=!0}},u.prototype.setSprite=function(t){t&&(this.pixelRatio=o.devicePixelRatio>1?2:1,this.canvas&&(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio)),this.sprite=t},u.prototype.addIcons=function(t,e){for(var n=this,i=0;i<t.length;i++)n.getImage(t[i]);e(null,this.images)},u.prototype.bind=function(t,e){var n=!1;this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n=!0);var i=e?t.LINEAR:t.NEAREST;i!==this.filter&&(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i),this.filter=i),this.dirty&&(this.allocate(),n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),this.dirty=!1)},e.exports=u},{"../util/browser":112,"../util/util":131,"shelf-pack":202}],91:[function(t,e,n){"use strict";var i=t("../util/struct_array"),r=t("point-geometry"),o=i({members:[{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"glyphQuadStartIndex"},{type:"Uint16",name:"glyphQuadEndIndex"},{type:"Uint16",name:"iconQuadStartIndex"},{type:"Uint16",name:"iconQuadEndIndex"},{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int8",name:"index"},{type:"Uint8",name:"writingModes"}]});Object.defineProperty(o.prototype.StructType.prototype,"anchorPoint",{get:function(){return new r(this.anchorPointX,this.anchorPointY)}}),e.exports=o},{"../util/struct_array":129,"point-geometry":200}],92:[function(t,e,n){"use strict";var i=t("../util/struct_array"),r=t("point-geometry"),o=t("./quads").SymbolQuad,a=i({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"tlX"},{type:"Float32",name:"tlY"},{type:"Float32",name:"trX"},{type:"Float32",name:"trY"},{type:"Float32",name:"blX"},{type:"Float32",name:"blY"},{type:"Float32",name:"brX"},{type:"Float32",name:"brY"},{type:"Int16",name:"texH"},{type:"Int16",name:"texW"},{type:"Int16",name:"texX"},{type:"Int16",name:"texY"},{type:"Float32",name:"anchorAngle"},{type:"Float32",name:"glyphAngle"},{type:"Float32",name:"maxScale"},{type:"Float32",name:"minScale"},{type:"Uint8",name:"writingMode"}]});Object.defineProperty(a.prototype.StructType.prototype,"anchorPoint",{get:function(){return new r(this.anchorPointX,this.anchorPointY)}}),Object.defineProperty(a.prototype.StructType.prototype,"SymbolQuad",{get:function(){return new o(this.anchorPoint,new r(this.tlX,this.tlY),new r(this.trX,this.trY),new r(this.blX,this.blY),new r(this.brX,this.brY),{x:this.texX,y:this.texY,h:this.texH,w:this.texW,height:this.texH,width:this.texW},this.anchorAngle,this.glyphAngle,this.minScale,this.maxScale,this.writingMode)}}),e.exports=a},{"../util/struct_array":129,"./quads":87,"point-geometry":200}],93:[function(t,e,n){"use strict";var i=t("../util/dom"),r=t("point-geometry"),o={scrollZoom:t("./handler/scroll_zoom"),boxZoom:t("./handler/box_zoom"),dragRotate:t("./handler/drag_rotate"),dragPan:t("./handler/drag_pan"),keyboard:t("./handler/keyboard"),doubleClickZoom:t("./handler/dblclick_zoom"),touchZoomRotate:t("./handler/touch_zoom_rotate")};e.exports=function(t,e){function n(t){y("mouseout",t)}function a(e){t.stop(),w=i.mousePos(b,e),y("mousedown",e),x=!0}function s(e){var n=t.dragRotate&&t.dragRotate.isActive();_&&!n&&y("contextmenu",_),_=null,x=!1,y("mouseup",e)}function u(e){if(!(t.dragPan&&t.dragPan.isActive()||t.dragRotate&&t.dragRotate.isActive())){for(var n=e.toElement||e.target;n&&n!==b;)n=n.parentNode;n===b&&y("mousemove",e)}}function l(e){t.stop(),v("touchstart",e),!e.touches||e.touches.length>1||(E?(clearTimeout(E),E=null,y("dblclick",e)):E=setTimeout(p,300))}function c(t){v("touchmove",t)}function h(t){v("touchend",t)}function f(t){v("touchcancel",t)}function p(){E=null}function d(t){var e=i.mousePos(b,t);e.equals(w)&&y("click",t)}function g(t){y("dblclick",t),t.preventDefault()}function m(e){var n=t.dragRotate&&t.dragRotate.isActive();x||n?x&&(_=e):y("contextmenu",e),e.preventDefault()}function y(e,n){var r=i.mousePos(b,n);return t.fire(e,{lngLat:t.unproject(r),point:r,originalEvent:n})}function v(e,n){var o=i.touchPos(b,n),a=o.reduce(function(t,e,n,i){return t.add(e.div(i.length))},new r(0,0));return t.fire(e,{lngLat:t.unproject(a),point:a,lngLats:o.map(function(e){return t.unproject(e)},this),points:o,originalEvent:n})}var b=t.getCanvasContainer(),_=null,x=!1,w=null,E=null;for(var S in o)t[S]=new o[S](t,e),e.interactive&&e[S]&&t[S].enable(e[S]);b.addEventListener("mouseout",n,!1),b.addEventListener("mousedown",a,!1),b.addEventListener("mouseup",s,!1),b.addEventListener("mousemove",u,!1),b.addEventListener("touchstart",l,!1),b.addEventListener("touchend",h,!1),b.addEventListener("touchmove",c,!1),b.addEventListener("touchcancel",f,!1),b.addEventListener("click",d,!1),b.addEventListener("dblclick",g,!1),b.addEventListener("contextmenu",m,!1)}},{"../util/dom":119,"./handler/box_zoom":99,"./handler/dblclick_zoom":100,"./handler/drag_pan":101,"./handler/drag_rotate":102,"./handler/keyboard":103,"./handler/scroll_zoom":104,"./handler/touch_zoom_rotate":105,"point-geometry":200}],94:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/interpolate"),o=t("../util/browser"),a=t("../geo/lng_lat"),s=t("../geo/lng_lat_bounds"),u=t("point-geometry"),l=t("../util/evented"),c=function(t){function e(e,n){t.call(this),this.moving=!1,this.transform=e,this._bearingSnap=n.bearingSnap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCenter=function(){return this.transform.center},e.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e),this},e.prototype.panBy=function(t,e,n){return this.panTo(this.transform.center,i.extend({offset:u.convert(t).mult(-1)},e),n),this},e.prototype.panTo=function(t,e,n){return this.easeTo(i.extend({center:t},e),n)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},e.prototype.zoomTo=function(t,e,n){return this.easeTo(i.extend({zoom:t},e),n)},e.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},e.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},e.prototype.rotateTo=function(t,e,n){return this.easeTo(i.extend({bearing:t},e),n)},e.prototype.resetNorth=function(t,e){return this.rotateTo(0,i.extend({duration:1e3},t),e),this},e.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},e.prototype.fitBounds=function(t,e,n){e=i.extend({padding:0,offset:[0,0],maxZoom:this.getMaxZoom()},e),t=s.convert(t);var r=u.convert(e.offset),o=this.transform,a=o.project(t.getNorthWest()),l=o.project(t.getSouthEast()),c=l.sub(a),h=(o.width-2*e.padding-2*Math.abs(r.x))/c.x,f=(o.height-2*e.padding-2*Math.abs(r.y))/c.y;return e.center=o.unproject(a.add(l).div(2)),e.zoom=Math.min(o.scaleZoom(o.scale*Math.min(h,f)),e.maxZoom),e.bearing=0,e.linear?this.easeTo(e,n):this.flyTo(e,n)},e.prototype.jumpTo=function(t,e){this.stop();var n=this.transform,i=!1,r=!1,o=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(i=!0,n.zoom=+t.zoom),"center"in t&&(n.center=a.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(r=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),this.fire("movestart",e).fire("move",e),i&&this.fire("zoomstart",e).fire("zoom",e).fire("zoomend",e),r&&this.fire("rotate",e),o&&this.fire("pitch",e),this.fire("moveend",e)},e.prototype.easeTo=function(t,e){var n=this;this.stop(),t=i.extend({offset:[0,0],duration:500,easing:i.ease},t);var o,s,l=this.transform,c=u.convert(t.offset),h=this.getZoom(),f=this.getBearing(),p=this.getPitch(),d="zoom"in t?+t.zoom:h,g="bearing"in t?this._normalizeBearing(t.bearing,f):f,m="pitch"in t?+t.pitch:p;"center"in t?(o=a.convert(t.center),s=l.centerPoint.add(c)):"around"in t?(o=a.convert(t.around),s=l.locationPoint(o)):(s=l.centerPoint.add(c),o=l.pointLocation(s));var y=l.locationPoint(o);return t.animate===!1&&(t.duration=0),this.zooming=d!==h,this.rotating=f!==g,this.pitching=m!==p,t.smoothEasing&&0!==t.duration&&(t.easing=this._smoothOutEasing(t.duration)),t.noMoveStart||(this.moving=!0,this.fire("movestart",e)),this.zooming&&this.fire("zoomstart",e),clearTimeout(this._onEaseEnd),this._ease(function(t){this.zooming&&(l.zoom=r(h,d,t)),this.rotating&&(l.bearing=r(f,g,t)),this.pitching&&(l.pitch=r(p,m,t)),l.setLocationAtPoint(o,y.add(s.sub(y)._mult(t))),this.fire("move",e),this.zooming&&this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},function(){t.delayEndEvents?n._onEaseEnd=setTimeout(n._easeToEnd.bind(n,e),t.delayEndEvents):n._easeToEnd(e)},t),this},e.prototype._easeToEnd=function(t){var e=this.zooming;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,e&&this.fire("zoomend",t),this.fire("moveend",t)},e.prototype.flyTo=function(t,e){function n(t){var e=(S*S-E*E+(t?-1:1)*I*I*M*M)/(2*(t?S:E)*I*M);return Math.log(Math.sqrt(e*e+1)-e)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function s(t){return(Math.exp(t)+Math.exp(-t))/2}function l(t){return o(t)/s(t)}this.stop(),t=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},t);var c=this.transform,h=u.convert(t.offset),f=this.getZoom(),p=this.getBearing(),d=this.getPitch(),g="center"in t?a.convert(t.center):this.getCenter(),m="zoom"in t?+t.zoom:f,y="bearing"in t?this._normalizeBearing(t.bearing,p):p,v="pitch"in t?+t.pitch:d;Math.abs(c.center.lng)+Math.abs(g.lng)>180&&(c.center.lng>0&&g.lng<0?g.lng+=360:c.center.lng<0&&g.lng>0&&(g.lng-=360));var b=c.zoomScale(m-f),_=c.point,x="center"in t?c.project(g).sub(h.div(b)):_,w=t.curve,E=Math.max(c.width,c.height),S=E/b,M=x.sub(_).mag();if("minZoom"in t){var T=i.clamp(Math.min(t.minZoom,f,m),c.minZoom,c.maxZoom),C=E/c.zoomScale(T-f);w=Math.sqrt(C/M*2)}var I=w*w,N=n(0),P=function(t){return s(N)/s(N+w*t)},L=function(t){return E*((s(N)*l(N+w*t)-o(N))/I)/M},A=(n(1)-N)/w;if(Math.abs(M)<1e-6){if(Math.abs(E-S)<1e-6)return this.easeTo(t);var k=S<E?-1:1;A=Math.abs(Math.log(S/E))/w,L=function(){return 0},P=function(t){return Math.exp(k*w*t)}}if("duration"in t)t.duration=+t.duration;else{var R="screenSpeed"in t?+t.screenSpeed/w:+t.speed;t.duration=1e3*A/R}return this.moving=!0,this.zooming=!0,p!==y&&(this.rotating=!0),d!==v&&(this.pitching=!0),this.fire("movestart",e),this.fire("zoomstart",e),this._ease(function(t){var n=t*A,i=L(n),o=1/P(n);c.zoom=f+c.scaleZoom(o),c.center=c.unproject(_.add(x.sub(_).mult(i)).mult(o)),this.rotating&&(c.bearing=r(p,y,t)),this.pitching&&(c.pitch=r(d,v,t)),this.fire("move",e),this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},function(){this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.fire("zoomend",e),this.fire("moveend",e)},t),this},e.prototype.isEasing=function(){return!!this._abortFn},e.prototype.isMoving=function(){return this.moving},e.prototype.stop=function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},e.prototype._ease=function(t,e,n){this._finishFn=e,this._abortFn=o.timed(function(e){t.call(this,n.easing(e)),1===e&&this._finishEase()},n.animate===!1?0:n.duration,this)},e.prototype._finishEase=function(){delete this._abortFn;var t=this._finishFn;delete this._finishFn,t.call(this)},e.prototype._normalizeBearing=function(t,e){t=i.wrap(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t},e.prototype._smoothOutEasing=function(t){var e=i.ease;if(this._prevEase){var n=this._prevEase,r=(Date.now()-n.start)/n.duration,o=n.easing(r+.01)-n.easing(r),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);e=i.bezier(a,s,.25,1)}return this._prevEase={start:(new Date).getTime(),duration:t,easing:e},e},e}(l);e.exports=c},{"../geo/lng_lat":19,"../geo/lng_lat_bounds":20,"../util/browser":112,"../util/evented":120,"../util/interpolate":123,"../util/util":131,"point-geometry":200}],95:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=function(t){this.options=t,r.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};o.prototype.getDefaultPosition=function(){return"bottom-right"},o.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("data",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},o.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("data",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},o.prototype._updateEditLink=function(){if(this._editLink||(this._editLink=this._container.querySelector(".mapbox-improve-map")),this._editLink){var t=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+t.lng+"/"+t.lat+"/"+Math.round(this._map.getZoom()+1)}},o.prototype._updateData=function(t){"source"===t.dataType&&(this._updateAttributions(),this._updateEditLink())},o.prototype._updateAttributions=function(){if(this._map.style){var t=[],e=this._map.style.sourceCaches;for(var n in e){var i=e[n].getSource();i.attribution&&t.indexOf(i.attribution)<0&&t.push(i.attribution)}t.sort(function(t,e){return t.length-e.length}),t=t.filter(function(e,n){for(var i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0}),this._container.innerHTML=t.join(" | "),this._editLink=null}},o.prototype._updateCompact=function(){var t=this._map.getCanvasContainer().offsetWidth<=640;this._container.classList[t?"add":"remove"]("compact")},e.exports=o},{"../../util/dom":119,"../../util/util":131}],96:[function(t,e,n){"use strict";function i(t){void 0!==r?t(r):void 0!==s.navigator.permissions?s.navigator.permissions.query({name:"geolocation"}).then(function(e){r="denied"!==e.state,t(r)}):(r=!!s.navigator.geolocation,t(r))}var r,o=t("../../util/evented"),a=t("../../util/dom"),s=t("../../util/window"),u=t("../../util/util"),l={enableHighAccuracy:!1,timeout:6e3},c="mapboxgl-ctrl",h=function(t){function e(e){t.call(this),this.options=e||{},u.bindAll(["_onSuccess","_onError","_finish","_setupUI"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){return this._map=t,this._container=a.create("div",c+" "+c+"-group"),i(this._setupUI),this._container},e.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=void 0},e.prototype._onSuccess=function(t){this._map.jumpTo({center:[t.coords.longitude,t.coords.latitude],zoom:17,bearing:0,pitch:0}),this.fire("geolocate",t),this._finish()},e.prototype._onError=function(t){this.fire("error",t),this._finish()},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(t){t!==!1&&(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=a.create("button",c+"-icon "+c+"-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.watchPosition&&this._geolocateButton.setAttribute("aria-pressed",!1),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)))},e.prototype._onClickGeolocate=function(){var t=u.extend(l,this.options&&this.options.positionOptions||{});this.options.watchPosition?void 0!==this._geolocationWatchID?(this._geolocateButton.classList.remove("watching"),this._geolocateButton.setAttribute("aria-pressed",!1),s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0):(this._geolocateButton.classList.add("watching"),this._geolocateButton.setAttribute("aria-pressed",!0),this._geolocationWatchID=s.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)):(s.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,t),this._timeoutId=setTimeout(this._finish,1e4))},e}(o);e.exports=h},{"../../util/dom":119,"../../util/evented":120,"../../util/util":131,"../../util/window":114}],97:[function(t,e,n){"use strict";function i(t){return new o.MouseEvent(t.type,{button:2,buttons:2,bubbles:!0,cancelable:!0,detail:t.detail,view:t.view,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,movementX:t.movementX,movementY:t.movementY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey})}var r=t("../../util/dom"),o=t("../../util/window"),a=t("../../util/util"),s="mapboxgl-ctrl",u=function(){a.bindAll(["_rotateCompassArrow"],this)};u.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},u.prototype.onAdd=function(t){return this._map=t,this._container=r.create("div",s+" "+s+"-group",t.getContainer()),this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._zoomInButton=this._createButton(s+"-icon "+s+"-zoom-in","Zoom In",t.zoomIn.bind(t)),this._zoomOutButton=this._createButton(s+"-icon "+s+"-zoom-out","Zoom Out",t.zoomOut.bind(t)),this._compass=this._createButton(s+"-icon "+s+"-compass","Reset North",t.resetNorth.bind(t)),this._compassArrow=r.create("span","arrow",this._compass),this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._container},u.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("rotate",this._rotateCompassArrow),this._map=void 0},u.prototype._onContextMenu=function(t){t.preventDefault()},u.prototype._onCompassDown=function(t){0===t.button&&(r.disableDrag(),o.document.addEventListener("mousemove",this._onCompassMove),o.document.addEventListener("mouseup",this._onCompassUp),this._map.getCanvasContainer().dispatchEvent(i(t)),t.stopPropagation())},u.prototype._onCompassMove=function(t){0===t.button&&(this._map.getCanvasContainer().dispatchEvent(i(t)),t.stopPropagation())},u.prototype._onCompassUp=function(t){0===t.button&&(o.document.removeEventListener("mousemove",this._onCompassMove),o.document.removeEventListener("mouseup",this._onCompassUp),r.enableDrag(),this._map.getCanvasContainer().dispatchEvent(i(t)),t.stopPropagation())},u.prototype._createButton=function(t,e,n){var i=r.create("button",t,this._container);return i.type="button",i.setAttribute("aria-label",e),i.addEventListener("click",function(){n()}),i},e.exports=u},{"../../util/dom":119,"../../util/util":131,"../../util/window":114}],98:[function(t,e,n){"use strict";function i(t,e,n){var i=n&&n.maxWidth||100,a=t._container.clientHeight/2,s=o(t.unproject([0,a]),t.unproject([i,a]));if(n&&"imperial"===n.unit){var u=3.2808*s;if(u>5280){var l=u/5280;r(e,i,l,"mi")}else r(e,i,u,"ft")}else r(e,i,s,"m")}function r(t,e,n,i){var r=a(n),o=r/n;"m"===i&&r>=1e3&&(r/=1e3,i="km"),t.style.width=e*o+"px",t.innerHTML=r+i}function o(t,e){var n=6371e3,i=Math.PI/180,r=t.lat*i,o=e.lat*i,a=Math.sin(r)*Math.sin(o)+Math.cos(r)*Math.cos(o)*Math.cos((e.lng-t.lng)*i),s=n*Math.acos(Math.min(a,1));return s}function a(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}var s=t("../../util/dom"),u=t("../../util/util"),l=function(t){this.options=t,u.bindAll(["_onMove"],this)};l.prototype.getDefaultPosition=function(){return"bottom-left"},l.prototype._onMove=function(){i(this._map,this._container,this.options)},l.prototype.onAdd=function(t){return this._map=t,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},l.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("move",this._onMove),this._map=void 0},e.exports=l},{"../../util/dom":119,"../../util/util":131}],99:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../geo/lng_lat_bounds"),o=t("../../util/util"),a=t("../../util/window"),s=function(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),o.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onMouseDown,!1),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(t){t.shiftKey&&0===t.button&&(a.document.addEventListener("mousemove",this._onMouseMove,!1),a.document.addEventListener("keydown",this._onKeyDown,!1),a.document.addEventListener("mouseup",this._onMouseUp,!1),i.disableDrag(),this._startPos=i.mousePos(this._el,t),this._active=!0)},s.prototype._onMouseMove=function(t){var e=this._startPos,n=i.mousePos(this._el,t);this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(e.x,n.x),o=Math.max(e.x,n.x),a=Math.min(e.y,n.y),s=Math.max(e.y,n.y);i.setTransform(this._box,"translate("+r+"px,"+a+"px)"),this._box.style.width=o-r+"px",this._box.style.height=s-a+"px"},s.prototype._onMouseUp=function(t){if(0===t.button){var e=this._startPos,n=i.mousePos(this._el,t),o=(new r).extend(this._map.unproject(e)).extend(this._map.unproject(n));this._finish(),e.x===n.x&&e.y===n.y?this._fireEvent("boxzoomcancel",t):this._map.fitBounds(o,{linear:!0}).fire("boxzoomend",{originalEvent:t,boxZoomBounds:o})}},s.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},s.prototype._finish=function(){this._active=!1,a.document.removeEventListener("mousemove",this._onMouseMove,!1),a.document.removeEventListener("keydown",this._onKeyDown,!1),a.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.parentNode.removeChild(this._box),this._box=null),i.enableDrag()},s.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},e.exports=s},{"../../geo/lng_lat_bounds":20,"../../util/dom":119,"../../util/util":131,"../../util/window":114}],100:[function(t,e,n){"use strict";var i=function(t){this._map=t,this._onDblClick=this._onDblClick.bind(this)};i.prototype.isEnabled=function(){return!!this._enabled},i.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},i.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},i.prototype._onDblClick=function(t){this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},e.exports=i},{}],101:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/window"),a=.3,s=r.bezier(0,0,a,1),u=1400,l=2500,c=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.isActive=function(){return!!this._active},c.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},c.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(t.touches?(o.document.addEventListener("touchmove",this._onMove),o.document.addEventListener("touchend",this._onTouchEnd)):(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onMouseUp)),this._active=!1,this._startPos=this._pos=i.mousePos(this._el,t),this._inertia=[[Date.now(),this._pos]])},c.prototype._onMove=function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0,this._fireEvent("dragstart",t),this._fireEvent("movestart",t));var e=i.mousePos(this._el,t),n=this._map;n.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),e]),n.transform.setLocationAtPoint(n.transform.pointLocation(this._pos),e),this._fireEvent("drag",t),this._fireEvent("move",t),this._pos=e,t.preventDefault()}},c.prototype._onUp=function(t){var e=this;if(this.isActive()){this._active=!1,this._fireEvent("dragend",t),this._drainInertiaBuffer();var n=function(){return e._fireEvent("moveend",t)},i=this._inertia;if(i.length<2)return void n();var r=i[i.length-1],o=i[0],c=r[1].sub(o[1]),h=(r[0]-o[0])/1e3;if(0===h||r[1].equals(o[1]))return void n();var f=c.mult(a/h),p=f.mag();p>u&&(p=u,f._unit()._mult(p));var d=p/(l*a),g=f.mult(-d/2);this._map.panBy(g,{duration:1e3*d,easing:s,noMoveStart:!0},{originalEvent:t})}},c.prototype._onMouseUp=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onMouseUp))},c.prototype._onTouchEnd=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onTouchEnd))},c.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},c.prototype._ignoreEvent=function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragRotate&&e.dragRotate.isActive())return!0;if(t.touches)return t.touches.length>1;if(t.ctrlKey)return!0;var n=1,i=0;return"mousemove"===t.type?t.buttons&0===n:t.button!==i},c.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now(),n=160;t.length>0&&e-t[0][0]>n;)t.shift()},e.exports=c},{"../../util/dom":119,"../../util/util":131,"../../util/window":114}],102:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/window"),a=.25,s=r.bezier(0,0,a,1),u=180,l=720,c=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._bearingSnap=e.bearingSnap,this._pitchWithRotate=e.pitchWithRotate!==!1,r.bindAll(["_onDown","_onMove","_onUp"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.isActive=function(){return!!this._active},c.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),
this._enabled=!0)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},c.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=i.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault())},c.prototype._onMove=function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0,this._fireEvent("rotatestart",t),this._fireEvent("movestart",t));var e=this._map;e.stop();var n=this._pos,r=i.mousePos(this._el,t),o=.8*(n.x-r.x),a=(n.y-r.y)*-.5,s=e.getBearing()-o,u=e.getPitch()-a,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([Date.now(),e._normalizeBearing(s,c[1])]),e.transform.bearing=s,this._pitchWithRotate&&(e.transform.pitch=u),this._fireEvent("rotate",t),this._fireEvent("move",t),this._pos=r}},c.prototype._onUp=function(t){var e=this;if(!this._ignoreEvent(t)&&(o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onUp),this.isActive())){this._active=!1,this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,i=n.getBearing(),r=this._inertia,c=function(){Math.abs(i)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t)};if(r.length<2)return void c();var h=r[0],f=r[r.length-1],p=r[r.length-2],d=n._normalizeBearing(i,p[1]),g=f[1]-h[1],m=g<0?-1:1,y=(f[0]-h[0])/1e3;if(0===g||0===y)return void c();var v=Math.abs(g*(a/y));v>u&&(v=u);var b=v/(l*a),_=m*v*(b/2);d+=_,Math.abs(n._normalizeBearing(d,0))<this._bearingSnap&&(d=n._normalizeBearing(0,d)),n.rotateTo(d,{duration:1e3*b,easing:s,noMoveStart:!0},{originalEvent:t})}},c.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},c.prototype._ignoreEvent=function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragPan&&e.dragPan.isActive())return!0;if(t.touches)return t.touches.length>1;var n=t.ctrlKey?1:2,i=t.ctrlKey?0:2,r=t.button;return"undefined"!=typeof InstallTrigger&&2===t.button&&t.ctrlKey&&o.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(r=0),"mousemove"===t.type?t.buttons&0===n:r!==i},c.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now(),n=160;t.length>0&&e-t[0][0]>n;)t.shift()},e.exports=c},{"../../util/dom":119,"../../util/util":131,"../../util/window":114}],103:[function(t,e,n){"use strict";function i(t){return t*(2-t)}var r=100,o=15,a=10,s=function(t){this._map=t,this._el=t.getCanvasContainer(),this._onKeyDown=this._onKeyDown.bind(this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},s.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,s=0,u=0,l=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),u=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),u=1);break;case 38:t.shiftKey?s=1:(t.preventDefault(),l=-1);break;case 40:t.shiftKey?s=-1:(l=1,t.preventDefault())}var c=this._map,h=c.getZoom(),f={duration:300,delayEndEvents:500,easing:i,zoom:e?Math.round(h)+e*(t.shiftKey?2:1):h,bearing:c.getBearing()+n*o,pitch:c.getPitch()+s*a,offset:[-u*r,-l*r],center:c.getCenter()};c.easeTo(f,{originalEvent:t})}},e.exports=s},{}],104:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/browser"),a=t("../../util/window"),s=a.navigator.userAgent.toLowerCase(),u=s.indexOf("firefox")!==-1,l=s.indexOf("safari")!==-1&&s.indexOf("chrom")===-1,c=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll(["_onWheel","_onTimeout"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.enable=function(t){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},c.prototype._onWheel=function(t){var e;"wheel"===t.type?(e=t.deltaY,u&&t.deltaMode===a.WheelEvent.DOM_DELTA_PIXEL&&(e/=o.devicePixelRatio),t.deltaMode===a.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,l&&(e/=3));var n=o.now(),r=n-(this._time||0);this._pos=i.mousePos(this._el,t),this._time=n,0!==e&&e%4.000244140625===0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(r*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&this._zoom(-e,t),t.preventDefault()},c.prototype._onTimeout=function(){this._type="wheel",this._zoom(-this._lastValue)},c.prototype._zoom=function(t,e){if(0!==t){var n=this._map,i=2/(1+Math.exp(-Math.abs(t/100)));t<0&&0!==i&&(i=1/i);var r=n.ease?n.ease.to:n.transform.scale,o=n.transform.scaleZoom(r*i);n.zoomTo(o,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?n.getCenter():n.unproject(this._pos),delayEndEvents:200,smoothEasing:!0},{originalEvent:e})}},e.exports=c},{"../../util/browser":112,"../../util/dom":119,"../../util/util":131,"../../util/window":114}],105:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/window"),a=.15,s=r.bezier(0,0,a,1),u=12,l=2.5,c=.15,h=4,f=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll(["_onStart","_onMove","_onEnd"],this)};f.prototype.isEnabled=function(){return!!this._enabled},f.prototype.enable=function(t){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},f.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},f.prototype.disableRotation=function(){this._rotationDisabled=!0},f.prototype.enableRotation=function(){this._rotationDisabled=!1},f.prototype._onStart=function(t){if(2===t.touches.length){var e=i.mousePos(this._el,t.touches[0]),n=i.mousePos(this._el,t.touches[1]);this._startVec=e.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],o.document.addEventListener("touchmove",this._onMove,!1),o.document.addEventListener("touchend",this._onEnd,!1)}},f.prototype._onMove=function(t){if(2===t.touches.length){var e=i.mousePos(this._el,t.touches[0]),n=i.mousePos(this._el,t.touches[1]),r=e.add(n).div(2),o=e.sub(n),a=o.mag()/this._startVec.mag(),s=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,u=this._map;if(this._gestureIntent){var l={duration:0,around:u.unproject(r)};"rotate"===this._gestureIntent&&(l.bearing=this._startBearing+s),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(l.zoom=u.transform.scaleZoom(this._startScale*a)),u.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),a,r]),u.easeTo(l,{originalEvent:t})}else{var f=Math.abs(1-a)>c,p=Math.abs(s)>h;p?this._gestureIntent="rotate":f&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=o,this._startScale=u.transform.scale,this._startBearing=u.transform.bearing)}t.preventDefault()}},f.prototype._onEnd=function(t){o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var e=this._inertia,n=this._map;if(e.length<2)return void n.snapToNorth({},{originalEvent:t});var i=e[e.length-1],r=e[0],c=n.transform.scaleZoom(this._startScale*i[1]),h=n.transform.scaleZoom(this._startScale*r[1]),f=c-h,p=(i[0]-r[0])/1e3,d=i[2];if(0===p||c===h)return void n.snapToNorth({},{originalEvent:t});var g=f*a/p;Math.abs(g)>l&&(g=g>0?l:-l);var m=1e3*Math.abs(g/(u*a)),y=c+g*m/2e3;y<0&&(y=0),n.easeTo({zoom:y,duration:m,easing:s,around:this._aroundCenter?n.getCenter():n.unproject(d)},{originalEvent:t})},f.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now(),n=160;t.length>2&&e-t[0][0]>n;)t.shift()},e.exports=f},{"../../util/dom":119,"../../util/util":131,"../../util/window":114}],106:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/window"),o=function(){i.bindAll(["_onHashChange","_updateHash"],this)};o.prototype.addTo=function(t){return this._map=t,r.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},o.prototype.remove=function(){return r.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},o.prototype._onHashChange=function(){var t=r.location.hash.replace("#","").split("/");return t.length>=3&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},o.prototype._updateHash=function(){var t=this._map.getCenter(),e=this._map.getZoom(),n=this._map.getBearing(),i=this._map.getPitch(),o=Math.max(0,Math.ceil(Math.log(e)/Math.LN2)),a="#"+Math.round(100*e)/100+"/"+t.lat.toFixed(o)+"/"+t.lng.toFixed(o);(n||i)&&(a+="/"+Math.round(10*n)/10),i&&(a+="/"+Math.round(i)),r.history.replaceState("","",a)},e.exports=o},{"../util/util":131,"../util/window":114}],107:[function(t,e,n){"use strict";function i(t){t.parentNode&&t.parentNode.removeChild(t)}var r=t("../util/util"),o=t("../util/browser"),a=t("../util/window"),s=t("../util/dom"),u=t("../style/style"),l=t("../style/animation_loop"),c=t("../render/painter"),h=t("../geo/transform"),f=t("./hash"),p=t("./bind_handlers"),d=t("./camera"),g=t("../geo/lng_lat"),m=t("../geo/lng_lat_bounds"),y=t("point-geometry"),v=t("./control/attribution_control"),b=t("mapbox-gl-supported"),_=0,x=20,w={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:_,maxZoom:x,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0},E=function(t){function e(e){var n=this;e=r.extend({},w,e);var i=new h(e.minZoom,e.maxZoom,e.renderWorldCopies);if(t.call(this,i,e),this._interactive=e.interactive,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,"string"==typeof e.container){if(this._container=a.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else this._container=e.container;this.animationLoop=new l,e.maxBounds&&this.setMaxBounds(e.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("moveend",function(){n.animationLoop.set(300),n._rerender()}),"undefined"!=typeof a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1)),p(this,e),this._hash=e.hash&&(new f).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),this._classes=[],this.resize(),e.classes&&this.setClasses(e.classes),e.style&&this.setStyle(e.style),e.attributionControl&&this.addControl(new v),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update(this._classes,{transition:!1})}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return e.prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var n=t.onAdd(this),i=this._controlPositions[e];return e.indexOf("bottom")!==-1?i.insertBefore(n,i.firstChild):i.appendChild(n),this},e.prototype.removeControl=function(t){return t.onRemove(this),this},e.prototype.addClass=function(t,e){return r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(t)>=0||""===t?this:(this._classes.push(t),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},e.prototype.removeClass=function(t,e){r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");var n=this._classes.indexOf(t);return n<0||""===t?this:(this._classes.splice(n,1),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},e.prototype.setClasses=function(t,e){r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");for(var n={},i=0;i<t.length;i++)""!==t[i]&&(n[t[i]]=!0);return this._classes=Object.keys(n),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0)},e.prototype.hasClass=function(t){return r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(t)>=0},e.prototype.getClasses=function(){return r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes},e.prototype.resize=function(){var t=this._containerDimensions(),e=t[0],n=t[1];this._resizeCanvas(e,n),this.transform.resize(e,n),this.painter.resize(e,n);var i=this.painter.gl,o=i.getParameter(i.MAX_RENDERBUFFER_SIZE)/2;return(this._canvas.width>o||this._canvas.height>o)&&r.warnOnce("Map is larger than maximum size supported by this system ("+o+"px by "+o+"px)."),this.fire("movestart").fire("move").fire("resize").fire("moveend")},e.prototype.getBounds=function(){var t=new m(this.transform.pointLocation(new y(0,this.transform.height)),this.transform.pointLocation(new y(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(t.extend(this.transform.pointLocation(new y(this.transform.size.x,0))),t.extend(this.transform.pointLocation(new y(0,this.transform.size.y)))),t},e.prototype.setMaxBounds=function(t){if(t){var e=m.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null!==t&&void 0!==t||(this.transform.lngRange=[],this.transform.latRange=[],this._update());return this},e.prototype.setMinZoom=function(t){if(t=null===t||void 0===t?_:t,t>=_&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between "+_+" and the current maxZoom, inclusive")},e.prototype.getMinZoom=function(){return this.transform.minZoom},e.prototype.setMaxZoom=function(t){if(t=null===t||void 0===t?x:t,t>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},e.prototype.getMaxZoom=function(){return this.transform.maxZoom},e.prototype.project=function(t){return this.transform.locationPoint(g.convert(t))},e.prototype.unproject=function(t){return this.transform.pointLocation(y.convert(t))},e.prototype.queryRenderedFeatures=function(){function t(t){return t instanceof y||Array.isArray(t)}var e,n={};return 2===arguments.length?(e=arguments[0],n=arguments[1]):1===arguments.length&&t(arguments[0])?e=arguments[0]:1===arguments.length&&(n=arguments[0]),this.style.queryRenderedFeatures(this._makeQueryGeometry(e),n,this.transform.zoom,this.transform.angle)},e.prototype._makeQueryGeometry=function(t){var e=this;void 0===t&&(t=[y.convert([0,0]),y.convert([this.transform.width,this.transform.height])]);var n,i=t instanceof y||"number"==typeof t[0];if(i){var r=y.convert(t);n=[r]}else{var o=[y.convert(t[0]),y.convert(t[1])];n=[o[0],new y(o[1].x,o[0].y),o[1],new y(o[0].x,o[1].y),o[0]]}return n=n.map(function(t){return e.transform.pointCoordinate(t)})},e.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},e.prototype.setStyle=function(t,e){var n=(!e||e.diff!==!1)&&this.style&&t&&!(t instanceof u)&&"string"!=typeof t;if(n)try{return this.style.setState(t)&&this._update(!0),this}catch(t){r.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),t?(t instanceof u?this.style=t:this.style=new u(t,this),this.style.setEventedParent(this,{style:this.style}),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},e.prototype.getStyle=function(){if(this.style)return this.style.serialize()},e.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},e.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];return void 0===e?void this.fire("error",{error:new Error("There is no source with ID '"+t+"'")}):e.loaded()},e.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},e.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},e.prototype.getSource=function(t){return this.style.getSource(t)},e.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},e.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},e.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},e.prototype.getLayer=function(t){return this.style.getLayer(t)},e.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},e.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0),this},e.prototype.getFilter=function(t){return this.style.getFilter(t)},e.prototype.setPaintProperty=function(t,e,n,i){return this.style.setPaintProperty(t,e,n,i),this._update(!0),this},e.prototype.getPaintProperty=function(t,e,n){return this.style.getPaintProperty(t,e,n)},e.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0),this},e.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},e.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},e.prototype.getLight=function(){return this.style.getLight()},e.prototype.getContainer=function(){return this._container},e.prototype.getCanvasContainer=function(){return this._canvasContainer},e.prototype.getCanvas=function(){return this._canvas},e.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},e.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map");var e=this._canvasContainer=s.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=s.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",0),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var i=this._controlContainer=s.create("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){r[t]=s.create("div","mapboxgl-ctrl-"+t,i)})},e.prototype._resizeCanvas=function(t,e){var n=a.devicePixelRatio||1;this._canvas.width=n*t,this._canvas.height=n*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},e.prototype._setupPainter=function(){var t=r.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},b.webGLContextAttributes),e=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);return e?void(this.painter=new c(e,this.transform)):void this.fire("error",{error:new Error("Failed to initialize WebGL")})},e.prototype._contextLost=function(t){t.preventDefault(),this._frameId&&o.cancelFrame(this._frameId),this.fire("webglcontextlost",{originalEvent:t})},e.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:t})},e.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},e.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender(),this):this},e.prototype._render=function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender(),this},e.prototype.remove=function(){this._hash&&this._hash.remove(),o.cancelFrame(this._frameId),this.setStyle(null),"undefined"!=typeof a&&a.removeEventListener("resize",this._onWindowResize,!1);var t=this.painter.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),i(this._canvasContainer),i(this._controlContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},e.prototype._rerender=function(){this.style&&!this._frameId&&(this._frameId=o.frame(this._render))},e.prototype._onWindowOnline=function(){this._update()},e.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,this.style._redoPlacement())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(t){this._repaint=t,this._update()},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(t){this._vertices=t,this._update()},e.prototype._onData=function(t){this._update("style"===t.dataType),this.fire(t.dataType+"data",t)},e.prototype._onDataLoading=function(t){this.fire(t.dataType+"dataloading",t)},Object.defineProperties(e.prototype,n),e}(d);e.exports=E},{"../geo/lng_lat":19,"../geo/lng_lat_bounds":20,"../geo/transform":21,"../render/painter":36,"../style/animation_loop":61,"../style/style":65,"../util/browser":112,"../util/dom":119,"../util/util":131,"../util/window":114,"./bind_handlers":93,"./camera":94,"./control/attribution_control":95,"./hash":106,"mapbox-gl-supported":196,"point-geometry":200}],108:[function(t,e,n){"use strict";var i=t("../util/dom"),r=t("../geo/lng_lat"),o=t("point-geometry"),a=function(t,e){this._offset=o.convert(e&&e.offset||[0,0]),this._update=this._update.bind(this),this._onMapClick=this._onMapClick.bind(this),t||(t=i.create("div")),t.classList.add("mapboxgl-marker"),this._element=t,this._popup=null};a.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},a.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map=null),i.remove(this._element),this._popup&&this._popup.remove(),this},a.prototype.getLngLat=function(){return this._lngLat},a.prototype.setLngLat=function(t){return this._lngLat=r.convert(t),this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},a.prototype.getElement=function(){return this._element},a.prototype.setPopup=function(t){return this._popup&&(this._popup.remove(),this._popup=null),t&&(this._popup=t,this._popup.setLngLat(this._lngLat)),this},a.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},a.prototype.getPopup=function(){return this._popup},a.prototype.togglePopup=function(){var t=this._popup;t&&(t.isOpen()?t.remove():t.addTo(this._map))},a.prototype._update=function(t){if(this._map){var e=this._map.project(this._lngLat)._add(this._offset);t&&"moveend"!==t.type||(e=e.round()),i.setTransform(this._element,"translate("+e.x+"px, "+e.y+"px)")}},e.exports=a},{"../geo/lng_lat":19,"../util/dom":119,"point-geometry":200}],109:[function(t,e,n){"use strict";function i(t){if(t){if("number"==typeof t){var e=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{top:new l(0,t),"top-left":new l(e,e),"top-right":new l(-e,e),bottom:new l(0,-t),"bottom-left":new l(e,-e),"bottom-right":new l(-e,-e),left:new l(t,0),right:new l(-t,0)}}if(r(t)){var n=l.convert(t);return{top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{top:l.convert(t.top||[0,0]),"top-left":l.convert(t["top-left"]||[0,0]),"top-right":l.convert(t["top-right"]||[0,0]),bottom:l.convert(t.bottom||[0,0]),"bottom-left":l.convert(t["bottom-left"]||[0,0]),"bottom-right":l.convert(t["bottom-right"]||[0,0]),left:l.convert(t.left||[0,0]),right:l.convert(t.right||[0,0])}}return i(new l(0,0))}function r(t){return t instanceof l||Array.isArray(t)}var o=t("../util/util"),a=t("../util/evented"),s=t("../util/dom"),u=t("../geo/lng_lat"),l=t("point-geometry"),c=t("../util/window"),h={closeButton:!0,closeOnClick:!0},f=function(t){function e(e){t.call(this),this.options=o.extend(Object.create(h),e),o.bindAll(["_update","_onClickClose"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._container&&(this._container.parentNode.removeChild(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=u.convert(t),this._update(),this},e.prototype.setText=function(t){return this.setDOMContent(c.document.createTextNode(t))},e.prototype.setHTML=function(t){var e,n=c.document.createDocumentFragment(),i=c.document.createElement("body");for(i.innerHTML=t;e=i.firstChild,e;)n.appendChild(e);return this.setDOMContent(n)},e.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},e.prototype._createContent=function(){this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._content=s.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=s.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},e.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=s.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=s.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content));var t=this.options.anchor,e=i(this.options.offset),n=this._map.project(this._lngLat).round();if(!t){var r=this._container.offsetWidth,o=this._container.offsetHeight;t=n.y+e.bottom.y<o?["top"]:n.y>this._map.transform.height-o?["bottom"]:[],n.x<r/2?t.push("left"):n.x>this._map.transform.width-r/2&&t.push("right"),t=0===t.length?"bottom":t.join("-")}var a=n.add(e[t]),u={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},l=this._container.classList;for(var c in u)l.remove("mapboxgl-popup-anchor-"+c);l.add("mapboxgl-popup-anchor-"+t),s.setTransform(this._container,u[t]+" translate("+a.x+"px,"+a.y+"px)")}},e.prototype._onClickClose=function(){this.remove()},e}(a);e.exports=f},{"../geo/lng_lat":19,"../util/dom":119,"../util/evented":120,"../util/util":131,"../util/window":114,"point-geometry":200}],110:[function(t,e,n){"use strict";var i=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.target.addEventListener("message",this.receive,!1)};i.prototype.send=function(t,e,n,i,r){var o=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[o]=n),this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(o),data:e},i)},i.prototype.receive=function(t){var e,n=this,i=t.data,r=i.id;if(!i.targetMapId||this.mapId===i.targetMapId){var o=function(t,e,i){n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(r),error:t?String(t):null,data:e},i)};if("<response>"===i.type)e=this.callbacks[i.id],delete this.callbacks[i.id],e&&e(i.error||null,i.data);else if("undefined"!=typeof i.id&&this.parent[i.type])this.parent[i.type](i.sourceMapId,i.data,o);else if("undefined"!=typeof i.id&&this.parent.getWorkerSource){var a=i.type.split("."),s=this.parent.getWorkerSource(i.sourceMapId,a[0]);s[a[1]](i.data,o)}else this.parent[i.type](i.data)}},i.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},e.exports=i},{}],111:[function(t,e,n){"use strict";function i(t){var e=r.document.createElement("a");return e.href=t,e.protocol===r.document.location.protocol&&e.host===r.document.location.host}var r=t("./window");n.getJSON=function(t,e){var n=new r.XMLHttpRequest;return n.open("GET",t,!0),n.setRequestHeader("Accept","application/json"),n.onerror=function(t){e(t)},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var t;try{t=JSON.parse(n.response)}catch(t){return e(t)}e(null,t)}else e(new Error(n.statusText))},n.send(),n},n.getArrayBuffer=function(t,e){var n=new r.XMLHttpRequest;return n.open("GET",t,!0),n.responseType="arraybuffer",n.onerror=function(t){e(t)},n.onload=function(){return 0===n.response.byteLength&&200===n.status?e(new Error("http status 200 returned without content.")):void(n.status>=200&&n.status<300&&n.response?e(null,{data:n.response,cacheControl:n.getResponseHeader("Cache-Control"),
expires:n.getResponseHeader("Expires")}):e(new Error(n.statusText)))},n.send(),n};var o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";n.getImage=function(t,e){return n.getArrayBuffer(t,function(t,n){if(t)return e(t);var i=new r.Image,a=r.URL||r.webkitURL;i.onload=function(){e(null,i),a.revokeObjectURL(i.src)};var s=new r.Blob([new Uint8Array(n.data)],{type:"image/png"});i.cacheControl=n.cacheControl,i.expires=n.expires,i.src=n.data.byteLength?a.createObjectURL(s):o})},n.getVideo=function(t,e){var n=r.document.createElement("video");n.onloadstart=function(){e(null,n)};for(var o=0;o<t.length;o++){var a=r.document.createElement("source");i(t[o])||(n.crossOrigin="Anonymous"),a.src=t[o],n.appendChild(a)}return n}},{"./window":114}],112:[function(t,e,n){"use strict";var i=t("./window");e.exports.now=function(){return i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now.bind(Date)}();var r=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||i.msRequestAnimationFrame;n.frame=function(t){return r(t)};var o=i.cancelAnimationFrame||i.mozCancelAnimationFrame||i.webkitCancelAnimationFrame||i.msCancelAnimationFrame;n.cancelFrame=function(t){o(t)},n.timed=function(t,i,r){function o(u){a||(u=e.exports.now(),u>=s+i?t.call(r,1):(t.call(r,(u-s)/i),n.frame(o)))}if(!i)return t.call(r,1),null;var a=!1,s=e.exports.now();return n.frame(o),function(){a=!0}},n.getImageData=function(t){var e=i.document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height).data},n.supported=t("mapbox-gl-supported"),n.hardwareConcurrency=i.navigator.hardwareConcurrency||4,Object.defineProperty(n,"devicePixelRatio",{get:function(){return i.devicePixelRatio}}),n.supportsWebp=!1;var a=i.document.createElement("img");a.onload=function(){n.supportsWebp=!0},a.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":114,"mapbox-gl-supported":196}],113:[function(t,e,n){"use strict";var i=t("webworkify"),r=t("../window"),o=r.URL.createObjectURL(new i(t("../../source/worker"),{bare:!0}));e.exports=function(){return new r.Worker(o)}},{"../../source/worker":59,"../window":114,webworkify:216}],114:[function(t,e,n){"use strict";e.exports=self},{}],115:[function(t,e,n){"use strict";function i(t,e){return e.area-t.area}var r=t("quickselect"),o=t("./util").calculateSignedArea;e.exports=function(t,e){var n=t.length;if(n<=1)return[t];for(var a,s,u=[],l=0;l<n;l++){var c=o(t[l]);0!==c&&(t[l].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(a&&u.push(a),a=[t[l]]):a.push(t[l]))}if(a&&u.push(a),e>1)for(var h=0;h<u.length;h++)u[h].length<=e||(r(u[h],e,1,u[h].length-1,i),u[h]=u[h].slice(0,e));return u}},{"./util":131,quickselect:201}],116:[function(t,e,n){"use strict";var i={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null};e.exports=i},{}],117:[function(t,e,n){"use strict";var i=function(t){var e=this;this._stringToNumber={},this._numberToString=[];for(var n=0;n<t.length;n++){var i=t[n];e._stringToNumber[i]=n,e._numberToString[n]=i}};i.prototype.encode=function(t){return this._stringToNumber[t]},i.prototype.decode=function(t){return this._numberToString[t]},e.exports=i},{}],118:[function(t,e,n){"use strict";var i=t("./util"),r=t("./actor"),o=function(t,e){var n=this;this.workerPool=t,this.actors=[],this.currentActor=0,this.id=i.uniqueId();for(var o=this.workerPool.acquire(this.id),a=0;a<o.length;a++){var s=o[a],u=new r(s,e,n.id);u.name="Worker "+a,n.actors.push(u)}};o.prototype.broadcast=function(t,e,n){n=n||function(){},i.asyncAll(this.actors,function(n,i){n.send(t,e,i)},n)},o.prototype.send=function(t,e,n,i,r){return("number"!=typeof i||isNaN(i))&&(i=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[i].send(t,e,n,r),i},o.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},e.exports=o},{"./actor":110,"./util":131}],119:[function(t,e,n){"use strict";function i(t){for(var e=0;e<t.length;e++)if(t[e]in u)return t[e];return t[0]}function r(t){t.preventDefault(),t.stopPropagation(),a.removeEventListener("click",r,!0)}var o=t("point-geometry"),a=t("./window");n.create=function(t,e,n){var i=a.document.createElement(t);return e&&(i.className=e),n&&n.appendChild(i),i};var s,u=a.document.documentElement.style,l=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){l&&(s=u[l],u[l]="none")},n.enableDrag=function(){l&&(u[l]=s)};var c=i(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[c]=e},n.suppressClick=function(){a.addEventListener("click",r,!0),a.setTimeout(function(){a.removeEventListener("click",r,!0)},0)},n.mousePos=function(t,e){var n=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,new o(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},n.touchPos=function(t,e){for(var n=t.getBoundingClientRect(),i=[],r="touchend"===e.type?e.changedTouches:e.touches,a=0;a<r.length;a++)i.push(new o(r[a].clientX-n.left-t.clientLeft,r[a].clientY-n.top-t.clientTop));return i},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)}},{"./window":114,"point-geometry":200}],120:[function(t,e,n){"use strict";var i=t("./util"),r=function(){};r.prototype.on=function(t,e){return this._listeners=this._listeners||{},this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e),this},r.prototype.off=function(t,e){if(this._listeners&&this._listeners[t]){var n=this._listeners[t].indexOf(e);n!==-1&&this._listeners[t].splice(n,1)}return this},r.prototype.once=function(t,e){var n=this,i=function(r){n.off(t,i),e.call(n,r)};return this.on(t,i),this},r.prototype.fire=function(t,e){var n=this;if(this.listens(t)){e=i.extend({},e,{type:t,target:this});for(var r=this._listeners&&this._listeners[t]?this._listeners[t].slice():[],o=0;o<r.length;o++)r[o].call(n,e);this._eventedParent&&this._eventedParent.fire(t,i.extend({},e,this._eventedParentData))}else i.endsWith(t,"error")&&console.error(e&&e.error||e||"Empty error event");return this},r.prototype.listens=function(t){return this._listeners&&this._listeners[t]||this._eventedParent&&this._eventedParent.listens(t)},r.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData="function"==typeof e?e():e,this},e.exports=r},{"./util":131}],121:[function(t,e,n){"use strict";function i(t,e){return e.max-t.max}function r(t,e,n,i){this.p=new u(t,e),this.h=n,this.d=o(this.p,i),this.max=this.d+this.h*Math.SQRT2}function o(t,e){for(var n=!1,i=1/0,r=0;r<e.length;r++)for(var o=e[r],a=0,s=o.length,u=s-1;a<s;u=a++){var c=o[a],h=o[u];c.y>t.y!=h.y>t.y&&t.x<(h.x-c.x)*(t.y-c.y)/(h.y-c.y)+c.x&&(n=!n),i=Math.min(i,l(t,c,h))}return(n?1:-1)*Math.sqrt(i)}function a(t){for(var e=0,n=0,i=0,o=t[0],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u],h=l.x*c.y-c.x*l.y;n+=(l.x+c.x)*h,i+=(l.y+c.y)*h,e+=3*h}return new r(n/e,i/e,0,t)}var s=t("tinyqueue"),u=t("point-geometry"),l=t("./intersection_tests").distToSegmentSquared;e.exports=function(t,e,n){e=e||1;for(var o,u,l,c,h=t[0],f=0;f<h.length;f++){var p=h[f];(!f||p.x<o)&&(o=p.x),(!f||p.y<u)&&(u=p.y),(!f||p.x>l)&&(l=p.x),(!f||p.y>c)&&(c=p.y)}for(var d=l-o,g=c-u,m=Math.min(d,g),y=m/2,v=new s(null,i),b=o;b<l;b+=m)for(var _=u;_<c;_+=m)v.push(new r(b+y,_+y,y,t));for(var x=a(t),w=v.length;v.length;){var E=v.pop();E.d>x.d&&(x=E,n&&console.log("found best %d after %d probes",Math.round(1e4*E.d)/1e4,w)),E.max-x.d<=e||(y=E.h/2,v.push(new r(E.p.x-y,E.p.y-y,y,t)),v.push(new r(E.p.x+y,E.p.y-y,y,t)),v.push(new r(E.p.x-y,E.p.y+y,y,t)),v.push(new r(E.p.x+y,E.p.y+y,y,t)),w+=4)}return n&&(console.log("num probes: "+w),console.log("best distance: "+x.d)),x.p}},{"./intersection_tests":124,"point-geometry":200,tinyqueue:208}],122:[function(t,e,n){"use strict";function i(t,e){this.stacks=t.readFields(r,[],e)}function r(t,e,n){if(1===t){var i=n.readMessage(o,{glyphs:{}});e.push(i)}}function o(t,e,n){if(1===t)e.name=n.readString();else if(2===t)e.range=n.readString();else if(3===t){var i=n.readMessage(a,{});e.glyphs[i.id]=i}}function a(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}e.exports=i},{}],123:[function(t,e,n){"use strict";function i(t,e,n){return t*(1-n)+e*n}e.exports=i,i.number=i,i.vec2=function(t,e,n){return[i(t[0],e[0],n),i(t[1],e[1],n)]},i.color=function(t,e,n){return[i(t[0],e[0],n),i(t[1],e[1],n),i(t[2],e[2],n),i(t[3],e[3],n)]},i.array=function(t,e,n){return t.map(function(t,r){return i(t,e[r],n)})}},{}],124:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<t.length;n++)if(p(e,t[n]))return!0;for(var i=0;i<e.length;i++)if(p(t,e[i]))return!0;return!!u(t,e)}function r(t,e,n){for(var i=0;i<t.length;i++)for(var r=t[i],o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var u=a[s];if(p(r,u))return!0;if(c(u,r,n))return!0}return!1}function o(t,e){if(1===t.length&&1===t[0].length)return f(e,t[0][0]);for(var n=0;n<e.length;n++)for(var i=e[n],r=0;r<i.length;r++)if(f(t,i[r]))return!0;for(var o=0;o<t.length;o++){for(var a=t[o],s=0;s<a.length;s++)if(f(e,a[s]))return!0;for(var l=0;l<e.length;l++)if(u(a,e[l]))return!0}return!1}function a(t,e,n){for(var i=0;i<e.length;i++)for(var r=e[i],o=0;o<t.length;o++){var a=t[o];if(a.length>=3)for(var u=0;u<r.length;u++)if(p(a,r[u]))return!0;if(s(a,r,n))return!0}return!1}function s(t,e,n){if(t.length>1){if(u(t,e))return!0;for(var i=0;i<e.length;i++)if(c(e[i],t,n))return!0}for(var r=0;r<t.length;r++)if(c(t[r],e,n))return!0;return!1}function u(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var i=t[n],r=t[n+1],o=0;o<e.length-1;o++){var a=e[o],s=e[o+1];if(l(i,r,a,s))return!0}return!1}function l(t,e,n,i){return d(t,n,i)!==d(e,n,i)&&d(t,e,n)!==d(t,e,i)}function c(t,e,n){var i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(var r=1;r<e.length;r++){var o=e[r-1],a=e[r];if(h(t,o,a)<i)return!0}return!1}function h(t,e,n){var i=e.distSqr(n);if(0===i)return t.distSqr(e);var r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return r<0?t.distSqr(e):r>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(r)._add(e))}function f(t,e){for(var n,i,r,o=!1,a=0;a<t.length;a++){n=t[a];for(var s=0,u=n.length-1;s<n.length;u=s++)i=n[s],r=n[u],i.y>e.y!=r.y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(o=!o)}return o}function p(t,e){for(var n=!1,i=0,r=t.length-1;i<t.length;r=i++){var o=t[i],a=t[r];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}var d=t("./util").isCounterClockwise;e.exports={multiPolygonIntersectsBufferedMultiPoint:r,multiPolygonIntersectsMultiPolygon:o,multiPolygonIntersectsBufferedMultiLine:a,polygonIntersectsPolygon:i,distToSegmentSquared:h}},{"./util":131}],125:[function(t,e,n){"use strict";var i={"Latin-1 Supplement":function(t){return t>=128&&t<=255},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};e.exports=i},{}],126:[function(t,e,n){"use strict";var i=function(t,e){this.max=t,this.onRemove=e,this.reset()};i.prototype.reset=function(){var t=this;for(var e in this.data)t.onRemove(t.data[e]);return this.data={},this.order=[],this},i.prototype.add=function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var n=this.get(this.order[0]);n&&this.onRemove(n)}return this},i.prototype.has=function(t){return t in this.data},i.prototype.keys=function(){return this.order},i.prototype.get=function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e},i.prototype.remove=function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this},i.prototype.setMaxSize=function(t){var e=this;for(this.max=t;this.order.length>this.max;){var n=e.get(e.order[0]);n&&e.onRemove(n)}return this},e.exports=i},{}],127:[function(t,e,n){"use strict";function i(t,e){var n=a(u.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,!u.REQUIRE_ACCESS_TOKEN)return s(t);if(e=e||u.ACCESS_TOKEN,!e)throw new Error("An API access token is required to use Mapbox GL. "+c);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+c);return t.params.push("access_token="+e),s(t)}function r(t){return 0===t.indexOf("mapbox:")}function o(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(u.ACCESS_TOKEN||""))}function a(t){var e=t.match(f);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function s(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}var u=t("./config"),l=t("./browser"),c="See https://www.mapbox.com/developers/api/#access-tokens";n.isMapboxURL=r,n.normalizeStyleURL=function(t,e){if(!r(t))return t;var n=a(t);return n.path="/styles/v1"+n.path,i(n,e)},n.normalizeGlyphsURL=function(t,e){if(!r(t))return t;var n=a(t);return n.path="/fonts/v1"+n.path,i(n,e)},n.normalizeSourceURL=function(t,e){if(!r(t))return t;var n=a(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),i(n,e)},n.normalizeSpriteURL=function(t,e,n,o){var u=a(t);return r(t)?(u.path="/styles/v1"+u.path+"/sprite"+e+n,i(u,o)):(u.path+=""+e+n,s(u))};var h=/(\.(png|jpg)\d*)(?=$)/;n.normalizeTileURL=function(t,e,n){if(!e||!r(e))return t;var i=a(t),u=l.devicePixelRatio>=2||512===n?"@2x":"",c=l.supportsWebp?".webp":"$1";return i.path=i.path.replace(h,""+u+c),o(i.params),s(i)};var f=/^(\w+):\/\/([^\/?]+)(\/[^?]+)?\??(.+)?/},{"./browser":112,"./config":116}],128:[function(t,e,n){"use strict";var i=t("./is_char_in_unicode_block");e.exports.allowsIdeographicBreaking=function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e];if(!n.charAllowsIdeographicBreaking(r.charCodeAt(0)))return!1}return!0},e.exports.allowsVerticalWritingMode=function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e];if(n.charHasUprightVerticalOrientation(r.charCodeAt(0)))return!0}return!1},e.exports.charAllowsIdeographicBreaking=function(t){return!!(!(t<11904)&&(i["Bopomofo Extended"](t)||i.Bopomofo(t)||i["CJK Compatibility Forms"](t)||i["CJK Compatibility Ideographs"](t)||i["CJK Compatibility"](t)||i["CJK Radicals Supplement"](t)||i["CJK Strokes"](t)||i["CJK Symbols and Punctuation"](t)||i["CJK Unified Ideographs Extension A"](t)||i["CJK Unified Ideographs"](t)||i["Enclosed CJK Letters and Months"](t)||i["Halfwidth and Fullwidth Forms"](t)||i.Hiragana(t)||i["Ideographic Description Characters"](t)||i["Kangxi Radicals"](t)||i["Katakana Phonetic Extensions"](t)||i.Katakana(t)||i["Vertical Forms"](t)||i["Yi Radicals"](t)||i["Yi Syllables"](t)))},n.charHasUprightVerticalOrientation=function(t){return!!(746===t||747===t||!(t<4352)&&(i["Bopomofo Extended"](t)||i.Bopomofo(t)||i["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||i["CJK Compatibility Ideographs"](t)||i["CJK Compatibility"](t)||i["CJK Radicals Supplement"](t)||i["CJK Strokes"](t)||!(!i["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||i["CJK Unified Ideographs Extension A"](t)||i["CJK Unified Ideographs"](t)||i["Enclosed CJK Letters and Months"](t)||i["Hangul Compatibility Jamo"](t)||i["Hangul Jamo Extended-A"](t)||i["Hangul Jamo Extended-B"](t)||i["Hangul Jamo"](t)||i["Hangul Syllables"](t)||i.Hiragana(t)||i["Ideographic Description Characters"](t)||i.Kanbun(t)||i["Kangxi Radicals"](t)||i["Katakana Phonetic Extensions"](t)||i.Katakana(t)&&12540!==t||!(!i["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!i["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||i["Unified Canadian Aboriginal Syllabics"](t)||i["Unified Canadian Aboriginal Syllabics Extended"](t)||i["Vertical Forms"](t)||i["Yijing Hexagram Symbols"](t)||i["Yi Syllables"](t)||i["Yi Radicals"](t)))},n.charHasNeutralVerticalOrientation=function(t){return!!(i["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||i["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||i["Letterlike Symbols"](t)||i["Number Forms"](t)||i["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||i["Control Pictures"](t)&&9251!==t||i["Optical Character Recognition"](t)||i["Enclosed Alphanumerics"](t)||i["Geometric Shapes"](t)||i["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||i["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||i["CJK Symbols and Punctuation"](t)||i.Katakana(t)||i["Private Use Area"](t)||i["CJK Compatibility Forms"](t)||i["Small Form Variants"](t)||i["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)},n.charHasRotatedVerticalOrientation=function(t){return!(n.charHasUprightVerticalOrientation(t)||n.charHasNeutralVerticalOrientation(t))}},{"./is_char_in_unicode_block":125}],129:[function(t,e,n){"use strict";function i(t){var e=JSON.stringify(t);if(m[e])return m[e];var n=void 0===t.alignment?1:t.alignment,i=0,a=0,u=["Uint8"],h=t.members.map(function(t){u.indexOf(t.type)<0&&u.push(t.type);var e=o(t.type),s=i=r(i,Math.max(n,e)),l=t.components||1;return a=Math.max(a,e),i+=e*l,{name:t.name,type:t.type,components:l,offset:s}}),p=r(i,Math.max(a,n)),d=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(f);d.prototype.alignment=n,d.prototype.size=p;for(var y=0,v=h;y<v.length;y+=1)for(var b=v[y],_=0;_<b.components;_++){var x=b.name+(1===b.components?"":_);Object.defineProperty(d.prototype,x,{get:l(b,_),set:c(b,_)})}var w=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(g);return w.prototype.members=h,w.prototype.StructType=d,w.prototype.bytesPerElement=p,w.prototype.emplaceBack=s(h,p),w.prototype._usedTypes=u,m[e]=w,w}function r(t,e){return Math.ceil(t/e)*e}function o(t){return h[t].BYTES_PER_ELEMENT}function a(t){return t.toLowerCase()}function s(t,e){for(var n=[],i=[],r="var i = this.length;\nthis.resize(this.length + 1);\n",s=0,u=t;s<u.length;s+=1){var l=u[s],c=o(l.type);n.indexOf(c)<0&&(n.push(c),r+="var o"+c.toFixed(0)+" = i * "+(e/c).toFixed(0)+";\n");for(var h=0;h<l.components;h++){var f="v"+i.length,p="o"+c.toFixed(0)+" + "+(l.offset/c+h).toFixed(0);r+="this."+a(l.type)+"["+p+"] = "+f+";\n",i.push(f)}}return r+="return i;",new Function(i.toString(),r)}function u(t,e){var n="this._pos"+o(t.type).toFixed(0),i=(t.offset/o(t.type)+e).toFixed(0),r=n+" + "+i;return"this._structArray."+a(t.type)+"["+r+"]"}function l(t,e){return new Function("return "+u(t,e)+";")}function c(t,e){return new Function("x",u(t,e)+" = x;")}e.exports=i;var h={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},f=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},p=128,d=5,g=function(t){this.isTransferred=!1,void 0!==t?(this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))};g.serialize=function(){return{members:this.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}},g.prototype.serialize=function(t){return this._trim(),t&&(this.isTransferred=!0,t.push(this.arrayBuffer)),{length:this.length,arrayBuffer:this.arrayBuffer}},g.prototype.get=function(t){return new this.StructType(this,t)},g.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},g.prototype.resize=function(t){if(this.length=t,t>this.capacity){this.capacity=Math.max(t,Math.floor(this.capacity*d),p),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},g.prototype._refreshViews=function(){for(var t=this,e=0,n=this._usedTypes;e<n.length;e+=1){var i=n[e];t[a(i)]=new h[i](t.arrayBuffer)}},g.prototype.toArray=function(t,e){for(var n=this,i=[],r=t;r<e;r++){var o=n.get(r);i.push(o)}return i};var m={}},{}],130:[function(t,e,n){"use strict";function i(t,e){return e.replace(/{([^{}]+)}/g,function(e,n){return n in t?t[n]:""})}e.exports=i},{}],131:[function(t,e,n){"use strict";var i=t("@mapbox/unitbezier"),r=t("../geo/coordinate");t("point-geometry");n.easeCubicInOut=function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},n.bezier=function(t,e,n,r){var o=new i(t,e,n,r);return function(t){return o.solve(t)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},n.wrap=function(t,e,n){var i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r},n.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var i=t.length,r=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),r[a]=e,0===--i&&n(o,r)})})},n.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},n.keysDifference=function(t,e){var n=[];for(var i in t)i in e||n.push(i);return n},n.extend=function(t,e,n,i){for(var r=arguments,o=1;o<arguments.length;o++){var a=r[o];for(var s in a)t[s]=a[s]}return t},n.pick=function(t,e){for(var n={},i=0;i<e.length;i++){var r=e[i];r in t&&(n[r]=t[r])}return n};var o=1;n.uniqueId=function(){return o++},n.bindAll=function(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})},n.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,i=-(1/0),o=-(1/0),a=0;a<t.length;a++)e=Math.min(e,t[a].column),n=Math.min(n,t[a].row),i=Math.max(i,t[a].column),o=Math.max(o,t[a].row);var s=i-e,u=o-n,l=Math.max(s,u);return new r((e+i)/2,(n+o)/2,0).zoomTo(Math.floor(-Math.log(l)/Math.LN2))},n.endsWith=function(t,e){return t.indexOf(e,t.length-e.length)!==-1},n.mapObject=function(t,e,n){var i=this,r={};for(var o in t)r[o]=e.call(n||i,t[o],o,t);return r},n.filterObject=function(t,e,n){var i=this,r={};for(var o in t)e.call(n||i,t[o],o,t)&&(r[o]=t[o]);return r},n.deepEqual=function(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!n.deepEqual(t[i],e[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;var r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(var o in t)if(!n.deepEqual(t[o],e[o]))return!1;return!0}return t===e},n.clone=function(t){return Array.isArray(t)?t.map(n.clone):"object"==typeof t&&t?n.mapObject(t,n.clone):t},n.arraysIntersect=function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1};var a={};n.warnOnce=function(t){a[t]||("undefined"!=typeof console&&console.warn(t),a[t]=!0)},n.isCounterClockwise=function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)},n.calculateSignedArea=function(t){for(var e,n,i=0,r=0,o=t.length,a=o-1;r<o;a=r++)e=t[r],n=t[a],i+=(n.x-e.x)*(e.y+n.y);return i},n.isClosedPolygon=function(t){if(t.length<4)return!1;var e=t[0],i=t[t.length-1];return!(Math.abs(e.x-i.x)>0||Math.abs(e.y-i.y)>0)&&Math.abs(n.calculateSignedArea(t))>.01},n.sphericalToCartesian=function(t){var e=t[0],n=t[1],i=t[2];return n+=90,n*=Math.PI/180,i*=Math.PI/180,[e*Math.cos(n)*Math.sin(i),e*Math.sin(n)*Math.sin(i),e*Math.cos(i)]},n.parseCacheControl=function(t){var e=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,n={};if(t.replace(e,function(t,e,i,r){var o=i||r;return n[e]=!o||o.toLowerCase(),""}),n["max-age"]){var i=parseInt(n["max-age"],10);isNaN(i)?delete n["max-age"]:n["max-age"]=i}return n}},{"../geo/coordinate":18,"@mapbox/unitbezier":136,"point-geometry":200}],132:[function(t,e,n){"use strict";var i=function(t,e,n,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=i,this.properties=t.properties,null!=t.id&&(this.id=t.id)},r={geometry:{}};r.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},r.geometry.set=function(t){this._geometry=t},i.prototype.toJSON=function(){var t=this,e={geometry:this.geometry};for(var n in this)"_geometry"!==n&&"_vectorTileFeature"!==n&&(e[n]=t[n]);return e},Object.defineProperties(i.prototype,r),e.exports=i},{}],133:[function(t,e,n){"use strict";var i=t("./script_detection");e.exports=function(t){for(var n="",r=0;r<t.length;r++){var o=t.charCodeAt(r+1)||null,a=t.charCodeAt(r-1)||null,s=(!o||!i.charHasRotatedVerticalOrientation(o)||e.exports.lookup[t[r+1]])&&(!a||!i.charHasRotatedVerticalOrientation(a)||e.exports.lookup[t[r-1]]);n+=s&&e.exports.lookup[t[r]]?e.exports.lookup[t[r]]:t[r]}return n},e.exports.lookup={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"}},{"./script_detection":128}],134:[function(t,e,n){"use strict";var i=t("./web_worker"),r=function(){this.active={}};r.prototype.acquire=function(e){var n=this;if(!this.workers){var r=t("../mapbox-gl").workerCount;for(this.workers=[];this.workers.length<r;)n.workers.push(new i)}return this.active[e]=!0,this.workers.slice()},r.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},e.exports=r},{"../mapbox-gl":24,"./web_worker":113}],135:[function(e,n,i){!function(e,r){"object"==typeof i&&"undefined"!=typeof n?n.exports=r():"function"==typeof t&&t.amd?t(r):e.glMatrix=r()}(this,function(){"use strict";function t(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}function e(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}function n(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function i(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t}function r(){var t=new Float32Array(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function o(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=i*u+o*s,t[1]=r*u+a*s,t[2]=i*-s+o*u,t[3]=r*-s+a*u,t}function a(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=i*s,t[1]=r*s,t[2]=o*u,t[3]=a*u,t}function s(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function u(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function l(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function h(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],g=e[13],m=e[14],y=e[15],v=n*s-i*a,b=n*u-r*a,_=n*l-o*a,x=i*u-r*s,w=i*l-o*s,E=r*l-o*u,S=c*g-h*d,M=c*m-f*d,T=c*y-p*d,C=h*m-f*g,I=h*y-p*g,N=f*y-p*m,P=v*N-b*I+_*C+x*T-w*M+E*S;return P?(P=1/P,t[0]=(s*N-u*I+l*C)*P,t[1]=(r*I-i*N-o*C)*P,t[2]=(g*E-m*w+y*x)*P,t[3]=(f*w-h*E-p*x)*P,t[4]=(u*T-a*N-l*M)*P,t[5]=(n*N-r*T+o*M)*P,t[6]=(m*_-d*E-y*b)*P,t[7]=(c*E-f*_+p*b)*P,t[8]=(a*I-s*T+l*S)*P,t[9]=(i*T-n*I-o*S)*P,t[10]=(d*w-g*_+y*v)*P,t[11]=(h*_-c*w-p*v)*P,t[12]=(s*M-a*C-u*S)*P,t[13]=(n*C-i*M+r*S)*P,t[14]=(g*b-d*x-m*v)*P,t[15]=(c*x-h*b+f*v)*P,t):null}function f(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],g=e[12],m=e[13],y=e[14],v=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*i+_*s+x*h+w*g,t[1]=b*r+_*u+x*f+w*m,t[2]=b*o+_*l+x*p+w*y,t[3]=b*a+_*c+x*d+w*v,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*i+_*s+x*h+w*g,t[5]=b*r+_*u+x*f+w*m,t[6]=b*o+_*l+x*p+w*y,t[7]=b*a+_*c+x*d+w*v,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*i+_*s+x*h+w*g,t[9]=b*r+_*u+x*f+w*m,t[10]=b*o+_*l+x*p+w*y,t[11]=b*a+_*c+x*d+w*v,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*i+_*s+x*h+w*g,
t[13]=b*r+_*u+x*f+w*m,t[14]=b*o+_*l+x*p+w*y,t[15]=b*a+_*c+x*d+w*v,t}function p(t,e,n){var i,r,o,a,s,u,l,c,h,f,p,d,g=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*y+e[12],t[13]=e[1]*g+e[5]*m+e[9]*y+e[13],t[14]=e[2]*g+e[6]*m+e[10]*y+e[14],t[15]=e[3]*g+e[7]*m+e[11]*y+e[15]):(i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=f,t[10]=p,t[11]=d,t[12]=i*g+s*m+h*y+e[12],t[13]=r*g+u*m+f*y+e[13],t[14]=o*g+l*m+p*y+e[14],t[15]=a*g+c*m+d*y+e[15]),t}function d(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function g(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=a*r+c*i,t[6]=s*r+h*i,t[7]=u*r+f*i,t[8]=l*r-o*i,t[9]=c*r-a*i,t[10]=h*r-s*i,t[11]=f*r-u*i,t}function m(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=a*r+c*i,t[2]=s*r+h*i,t[3]=u*r+f*i,t[4]=l*r-o*i,t[5]=c*r-a*i,t[6]=h*r-s*i,t[7]=f*r-u*i,t}function y(t,e,n,i,r){var o=1/Math.tan(e/2),a=1/(i-r);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*a,t[15]=0,t}function v(t,e,n,i,r,o,a){var s=1/(e-n),u=1/(i-r),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*u,t[14]=(a+o)*l,t[15]=1,t}var b=(t(),n(),{vec3:{transformMat3:e},vec4:{transformMat4:i},mat2:{create:r,rotate:o,scale:a},mat3:{create:s,fromRotation:u},mat4:{create:l,identity:c,translate:p,scale:d,multiply:f,perspective:y,rotateX:g,rotateZ:m,invert:h,ortho:v}});return b})},{}],136:[function(t,e,n){function i(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}e.exports=i,i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){"undefined"==typeof e&&(e=1e-6);var n,i,r,o,a;for(r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if(n=0,i=1,r=t,r<n)return n;if(r>i)return i;for(;n<i;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?n=r:i=r,r=.5*(i-n)+n}return r},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},{}],137:[function(t,e,n){(function(t){function e(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};n.resolve=function(){for(var n="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,r="/"===a.charAt(0))}return n=e(i(n.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+n||"."},n.normalize=function(t){var r=n.isAbsolute(t),o="/"===a(t,-1);return t=e(i(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var r=i(t.split("/")),o=i(e.split("/")),a=Math.min(r.length,o.length),s=a,u=0;u<a;u++)if(r[u]!==o[u]){s=u;break}for(var l=[],u=s;u<r.length;u++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:138}],138:[function(t,e,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function a(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){m&&d&&(m=!1,d.length?g=d.concat(g):y=-1,g.length&&u())}function u(){if(!m){var t=o(s);m=!0;for(var e=g.length;e;){for(d=g,g=[];++y<e;)d&&d[y].run();y=-1,e=g.length}d=null,m=!1,a(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var h,f,p=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(t){h=i}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var d,g=[],m=!1,y=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];g.push(new l(t,e)),1!==g.length||m||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],139:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],140:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],141:[function(t,e,n){(function(e,i){function r(t,e){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(e)?i.showHidden=e:e&&n._extend(i,e),x(i.showHidden)&&(i.showHidden=!1),x(i.depth)&&(i.depth=2),x(i.colors)&&(i.colors=!1),x(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),u(i,t,i.depth)}function o(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,e,i){if(t.customInspect&&e&&T(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(i,t);return b(r)||(r=u(t,r,i)),r}var o=l(t,e);if(o)return o;var a=Object.keys(e),g=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),M(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(e);if(0===a.length){if(T(e)){var m=e.name?": "+e.name:"";return t.stylize("[Function"+m+"]","special")}if(w(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(S(e))return t.stylize(Date.prototype.toString.call(e),"date");if(M(e))return c(e)}var y="",v=!1,_=["{","}"];if(d(e)&&(v=!0,_=["[","]"]),T(e)){var x=e.name?": "+e.name:"";y=" [Function"+x+"]"}if(w(e)&&(y=" "+RegExp.prototype.toString.call(e)),S(e)&&(y=" "+Date.prototype.toUTCString.call(e)),M(e)&&(y=" "+c(e)),0===a.length&&(!v||0==e.length))return _[0]+y+_[1];if(i<0)return w(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var E;return E=v?h(t,e,i,g,a):a.map(function(n){return f(t,e,i,g,n,v)}),t.seen.pop(),p(E,y,_)}function l(t,e){if(x(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return v(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,i,r){for(var o=[],a=0,s=e.length;a<s;++a)L(e,String(a))?o.push(f(t,e,n,i,String(a),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(t,e,n,i,r,!0))}),o}function f(t,e,n,i,r,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},l.get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),L(i,r)||(a="["+r+"]"),s||(t.seen.indexOf(l.value)<0?(s=m(n)?u(t,l.value,null):u(t,l.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),x(a)){if(o&&r.match(/^\d+$/))return s;a=JSON.stringify(""+r),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,n){var i=0,r=t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function m(t){return null===t}function y(t){return null==t}function v(t){return"number"==typeof t}function b(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function x(t){return void 0===t}function w(t){return E(t)&&"[object RegExp]"===I(t)}function E(t){return"object"==typeof t&&null!==t}function S(t){return E(t)&&"[object Date]"===I(t)}function M(t){return E(t)&&("[object Error]"===I(t)||t instanceof Error)}function T(t){return"function"==typeof t}function C(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function I(t){return Object.prototype.toString.call(t)}function N(t){return t<10?"0"+t.toString(10):t.toString(10)}function P(){var t=new Date,e=[N(t.getHours()),N(t.getMinutes()),N(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var A=/%[sdj%]/g;n.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(t).replace(A,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),s=i[n];n<o;s=i[++n])a+=m(s)||!E(s)?" "+s:" "+r(s);return a},n.deprecate=function(t,r){function o(){if(!a){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),a=!0}return t.apply(this,arguments)}if(x(i.process))return function(){return n.deprecate(t,r).apply(this,arguments)};if(e.noDeprecation===!0)return t;var a=!1;return o};var k,R={};n.debuglog=function(t){if(x(k)&&(k=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!R[t])if(new RegExp("\\b"+t+"\\b","i").test(k)){var i=e.pid;R[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,i,e)}}else R[t]=function(){};return R[t]},n.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=g,n.isNull=m,n.isNullOrUndefined=y,n.isNumber=v,n.isString=b,n.isSymbol=_,n.isUndefined=x,n.isRegExp=w,n.isObject=E,n.isDate=S,n.isError=M,n.isFunction=T,n.isPrimitive=C,n.isBuffer=t("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",P(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!E(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":140,_process:138,inherits:139}],142:[function(t,e,n){function i(t){return t=Math.round(t),t<0?0:t>255?255:t}function r(t){return t<0?0:t>1?1:t}function o(t){return i("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function a(t){return r("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function s(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function u(t){var e=t.replace(/ /g,"").toLowerCase();if(e in l)return l[e].slice();if("#"===e[0]){if(4===e.length){var n=parseInt(e.substr(1),16);return n>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null}if(7===e.length){var n=parseInt(e.substr(1),16);return n>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null}return null}var r=e.indexOf("("),u=e.indexOf(")");if(r!==-1&&u+1===e.length){var c=e.substr(0,r),h=e.substr(r+1,u-(r+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),f];case"hsla":if(4!==h.length)return null;f=a(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,d=a(h[1]),g=a(h[2]),m=g<=.5?g*(d+1):g+d-g*d,y=2*g-m;return[i(255*s(y,m,p+1/3)),i(255*s(y,m,p)),i(255*s(y,m,p-1/3)),f];default:return null}}return null}var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=u}catch(t){}},{}],143:[function(t,e,n){"use strict";function i(t,e,n){n=n||2;var i=e&&e.length,o=i?e[0]*n:t.length,s=r(t,0,o,n,!0),u=[];if(!s)return u;var l,c,f,p,d,g,m;if(i&&(s=h(t,e,s,n)),t.length>80*n){l=f=t[0],c=p=t[1];for(var y=n;y<o;y+=n)d=t[y],g=t[y+1],d<l&&(l=d),g<c&&(c=g),d>f&&(f=d),g>p&&(p=g);m=Math.max(f-l,p-c)}return a(s,u,n,l,c,m),u}function r(t,e,n,i,r){var o,a;if(r===L(t,e,n,i)>0)for(o=e;o<n;o+=i)a=I(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=I(o,t[o],t[o+1],a);return a&&w(a,a.next)&&(N(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,i=t;do if(n=!1,i.steiner||!w(i,i.next)&&0!==x(i.prev,i,i.next))i=i.next;else{if(N(i),i=e=i.prev,i===i.next)return null;n=!0}while(n||i!==e);return e}function a(t,e,n,i,r,h,f){if(t){!f&&h&&g(t,i,r,h);for(var p,d,m=t;t.prev!==t.next;)if(p=t.prev,d=t.next,h?u(t,i,r,h):s(t))e.push(p.i/n),e.push(t.i/n),e.push(d.i/n),N(t),t=d.next,m=d.next;else if(t=d,t===m){f?1===f?(t=l(t,e,n),a(t,e,n,i,r,h,2)):2===f&&c(t,e,n,i,r,h):a(o(t),e,n,i,r,h,1);break}}}function s(t){var e=t.prev,n=t,i=t.next;if(x(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(b(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&x(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function u(t,e,n,i){var r=t.prev,o=t,a=t.next;if(x(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,u=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,l=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,c=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=y(s,u,e,n,i),f=y(l,c,e,n,i),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&b(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&x(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&b(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&x(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function l(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!w(r,o)&&E(r,i,i.next,o)&&M(r,o)&&M(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),N(i),N(i.next),i=t=o),i=i.next}while(i!==t);return i}function c(t,e,n,i,r,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&_(u,l)){var c=C(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,e,n,i,r,s),void a(c,e,n,i,r,s)}l=l.next}u=u.next}while(u!==t)}function h(t,e,n,i){var a,s,u,l,c,h=[];for(a=0,s=e.length;a<s;a++)u=e[a]*i,l=a<s-1?e[a+1]*i:t.length,c=r(t,u,l,i,!1),c===c.next&&(c.steiner=!0),h.push(v(c));for(h.sort(f),a=0;a<h.length;a++)p(h[a],n),n=o(n,n.next);return n}function f(t,e){return t.x-e.x}function p(t,e){if(e=d(t,e)){var n=C(e,t);o(n,n.next)}}function d(t,e){var n,i=e,r=t.x,o=t.y,a=-(1/0);do{if(o<=i.y&&o>=i.next.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;for(i=n.next;i!==l;)r>=i.x&&i.x>=c&&b(o<h?r:a,o,c,h,o<h?a:r,o,i.x,i.y)&&(u=Math.abs(o-i.y)/(r-i.x),(u<f||u===f&&i.x>n.x)&&M(i,t)&&(n=i,f=u)),i=i.next;return n}function g(t,e,n,i){var r=t;do null===r.z&&(r.z=y(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,m(r)}function m(t){var e,n,i,r,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<l&&(s++,i=i.nextZ);e++);for(u=l;s>0||u>0&&i;)0===s?(r=i,i=i.nextZ,u--):0!==u&&i?n.z<=i.z?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,u--):(r=n,n=n.nextZ,s--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(a>1);return t}function y(t,e,n,i,r){return t=32767*(t-n)/r,e=32767*(e-i)/r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function v(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}function b(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function _(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!S(t,e)&&M(t,e)&&M(e,t)&&T(t,e)}function x(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function E(t,e,n,i){return!!(w(t,e)&&w(n,i)||w(t,i)&&w(n,e))||x(t,e,n)>0!=x(t,e,i)>0&&x(n,i,t)>0!=x(n,i,e)>0}function S(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&E(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function M(t,e){return x(t.prev,t,t.next)<0?x(t,e,t.next)>=0&&x(t,t.prev,e)>=0:x(t,e,t.prev)<0||x(t,t.next,e)<0}function T(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function C(t,e){var n=new P(t.i,t.x,t.y),i=new P(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function I(t,e,n,i){var r=new P(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function N(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function L(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}e.exports=i,i.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,a=Math.abs(L(t,0,o,n));if(r)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(L(t,l,c,n))}var h=0;for(s=0;s<i.length;s+=3){var f=i[s]*n,p=i[s+1]*n,d=i[s+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},{}],144:[function(t,e,n){function i(t){var e,n,r,l,c,h;switch(typeof t){case"object":if(null===t)return null;if(o(t)){for(r="[",n=t.length-1,e=0;e<n;e++)r+=i(t[e])+",";return n>-1&&(r+=i(t[e])),r+"]"}for(l=a(t).sort(),n=l.length,r="{",c=l[e=0],h=n>0&&void 0!==t[c];e<n;)h?(r+='"'+c.replace(s,u)+'":'+i(t[c]),c=l[++e],h=e<n&&void 0!==t[c],h&&(r+=",")):(c=l[++e],h=e<n&&void 0!==t[c]);return r+"}";case"undefined":return null;case"string":return'"'+t.replace(s,u)+'"';default:return t}}var r={}.toString,o=Array.isArray||function(t){return"[object Array]"===r.call(t)},a=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},s=/[\u0000-\u001f"\\]/g,u=function(t){var e=t.charCodeAt(0);switch(e){case 34:return'\\"';case 92:return"\\\\";case 12:return"\\f";case 10:return"\\n";case 13:return"\\r";case 9:return"\\t";case 8:return"\\b";default:return e>15?"\\u00"+e.toString(16):"\\u000"+e.toString(16)}};e.exports=function(t){if(void 0!==t)return""+i(t)},e.exports.stringSearch=s,e.exports.stringReplace=u},{}],145:[function(t,e,n){"use strict";function i(t){return new Function("f","var p = (f && f.properties || {}); return "+r(t))}function r(t){if(!t)return"true";var e=t[0];if(t.length<=1)return"any"===e?"false":"true";var n="=="===e?a(t[1],t[2],"===",!1):"!="===e?a(t[1],t[2],"!==",!1):"<"===e||">"===e||"<="===e||">="===e?a(t[1],t[2],e,!0):"any"===e?s(t.slice(1),"||"):"all"===e?s(t.slice(1),"&&"):"none"===e?c(s(t.slice(1),"||")):"in"===e?u(t[1],t.slice(2)):"!in"===e?c(u(t[1],t.slice(2))):"has"===e?l(t[1]):"!has"===e?c(l([t[1]])):"true";return"("+n+")"}function o(t){return"$type"===t?"f.type":"$id"===t?"f.id":"p["+JSON.stringify(t)+"]"}function a(t,e,n,i){var r=o(t),a="$type"===t?f.indexOf(e):JSON.stringify(e);return(i?"typeof "+r+"=== typeof "+a+"&&":"")+r+n+a}function s(t,e){return t.map(r).join(e)}function u(t,e){"$type"===t&&(e=e.map(function(t){return f.indexOf(t)}));var n=JSON.stringify(e.sort(h)),i=o(t);return e.length<=200?n+".indexOf("+i+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+i+", "+n+",0,"+(e.length-1)+")"}function l(t){return JSON.stringify(t)+" in p"}function c(t){return"!("+t+")"}function h(t,e){return t<e?-1:t>e?1:0}e.exports=i;var f=["Unknown","Point","LineString","Polygon"]},{}],146:[function(t,e,n){function i(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(r(i,e)),t;case"Feature":return t.geometry=i(t.geometry,e),t;case"Polygon":case"MultiPolygon":return o(t,e);default:return t}}function r(t,e){return function(n){return t(n,e)}}function o(t,e){return"Polygon"===t.type?t.coordinates=a(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(r(a,e))),t}function a(t,e){e=!!e,t[0]=s(t[0],!e);for(var n=1;n<t.length;n++)t[n]=s(t[n],e);return t}function s(t,e){return u(t)===e?t:t.reverse()}function u(t){return l.ring(t)>=0}var l=t("geojson-area");e.exports=i},{"geojson-area":147}],147:[function(t,e,n){function i(t){if("Polygon"===t.type)return r(t.coordinates);if("MultiPolygon"===t.type){for(var e=0,n=0;n<t.coordinates.length;n++)e+=r(t.coordinates[n]);return e}return null}function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(o(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(o(t[n]))}return e}function o(t){var e=0;if(t.length>2){for(var n,i,r=0;r<t.length-1;r++)n=t[r],i=t[r+1],e+=a(i[0]-n[0])*(2+Math.sin(a(n[1]))+Math.sin(a(i[1])));e=e*s.RADIUS*s.RADIUS/2}return e}function a(t){return t*Math.PI/180}var s=t("wgs84");e.exports.geometry=i,e.exports.ring=o},{wgs84:148}],148:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],149:[function(t,e,n){"use strict";function i(t,e,n,i,a,u,l,c){if(n/=e,i/=e,l>=n&&c<=i)return t;if(l>i||c<n)return null;for(var h=[],f=0;f<t.length;f++){var p,d,g=t[f],m=g.geometry,y=g.type;if(p=g.min[a],d=g.max[a],p>=n&&d<=i)h.push(g);else if(!(p>i||d<n)){var v=1===y?r(m,n,i,a):o(m,n,i,a,u,3===y);v.length&&h.push(s(g.tags,y,v,g.id))}}return h.length?h:null}function r(t,e,n,i){for(var r=[],o=0;o<t.length;o++){var a=t[o],s=a[i];s>=e&&s<=n&&r.push(a)}return r}function o(t,e,n,i,r,o){for(var s=[],u=0;u<t.length;u++){var l,c,h,f=0,p=0,d=null,g=t[u],m=g.area,y=g.dist,v=g.outer,b=g.length,_=[];for(c=0;c<b-1;c++)l=d||g[c],d=g[c+1],f=p||l[i],p=d[i],f<e?p>n?(_.push(r(l,d,e),r(l,d,n)),o||(_=a(s,_,m,y,v))):p>=e&&_.push(r(l,d,e)):f>n?p<e?(_.push(r(l,d,n),r(l,d,e)),o||(_=a(s,_,m,y,v))):p<=n&&_.push(r(l,d,n)):(_.push(l),p<e?(_.push(r(l,d,e)),o||(_=a(s,_,m,y,v))):p>n&&(_.push(r(l,d,n)),o||(_=a(s,_,m,y,v))));l=g[b-1],f=l[i],f>=e&&f<=n&&_.push(l),h=_[_.length-1],o&&h&&(_[0][0]!==h[0]||_[0][1]!==h[1])&&_.push(_[0]),a(s,_,m,y,v)}return s}function a(t,e,n,i,r){return e.length&&(e.area=n,e.dist=i,void 0!==r&&(e.outer=r),t.push(e)),[]}e.exports=i;var s=t("./feature")},{"./feature":151}],150:[function(t,e,n){"use strict";function i(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)r(n,t.features[i],e);else"Feature"===t.type?r(n,t,e):r(n,{geometry:t},e);return n}function r(t,e,n){if(null!==e.geometry){var i,s,u,c,h=e.geometry,f=h.type,p=h.coordinates,d=e.properties,g=e.id;if("Point"===f)t.push(l(d,1,[a(p)],g));else if("MultiPoint"===f)t.push(l(d,1,o(p),g));else if("LineString"===f)t.push(l(d,2,[o(p,n)],g));else if("MultiLineString"===f||"Polygon"===f){for(u=[],i=0;i<p.length;i++)c=o(p[i],n),"Polygon"===f&&(c.outer=0===i),u.push(c);t.push(l(d,"Polygon"===f?3:2,u,g))}else if("MultiPolygon"===f){for(u=[],i=0;i<p.length;i++)for(s=0;s<p[i].length;s++)c=o(p[i][s],n),c.outer=0===s,u.push(c);t.push(l(d,3,u,g))}else{if("GeometryCollection"!==f)throw new Error("Input data is not a valid GeoJSON object.");for(i=0;i<h.geometries.length;i++)r(t,{geometry:h.geometries[i],properties:d},n)}}}function o(t,e){for(var n=[],i=0;i<t.length;i++)n.push(a(t[i]));return e&&(u(n,e),s(n)),n}function a(t){var e=Math.sin(t[1]*Math.PI/180),n=t[0]/360+.5,i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i=i<0?0:i>1?1:i,[n,i,0]}function s(t){for(var e,n,i=0,r=0,o=0;o<t.length-1;o++)e=n||t[o],n=t[o+1],i+=e[0]*n[1]-n[0]*e[1],r+=Math.abs(n[0]-e[0])+Math.abs(n[1]-e[1]);t.area=Math.abs(i/2),t.dist=r}e.exports=i;var u=t("./simplify"),l=t("./feature")},{"./feature":151,"./simplify":153}],151:[function(t,e,n){"use strict";function i(t,e,n,i){var o={id:i||null,type:e,geometry:n,tags:t||null,min:[1/0,1/0],max:[-(1/0),-(1/0)]};return r(o),o}function r(t){var e=t.geometry,n=t.min,i=t.max;if(1===t.type)o(n,i,e);else for(var r=0;r<e.length;r++)o(n,i,e[r]);return t}function o(t,e,n){for(var i,r=0;r<n.length;r++)i=n[r],t[0]=Math.min(i[0],t[0]),e[0]=Math.max(i[0],e[0]),t[1]=Math.min(i[1],t[1]),e[1]=Math.max(i[1],e[1])}e.exports=i},{}],152:[function(t,e,n){"use strict";function i(t,e){return new r(t,e)}function r(t,e){e=this.options=u(Object.create(this.options),e);var n=e.debug;n&&console.time("preprocess data");var i=1<<e.maxZoom,r=c(t,e.tolerance/(i*e.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=p(r,e.buffer/e.extent,a),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function o(t,e,n){return 32*((1<<t)*n+e)+t}function a(t,e,n){return[n,(n-t[0])*(e[1]-t[1])/(e[0]-t[0])+t[1],1]}function s(t,e,n){return[(n-t[1])*(e[0]-t[0])/(e[1]-t[1])+t[0],n,1]}function u(t,e){for(var n in e)t[n]=e[n];return t}function l(t,e,n){var i=t.source;
if(1!==i.length)return!1;var r=i[0];if(3!==r.type||r.geometry.length>1)return!1;var o=r.geometry[0].length;if(5!==o)return!1;for(var a=0;a<o;a++){var s=h.point(r.geometry[0][a],e,t.z2,t.x,t.y);if(s[0]!==-n&&s[0]!==e+n||s[1]!==-n&&s[1]!==e+n)return!1}return!0}e.exports=i;var c=t("./convert"),h=t("./transform"),f=t("./clip"),p=t("./wrap"),d=t("./tile");r.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},r.prototype.splitTile=function(t,e,n,i,r,u,c){for(var h=[t,e,n,i],p=this.options,g=p.debug,m=null;h.length;){i=h.pop(),n=h.pop(),e=h.pop(),t=h.pop();var y=1<<e,v=o(e,n,i),b=this.tiles[v],_=e===p.maxZoom?0:p.tolerance/(y*p.extent);if(!b&&(g>1&&console.time("creation"),b=this.tiles[v]=d(t,y,n,i,_,e===p.maxZoom),this.tileCoords.push({z:e,x:n,y:i}),g)){g>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,b.numFeatures,b.numPoints,b.numSimplified),console.timeEnd("creation"));var x="z"+e;this.stats[x]=(this.stats[x]||0)+1,this.total++}if(b.source=t,r){if(e===p.maxZoom||e===r)continue;var w=1<<r-e;if(n!==Math.floor(u/w)||i!==Math.floor(c/w))continue}else if(e===p.indexMaxZoom||b.numPoints<=p.indexMaxPoints)continue;if(p.solidChildren||!l(b,p.extent,p.buffer)){b.source=null,g>1&&console.time("clipping");var E,S,M,T,C,I,N=.5*p.buffer/p.extent,P=.5-N,L=.5+N,A=1+N;E=S=M=T=null,C=f(t,y,n-N,n+L,0,a,b.min[0],b.max[0]),I=f(t,y,n+P,n+A,0,a,b.min[0],b.max[0]),C&&(E=f(C,y,i-N,i+L,1,s,b.min[1],b.max[1]),S=f(C,y,i+P,i+A,1,s,b.min[1],b.max[1])),I&&(M=f(I,y,i-N,i+L,1,s,b.min[1],b.max[1]),T=f(I,y,i+P,i+A,1,s,b.min[1],b.max[1])),g>1&&console.timeEnd("clipping"),t.length&&(h.push(E||[],e+1,2*n,2*i),h.push(S||[],e+1,2*n,2*i+1),h.push(M||[],e+1,2*n+1,2*i),h.push(T||[],e+1,2*n+1,2*i+1))}else r&&(m=e)}return m},r.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,a=i.debug,s=1<<t;e=(e%s+s)%s;var u=o(t,e,n);if(this.tiles[u])return h.tile(this.tiles[u],r);a>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var c,f=t,p=e,d=n;!c&&f>0;)f--,p=Math.floor(p/2),d=Math.floor(d/2),c=this.tiles[o(f,p,d)];if(!c||!c.source)return null;if(a>1&&console.log("found parent tile z%d-%d-%d",f,p,d),l(c,r,i.buffer))return h.tile(c,r);a>1&&console.time("drilling down");var g=this.splitTile(c.source,f,p,d,t,e,n);if(a>1&&console.timeEnd("drilling down"),null!==g){var m=1<<t-g;u=o(g,Math.floor(e/m),Math.floor(n/m))}return this.tiles[u]?h.tile(this.tiles[u],r):null}},{"./clip":149,"./convert":150,"./tile":154,"./transform":155,"./wrap":156}],153:[function(t,e,n){"use strict";function i(t,e){var n,i,o,a,s=e*e,u=t.length,l=0,c=u-1,h=[];for(t[l][2]=1,t[c][2]=1;c;){for(i=0,n=l+1;n<c;n++)o=r(t[n],t[l],t[c]),o>i&&(a=n,i=o);i>s?(t[a][2]=i,h.push(l),h.push(a),l=a):(c=h.pop(),l=h.pop())}}function r(t,e,n){var i=e[0],r=e[1],o=n[0],a=n[1],s=t[0],u=t[1],l=o-i,c=a-r;if(0!==l||0!==c){var h=((s-i)*l+(u-r)*c)/(l*l+c*c);h>1?(i=o,r=a):h>0&&(i+=l*h,r+=c*h)}return l=s-i,c=u-r,l*l+c*c}e.exports=i},{}],154:[function(t,e,n){"use strict";function i(t,e,n,i,o,a){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z2:e,transformed:!1,min:[2,1],max:[-1,0]},u=0;u<t.length;u++){s.numFeatures++,r(s,t[u],o,a);var l=t[u].min,c=t[u].max;l[0]<s.min[0]&&(s.min[0]=l[0]),l[1]<s.min[1]&&(s.min[1]=l[1]),c[0]>s.max[0]&&(s.max[0]=c[0]),c[1]>s.max[1]&&(s.max[1]=c[1])}return s}function r(t,e,n,i){var r,a,s,u,l=e.geometry,c=e.type,h=[],f=n*n;if(1===c)for(r=0;r<l.length;r++)h.push(l[r]),t.numPoints++,t.numSimplified++;else for(r=0;r<l.length;r++)if(s=l[r],i||!(2===c&&s.dist<n||3===c&&s.area<f)){var p=[];for(a=0;a<s.length;a++)u=s[a],(i||u[2]>f)&&(p.push(u),t.numSimplified++),t.numPoints++;3===c&&o(p,s.outer),h.push(p)}else t.numPoints+=s.length;if(h.length){var d={geometry:h,type:c,tags:e.tags||null};null!==e.id&&(d.id=e.id),t.features.push(d)}}function o(t,e){var n=a(t);n<0===e&&t.reverse()}function a(t){for(var e,n,i=0,r=0,o=t.length,a=o-1;r<o;a=r++)e=t[r],n=t[a],i+=(n[0]-e[0])*(e[1]+n[1]);return i}e.exports=i},{}],155:[function(t,e,n){"use strict";function i(t,e){if(t.transformed)return t;var n,i,o,a=t.z2,s=t.x,u=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry,h=l.type;if(1===h)for(i=0;i<c.length;i++)c[i]=r(c[i],e,a,s,u);else for(i=0;i<c.length;i++){var f=c[i];for(o=0;o<f.length;o++)f[o]=r(f[o],e,a,s,u)}}return t.transformed=!0,t}function r(t,e,n,i,r){var o=Math.round(e*(t[0]*n-i)),a=Math.round(e*(t[1]*n-r));return[o,a]}n.tile=i,n.point=r},{}],156:[function(t,e,n){"use strict";function i(t,e,n){var i=t,o=a(t,1,-1-e,e,0,n,-1,2),s=a(t,1,1-e,2+e,0,n,-1,2);return(o||s)&&(i=a(t,1,-e,1+e,0,n,-1,2)||[],o&&(i=r(o,1).concat(i)),s&&(i=i.concat(r(s,-1)))),i}function r(t,e){for(var n=[],i=0;i<t.length;i++){var r,a=t[i],u=a.type;if(1===u)r=o(a.geometry,e);else{r=[];for(var l=0;l<a.geometry.length;l++)r.push(o(a.geometry[l],e))}n.push(s(a.tags,u,r,a.id))}return n}function o(t,e){var n=[];n.area=t.area,n.dist=t.dist;for(var i=0;i<t.length;i++)n.push([t[i][0]+e,t[i][1],t[i][2]]);return n}var a=t("./clip"),s=t("./feature");e.exports=i},{"./clip":149,"./feature":151}],157:[function(t,e,n){"use strict";function i(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var o=new Int32Array(this.arrayBuffer);t=o[0],e=o[1],n=o[2],this.d=e+2*n;for(var a=0;a<this.d*this.d;a++){var s=o[r+a],u=o[r+a+1];i.push(s===u?null:o.subarray(s,u))}var l=o[r+i.length],c=o[r+i.length+1];this.keys=o.subarray(l,c),this.bboxes=o.subarray(c),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var h=0;h<this.d*this.d;h++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var f=n/e*t;this.min=-f,this.max=t+f}e.exports=i;var r=3;i.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},i.prototype._insertCell=function(t,e,n,i,r,o){this.cells[r].push(o)},i.prototype.query=function(t,e,n,i){var r=this.min,o=this.max;if(t<=r&&e<=r&&o<=n&&o<=i)return Array.prototype.slice.call(this.keys);var a=[],s={};return this._forEachCell(t,e,n,i,this._queryCell,a,s),a},i.prototype._queryCell=function(t,e,n,i,r,o,a){var s=this.cells[r];if(null!==s)for(var u=this.keys,l=this.bboxes,c=0;c<s.length;c++){var h=s[c];if(void 0===a[h]){var f=4*h;t<=l[f+2]&&e<=l[f+3]&&n>=l[f+0]&&i>=l[f+1]?(a[h]=!0,o.push(u[h])):a[h]=!1}}},i.prototype._forEachCell=function(t,e,n,i,r,o,a){for(var s=this._convertToCellCoord(t),u=this._convertToCellCoord(e),l=this._convertToCellCoord(n),c=this._convertToCellCoord(i),h=s;h<=l;h++)for(var f=u;f<=c;f++){var p=this.d*f+h;if(r.call(this,t,e,n,i,p,o,a))return}},i.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=r+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var o=new Int32Array(e+n+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var a=e,s=0;s<t.length;s++){var u=t[s];o[r+s]=a,o.set(u,a),a+=u.length}return o[r+t.length]=a,o.set(this.keys,a),a+=this.keys.length,o[r+t.length+1]=a,o.set(this.bboxes,a),a+=this.bboxes.length,o.buffer}},{}],158:[function(t,e,n){function i(t){return!!t&&"object"==typeof t}function r(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function o(t,e,n,r,s,u){return t===e||(null==t||null==e||!c(t)&&!i(e)?t!==t&&e!==e:a(t,e,o,n,r,s,u))}function a(t,e,n,i,r,o,a){var c=h(t),p=h(e),m=g,y=g;c||(m=M.call(t),m==d?m=_:m!=_&&(c=f(t))),p||(y=M.call(e),y==d?y=_:y!=_&&(p=f(e)));var v=m==_,b=y==_,x=m==y;if(x&&!c&&!v)return u(t,e,m);if(!r){var w=v&&S.call(t,"__wrapped__"),E=b&&S.call(e,"__wrapped__");if(w||E)return n(w?t.value():t,E?e.value():e,i,r,o,a)}if(!x)return!1;o||(o=[]),a||(a=[]);for(var T=o.length;T--;)if(o[T]==t)return a[T]==e;o.push(t),a.push(e);var C=(c?s:l)(t,e,n,i,r,o,a);return o.pop(),a.pop(),C}function s(t,e,n,i,o,a,s){var u=-1,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;for(;++u<l;){var h=t[u],f=e[u],p=i?i(o?f:h,o?h:f,u):void 0;if(void 0!==p){if(p)continue;return!1}if(o){if(!r(e,function(t){return h===t||n(h,t,i,o,a,s)}))return!1}else if(h!==f&&!n(h,f,i,o,a,s))return!1}return!0}function u(t,e,n){switch(n){case m:case y:return+t==+e;case v:return t.name==e.name&&t.message==e.message;case b:return t!=+t?e!=+e:t==+e;case x:case w:return t==e+""}return!1}function l(t,e,n,i,r,o,a){var s=p(t),u=s.length,l=p(e),c=l.length;if(u!=c&&!r)return!1;for(var h=u;h--;){var f=s[h];if(!(r?f in e:S.call(e,f)))return!1}for(var d=r;++h<u;){f=s[h];var g=t[f],m=e[f],y=i?i(r?m:g,r?g:m,f):void 0;if(!(void 0===y?n(g,m,i,r,o,a):y))return!1;d||(d="constructor"==f)}if(!d){var v=t.constructor,b=e.constructor;if(v!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b))return!1}return!0}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var h=t("lodash.isarray"),f=t("lodash.istypedarray"),p=t("lodash.keys"),d="[object Arguments]",g="[object Array]",m="[object Boolean]",y="[object Date]",v="[object Error]",b="[object Number]",_="[object Object]",x="[object RegExp]",w="[object String]",E=Object.prototype,S=E.hasOwnProperty,M=E.toString;e.exports=o},{"lodash.isarray":162,"lodash.istypedarray":164,"lodash.keys":165}],159:[function(t,e,n){function i(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)};case 5:return function(n,i,r,o,a){return t.call(e,n,i,r,o,a)}}return function(){return t.apply(e,arguments)}}function r(t){return t}e.exports=i},{}],160:[function(t,e,n){function i(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return s(n)?n:void 0}function o(t){return a(t)&&p.call(t)==u}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null!=t&&(o(t)?d.test(h.call(t)):i(t)&&l.test(t))}var u="[object Function]",l=/^\[object .+?Constructor\]$/,c=Object.prototype,h=Function.prototype.toString,f=c.hasOwnProperty,p=c.toString,d=RegExp("^"+h.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},{}],161:[function(t,e,n){function i(t){return o(t)&&g.call(t,"callee")&&(!y.call(t,"callee")||m.call(t)==h)}function r(t){return null!=t&&s(t.length)&&!a(t)}function o(t){return l(t)&&r(t)}function a(t){var e=u(t)?m.call(t):"";return e==f||e==p}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){return!!t&&"object"==typeof t}var c=9007199254740991,h="[object Arguments]",f="[object Function]",p="[object GeneratorFunction]",d=Object.prototype,g=d.hasOwnProperty,m=d.toString,y=d.propertyIsEnumerable;e.exports=i},{}],162:[function(t,e,n){function i(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return u(n)?n:void 0}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=v}function a(t){return s(t)&&g.call(t)==c}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return null!=t&&(a(t)?m.test(p.call(t)):i(t)&&h.test(t))}var l="[object Array]",c="[object Function]",h=/^\[object .+?Constructor\]$/,f=Object.prototype,p=Function.prototype.toString,d=f.hasOwnProperty,g=f.toString,m=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=r(Array,"isArray"),v=9007199254740991,b=y||function(t){return i(t)&&o(t.length)&&g.call(t)==l};e.exports=b},{}],163:[function(t,e,n){function i(t,e,n,i){n="function"==typeof n?o(n,i,3):void 0;var a=n?n(t,e):void 0;return void 0===a?r(t,e,n):!!a}var r=t("lodash._baseisequal"),o=t("lodash._bindcallback");e.exports=i},{"lodash._baseisequal":158,"lodash._bindcallback":159}],164:[function(t,e,n){function i(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function r(t){return!!t&&"object"==typeof t}function o(t){return r(t)&&i(t.length)&&!!L[k.call(t)]}var a=9007199254740991,s="[object Arguments]",u="[object Array]",l="[object Boolean]",c="[object Date]",h="[object Error]",f="[object Function]",p="[object Map]",d="[object Number]",g="[object Object]",m="[object RegExp]",y="[object Set]",v="[object String]",b="[object WeakMap]",_="[object ArrayBuffer]",x="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",S="[object Int8Array]",M="[object Int16Array]",T="[object Int32Array]",C="[object Uint8Array]",I="[object Uint8ClampedArray]",N="[object Uint16Array]",P="[object Uint32Array]",L={};L[w]=L[E]=L[S]=L[M]=L[T]=L[C]=L[I]=L[N]=L[P]=!0,L[s]=L[u]=L[_]=L[l]=L[x]=L[c]=L[h]=L[f]=L[p]=L[d]=L[g]=L[m]=L[y]=L[v]=L[b]=!1;var A=Object.prototype,k=A.toString;e.exports=o},{}],165:[function(t,e,n){function i(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&a(v(t))}function o(t,e){return t="number"==typeof t||p.test(t)?+t:-1,e=null==e?y:e,t>-1&&t%1==0&&t<e}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=y}function s(t){for(var e=l(t),n=e.length,i=n&&t.length,r=!!i&&a(i)&&(f(t)||h(t)),s=-1,u=[];++s<n;){var c=e[s];(r&&o(c,i)||g.call(t,c))&&u.push(c)}return u}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(f(t)||h(t))&&e||0;for(var n=t.constructor,i=-1,r="function"==typeof n&&n.prototype===t,s=Array(e),l=e>0;++i<e;)s[i]=i+"";for(var c in t)l&&o(c,e)||"constructor"==c&&(r||!g.call(t,c))||s.push(c);return s}var c=t("lodash._getnative"),h=t("lodash.isarguments"),f=t("lodash.isarray"),p=/^\d+$/,d=Object.prototype,g=d.hasOwnProperty,m=c(Object,"keys"),y=9007199254740991,v=i("length"),b=m?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&r(t)?s(t):u(t)?m(t):[]}:s;e.exports=b},{"lodash._getnative":160,"lodash.isarguments":161,"lodash.isarray":162}],166:[function(t,e,n){function i(t){return t>y?Math.pow(t,1/3):t/m+d}function r(t){return t>g?t*t*t:m*(t-d)}function o(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function a(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function s(t){var e=a(t[0]),n=a(t[1]),r=a(t[2]),o=i((.4124564*e+.3575761*n+.1804375*r)/h),s=i((.2126729*e+.7151522*n+.072175*r)/f),u=i((.0193339*e+.119192*n+.9503041*r)/p);return[116*s-16,500*(o-s),200*(s-u),t[3]]}function u(t){var e=(t[0]+16)/116,n=isNaN(t[1])?e:e+t[1]/500,i=isNaN(t[2])?e:e-t[2]/200;return e=f*r(e),n=h*r(n),i=p*r(i),[o(3.2404542*n-1.5371385*e-.4985314*i),o(-.969266*n+1.8760108*e+.041556*i),o(.0556434*n-.2040259*e+1.0572252*i),t[3]]}function l(t){var e=s(t),n=e[0],i=e[1],r=e[2],o=Math.atan2(r,i)*b;return[o<0?o+360:o,Math.sqrt(i*i+r*r),n,t[3]]}function c(t){var e=t[0]*v,n=t[1],i=t[2];return u([i,Math.cos(e)*n,Math.sin(e)*n,t[3]])}var h=.95047,f=1,p=1.08883,d=4/29,g=6/29,m=3*g*g,y=g*g*g,v=Math.PI/180,b=180/Math.PI;e.exports={lab:{forward:s,reverse:u},hcl:{forward:l,reverse:c}}},{}],167:[function(t,e,n){"use strict";function i(t){return t}function r(t,e){var n;if(f(t)){var l,c=t.stops&&"object"==typeof t.stops[0][0],h=c||void 0!==t.property,d=c||!h,g=t.stops&&typeof(c?t.stops[0][0].property:t.stops[0][0]),m=t.type||e||("string"===g?"categorical":"exponential");if("exponential"===m)l=s;else if("interval"===m)l=a;else if("categorical"===m)l=o;else{if("identity"!==m)throw new Error('Unknown function type "'+m+'"');l=u}var y;if(t.colorSpace&&"rgb"!==t.colorSpace){if(!p[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);var v=p[t.colorSpace];t=JSON.parse(JSON.stringify(t));for(var b=0;b<t.stops.length;b++)t.stops[b]=[t.stops[b][0],v.forward(t.stops[b][1])];y=v.reverse}else y=i;if(c){var _={},x=[];for(b=0;b<t.stops.length;b++){var w=t.stops[b];void 0===_[w[0].zoom]&&(_[w[0].zoom]={zoom:w[0].zoom,type:t.type,property:t.property,stops:[]}),_[w[0].zoom].stops.push([w[0].value,w[1]])}for(var E in _)x.push([_[E].zoom,r(_[E])]);n=function(e,n){return y(s({stops:x,base:t.base},e)(e,n))},n.isFeatureConstant=!1,n.isZoomConstant=!1}else d?(n=function(e){return y(l(t,e))},n.isFeatureConstant=!0,n.isZoomConstant=!1):(n=function(e,n){return y(l(t,n[t.property]))},n.isFeatureConstant=!1,n.isZoomConstant=!0)}else n=function(){return t},n.isFeatureConstant=!0,n.isZoomConstant=!0;return n}function o(t,e){for(var n=0;n<t.stops.length;n++)if(e===t.stops[n][0])return t.stops[n][1];return t.stops[0][1]}function a(t,e){for(var n=0;n<t.stops.length&&!(e<t.stops[n][0]);n++);return t.stops[Math.max(n-1,0)][1]}function s(t,e){for(var n=void 0!==t.base?t.base:1,i=0;!(i>=t.stops.length)&&!(e<=t.stops[i][0]);)i++;return 0===i?t.stops[i][1]:i===t.stops.length?t.stops[i-1][1]:l(e,n,t.stops[i-1][0],t.stops[i][0],t.stops[i-1][1],t.stops[i][1])}function u(t,e){return e}function l(t,e,n,i,r,o){return"function"==typeof r?function(){var a=r.apply(void 0,arguments),s=o.apply(void 0,arguments);return l(t,e,n,i,a,s)}:r.length?h(t,e,n,i,r,o):c(t,e,n,i,r,o)}function c(t,e,n,i,r,o){var a,s=i-n,u=t-n;return a=1===e?u/s:(Math.pow(e,u)-1)/(Math.pow(e,s)-1),r*(1-a)+o*a}function h(t,e,n,i,r,o){for(var a=[],s=0;s<r.length;s++)a[s]=c(t,e,n,i,r[s],o[s]);return a}function f(t){return"object"==typeof t&&(t.stops||"identity"===t.type)}var p=t("./color_spaces");e.exports.isFunctionDefinition=f,e.exports.interpolated=function(t){return r(t,"exponential")},e.exports["piecewise-constant"]=function(t){return r(t,"interval")}},{"./color_spaces":166}],168:[function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)"ref"!==i&&(n[i]=t[i]);return o.forEach(function(t){t in e&&(n[t]=e[t])}),n}function r(t){t=t.slice();var e,n=Object.create(null);for(e=0;e<t.length;e++)n[t[e].id]=t[e];for(e=0;e<t.length;e++)"ref"in t[e]&&(t[e]=i(t[e],n[t[e].ref]));return t}var o=t("./util/ref_properties");e.exports=r},{"./util/ref_properties":174}],169:[function(t,e,n){"use strict";function i(t,e,n,i){t=t||{},e=e||{};var r;for(r in t)t.hasOwnProperty(r)&&(e.hasOwnProperty(r)||(n.push({command:c.removeSource,args:[r]}),i[r]=!0));for(r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)?l(t[r],e[r])||(n.push({command:c.removeSource,args:[r]}),n.push({command:c.addSource,args:[r,e[r]]}),i[r]=!0):n.push({command:c.addSource,args:[r,e[r]]}))}function r(t,e,n,i,r,o){t=t||{},e=e||{};var a;for(a in t)t.hasOwnProperty(a)&&(l(t[a],e[a])||n.push({command:o,args:[i,a,e[a],r]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(l(t[a],e[a])||n.push({command:o,args:[i,a,e[a],r]}))}function o(t){return t.id}function a(t,e){return t[e.id]=e,t}function s(t,e,n){t=t||[],e=e||[];var i,s,u,h,f,p,d,g=t.map(o),m=e.map(o),y=t.reduce(a,{}),v=e.reduce(a,{}),b=g.slice(),_=Object.create(null);for(i=0,s=0;i<g.length;i++)u=g[i],v.hasOwnProperty(u)?s++:(n.push({command:c.removeLayer,args:[u]}),b.splice(b.indexOf(u,s),1));for(i=0,s=0;i<m.length;i++)u=m[m.length-1-i],b[b.length-1-i]!==u&&(y.hasOwnProperty(u)?(n.push({command:c.removeLayer,args:[u]}),b.splice(b.lastIndexOf(u,b.length-s),1)):s++,p=b[b.length-i],n.push({command:c.addLayer,args:[v[u],p]}),b.splice(b.length-i,0,u),_[u]=!0);for(i=0;i<m.length;i++)if(u=m[i],h=y[u],f=v[u],!_[u]&&!l(h,f))if(l(h.source,f.source)&&l(h["source-layer"],f["source-layer"])&&l(h.type,f.type)){r(h.layout,f.layout,n,u,null,c.setLayoutProperty),r(h.paint,f.paint,n,u,null,c.setPaintProperty),l(h.filter,f.filter)||n.push({command:c.setFilter,args:[u,f.filter]}),l(h.minzoom,f.minzoom)&&l(h.maxzoom,f.maxzoom)||n.push({command:c.setLayerZoomRange,args:[u,f.minzoom,f.maxzoom]});for(d in h)h.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?r(h[d],f[d],n,u,d.slice(6),c.setPaintProperty):l(h[d],f[d])||n.push({command:c.setLayerProperty,args:[u,d,f[d]]}));for(d in f)f.hasOwnProperty(d)&&!h.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?r(h[d],f[d],n,u,d.slice(6),c.setPaintProperty):l(h[d],f[d])||n.push({command:c.setLayerProperty,args:[u,d,f[d]]}))}else n.push({command:c.removeLayer,args:[u]}),p=b[b.lastIndexOf(u)+1],n.push({command:c.addLayer,args:[f,p]})}function u(t,e){if(!t)return[{command:c.setStyle,args:[e]}];var n=[];try{if(!l(t.version,e.version))return[{command:c.setStyle,args:[e]}];l(t.center,e.center)||n.push({command:c.setCenter,args:[e.center]}),l(t.zoom,e.zoom)||n.push({command:c.setZoom,args:[e.zoom]}),l(t.bearing,e.bearing)||n.push({command:c.setBearing,args:[e.bearing]}),l(t.pitch,e.pitch)||n.push({command:c.setPitch,args:[e.pitch]}),l(t.sprite,e.sprite)||n.push({command:c.setSprite,args:[e.sprite]}),l(t.glyphs,e.glyphs)||n.push({command:c.setGlyphs,args:[e.glyphs]}),l(t.transition,e.transition)||n.push({command:c.setTransition,args:[e.transition]}),l(t.light,e.light)||n.push({command:c.setLight,args:[e.light]});var r={},o=[];i(t.sources,e.sources,o,r);var a=[];t.layers&&t.layers.forEach(function(t){r[t.source]?n.push({command:c.removeLayer,args:[t.id]}):a.push(t)}),n=n.concat(o),s(a,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:c.setStyle,args:[e]}]}return n}var l=t("lodash.isequal"),c={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};e.exports=u,e.exports.operations=c},{"lodash.isequal":163}],170:[function(t,e,n){"use strict";function i(t,e){this.message=(t?t+": ":"")+r.apply(r,Array.prototype.slice.call(arguments,2)),null!==e&&void 0!==e&&e.__line__&&(this.line=e.__line__)}var r=t("util").format;e.exports=i},{util:141}],171:[function(t,e,n){"use strict";function i(t){return a(o.map(function(e){return t[e]}))}function r(t){var e,n,r={};for(e=0;e<t.length;e++){n=i(t[e]);var o=r[n];o||(o=r[n]=[]),o.push(t[e])}var a=[];for(n in r)a.push(r[n]);return a}var o=t("./util/ref_properties"),a=t("fast-stable-stringify");e.exports=r},{"./util/ref_properties":174,"fast-stable-stringify":144}],172:[function(t,e,n){"use strict";e.exports=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}},{}],173:[function(t,e,n){"use strict";e.exports=function(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}},{}],174:[function(t,e,n){"use strict";e.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],175:[function(t,e,n){"use strict";e.exports=function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}},{}],176:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("../util/extend");e.exports=function(e){var n=t("./validate_function"),a=t("./validate_object"),s={"*":function(){return[]},array:t("./validate_array"),boolean:t("./validate_boolean"),number:t("./validate_number"),color:t("./validate_color"),constants:t("./validate_constants"),enum:t("./validate_enum"),filter:t("./validate_filter"),function:t("./validate_function"),layer:t("./validate_layer"),object:t("./validate_object"),source:t("./validate_source"),light:t("./validate_light"),string:t("./validate_string")},u=e.value,l=e.valueSpec,c=e.key,h=e.styleSpec,f=e.style;if("string"===r(u)&&"@"===u[0]){if(h.$version>7)return[new i(c,u,"constants have been deprecated as of v8")];if(!(u in f.constants))return[new i(c,u,'constant "%s" not found',u)];e=o({},e,{value:f.constants[u]})}return l.function&&"object"===r(u)?n(e):l.type&&s[l.type]?s[l.type](e):a(o({},e,{valueSpec:l.type?h[l.type]:l}))}},{"../error/validation_error":170,"../util/extend":172,"../util/get_type":173,"./validate_array":177,"./validate_boolean":178,"./validate_color":179,"./validate_constants":180,"./validate_enum":181,"./validate_filter":182,"./validate_function":183,"./validate_layer":185,"./validate_light":187,"./validate_number":188,"./validate_object":189,"./validate_source":191,"./validate_string":192}],177:[function(t,e,n){"use strict";var i=t("../util/get_type"),r=t("./validate"),o=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.valueSpec,a=t.style,s=t.styleSpec,u=t.key,l=t.arrayElementValidator||r;if("array"!==i(e))return[new o(u,e,"array expected, %s found",i(e))];if(n.length&&e.length!==n.length)return[new o(u,e,"array length %d expected, length %d found",n.length,e.length)];if(n["min-length"]&&e.length<n["min-length"])return[new o(u,e,"array length at least %d expected, length %d found",n["min-length"],e.length)];var c={type:n.value};s.$version<7&&(c.function=n.function),"object"===i(n.value)&&(c=n.value);for(var h=[],f=0;f<e.length;f++)h=h.concat(l({array:e,arrayIndex:f,value:e[f],valueSpec:c,style:a,styleSpec:s,key:u+"["+f+"]"}));return h}},{"../error/validation_error":170,"../util/get_type":173,"./validate":176}],178:[function(t,e,n){"use strict";var i=t("../util/get_type"),r=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=i(e);return"boolean"!==o?[new r(n,e,"boolean expected, %s found",o)]:[]}},{"../error/validation_error":170,"../util/get_type":173}],179:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("csscolorparser").parseCSSColor;e.exports=function(t){var e=t.key,n=t.value,a=r(n);return"string"!==a?[new i(e,n,"color expected, %s found",a)]:null===o(n)?[new i(e,n,'color expected, "%s" found',n)]:[]}},{"../error/validation_error":170,"../util/get_type":173,csscolorparser:142}],180:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type");e.exports=function(t){var e=t.key,n=t.value,o=t.styleSpec;if(o.$version>7)return n?[new i(e,n,"constants have been deprecated as of v8")]:[];var a=r(n);if("object"!==a)return[new i(e,n,"object expected, %s found",a)];var s=[];for(var u in n)"@"!==u[0]&&s.push(new i(e+"."+u,n[u],'constants must start with "@"'));return s}},{"../error/validation_error":170,"../util/get_type":173}],181:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/unbundle_jsonlint");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,a=[];return Array.isArray(o.values)?o.values.indexOf(r(n))===-1&&a.push(new i(e,n,"expected one of [%s], %s found",o.values.join(", "),n)):Object.keys(o.values).indexOf(r(n))===-1&&a.push(new i(e,n,"expected one of [%s], %s found",Object.keys(o.values).join(", "),n)),a}},{"../error/validation_error":170,"../util/unbundle_jsonlint":175}],182:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("./validate_enum"),o=t("../util/get_type"),a=t("../util/unbundle_jsonlint");e.exports=function t(e){var n,s=e.value,u=e.key,l=e.styleSpec,c=[];if("array"!==o(s))return[new i(u,s,"array expected, %s found",o(s))];if(s.length<1)return[new i(u,s,"filter array must have at least 1 element")];switch(c=c.concat(r({key:u+"[0]",value:s[0],valueSpec:l.filter_operator,style:e.style,styleSpec:e.styleSpec})),a(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&"$type"==s[1]&&c.push(new i(u,s,'"$type" cannot be use with operator "%s"',s[0]));case"==":case"!=":3!=s.length&&c.push(new i(u,s,'filter array for operator "%s" must have 3 elements',s[0]));case"in":case"!in":s.length>=2&&(n=o(s[1]),"string"!==n?c.push(new i(u+"[1]",s[1],"string expected, %s found",n)):"@"===s[1][0]&&c.push(new i(u+"[1]",s[1],"filter key cannot be a constant")));for(var h=2;h<s.length;h++)n=o(s[h]),"$type"==s[1]?c=c.concat(r({key:u+"["+h+"]",value:s[h],valueSpec:l.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"===n&&"@"===s[h][0]?c.push(new i(u+"["+h+"]",s[h],"filter value cannot be a constant")):"string"!==n&&"number"!==n&&"boolean"!==n&&c.push(new i(u+"["+h+"]",s[h],"string, number, or boolean expected, %s found",n));break;case"any":case"all":case"none":for(h=1;h<s.length;h++)c=c.concat(t({key:u+"["+h+"]",value:s[h],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=o(s[1]),2!==s.length?c.push(new i(u,s,'filter array for "%s" operator must have 2 elements',s[0])):"string"!==n?c.push(new i(u+"[1]",s[1],"string expected, %s found",n)):"@"===s[1][0]&&c.push(new i(u+"[1]",s[1],"filter key cannot be a constant"))}return c}},{"../error/validation_error":170,"../util/get_type":173,"../util/unbundle_jsonlint":175,"./validate_enum":181}],183:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("./validate"),a=t("./validate_object"),s=t("./validate_array"),u=t("./validate_number"),l=t("../util/unbundle_jsonlint");e.exports=function(t){function e(t){if("identity"===g)return[new i(t.key,t.value,'identity function may not have a "stops" property')];var e=[],o=t.value;return e=e.concat(s({key:t.key,value:o,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:n})),"array"===r(o)&&0===o.length&&e.push(new i(t.key,o,"array must have at least one stop")),e}function n(t){var e=[],n=t.value,s=t.key;if("array"!==r(n))return[new i(s,n,"array expected, %s found",r(n))];if(2!==n.length)return[new i(s,n,"array length %d expected, length %d found",2,n.length)];if(b){if("object"!==r(n[0]))return[new i(s,n,"object expected, %s found",r(n[0]))];if(void 0===n[0].zoom)return[new i(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new i(s,n,"object stop key must have value")];if(p&&p>l(n[0].zoom))return[new i(s,n[0].zoom,"stop zoom values must appear in ascending order")];l(n[0].zoom)!==p&&(p=l(n[0].zoom),f=void 0),e=e.concat(a({key:s+"[0]",value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:u,value:c}}))}else e=e.concat(c({key:s+"[0]",value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec}));return e=e.concat(o({key:s+"[1]",value:n[1],valueSpec:d,style:t.style,styleSpec:t.styleSpec})),"number"===r(n[0])&&"piecewise-constant"===d.function&&n[0]%1!==0&&e.push(new i(s+"[0]",n[0],"zoom level for piecewise-constant functions must be an integer")),e}function c(t){var e=r(t.value),n=l(t.value);if(h){if(e!==h)return[new i(t.key,t.value,"%s stop domain type must match previous stop domain type %s",e,h)]}else h=e,g||"string"!==e||(g="categorical");return"number"!==e&&"string"!==e?[new i(t.key,t.value,"property value must be a number or string")]:"number"!==e&&"categorical"!==g?[new i(t.key,t.value,"number expected, %s found",e)]:"categorical"!==g||"number"!==e||isFinite(n)&&Math.floor(n)===n?"number"===e&&void 0!==f&&n<f?[new i(t.key,t.value,"stop domain values must appear in ascending order")]:(f=n,"categorical"===g&&n in m?[new i(t.key,t.value,"stop domain values must be unique")]:(m[n]=!0,[])):[new i(t.key,t.value,"integer expected, found %s",n)]}var h,f,p,d=t.valueSpec,g=l(t.value.type),m={},y="categorical"!==g&&void 0===t.value.property,v=!y,b="array"===r(t.value.stops)&&"array"===r(t.value.stops[0])&&"object"===r(t.value.stops[0][0]),_=a({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:e}});return"identity"===g||t.value.stops||_.push(new i(t.key,t.value,'missing required property "stops"')),"exponential"===g&&"piecewise-constant"===t.valueSpec.function&&_.push(new i(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(v&&!t.valueSpec["property-function"]?_.push(new i(t.key,t.value,"property functions not supported")):y&&!t.valueSpec["zoom-function"]&&_.push(new i(t.key,t.value,"zoom functions not supported"))),
"categorical"!==g&&!b||void 0!==t.value.property||_.push(new i(t.key,t.value,'"property" property is required')),_}},{"../error/validation_error":170,"../util/get_type":173,"../util/unbundle_jsonlint":175,"./validate":176,"./validate_array":177,"./validate_number":188,"./validate_object":189}],184:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("./validate_string");e.exports=function(t){var e=t.value,n=t.key,o=r(t);return o.length?o:(e.indexOf("{fontstack}")===-1&&o.push(new i(n,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&o.push(new i(n,e,'"glyphs" url must include a "{range}" token')),o)}},{"../error/validation_error":170,"./validate_string":192}],185:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/unbundle_jsonlint"),o=t("./validate_object"),a=t("./validate_filter"),s=t("./validate_paint_property"),u=t("./validate_layout_property"),l=t("../util/extend");e.exports=function(t){var e=[],n=t.value,c=t.key,h=t.style,f=t.styleSpec;n.type||n.ref||e.push(new i(c,n,'either "type" or "ref" is required'));var p=r(n.type),d=r(n.ref);if(n.id)for(var g=0;g<t.arrayIndex;g++){var m=h.layers[g];r(m.id)===r(n.id)&&e.push(new i(c,n.id,'duplicate layer id "%s", previously used at line %d',n.id,m.id.__line__))}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new i(c,n[t],'"%s" is prohibited for ref layers',t))});var y;h.layers.forEach(function(t){t.id==d&&(y=t)}),y?y.ref?e.push(new i(c,n.ref,"ref cannot reference another ref layer")):p=r(y.type):e.push(new i(c,n.ref,'ref layer "%s" not found',d))}else if("background"!==p)if(n.source){var v=h.sources&&h.sources[n.source];v?"vector"!=v.type||"raster"!=p&&"arcgisraster"!=p?"raster"==v.type&&"raster"!=p&&"arcgisraster"!=p?e.push(new i(c,n.source,'layer "%s" requires a vector source',n.id)):"vector"!=v.type||n["source-layer"]||e.push(new i(c,n,'layer "%s" must specify a "source-layer"',n.id)):e.push(new i(c,n.source,'layer "%s" requires a raster source',n.id)):e.push(new i(c,n.source,'source "%s" not found',n.source))}else e.push(new i(c,n,'missing required property "source"'));return e=e.concat(o({key:c,value:n,valueSpec:f.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},filter:a,layout:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return u(l({layerType:p},t))}}})},paint:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return s(l({layerType:p},t))}}})}}}))}},{"../error/validation_error":170,"../util/extend":172,"../util/unbundle_jsonlint":175,"./validate_filter":182,"./validate_layout_property":186,"./validate_object":189,"./validate_paint_property":190}],186:[function(t,e,n){"use strict";var i=t("./validate"),r=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.style,o=t.styleSpec,a=t.value,s=t.objectKey,u=o["layout_"+t.layerType];if(!u)return[];if(t.valueSpec||u[s]){var l=[];return"symbol"===t.layerType&&("icon-image"===s&&n&&!n.sprite?l.push(new r(e,a,'use of "icon-image" requires a style "sprite" property')):"text-field"===s&&n&&!n.glyphs&&l.push(new r(e,a,'use of "text-field" requires a style "glyphs" property'))),l.concat(i({key:t.key,value:a,valueSpec:t.valueSpec||u[s],style:n,styleSpec:o}))}return[new r(e,a,'unknown property "%s"',s)]}},{"../error/validation_error":170,"./validate":176}],187:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.value,n=t.styleSpec,a=n.light,s=t.style,u=[],l=r(e);if(void 0===e)return u;if("object"!==l)return u=u.concat([new i("light",e,"object expected, %s found",l)]);for(var c in e){var h=c.match(/^(.*)-transition$/);u=h&&a[h[1]]&&a[h[1]].transition?u.concat(o({key:c,value:e[c],valueSpec:n.transition,style:s,styleSpec:n})):a[c]?u.concat(o({key:c,value:e[c],valueSpec:a[c],style:s,styleSpec:n})):u.concat([new i(c,e[c],'unknown property "%s"',c)])}return u}},{"../error/validation_error":170,"../util/get_type":173,"./validate":176}],188:[function(t,e,n){"use strict";var i=t("../util/get_type"),r=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,a=i(n);return"number"!==a?[new r(e,n,"number expected, %s found",a)]:"minimum"in o&&n<o.minimum?[new r(e,n,"%s is less than the minimum value %s",n,o.minimum)]:"maximum"in o&&n>o.maximum?[new r(e,n,"%s is greater than the maximum value %s",n,o.maximum)]:[]}},{"../error/validation_error":170,"../util/get_type":173}],189:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.key,n=t.value,a=t.valueSpec||{},s=t.objectElementValidators||{},u=t.style,l=t.styleSpec,c=[],h=r(n);if("object"!==h)return[new i(e,n,"object expected, %s found",h)];for(var f in n){var p,d=f.split(".")[0],g=a[d]||a["*"];if(s[d])p=s[d];else if(a[d])p=o;else if(s["*"])p=s["*"];else{if(!a["*"]){c.push(new i(e,n[f],'unknown property "%s"',f));continue}p=o}c=c.concat(p({key:(e?e+".":e)+f,value:n[f],valueSpec:g,style:u,styleSpec:l,object:n,objectKey:f}))}for(d in a)a[d].required&&void 0===a[d].default&&void 0===n[d]&&c.push(new i(e,n,'missing required property "%s"',d));return c}},{"../error/validation_error":170,"../util/get_type":173,"./validate":176}],190:[function(t,e,n){"use strict";var i=t("./validate"),r=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.style,o=t.styleSpec,a=t.value,s=t.objectKey,u=o["paint_"+t.layerType];if(!u)return[];var l=s.match(/^(.*)-transition$/);return l&&u[l[1]]&&u[l[1]].transition?i({key:e,value:a,valueSpec:o.transition,style:n,styleSpec:o}):t.valueSpec||u[s]?i({key:t.key,value:a,valueSpec:t.valueSpec||u[s],style:n,styleSpec:o}):[new r(e,a,'unknown property "%s"',s)]}},{"../error/validation_error":170,"./validate":176}],191:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/unbundle_jsonlint"),o=t("./validate_object"),a=t("./validate_enum");e.exports=function(t){var e=t.value,n=t.key,s=t.styleSpec,u=t.style;if(!e.type)return[new i(n,e,'"type" is required')];var l=r(e.type);switch(l){case"vector":case"raster":case"arcgisraster":var c=[];if(c=c.concat(o({key:n,value:e,valueSpec:s.source_tile,style:t.style,styleSpec:s})),"url"in e)for(var h in e)["type","url","tileSize"].indexOf(h)<0&&c.push(new i(n+"."+h,e[h],'a source with a "url" property may not include a "%s" property',h));return c;case"geojson":return o({key:n,value:e,valueSpec:s.source_geojson,style:u,styleSpec:s});case"video":return o({key:n,value:e,valueSpec:s.source_video,style:u,styleSpec:s});case"image":return o({key:n,value:e,valueSpec:s.source_image,style:u,styleSpec:s});case"canvas":return o({key:n,value:e,valueSpec:s.source_canvas,style:u,styleSpec:s});default:return a({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","arcgisraster","geojson","video","image"]},style:u,styleSpec:s})}}},{"../error/validation_error":170,"../util/unbundle_jsonlint":175,"./validate_enum":181,"./validate_object":189}],192:[function(t,e,n){"use strict";var i=t("../util/get_type"),r=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=i(e);return"string"!==o?[new r(n,e,"string expected, %s found",o)]:[]}},{"../error/validation_error":170,"../util/get_type":173}],193:[function(t,e,n){"use strict";function i(t,e){e=e||u;var n=[];return n=n.concat(s({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:l,"*":function(){return[]}}})),e.$version>7&&t.constants&&(n=n.concat(a({key:"constants",value:t.constants,style:t,styleSpec:e}))),r(n)}function r(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function o(t){return function(){return r(t.apply(this,arguments))}}var a=t("./validate/validate_constants"),s=t("./validate/validate"),u=t("../reference/latest.min"),l=t("./validate/validate_glyphs_url");i.source=o(t("./validate/validate_source")),i.light=o(t("./validate/validate_light")),i.layer=o(t("./validate/validate_layer")),i.filter=o(t("./validate/validate_filter")),i.paintProperty=o(t("./validate/validate_paint_property")),i.layoutProperty=o(t("./validate/validate_layout_property")),e.exports=i},{"../reference/latest.min":194,"./validate/validate":176,"./validate/validate_constants":180,"./validate/validate_filter":182,"./validate/validate_glyphs_url":184,"./validate/validate_layer":185,"./validate/validate_layout_property":186,"./validate/validate_light":187,"./validate/validate_paint_property":190,"./validate/validate_source":191}],194:[function(t,e,n){e.exports=t("./v8.min.json")},{"./v8.min.json":195}],195:[function(t,e,n){e.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image","source_canvas"],source_tile:{type:{required:!0,type:"enum",values:{vector:{},raster:{},arcgisraster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},"fill-extrusion":{},raster:{},arcgisraster:{},background:{}}},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_fill-extrusion","layout_symbol","layout_raster","layout_arcgisraster","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_arcgisraster:{visibility:{type:"enum",function:"piecewise-constant",values:["visible","none"],default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_fill-extrusion","paint_symbol","paint_raster","paint_arcgisraster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_arcgisraster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],196:[function(t,e,n){"use strict";function i(t){return!!(r()&&o()&&a()&&s()&&u()&&l()&&c()&&h(t&&t.failIfMajorPerformanceCaveat))}function r(){return"undefined"!=typeof window&&"undefined"!=typeof document}function o(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function a(){return Function.prototype&&Function.prototype.bind}function s(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function u(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function l(){return"Worker"in window}function c(){return"Uint8ClampedArray"in window}function h(t){return void 0===p[t]&&(p[t]=f(t)),p[t]}function f(t){var e=document.createElement("canvas"),n=Object.create(i.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.probablySupportsContext?e.probablySupportsContext("webgl",n)||e.probablySupportsContext("experimental-webgl",n):e.supportsContext?e.supportsContext("webgl",n)||e.supportsContext("experimental-webgl",n):e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}"undefined"!=typeof e&&e.exports?e.exports=i:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=i);var p={};i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],197:[function(t,e,n){"use strict";function i(t){var e;t&&t.length&&(e=t,t=e.length);var n=new Uint8Array(t||0);return e&&n.set(e),n.readUInt32LE=o.readUInt32LE,n.writeUInt32LE=o.writeUInt32LE,n.readInt32LE=o.readInt32LE,n.writeInt32LE=o.writeInt32LE,n.readFloatLE=o.readFloatLE,n.writeFloatLE=o.writeFloatLE,n.readDoubleLE=o.readDoubleLE,n.writeDoubleLE=o.writeDoubleLE,n.toString=o.toString,n.write=o.write,n.slice=o.slice,n.copy=o.copy,n._isBuffer=!0,n}function r(t){for(var e,n,i=t.length,r=[],o=0;o<i;o++){if(e=t.charCodeAt(o),e>55295&&e<57344){if(!n){e>56319||o+1===i?r.push(239,191,189):n=e;continue}if(e<56320){r.push(239,191,189),n=e;continue}e=n-55296<<10|e-56320|65536,n=null}else n&&(r.push(239,191,189),n=null);e<128?r.push(e):e<2048?r.push(e>>6|192,63&e|128):e<65536?r.push(e>>12|224,e>>6&63|128,63&e|128):r.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}return r}e.exports=i;var o,a,s,u=t("ieee754");o={readUInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},writeUInt32LE:function(t,e){this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24},readInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+(this[t+3]<<24)},readFloatLE:function(t){return u.read(this,t,!0,23,4)},readDoubleLE:function(t){return u.read(this,t,!0,52,8)},writeFloatLE:function(t,e){return u.write(this,t,e,!0,23,4)},writeDoubleLE:function(t,e){return u.write(this,t,e,!0,52,8)},toString:function(t,e,n){var i="",r="";e=e||0,n=Math.min(this.length,n||this.length);for(var o=e;o<n;o++){var a=this[o];a<=127?(i+=decodeURIComponent(r)+String.fromCharCode(a),r=""):r+="%"+a.toString(16)}return i+=decodeURIComponent(r)},write:function(t,e){for(var n=t===a?s:r(t),i=0;i<n.length;i++)this[e+i]=n[i]},slice:function(t,e){return this.subarray(t,e)},copy:function(t,e){e=e||0;for(var n=0;n<this.length;n++)t[e+n]=this[n]}},o.writeInt32LE=o.writeUInt32LE,i.byteLength=function(t){return a=t,s=r(t),s.length},i.isBuffer=function(t){return!(!t||!t._isBuffer)}},{ieee754:199}],198:[function(t,e,n){(function(n){"use strict";function i(t){this.buf=m.isBuffer(t)?t:new m(t||0),this.pos=0,this.length=this.buf.length}function r(t,e){var n,i=e.buf;if(n=i[e.pos++],t+=268435456*(127&n),n<128)return t;if(n=i[e.pos++],t+=34359738368*(127&n),n<128)return t;
if(n=i[e.pos++],t+=4398046511104*(127&n),n<128)return t;if(n=i[e.pos++],t+=562949953421312*(127&n),n<128)return t;if(n=i[e.pos++],t+=72057594037927940*(127&n),n<128)return t;if(n=i[e.pos++],t+=0x8000000000000000*(127&n),n<128)return t;throw new Error("Expected varint not more than 10 bytes")}function o(t,e){e.realloc(10);for(var n=e.pos+10;t>=1;){if(e.pos>=n)throw new Error("Given varint doesn't fit into 10 bytes");var i=255&t;e.buf[e.pos++]=i|(t>=128?128:0),t/=128}}function a(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function s(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function u(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function l(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function c(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}e.exports=i;var m=n.Buffer||t("./buffer");i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var y=4294967296,v=1/y,b=Math.pow(2,63);i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;t(r,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=this.buf.readUInt32LE(this.pos);return this.pos+=4,t},readSFixed32:function(){var t=this.buf.readInt32LE(this.pos);return this.pos+=4,t},readFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*y;return this.pos+=8,t},readSFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*y;return this.pos+=8,t},readFloat:function(){var t=this.buf.readFloatLE(this.pos);return this.pos+=4,t},readDouble:function(){var t=this.buf.readDoubleLE(this.pos);return this.pos+=8,t},readVarint:function(){var t,e,n=this.buf;return e=n[this.pos++],t=127&e,e<128?t:(e=n[this.pos++],t|=(127&e)<<7,e<128?t:(e=n[this.pos++],t|=(127&e)<<14,e<128?t:(e=n[this.pos++],t|=(127&e)<<21,e<128?t:r(t,this))))},readVarint64:function(){var t=this.pos,e=this.readVarint();if(e<b)return e;for(var n=this.pos-2;255===this.buf[n];)n--;n<t&&(n=t),e=0;for(var i=0;i<n-t+1;i++){var r=127&~this.buf[t+i];e+=i<4?r<<7*i:r*Math.pow(2,7*i)}return-e-1},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.buf.toString("utf8",this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.slice(this.pos,t);return this.pos=t,e},readPackedVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readVarint());return e},readPackedSVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new m(e);this.buf.copy(n),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(t){this.realloc(4),this.buf.writeUInt32LE(t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),this.buf.writeInt32LE(t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(t&-1,this.pos),this.buf.writeUInt32LE(Math.floor(t*v),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(t&-1,this.pos),this.buf.writeInt32LE(Math.floor(t*v),this.pos+4),this.pos+=8},writeVarint:function(t){return t=+t,t>268435455?void o(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),void(t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t);var e=m.byteLength(t);this.writeVarint(e),this.realloc(e),this.buf.write(t,this.pos),this.pos+=e},writeFloat:function(t){this.realloc(4),this.buf.writeFloatLE(t,this.pos),this.pos+=4},writeDouble:function(t){this.realloc(8),this.buf.writeDoubleLE(t,this.pos),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&a(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,s,e)},writePackedSVarint:function(t,e){this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){this.writeMessage(t,h,e)},writePackedFloat:function(t,e){this.writeMessage(t,l,e)},writePackedDouble:function(t,e){this.writeMessage(t,c,e)},writePackedFixed32:function(t,e){this.writeMessage(t,f,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,p,e)},writePackedFixed64:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,g,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":197}],199:[function(t,e,n){n.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?r-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,i),o-=l}return(p?-1:1)*a*Math.pow(2,o-i)},n.write=function(t,e,n,i,r,o){var a,s,u,l=8*o-r-1,c=(1<<l)-1,h=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=d,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*g}},{}],200:[function(t,e,n){"use strict";function i(t,e){this.x=t,this.y=e}e.exports=i,i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=i,this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t}},{}],201:[function(t,e,n){"use strict";function i(t,e,n,a,s){for(n=n||0,a=a||t.length-1,s=s||o;a>n;){if(a-n>600){var u=a-n+1,l=e-n+1,c=Math.log(u),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(u-h)/u)*(l-u/2<0?-1:1),p=Math.max(n,Math.floor(e-l*h/u+f)),d=Math.min(a,Math.floor(e+(u-l)*h/u+f));i(t,e,p,d,s)}var g=t[e],m=n,y=a;for(r(t,n,e),s(t[a],g)>0&&r(t,n,a);m<y;){for(r(t,m,y),m++,y--;s(t[m],g)<0;)m++;for(;s(t[y],g)>0;)y--}0===s(t[n],g)?r(t,n,y):(y++,r(t,y,a)),y<=e&&(n=y+1),e<=y&&(a=y-1)}}function r(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function o(t,e){return t<e?-1:t>e?1:0}e.exports=i},{}],202:[function(e,n,i){!function(e,r){"object"==typeof i&&"undefined"!=typeof n?n.exports=r():"function"==typeof t&&t.amd?t(r):e.ShelfPack=r()}(this,function(){function t(t,e,n){n=n||{},this.w=t||64,this.h=e||64,this.autoResize=!!n.autoResize,this.shelves=[],this.stats={},this.count=function(t){this.stats[t]=(0|this.stats[t])+1}}function e(t,e,n){this.x=0,this.y=t,this.w=this.free=e,this.h=n}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var n,i,r,o=[],a=0;a<t.length;a++)if(n=t[a].w||t[a].width,i=t[a].h||t[a].height,n&&i){if(r=this.packOne(n,i),!r)continue;e.inPlace&&(t[a].x=r.x,t[a].y=r.y),o.push(r)}if(this.shelves.length>0){for(var s=0,u=0,l=0;l<this.shelves.length;l++){var c=this.shelves[l];u+=c.h,s=Math.max(c.w-c.free,s)}this.resize(s,u)}return o},t.prototype.packOne=function(t,n){for(var i,r,o=0,a={shelf:-1,waste:1/0},s=0;s<this.shelves.length;s++){if(i=this.shelves[s],o+=i.h,n===i.h&&t<=i.free)return this.count(n),i.alloc(t,n);n>i.h||t>i.free||n<i.h&&t<=i.free&&(r=i.h-n,r<a.waste&&(a.waste=r,a.shelf=s))}if(a.shelf!==-1)return i=this.shelves[a.shelf],this.count(n),i.alloc(t,n);if(n<=this.h-o&&t<=this.w)return i=new e(o,this.w,n),this.shelves.push(i),this.count(n),i.alloc(t,n);if(this.autoResize){var u,l,c,h;return u=l=this.h,c=h=this.w,(c<=u||t>c)&&(h=2*Math.max(t,c)),(u<c||n>u)&&(l=2*Math.max(n,u)),this.resize(h,l),this.packOne(t,n)}return null},t.prototype.clear=function(){this.shelves=[],this.stats={}},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(t);return!0},e.prototype.alloc=function(t,e){if(t>this.free||e>this.h)return null;var n=this.x;return this.x+=t,this.free-=t,{x:n,y:this.y,w:t,h:e,width:t,height:e}},e.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t})},{}],203:[function(t,e,n){"use strict";function i(t){return new r(t)}function r(t){this.options=p(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function o(t,e,n,i){return{x:t,y:e,zoom:1/0,id:i,numPoints:n}}function a(t,e){var n=t.geometry.coordinates;return o(l(n[0]),c(n[1]),1,e)}function s(t){return{type:"Feature",properties:u(t),geometry:{type:"Point",coordinates:[h(t.x),f(t.y)]}}}function u(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return{cluster:!0,point_count:e,point_count_abbreviated:n}}function l(t){return t/360+.5}function c(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function h(t){return 360*(t-.5)}function f(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function p(t,e){for(var n in e)t[n]=e[n];return t}function d(t){return t.x}function g(t){return t.y}var m=t("kdbush");e.exports=i,r.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;var i=t.map(a);e&&console.timeEnd(n);for(var r=this.options.maxZoom;r>=this.options.minZoom;r--){var o=+Date.now();this.trees[r+1]=m(i,d,g,this.options.nodeSize,Float32Array),i=this._cluster(i,r),e&&console.log("z%d: %d clusters in %dms",r,i.length,+Date.now()-o)}return this.trees[this.options.minZoom]=m(i,d,g,this.options.nodeSize,Float32Array),e&&console.timeEnd("total time"),this},getClusters:function(t,e){for(var n=this.trees[this._limitZoom(e)],i=n.range(l(t[0]),c(t[3]),l(t[2]),c(t[1])),r=[],o=0;o<i.length;o++){var a=n.points[i[o]];r.push(a.id!==-1?this.points[a.id]:s(a))}return r},getTile:function(t,e,n){var i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),o=this.options.extent,a=this.options.radius,s=a/o,u=(n-s)/r,l=(n+1+s)/r,c={features:[]};return this._addTileFeatures(i.range((e-s)/r,u,(e+1+s)/r,l),i.points,e,n,r,c),0===e&&this._addTileFeatures(i.range(1-s/r,u,1,l),i.points,r,n,r,c),e===r-1&&this._addTileFeatures(i.range(0,u,s/r,l),i.points,-1,n,r,c),c.features.length?c:null},_addTileFeatures:function(t,e,n,i,r,o){for(var a=0;a<t.length;a++){var s=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*r-n)),Math.round(this.options.extent*(s.y*r-i))]],tags:s.id!==-1?this.points[s.id].properties:u(s)})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],i=this.options.radius/(this.options.extent*Math.pow(2,e)),r=0;r<t.length;r++){var a=t[r];if(!(a.zoom<=e)){a.zoom=e;for(var s=this.trees[e+1],u=s.within(a.x,a.y,i),l=!1,c=a.numPoints,h=a.x*c,f=a.y*c,p=0;p<u.length;p++){var d=s.points[u[p]];e<d.zoom&&(l=!0,d.zoom=e,h+=d.x*d.numPoints,f+=d.y*d.numPoints,c+=d.numPoints)}n.push(l?o(h/c,f/c,c,-1):a)}}return n}}},{kdbush:204}],204:[function(t,e,n){"use strict";function i(t,e,n,i,o){return new r(t,e,n,i,o)}function r(t,e,n,i,r){e=e||o,n=n||a,r=r||Array,this.nodeSize=i||64,this.points=t,this.ids=new r(t.length),this.coords=new r(2*t.length);for(var u=0;u<t.length;u++)this.ids[u]=u,this.coords[2*u]=e(t[u]),this.coords[2*u+1]=n(t[u]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function o(t){return t[0]}function a(t){return t[1]}var s=t("./sort"),u=t("./range"),l=t("./within");e.exports=i,r.prototype={range:function(t,e,n,i){return u(this.ids,this.coords,t,e,n,i,this.nodeSize)},within:function(t,e,n){return l(this.ids,this.coords,t,e,n,this.nodeSize)}}},{"./range":205,"./sort":206,"./within":207}],205:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var h=l.pop(),f=l.pop(),p=l.pop();if(f-p<=a)for(var d=p;d<=f;d++)s=e[2*d],u=e[2*d+1],s>=n&&s<=r&&u>=i&&u<=o&&c.push(t[d]);else{var g=Math.floor((p+f)/2);s=e[2*g],u=e[2*g+1],s>=n&&s<=r&&u>=i&&u<=o&&c.push(t[g]);var m=(h+1)%2;(0===h?n<=s:i<=u)&&(l.push(p),l.push(g-1),l.push(m)),(0===h?r>=s:o>=u)&&(l.push(g+1),l.push(f),l.push(m))}}return c}e.exports=i},{}],206:[function(t,e,n){"use strict";function i(t,e,n,o,a,s){if(!(a-o<=n)){var u=Math.floor((o+a)/2);r(t,e,u,o,a,s%2),i(t,e,n,o,u-1,s+1),i(t,e,n,u+1,a,s+1)}}function r(t,e,n,i,a,s){for(;a>i;){if(a-i>600){var u=a-i+1,l=n-i+1,c=Math.log(u),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(u-h)/u)*(l-u/2<0?-1:1),p=Math.max(i,Math.floor(n-l*h/u+f)),d=Math.min(a,Math.floor(n+(u-l)*h/u+f));r(t,e,n,p,d,s)}var g=e[2*n+s],m=i,y=a;for(o(t,e,i,n),e[2*a+s]>g&&o(t,e,i,a);m<y;){for(o(t,e,m,y),m++,y--;e[2*m+s]<g;)m++;for(;e[2*y+s]>g;)y--}e[2*i+s]===g?o(t,e,i,y):(y++,o(t,e,y,a)),y<=n&&(i=y+1),n<=y&&(a=y-1)}}function o(t,e,n,i){a(t,n,i),a(e,2*n,2*i),a(e,2*n+1,2*i+1)}function a(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}e.exports=i},{}],207:[function(t,e,n){"use strict";function i(t,e,n,i,o,a){for(var s=[0,t.length-1,0],u=[],l=o*o;s.length;){var c=s.pop(),h=s.pop(),f=s.pop();if(h-f<=a)for(var p=f;p<=h;p++)r(e[2*p],e[2*p+1],n,i)<=l&&u.push(t[p]);else{var d=Math.floor((f+h)/2),g=e[2*d],m=e[2*d+1];r(g,m,n,i)<=l&&u.push(t[d]);var y=(c+1)%2;(0===c?n-o<=g:i-o<=m)&&(s.push(f),s.push(d-1),s.push(y)),(0===c?n+o>=g:i+o>=m)&&(s.push(d+1),s.push(h),s.push(y))}}return u}function r(t,e,n,i){var r=t-n,o=e-i;return r*r+o*o}e.exports=i},{}],208:[function(t,e,n){"use strict";function i(t,e){if(!(this instanceof i))return new i(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||r,t)for(var n=Math.floor(this.length/2);n>=0;n--)this._down(n)}function r(t,e){return t<e?-1:t>e?1:0}function o(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}e.exports=i,i.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){var t=this.data[0];return this.data[0]=this.data[this.length-1],this.length--,this.data.pop(),this._down(0),t},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare;t>0;){var i=Math.floor((t-1)/2);if(!(n(e[t],e[i])<0))break;o(e,i,t),t=i}},_down:function(t){for(var e=this.data,n=this.compare,i=this.length;;){var r=2*t+1,a=r+1,s=t;if(r<i&&n(e[r],e[s])<0&&(s=r),a<i&&n(e[a],e[s])<0&&(s=a),s===t)return;o(e,s,t),t=s}}}},{}],209:[function(t,e,n){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":210,"./lib/vectortilefeature.js":211,"./lib/vectortilelayer.js":212}],210:[function(t,e,n){"use strict";function i(t,e){this.layers=t.readFields(r,{},e)}function r(t,e,n){if(3===t){var i=new o(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}var o=t("./vectortilelayer");e.exports=i},{"./vectortilelayer":212}],211:[function(t,e,n){"use strict";function i(t,e,n,i,o){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=o,t.readFields(r,this,e)}function r(t,e,n){1==t?e.id=n.readVarint():2==t?o(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function o(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}function a(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],o=0;o<e;o++){var a=s(t[o]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(n&&r.push(n),n=[t[o]]):n.push(t[o]))}return n&&r.push(n),r}function s(t){for(var e,n,i=0,r=0,o=t.length,a=o-1;r<o;a=r++)e=t[r],n=t[a],i+=(n.x-e.x)*(e.y+n.y);return i}var u=t("point-geometry");e.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,r=0,o=0,a=0,s=[];t.pos<n;){if(!r){var l=t.readVarint();i=7&l,r=l>>3}if(r--,1===i||2===i)o+=t.readSVarint(),a+=t.readSVarint(),1===i&&(e&&s.push(e),e=[]),e.push(new u(o,a));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&s.push(e),s},i.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,o=0,a=1/0,s=-(1/0),u=1/0,l=-(1/0);t.pos<e;){if(!i){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)r+=t.readSVarint(),o+=t.readSVarint(),r<a&&(a=r),r>s&&(s=r),o<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},i.prototype.toGeoJSON=function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],i=180-360*(n.y+c)/u;t[e]=[360*(n.x+l)/u-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}var o,s,u=this.extent*Math.pow(2,n),l=this.extent*t,c=this.extent*e,h=this.loadGeometry(),f=i.types[this.type];switch(this.type){case 1:var p=[];for(o=0;o<h.length;o++)p[o]=h[o][0];h=p,r(h);break;case 2:for(o=0;o<h.length;o++)r(h[o]);break;case 3:for(h=a(h),o=0;o<h.length;o++)for(s=0;s<h[o].length;s++)r(h[o][s])}1===h.length?h=h[0]:f="Multi"+f;var d={type:"Feature",geometry:{type:f,coordinates:h},properties:this.properties};return"id"in this&&(d.id=this.id),d}},{"point-geometry":200}],212:[function(t,e,n){"use strict";function i(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(r,this,e),this.length=this._features.length}function r(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(o(n))}function o(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}var a=t("./vectortilefeature.js");e.exports=i,i.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":211}],213:[function(t,e,n){function i(t){var e=[];for(var n in t.layers)e.push(o(t.layers[n]));var i=new c;return h.tile.write({layers:e},i),i.finish()}function r(t){var e={};for(var n in t)e[n]=new f(t[n].features),e[n].name=n;return i({layers:e})}function o(t){for(var e={name:t.name||"",version:t.version||1,extent:t.extent||4096,keys:[],values:[],features:[]},n={},i={},r=0;r<t.length;r++){var o=t.feature(r);o.geometry=u(o.loadGeometry());var a=[];for(var s in o.properties){var c=n[s];"undefined"==typeof c&&(e.keys.push(s),c=e.keys.length-1,n[s]=c);var h=l(o.properties[s]),f=i[h.key];"undefined"==typeof f&&(e.values.push(h),f=e.values.length-1,i[h.key]=f),a.push(c),a.push(f)}o.tags=a,e.features.push(o)}return e}function a(t,e){return(e<<3)+(7&t)}function s(t){return t<<1^t>>31}function u(t){for(var e=[],n=0,i=0,r=t.length,o=0;o<r;o++){var u=t[o];e.push(a(1,1));for(var l=0;l<u.length;l++){1===l&&e.push(a(2,u.length-1));var c=u[l].x-n,h=u[l].y-i;e.push(s(c),s(h)),n+=c,i+=h}}return e}function l(t){var e,n=typeof t;return"string"===n?e={string_value:t}:"boolean"===n?e={bool_value:t}:"number"===n?e=t%1!==0?{double_value:t}:t<0?{sint_value:t}:{uint_value:t}:(t=JSON.stringify(t),e={string_value:t}),e.key=n+":"+t,e}var c=t("pbf"),h=t("./vector-tile-pb"),f=t("./lib/geojson_wrapper");e.exports=i,e.exports.fromVectorTileJs=i,e.exports.fromGeojsonVt=r,e.exports.GeoJSONWrapper=f},{"./lib/geojson_wrapper":214,"./vector-tile-pb":215,pbf:198}],214:[function(t,e,n){"use strict";function i(t){this.features=t,this.length=t.length}function r(t){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=4096}var o=t("point-geometry"),a=t("vector-tile").VectorTileFeature;e.exports=i,i.prototype.feature=function(t){return new r(this.features[t])},r.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],i=[],r=0;r<n.length;r++)i.push(new o(n[r][0],n[r][1]));this.geometry.push(i)}return this.geometry},r.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-(1/0),i=1/0,r=-(1/0),o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),i=Math.min(i,u.y),r=Math.max(r,u.y)}return[e,i,n,r]},r.prototype.toGeoJSON=a.prototype.toGeoJSON},{"point-geometry":200,"vector-tile":209}],215:[function(t,e,n){"use strict";function i(t,e){return t.readFields(r,{layers:[]},e)}function r(t,e,n){3===t&&e.layers.push(f(n,n.readVarint()+n.pos))}function o(t,e){var n;if(void 0!==t.layers)for(n=0;n<t.layers.length;n++)e.writeMessage(3,d,t.layers[n])}function a(t,e){return t.readFields(s,{},e)}function s(t,e,n){1===t?e.string_value=n.readString():2===t?e.float_value=n.readFloat():3===t?e.double_value=n.readDouble():4===t?e.int_value=n.readVarint():5===t?e.uint_value=n.readVarint():6===t?e.sint_value=n.readSVarint():7===t&&(e.bool_value=n.readBoolean())}function u(t,e){void 0!==t.string_value&&e.writeStringField(1,t.string_value),void 0!==t.float_value&&e.writeFloatField(2,t.float_value),void 0!==t.double_value&&e.writeDoubleField(3,t.double_value),void 0!==t.int_value&&e.writeVarintField(4,t.int_value),void 0!==t.uint_value&&e.writeVarintField(5,t.uint_value),void 0!==t.sint_value&&e.writeSVarintField(6,t.sint_value),void 0!==t.bool_value&&e.writeBooleanField(7,t.bool_value)}function l(t,e){var n=t.readFields(c,{},e);return void 0===n.type&&(n.type="Unknown"),n}function c(t,e,n){1===t?e.id=n.readVarint():2===t?e.tags=n.readPackedVarint():3===t?e.type=n.readVarint():4===t&&(e.geometry=n.readPackedVarint())}function h(t,e){void 0!==t.id&&e.writeVarintField(1,t.id),void 0!==t.tags&&e.writePackedVarint(2,t.tags),void 0!==t.type&&e.writeVarintField(3,t.type),void 0!==t.geometry&&e.writePackedVarint(4,t.geometry)}function f(t,e){return t.readFields(p,{features:[],keys:[],values:[]},e)}function p(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():2===t?e.features.push(l(n,n.readVarint()+n.pos)):3===t?e.keys.push(n.readString()):4===t?e.values.push(a(n,n.readVarint()+n.pos)):5===t&&(e.extent=n.readVarint())}function d(t,e){void 0!==t.version&&e.writeVarintField(15,t.version),void 0!==t.name&&e.writeStringField(1,t.name);var n;if(void 0!==t.features)for(n=0;n<t.features.length;n++)e.writeMessage(2,h,t.features[n]);if(void 0!==t.keys)for(n=0;n<t.keys.length;n++)e.writeStringField(3,t.keys[n]);if(void 0!==t.values)for(n=0;n<t.values.length;n++)e.writeMessage(4,u,t.values[n]);void 0!==t.extent&&e.writeVarintField(5,t.extent)}var g=n.tile={read:i,write:o};g.GeomType={Unknown:0,Point:1,LineString:2,Polygon:3},g.value={read:a,write:u},g.feature={read:l,write:h},g.layer={read:f,write:d}},{}],216:[function(t,e,n){var i=arguments[3],r=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t,e){function n(t){m[t]=!0;for(var e in r[t][1]){var i=r[t][1][e];m[i]||n(i)}}for(var s,u=Object.keys(o),l=0,c=u.length;l<c;l++){var h=u[l],f=o[h].exports;if(f===t||f&&f.default===t){s=h;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var p={},l=0,c=u.length;l<c;l++){var h=u[l];p[h]=h}r[s]=[Function(["require","module","exports"],"("+t+")(self)"),p]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[s]=s,r[d]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),g];var m={};n(d);var y="("+i+")({"+Object.keys(m).map(function(t){return a(t)+":["+r[t][0]+","+a(r[t][1])+"]"}).join(",")+"},{},["+a(d)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,b=new Blob([y],{type:"text/javascript"});if(e&&e.bare)return b;var _=v.createObjectURL(b),x=new Worker(_);return x.objectURL=_,x}},{}],217:[function(e,n,i){!function(e,r){"object"==typeof i&&"undefined"!=typeof n?r(i):"function"==typeof t&&t.amd?t(["exports"],r):r(e.WhooTS=e.WhooTS||{})}(this,function(t){function e(t,e,i,r,o,a){a=a||{};var s=t+"?"+["bbox="+n(i,r,o),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+e].join("&");return s}function n(t,e,n){e=Math.pow(2,n)-e-1;var r=i(256*t,256*e,n),o=i(256*(t+1),256*(e+1),n);return r[0]+","+r[1]+","+o[0]+","+o[1]}function i(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n),r=t*i-2*Math.PI*6378137/2,o=e*i-2*Math.PI*6378137/2;return[r,o]}t.getURL=e,t.getTileBBox=n,t.getMercCoords=i,Object.defineProperty(t,"__esModule",{value:!0})})},{}],218:[function(t,e,n){e.exports={version:"0.32.1"}},{}]},{},[24])(24)})},function(t,e,n){"use strict";var i=(n(686),n(201)("mapboxGLHelperMixin")),r={};"undefined"!=typeof window&&(r=n(684));var o={getBounds:function(){if(this.map)return this.map.getBounds().toArray()},getPosition:function(){if(this.map){var t=this.map.getCenter(),e=this.map.getZoom();return{zoom:e,lng:t.lng,lat:t.lat}}},updatePosition:function(){i("("+this.state.id+") UPDATE POSITION");var t=this.map;t.setView(this.state.map.position.center,this.state.map.position.zoom,{animate:!1})},flyTo:function(t,e){this.map.flyTo({center:t,zoom:e})},getBoundsObject:function(t){var e=new r.LngLat(t[0],t[1]),n=new r.LngLat(t[2],t[3]);return new r.LngLatBounds(e,n)},fitBounds:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=new r.LngLat(t[0],t[1]),a=new r.LngLat(t[2],t[3]),s=new r.LngLatBounds(o,a);this.map.fitBounds(s,{padding:n,curve:1,speed:.6,maxZoom:e,animate:i})},changeLocale:function(t,e){}};t.exports=o},function(t,e){function n(t,e){for(var n=-1,i=t?t.length:0,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function i(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function r(t,e,n){if(e!==e)return i(t,o,n);for(var r=n-1,a=t.length;++r<a;)if(t[r]===e)return r;return-1}function o(t){return t!==t}function a(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function s(t,e){return n(e,function(e){return t[e]})}function u(t,e){return function(n){return t(e(n))}}function l(t,e){var n=Y(t)||d(t)?a(t.length,String):[],i=n.length,r=!!i;for(var o in t)!e&&!K.call(t,o)||r&&("length"==o||h(o,i))||n.push(o);return n}function c(t){if(!f(t))return X(t);var e=[];for(var n in Object(t))K.call(t,n)&&"constructor"!=n&&e.push(n);return e}function h(t,e){return e=null==e?N:e,!!e&&("number"==typeof t||G.test(t))&&t>-1&&t%1==0&&t<e}function f(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||V;return t===n}function p(t,e,n,i){t=g(t)?t:C(t),n=n&&!i?S(n):0;var o=t.length;return n<0&&(n=W(o+n,0)),x(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&r(t,e,n)>-1}function d(t){return m(t)&&K.call(t,"callee")&&(!q.call(t,"callee")||H.call(t)==A)}function g(t){return null!=t&&v(t.length)&&!y(t)}function m(t){return _(t)&&g(t)}function y(t){var e=b(t)?H.call(t):"";return e==k||e==R}function v(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=N}function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _(t){return!!t&&"object"==typeof t}function x(t){return"string"==typeof t||!Y(t)&&_(t)&&H.call(t)==O}function w(t){return"symbol"==typeof t||_(t)&&H.call(t)==D}function E(t){if(!t)return 0===t?t:0;if(t=M(t),t===I||t===-I){var e=t<0?-1:1;return e*P}return t===t?t:0}function S(t){var e=E(t),n=e%1;return e===e?n?e-n:e:0;
}function M(t){if("number"==typeof t)return t;if(w(t))return L;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(F,"");var n=j.test(t);return n||B.test(t)?U(t.slice(2),n?2:8):z.test(t)?L:+t}function T(t){return g(t)?l(t):c(t)}function C(t){return t?s(t,T(t)):[]}var I=1/0,N=9007199254740991,P=1.7976931348623157e308,L=NaN,A="[object Arguments]",k="[object Function]",R="[object GeneratorFunction]",O="[object String]",D="[object Symbol]",F=/^\s+|\s+$/g,z=/^[-+]0x[0-9a-f]+$/i,j=/^0b[01]+$/i,B=/^0o[0-7]+$/i,G=/^(?:0|[1-9]\d*)$/,U=parseInt,V=Object.prototype,K=V.hasOwnProperty,H=V.toString,q=V.propertyIsEnumerable,X=u(Object.keys,Object),W=Math.max,Y=Array.isArray;t.exports=p},function(t,e,n){"use strict";var i=n(168),r=n(654),o=n(201)("MapInteractionMixin"),a=n(648),s={setSelectionFilter:function(t){var e=this;this.state.glStyle&&this.state.glStyle.layers.forEach(function(n){var i=["in","mhid"];t.forEach(function(t){i.push(t.properties.mhid)}),e.map.getLayer(n.id)&&(n.id.startsWith("omh-hover-point")?e.map.setFilter(n.id,["all",["in","$type","Point"],i]):n.id.startsWith("omh-hover-line")?e.map.setFilter(n.id,["all",["in","$type","LineString"],i]):n.id.startsWith("omh-hover-polygon")&&e.map.setFilter(n.id,["all",["in","$type","Polygon"],i]))})},clearSelectionFilter:function(){var t=this;this.state.glStyle&&this.state.glStyle.layers.forEach(function(e){e.id.startsWith("omh-hover")&&t.map.getLayer(e.id)&&t.map.setFilter(e.id,["==","mhid",""])})},handleUnselectFeature:function(){this.setState({selected:!1}),this.clearSelection()},clearSelection:function(){this.map.hasClass("selected")&&this.map.removeClass("selected"),this.clearSelectionFilter(),this.setState({selectedFeatures:null})},getInteractiveLayers:function(t){var e=[];return t&&t.layers.forEach(function(t){t.metadata&&t.metadata["maphubs:interactive"]&&(t.id.startsWith("omh")||t.id.startsWith("osm"))&&e.push(t.id)}),e},clickHandler:function(t){var e=this.map,n=this;if(!this.state.enableMeasurementTools)if(!n.state.selected&&n.state.selectedFeatures&&n.state.selectedFeatures.length>0)n.setState({selected:!0});else{i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor","crosshair");var r=e.queryRenderedFeatures([[t.point.x-n.props.interactionBufferSize/2,t.point.y-n.props.interactionBufferSize/2],[t.point.x+n.props.interactionBufferSize/2,t.point.y+n.props.interactionBufferSize/2]],{layers:n.state.interactiveLayers});if(r.length){if(n.state.selected&&n.clearSelection(),n.state.editing){var o=r[0];return void(o.properties.layer_id&&this.state.editingLayer.layer_id===o.properties.layer_id&&n.editFeature(o))}n.setSelectionFilter([r[0]]),n.setState({selectedFeatures:[r[0]],selected:!0}),e.addClass("selected")}else null!=n.state.selectedFeatures&&(n.clearSelection(),n.setState({selected:!1}),i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor",""))}},moveendHandler:function(t){o("mouse up fired"),this.refs.insetMap&&this.refs.insetMap.updateInsetGeomFromBounds(this.map.getBounds(),this.map.getZoom()),a.updateMapPosition(this.getPosition(),this.getBounds())},mousemoveHandler:function(t){var e=this.map,n=this;if(!this.state.enableMeasurementTools&&!n.state.showBaseMaps){var a=r(function(){n.state.mapLoaded&&n.state.restoreBounds&&(o("("+n.state.id+") clearing restoreBounds"),n.setState({restoreBounds:null}));var r=e.queryRenderedFeatures([[t.point.x-n.props.interactionBufferSize/2,t.point.y-n.props.interactionBufferSize/2],[t.point.x+n.props.interactionBufferSize/2,t.point.y+n.props.interactionBufferSize/2]],{layers:n.state.interactiveLayers});r&&r.length?n.state.selected?i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor","crosshair"):n.props.hoverInteraction?(i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor","crosshair"),n.setSelectionFilter(r),n.setState({selectedFeatures:r}),e.addClass("selected")):i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor","pointer"):n.state.selected||null==n.state.selectedFeatures?i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor",""):(n.clearSelection(),i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor",""))},300).bind(this);a()}}};t.exports=s},function(t,e,n){"use strict";var i=n(201)("Map/MeasureArea"),r=n(689),o=n(692),a=n(168),s={};"undefined"!=typeof window&&(s=n(693));var u={toggleMeasurementTools:function(t){t&&!this.state.enableMeasurementTools?this.startMeasurementTool():this.state.enableMeasurementTools&&!t&&this.stopMeasurementTool()},startMeasurementTool:function(){var t=this,e=new s({displayControlsDefault:!1,controls:{polygon:!0,line_string:!0,trash:!0}});this.draw=e,a(".mapboxgl-ctrl-top-right").addClass("mapboxgl-ctrl-maphubs-measure-tool"),this.map.addControl(e,"top-right"),this.map.on("draw.create",function(e){i("draw create"),t.updateMeasurement(e)}),this.map.on("draw.update",function(e){i("draw update"),t.updateMeasurement(e)}),this.map.on("draw.delete",function(){i("draw delete"),t.setState({measurementMessage:t.__("Use the drawing tools above")})}),this.setState({enableMeasurementTools:!0,measurementMessage:this.__("Use the drawing tools above")})},stopMeasurementTool:function(){a(".mapboxgl-ctrl-top-right").removeClass("mapboxgl-ctrl-maphubs-measure-tool"),this.map.removeControl(this.draw),this.setState({enableMeasurementTools:!1,measurementMessage:""})},updateMeasurement:function(){var t=this.draw.getAll();if(t.features.length>0){var e={type:"FeatureCollection",features:[]},n={type:"FeatureCollection",features:[]};if(t.features.forEach(function(t){"Polygon"===t.geometry.type?n.features.push(t):"LineString"===t.geometry.type&&e.features.push(t)}),n.features.length>0){var i=r(n),a=Math.round(100*i)/100,s=1e-6*i,u=a/1e4,l=this.__("Total area: ");l=a<1e3?l+a.toLocaleString()+"m2 ":l+s.toLocaleString()+"km2 ",l=l+u.toLocaleString()+"ha",this.setState({measurementMessage:l})}else if(e.features.length>0){var c=0;e.features.forEach(function(t){c+=o(t)});var h=.621371*c,f="Total distance: "+c.toLocaleString()+"km "+h.toLocaleString()+"mi";this.setState({measurementMessage:f})}}}};t.exports=u},function(t,e,n){function i(t){if("FeatureCollection"===t.type){for(var e=0,n=0;e<t.features.length;e++)t.features[e].geometry&&(n+=r(t.features[e].geometry));return n}return r("Feature"===t.type?t.geometry:t)}var r=n(690).geometry;t.exports=i},function(t,e,n){function i(t){var e,n=0;switch(t.type){case"Polygon":return r(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=r(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=i(t.geometries[e]);return n}}function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(o(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(o(t[n]))}return e}function o(t){var e,n,i,r,o,u,l,c=0,h=t.length;if(h>2){for(l=0;l<h;l++)l===h-2?(r=h-2,o=h-1,u=0):l===h-1?(r=h-1,o=0,u=1):(r=l,o=l+1,u=l+2),e=t[r],n=t[o],i=t[u],c+=(a(i[0])-a(e[0]))*Math.sin(a(n[1]));c=c*s.RADIUS*s.RADIUS/2}return c}function a(t){return t*Math.PI/180}var s=n(691);t.exports.geometry=i,t.exports.ring=o},function(t,e){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},function(t,e,n){function i(t,e){for(var n,i=0,a=o(t[0]),s=o(t[0]),u=1;u<t.length;u++)s.geometry.coordinates=t[u],i+=r(a,s,e),n=a,a=s,s=n;return i}var r=n(655),o=n(651).point;t.exports=function t(e,n){if("FeatureCollection"===e.type)return e.features.reduce(function(e,i){return e+t(i,n)},0);var r,o,a="Feature"===e.type?e.geometry:e;if("LineString"===a.type)return i(a.coordinates,n);if("Polygon"===a.type||"MultiLineString"===a.type){for(r=0,o=0;o<a.coordinates.length;o++)r+=i(a.coordinates[o],n);return r}if("MultiPolygon"===a.type){for(r=0,o=0;o<a.coordinates.length;o++)for(var s=0;s<a.coordinates[o].length;s++)r+=i(a.coordinates[o][s],n);return r}throw new Error("input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry (or a FeatureCollection containing only those types)")}},function(t,e){!function(n){if("object"==typeof e&&"undefined"!=typeof t)t.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.MapboxDraw=n()}}(function(){return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";var i=t("./src/setup"),r=t("./src/options"),o=t("./src/api"),a=t("./src/constants"),s=function(t,e){t=r(t);var n={options:t};e=o(n,e),n.api=e;var s=i(n);return e.onAdd=s.onAdd,e.onRemove=s.onRemove,e.types=a.types,e.options=t,e};e.exports=function(t){s(t,this)}},{"./src/api":23,"./src/constants":24,"./src/options":58,"./src/setup":60}],2:[function(t,e,n){},{}],3:[function(t,e,n){(function(t){function e(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};n.resolve=function(){for(var n="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,r="/"===a.charAt(0))}return n=e(i(n.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+n||"."},n.normalize=function(t){var r=n.isAbsolute(t),o="/"===a(t,-1);return t=e(i(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var r=i(t.split("/")),o=i(e.split("/")),a=Math.min(r.length,o.length),s=a,u=0;u<a;u++)if(r[u]!==o[u]){s=u;break}for(var l=[],u=s;u<r.length;u++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:4}],4:[function(t,e,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function a(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){m&&d&&(m=!1,d.length?g=d.concat(g):y=-1,g.length&&u())}function u(){if(!m){var t=o(s);m=!0;for(var e=g.length;e;){for(d=g,g=[];++y<e;)d&&d[y].run();y=-1,e=g.length}d=null,m=!1,a(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var h,f,p=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(t){h=i}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var d,g=[],m=!1,y=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];g.push(new l(t,e)),1!==g.length||m||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],5:[function(t,e,n){function r(t){var e,n=0;switch(t.type){case"Polygon":return o(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=o(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=r(t.geometries[e]);return n}}function o(t){var e=0;if(t&&t.length>0){e+=Math.abs(a(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(a(t[n]))}return e}function a(t){var e,n,r,o,a,l,c=0,h=t.length;if(h>2){for(i=0;i<h;i++)i===h-2?(o=h-2,a=h-1,l=0):i===h-1?(o=h-1,a=0,l=1):(o=i,a=i+1,l=i+2),e=t[o],n=t[a],r=t[l],c+=(s(r[0])-s(e[0]))*Math.sin(s(n[1]));c=c*u.RADIUS*u.RADIUS/2}return c}function s(t){return t*Math.PI/180}var u=t("wgs84");e.exports.geometry=r,e.exports.ring=a},{wgs84:6}],6:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],7:[function(t,e,n){function i(t){for(var e=a(),n=r(t),i=0;i<n.length;i++)e.include(n[i]);return e}var r=t("geojson-coords"),o=t("traverse"),a=t("extent");e.exports=function(t){return i(t).bbox()},e.exports.polygon=function(t){return i(t).polygon()},e.exports.bboxify=function(t){return o(t).map(function(t){t&&"string"==typeof t.type&&(t.bbox=i(t).bbox(),this.update(t))})}},{extent:8,"geojson-coords":10,traverse:13}],8:[function(t,e,n){function i(){return this instanceof i?(this._bbox=[1/0,1/0,-(1/0),-(1/0)],void(this._valid=!1)):new i}e.exports=i,i.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},i.prototype.union=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this},i.prototype.bbox=function(){return this._valid?this._bbox:null},i.prototype.contains=function(t){return this._valid?this._bbox[0]<=t[0]&&this._bbox[1]<=t[1]&&this._bbox[2]>=t[0]&&this._bbox[3]>=t[1]:null},i.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},{}],9:[function(t,e,n){e.exports=function(t,e){function n(t){return Array.isArray(t)&&t.length&&"number"==typeof t[0]?[t]:t.reduce(function(t,e){return Array.isArray(e)&&Array.isArray(e[0])?t.concat(n(e)):(t.push(e),t)},[])}return n(t)}},{}],10:[function(t,e,n){var i=t("geojson-normalize"),r=t("geojson-flatten"),o=t("./flatten");e.exports=function(t){if(!t)return[];var e=r(i(t)),n=[];return e.features.forEach(function(t){t.geometry&&(n=n.concat(o(t.geometry.coordinates)))}),n}},{"./flatten":9,"geojson-flatten":11,"geojson-normalize":12}],11:[function(t,e,n){function i(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce(function(t,e){return t.concat(i(e))},[]),t;case"Feature":return i(t.geometry).map(function(e){return{type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e}});case"MultiPoint":return t.coordinates.map(function(t){return{type:"Point",coordinates:t}});case"MultiPolygon":return t.coordinates.map(function(t){return{type:"Polygon",coordinates:t}});case"MultiLineString":return t.coordinates.map(function(t){return{type:"LineString",coordinates:t}});case"GeometryCollection":return t.geometries;case"Point":case"Polygon":case"LineString":return[t];default:return t}}e.exports=i},{}],12:[function(t,e,n){function i(t){if(!t||!t.type)return null;var e=r[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null}e.exports=i;var r={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],13:[function(t,e,n){function i(t){this.value=t}function r(t,e,n){var i=[],r=[],a=!0;return function t(s){function u(){if("object"==typeof f.node&&null!==f.node){f.keys&&f.node_===f.node||(f.keys=d(f.node)),f.isLeaf=0==f.keys.length;for(var t=0;t<r.length;t++)if(r[t].node_===s){f.circular=r[t];break}}else f.isLeaf=!0,f.keys=null;f.notLeaf=!f.isLeaf,f.notRoot=!f.isRoot}var l=n?o(s):s,c={},h=!0,f={node:l,node_:s,path:[].concat(i),parent:r[r.length-1],parents:r,key:i.slice(-1)[0],isRoot:0===i.length,level:i.length,circular:null,update:function(t,e){f.isRoot||(f.parent.node[f.key]=t),f.node=t,e&&(h=!1)},delete:function(t){delete f.parent.node[f.key],t&&(h=!1)},remove:function(t){g(f.parent.node)?f.parent.node.splice(f.key,1):delete f.parent.node[f.key],t&&(h=!1)},keys:null,before:function(t){c.before=t},after:function(t){c.after=t},pre:function(t){c.pre=t},post:function(t){c.post=t},stop:function(){a=!1},block:function(){h=!1}};if(!a)return f;u();var p=e.call(f,f.node);return void 0!==p&&f.update&&f.update(p),c.before&&c.before.call(f,f.node),h?("object"!=typeof f.node||null===f.node||f.circular||(r.push(f),u(),m(f.keys,function(e,r){i.push(e),c.pre&&c.pre.call(f,f.node[e],e);var o=t(f.node[e]);n&&y.call(f.node,e)&&(f.node[e]=o.node),o.isLast=r==f.keys.length-1,o.isFirst=0==r,c.post&&c.post.call(f,o),i.pop()}),r.pop()),c.after&&c.after.call(f,f.node),f):f}(t).node}function o(t){if("object"==typeof t&&null!==t){var e;if(g(t))e=[];else if(s(t))e=new Date(t.getTime?t.getTime():t);else if(u(t))e=new RegExp(t);else if(l(t))e={message:t.message};else if(c(t))e=new Boolean(t);else if(h(t))e=new Number(t);else if(f(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var n=t.constructor&&t.constructor.prototype||t.__proto__||{},i=function(){};i.prototype=n,e=new i}return m(d(t),function(n){e[n]=t[n]}),e}return t}function a(t){return Object.prototype.toString.call(t)}function s(t){return"[object Date]"===a(t)}function u(t){return"[object RegExp]"===a(t)}function l(t){return"[object Error]"===a(t)}function c(t){return"[object Boolean]"===a(t)}function h(t){return"[object Number]"===a(t)}function f(t){return"[object String]"===a(t)}var p=e.exports=function(t){return new i(t)};i.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var i=t[n];if(!e||!y.call(e,i)){e=void 0;break}e=e[i]}return e},i.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var i=t[n];if(!e||!y.call(e,i))return!1;e=e[i]}return!0},i.prototype.set=function(t,e){for(var n=this.value,i=0;i<t.length-1;i++){var r=t[i];y.call(n,r)||(n[r]={}),n=n[r]}return n[t[i]]=e,e},i.prototype.map=function(t){return r(this.value,t,!0)},i.prototype.forEach=function(t){return this.value=r(this.value,t,!1),this.value},i.prototype.reduce=function(t,e){var n=1===arguments.length,i=n?this.value:e;return this.forEach(function(e){this.isRoot&&n||(i=t.call(this,i,e))}),i},i.prototype.paths=function(){var t=[];return this.forEach(function(e){t.push(this.path)}),t},i.prototype.nodes=function(){var t=[];return this.forEach(function(e){t.push(this.node)}),t},i.prototype.clone=function(){var t=[],e=[];return function n(i){for(var r=0;r<t.length;r++)if(t[r]===i)return e[r];if("object"==typeof i&&null!==i){var a=o(i);return t.push(i),e.push(a),m(d(i),function(t){a[t]=n(i[t])}),t.pop(),e.pop(),a}return i}(this.value)};var d=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},m=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};m(d(i.prototype),function(t){p[t]=function(e){var n=[].slice.call(arguments,1),r=new i(e);return r[t].apply(r,n)}});var y=Object.hasOwnProperty||function(t,e){return e in t}},{}],14:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],15:[function(t,e,n){function i(t,e){var n,i=[];if("object"==typeof t)n=t;else{if("string"!=typeof t)return[{message:"Expected string or object as input",line:0}];try{n=r.parse(t)}catch(t){var a=t.message.match(/line (\d+)/),s=parseInt(a[1],10);return[{line:s-1,message:t.message,error:t}]}}return i=i.concat(o.hint(n,e))}var r=t("jsonlint-lines"),o=t("./object");e.exports.hint=i},{"./object":16,"jsonlint-lines":18}],16:[function(t,e,n){function i(t,e){function n(t){if(e&&e.noDuplicateMembers===!1||!t.__duplicateProperties__||_.push({message:"An object contained duplicate members, making parsing ambigous: "+t.__duplicateProperties__.join(", "),line:t.__line__}),!o(t,"type","string"))if(S[t.type])t&&S[t.type](t);else{var n=M[t.type.toLowerCase()];void 0!==n?_.push({message:"Expected "+n+" but got "+t.type+" (case sensitive)",line:t.__line__}):_.push({message:"The type "+t.type+" is unknown",line:t.__line__})}}function i(t,e){return t.every(function(t){return null!==t&&typeof t===e})}function o(t,e,n){if("undefined"==typeof t[e])return _.push({message:'"'+e+'" member required',line:t.__line__});if("array"===n){if(!Array.isArray(t[e]))return _.push({message:'"'+e+'" member should be an array, but is an '+typeof t[e]+" instead",line:t.__line__})}else{if("object"===n&&t[e]&&"Object"!==t[e].constructor.name)return _.push({message:'"'+e+'" member should be '+n+", but is an "+t[e].constructor.name+" instead",line:t.__line__});if(n&&typeof t[e]!==n)return _.push({message:'"'+e+'" member should be '+n+", but is an "+typeof t[e]+" instead",line:t.__line__})}}function a(t){if(l(t),c(t),void 0!==t.properties&&_.push({message:'FeatureCollection object cannot contain a "properties" member',line:t.__line__}),void 0!==t.coordinates&&_.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:t.__line__}),!o(t,"features","array")){if(!i(t.features,"object"))return _.push({message:"Every feature must be an object",line:t.__line__});t.features.forEach(b)}}function s(t,n){if(!Array.isArray(t))return _.push({message:"position should be an array, is a "+typeof t+" instead",line:t.__line__||n});if(t.length<2)return _.push({message:"position must have 2 or more elements",line:t.__line__||n});if(t.length>3)return _.push({message:"position should not have more than 3 elements",line:t.__line__||n});if(!i(t,"number"))return _.push({message:"each element in a position must be a number",line:t.__line__||n});if(e&&e.precisionWarning){if(x===w)return x+=1,_.push({message:"truncated warnings: we've encountered coordinate precision warning "+w+" times, no more warnings will be reported",level:"message",line:t.__line__||n});x<w&&t.forEach(function(e){var i=0,r=String(e).split(".")[1];if(void 0!==r&&(i=r.length),i>E)return x+=1,_.push({message:"precision of coordinates should be reduced",level:"message",line:t.__line__||n})})}}function u(t,e,n,i){if(void 0===i&&void 0!==t.__line__&&(i=t.__line__),0===n)return s(t,i);if(1===n&&e)if("LinearRing"===e){if(!Array.isArray(t[t.length-1]))return _.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:i}),!0;if(t.length<4&&_.push({message:"a LinearRing of coordinates needs to have four or more positions",line:i}),t.length&&(t[t.length-1].length!==t[0].length||!t[t.length-1].every(function(e,n){return t[0][n]===e})))return _.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:i}),!0}else if("Line"===e&&t.length<2)return _.push({message:"a line needs to have two or more coordinates to be valid",line:i});if(Array.isArray(t)){var r=t.map(function(t){return u(t,e,n-1,t.__line__||i)});return r.some(function(t){return t})}_.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:i})}function l(t){if(t.crs){var e="urn:ogc:def:crs:OGC:1.3:CRS84";"object"==typeof t.crs&&t.crs.properties&&t.crs.properties.name===e?_.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:t.__line__}):_.push({message:"old-style crs member is not recommended",line:t.__line__})}}function c(t){if(t.bbox)return Array.isArray(t.bbox)?(i(t.bbox,"number")||_.push({message:"each element in a bbox member must be a number",line:t.bbox.__line__}),4!==t.bbox.length&&6!==t.bbox.length&&_.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:t.bbox.__line__}),_.length):void _.push({message:"bbox member must be an array of numbers, but is a "+typeof t.bbox,line:t.__line__})}function h(t){void 0!==t.properties&&_.push({message:'geometry object cannot contain a "properties" member',line:t.__line__}),void 0!==t.geometry&&_.push({message:'geometry object cannot contain a "geometry" member',line:t.__line__}),void 0!==t.features&&_.push({message:'geometry object cannot contain a "features" member',line:t.__line__})}function f(t){l(t),c(t),h(t),o(t,"coordinates","array")||s(t.coordinates)}function p(t){l(t),c(t),o(t,"coordinates","array")||u(t.coordinates,"LinearRing",2)||r(t,_)}function d(t){l(t),c(t),o(t,"coordinates","array")||u(t.coordinates,"LinearRing",3)||r(t,_)}function g(t){l(t),c(t),o(t,"coordinates","array")||u(t.coordinates,"Line",1)}function m(t){l(t),c(t),o(t,"coordinates","array")||u(t.coordinates,"Line",2)}function y(t){l(t),c(t),o(t,"coordinates","array")||u(t.coordinates,"",1)}function v(t){l(t),c(t),o(t,"geometries","array")||(i(t.geometries,"object")||_.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:t.__line__}),1===t.geometries.length&&_.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:t.geometries.__line__}),t.geometries.forEach(function(e){e&&("GeometryCollection"===e.type&&_.push({message:"GeometryCollection should avoid nested geometry collections",line:t.geometries.__line__}),n(e))}))}function b(t){l(t),c(t),void 0!==t.id&&"string"!=typeof t.id&&"number"!=typeof t.id&&_.push({message:'Feature "id" member must have a string or number value',line:t.__line__}),void 0!==t.features&&_.push({message:'Feature object cannot contain a "features" member',line:t.__line__}),void 0!==t.coordinates&&_.push({message:'Feature object cannot contain a "coordinates" member',line:t.__line__}),"Feature"!==t.type&&_.push({message:"GeoJSON features must have a type=feature member",line:t.__line__}),o(t,"properties","object"),o(t,"geometry","object")||t.geometry&&n(t.geometry)}var _=[],x=0,w=10,E=6,S={Point:f,Feature:b,MultiPoint:y,LineString:g,MultiLineString:m,FeatureCollection:a,GeometryCollection:v,Polygon:p,MultiPolygon:d},M=Object.keys(S).reduce(function(t,e){return t[e.toLowerCase()]=e,t},{});return"object"!=typeof t||null===t||void 0===t?(_.push({message:"The root of a GeoJSON object must be an object.",line:0}),_):(n(t),_.forEach(function(t){({}).hasOwnProperty.call(t,"line")&&void 0===t.line&&delete t.line}),_)}var r=t("./rhr");e.exports.hint=i},{"./rhr":17}],17:[function(t,e,n){function i(t){return t*Math.PI/180}function r(t){var e=0;if(t.length>2)for(var n,r,o=0;o<t.length-1;o++)n=t[o],r=t[o+1],e+=i(r[0]-n[0])*(2+Math.sin(i(n[1]))+Math.sin(i(r[1])));return e>=0}function o(t){if(t&&t.length>0){if(r(t[0]))return!1;var e=t.slice(1,t.length);if(!e.every(r))return!1}return!0}function a(t){return"Polygon"===t.type?o(t.coordinates):"MultiPolygon"===t.type?t.coordinates.every(o):void 0}e.exports=function(t,e){a(t)||e.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:t.__line__})}},{}],18:[function(t,e,n){(function(i){var r=function(){function t(){this.yy={}}var e=function(t,e,n,i){for(n=n||{},i=t.length;i--;n[t[i]]=e);return n},n=[1,12],i=[1,13],r=[1,9],o=[1,10],a=[1,11],s=[1,14],u=[1,15],l=[14,18,22,24],c=[18,22],h=[22,24],f={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,i,r,o,a){var s=o.length-1;switch(r){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=o[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],void 0!==o[s-2][o[s][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(o[s][0])),o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:n,5:6,6:i,7:3,8:r,9:4,10:o,11:a,12:1,13:2,15:7,16:8,17:s,23:u},{1:[3]},{14:[1,16]},e(l,[2,7]),e(l,[2,8]),e(l,[2,9]),e(l,[2,10]),e(l,[2,11]),e(l,[2,12]),e(l,[2,3]),e(l,[2,4]),e(l,[2,5]),e([14,18,21,22,24],[2,1]),e(l,[2,2]),{3:20,4:n,18:[1,17],19:18,20:19},{3:5,4:n,5:6,6:i,7:3,8:r,9:4,10:o,11:a,13:23,15:7,16:8,17:s,23:u,24:[1,21],25:22},{1:[2,6]},e(l,[2,13]),{18:[1,24],22:[1,25]},e(c,[2,16]),{21:[1,26]},e(l,[2,18]),{22:[1,28],24:[1,27]},e(h,[2,20]),e(l,[2,14]),{3:20,4:n,20:29},{3:5,4:n,5:6,6:i,7:3,8:r,9:4,10:o,11:a,13:30,15:7,16:8,17:s,23:u},e(l,[2,19]),{3:5,4:n,5:6,6:i,7:3,8:r,9:4,10:o,11:a,13:31,15:7,16:8,17:s,23:u},e(c,[2,17]),e(c,[2,15]),e(h,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){function n(t,e){this.message=t,this.hash=e}if(!e.recoverable)throw n.prototype=Error,new n(t,e);this.trace(t)},parse:function(t){var e=this,n=[0],i=[null],r=[],o=this.table,a="",s=0,u=0,l=0,c=2,h=1,f=r.slice.call(arguments,1),p=Object.create(this.lexer),d={yy:{}};for(var g in this.yy)Object.prototype.hasOwnProperty.call(this.yy,g)&&(d.yy[g]=this.yy[g]);p.setInput(t,d.yy),d.yy.lexer=p,d.yy.parser=this,"undefined"==typeof p.yylloc&&(p.yylloc={});var m=p.yylloc;r.push(m);var y=p.options&&p.options.ranges;"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,b,_,x,w,E,S,M,T,C=function(){var t;return t=p.lex()||h,"number"!=typeof t&&(t=e.symbols_[t]||t),
t},I={};;){if(_=n[n.length-1],this.defaultActions[_]?x=this.defaultActions[_]:(null!==v&&"undefined"!=typeof v||(v=C()),x=o[_]&&o[_][v]),"undefined"==typeof x||!x.length||!x[0]){var N="";T=[];for(E in o[_])this.terminals_[E]&&E>c&&T.push("'"+this.terminals_[E]+"'");N=p.showPosition?"Parse error on line "+(s+1)+":\n"+p.showPosition()+"\nExpecting "+T.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(s+1)+": Unexpected "+(v==h?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(N,{text:p.match,token:this.terminals_[v]||v,line:p.yylineno,loc:m,expected:T})}if(x[0]instanceof Array&&x.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_+", token: "+v);switch(x[0]){case 1:n.push(v),i.push(p.yytext),r.push(p.yylloc),n.push(x[1]),v=null,b?(v=b,b=null):(u=p.yyleng,a=p.yytext,s=p.yylineno,m=p.yylloc,l>0&&l--);break;case 2:if(S=this.productions_[x[1]][1],I.$=i[i.length-S],I._$={first_line:r[r.length-(S||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(S||1)].first_column,last_column:r[r.length-1].last_column},y&&(I._$.range=[r[r.length-(S||1)].range[0],r[r.length-1].range[1]]),w=this.performAction.apply(I,[a,u,s,d.yy,x[1],i,r].concat(f)),"undefined"!=typeof w)return w;S&&(n=n.slice(0,-1*S*2),i=i.slice(0,-1*S),r=r.slice(0,-1*S)),n.push(this.productions_[x[1]][0]),i.push(I.$),r.push(I._$),M=o[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},p=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),i=t[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in r)this[o]=r[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length;o++)if(n=this._input.match(this.rules[r[o]]),n&&(!e||n[0].length>e[0].length)){if(e=n,i=o,this.options.backtrack_lexer){if(t=this.test_match(n,r[o]),t!==!1)return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?(t=this.test_match(e,r[i]),t!==!1&&t):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,i){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return t}();return f.lexer=p,t.prototype=f,f.Parser=t,new t}();"undefined"!=typeof t&&"undefined"!=typeof n&&(n.parser=r,n.Parser=r.Parser,n.parse=function(){return r.parse.apply(r,arguments)},n.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),i.exit(1));var r=t("fs").readFileSync(t("path").normalize(e[1]),"utf8");return n.parser.parse(r)},"undefined"!=typeof e&&t.main===e&&n.main(i.argv.slice(1)))}).call(this,t("_process"))},{_process:4,fs:2,path:3}],19:[function(t,e,n){var i=e.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),t<=0)return"0";for(var n=Math.log(Math.pow(2,t))/Math.log(e),r=2;n===1/0;r*=2)n=Math.log(Math.pow(2,t/r))/Math.log(e)*r;for(var o=n-Math.floor(n),a="",r=0;r<Math.floor(n);r++){var s=Math.floor(Math.random()*e).toString(e);a=s+a}if(o){var u=Math.pow(e,o),s=Math.floor(Math.random()*u).toString(e);a=s+a}var l=parseInt(a,e);return l!==1/0&&l>=Math.pow(2,t)?i(t,e):a};i.rack=function(t,e,n){var r=function(r){var a=0;do{if(a++>10){if(!n)throw new Error("too many ID collisions, use more bits");t+=n}var s=i(t,e)}while(Object.hasOwnProperty.call(o,s));return o[s]=r,s},o=r.hats={};return r.get=function(t){return r.hats[t]},r.set=function(t,e){return r.hats[t]=e,r},r.bits=t||128,r.base=e||16,r}},{}],20:[function(t,e,n){(function(t){function i(t,e){for(var n=-1,i=t?t.length:0;++n<i;)if(e(t[n],n,t))return!0;return!1}function r(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function o(t){return function(e){return t(e)}}function a(t,e){return null==t?void 0:t[e]}function s(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function u(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function l(t,e){return function(n){return t(e(n))}}function c(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function h(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function f(){this.__data__=we?we(null):{}}function p(t){return this.has(t)&&delete this.__data__[t]}function d(t){var e=this.__data__;if(we){var n=e[t];return n===pt?void 0:n}return le.call(e,t)?e[t]:void 0}function g(t){var e=this.__data__;return we?void 0!==e[t]:le.call(e,t)}function m(t,e){var n=this.__data__;return n[t]=we&&void 0===e?pt:e,this}function y(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function v(){this.__data__=[]}function b(t){var e=this.__data__,n=j(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():ge.call(e,n,1),!0}function _(t){var e=this.__data__,n=j(e,t);return n<0?void 0:e[n][1]}function x(t){return j(this.__data__,t)>-1}function w(t,e){var n=this.__data__,i=j(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function E(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function S(){this.__data__={hash:new h,map:new(ve||y),string:new h}}function M(t){return Y(this,t).delete(t)}function T(t){return Y(this,t).get(t)}function C(t){return Y(this,t).has(t)}function I(t,e){return Y(this,t).set(t,e),this}function N(t){var e=-1,n=t?t.length:0;for(this.__data__=new E;++e<n;)this.add(t[e])}function P(t){return this.__data__.set(t,pt),this}function L(t){return this.__data__.has(t)}function A(t){this.__data__=new y(t)}function k(){this.__data__=new y}function R(t){return this.__data__.delete(t)}function O(t){return this.__data__.get(t)}function D(t){return this.__data__.has(t)}function F(t,e){var n=this.__data__;if(n instanceof y){var i=n.__data__;if(!ve||i.length<ft-1)return i.push([t,e]),this;n=this.__data__=new E(i)}return n.set(t,e),this}function z(t,e){var n=Le(t)||it(t)?r(t.length,String):[],i=n.length,o=!!i;for(var a in t)!e&&!le.call(t,a)||o&&("length"==a||$(a,i))||n.push(a);return n}function j(t,e){for(var n=t.length;n--;)if(nt(t[n][0],e))return n;return-1}function B(t){return ce.call(t)}function G(t,e,n,i,r){return t===e||(null==t||null==e||!lt(t)&&!ct(e)?t!==t&&e!==e:U(t,e,G,n,i,r))}function U(t,e,n,i,r,o){var a=Le(t),u=Le(e),l=vt,c=vt;a||(l=Pe(t),l=l==yt?Tt:l),u||(c=Pe(e),c=c==yt?Tt:c);var h=l==Tt&&!s(t),f=c==Tt&&!s(e),p=l==c;if(p&&!h)return o||(o=new A),a||Ae(t)?q(t,e,n,i,r,o):X(t,e,l,n,i,r,o);if(!(r&gt)){var d=h&&le.call(t,"__wrapped__"),g=f&&le.call(e,"__wrapped__");if(d||g){var m=d?t.value():t,y=g?e.value():e;return o||(o=new A),n(m,y,i,r,o)}}return!!p&&(o||(o=new A),W(t,e,n,i,r,o))}function V(t){if(!lt(t)||Q(t))return!1;var e=st(t)||s(t)?he:Ht;return e.test(et(t))}function K(t){return ct(t)&&ut(t.length)&&!!Xt[ce.call(t)]}function H(t){if(!tt(t))return me(t);var e=[];for(var n in Object(t))le.call(t,n)&&"constructor"!=n&&e.push(n);return e}function q(t,e,n,r,o,a){var s=o&gt,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t);if(c&&a.get(e))return c==e;var h=-1,f=!0,p=o&dt?new N:void 0;for(a.set(t,e),a.set(e,t);++h<u;){var d=t[h],g=e[h];if(r)var m=s?r(g,d,h,e,t,a):r(d,g,h,t,e,a);if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!i(e,function(t,e){if(!p.has(e)&&(d===t||n(d,t,r,o,a)))return p.add(e)})){f=!1;break}}else if(d!==g&&!n(d,g,r,o,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function X(t,e,n,i,r,o,a){switch(n){case Rt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case kt:return!(t.byteLength!=e.byteLength||!i(new pe(t),new pe(e)));case bt:case _t:case Mt:return nt(+t,+e);case xt:return t.name==e.name&&t.message==e.message;case It:case Pt:return t==e+"";case St:var s=u;case Nt:var l=o&gt;if(s||(s=c),t.size!=e.size&&!l)return!1;var h=a.get(t);if(h)return h==e;o|=dt,a.set(t,e);var f=q(s(t),s(e),i,r,o,a);return a.delete(t),f;case Lt:if(Ne)return Ne.call(t)==Ne.call(e)}return!1}function W(t,e,n,i,r,o){var a=r&gt,s=ht(t),u=s.length,l=ht(e),c=l.length;if(u!=c&&!a)return!1;for(var h=u;h--;){var f=s[h];if(!(a?f in e:le.call(e,f)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var d=!0;o.set(t,e),o.set(e,t);for(var g=a;++h<u;){f=s[h];var m=t[f],y=e[f];if(i)var v=a?i(y,m,f,e,t,o):i(m,y,f,t,e,o);if(!(void 0===v?m===y||n(m,y,i,r,o):v)){d=!1;break}g||(g="constructor"==f)}if(d&&!g){var b=t.constructor,_=e.constructor;b!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return o.delete(t),o.delete(e),d}function Y(t,e){var n=t.__data__;return Z(e)?n["string"==typeof e?"string":"hash"]:n.map}function J(t,e){var n=a(t,e);return V(n)?n:void 0}function $(t,e){return e=null==e?mt:e,!!e&&("number"==typeof t||qt.test(t))&&t>-1&&t%1==0&&t<e}function Z(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Q(t){return!!se&&se in t}function tt(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||oe;return t===n}function et(t){if(null!=t){try{return ue.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function nt(t,e){return t===e||t!==t&&e!==e}function it(t){return ot(t)&&le.call(t,"callee")&&(!de.call(t,"callee")||ce.call(t)==yt)}function rt(t){return null!=t&&ut(t.length)&&!st(t)}function ot(t){return ct(t)&&rt(t)}function at(t,e){return G(t,e)}function st(t){var e=lt(t)?ce.call(t):"";return e==wt||e==Et}function ut(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=mt}function lt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function ct(t){return!!t&&"object"==typeof t}function ht(t){return rt(t)?z(t):H(t)}var ft=200,pt="__lodash_hash_undefined__",dt=1,gt=2,mt=9007199254740991,yt="[object Arguments]",vt="[object Array]",bt="[object Boolean]",_t="[object Date]",xt="[object Error]",wt="[object Function]",Et="[object GeneratorFunction]",St="[object Map]",Mt="[object Number]",Tt="[object Object]",Ct="[object Promise]",It="[object RegExp]",Nt="[object Set]",Pt="[object String]",Lt="[object Symbol]",At="[object WeakMap]",kt="[object ArrayBuffer]",Rt="[object DataView]",Ot="[object Float32Array]",Dt="[object Float64Array]",Ft="[object Int8Array]",zt="[object Int16Array]",jt="[object Int32Array]",Bt="[object Uint8Array]",Gt="[object Uint8ClampedArray]",Ut="[object Uint16Array]",Vt="[object Uint32Array]",Kt=/[\\^$.*+?()[\]{}|]/g,Ht=/^\[object .+?Constructor\]$/,qt=/^(?:0|[1-9]\d*)$/,Xt={};Xt[Ot]=Xt[Dt]=Xt[Ft]=Xt[zt]=Xt[jt]=Xt[Bt]=Xt[Gt]=Xt[Ut]=Xt[Vt]=!0,Xt[yt]=Xt[vt]=Xt[kt]=Xt[bt]=Xt[Rt]=Xt[_t]=Xt[xt]=Xt[wt]=Xt[St]=Xt[Mt]=Xt[Tt]=Xt[It]=Xt[Nt]=Xt[Pt]=Xt[At]=!1;var Wt="object"==typeof t&&t&&t.Object===Object&&t,Yt="object"==typeof self&&self&&self.Object===Object&&self,Jt=Wt||Yt||Function("return this")(),$t="object"==typeof n&&n&&!n.nodeType&&n,Zt=$t&&"object"==typeof e&&e&&!e.nodeType&&e,Qt=Zt&&Zt.exports===$t,te=Qt&&Wt.process,ee=function(){try{return te&&te.binding("util")}catch(t){}}(),ne=ee&&ee.isTypedArray,ie=Array.prototype,re=Function.prototype,oe=Object.prototype,ae=Jt["__core-js_shared__"],se=function(){var t=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ue=re.toString,le=oe.hasOwnProperty,ce=oe.toString,he=RegExp("^"+ue.call(le).replace(Kt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fe=Jt.Symbol,pe=Jt.Uint8Array,de=oe.propertyIsEnumerable,ge=ie.splice,me=l(Object.keys,Object),ye=J(Jt,"DataView"),ve=J(Jt,"Map"),be=J(Jt,"Promise"),_e=J(Jt,"Set"),xe=J(Jt,"WeakMap"),we=J(Object,"create"),Ee=et(ye),Se=et(ve),Me=et(be),Te=et(_e),Ce=et(xe),Ie=fe?fe.prototype:void 0,Ne=Ie?Ie.valueOf:void 0;h.prototype.clear=f,h.prototype.delete=p,h.prototype.get=d,h.prototype.has=g,h.prototype.set=m,y.prototype.clear=v,y.prototype.delete=b,y.prototype.get=_,y.prototype.has=x,y.prototype.set=w,E.prototype.clear=S,E.prototype.delete=M,E.prototype.get=T,E.prototype.has=C,E.prototype.set=I,N.prototype.add=N.prototype.push=P,N.prototype.has=L,A.prototype.clear=k,A.prototype.delete=R,A.prototype.get=O,A.prototype.has=D,A.prototype.set=F;var Pe=B;(ye&&Pe(new ye(new ArrayBuffer(1)))!=Rt||ve&&Pe(new ve)!=St||be&&Pe(be.resolve())!=Ct||_e&&Pe(new _e)!=Nt||xe&&Pe(new xe)!=At)&&(Pe=function(t){var e=ce.call(t),n=e==Tt?t.constructor:void 0,i=n?et(n):void 0;if(i)switch(i){case Ee:return Rt;case Se:return St;case Me:return Ct;case Te:return Nt;case Ce:return At}return e});var Le=Array.isArray,Ae=ne?o(ne):K;e.exports=at}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(t,e,n){"use strict";function i(t,e){this.x=t,this.y=e}e.exports=i,i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=i,this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t}},{}],22:[function(t,e,n){function i(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t}e.exports=i;var r=Object.prototype.hasOwnProperty},{}],23:[function(t,e,n){"use strict";var i=t("lodash.isequal"),r=t("geojson-normalize"),o=t("hat"),a=t("./lib/features_at"),s=t("./lib/string_sets_are_equal"),u=t("geojsonhint"),l=t("./constants"),c=t("./lib/string_set"),h={Polygon:t("./feature_types/polygon"),LineString:t("./feature_types/line_string"),Point:t("./feature_types/point"),MultiPolygon:t("./feature_types/multi_feature"),MultiLineString:t("./feature_types/multi_feature"),MultiPoint:t("./feature_types/multi_feature")};e.exports=function(t,e){return e.modes=l.modes,e.getFeatureIdsAt=function(e){var n=a({point:e},null,t);return n.map(function(t){return t.properties.id})},e.getSelectedIds=function(){return t.store.getSelectedIds()},e.getSelected=function(){return{type:l.geojsonTypes.FEATURE_COLLECTION,features:t.store.getSelectedIds().map(function(e){return t.store.get(e)}).map(function(t){return t.toGeoJSON()})}},e.set=function(n){if(void 0===n.type||n.type!==l.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");var i=t.store.createRenderBatch(),r=t.store.getAllIds().slice(),o=e.add(n),a=new c(o);return r=r.filter(function(t){return!a.has(t)}),r.length&&e.delete(r),i(),o},e.add=function(e){var n=u.hint(e,{precisionWarning:!1}).filter(function(t){return"message"!==t.level});if(n.length)throw new Error(n[0].message);var a=JSON.parse(JSON.stringify(r(e))),s=a.features.map(function(e){if(e.id=e.id||o(),null===e.geometry)throw new Error("Invalid geometry: null");if(void 0===t.store.get(e.id)||t.store.get(e.id).type!==e.geometry.type){var n=h[e.geometry.type];if(void 0===n)throw new Error("Invalid geometry type: "+e.geometry.type+".");var r=new n(t,e);t.store.add(r)}else{var a=t.store.get(e.id);a.properties=e.properties,i(a.getCoordinates(),e.geometry.coordinates)||a.incomingCoords(e.geometry.coordinates)}return e.id});return t.store.render(),s},e.get=function(e){var n=t.store.get(e);if(n)return n.toGeoJSON()},e.getAll=function(){return{type:l.geojsonTypes.FEATURE_COLLECTION,features:t.store.getAll().map(function(t){return t.toGeoJSON()})}},e.delete=function(n){return t.store.delete(n,{silent:!0}),e.getMode()!==l.modes.DIRECT_SELECT||t.store.getSelectedIds().length?t.store.render():t.events.changeMode(l.modes.SIMPLE_SELECT,void 0,{silent:!0}),e},e.deleteAll=function(){return t.store.delete(t.store.getAllIds(),{silent:!0}),e.getMode()===l.modes.DIRECT_SELECT?t.events.changeMode(l.modes.SIMPLE_SELECT,void 0,{silent:!0}):t.store.render(),e},e.changeMode=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n===l.modes.SIMPLE_SELECT&&e.getMode()===l.modes.SIMPLE_SELECT?s(i.featureIds||[],t.store.getSelectedIds())?e:(t.store.setSelected(i.featureIds,{silent:!0}),t.store.render(),e):n===l.modes.DIRECT_SELECT&&e.getMode()===l.modes.DIRECT_SELECT&&i.featureId===t.store.getSelectedIds()[0]?e:(t.events.changeMode(n,i,{silent:!0}),e)},e.getMode=function(){return t.events.getMode()},e.trash=function(){return t.events.trash({silent:!0}),e},e.combineFeatures=function(){return t.events.combineFeatures({silent:!0}),e},e.uncombineFeatures=function(){return t.events.uncombineFeatures({silent:!0}),e},e.setFeatureProperty=function(n,i,r){return t.store.setFeatureProperty(n,i,r),e},e}},{"./constants":24,"./feature_types/line_string":27,"./feature_types/multi_feature":28,"./feature_types/point":29,"./feature_types/polygon":30,"./lib/features_at":38,"./lib/string_set":47,"./lib/string_sets_are_equal":48,"geojson-normalize":14,geojsonhint:15,hat:19,"lodash.isequal":20}],24:[function(t,e,n){"use strict";e.exports={classes:{CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sources:{HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}},{}],25:[function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r,o=t("./lib/mode_handler"),a=t("./lib/get_features_and_set_cursor"),s=t("./lib/is_click"),u=t("./constants"),l=(r={},i(r,u.modes.SIMPLE_SELECT,t("./modes/simple_select")),i(r,u.modes.DIRECT_SELECT,t("./modes/direct_select")),i(r,u.modes.DRAW_POINT,t("./modes/draw_point")),i(r,u.modes.DRAW_LINE_STRING,t("./modes/draw_line_string")),i(r,u.modes.DRAW_POLYGON,t("./modes/draw_polygon")),i(r,u.modes.STATIC,t("./modes/static")),r);e.exports=function(t){function e(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};h.stop();var r=l[e];if(void 0===r)throw new Error(e+" is not valid");c=e;var a=r(t,n);h=o(a,t),i.silent||t.map.fire(u.events.MODE_CHANGE,{mode:e}),t.store.setDirty(),t.store.render()}function n(e){var n=!1;Object.keys(e).forEach(function(t){if(void 0===p[t])throw new Error("Invalid action type");p[t]!==e[t]&&(n=!0),p[t]=e[t]}),n&&t.map.fire(u.events.ACTIONABLE,{actions:p})}var i={},r={},c=u.modes.SIMPLE_SELECT,h=o(l.simple_select(t),t);r.drag=function(e){s(i,{point:e.point,time:(new Date).getTime()})?e.originalEvent.stopPropagation():(t.ui.queueMapClasses({mouse:u.cursors.DRAG}),h.drag(e))},r.mousemove=function(e){var n=void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which;if(1===n)return r.drag(e);var i=a(e,t);e.featureTarget=i,h.mousemove(e)},r.mousedown=function(e){i={time:(new Date).getTime(),point:e.point};var n=a(e,t);e.featureTarget=n,h.mousedown(e)},r.mouseup=function(e){var n=a(e,t);e.featureTarget=n,s(i,{point:e.point,time:(new Date).getTime()})?h.click(e):h.mouseup(e)},r.mouseout=function(t){h.mouseout(t)};var f=function(t){return!(8===t||46===t||t>=48&&t<=57)};r.keydown=function(n){8!==n.keyCode&&46!==n.keyCode||!t.options.controls.trash?f(n.keyCode)?h.keydown(n):49===n.keyCode&&t.options.controls.point?e(u.modes.DRAW_POINT):50===n.keyCode&&t.options.controls.line_string?e(u.modes.DRAW_LINE_STRING):51===n.keyCode&&t.options.controls.polygon&&e(u.modes.DRAW_POLYGON):(n.preventDefault(),h.trash())},r.keyup=function(t){f(t.keyCode)&&h.keyup(t)},r.zoomend=function(){t.store.changeZoom()},r.data=function(e){"style"===e.dataType&&!function(){var e=t.setup,n=t.map,i=t.options,r=t.store,o=!!i.styles.find(function(t){return n.getLayer(t.id)});o||(e.addLayers(),r.setDirty(),r.render())}()};var p={trash:!1,combineFeatures:!1,uncombineFeatures:!1},d={changeMode:e,actionable:n,currentModeName:function(){return c},currentModeRender:function(t,e){return h.render(t,e)},fire:function(t,e){r[t]&&r[t](e)},addEventListeners:function(){t.map.on("mousemove",r.mousemove),t.map.on("mousedown",r.mousedown),t.map.on("mouseup",r.mouseup),t.map.on("data",r.data),t.container.addEventListener("mouseout",r.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",r.keydown),t.container.addEventListener("keyup",r.keyup))},removeEventListeners:function(){t.map.off("mousemove",r.mousemove),t.map.off("mousedown",r.mousedown),t.map.off("mouseup",r.mouseup),t.map.off("data",r.data),t.container.removeEventListener("mouseout",r.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",r.keydown),t.container.removeEventListener("keyup",r.keyup))},trash:function(t){h.trash(t)},combineFeatures:function(){h.combineFeatures()},uncombineFeatures:function(){h.uncombineFeatures()},getMode:function(){return c}};return d}},{"./constants":24,"./lib/get_features_and_set_cursor":39,"./lib/is_click":40,"./lib/mode_handler":43,"./modes/direct_select":52,"./modes/draw_line_string":53,"./modes/draw_point":54,"./modes/draw_polygon":55,"./modes/simple_select":56,"./modes/static":57}],26:[function(t,e,n){"use strict";var i=t("hat"),r=t("../constants"),o=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||i(),this.type=e.geometry.type};o.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},o.prototype.incomingCoords=function(t){this.setCoordinates(t)},o.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},o.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},o.prototype.setProperty=function(t,e){this.properties[t]=e},o.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:r.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},o.prototype.internal=function(t){var e={id:this.id,meta:r.meta.FEATURE,"meta:type":this.type,active:r.activeStates.INACTIVE,mode:t};if(this.ctx.options.userProperties)for(var n in this.properties)e["user_"+n]=this.properties[n];return{type:r.geojsonTypes.FEATURE,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}},e.exports=o},{"../constants":24,hat:19}],27:[function(t,e,n){"use strict";var i=t("./feature"),r=function(t,e){i.call(this,t,e)};r.prototype=Object.create(i.prototype),r.prototype.isValid=function(){return this.coordinates.length>1},r.prototype.addCoordinate=function(t,e,n){this.changed();var i=parseInt(t,10);this.coordinates.splice(i,0,[e,n])},r.prototype.getCoordinate=function(t){var e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},r.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},r.prototype.updateCoordinate=function(t,e,n){var i=parseInt(t,10);this.coordinates[i]=[e,n],this.changed()},e.exports=r},{"./feature":26}],28:[function(t,e,n){"use strict";var i=t("./feature"),r=t("../constants"),o=t("hat"),a={MultiPoint:t("./point"),MultiLineString:t("./line_string"),MultiPolygon:t("./polygon")},s=function(t,e,n,i,r){var o=n.split("."),a=parseInt(o[0],10),s=o[1]?o.slice(1).join("."):null;return t[a][e](s,i,r)},u=function(t,e){if(i.call(this,t,e),delete this.coordinates,this.model=a[e.geometry.type],void 0===this.model)throw new TypeError(e.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(e.geometry.coordinates)};u.prototype=Object.create(i.prototype),u.prototype._coordinatesToFeatures=function(t){var e=this,n=this.model.bind(this);return t.map(function(t){return new n(e.ctx,{id:o(),type:r.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:t,type:e.type.replace("Multi","")}})})},u.prototype.isValid=function(){return this.features.every(function(t){return t.isValid()})},u.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},u.prototype.getCoordinate=function(t){return s(this.features,"getCoordinate",t)},u.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(t){return t.type===r.geojsonTypes.POLYGON?t.getCoordinates():t.coordinates})))},u.prototype.updateCoordinate=function(t,e,n){s(this.features,"updateCoordinate",t,e,n),this.changed()},u.prototype.addCoordinate=function(t,e,n){s(this.features,"addCoordinate",t,e,n),this.changed()},u.prototype.removeCoordinate=function(t){s(this.features,"removeCoordinate",t),this.changed()},u.prototype.getFeatures=function(){return this.features},e.exports=u},{"../constants":24,"./feature":26,"./line_string":27,"./point":29,"./polygon":30,hat:19}],29:[function(t,e,n){"use strict";var i=t("./feature"),r=function(t,e){i.call(this,t,e)};r.prototype=Object.create(i.prototype),r.prototype.isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1];
},r.prototype.updateCoordinate=function(t,e,n){3===arguments.length?this.coordinates=[e,n]:this.coordinates=[t,e],this.changed()},r.prototype.getCoordinate=function(){return this.getCoordinates()},e.exports=r},{"./feature":26}],30:[function(t,e,n){"use strict";var i=t("./feature"),r=function(t,e){i.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};r.prototype=Object.create(i.prototype),r.prototype.isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return t.length>2})},r.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},r.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},r.prototype.addCoordinate=function(t,e,n){this.changed();var i=t.split(".").map(function(t){return parseInt(t,10)}),r=this.coordinates[i[0]];r.splice(i[1],0,[e,n])},r.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},r.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},r.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},r.prototype.updateCoordinate=function(t,e,n){this.changed();var i=t.split("."),r=parseInt(i[0],10),o=parseInt(i[1],10);void 0===this.coordinates[r]&&(this.coordinates[r]=[]),this.coordinates[r][o]=[e,n]},e.exports=r},{"./feature":26}],31:[function(t,e,n){"use strict";var i=t("../constants");e.exports={isOfMetaType:function(t){return function(e){var n=e.featureTarget;return!!n&&!!n.properties&&n.properties.meta===t}},isShiftMousedown:function(t){return!!t.originalEvent&&!!t.originalEvent.shiftKey&&0===t.originalEvent.button},isActiveFeature:function(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===i.activeStates.ACTIVE&&t.featureTarget.properties.meta===i.meta.FEATURE},isInactiveFeature:function(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===i.activeStates.INACTIVE&&t.featureTarget.properties.meta===i.meta.FEATURE},noTarget:function(t){return void 0===t.featureTarget},isFeature:function(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.meta===i.meta.FEATURE},isVertex:function(t){var e=t.featureTarget;return!!e&&!!e.properties&&e.properties.meta===i.meta.VERTEX},isShiftDown:function(t){return!!t.originalEvent&&t.originalEvent.shiftKey===!0},isEscapeKey:function(t){return 27===t.keyCode},isEnterKey:function(t){return 13===t.keyCode},true:function(){return!0}}},{"../constants":24}],32:[function(t,e,n){"use strict";var i=t("geojson-extent"),r=t("../constants"),o=r.LAT_MIN,a=r.LAT_MAX,s=r.LAT_RENDERED_MIN,u=r.LAT_RENDERED_MAX,l=r.LNG_MIN,c=r.LNG_MAX;e.exports=function(t,e){var n=o,r=a,h=o,f=a,p=c,d=l;t.forEach(function(t){var e=i(t),o=e[1],a=e[3],s=e[0],u=e[2];o>n&&(n=o),a<r&&(r=a),a>h&&(h=a),o<f&&(f=o),s<p&&(p=s),u>d&&(d=u)});var g=e;return n+g.lat>u&&(g.lat=u-n),h+g.lat>a&&(g.lat=a-h),r+g.lat<s&&(g.lat=s-r),f+g.lat<o&&(g.lat=o-f),p+g.lng<=l&&(g.lng+=360*Math.ceil(Math.abs(g.lng)/360)),d+g.lng>=c&&(g.lng-=360*Math.ceil(Math.abs(g.lng)/360)),g}},{"../constants":24,"geojson-extent":7}],33:[function(t,e,n){"use strict";var i=t("../constants");e.exports=function(t,e,n,r){var o=e.geometry.coordinates,a=n.geometry.coordinates;if(o[1]>i.LAT_RENDERED_MAX||o[1]<i.LAT_RENDERED_MIN||a[1]>i.LAT_RENDERED_MAX||a[1]<i.LAT_RENDERED_MIN)return null;var s=r.project([o[0],o[1]]),u=r.project([a[0],a[1]]),l=r.unproject([(s.x+u.x)/2,(s.y+u.y)/2]);return{type:i.geojsonTypes.FEATURE,properties:{meta:i.meta.MIDPOINT,parent:t,lng:l.lng,lat:l.lat,coord_path:n.properties.coord_path},geometry:{type:i.geojsonTypes.POINT,coordinates:[l.lng,l.lat]}}}},{"../constants":24}],34:[function(t,e,n){"use strict";function i(t){function e(t,e){var i="",a=null;t.forEach(function(t,s){var l=void 0!==e&&null!==e?e+"."+s:String(s),c=r(p,t,l,n(l));if(u.midpoints&&a){var h=o(p,a,c,u.map);h&&d.push(h)}a=c;var f=JSON.stringify(t);i!==f&&d.push(c),0===s&&(i=f)})}function n(t){return!!u.selectedPaths&&u.selectedPaths.indexOf(t)!==-1}function s(){var e=h.replace(a.geojsonTypes.MULTI_PREFIX,"");f.forEach(function(n,r){var o={type:a.geojsonTypes.FEATURE,properties:t.properties,geometry:{type:e,coordinates:n}};d=d.concat(i(o,u,r))})}var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=t.geometry,h=c.type,f=c.coordinates,p=t.properties&&t.properties.id,d=[];return h===a.geojsonTypes.POINT?d.push(r(p,f,l,n(l))):h===a.geojsonTypes.POLYGON?f.forEach(function(t,n){e(t,null!==l?l+"."+n:String(n))}):h===a.geojsonTypes.LINE_STRING?e(f,l):0===h.indexOf(a.geojsonTypes.MULTI_PREFIX)&&s(),d}var r=t("./create_vertex"),o=t("./create_midpoint"),a=t("../constants");e.exports=i},{"../constants":24,"./create_midpoint":33,"./create_vertex":35}],35:[function(t,e,n){"use strict";var i=t("../constants");e.exports=function(t,e,n,r){return{type:i.geojsonTypes.FEATURE,properties:{meta:i.meta.VERTEX,parent:t,coord_path:n,active:r?i.activeStates.ACTIVE:i.activeStates.INACTIVE},geometry:{type:i.geojsonTypes.POINT,coordinates:e}}}},{"../constants":24}],36:[function(t,e,n){"use strict";e.exports={enable:function(t){setTimeout(function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.enable()},0)},disable:function(t){setTimeout(function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()},0)}}},{}],37:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}},{}],38:[function(t,e,n){"use strict";var i=t("./sort_features"),r=t("./map_event_to_bounding_box"),o=t("../constants"),a=t("./string_set"),s=[o.meta.FEATURE,o.meta.MIDPOINT,o.meta.VERTEX];e.exports=function(t,e,n){if(null===n.map)return[];var o=t?r(t,n.options.clickBuffer):e,u={};n.options.styles&&(u.layers=n.options.styles.map(function(t){return t.id}));var l=n.map.queryRenderedFeatures(o,u).filter(function(t){return s.indexOf(t.properties.meta)!==-1}),c=new a,h=[];return l.forEach(function(t){var e=t.properties.id;c.has(e)||(c.add(e),h.push(t))}),i(h)}},{"../constants":24,"./map_event_to_bounding_box":42,"./sort_features":46,"./string_set":47}],39:[function(t,e,n){"use strict";var i=t("./features_at"),r=t("../constants");e.exports=function(t,e){var n=i(t,null,e),o={mouse:r.cursors.NONE};return n[0]&&(o.mouse=n[0].properties.active===r.activeStates.ACTIVE?r.cursors.MOVE:r.cursors.POINTER,o.feature=n[0].properties.meta),e.events.currentModeName().indexOf("draw")!==-1&&(o.mouse=r.cursors.ADD),e.ui.queueMapClasses(o),e.ui.updateMapClasses(),n[0]}},{"../constants":24,"./features_at":38}],40:[function(t,e,n){"use strict";var i=t("./euclidean_distance"),r=4,o=12,a=500;e.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=null!=n.fineTolerance?n.fineTolerance:r,u=null!=n.grossTolerance?n.grossTolerance:o,l=null!=n.interval?n.interval:a;t.point=t.point||e.point,t.time=t.time||e.time;var c=i(t.point,e.point);return c<s||c<u&&e.time-t.time<l}},{"./euclidean_distance":37}],41:[function(t,e,n){"use strict";function i(t,e){return!!t.lngLat&&t.lngLat.lng===e[0]&&t.lngLat.lat===e[1]}e.exports=i},{}],42:[function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]}e.exports=i},{}],43:[function(t,e,n){"use strict";var i=function(t,e){var n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[]},i={on:function(t,e,i){if(void 0===n[t])throw new Error("Invalid event type: "+t);n[t].push({selector:e,fn:i})},render:function(t){e.store.featureChanged(t)}},r=function(t,r){for(var o=n[t],a=o.length;a--;){var s=o[a];if(s.selector(r)){s.fn.call(i,r),e.store.render(),e.ui.updateMapClasses();break}}};return t.start.call(i),{render:t.render,stop:function(){t.stop&&t.stop()},trash:function(){t.trash&&(t.trash(),e.store.render())},combineFeatures:function(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures:function(){t.uncombineFeatures&&t.uncombineFeatures()},drag:function(t){r("drag",t)},click:function(t){r("click",t)},mousemove:function(t){r("mousemove",t)},mousedown:function(t){r("mousedown",t)},mouseup:function(t){r("mouseup",t)},mouseout:function(t){r("mouseout",t)},keydown:function(t){r("keydown",t)},keyup:function(t){r("keyup",t)}}};e.exports=i},{}],44:[function(t,e,n){"use strict";function i(t,e){var n=e.getBoundingClientRect();return new r(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)}var r=t("point-geometry");e.exports=i},{"point-geometry":21}],45:[function(t,e,n){"use strict";var i=t("./constrain_feature_movement"),r=t("../constants");e.exports=function(t,e){var n=i(t.map(function(t){return t.toGeoJSON()}),e);t.forEach(function(t){var e=t.getCoordinates(),i=function(t){var e={lng:t[0]+n.lng,lat:t[1]+n.lat};return[e.lng,e.lat]},o=function(t){return t.map(function(t){return i(t)})},a=function(t){return t.map(function(t){return o(t)})},s=void 0;t.type===r.geojsonTypes.POINT?s=i(e):t.type===r.geojsonTypes.LINE_STRING||t.type===r.geojsonTypes.MULTI_POINT?s=e.map(i):t.type===r.geojsonTypes.POLYGON||t.type===r.geojsonTypes.MULTI_LINE_STRING?s=e.map(o):t.type===r.geojsonTypes.MULTI_POLYGON&&(s=e.map(a)),t.incomingCoords(s)})}},{"../constants":24,"./constrain_feature_movement":32}],46:[function(t,e,n){"use strict";function i(t,e){var n=s[t.geometry.type]-s[e.geometry.type];return 0===n&&t.geometry.type===a.geojsonTypes.POLYGON?t.area-e.area:n}function r(t){return t.map(function(t){return t.geometry.type===a.geojsonTypes.POLYGON&&(t.area=o.geometry({type:a.geojsonTypes.FEATURE,property:{},geometry:t.geometry})),t}).sort(i).map(function(t){return delete t.area,t})}var o=t("geojson-area"),a=t("../constants"),s={Point:0,LineString:1,Polygon:2};e.exports=r},{"../constants":24,"geojson-area":5}],47:[function(t,e,n){"use strict";function i(t){if(this._items={},this._length=t?t.length:0,t)for(var e=0,n=t.length;e<n;e++)void 0!==t[e]&&(this._items[t[e]]=e)}i.prototype.add=function(t){return this._length=this._items[t]?this._length:this._length+1,this._items[t]=this._items[t]?this._items[t]:this._length,this},i.prototype.delete=function(t){return this._length=this._items[t]?this._length-1:this._length,delete this._items[t],this},i.prototype.has=function(t){return void 0!==this._items[t]},i.prototype.values=function(){var t=this,e=Object.keys(this._items).sort(function(e,n){return t._items[e]-t._items[n]});return e},i.prototype.clear=function(){return this._length=0,this._items={},this},e.exports=i},{}],48:[function(t,e,n){"use strict";e.exports=function(t,e){return t.length===e.length&&JSON.stringify(t.map(function(t){return t}).sort())===JSON.stringify(e.map(function(t){return t}).sort())}},{}],49:[function(t,e,n){"use strict";e.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}]},{}],50:[function(t,e,n){"use strict";function i(t,e,n){function i(){o=!1,a&&(r.apply(n,a),a=!1)}function r(){o?a=arguments:(o=!0,t.apply(n,arguments),setTimeout(i,e))}var o=void 0,a=void 0;return r}e.exports=i},{}],51:[function(t,e,n){"use strict";function i(t){return[].concat(t).filter(function(t){return void 0!==t})}e.exports=i},{}],52:[function(t,e,n){"use strict";var i=t("../lib/common_selectors"),r=i.noTarget,o=i.isOfMetaType,a=i.isInactiveFeature,s=i.isShiftDown,u=t("../lib/create_supplementary_points"),l=t("../lib/constrain_feature_movement"),c=t("../lib/double_click_zoom"),h=t("../constants"),f=t("../lib/common_selectors"),p=t("../lib/move_features"),d=o(h.meta.VERTEX),g=o(h.meta.MIDPOINT);e.exports=function(t,e){var n=e.featureId,i=t.store.get(n);if(!i)throw new Error("You must provide a featureId to enter direct_select mode");if(i.type===h.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");var o=e.startPos||null,m=!1,y=!1,v=e.coordPath?[e.coordPath]:[],b=function(){t.map.fire(h.events.UPDATE,{action:h.updateActions.CHANGE_COORDINATES,features:t.store.getSelected().map(function(t){return t.toGeoJSON()})})},_=function(){return t.events.actionable({combineFeatures:!1,uncombineFeatures:!1,trash:v.length>0})},x=function(e){t.map.dragPan.disable(),y=!0,o=e.lngLat},w=function(){t.map.dragPan.enable(),m=!1,y=!1,o=null},E=function(t){x(t);var e=t.featureTarget.properties,n=v.indexOf(e.coord_path);s(t)||n!==-1?s(t)&&n===-1&&v.push(e.coord_path):v=[e.coord_path],i.changed()},S=function(t){x(t);var e=t.featureTarget.properties;i.addCoordinate(e.coord_path,e.lng,e.lat),b(),v=[e.coord_path]},M=function(t){0===v.length?x(t):w()},T=function(e,n){p(t.store.getSelected(),n),o=e.lngLat},C=function(t,e){for(var n=v.map(function(t){return i.getCoordinate(t)}),r=n.map(function(t){return{type:h.geojsonTypes.FEATURE,properties:{},geometry:{type:h.geojsonTypes.POINT,coordinates:t}}}),o=l(r,e),a=0;a<n.length;a++){var s=n[a];i.updateCoordinate(v[a],s[0]+o.lng,s[1]+o.lat)}};return{start:function(){t.store.setSelected(n),c.disable(t),this.on("mousemove",f.true,function(e){var n=f.isActiveFeature(e),i=d(e),r=0===v.length;n&&r?t.ui.queueMapClasses({mouse:h.cursors.MOVE}):i&&!r?t.ui.queueMapClasses({mouse:h.cursors.MOVE}):t.ui.queueMapClasses({mouse:h.cursors.NONE}),w(e)}),this.on("mouseout",function(){return m},b),this.on("mousedown",d,E),this.on("mousedown",f.isActiveFeature,M),this.on("mousedown",g,S),this.on("drag",function(){return y},function(t){m=!0,t.originalEvent.stopPropagation();var e={lng:t.lngLat.lng-o.lng,lat:t.lngLat.lat-o.lat};v.length>0?C(t,e):T(t,e),o=t.lngLat}),this.on("click",f.true,w),this.on("mouseup",f.true,function(){m&&b(),w()}),this.on("click",r,function(){t.events.changeMode(h.modes.SIMPLE_SELECT)}),this.on("click",a,function(){t.events.changeMode(h.modes.SIMPLE_SELECT)}),this.on("click",f.isActiveFeature,function(){v=[],i.changed()})},stop:function(){c.enable(t)},render:function(e,i){n===e.properties.id?(e.properties.active=h.activeStates.ACTIVE,i(e),u(e,{map:t.map,midpoints:!0,selectedPaths:v}).forEach(i)):(e.properties.active=h.activeStates.INACTIVE,i(e)),_()},trash:function(){v.sort().reverse().forEach(function(t){return i.removeCoordinate(t)}),t.map.fire(h.events.UPDATE,{action:h.updateActions.CHANGE_COORDINATES,features:t.store.getSelected().map(function(t){return t.toGeoJSON()})}),v=[],_(),i.isValid()===!1&&(t.store.delete([n]),t.events.changeMode(h.modes.SIMPLE_SELECT,{}))}}}},{"../constants":24,"../lib/common_selectors":31,"../lib/constrain_feature_movement":32,"../lib/create_supplementary_points":34,"../lib/double_click_zoom":36,"../lib/move_features":45}],53:[function(t,e,n){"use strict";var i=t("../lib/common_selectors"),r=t("../feature_types/line_string"),o=t("../lib/is_event_at_coordinates"),a=t("../lib/double_click_zoom"),s=t("../constants"),u=t("../lib/create_vertex");e.exports=function(t){var e=new r(t,{type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.LINE_STRING,coordinates:[]}}),n=0;return t._test&&(t._test.line=e),t.store.add(e),{start:function(){t.store.clearSelected(),a.disable(t),t.ui.queueMapClasses({mouse:s.cursors.ADD}),t.ui.setActiveButton(s.types.LINE),this.on("mousemove",i.true,function(r){e.updateCoordinate(n,r.lngLat.lng,r.lngLat.lat),i.isVertex(r)&&t.ui.queueMapClasses({mouse:s.cursors.POINTER})}),this.on("click",i.true,function(i){return n>0&&o(i,e.coordinates[n-1])?t.events.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[e.id]}):(t.ui.queueMapClasses({mouse:s.cursors.ADD}),e.updateCoordinate(n,i.lngLat.lng,i.lngLat.lat),void n++)}),this.on("click",i.isVertex,function(){return t.events.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[e.id]})}),this.on("keyup",i.isEscapeKey,function(){t.store.delete([e.id],{silent:!0}),t.events.changeMode(s.modes.SIMPLE_SELECT)}),this.on("keyup",i.isEnterKey,function(){t.events.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[e.id]})}),t.events.actionable({combineFeatures:!1,uncombineFeatures:!1,trash:!0})},stop:function(){a.enable(t),t.ui.setActiveButton(),void 0!==t.store.get(e.id)&&(e.removeCoordinate(""+n),e.isValid()?t.map.fire(s.events.CREATE,{features:[e.toGeoJSON()]}):(t.store.delete([e.id],{silent:!0}),t.events.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},render:function(t,n){var i=t.properties.id===e.id;return t.properties.active=i?s.activeStates.ACTIVE:s.activeStates.INACTIVE,i?void(t.geometry.coordinates.length<2||(t.properties.meta=s.meta.FEATURE,t.geometry.coordinates.length>=3&&n(u(e.id,t.geometry.coordinates[t.geometry.coordinates.length-2],""+(t.geometry.coordinates.length-2),!1)),n(t))):n(t)},trash:function(){t.store.delete([e.id],{silent:!0}),t.events.changeMode(s.modes.SIMPLE_SELECT)}}}},{"../constants":24,"../feature_types/line_string":27,"../lib/common_selectors":31,"../lib/create_vertex":35,"../lib/double_click_zoom":36,"../lib/is_event_at_coordinates":41}],54:[function(t,e,n){"use strict";var i=t("../lib/common_selectors"),r=t("../feature_types/point"),o=t("../constants");e.exports=function(t){function e(){t.events.changeMode(o.modes.SIMPLE_SELECT),t.store.delete([a.id],{silent:!0})}function n(e){t.ui.queueMapClasses({mouse:o.cursors.MOVE}),a.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),t.map.fire(o.events.CREATE,{features:[a.toGeoJSON()]}),t.events.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[a.id]})}var a=new r(t,{type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.POINT,coordinates:[]}});return t._test&&(t._test.point=a),t.store.add(a),{start:function(){t.store.clearSelected(),t.ui.queueMapClasses({mouse:o.cursors.ADD}),t.ui.setActiveButton(o.types.POINT),this.on("click",i.true,n),this.on("keyup",i.isEscapeKey,e),this.on("keyup",i.isEnterKey,e),t.events.actionable({combineFeatures:!1,uncombineFeatures:!1,trash:!0})},stop:function(){t.ui.setActiveButton(),a.getCoordinate().length||t.store.delete([a.id],{silent:!0})},render:function(t,e){var n=t.properties.id===a.id;if(t.properties.active=n?o.activeStates.ACTIVE:o.activeStates.INACTIVE,!n)return e(t)},trash:function(){e()}}}},{"../constants":24,"../feature_types/point":29,"../lib/common_selectors":31}],55:[function(t,e,n){"use strict";var i=t("../lib/common_selectors"),r=t("../feature_types/polygon"),o=t("../lib/double_click_zoom"),a=t("../constants"),s=t("../lib/is_event_at_coordinates"),u=t("../lib/create_vertex");e.exports=function(t){var e=new r(t,{type:a.geojsonTypes.FEATURE,properties:{},geometry:{type:a.geojsonTypes.POLYGON,coordinates:[[]]}}),n=0;return t._test&&(t._test.polygon=e),t.store.add(e),{start:function(){t.store.clearSelected(),o.disable(t),t.ui.queueMapClasses({mouse:a.cursors.ADD}),t.ui.setActiveButton(a.types.POLYGON),this.on("mousemove",i.true,function(r){e.updateCoordinate("0."+n,r.lngLat.lng,r.lngLat.lat),i.isVertex(r)&&t.ui.queueMapClasses({mouse:a.cursors.POINTER})}),this.on("click",i.true,function(i){return n>0&&s(i,e.coordinates[0][n-1])?t.events.changeMode(a.modes.SIMPLE_SELECT,{featureIds:[e.id]}):(t.ui.queueMapClasses({mouse:a.cursors.ADD}),e.updateCoordinate("0."+n,i.lngLat.lng,i.lngLat.lat),void n++)}),this.on("click",i.isVertex,function(){return t.events.changeMode(a.modes.SIMPLE_SELECT,{featureIds:[e.id]})}),this.on("keyup",i.isEscapeKey,function(){t.store.delete([e.id],{silent:!0}),t.events.changeMode(a.modes.SIMPLE_SELECT)}),this.on("keyup",i.isEnterKey,function(){t.events.changeMode(a.modes.SIMPLE_SELECT,{featureIds:[e.id]})}),t.events.actionable({combineFeatures:!1,uncombineFeatures:!1,trash:!0})},stop:function(){t.ui.queueMapClasses({mouse:a.cursors.NONE}),o.enable(t),t.ui.setActiveButton(),void 0!==t.store.get(e.id)&&(e.removeCoordinate("0."+n),e.isValid()?t.map.fire(a.events.CREATE,{features:[e.toGeoJSON()]}):(t.store.delete([e.id],{silent:!0}),t.events.changeMode(a.modes.SIMPLE_SELECT,{},{silent:!0})))},render:function(t,n){var i=t.properties.id===e.id;if(t.properties.active=i?a.activeStates.ACTIVE:a.activeStates.INACTIVE,!i)return n(t);if(0!==t.geometry.coordinates.length){var r=t.geometry.coordinates[0].length;if(!(r<3)){if(t.properties.meta=a.meta.FEATURE,r>4){n(u(e.id,t.geometry.coordinates[0][0],"0.0",!1));var o=t.geometry.coordinates[0].length-3;n(u(e.id,t.geometry.coordinates[0][o],"0."+o,!1))}if(r>3)return n(t);var s=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];return n({type:a.geojsonTypes.FEATURE,properties:t.properties,geometry:{coordinates:s,type:a.geojsonTypes.LINE_STRING}})}}},trash:function(){t.store.delete([e.id],{silent:!0}),t.events.changeMode(a.modes.SIMPLE_SELECT)}}}},{"../constants":24,"../feature_types/polygon":30,"../lib/common_selectors":31,"../lib/create_vertex":35,"../lib/double_click_zoom":36,"../lib/is_event_at_coordinates":41}],56:[function(t,e,n){"use strict";var i=t("../lib/common_selectors"),r=t("../lib/mouse_event_point"),o=t("../lib/features_at"),a=t("../lib/create_supplementary_points"),s=t("../lib/string_set"),u=t("../lib/double_click_zoom"),l=t("../lib/move_features"),c=t("../constants"),h=t("../feature_types/multi_feature");e.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,f=null,p=void 0,d=!1,g=!1,m=!1,y=!1,v=e.featureIds||[],b=function(){t.map.fire(c.events.UPDATE,{action:c.updateActions.MOVE,features:t.store.getSelected().map(function(t){return t.toGeoJSON()})})},_=function(){var e=t.store.getSelected(),n=e.filter(function(t){return t instanceof h}),i=!1;e.length>1&&!function(){i=!0;var t=e[0].type.replace("Multi","");e.forEach(function(e){e.type.replace("Multi","")!==t&&(i=!1)})}();var r=n.length>0,o=e.length>0;t.events.actionable({combineFeatures:i,uncombineFeatures:r,trash:o})},x=function(t){if(!t.length)return[];var e=t.map(function(t){return t.properties.id}).filter(function(t){return void 0!==t}).reduce(function(t,e){return t.add(e),t},new s);return e.values()},w=function(){p&&(p.parentNode&&p.parentNode.removeChild(p),p=null),t.map.dragPan.enable(),d=!1,g=!1,m=!1,y=!1};return{stop:function(){u.enable(t)},start:function(){t.store&&(t.store.setSelected(v.filter(function(e){return void 0!==t.store.get(e)})),_()),this.on("mouseup",i.true,w),this.on("mousemove",i.true,w),this.on("mouseout",function(){return m},b),this.on("click",i.noTarget,function(){var e=this,n=t.store.getSelectedIds();n.length&&(t.store.clearSelected(),n.forEach(function(t){return e.render(t)})),u.enable(t),w()}),this.on("click",i.isOfMetaType(c.meta.VERTEX),function(e){t.events.changeMode(c.modes.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),t.ui.queueMapClasses({mouse:c.cursors.MOVE})}),this.on("mousedown",i.isActiveFeature,function(e){w(),t.map.dragPan.disable(),this.render(e.featureTarget.properties.id),y=!0,n=e.lngLat}),this.on("click",i.isFeature,function(e){u.disable(t),w();var n=i.isShiftDown(e),r=t.store.getSelectedIds(),o=e.featureTarget.properties.id,a=t.store.isSelected(o);return!n&&a&&t.store.get(o).type!==c.geojsonTypes.POINT?t.events.changeMode(c.modes.DIRECT_SELECT,{featureId:o}):(a&&n?(t.store.deselect(o),t.ui.queueMapClasses({mouse:c.cursors.POINTER}),1===r.length&&u.enable(t)):!a&&n?(t.store.select(o),t.ui.queueMapClasses({mouse:c.cursors.MOVE})):a||n||(r.forEach(this.render),t.store.setSelected(o),t.ui.queueMapClasses({mouse:c.cursors.MOVE})),void this.render(o))}),this.on("drag",function(){return y},function(e){m=!0,e.originalEvent.stopPropagation();var i={lng:e.lngLat.lng-n.lng,lat:e.lngLat.lat-n.lat};l(t.store.getSelected(),i),n=e.lngLat}),this.on("mouseup",i.true,function(e){if(m)b();else if(d){var n=[f,r(e.originalEvent,t.container)],i=o(null,n,t),a=x(i).filter(function(e){return!t.store.isSelected(e)});a.length&&(t.store.select(a),a.forEach(this.render),t.ui.queueMapClasses({mouse:c.cursors.MOVE}))}w()}),t.options.boxSelect&&(this.on("mousedown",i.isShiftMousedown,function(e){w(),t.map.dragPan.disable(),f=r(e.originalEvent,t.container),g=!0}),this.on("drag",function(){return g},function(e){d=!0,t.ui.queueMapClasses({mouse:c.cursors.ADD}),p||(p=document.createElement("div"),p.classList.add(c.classes.BOX_SELECT),t.container.appendChild(p));var n=r(e.originalEvent,t.container),i=Math.min(f.x,n.x),o=Math.max(f.x,n.x),a=Math.min(f.y,n.y),s=Math.max(f.y,n.y),u="translate("+i+"px, "+a+"px)";p.style.transform=u,p.style.WebkitTransform=u,p.style.width=o-i+"px",p.style.height=s-a+"px"}))},render:function(e,n){e.properties.active=t.store.isSelected(e.properties.id)?c.activeStates.ACTIVE:c.activeStates.INACTIVE,n(e),_(),e.properties.active===c.activeStates.ACTIVE&&e.geometry.type!==c.geojsonTypes.POINT&&a(e).forEach(n)},trash:function(){t.store.delete(t.store.getSelectedIds()),_()},combineFeatures:function(){var e=t.store.getSelected();if(!(0===e.length||e.length<2)){for(var n=[],i=[],r=e[0].type.replace("Multi",""),o=0;o<e.length;o++){var a=e[o];if(a.type.replace("Multi","")!==r)return;a.type.includes("Multi")?a.getCoordinates().forEach(function(t){n.push(t)}):n.push(a.getCoordinates()),i.push(a.toGeoJSON())}if(i.length>1){var s=new h(t,{type:c.geojsonTypes.FEATURE,properties:i[0].properties,geometry:{type:"Multi"+r,coordinates:n}});t.store.add(s),t.store.delete(t.store.getSelectedIds(),{silent:!0}),t.store.setSelected([s.id]),t.map.fire(c.events.COMBINE_FEATURES,{createdFeatures:[s.toGeoJSON()],deletedFeatures:i})}_()}},uncombineFeatures:function(){var e=t.store.getSelected();if(0!==e.length){for(var n=[],i=[],r=function(r){var o=e[r];o instanceof h&&(o.getFeatures().forEach(function(e){t.store.add(e),e.properties=o.properties,n.push(e.toGeoJSON()),t.store.select([e.id])}),t.store.delete(o.id,{silent:!0}),i.push(o.toGeoJSON()))},o=0;o<e.length;o++)r(o);n.length>1&&t.map.fire(c.events.UNCOMBINE_FEATURES,{createdFeatures:n,deletedFeatures:i}),_()}}}}},{"../constants":24,"../feature_types/multi_feature":28,"../lib/common_selectors":31,"../lib/create_supplementary_points":34,"../lib/double_click_zoom":36,"../lib/features_at":38,"../lib/mouse_event_point":44,"../lib/move_features":45,"../lib/string_set":47}],57:[function(t,e,n){"use strict";e.exports=function(t){return{stop:function(){},start:function(){t.events.actionable({combineFeatures:!1,uncombineFeatures:!1,trash:!1})},render:function(t,e){e(t)}}}},{}],58:[function(t,e,n){"use strict";function i(t,e){return t.map(function(t){return t.source?t:r(t,{id:t.id+"."+e,source:"hot"===e?o.sources.HOT:o.sources.COLD})})}var r=t("xtend"),o=t("./constants"),a={defaultMode:o.modes.SIMPLE_SELECT,keybindings:!0,clickBuffer:2,boxSelect:!0,displayControlsDefault:!0,styles:t("./lib/theme"),controls:{},userProperties:!1},s={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},u={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};e.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r(t);return t.controls||(e.controls={}),t.displayControlsDefault===!1?e.controls=r(u,t.controls):e.controls=r(s,t.controls),e=r(a,e),e.styles=i(e.styles,"cold").concat(i(e.styles,"hot")),e}},{"./constants":24,"./lib/theme":49,xtend:22}],59:[function(t,e,n){"use strict";var i=t("./constants");e.exports=function(){function t(t,e){var i=n.get(t),r=i.internal(o);n.ctx.events.currentModeRender(r,function(t){n.sources[e].push(t)})}function e(){n.isDirty=!1,n.clearChangedIds()}var n=this,r=n.ctx.map&&void 0!==n.ctx.map.getSource(i.sources.HOT);if(!r)return e();var o=n.ctx.events.currentModeName();n.ctx.ui.queueMapClasses({mode:o});var a=[],s=[];n.isDirty?s=n.getAllIds():(a=n.getChangedIds().filter(function(t){return void 0!==n.get(t)}),s=n.sources.hot.filter(function(t){return t.properties.id&&a.indexOf(t.properties.id)===-1&&void 0!==n.get(t.properties.id)}).map(function(t){return t.properties.id})),n.sources.hot=[];var u=n.sources.cold.length;n.sources.cold=n.isDirty?[]:n.sources.cold.filter(function(t){var e=t.properties.id||t.properties.parent;return a.indexOf(e)===-1});var l=u!==n.sources.cold.length||s.length>0;if(a.forEach(function(e){return t(e,"hot")}),s.forEach(function(e){return t(e,"cold")}),l&&n.ctx.map.getSource(i.sources.COLD).setData({type:i.geojsonTypes.FEATURE_COLLECTION,features:n.sources.cold}),n.ctx.map.getSource(i.sources.HOT).setData({type:i.geojsonTypes.FEATURE_COLLECTION,features:n.sources.hot}),n._emitSelectionChange&&(n.ctx.map.fire(i.events.SELECTION_CHANGE,{features:n.getSelected().map(function(t){return t.toGeoJSON();
})}),n._emitSelectionChange=!1),n._deletedFeaturesToEmit.length){var c=n._deletedFeaturesToEmit.map(function(t){return t.toGeoJSON()});n._deletedFeaturesToEmit=[],n.ctx.map.fire(i.events.DELETE,{features:c})}n.ctx.map.fire(i.events.RENDER,{}),e()}},{"./constants":24}],60:[function(t,e,n){"use strict";var i=t("./events"),r=t("./store"),o=t("./ui"),a=t("./constants");e.exports=function(t){t.events=i(t),t.map=null,t.container=null,t.store=null,t.ui=o(t);var e=null,n={onRemove:function(){return n.removeLayers(),t.ui.removeButtons(),t.events.removeEventListeners(),t.map=null,t.container=null,t.store=null,e&&e.parentNode&&e.parentNode.removeChild(e),e=null,this},onAdd:function(i){t.map=i,t.container=i.getContainer(),t.store=new r(t),e=t.ui.addButtons(),t.options.boxSelect&&(i.boxZoom.disable(),i.dragPan.disable(),i.dragPan.enable());var o=null,a=function e(){i.off("load",e),clearInterval(o),n.addLayers(),t.events.addEventListeners()};return i.loaded()?a():(i.on("load",a),o=setInterval(function(){i.loaded()&&a()},16)),e},addLayers:function(){t.map.addSource(a.sources.COLD,{data:{type:a.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.map.addSource(a.sources.HOT,{data:{type:a.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.options.styles.forEach(function(e){t.map.addLayer(e)}),t.store.render()},removeLayers:function(){t.options.styles.forEach(function(e){t.map.removeLayer(e.id)}),t.map.removeSource(a.sources.COLD),t.map.removeSource(a.sources.HOT)}};return t.setup=n,n}},{"./constants":24,"./events":25,"./store":61,"./ui":62}],61:[function(t,e,n){"use strict";var i=t("./lib/throttle"),r=t("./lib/to_dense_array"),o=t("./lib/string_set"),a=t("./render"),s=e.exports=function(t){this._features={},this._featureIds=new o,this._selectedFeatureIds=new o,this._changedFeatureIds=new o,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this.ctx=t,this.sources={hot:[],cold:[]},this.render=i(a,16,this),this.isDirty=!1};s.prototype.createRenderBatch=function(){var t=this,e=this.render,n=0;return this.render=function(){n++},function(){t.render=e,n>0&&t.render()}},s.prototype.setDirty=function(){return this.isDirty=!0,this},s.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},s.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},s.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},s.prototype.getAllIds=function(){return this._featureIds.values()},s.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},s.prototype.delete=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(t).forEach(function(t){e._featureIds.has(t)&&(e._featureIds.delete(t),e._selectedFeatureIds.delete(t),n.silent||e._deletedFeaturesToEmit.indexOf(e._features[t])===-1&&e._deletedFeaturesToEmit.push(e._features[t]),delete e._features[t],e.isDirty=!0)}),this},s.prototype.get=function(t){return this._features[t]},s.prototype.getAll=function(){var t=this;return Object.keys(this._features).map(function(e){return t._features[e]})},s.prototype.select=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(t).forEach(function(t){e._selectedFeatureIds.has(t)||(e._selectedFeatureIds.add(t),e._changedFeatureIds.add(t),n.silent||(e._emitSelectionChange=!0))}),this},s.prototype.deselect=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(t).forEach(function(t){e._selectedFeatureIds.has(t)&&(e._selectedFeatureIds.delete(t),e._changedFeatureIds.add(t),n.silent||(e._emitSelectionChange=!0))}),this},s.prototype.clearSelected=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},s.prototype.setSelected=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=r(t),this.deselect(this._selectedFeatureIds.values().filter(function(e){return t.indexOf(e)===-1}),{silent:n.silent}),this.select(t.filter(function(t){return!e._selectedFeatureIds.has(t)}),{silent:n.silent}),this},s.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},s.prototype.getSelected=function(){var t=this;return this._selectedFeatureIds.values().map(function(e){return t.get(e)})},s.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},s.prototype.setFeatureProperty=function(t,e,n){this.get(t).setProperty(e,n),this.featureChanged(t)}},{"./lib/string_set":47,"./lib/throttle":50,"./lib/to_dense_array":51,"./render":59}],62:[function(t,e,n){"use strict";var i=t("xtend"),r=t("./constants"),o=["mode","feature","mouse"];e.exports=function(t){function e(t){d=i(d,t)}function n(){if(t.container){var e=[],n=[];o.forEach(function(t){d[t]!==p[t]&&(e.push(t+"-"+p[t]),null!==d[t]&&n.push(t+"-"+d[t]))}),e.length>0&&t.container.classList.remove.apply(t.container.classList,e),n.length>0&&t.container.classList.add.apply(t.container.classList,n),p=i(p,d)}}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement("button");return n.className=r.classes.CONTROL_BUTTON+" "+e.className,n.setAttribute("title",e.title),e.container.appendChild(n),n.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();var i=n.target;return i===f?void s():(u(t),void e.onActivate())},!0),n}function s(){f&&(f.classList.remove(r.classes.ACTIVE_BUTTON),f=null)}function u(t){s();var e=h[t];e&&e&&"trash"!==t&&(e.classList.add(r.classes.ACTIVE_BUTTON),f=e)}function l(){var e=t.options.controls,n=document.createElement("div");return n.className=r.classes.CONTROL_GROUP+" "+r.classes.CONTROL_BASE,e?(e[r.types.LINE]&&(h[r.types.LINE]=a(r.types.LINE,{container:n,className:r.classes.CONTROL_BUTTON_LINE,title:"LineString tool "+(t.options.keybindings&&"(l)"),onActivate:function(){return t.events.changeMode(r.modes.DRAW_LINE_STRING)}})),e[r.types.POLYGON]&&(h[r.types.POLYGON]=a(r.types.POLYGON,{container:n,className:r.classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(t.options.keybindings&&"(p)"),onActivate:function(){return t.events.changeMode(r.modes.DRAW_POLYGON)}})),e[r.types.POINT]&&(h[r.types.POINT]=a(r.types.POINT,{container:n,className:r.classes.CONTROL_BUTTON_POINT,title:"Marker tool "+(t.options.keybindings&&"(m)"),onActivate:function(){return t.events.changeMode(r.modes.DRAW_POINT)}})),e.trash&&(h.trash=a("trash",{container:n,className:r.classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){t.events.trash()}})),e.combine_features&&(h.combine_features=a("combineFeatures",{container:n,className:r.classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){t.events.combineFeatures()}})),e.uncombine_features&&(h.uncombine_features=a("uncombineFeatures",{container:n,className:r.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){t.events.uncombineFeatures()}})),n):n}function c(){Object.keys(h).forEach(function(t){var e=h[t];e.parentNode&&e.parentNode.removeChild(e),delete h[t]})}var h={},f=null,p={mode:null,feature:null,mouse:null},d={mode:null,feature:null,mouse:null};return{setActiveButton:u,queueMapClasses:e,updateMapClasses:n,addButtons:l,removeButtons:c}}},{"./constants":24,xtend:22}]},{},[1])(1)})},function(t,e,n){"use strict";var i=(n(1),n(689)),r={getDefaultForestAlertState:function(){return{enableGLAD2017:!1,result:null}},toggleForestAlerts:function(t){var e;e=this.state.forestAlerts?JSON.parse(JSON.stringify(this.state.forestAlerts)):this.getDefaultForestAlertState(),!e.enableGLAD2017&&t.enableGLAD2017?(this.addGLADLayer(),e.enableGLAD2017=t.enableGLAD2017,this.setState({forestAlerts:e})):e.enableGLAD2017&&!t.enableGLAD2017&&(this.removeGLADLayer(),e.enableGLAD2017=t.enableGLAD2017,e.result=null,this.setState({forestAlerts:e}))},restoreForestAlerts:function(){this.state.forestAlerts.enableGLAD2017&&this.addGLADLayer()},calculateForestAlerts:function(){if(this.state.forestAlerts.enableGLAD2017){var t=this.map.queryRenderedFeatures({layers:["omh-glad-2017-polygon"]}),e=t.length,n=i({type:"FeatureCollection",features:t}),r=Math.round(100*n)/100,o=1e-6*n,a=r/1e4,s="";s=r<1e3?s+r.toLocaleString()+"m2 ":s+o.toLocaleString()+"km2 ",s=s+a.toLocaleString()+"ha";var u=JSON.parse(JSON.stringify(this.state.forestAlerts));u.result={alertCount:e,areaMessage:s},this.setState({forestAlerts:u})}},addGLADLayer:function(){this.map.addSource("omh-glad-2017",{type:"vector",url:"https://s3.amazonaws.com/maphubs-forest-alerts/glad/2017.json"}),this.map.addLayer({id:"omh-glad-2017-point",type:"circle",maxzoom:13,metadata:{"maphubs:interactive":!1,"maphubs:showBehindBaseMapLabels":!1},source:"omh-glad-2017",paint:{"circle-color":"red","circle-opacity":.5},"source-layer":"data"}),this.map.addLayer({id:"omh-glad-2017-polygon",type:"fill",maxzoom:22,metadata:{"maphubs:interactive":!1,"maphubs:showBehindBaseMapLabels":!1},source:"omh-glad-2017",filter:["in","$type","Polygon"],paint:{"fill-color":"red","fill-outline-color":"red","fill-opacity":.5},"source-layer":"data",layout:{visibility:"visible"}}),this.map.addLayer({id:"omh-glad-2017-outline-polygon",type:"line",maxzoom:22,source:"omh-glad-2017",filter:["in","$type","Polygon"],paint:{"line-color":"#222222","line-opacity":.8,"line-width":{base:.5,stops:[[3,.1],[4,.2],[5,.3],[6,.4],[7,.5],[8,.6],[9,.7],[10,.8]]}},"source-layer":"data",layout:{visibility:"visible"}})},removeGLADLayer:function(){this.map.removeLayer("omh-glad-2017-outline-polygon"),this.map.removeLayer("omh-glad-2017-polygon"),this.map.removeLayer("omh-glad-2017-point"),this.map.removeSource("omh-glad-2017")}};t.exports=r},function(t,e,n){"use strict";var i=n(201)("MapGeoJSONMixin"),r=n(696),o={};"undefined"!=typeof window&&(o=n(684));var a=n(699),s={initGeoJSON:function(t,e){if(e&&e.features&&e.features.length>0){t.addSource("omh-geojson",{type:"geojson",data:e});var n=r.defaultStyle("geojson",null,null);n.sources["omh-geojson"]={type:"geojson",data:{}},this.addLayers(t,n);var o=this.getInteractiveLayers(n);this.setState({interactiveLayers:o,glStyle:n}),this.zoomToData(e)}else i("("+this.state.id+") Empty/Missing GeoJSON Data")},resetGeoJSON:function(){var t=this.map.getSource("omh-geojson");t.setData({type:"FeatureCollection",features:[]}),this.map.flyTo({center:[0,0],zoom:0})},zoomToData:function(t){var e;if(e=t.bbox&&t.bbox.length>0?t.bbox:a(t)){var n=e[0];n<-175&&(n=-175);var i=e[1];i<-85&&(i=-85);var r=e[2];r>175&&(r=175);var s=e[3];s>85&&(s=85);var u=new o.LngLat(n,i),l=new o.LngLat(r,s),c=new o.LngLatBounds(u,l);this.map.fitBounds(c,{padding:25,curve:3,speed:.6,maxZoom:12})}}};t.exports=s},function(t,e,n){"use strict";var i=n(201)("map-styles"),r=n(697),o=n(698);t.exports={enableMarkers:function(t,e,n){return t.layers&&Array.isArray(t.layers)&&t.layers.length>0&&t.layers.forEach(function(t){if(t.id.startsWith("omh-data-point"))t.metadata||(t.metadata={}),t.metadata["maphubs:markers"]=e,t.metadata["maphubs:markers"].enabled=!0,t.metadata["maphubs:markers"].dataUrl="{MAPHUBS_DOMAIN}/api/layer/"+n+"/export/json/"+n+".json",t.metadata["maphubs:layer_id"]=n,t.metadata["maphubs:interactive"]&&(t.metadata["maphubs:markers"].interactive=!0),t.metadata["maphubs:interactive"]=!1;else if(t.id.startsWith("omh-label")){var i=t.layout["text-size"].base/2+t.paint["text-halo-width"];"MAP_PIN"===e.shape||"SQUARE_PIN"===e.shape?t.paint["text-translate"][1]=i:i+=e.height/2}else t.layout||(t.layout={}),t.layout.visibility="none"}),t},disableMarkers:function(t){return t.layers&&Array.isArray(t.layers)&&t.layers.length>0&&t.layers.forEach(function(t){t.id.startsWith("omh-data-point")?(t.metadata["maphubs:markers"].enabled=!1,t.metadata["maphubs:markers"].interactive&&(t.metadata["maphubs:interactive"]=!0)):t.id.startsWith("omh-label")?t.paint["text-translate"][1]=0-t.layout["text-size"].base:(t.layout||(t.layout={}),t.layout.visibility="visible")}),t},updateStyleColor:function(t,e){return t.layers&&Array.isArray(t.layers)&&t.layers.length>0&&t.layers.forEach(function(t){t.id.startsWith("omh-data-point")?("circle"==t.type?t.paint["circle-color"]=e:i("unable to update point layer type: "+t.type),t.metadata["maphubs:markers"]&&(t.metadata["maphubs:markers"].shapeFill=e)):t.id.startsWith("omh-data-line")?"line"==t.type?t.paint["line-color"]=e:i("unable to update line layer type: "+t.type):t.id.startsWith("omh-data-polygon")?"fill"==t.type?(t.paint["fill-color"]=e,t.paint["fill-outline-color"]=e,t.paint["fill-opacity"]=1):i("unable to update polygon layer type: "+t.type):t.id.startsWith("omh-data-doublestroke-polygon")?"line"==t.type?t.paint["line-color"]=e:i("unable to update line layer type: "+t.type):t.id.startsWith("osm")&&t.id.endsWith("-polygon")?"fill"==t.type?t.paint["fill-color"]=e:i("unable to update osm polygon layer type: "+t.type):t.id.startsWith("osm")&&t.id.endsWith("-line")?"line"==t.type?t.paint["line-color"]=e:i("unable to update osm line layer type: "+t.type):"osm-buildings-polygon"==t.id&&("fill"==t.type?t.paint["fill-color"]=e:i("unable to update osm building layer type: "+t.type))}),t},removeStyleLabels:function(t){return t.layers&&Array.isArray(t.layers)&&t.layers.length>0&&r(t.layers,function(t){return t.id.startsWith("omh-label")}),t},addStyleLabels:function(t,e,n,i){if(t=this.removeStyleLabels(t),t.layers&&Array.isArray(t.layers)&&t.layers.length>0){var r="data",o=["in","$type","Point"],a="point",s=[0,0];"point"==i?(s=[0,-14],t.layers.forEach(function(t){if(t.id.startsWith("omh-data-point")&&t.metadata&&t.metadata["maphubs:markers"]&&t.metadata["maphubs:markers"].enabled){var e=t.metadata["maphubs:markers"],n=9;"MAP_PIN"!==e.shape&&"SQUARE_PIN"!==e.shape&&(n+=e.height/2),s=[0,n]}})):"line"==i?(a="line",o=["in","$type","LineString"]):"polygon"==i&&(r="data-centroids"),t.layers.push({id:"omh-label-"+n,type:"symbol",source:"omh-"+n,"source-layer":r,filter:o,layout:{"text-font":["Arial Unicode MS Regular"],visibility:"visible","symbol-placement":a,"text-field":"{"+e+"}","text-size":{base:14,stops:[[13,14],[18,14]]}},paint:{"text-color":"#000","text-halo-color":"#FFF","text-halo-width":2,"text-translate":s}})}return t},getPointLayers:function(t,e,n,i,r){var o=[{id:"omh-data-point-"+t,type:"circle",metadata:{"maphubs:layer_id":t,"maphubs:interactive":i,"maphubs:showBehindBaseMapLabels":r},source:"omh-"+t,filter:["in","$type","Point"],paint:{"circle-color":e,"circle-opacity":.5}},{id:"omh-hover-point-"+t,type:"circle",metadata:{"maphubs:layer_id":t},source:"omh-"+t,filter:["==","mhid",""],paint:{"circle-radius":15,"circle-color":n,"circle-opacity":.5},"paint.selected":{"circle-radius":15,"circle-color":n,"circle-opacity":.5}}];return"geojson"!==t&&o.forEach(function(t){t["source-layer"]="data"}),o},getLineLayers:function(t,e,n,i,r){var o=[{id:"omh-data-line-"+t,type:"line",metadata:{"maphubs:layer_id":t,"maphubs:interactive":i,"maphubs:showBehindBaseMapLabels":r},source:"omh-"+t,filter:["in","$type","LineString"],paint:{"line-color":e,"line-opacity":.5,"line-width":2}},{id:"omh-hover-line-"+t,type:"line",metadata:{"maphubs:layer_id":t},source:"omh-"+t,filter:["==","mhid",""],paint:{"line-color":n,"line-opacity":.3,"line-width":1},"paint.selected":{"line-color":n,"line-opacity":.3,"line-width":1}}];return"geojson"!==t&&o.forEach(function(t){t["source-layer"]="data"}),o},getPolygonLayers:function(t,e,n,i,r,o){var a=[{id:"omh-data-polygon-"+t,type:"fill",metadata:{"maphubs:layer_id":t,"maphubs:interactive":r,"maphubs:showBehindBaseMapLabels":o},source:"omh-"+t,filter:["in","$type","Polygon"],paint:{"fill-color":e,"fill-outline-color":e,"fill-opacity":.5}},{id:"omh-data-doublestroke-polygon-"+t,type:"line",metadata:{"maphubs:layer_id":t},source:"omh-"+t,filter:["in","$type","Polygon"],paint:{"line-color":e,"line-opacity":.3,"line-width":{base:.5,stops:[[5,1],[6,2],[7,3],[8,4],[9,5],[10,6]]},"line-offset":{base:.5,stops:[[5,.5],[6,1],[7,1.5],[8,2],[9,2.5],[10,3]]}}},{id:"omh-data-outline-polygon-"+t,type:"line",metadata:{"maphubs:layer_id":t},source:"omh-"+t,filter:["in","$type","Polygon"],paint:{"line-color":"#222222","line-opacity":.8,"line-width":{base:.5,stops:[[3,.1],[4,.2],[5,.3],[6,.4],[7,.5],[8,.6],[9,.7],[10,.8]]}}},{id:"omh-hover-polygon-"+t,type:"fill",metadata:{"maphubs:layer_id":t},source:"omh-"+t,filter:["==","mhid",""],paint:{"fill-color":n,"fill-outline-color":i,"fill-opacity":.7},"paint.selected":{"fill-color":n,"fill-outline-color":i,"fill-opacity":.7}}];return"geojson"!==t&&a.forEach(function(t){t["source-layer"]="data"}),a},styleWithColor:function(t,e,n,i,r,o){var a="yellow",s="black",u=[];u="point"===i?this.getPointLayers(t,n,a,r,o):"point"===i?this.getLineLayers(t,n,a,r,o):"polygon"===i?this.getPolygonLayers(t,n,a,s,r,o):this.getPointLayers(t,n,a,r,o).concat(this.getLineLayers(t,n,a,r,o)).concat(this.getPolygonLayers(t,n,a,s,r,o));var l={sources:{},layers:u};if(e)if("vector"===e.type){var c="{MAPHUBS_DOMAIN}/api/layer/"+t+"/tile.json";l.sources["omh-"+t]={type:"vector",url:c}}else"ags-mapserver-query"===e.type||"ags-featureserver-query"===e.type?l.sources["omh-"+t]={type:e.type,url:e.url}:"ags-mapserver-tiles"===e.type?l.sources["omh-"+t]={type:"arcgisraster",url:e.url+"?f=json"}:"geojson"===e.type&&(l.sources["omh-"+t]={type:"geojson",data:e.data},l.layers.map(function(t){delete t["source-layer"]}));return l},rasterStyleWithOpacity:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"raster";n/=100;var r={sources:{},layers:[{id:"omh-raster-"+t,type:"raster",source:"omh-"+t,minzoom:0,maxzoom:18,paint:{"raster-opacity":n}}]};return r.sources["omh-"+t]={type:i,url:e,tileSize:256},r},multiRasterStyleWithOpacity:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"raster";n/=100;var r={sources:{},layers:[]};return e.forEach(function(e,o){var a="omh-raster-"+o+"-"+t;r.layers.push({id:a,type:"raster",source:a,minzoom:0,maxzoom:18,paint:{"raster-opacity":n}}),r.sources[a]={type:i,tiles:e.tiles,tileSize:256}}),r},defaultRasterStyle:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"raster";return this.rasterStyleWithOpacity(t,e,100,n)},defaultMultiRasterStyle:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"raster";return this.multiRasterStyleWithOpacity(t,e,100,n)},htmlEncode:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},legendWithColor:function(t,e){var n="",i=this.htmlEncode(t.name);return n="point"==t.data_type?'<div class="omh-legend">\n <div class="point double-stroke" style="background-color: '+e+'">\n </div>\n <h3>'+i+"</h3>\n </div>\n":"line"==t.data_type?'<div class="omh-legend">\n<div class="block double-stroke" style="height:  4px; background-color: '+e+'">\n</div>\n<h3>'+i+"</h3>\n</div>":"polygon"==t.data_type?'<div class="omh-legend">\n <div class="block double-stroke" style="background-color: '+e+'">\n </div>\n <h3>'+i+"</h3>\n </div>\n":'<div class="omh-legend">\n <div class="block double-stroke" style="background-color: '+e+'">\n </div>\n <h3>'+i+"</h3>\n </div>\n"},defaultLegend:function(t){return this.legendWithColor(t,"red")},defaultSettings:function(){return{active:!0,interactive:!0,showBehindBaseMapLabels:!1}},rasterLegend:function(t){var e=this.htmlEncode(t.name),n='<div class="omh-legend">\n<h3>'+e+"</h3>\n</div>";return n},defaultStyle:function(t,e,n){var i=this.defaultSettings();return this.styleWithColor(t,e,"red",n,i.interactive,i.showBehindBaseMapLabels)},toggleInteractive:function(t,e,n,i){var r="omh-data-"+i+"-"+n,a=o(e.layers,{id:r}),s=e.layers[a];return s.metadata||(s.metadata={}),s.metadata["maphubs:interactive"]=t,e},toggleShowBehindBaseMapLabels:function(t,e){return e.layers.map(function(e){e.metadata||(e.metadata={}),e.metadata["maphubs:showBehindBaseMapLabels"]=t}),e},getMapboxStyle:function(t){var e={sources:{},layers:[{id:"mapbox-style-placeholder",type:"mapbox-style-placeholder"}]};return e.sources[t]={type:"mapbox-style",mapboxid:t},e}}},function(t,e,n){(function(t,n){function i(t,e){for(var n=-1,i=t?t.length:0;++n<i;)if(e(t[n],n,t))return!0;return!1}function r(t){return function(e){return null==e?void 0:e[t]}}function o(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function a(t){return function(e){return t(e)}}function s(t,e){return null==t?void 0:t[e]}function u(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function l(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function c(t,e){return function(n){return t(e(n))}}function h(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function f(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function p(){this.__data__=nn?nn(null):{}}function d(t){return this.has(t)&&delete this.__data__[t]}function g(t){var e=this.__data__;if(nn){var n=e[t];return n===Gt?void 0:n}return Ve.call(e,t)?e[t]:void 0}function m(t){var e=this.__data__;return nn?void 0!==e[t]:Ve.call(e,t)}function y(t,e){var n=this.__data__;return n[t]=nn&&void 0===e?Gt:e,this}function v(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function b(){this.__data__=[]}function _(t){var e=this.__data__,n=B(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():Ye.call(e,n,1),!0}function x(t){var e=this.__data__,n=B(e,t);return n<0?void 0:e[n][1]}function w(t){return B(this.__data__,t)>-1}function E(t,e){var n=this.__data__,i=B(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function S(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function M(){this.__data__={hash:new f,map:new(Ze||v),string:new f}}function T(t){return st(this,t).delete(t)}function C(t){return st(this,t).get(t)}function I(t){return st(this,t).has(t)}function N(t,e){return st(this,t).set(t,e),this}function P(t){var e=-1,n=t?t.length:0;for(this.__data__=new S;++e<n;)this.add(t[e])}function L(t){return this.__data__.set(t,Gt),this}function A(t){return this.__data__.has(t)}function k(t){this.__data__=new v(t)}function R(){this.__data__=new v}function O(t){return this.__data__.delete(t)}function D(t){return this.__data__.get(t)}function F(t){return this.__data__.has(t)}function z(t,e){var n=this.__data__;if(n instanceof v){var i=n.__data__;if(!Ze||i.length<jt-1)return i.push([t,e]),this;n=this.__data__=new S(i)}return n.set(t,e),this}function j(t,e){var n=dn(t)||Mt(t)?o(t.length,String):[],i=n.length,r=!!i;for(var a in t)!e&&!Ve.call(t,a)||r&&("length"==a||ht(a,i))||n.push(a);return n}function B(t,e){for(var n=t.length;n--;)if(St(t[n][0],e))return n;return-1}function G(t,e){e=ft(e,t)?[e]:it(e);for(var n=0,i=e.length;null!=t&&n<i;)t=t[bt(e[n++])];return n&&n==i?t:void 0}function U(t){return Ke.call(t)}function V(t,e){return null!=t&&e in Object(t)}function K(t,e,n,i,r){return t===e||(null==t||null==e||!Pt(t)&&!Lt(e)?t!==t&&e!==e:H(t,e,K,n,i,r))}function H(t,e,n,i,r,o){var a=dn(t),s=dn(e),l=Xt,c=Xt;a||(l=fn(t),l=l==qt?ee:l),s||(c=fn(e),c=c==qt?ee:c);var h=l==ee&&!u(t),f=c==ee&&!u(e),p=l==c;if(p&&!h)return o||(o=new k),a||gn(t)?rt(t,e,n,i,r,o):ot(t,e,l,n,i,r,o);if(!(r&Vt)){var d=h&&Ve.call(t,"__wrapped__"),g=f&&Ve.call(e,"__wrapped__");if(d||g){var m=d?t.value():t,y=g?e.value():e;return o||(o=new k),n(m,y,i,r,o)}}return!!p&&(o||(o=new k),at(t,e,n,i,r,o))}function q(t,e,n,i){var r=n.length,o=r,a=!i;if(null==t)return!o;for(t=Object(t);r--;){var s=n[r];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<o;){s=n[r];var u=s[0],l=t[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in t))return!1}else{var h=new k;if(i)var f=i(l,c,u,t,e,h);if(!(void 0===f?K(c,l,i,Ut|Vt,h):f))return!1}}return!0}function X(t){if(!Pt(t)||dt(t))return!1;var e=It(t)||u(t)?He:Me;return e.test(_t(t))}function W(t){return Lt(t)&&Nt(t.length)&&!!Ce[Ke.call(t)]}function Y(t){return"function"==typeof t?t:null==t?Ft:"object"==typeof t?dn(t)?Z(t[0],t[1]):$(t):zt(t)}function J(t){if(!gt(t))return Je(t);var e=[];for(var n in Object(t))Ve.call(t,n)&&"constructor"!=n&&e.push(n);return e}function $(t){var e=ut(t);return 1==e.length&&e[0][2]?yt(e[0][0],e[0][1]):function(n){return n===t||q(n,t,e)}}function Z(t,e){return ft(t)&&mt(e)?yt(bt(t),e):function(n){var i=Rt(n,t);return void 0===i&&i===e?Ot(n,t):K(e,i,void 0,Ut|Vt)}}function Q(t){return function(e){return G(e,t)}}function tt(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;if(ht(r))Ye.call(t,r,1);else if(ft(r,t))delete t[bt(r)];else{var a=it(r),s=vt(t,a);null!=s&&delete s[bt(xt(a))]}}}return t}function et(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+e];return o}function nt(t){if("string"==typeof t)return t;if(At(t))return hn?hn.call(t):"";var e=t+"";return"0"==e&&1/t==-Kt?"-0":e}function it(t){return dn(t)?t:pn(t)}function rt(t,e,n,r,o,a){var s=o&Vt,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t);if(c&&a.get(e))return c==e;var h=-1,f=!0,p=o&Ut?new P:void 0;for(a.set(t,e),a.set(e,t);++h<u;){var d=t[h],g=e[h];if(r)var m=s?r(g,d,h,e,t,a):r(d,g,h,t,e,a);if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!i(e,function(t,e){if(!p.has(e)&&(d===t||n(d,t,r,o,a)))return p.add(e)})){f=!1;break}}else if(d!==g&&!n(d,g,r,o,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function ot(t,e,n,i,r,o,a){switch(n){case le:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ue:return!(t.byteLength!=e.byteLength||!i(new Xe(t),new Xe(e)));case Wt:case Yt:case te:return St(+t,+e);case Jt:return t.name==e.name&&t.message==e.message;case ie:case oe:return t==e+"";case Qt:var s=l;case re:var u=o&Vt;if(s||(s=h),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;o|=Ut,a.set(t,e);var f=rt(s(t),s(e),i,r,o,a);return a.delete(t),f;case ae:if(cn)return cn.call(t)==cn.call(e)}return!1}function at(t,e,n,i,r,o){var a=r&Vt,s=Dt(t),u=s.length,l=Dt(e),c=l.length;if(u!=c&&!a)return!1;for(var h=u;h--;){var f=s[h];if(!(a?f in e:Ve.call(e,f)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var d=!0;o.set(t,e),o.set(e,t);for(var g=a;++h<u;){f=s[h];var m=t[f],y=e[f];if(i)var v=a?i(y,m,f,e,t,o):i(m,y,f,t,e,o);if(!(void 0===v?m===y||n(m,y,i,r,o):v)){d=!1;break}g||(g="constructor"==f)}if(d&&!g){var b=t.constructor,_=e.constructor;b!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return o.delete(t),o.delete(e),d}function st(t,e){var n=t.__data__;return pt(e)?n["string"==typeof e?"string":"hash"]:n.map}function ut(t){for(var e=Dt(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,mt(r)]}return e}function lt(t,e){var n=s(t,e);return X(n)?n:void 0}function ct(t,e,n){e=ft(e,t)?[e]:it(e);for(var i,r=-1,o=e.length;++r<o;){var a=bt(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}if(i)return i;var o=t?t.length:0;return!!o&&Nt(o)&&ht(a,o)&&(dn(t)||Mt(t))}function ht(t,e){return e=null==e?Ht:e,!!e&&("number"==typeof t||Te.test(t))&&t>-1&&t%1==0&&t<e}function ft(t,e){if(dn(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!At(t))||(_e.test(t)||!be.test(t)||null!=e&&t in Object(e))}function pt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function dt(t){return!!Ge&&Ge in t}function gt(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||je;return t===n}function mt(t){return t===t&&!Pt(t)}function yt(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function vt(t,e){return 1==e.length?t:G(t,et(e,0,-1))}function bt(t){if("string"==typeof t||At(t))return t;var e=t+"";return"0"==e&&1/t==-Kt?"-0":e}function _t(t){if(null!=t){try{return Ue.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function xt(t){var e=t?t.length:0;return e?t[e-1]:void 0}function wt(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Y(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return tt(t,r),n}function Et(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(Bt);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a),a};return n.cache=new(Et.Cache||S),n}function St(t,e){return t===e||t!==t&&e!==e}function Mt(t){return Ct(t)&&Ve.call(t,"callee")&&(!We.call(t,"callee")||Ke.call(t)==qt)}function Tt(t){return null!=t&&Nt(t.length)&&!It(t)}function Ct(t){return Lt(t)&&Tt(t)}function It(t){var e=Pt(t)?Ke.call(t):"";return e==$t||e==Zt}function Nt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ht}function Pt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Lt(t){return!!t&&"object"==typeof t}function At(t){return"symbol"==typeof t||Lt(t)&&Ke.call(t)==ae}function kt(t){return null==t?"":nt(t)}function Rt(t,e,n){var i=null==t?void 0:G(t,e);return void 0===i?n:i}function Ot(t,e){return null!=t&&ct(t,e,V)}function Dt(t){return Tt(t)?j(t):J(t)}function Ft(t){return t}function zt(t){return ft(t)?r(bt(t)):Q(t)}var jt=200,Bt="Expected a function",Gt="__lodash_hash_undefined__",Ut=1,Vt=2,Kt=1/0,Ht=9007199254740991,qt="[object Arguments]",Xt="[object Array]",Wt="[object Boolean]",Yt="[object Date]",Jt="[object Error]",$t="[object Function]",Zt="[object GeneratorFunction]",Qt="[object Map]",te="[object Number]",ee="[object Object]",ne="[object Promise]",ie="[object RegExp]",re="[object Set]",oe="[object String]",ae="[object Symbol]",se="[object WeakMap]",ue="[object ArrayBuffer]",le="[object DataView]",ce="[object Float32Array]",he="[object Float64Array]",fe="[object Int8Array]",pe="[object Int16Array]",de="[object Int32Array]",ge="[object Uint8Array]",me="[object Uint8ClampedArray]",ye="[object Uint16Array]",ve="[object Uint32Array]",be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_e=/^\w*$/,xe=/^\./,we=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ee=/[\\^$.*+?()[\]{}|]/g,Se=/\\(\\)?/g,Me=/^\[object .+?Constructor\]$/,Te=/^(?:0|[1-9]\d*)$/,Ce={};Ce[ce]=Ce[he]=Ce[fe]=Ce[pe]=Ce[de]=Ce[ge]=Ce[me]=Ce[ye]=Ce[ve]=!0,Ce[qt]=Ce[Xt]=Ce[ue]=Ce[Wt]=Ce[le]=Ce[Yt]=Ce[Jt]=Ce[$t]=Ce[Qt]=Ce[te]=Ce[ee]=Ce[ie]=Ce[re]=Ce[oe]=Ce[se]=!1;var Ie="object"==typeof t&&t&&t.Object===Object&&t,Ne="object"==typeof self&&self&&self.Object===Object&&self,Pe=Ie||Ne||Function("return this")(),Le="object"==typeof e&&e&&!e.nodeType&&e,Ae=Le&&"object"==typeof n&&n&&!n.nodeType&&n,ke=Ae&&Ae.exports===Le,Re=ke&&Ie.process,Oe=function(){try{return Re&&Re.binding("util")}catch(t){}}(),De=Oe&&Oe.isTypedArray,Fe=Array.prototype,ze=Function.prototype,je=Object.prototype,Be=Pe["__core-js_shared__"],Ge=function(){var t=/[^.]+$/.exec(Be&&Be.keys&&Be.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ue=ze.toString,Ve=je.hasOwnProperty,Ke=je.toString,He=RegExp("^"+Ue.call(Ve).replace(Ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=Pe.Symbol,Xe=Pe.Uint8Array,We=je.propertyIsEnumerable,Ye=Fe.splice,Je=c(Object.keys,Object),$e=lt(Pe,"DataView"),Ze=lt(Pe,"Map"),Qe=lt(Pe,"Promise"),tn=lt(Pe,"Set"),en=lt(Pe,"WeakMap"),nn=lt(Object,"create"),rn=_t($e),on=_t(Ze),an=_t(Qe),sn=_t(tn),un=_t(en),ln=qe?qe.prototype:void 0,cn=ln?ln.valueOf:void 0,hn=ln?ln.toString:void 0;f.prototype.clear=p,f.prototype.delete=d,f.prototype.get=g,f.prototype.has=m,f.prototype.set=y,v.prototype.clear=b,v.prototype.delete=_,v.prototype.get=x,v.prototype.has=w,v.prototype.set=E,S.prototype.clear=M,S.prototype.delete=T,S.prototype.get=C,S.prototype.has=I,S.prototype.set=N,P.prototype.add=P.prototype.push=L,P.prototype.has=A,k.prototype.clear=R,k.prototype.delete=O,k.prototype.get=D,k.prototype.has=F,k.prototype.set=z;var fn=U;($e&&fn(new $e(new ArrayBuffer(1)))!=le||Ze&&fn(new Ze)!=Qt||Qe&&fn(Qe.resolve())!=ne||tn&&fn(new tn)!=re||en&&fn(new en)!=se)&&(fn=function(t){var e=Ke.call(t),n=e==ee?t.constructor:void 0,i=n?_t(n):void 0;
if(i)switch(i){case rn:return le;case on:return Qt;case an:return ne;case sn:return re;case un:return se}return e});var pn=Et(function(t){t=kt(t);var e=[];return xe.test(t)&&e.push(""),t.replace(we,function(t,n,i,r){e.push(i?r.replace(Se,"$1"):n||t)}),e});Et.Cache=S;var dn=Array.isArray,gn=De?a(De):W;n.exports=wt}).call(e,function(){return this}(),n(611)(t))},function(t,e,n){(function(t,n){function i(t,e){for(var n=-1,i=t?t.length:0;++n<i;)if(e(t[n],n,t))return!0;return!1}function r(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function o(t){return function(e){return null==e?void 0:e[t]}}function a(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function s(t){return function(e){return t(e)}}function u(t,e){return null==t?void 0:t[e]}function l(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function c(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function h(t,e){return function(n){return t(e(n))}}function f(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function p(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function d(){this.__data__=hn?hn(null):{}}function g(t){return this.has(t)&&delete this.__data__[t]}function m(t){var e=this.__data__;if(hn){var n=e[t];return n===Gt?void 0:n}return Je.call(e,t)?e[t]:void 0}function y(t){var e=this.__data__;return hn?void 0!==e[t]:Je.call(e,t)}function v(t,e){var n=this.__data__;return n[t]=hn&&void 0===e?Gt:e,this}function b(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function _(){this.__data__=[]}function x(t){var e=this.__data__,n=G(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():nn.call(e,n,1),!0}function w(t){var e=this.__data__,n=G(e,t);return n<0?void 0:e[n][1]}function E(t){return G(this.__data__,t)>-1}function S(t,e){var n=this.__data__,i=G(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function M(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function T(){this.__data__={hash:new p,map:new(sn||b),string:new p}}function C(t){return at(this,t).delete(t)}function I(t){return at(this,t).get(t)}function N(t){return at(this,t).has(t)}function P(t,e){return at(this,t).set(t,e),this}function L(t){var e=-1,n=t?t.length:0;for(this.__data__=new M;++e<n;)this.add(t[e])}function A(t){return this.__data__.set(t,Gt),this}function k(t){return this.__data__.has(t)}function R(t){this.__data__=new b(t)}function O(){this.__data__=new b}function D(t){return this.__data__.delete(t)}function F(t){return this.__data__.get(t)}function z(t){return this.__data__.has(t)}function j(t,e){var n=this.__data__;if(n instanceof b){var i=n.__data__;if(!sn||i.length<jt-1)return i.push([t,e]),this;n=this.__data__=new M(i)}return n.set(t,e),this}function B(t,e){var n=wn(t)||wt(t)?a(t.length,String):[],i=n.length,r=!!i;for(var o in t)!e&&!Je.call(t,o)||r&&("length"==o||ct(o,i))||n.push(o);return n}function G(t,e){for(var n=t.length;n--;)if(xt(t[n][0],e))return n;return-1}function U(t,e){e=ht(e,t)?[e]:nt(e);for(var n=0,i=e.length;null!=t&&n<i;)t=t[yt(e[n++])];return n&&n==i?t:void 0}function V(t){return $e.call(t)}function K(t,e){return null!=t&&e in Object(t)}function H(t,e,n,i,r){return t===e||(null==t||null==e||!Ct(t)&&!It(e)?t!==t&&e!==e:q(t,e,H,n,i,r))}function q(t,e,n,i,r,o){var a=wn(t),s=wn(e),u=Yt,c=Yt;a||(u=_n(t),u=u==Wt?ie:u),s||(c=_n(e),c=c==Wt?ie:c);var h=u==ie&&!l(t),f=c==ie&&!l(e),p=u==c;if(p&&!h)return o||(o=new R),a||En(t)?it(t,e,n,i,r,o):rt(t,e,u,n,i,r,o);if(!(r&Vt)){var d=h&&Je.call(t,"__wrapped__"),g=f&&Je.call(e,"__wrapped__");if(d||g){var m=d?t.value():t,y=g?e.value():e;return o||(o=new R),n(m,y,i,r,o)}}return!!p&&(o||(o=new R),ot(t,e,n,i,r,o))}function X(t,e,n,i){var r=n.length,o=r,a=!i;if(null==t)return!o;for(t=Object(t);r--;){var s=n[r];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<o;){s=n[r];var u=s[0],l=t[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in t))return!1}else{var h=new R;if(i)var f=i(l,c,u,t,e,h);if(!(void 0===f?H(c,l,i,Ut|Vt,h):f))return!1}}return!0}function W(t){if(!Ct(t)||pt(t))return!1;var e=Mt(t)||l(t)?Ze:Pe;return e.test(vt(t))}function Y(t){return It(t)&&Tt(t.length)&&!!ke[$e.call(t)]}function J(t){return"function"==typeof t?t:null==t?Ft:"object"==typeof t?wn(t)?Q(t[0],t[1]):Z(t):zt(t)}function $(t){if(!dt(t))return rn(t);var e=[];for(var n in Object(t))Je.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Z(t){var e=st(t);return 1==e.length&&e[0][2]?mt(e[0][0],e[0][1]):function(n){return n===t||X(n,t,e)}}function Q(t,e){return ht(t)&&gt(e)?mt(yt(t),e):function(n){var i=Rt(n,t);return void 0===i&&i===e?Ot(n,t):H(e,i,void 0,Ut|Vt)}}function tt(t){return function(e){return U(e,t)}}function et(t){if("string"==typeof t)return t;if(Nt(t))return bn?bn.call(t):"";var e=t+"";return"0"==e&&1/t==-Kt?"-0":e}function nt(t){return wn(t)?t:xn(t)}function it(t,e,n,r,o,a){var s=o&Vt,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t);if(c&&a.get(e))return c==e;var h=-1,f=!0,p=o&Ut?new L:void 0;for(a.set(t,e),a.set(e,t);++h<u;){var d=t[h],g=e[h];if(r)var m=s?r(g,d,h,e,t,a):r(d,g,h,t,e,a);if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!i(e,function(t,e){if(!p.has(e)&&(d===t||n(d,t,r,o,a)))return p.add(e)})){f=!1;break}}else if(d!==g&&!n(d,g,r,o,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function rt(t,e,n,i,r,o,a){switch(n){case he:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ce:return!(t.byteLength!=e.byteLength||!i(new tn(t),new tn(e)));case Jt:case $t:case ne:return xt(+t,+e);case Zt:return t.name==e.name&&t.message==e.message;case oe:case se:return t==e+"";case ee:var s=c;case ae:var u=o&Vt;if(s||(s=f),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;o|=Ut,a.set(t,e);var h=it(s(t),s(e),i,r,o,a);return a.delete(t),h;case ue:if(vn)return vn.call(t)==vn.call(e)}return!1}function ot(t,e,n,i,r,o){var a=r&Vt,s=Dt(t),u=s.length,l=Dt(e),c=l.length;if(u!=c&&!a)return!1;for(var h=u;h--;){var f=s[h];if(!(a?f in e:Je.call(e,f)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var d=!0;o.set(t,e),o.set(e,t);for(var g=a;++h<u;){f=s[h];var m=t[f],y=e[f];if(i)var v=a?i(y,m,f,e,t,o):i(m,y,f,t,e,o);if(!(void 0===v?m===y||n(m,y,i,r,o):v)){d=!1;break}g||(g="constructor"==f)}if(d&&!g){var b=t.constructor,_=e.constructor;b!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return o.delete(t),o.delete(e),d}function at(t,e){var n=t.__data__;return ft(e)?n["string"==typeof e?"string":"hash"]:n.map}function st(t){for(var e=Dt(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,gt(r)]}return e}function ut(t,e){var n=u(t,e);return W(n)?n:void 0}function lt(t,e,n){e=ht(e,t)?[e]:nt(e);for(var i,r=-1,o=e.length;++r<o;){var a=yt(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}if(i)return i;var o=t?t.length:0;return!!o&&Tt(o)&&ct(a,o)&&(wn(t)||wt(t))}function ct(t,e){return e=null==e?Ht:e,!!e&&("number"==typeof t||Ae.test(t))&&t>-1&&t%1==0&&t<e}function ht(t,e){if(wn(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Nt(t))||(we.test(t)||!xe.test(t)||null!=e&&t in Object(e))}function ft(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function pt(t){return!!We&&We in t}function dt(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||qe;return t===n}function gt(t){return t===t&&!Ct(t)}function mt(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function yt(t){if("string"==typeof t||Nt(t))return t;var e=t+"";return"0"==e&&1/t==-Kt?"-0":e}function vt(t){if(null!=t){try{return Ye.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function bt(t,e,n){var i=t?t.length:0;if(!i)return-1;var o=null==n?0:Lt(n);return o<0&&(o=on(i+o,0)),r(t,J(e,3),o)}function _t(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(Bt);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a),a};return n.cache=new(_t.Cache||M),n}function xt(t,e){return t===e||t!==t&&e!==e}function wt(t){return St(t)&&Je.call(t,"callee")&&(!en.call(t,"callee")||$e.call(t)==Wt)}function Et(t){return null!=t&&Tt(t.length)&&!Mt(t)}function St(t){return It(t)&&Et(t)}function Mt(t){var e=Ct(t)?$e.call(t):"";return e==Qt||e==te}function Tt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ht}function Ct(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function It(t){return!!t&&"object"==typeof t}function Nt(t){return"symbol"==typeof t||It(t)&&$e.call(t)==ue}function Pt(t){if(!t)return 0===t?t:0;if(t=At(t),t===Kt||t===-Kt){var e=t<0?-1:1;return e*qt}return t===t?t:0}function Lt(t){var e=Pt(t),n=e%1;return e===e?n?e-n:e:0}function At(t){if("number"==typeof t)return t;if(Nt(t))return Xt;if(Ct(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ct(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Te,"");var n=Ne.test(t);return n||Le.test(t)?Re(t.slice(2),n?2:8):Ie.test(t)?Xt:+t}function kt(t){return null==t?"":et(t)}function Rt(t,e,n){var i=null==t?void 0:U(t,e);return void 0===i?n:i}function Ot(t,e){return null!=t&&lt(t,e,K)}function Dt(t){return Et(t)?B(t):$(t)}function Ft(t){return t}function zt(t){return ht(t)?o(yt(t)):tt(t)}var jt=200,Bt="Expected a function",Gt="__lodash_hash_undefined__",Ut=1,Vt=2,Kt=1/0,Ht=9007199254740991,qt=1.7976931348623157e308,Xt=NaN,Wt="[object Arguments]",Yt="[object Array]",Jt="[object Boolean]",$t="[object Date]",Zt="[object Error]",Qt="[object Function]",te="[object GeneratorFunction]",ee="[object Map]",ne="[object Number]",ie="[object Object]",re="[object Promise]",oe="[object RegExp]",ae="[object Set]",se="[object String]",ue="[object Symbol]",le="[object WeakMap]",ce="[object ArrayBuffer]",he="[object DataView]",fe="[object Float32Array]",pe="[object Float64Array]",de="[object Int8Array]",ge="[object Int16Array]",me="[object Int32Array]",ye="[object Uint8Array]",ve="[object Uint8ClampedArray]",be="[object Uint16Array]",_e="[object Uint32Array]",xe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,we=/^\w*$/,Ee=/^\./,Se=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Me=/[\\^$.*+?()[\]{}|]/g,Te=/^\s+|\s+$/g,Ce=/\\(\\)?/g,Ie=/^[-+]0x[0-9a-f]+$/i,Ne=/^0b[01]+$/i,Pe=/^\[object .+?Constructor\]$/,Le=/^0o[0-7]+$/i,Ae=/^(?:0|[1-9]\d*)$/,ke={};ke[fe]=ke[pe]=ke[de]=ke[ge]=ke[me]=ke[ye]=ke[ve]=ke[be]=ke[_e]=!0,ke[Wt]=ke[Yt]=ke[ce]=ke[Jt]=ke[he]=ke[$t]=ke[Zt]=ke[Qt]=ke[ee]=ke[ne]=ke[ie]=ke[oe]=ke[ae]=ke[se]=ke[le]=!1;var Re=parseInt,Oe="object"==typeof t&&t&&t.Object===Object&&t,De="object"==typeof self&&self&&self.Object===Object&&self,Fe=Oe||De||Function("return this")(),ze="object"==typeof e&&e&&!e.nodeType&&e,je=ze&&"object"==typeof n&&n&&!n.nodeType&&n,Be=je&&je.exports===ze,Ge=Be&&Oe.process,Ue=function(){try{return Ge&&Ge.binding("util")}catch(t){}}(),Ve=Ue&&Ue.isTypedArray,Ke=Array.prototype,He=Function.prototype,qe=Object.prototype,Xe=Fe["__core-js_shared__"],We=function(){var t=/[^.]+$/.exec(Xe&&Xe.keys&&Xe.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ye=He.toString,Je=qe.hasOwnProperty,$e=qe.toString,Ze=RegExp("^"+Ye.call(Je).replace(Me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qe=Fe.Symbol,tn=Fe.Uint8Array,en=qe.propertyIsEnumerable,nn=Ke.splice,rn=h(Object.keys,Object),on=Math.max,an=ut(Fe,"DataView"),sn=ut(Fe,"Map"),un=ut(Fe,"Promise"),ln=ut(Fe,"Set"),cn=ut(Fe,"WeakMap"),hn=ut(Object,"create"),fn=vt(an),pn=vt(sn),dn=vt(un),gn=vt(ln),mn=vt(cn),yn=Qe?Qe.prototype:void 0,vn=yn?yn.valueOf:void 0,bn=yn?yn.toString:void 0;p.prototype.clear=d,p.prototype.delete=g,p.prototype.get=m,p.prototype.has=y,p.prototype.set=v,b.prototype.clear=_,b.prototype.delete=x,b.prototype.get=w,b.prototype.has=E,b.prototype.set=S,M.prototype.clear=T,M.prototype.delete=C,M.prototype.get=I,M.prototype.has=N,M.prototype.set=P,L.prototype.add=L.prototype.push=A,L.prototype.has=k,R.prototype.clear=O,R.prototype.delete=D,R.prototype.get=F,R.prototype.has=z,R.prototype.set=j;var _n=V;(an&&_n(new an(new ArrayBuffer(1)))!=he||sn&&_n(new sn)!=ee||un&&_n(un.resolve())!=re||ln&&_n(new ln)!=ae||cn&&_n(new cn)!=le)&&(_n=function(t){var e=$e.call(t),n=e==ie?t.constructor:void 0,i=n?vt(n):void 0;if(i)switch(i){case fn:return he;case pn:return ee;case dn:return re;case gn:return ae;case mn:return le}return e});var xn=_t(function(t){t=kt(t);var e=[];return Ee.test(t)&&e.push(""),t.replace(Se,function(t,n,i,r){e.push(i?r.replace(Ce,"$1"):n||t)}),e});_t.Cache=M;var wn=Array.isArray,En=Ve?s(Ve):Y;n.exports=bt}).call(e,function(){return this}(),n(611)(t))},,function(t,e,n){"use strict";var i=n(201)("Map/DataEditorMixin"),r=n(661),o=n(168),a=n(662),s=n(170),u={};"undefined"!=typeof window&&(u=n(693));var l={getFirstDrawLayerID:function(){return this.getEditorStyles()[0].id+".cold"},getEditorStyles:function(){return[{id:"highlight-active-points",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"],["==","active","true"]],paint:{"circle-radius":7,"circle-color":"#000000"}},{id:"points-are-blue",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"],["==","active","false"]],paint:{"circle-radius":5,"circle-color":"#000088"}},{id:"gl-draw-line",type:"line",filter:["all",["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#D20C0C","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#D20C0C","fill-outline-color":"#D20C0C","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#D20C0C","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-halo-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#FFF"}},{id:"gl-draw-polygon-and-line-vertex-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#D20C0C"}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","$type","LineString"],["==","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#000","line-width":3}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","$type","Polygon"],["==","mode","static"]],paint:{"fill-color":"#000","fill-outline-color":"#000","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","$type","Polygon"],["==","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#000","line-width":3}}]},editFeature:function(t){var e=this;r.selectFeature(t.properties.mhid,function(t){e.draw&&(e.draw.get(t.id)||(e.draw.add(t),e.updateMapLayerFilters()))})},startEditingTool:function(t){var e=this,n=new u({displayControlsDefault:!1,controls:{point:"point"===t.data_type,polygon:"polygon"===t.data_type,line_string:"line"===t.data_type,trash:!0},styles:this.getEditorStyles()});this.draw=n,o(".mapboxgl-ctrl-top-right").addClass("mapboxgl-ctrl-maphubs-edit-tool"),this.map.addControl(n,"top-right"),this.map.on("draw.create",function(t){i("draw create");var e=t.features;e&&e.length>0&&e.forEach(function(t){r.createFeature(t)})}),this.map.on("draw.update",function(t){i("draw update"),e.updateEdits(t)}),this.map.on("draw.delete",function(t){i("draw delete");var e=t.features;e&&e.length>0&&e.forEach(function(t){r.deleteFeature(t)})}),this.map.on("draw.selectionchange",function(t){i("draw selection");var n=e.draw.getMode();if("simple_select"===n){var o=t.features;o&&o.length>0&&o.forEach(function(t){r.selectFeature(t.id,function(){})})}})},stopEditingTool:function(){o(".mapboxgl-ctrl-top-right").removeClass("mapboxgl-ctrl-maphubs-edit-tool"),this.map.removeControl(this.draw)},updateEdits:function(t){t.features.length>0&&r.updateFeatures(t.features)},onFeatureUpdate:function(t,e){this.draw&&("update"===t||"create"===t?this.draw.add(e.geojson):"delete"===t&&this.draw.delete(e.geojson.id))},updateMapLayerFilters:function(){var t=this,e=this.state.editingLayer.layer_id,n=[];this.state.edits.forEach(function(t){var e=t.geojson.id;e&&!n.includes(e)&&n.push(e)}),this.state.originals.forEach(function(t){var e=t.geojson.id;e&&!n.includes(e)&&n.push(e)});var i=["!in","mhid"].concat(n);this.state.glStyle&&this.state.glStyle.layers.forEach(function(n){var r;if(n.metadata&&n.metadata["maphubs:layer_id"]?n.metadata["maphubs:layer_id"]===e&&(r=!0):n.id.endsWith(e)&&(r=!0),r){var o=n.filter;o=o&&Array.isArray(o)&&0!==o.length?"all"===o[0]?n.filter.concat(i):["all",o,i]:i,t.map.setFilter(n.id,o)}})}};t.exports=a(l,s.listenTo(r.onFeatureUpdate,"onFeatureUpdate"))},function(t,e,n){"use strict";t.exports={"ags-mapserver-query":n(702),"ags-featureserver-query":n(708),"mapbox-style":n(709),"maphubs-vector":n(710)}},function(t,e,n){"use strict";var i=n(703),r=n(201)("AGSFeatureServerQuery"),o={load:function(t,e,n,o){return i.getArcGISGeoJSON(e.url).then(function(e){e.bbox&&e.bbox.length>0&&o.state.allowLayersToMoveMap&&o.zoomToData(e),n.addSource(t,{type:"geojson",data:e})},function(t){r("("+o.state.id+") "+t)})},addLayer:function(t,e,n,i){i.state.editing?n.addLayer(t,i.getFirstDrawLayerID()):n.addLayer(t)},removeLayer:function(t,e){e.removeLayer(t.id)},remove:function(t,e){e.removeSource(t)}};t.exports=o},function(t,e,n){"use strict";var i=n(704),r=n(201)("terraformerGL"),o=n(705),a=n(707);t.exports={getArcGISGeoJSON:function(t){var e=this;return e.getArcGISJSON(t).then(function(t){var i=e.convertAGSData(t),o=n(699)(i);return r(o),i.bbox=o,i})},getArcGISJSON:function(t){var e="query?where=1%3D1&text=&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outSR=4326&outFields=&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json";return t.endsWith("/")||(t+="/"),i.get(t+e).use(a).type("json").accept("json").then(function(t){return t.body})},getArcGISFeatureServiceGeoJSON:function(t){var e="query?where=1%3D1&outSR=4326&f=geojson";return t.endsWith("/")||(t+="/"),i.get(t+e).use(a).type("json").accept("json").then(function(t){var e=t.body,i=n(699)(e);return r(i),e.bbox=i,e})},convertAGSData:function(t){for(var e={type:"FeatureCollection",features:[]},n=0;n<t.features.length;n++){var i=o.parse(t.features[n]);i.id=n,e.features.push(i)}return e}}},function(t,e,n){var i=n(612),r=t.exports=n(196),o=r.Request;try{i.config({cancellation:!0})}catch(t){console.warn(["Enabling bluebird cancellation failed.","If you are using bluebird elsewhere in your application,","be sure to enable cancellation there as well.","Promise.config({cancellation: true});"].join(" ")),console.warn(t.stack)}var a=function(t,e){var n;this.message=t,this.name="SuperagentPromiseError",this.originalError=e,Error.captureStackTrace?(Error.captureStackTrace(this,this.constructor),n=this.stack):n=new Error(t).stack,Object.defineProperty&&Object.defineProperty(this,"stack",{get:function(){return this.originalError?n+"\nCaused by:  "+this.originalError.stack:n}})};a.prototype=new Error,a.prototype.constructor=a,r.SuperagentPromiseError=a,o.prototype.promise=function(){var t,e=this;return new i(function(n,i,r){e.end(function(r,o){if("undefined"!=typeof o&&null!==o&&o.status>=400){var s="cannot "+e.method+" "+e.url+" ("+o.status+")";t=new a(s),t.status=o.status,t.body=o.body,t.res=o,i(t)}else r?i(new a("Bad request",r)):n(o)}),"function"==typeof r&&r(function(){e.abort()})})},o.prototype.then=function(){var t=this.promise();return t.then.apply(t,arguments)},o.prototype.catch=function(){var t=this.promise();return t.catch.apply(t,arguments)}},function(t,e,n){!function(i,r){if("object"==typeof t&&"object"==typeof t.exports&&(e=t.exports=r(n(706))),"object"==typeof i.navigator){if(!i.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");i.Terraformer.ArcGIS=r(i.Terraformer)}}(this,function(t){function e(t){var e,n,i,r,o=0,a=0,s=[];i=t.match(/((\+|\-)[^\+\-]+)/g),r=parseInt(i[0],32);for(var u=1;u<i.length;u+=2)e=parseInt(i[u],32)+o,o=e,n=parseInt(i[u+1],32)+a,a=n,s.push([e/r,n/r]);return s}function n(t){return i(t[0],t[t.length-1])||t.push(t[0]),t}function i(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function r(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function o(t){var e,n=0,i=0,r=t.length,o=t[i];for(i;i<r-1;i++)e=t[i+1],n+=(e[0]-o[0])*(e[1]+o[1]),o=e;return n>=0}function a(t){var e=[],i=t.slice(0),r=n(i.shift().slice(0));if(r.length>=4){o(r)||r.reverse(),e.push(r);for(var a=0;a<i.length;a++){var s=n(i[a].slice(0));s.length>=4&&(o(s)&&s.reverse(),e.push(s))}}return e}function s(t){for(var e=[],n=0;n<t.length;n++)for(var i=a(t[n]),r=i.length-1;r>=0;r--){var o=i[r].slice(0);e.push(o)}return e}function u(e,n){var i=t.Tools.arraysIntersectArrays(e,n),r=t.Tools.coordinatesContainPoint(e,n[0]);return!(i||!r)}function l(e){for(var i,r,a,s=[],l=[],c=0;c<e.length;c++){var h=n(e[c].slice(0));if(!(h.length<4))if(o(h)){var f=[h];s.push(f)}else l.push(h)}for(var p=[];l.length;){a=l.pop();var d=!1;for(i=s.length-1;i>=0;i--)if(r=s[i][0],u(r,a)){s[i].push(a),d=!0;break}d||p.push(a)}for(;p.length;){a=p.pop();var g=!1;for(i=s.length-1;i>=0;i--)if(r=s[i][0],t.Tools.arraysIntersectArrays(r,a)){s[i].push(a),g=!0;break}g||s.push([a.reverse()])}return 1===s.length?{type:"Polygon",coordinates:s[0]}:{type:"MultiPolygon",coordinates:s}}function c(n,i){var o={};i=i||{},i.idAttribute=i.idAttribute||void 0,"number"==typeof n.x&&"number"==typeof n.y&&(o.type="Point",o.coordinates=[n.x,n.y],(n.z||n.m)&&o.coordinates.push(n.z),n.m&&o.coordinates.push(n.m)),n.points&&(o.type="MultiPoint",o.coordinates=n.points.slice(0)),n.paths&&(1===n.paths.length?(o.type="LineString",o.coordinates=n.paths[0].slice(0)):(o.type="MultiLineString",o.coordinates=n.paths.slice(0))),n.rings&&(o=l(n.rings.slice(0))),(n.compressedGeometry||n.geometry||n.attributes)&&(o.type="Feature",n.compressedGeometry&&(n.geometry={paths:[e(n.compressedGeometry)]}),o.geometry=n.geometry?c(n.geometry):null,o.properties=n.attributes?r(n.attributes):null,n.attributes&&(o.id=n.attributes[i.idAttribute]||n.attributes.OBJECTID||n.attributes.FID));var a=n.geometry?n.geometry.spatialReference:n.spatialReference;return a&&102100===a.wkid&&(o=t.toGeographic(o)),new t.Primitive(o)}function h(e,n){var i;n=n||{};var o=n.idAttribute||"OBJECTID";i=n.sr?{wkid:n.sr}:e&&e.crs===t.MercatorCRS?{wkid:102100}:{wkid:4326};var u,l={};switch(e.type){case"Point":l.x=e.coordinates[0],l.y=e.coordinates[1],e.coordinates[2]&&(l.z=e.coordinates[2]),e.coordinates[3]&&(l.m=e.coordinates[3]),l.spatialReference=i;break;case"MultiPoint":l.points=e.coordinates.slice(0),l.spatialReference=i;break;case"LineString":l.paths=[e.coordinates.slice(0)],l.spatialReference=i;break;case"MultiLineString":l.paths=e.coordinates.slice(0),l.spatialReference=i;break;case"Polygon":l.rings=a(e.coordinates.slice(0)),l.spatialReference=i;break;case"MultiPolygon":l.rings=s(e.coordinates.slice(0)),l.spatialReference=i;break;case"Feature":e.geometry&&(l.geometry=h(e.geometry,n)),l.attributes=e.properties?r(e.properties):{},e.id&&(l.attributes[o]=e.id);break;case"FeatureCollection":for(l=[],u=0;u<e.features.length;u++)l.push(h(e.features[u],n));break;case"GeometryCollection":for(l=[],u=0;u<e.geometries.length;u++)l.push(h(e.geometries[u],n))}return l}function f(n){return new t.LineString(e(n))}var p={};return p.parse=c,p.convert=h,p.toGeoJSON=c,p.fromGeoJSON=h,p.parseCompressedGeometry=f,p})},,,function(t,e,n){"use strict";var i=n(703),r=n(201)("AGSFeatureServerQuery"),o={load:function(t,e,n,o){return i.getArcGISFeatureServiceGeoJSON(e.url).then(function(e){e.bbox&&e.bbox.length>0&&o.state.allowLayersToMoveMap&&o.zoomToData(e),n.addSource(t,{type:"geojson",data:e})},function(t){r("("+o.state.id+") "+t)})},addLayer:function(t,e,n,i){i.state.editing?n.addLayer(t,i.getFirstDrawLayerID()):n.addLayer(t)},removeLayer:function(t,e){e.removeLayer(t.id)},remove:function(t,e){e.removeSource(t)}};t.exports=o},function(t,e,n){"use strict";var i=n(704),r={load:function(t,e,n,r){var o=e.mapboxid,a="https://api.mapbox.com/styles/v1/"+o+"?access_token="+MAPHUBS_CONFIG.MAPBOX_ACCESS_TOKEN;return i.get(a).then(function(t){var e=t.body;r.mbstyle=e,Object.keys(e.sources).forEach(function(t){var i=e.sources[t];n.addSource(t,i)})})},addLayer:function(t,e,n,i){this.mbstyle.layers.forEach(function(t){"background"!==t.type&&(i.state.editing?n.addLayer(t,i.getFirstDrawLayerID()):n.addLayer(t))})},removeLayer:function(t,e){this.mbstyle.layers.forEach(function(t){e.removeLayer(t.id)})},remove:function(t,e){Object.keys(this.mbstyle.sources).forEach(function(t){e.removeSource(t)})}};t.exports=r},function(t,e,n){"use strict";var i=n(704),r=n(201)("MapHubsSource"),o=n(196),a=n(608),s=n(205).checkClientError,u=n(1),l=n(28),c=n(711),h=n(168),f=n(712),p=(n(699),{});"undefined"!=typeof window&&(p=n(684));var d={load:function(t,e,n,o){if("geojson"===e.type&&e.data)return i.get(e.data).then(function(e){var i=e.body;i.features&&i.features.forEach(function(t,e){t.properties.mhid=e}),n.addSource(t,{type:"geojson",data:i})},function(t){r("("+o.state.id+") "+t)});var s=e.url.replace("{MAPHUBS_DOMAIN}",a.getBaseUrl());return i.get(s).then(function(e){var i=e.body;i.type="vector",n.on("source.load",function(e){e.source.id===t&&o.state.allowLayersToMoveMap&&(r("Zooming map extent of source: "+e.source.id),n.fitBounds([[i.bounds[0],i.bounds[1]],[i.bounds[2],i.bounds[3]]]))}),n.addSource(t,i)},function(t){r("("+o.state.id+") "+t)})},addLayer:function(t,e,n,i){if(t.metadata&&t.metadata["maphubs:markers"]){var d=t.metadata["maphubs:layer_id"];h(".maphubs-marker-"+d).each(function(t,e){l.unmountComponentAtNode(e),h(e).remove()}),f.removeLayer(d)}if(!(t.metadata&&t.metadata["maphubs:markers"]&&t.metadata["maphubs:markers"].enabled)||t.layout&&t.layout.visibility&&"none"===t.layout.visibility)t.metadata&&t.metadata["maphubs:showBehindBaseMapLabels"]?n.addLayer(t,"water"):i.state.editing?n.addLayer(t,i.getFirstDrawLayerID()):n.addLayer(t);else{var g=JSON.parse(JSON.stringify(t.metadata["maphubs:markers"]));g.dataUrl=g.dataUrl.replace("{MAPHUBS_DOMAIN}",a.getBaseUrl());var m=t.metadata["maphubs:layer_id"],y=g.dataUrl;"geojson"===e.type&&(y=e.data),o.get(y).type("json").accept("json").end(function(t,e){s(e,t,function(t){if(t)r(t);else{var o=e.body;o.features.forEach(function(t,e){var r;t.properties.osm_id?t.properties.mhid=m+":"+t.properties.osm_id:t.properties.id?t.properties.mhid=m+":"+t.properties.id:t.properties.ID?t.properties.mhid=m+":"+t.properties.ID:t.properties.OBJECTID?t.properties.mhid=m+":"+t.properties.OBJECTID:t.properties.mhid=m+":"+e,r=t.properties.mhid;var o=document.createElement("div");o.className="maphubs-marker-"+m,o.style.width=g.width+"px",o.style.height=g.height+"px",o.addEventListener("click",function(e){return e.stopPropagation(),t.properties.layer_id=m,i.state.editing?void(i.state.editingLayer.layer_id===t.properties.layer_id&&i.editFeature(t)):(i.setSelectionFilter([t]),i.setState({selectedFeatures:[t],selected:!0}),void n.addClass("selected"))}),l.render(u.createElement(c,g),o);var a,s=-g.width/2;a="MAP_PIN"===g.shape||"SQUARE_PIN"===g.shape?-g.height:-g.height/2;var h=new p.Marker(o,{offset:[s,a]}).setLngLat(t.geometry.coordinates).addTo(n);f.addMarker(m,r,h)})}},function(t){t()})})}},removeLayer:function(t,e){if(t.metadata&&t.metadata["maphubs:markers"]){var n=t.metadata["maphubs:layer_id"];h(".maphubs-marker-"+n).each(function(t,e){l.unmountComponentAtNode(e),h(e).remove()}),f.removeLayer(n)}e.removeLayer(t.id)},remove:function(t,e){e.removeSource(t)}};t.exports=d},function(t,e,n){"use strict";var i=n(1),r=i.createClass({displayName:"Marker",propTypes:{shape:i.PropTypes.string,width:i.PropTypes.number,height:i.PropTypes.number,shapeFill:i.PropTypes.string,shapeFillOpacity:i.PropTypes.number,shapeStroke:i.PropTypes.string,shapeStrokeWidth:i.PropTypes.number,icon:i.PropTypes.string,iconFill:i.PropTypes.string,iconFillOpacity:i.PropTypes.number,iconStroke:i.PropTypes.string,iconStrokeWidth:i.PropTypes.number},getDefaultProps:function(){return{shape:"MAP_PIN",width:48,height:48,shapeFill:"red",shapeFillOpacity:1,shapeStroke:"black",shapeStrokeWidth:1,icon:"none",iconFill:"white",iconFillOpacity:1,iconStroke:"#212121",iconStrokeWidth:0}},render:function(){var t="",e=.75,n=48;if("SQUARE"===this.props.shape)t=i.createElement("rect",{x:"1",y:"1",width:n,height:n}),n+=2;else if("CIRCLE"===this.props.shape){var r=n/2;t=i.createElement("circle",{cx:r+1,cy:r+1,r:r}),n+=2}else"MAP_PIN"===this.props.shape?(e=.5,t=i.createElement("path",{d:"M25.015,2.4c-7.8,0-14.121,6.204-14.121,13.854C10.894,23.906,25.015,49,25.015,49s14.122-25.094,14.122-32.746\tC39.137,8.604,32.812,2.4,25.015,2.4z"})):"SQUARE_PIN"===this.props.shape?t=i.createElement("polygon",{points:"45,1 5,1 5,41 20.093,41 25.532,49.05 30.972,41 45,41 "}):"SQUARE_ROUNDED"===this.props.shape&&(n=50,t=i.createElement("path",{d:"M49,41c0,4.4-3.6,8-8,8H9c-4.4,0-8-3.6-8-8V9c0-4.4,3.6-8,8-8h32c4.4,0,8,3.6,8,8V41z"}));var o="0 0 "+n+" "+n,a="";if(this.props.icon&&"none"!==this.props.icon){var s,u,l=n*e,c=n*e;"MAP_PIN"===this.props.shape?(s=13,u=6):"SQUARE_PIN"===this.props.shape?(s=6.5,u=6.5):"SQUARE"===this.props.shape?(s=6.5,u=9.5):"SQUARE_ROUNDED"===this.props.shape?(s=6.5,u=9.5):"CIRCLE"===this.props.shape&&(s=6.5,u=9.5),a=i.createElement("g",{fill:this.props.iconFill,width:n,height:n,fillOpacity:this.props.iconFillOpacity,stroke:this.props.iconStroke,strokeWidth:this.props.iconStrokeWidth},i.createElement("use",{x:s,y:u,width:l,height:c,xlinkHref:"#"+this.props.icon}))}return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:this.props.width,height:this.props.height,x:"0px",y:"0px",viewBox:o,preserveAspectRatio:"xMidYMid meet"},i.createElement("g",{stroke:this.props.shapeStroke,fill:this.props.shapeFill,strokeWidth:this.props.shapeStrokeWidth,fillOpacity:this.props.shapeFillOpacity},t),a)}});t.exports=r},function(t,e,n){"use strict";var i=n(170),r=i.createActions({addMarker:{},removeMarker:{},removeLayer:{},getMarker:{}});t.exports=r},function(t,e,n){"use strict";var i=n(1),r=i.createClass({displayName:"MarkerSprites",render:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"none"}},i.createElement("symbol",{id:"maphubs-icon-template",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"}),i.createElement("symbol",{id:"maphubs-icon-factory",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M38.3,1.08A10.76,10.76,0,0,1,48.88,6.31,6.34,6.34,0,0,1,59,9.1h1.1A4.91,4.91,0,0,1,65,14h1.29A10.84,10.84,0,0,1,77.17,24.85v1.58a.59.59,0,0,1-.59.59H69.09a.59.59,0,0,1-.59-.59V24.85a2.17,2.17,0,0,0-2.17-2.17h-11a7.05,7.05,0,0,1-13.53-.26,10.54,10.54,0,0,1-2.23.26A10.84,10.84,0,0,1,38.3,1.08Zm56.6,80.29V96.06A2.94,2.94,0,0,1,92,99H8a2.94,2.94,0,0,1-2.94-2.94V81.37A2.94,2.94,0,0,1,8,78.43h4v-8.8a2.24,2.24,0,0,1,2.24-2.24H18V48.73A2.09,2.09,0,0,1,21.33,47l14.06,9.87V48.73A2.09,2.09,0,0,1,38.69,47l14.06,9.87V48.73A2.09,2.09,0,0,1,56,47l9.12,6.4,1.54-20.1A2.3,2.3,0,0,1,69,31.2h7.44a2.3,2.3,0,0,1,2.3,2.15l2.29,34h4.65a2.24,2.24,0,0,1,2.24,2.24v8.8h4A2.94,2.94,0,0,1,94.91,81.37ZM52.15,79.25a1.41,1.41,0,0,0,1.41,1.41H63a1.41,1.41,0,0,0,1.41-1.41V75.92A1.41,1.41,0,0,0,63,74.51H53.56a1.41,1.41,0,0,0-1.41,1.41Zm-18.44,0a1.41,1.41,0,0,0,1.41,1.41H44.6A1.41,1.41,0,0,0,46,79.25V75.92a1.41,1.41,0,0,0-1.41-1.41H35.12a1.41,1.41,0,0,0-1.41,1.41Zm3.07,8.19A1.41,1.41,0,0,0,35.38,86H25.9a1.41,1.41,0,0,0-1.41,1.41v3.33a1.41,1.41,0,0,0,1.41,1.41h9.47a1.41,1.41,0,0,0,1.41-1.41Zm18.44,0A1.41,1.41,0,0,0,53.82,86H44.34a1.41,1.41,0,0,0-1.41,1.41v3.33a1.41,1.41,0,0,0,1.41,1.41h9.47a1.41,1.41,0,0,0,1.41-1.41Zm18.44,0A1.41,1.41,0,0,0,72.26,86H62.78a1.41,1.41,0,0,0-1.41,1.41v3.33a1.41,1.41,0,0,0,1.41,1.41h9.47a1.41,1.41,0,0,0,1.41-1.41Z"
})),i.createElement("symbol",{id:"maphubs-icon-mining",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("g",null,i.createElement("rect",{x:"7.8597517",y:"51.5525627",transform:"matrix(0.7071068 -0.7071068 0.7071068 0.7071068 -30.552948 38.9071159)",width:"47.6576347",height:"9.5633345"}),i.createElement("polygon",{points:"66.9146729,26.2322388 61.7905884,21.1080933 56.8917236,24.3687744 63.6540527,31.1310425   "}),i.createElement("path",{d:"M54.8717651,40.5368652c5.3587036,5.9961548,10.0871582,12.5598145,13.968811,19.5911255    c0.0353394,0.0640259,0.0706787,0.1281128,0.1055298,0.1924438c-0.1807861-0.3334351,0.5753784-2.3654785,0.6385498-2.7723999    c0.3754883-2.4164429,0.3642578-4.8967285,0.0158691-7.3153687c-1.4156494-9.8285522-8.6970215-17.5563965-15.8718262-23.887146    c-6.5492554-5.7787476-15.4349365-9.8988037-24.3834839-7.7381592c-0.2640381,0.0637207-1.4456787,0.5762329-1.6428223,0.4693604    C37.7568359,24.5268555,47.1654053,31.9138794,54.8717651,40.5368652z"}),i.createElement("path",{d:"M52.8867188,55.6611328c-0.5546875,0.6147461-0.5068359,1.5634766,0.1074219,2.1186523l5.1669922,4.6669922    c0.2871094,0.2592773,0.6464844,0.3867188,1.0058594,0.3867188c0.4091797,0,0.8173828-0.1665039,1.1132812-0.4946289    c0.5546875-0.6147461,0.5068359-1.5634766-0.1074219-2.1186523l-5.1669922-4.6669922    C54.3925781,54.9990234,53.4433594,55.0454102,52.8867188,55.6611328z"}),i.createElement("path",{d:"M76.7382812,60.2363281c0.1777344,0.0688477,0.3603516,0.1015625,0.5410156,0.1015625    c0.6015625,0,1.1689453-0.3647461,1.3994141-0.9589844l2.3876953-6.1708984    c0.2988281-0.7729492-0.0859375-1.6416016-0.8583984-1.9404297c-0.7675781-0.2973633-1.640625,0.0849609-1.9404297,0.8574219    l-2.3876953,6.1708984C75.5810547,59.0688477,75.9658203,59.9375,76.7382812,60.2363281z"}),i.createElement("path",{d:"M55.9199219,68.3691406c-0.0576172-0.8271484-0.8017578-1.4619141-1.6015625-1.3901367l-7.4238281,0.5249023    c-0.8271484,0.0581055-1.4492188,0.7753906-1.390625,1.6020508C45.5595703,69.8959961,46.2177734,70.5,46.9980469,70.5    c0.0361328,0,0.0722656-0.0009766,0.1074219-0.0039062l7.4238281-0.5249023    C55.3564453,69.9130859,55.9785156,69.1958008,55.9199219,68.3691406z"}),i.createElement("polygon",{points:"86.628418,70.5792847 72.9445801,78.3017578 70.4716797,88.9553833 90.25,88.9553833   "}),i.createElement("polygon",{points:"60.8666992,70.3288574 71.5859375,75.6235352 84.234375,68.4858398 68.4331055,64.375   "}),i.createElement("polygon",{points:"51.125,88.9553833 67.3922729,88.9553833 69.9031372,78.1381836 58.9124756,72.7090454   "})))),i.createElement("symbol",{id:"maphubs-icon-turtle2",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M60.089,37.105c0.276,0.478,0.947,0.902,1.497,0.949l4.355,0.364c0.55,0.046,0.769-0.303,0.455-0.758   c-2.17-3.169-5.301-5.357-9-6.567c-0.524-0.171-0.732,0.1-0.457,0.578L60.089,37.105z"}),i.createElement("path",{d:"M60.007,39.872l-4.194,3.621c-0.418,0.361-0.471,0.997-0.115,1.42l3.584,4.28c0.354,0.423,1.088,0.804,1.638,0.85   l7.687,0.642c0.549,0.046,1.017-0.269,1.029-0.704c0.01-0.264,0.014-0.527,0.014-0.788c0-3.247-0.578-6.068-1.6-8.489   c-0.214-0.509-0.859-0.948-1.408-0.994l-4.879-0.407C61.21,39.255,60.425,39.511,60.007,39.872z"}),i.createElement("path",{d:"M68.533,51.719l-7.369-0.615c-0.551-0.046-1.299,0.246-1.673,0.653L55.1,56.539c-0.373,0.406-0.431,1.109-0.127,1.57   l3.521,5.351c0.304,0.461,0.996,0.872,1.546,0.918l4.89,0.408c0.551,0.046,1.188-0.322,1.411-0.827   c1.571-3.564,2.649-7.43,3.087-11.161C69.492,52.249,69.083,51.766,68.533,51.719z"}),i.createElement("path",{d:"M64.393,65.882l-4.496-0.377c-0.549-0.046-1.334,0.209-1.754,0.569l-3.52,3.031c-0.419,0.359-0.471,0.994-0.115,1.418   l3.104,3.697c0.354,0.422,0.695,0.77,0.76,0.774s0.462-0.274,0.867-0.647c2.171-1.99,4.097-4.586,5.685-7.498   C65.188,66.363,64.941,65.928,64.393,65.882z"}),i.createElement("path",{d:"M45.376,69.105l-3.519-3.031c-0.418-0.36-1.204-0.615-1.754-0.569l-4.496,0.377c-0.55,0.046-0.794,0.481-0.529,0.968   c1.588,2.912,3.513,5.508,5.682,7.498c0.407,0.373,0.806,0.654,0.87,0.648s0.404-0.354,0.759-0.775l3.102-3.697   C45.847,70.102,45.795,69.466,45.376,69.105z"}),i.createElement("path",{d:"M52.546,56.732c0.554,0,1.304-0.33,1.677-0.736l4.258-4.638c0.373-0.406,0.39-1.08,0.035-1.502l-3.826-4.567   c-0.354-0.423-1.088-0.767-1.642-0.767h-6.096c-0.552,0-1.288,0.343-1.642,0.767l-3.823,4.567   c-0.354,0.423-0.339,1.096,0.034,1.502l4.258,4.638c0.374,0.406,1.124,0.736,1.676,0.736H52.546z"}),i.createElement("path",{d:"M42.628,65.395l3.48,2.996c0.418,0.36,1.206,0.652,1.758,0.652h4.268c0.554,0,1.339-0.292,1.759-0.652l3.479-2.996   c0.419-0.359,0.512-1.025,0.208-1.486l-3.515-5.34c-0.305-0.461-0.998-0.836-1.551-0.836h-5.029c-0.552,0-1.246,0.375-1.55,0.836   l-3.515,5.34C42.117,64.368,42.21,65.034,42.628,65.395z"}),i.createElement("path",{d:"M39.959,64.378c0.55-0.046,1.243-0.457,1.546-0.918l3.521-5.351c0.304-0.461,0.247-1.164-0.126-1.57l-4.392-4.782   c-0.374-0.407-1.123-0.699-1.673-0.653l-7.369,0.615c-0.55,0.046-0.959,0.53-0.896,1.079c0.437,3.731,1.515,7.599,3.087,11.161   c0.223,0.506,0.861,0.873,1.412,0.827L39.959,64.378z"}),i.createElement("path",{d:"M53.426,70.809c-0.354-0.422-1.09-0.766-1.643-0.766h-3.566c-0.552,0-1.288,0.344-1.643,0.766l-3.487,4.156   c-0.355,0.424-0.283,1.032,0.182,1.331c2.1,1.353,4.366,2.134,6.731,2.134s4.632-0.781,6.73-2.134   c0.465-0.299,0.537-0.907,0.183-1.331L53.426,70.809z"}),i.createElement("path",{d:"M40.923,39.329l4.102,3.54c0.418,0.361,1.205,0.653,1.757,0.653h6.436c0.554,0,1.339-0.292,1.757-0.653l4.104-3.54   c0.418-0.361,0.531-1.041,0.256-1.519l-3.746-6.465c-0.275-0.478-0.938-0.958-1.482-1.049c-1.326-0.221-2.695-0.34-4.105-0.34   s-2.78,0.12-4.104,0.341c-0.545,0.091-1.207,0.571-1.484,1.049l-3.746,6.465C40.39,38.289,40.504,38.968,40.923,39.329z"}),i.createElement("path",{d:"M31.397,50.684l7.685-0.642c0.55-0.046,1.284-0.427,1.639-0.85l3.583-4.28c0.354-0.423,0.303-1.059-0.115-1.42   l-4.196-3.621c-0.418-0.361-1.203-0.616-1.753-0.57l-4.877,0.407c-0.55,0.046-1.196,0.485-1.41,0.994   c-1.021,2.421-1.6,5.242-1.6,8.489c0,0.261,0.005,0.524,0.014,0.788C30.38,50.416,30.847,50.729,31.397,50.684z"}),i.createElement("path",{d:"M34.059,38.417l4.354-0.364c0.55-0.046,1.221-0.471,1.498-0.949l3.148-5.435c0.277-0.478,0.068-0.749-0.457-0.577   c-3.699,1.209-6.83,3.397-9.001,6.567C33.29,38.115,33.509,38.464,34.059,38.417z"}),i.createElement("path",{d:"M28.27,39.146c0.27-0.65,0.7-1.26,1.24-1.78c0.11-0.69,0.38-1.37,0.8-1.97c1.13-1.66,2.5-3.13,4.07-4.38   c-1.22-1.75-2.75-4.2-4.6-4.89c-2.24-0.84-5.89,0.69-9.11,1.68c-6.47,2-10.94,8.27-13.4,13.97c-2.62,5.87-2.43,10.32-2.04,9.89   c-0.08-0.17,2.56-1.54,3.71-3.35c2.77-4.35,6.54-11.24,12.56-9.86c2.44,0.04,4.59,0.67,6.48,1.43   C28.07,39.636,28.17,39.386,28.27,39.146z"}),i.createElement("path",{d:"M92.73,41.776c-2.461-5.7-6.932-11.97-13.4-13.97c-3.221-0.99-6.87-2.52-9.109-1.68c-1.851,0.69-3.381,3.15-4.591,4.9   c1.57,1.25,2.931,2.72,4.07,4.38c0.409,0.59,0.68,1.271,0.79,1.96c0.539,0.52,0.97,1.14,1.24,1.8c0.1,0.24,0.199,0.48,0.278,0.72   c1.9-0.75,4.05-1.39,6.49-1.43c6.021-1.38,9.79,5.51,12.56,9.86c1.15,1.81,3.791,3.18,3.711,3.35   C95.16,52.096,95.35,47.646,92.73,41.776z"}),i.createElement("path",{d:"M33.09,71.316c-2.37,1.068-4.62,2.75-6.16,5.18c-1.82,2.729-4.61,5.59-4.38,8.439c0.14,1.721,2.06,1.801,3.13,3.229   c1.31,1.739,1.96,4.62,2.82,5.37c1.74,1.52,3.06-5.98,7.63-12.92c0.73-1.141,1.51-2.131,2.28-3c-0.12-0.102-0.24-0.211-0.36-0.32   C36.26,75.646,34.59,73.646,33.09,71.316z"}),i.createElement("path",{d:"M66.9,71.336c-1.5,2.32-3.16,4.32-4.961,5.96c-0.129,0.12-0.25,0.22-0.369,0.32c0.779,0.88,1.56,1.88,2.3,3.03   c4.569,6.938,5.899,14.438,7.63,12.92c0.859-0.75,1.51-3.642,2.82-5.371c1.068-1.439,2.988-1.521,3.13-3.239   c0.229-2.84-2.562-5.71-4.38-8.431C71.529,74.096,69.279,72.406,66.9,71.336z"}),i.createElement("path",{d:"M67.561,68.286c0.279-0.521,0.42-1.091,0.449-1.649c0.45-0.41,0.83-0.9,1.08-1.471c1.7-3.859,2.852-8.02,3.32-12.02   c0.061-0.541,0.01-1.082-0.15-1.602c0.221-0.45,0.36-0.94,0.37-1.47c0.011-0.29,0.021-0.59,0.021-0.88c0-3.52-0.619-6.77-1.84-9.65   c-0.271-0.65-0.721-1.23-1.279-1.69c-0.03-0.65-0.25-1.3-0.66-1.89c-2.471-3.61-6.109-6.28-10.54-7.73   c-0.41-0.13-0.819-0.2-1.21-0.2c-0.221,0-0.43,0.03-0.63,0.07c-0.07-0.04-0.13-0.08-0.2-0.12c-0.529-0.32-1.109-0.55-1.689-0.65   c-1.521-0.25-3.069-0.38-4.601-0.38c-1.53,0-3.08,0.13-4.6,0.38c-0.58,0.1-1.16,0.33-1.69,0.65c-0.07,0.04-0.13,0.08-0.2,0.12   c-0.2-0.04-0.41-0.07-0.63-0.07c-0.39,0-0.8,0.07-1.21,0.21c-4.43,1.44-8.07,4.11-10.54,7.72c-0.41,0.59-0.63,1.24-0.66,1.89   c-0.56,0.46-1.01,1.04-1.28,1.68c-1.22,2.89-1.84,6.14-1.84,9.66c0,0.29,0.01,0.59,0.02,0.88c0.01,0.529,0.15,1.02,0.37,1.47   c-0.16,0.52-0.21,1.061-0.15,1.602c0.47,4,1.62,8.158,3.32,12.02c0.25,0.57,0.63,1.061,1.08,1.471   c0.03,0.561,0.17,1.129,0.45,1.649c1.82,3.319,3.93,6.11,6.29,8.271c0.72,0.659,1.31,1.061,1.88,1.26c0.28,0.391,0.62,0.74,1.03,1   C44.33,80.546,50,82.426,50,82.426s5.67-1.88,8.359-3.609c0.41-0.26,0.75-0.609,1.029-0.989c0.58-0.21,1.16-0.61,1.881-1.271   C63.63,74.396,65.74,71.605,67.561,68.286z M59.91,75.086c-0.5,0.471-0.9,0.75-1.189,0.85l-0.591,0.211l-0.36,0.5   c-0.148,0.211-0.318,0.381-0.5,0.49c-2.358,1.521-4.81,2.289-7.27,2.289s-4.91-0.77-7.27-2.289c-0.18-0.109-0.34-0.279-0.5-0.49   l-0.36-0.5l-0.58-0.211c-0.3-0.108-0.7-0.379-1.2-0.85c-2.2-2.02-4.18-4.63-5.89-7.76c-0.13-0.23-0.2-0.5-0.21-0.78l-0.04-0.84   l-0.63-0.56c-0.26-0.23-0.45-0.5-0.58-0.78c-1.62-3.69-2.72-7.65-3.16-11.45c-0.03-0.26-0.01-0.529,0.07-0.79l0.23-0.76l-0.35-0.7   c-0.1-0.21-0.16-0.43-0.16-0.65c-0.01-0.28-0.02-0.55-0.02-0.82c0-3.25,0.57-6.24,1.68-8.88c0.14-0.33,0.39-0.65,0.72-0.93   l0.66-0.56l0.05-0.86c0.02-0.29,0.13-0.6,0.32-0.87c2.22-3.24,5.51-5.64,9.51-6.95c0.21-0.07,0.41-0.11,0.59-0.11   c0.1,0,0.18,0.02,0.27,0.04l0.25,0.04l0.54,0.1l0.66-0.43c0.38-0.25,0.78-0.42,1.13-0.48c1.41-0.23,2.84-0.35,4.27-0.35   c1.42,0,2.859,0.12,4.27,0.35c0.352,0.06,0.75,0.23,1.131,0.48l0.66,0.43l0.539-0.1l0.25-0.04c0.08-0.02,0.17-0.04,0.271-0.04   c0.18,0,0.38,0.04,0.59,0.11c4,1.31,7.29,3.71,9.51,6.95c0.19,0.28,0.301,0.57,0.32,0.88l0.05,0.86l0.66,0.55   c0.33,0.28,0.58,0.6,0.72,0.93c1.11,2.64,1.682,5.63,1.682,8.88c0,0.27-0.012,0.54-0.021,0.82c0,0.22-0.061,0.44-0.16,0.65   l-0.35,0.71l0.229,0.75c0.08,0.261,0.102,0.53,0.07,0.79c-0.439,3.8-1.54,7.76-3.16,11.45c-0.13,0.28-0.318,0.55-0.58,0.78   l-0.63,0.56l-0.04,0.83c-0.01,0.29-0.08,0.56-0.21,0.8C64.09,70.456,62.109,73.066,59.91,75.086z"}),i.createElement("path",{d:"M43.44,24.236c0.19,0.85,0.28,1.72,0.29,2.6c0.48-0.23,1-0.4,1.5-0.49c1.59-0.26,3.2-0.39,4.77-0.39   c1.57,0,3.18,0.13,4.76,0.39c0.5,0.09,1.021,0.26,1.51,0.49c0.012-0.87,0.11-1.74,0.291-2.6c1.399-1.13,2.26-2.72,2.26-4.7   c0-1.58-0.539-3.31-1.471-4.87c-0.658-5.19-7.22-8.43-7.22-8.43s-6.11,3.02-7.14,7.88c-1.13,1.7-1.81,3.66-1.81,5.42   C41.18,21.516,42.04,23.106,43.44,24.236z"}))),i.createElement("symbol",{id:"maphubs-icon-farmer-wife",viewBox:"0 0 124.836 308.19",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M40.3,38.587c0.089-0.605,0.197-1.211,0.338-1.817C43.01,26.586,51.958,19.475,62.4,19.475   c1.705,0,3.417,0.197,5.089,0.586c9.255,2.155,15.823,9.805,17.071,18.696c21.771-1.595,37.216-5.59,37.216-10.269   c0-5.103-18.362-15.919-43.273-19.271C78.265,4.103,71.659,0,63.526,0c-8.133,0-14.739,4.103-14.978,9.217   C23.639,12.569,5.276,23.385,5.276,28.488C5.276,33.008,19.691,36.891,40.3,38.587z"}),i.createElement("ellipse",{transform:"matrix(0.2268 -0.9739 0.9739 0.2268 7.511 93.1425)",cx:"62.418",cy:"41.841",rx:"20.362",ry:"20.362"}),i.createElement("path",{d:"M5.86,158.108c3.813,0.631,7.417-1.95,8.049-5.765c4.038-24.668,9.4-43.387,17.028-55.036   c2.391-3.671,4.949-6.65,7.754-9.043C20.199,128.981,20.087,213.5,20.087,213.5c0,4.608,8.522,7.752,20.155,9.436V237.5   c0,5,4.052,9.052,9.052,9.052c4.998,0,9.052-4.052,9.052-9.052v-13.151c2.708,0.06,5.438,0.06,8.147,0V237.5   c0,5,4.052,9.052,9.052,9.052c4.998,0,9.052-4.052,9.052-9.052v-14.564c11.63-1.685,20.152-4.828,20.152-9.436   c0,0-0.109-84.518-18.601-125.234c5.05,4.308,9.327,10.537,13.061,19.087c4.939,11.326,8.671,26.497,11.72,44.991   c0.567,3.428,3.534,5.859,6.897,5.86c0.38,0,0.764-0.031,1.151-0.095c3.815-0.631,6.396-4.233,5.765-8.048   c-4.242-25.417-9.59-45.622-19.101-60.374c-4.762-7.351-10.706-13.324-18.007-17.339c-7.292-4.029-15.777-5.999-25.216-5.989   c-9.437-0.01-17.924,1.96-25.216,5.989c-10.99,6.056-18.748,16.368-24.409,29.421c-5.69,13.107-9.535,29.221-12.697,48.292   C-0.536,153.875,2.045,157.478,5.86,158.108z"}))),i.createElement("symbol",{id:"maphubs-icon-farmer-family",viewBox:"0 0 312.976 321.99375000000003",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("g",null,i.createElement("path",{d:"M87.571,38.513c2.079-11.416,12.09-20.101,24.097-20.101c12.006,0,22.017,8.685,24.096,20.101    c20.142-1.733,34.153-5.568,34.153-10.025c0-5.103-18.362-15.919-43.273-19.271C126.406,4.103,119.8,0,111.667,0    c-8.133,0-14.739,4.103-14.978,9.217c-17.916,2.411-32.443,8.682-39.19,13.913v9.407C63.053,35.19,73.893,37.336,87.571,38.513z"}),i.createElement("path",{d:"M19.128,101.597c-3.996,1.885-5.707,6.653-3.822,10.649c1.364,2.894,4.24,4.59,7.241,4.59    c0.067,0,0.135-0.009,0.203-0.011V99.898C21.546,100.46,20.339,101.025,19.128,101.597z"}),i.createElement("path",{d:"M73.076,95.227c4.461-1.858,8.356-3.451,11.546-4.741v154.746c0,6.83,5.537,12.363,12.363,12.363    c6.828,0,12.365-5.533,12.365-12.363V154.96h4.635v90.271c0,6.83,5.537,12.363,12.363,12.363c6.828,0,12.365-5.533,12.365-12.363    V95.482c0.593,1.216,1.191,2.611,1.781,4.238c2.819,7.813,5.189,20.63,5.18,40.638c0,5.516-0.177,11.574-0.565,18.224    c-0.257,4.411,3.109,8.195,7.52,8.452c0.159,0.009,0.318,0.014,0.475,0.014c4.205,0,7.729-3.283,7.979-7.535    c0.404-6.933,0.591-13.299,0.591-19.156c-0.04-30.182-4.861-46.887-11.434-56.932c-3.285-4.986-7.128-8.183-10.68-9.955    c-2.319-1.169-4.445-1.72-6.14-1.964c-0.766-0.254-1.583-0.398-2.436-0.398H92.351c-0.681,0-1.338,0.097-1.967,0.262    c-0.774,0.056-1.554,0.225-2.316,0.521v-0.002c-0.09,0.036-25.279,9.792-55.317,23.409v17.597    C47.813,105.939,62.108,99.798,73.076,95.227z"}),i.createElement("circle",{cx:"111.668",cy:"42.913",r:"22.5"}),i.createElement("path",{d:"M24.75,255.5h6v-184H48.5c3.867-0.002,6.997-3.133,6.999-7.001V18.834H49.5v45.665c-0.002,0.55-0.45,1-1,1H30.75V18.833    h-6v46.666H6.999c-0.55,0-1-0.45-1-1V18.834H0v45.665c0.002,3.868,3.132,6.999,6.999,7.001h17.75V255.5z"})),i.createElement("g",null,i.createElement("path",{d:"M228.44,49.587c0.089-0.605,0.197-1.211,0.338-1.817c2.372-10.184,11.32-17.295,21.762-17.295    c1.705,0,3.417,0.197,5.089,0.586c9.255,2.155,15.823,9.805,17.071,18.696c21.771-1.595,37.216-5.59,37.216-10.269    c0-5.103-18.362-15.919-43.272-19.271C266.406,15.103,259.8,11,251.667,11c-8.133,0-14.739,4.103-14.978,9.217    c-24.91,3.352-43.272,14.168-43.272,19.271C193.417,44.008,207.831,47.891,228.44,49.587z"}),i.createElement("ellipse",{transform:"matrix(0.2268 -0.9739 0.9739 0.2268 142.268 284.8857)",cx:"250.559",cy:"52.841",rx:"20.362",ry:"20.362"}),i.createElement("path",{d:"M194,169.108c3.813,0.631,7.417-1.95,8.049-5.765c4.038-24.668,9.4-43.387,17.028-55.036    c2.391-3.671,4.949-6.65,7.754-9.043C208.339,139.981,208.228,224.5,208.228,224.5c0,4.608,8.522,7.752,20.155,9.436V248.5    c0,5,4.052,9.052,9.052,9.052c4.998,0,9.052-4.052,9.052-9.052v-13.151c2.708,0.06,5.438,0.06,8.146,0V248.5    c0,5,4.052,9.052,9.052,9.052c4.998,0,9.052-4.052,9.052-9.052v-14.564c11.63-1.685,20.152-4.828,20.152-9.436    c0,0-0.109-84.518-18.6-125.234c5.05,4.308,9.327,10.537,13.06,19.087c4.94,11.326,8.671,26.497,11.72,44.991    c0.567,3.428,3.534,5.859,6.898,5.86c0.38,0,0.764-0.031,1.151-0.095c3.815-0.631,6.396-4.233,5.765-8.048    c-4.242-25.417-9.59-45.622-19.101-60.374c-4.762-7.351-10.706-13.324-18.007-17.339c-7.292-4.029-15.777-5.999-25.216-5.989    c-9.436-0.01-17.924,1.96-25.216,5.989c-10.99,6.056-18.748,16.368-24.409,29.421c-5.69,13.107-9.535,29.221-12.697,48.292    C187.604,164.875,190.186,168.478,194,169.108z"})))),i.createElement("symbol",{id:"maphubs-icon-fox",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M89.919,68.213l-6.457-11.138l-9.084-15.139L62.023,36.22l-14.45-0.26l-12.429,2.391l-6.026-3.604l-6.035-3.45l3-4.392  l-0.016-2.991h-1.532l-3.947,3.213l-3.318,4.232l-6.982,4.802l-0.094,2.086l-5.117,5.527l1.345,1.083l4.057-0.957l5.212-0.126  l4.265,2.716l5.665,7.98l7.641,4.519l1.829,11.557l-1.022,2.206l-2.26,0.269l-1.237,2.046l1.077,1.021h2.367l4.627-4.896  l-0.269-7.036l0.978-7.09l12.205-3.241l3.444,4.949l8.555,6.027l-0.162,2.099l-3.705,5.058l-1.782,0.108l-0.915,1.937l1.614,0.699  l4.628-0.322l5.219-10.491l-1.184-2.207l-2.906-2.853l2.529-8.34l0.431-3.658l0.646,8.123l3.39,9.257l15.443,9.953l8.125-0.03  L89.919,68.213z M26.732,53.37l-6.089-7.676l-4.574-2.743l-7.424,0.001l7.586-2.906l7.021,2.609l5.327,5.381l3.605,2.332  l0.821,6.205L26.732,53.37z M51.286,53.121l-11.81,2.462l1.001-4.427l11.211,1.456L51.286,53.121z M79.506,67.481l3.903-1.26  l1.563-3.091l3.889,5.854l3.695,4.195l-5.643-0.484L79.506,67.481z"})),i.createElement("symbol",{id:"maphubs-icon-dolphin",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M97.938,72.279c-0.438-0.537-0.938-1.096-1.57-1.754c-2.088-2.172-4.909-4.82-8.246-6.043  c-1.534-0.562-4.633-1.426-5.605-1.426c-0.113,0-0.195,0.021-0.277,0.045c-1.641-8.574-4.697-17.323-10.865-23.704  c-2.904-3.005-6.391-5.382-10.282-6.921c-2.987-1.183-6.127-1.884-9.31-2.296c-1.661-0.311-3.315-2.078-3.259-3.816  c0.031-0.973,0.532-1.862,0.971-2.707c0.434-0.834,0.905-1.653,1.301-2.504c0.312-0.668,0.577-1.808-0.146-2.329  c-0.586-0.422-1.512-0.267-2.162-0.125c-2.38,0.52-4.614,1.807-6.516,3.293c-1.282,1.001-2.474,2.127-3.522,3.372  c-0.848,1.009-1.502,2.165-2.415,3.115c-0.493,0.513-1.009,1.033-1.599,1.436c-0.197,0.135-0.515,0.402-0.767,0.395  c-0.271-0.008-0.541-0.001-0.811,0.011c-1.513,0.065-3.021,0.29-4.5,0.608c-6.157,1.321-11.944,4.179-17.029,7.855  c-1.782,1.288-3.538,2.653-5.142,4.16c-1.156,1.085-2.24,2.266-2.989,3.677c-1.462,2.752-1.311,5.843-0.503,8.765  c-0.296,1.133-0.631,2.246-0.98,3.362c-0.241,0.774-0.431,1.582-0.515,2.39c-0.089,0.844-0.208,2.243,0.557,2.851  c0.584,0.462,1.65,0.112,2.24-0.144c0.972-0.422,1.641-1.156,2.422-1.83c0.855-0.738,4.686-3.578,5.834-3.815  c0.694-0.146,1.438,0.053,2.108,0.228c1.25,0.325,3.096,0.938,3.806,2.125c0.708,1.184,1.891,2.223,3.097,2.864  c2.177,1.163,4.517,1.084,6.837,0.419c0.766-0.221,1.225-0.764,1.094-1.616c-0.176-1.144-1.289-1.729-2.196-2.271  c-0.854-0.508-1.695-1.062-2.456-1.699c-0.239-0.2-0.531-0.432-0.767-0.691c0.86-0.242,4.749-0.608,5.788-0.724  c0.138-0.017,0.275-0.03,0.412-0.045c0.007,0.005,0.013,0.008,0.023,0.015c0.213,0.154,0.435,0.295,0.662,0.428  c1.132,0.664,2.354,1.186,3.608,1.572c1.848,0.571,3.816,1.049,5.759,0.773c0.948-0.135,3.009-0.428,3.414-1.52  c0.168-0.457,0.217-1.095-0.132-1.485c-0.352-0.394-1.111-0.427-1.585-0.556c-0.877-0.242-1.756-0.502-2.598-0.854  c-0.174-0.071-0.351-0.146-0.522-0.229c1.097-0.437,12.216-2.129,14.548-2.164c1.229-0.018,2.438,0.119,3.654,0.271  c5.188,0.649,10.246,2.754,13.973,6.478c1.201,1.198,4.688,4.643,5.656,5.898L76.3,65.499c-0.321,0.212-0.922,0.604-1.618,1.823  c-1.621,2.826-1.836,5.104-1.662,8.087l0.02,0.311c0.078,1.366,0.166,2.914,0.854,4.134c0.151,0.267,0.959,1.596,2.065,1.596  c0.218,0,0.429-0.051,0.628-0.152c0.611-0.312,1.045-1.031,1.463-1.729c0.244-0.404,0.495-0.822,0.727-1.045  c1.061-1.018,2.197-1.816,3.922-2.76c1.488-0.813,2.957-1.193,4.621-1.193l0.164,0.002c1.535,0.025,3.201,0.22,5.093,0.598  c1.481,0.299,2.597,0.569,3.663,0.895c0.307,0.093,0.654,0.196,1.025,0.196c0.301,0,0.573-0.069,0.812-0.21  c0.412-0.24,0.674-0.615,0.76-1.087C99.02,73.936,98.329,72.758,97.938,72.279z"})),i.createElement("symbol",{id:"maphubs-icon-gorilla",viewBox:"0 0 67 77.09875",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.834,61.679C21.26,61.679,19.822,54.195,13,48C6.08,41.715,1.818,42.496,3,32  c17.764-9.237,33.223-20.777,49-32c5.59,1.41,6.402,7.598,9,12c-2.801,0.532-5.199,1.468-8,2c-1.376,3.027,0.477,3.572,0,8  c-2.375,1.645-4.299-3.845-8-4c2.368,2.632,5.623,4.377,6,9c-0.479,4.521-4.076,5.924-6,9c-0.438,9.771,1.271,17.395,4,24  c-0.744,2.256-5.609,0.391-8,1c-1.902-1.131-1.969-5.58-7-6c-2.859-4.945,0.361-11.336,1-16c-3.492-1.697-8.077,2.922-14,2  c2.17,7.83,8.206,12.472,11.874,16.011c1.166,1.125,3.596,1.042,3.557,2.501C36.377,61.511,32.584,61.679,30.834,61.679z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M54,15c1.753-0.914,4.99-0.344,6-2c0.625,4.477,3.957,15.752-6,14  C51.447,23.718,55.167,20.024,54,15"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M52,28c1.793-0.127,2.109,1.225,4,1c2.333,11.334,9.008,18.326,11,30  c-2.006,2.994-8.209,1.791-13,2c0.014-1.987,2.729-1.271,2-4c-6.367-3.633-4.016-15.984-9-21C48.014,32.68,52.535,32.868,52,28"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5,33.666c7.76,0.24,3.014,21.82,6.5,26.334c-2.566,1.848-11.361,1.399-14,0  C0.475,53.809,6.088,38.921,7.5,33.666"})),i.createElement("symbol",{id:"maphubs-icon-hummingbird",viewBox:"0 0 100 81.8825",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M92.427,17.571C70.58,27.783,75.895,29.818,59.203,33.86c0.621,1.767,0.639,3.313,1.607,5.894  c14.625-3.563,10.521-7.906,39.627-20.034C99.189,18.031,95.527,16.775,92.427,17.571z"}),i.createElement("path",{d:"M92.081,15.546c2.444-1.143,5.196-2.363,8.356-3.68c-2.645-3.579-9.394-3.813-16.598-2.852  c-9.357,1.249-19.486,4.516-22.395,5.096c-5.143,1.028-11.405,3.646-15.24,3.085c-1.35-0.197-2.16-1.087-2.717-2.358  c-1.024-2.34-1.175-5.992-2.144-9.143c-1.496-4.862-6.405-6.312-10.753-5.47c-2.792,0.541-3.927,2.104-8.79,2.571  C13.469,1.678,0.438,1.488,0.438,1.488c4.769,1.963,16.036,3.599,20.336,4.628c4.301,1.029,5.103,7.855,5.891,14.072  c0.91,7.183,2.107,15.252,7.25,22.266c5.143,7.013,11.284,7.763,16.032,7.646c2.608-0.065,8.54,3.894,12.155,6.461  c4.133,2.935,12.25,10.66,13.371,8.603c1.123-2.058-1.775-3.927-10.099-15.147c-4.072-5.49-5.877-8.91-6.808-11.383  c-0.969-2.578-0.986-4.127-1.607-5.893C74.367,29.355,70.234,25.759,92.081,15.546z"})),i.createElement("symbol",{id:"maphubs-icon-whale",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M89.445,16.084c-0.977,0.161-8.383,0.357-11.742,0.357h-5.841h-6.28c-4.234,0.05-8.605,0.849-9.93,1.395  c0,0-1.66,0.605-2.878,1.804c-0.73,0.719-2.212,3.278-2.774,4.454c-0.558-1.171-2.045-3.734-2.775-4.454  c-1.217-1.199-2.878-1.804-2.878-1.804c-1.324-0.546-5.695-1.345-9.93-1.395h-6.28h-5.841c-3.359,0-10.765-0.196-11.742-0.357  c-5.553-0.912-5.565-1.352-5.553-0.912s4.044,11.565,15.981,14.602c3.982,1.013,10.734,3.032,17.172,4.485  c5.084,1.146,5.505,4.733,5.633,6.621C44.402,49.971,34.403,82.617,31.46,95h37.079c-2.942-12.383-12.941-45.029-12.326-54.12  c0.127-1.888,0.549-5.476,5.633-6.621c6.438-1.453,13.189-3.472,17.172-4.485c11.938-3.037,15.969-14.163,15.981-14.602  S94.999,15.172,89.445,16.084z"})),i.createElement("symbol",{id:"maphubs-icon-chipmunk",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M94.385,33.357c-2.204-7.303-7.676-13.073-16.309-17.171c-0.368-0.16-21.233-8.851-33.894,15.719  c-0.262,0.424-5.436,9.052-2.651,23.129c-2.499-5.367-2.207-10.652-1.919-15.773c0.124-2.216,0.241-4.309,0.132-6.36  c-0.4-7.424-6.101-12.899-6.344-13.128c-0.343-0.324-0.834-0.447-1.284-0.32c-0.455,0.126-0.81,0.48-0.939,0.933l-1.237,4.393  C14.728,25.816,8.853,38.32,8.604,38.863c-0.243,0.534-0.113,1.164,0.322,1.558c3.144,2.847,6.586,4.24,9.849,4.802  c-7.55,4.343-13.368,10.209-13.656,10.502c-0.391,0.398-0.496,0.997-0.263,1.504c0.232,0.507,0.754,0.828,1.309,0.785  c4.183-0.261,7.725-0.052,10.695,0.409c-6.674,11.369-2.67,20.407-0.917,23.415c-6.122,1.388-7.088,5.904-7.135,6.143  c-0.078,0.395,0.026,0.804,0.283,1.114c0.255,0.31,0.637,0.491,1.039,0.491h29.318c0.05,0,0.098-0.013,0.148-0.018  c0.039,0.003,0.076,0.014,0.115,0.014c0.139,0,0.279-0.022,0.417-0.066c25.661-8.348,23.71-26.992,23.693-27.126  c-0.033-0.411-0.666-10.111,9.913-12.666c1.025-0.248,2.025-0.373,2.972-0.373c8.208,0,11.139,9.311,11.26,9.707  c0.155,0.509,0.596,0.88,1.123,0.945c0.549,0.064,1.047-0.186,1.321-0.642C90.731,58.824,98.237,46.119,94.385,33.357z   M21.428,84.181c0.727,0.057,1.388-0.503,1.442-1.244c0.055-0.742-0.503-1.388-1.244-1.442c-1.003-0.075-1.903-0.069-2.757-0.029  c-0.036-0.068-0.053-0.141-0.101-0.204c-0.074-0.095-7.145-9.485,0.913-22.285c7.002,1.65,9.951,4.624,10.012,4.686  c0.264,0.283,0.624,0.426,0.983,0.426c0.328,0,0.656-0.119,0.916-0.359c0.546-0.506,0.578-1.358,0.072-1.904  c-0.27-0.291-6.332-6.625-21.847-6.625c-0.059,0-0.12,0-0.18,0c3.091-2.721,8.591-7.107,14.554-9.721  c4.688-0.314,8.185-1.855,8.465-1.981c0.678-0.307,0.977-1.104,0.672-1.781c-0.305-0.677-1.102-0.979-1.781-0.674  c-0.116,0.053-11.375,4.983-20.025-1.95c1.598-2.816,7.385-11.256,19.5-11.672c0.585-0.02,1.092-0.417,1.251-0.981l0.827-2.938  c1.551,1.991,3.735,5.48,3.953,9.544c0.103,1.903-0.011,3.924-0.13,6.065c-0.309,5.513-0.66,11.763,2.684,18.111  c4.037,7.663,7.609,16.894-0.874,29.668H12.308C13.428,85.497,15.935,83.781,21.428,84.181z M89.373,55.455  c-1.738-3.445-5.582-8.801-12.667-8.801c-1.16,0-2.372,0.151-3.603,0.448C60.245,50.208,61.126,62.486,61.14,62.658  c0.02,0.155,1.518,14.566-17.587,22.704c7.722-11.94,3.109-22.571,2.913-23.002c-6.78-17.58-0.058-28.931,0.061-29.131  c6.808-13.203,16.005-15.975,22.521-15.975c4.604,0,7.917,1.385,7.92,1.385c7.864,3.735,12.855,8.942,14.834,15.479  C94.358,42.565,91.271,51.286,89.373,55.455z"})),i.createElement("symbol",{id:"maphubs-icon-turtle",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M9.059,60.191"}),i.createElement("circle",{cx:"88.411",cy:"51.88",r:"1.923"}),i.createElement("g",null,i.createElement("circle",{fill:"none",cx:"88.411",cy:"51.879",r:"4.711"}),i.createElement("path",{d:"M99.649,60.34c0-9.979-8.09-18.07-18.069-18.07c-1.558,0-3.061,0.218-4.503,0.589    c-6.161-11.124-18.014-18.657-31.63-18.657c-16.838,0-30.987,11.516-34.999,27.102c-0.145-0.006-0.289-0.021-0.436-0.021    C5.023,51.295,0.987,55.35,1,60.34l8.31-0.021c0,0.007,0,0.014,0,0.021h11.032l-7.365,12.756    c8.643,4.99,19.693,2.029,24.682-6.614c1.129-1.956,1.831-4.037,2.172-6.142h11.574c0.4,1.546,0.995,3.066,1.832,4.517    c4.99,8.644,16.039,11.604,24.683,6.615L71.492,60.34h10.094H99.649z M88.411,47.168c2.601,0,4.709,2.109,4.709,4.711    c0,2.601-2.108,4.71-4.709,4.71c-2.603,0-4.712-2.109-4.712-4.71C83.699,49.277,85.809,47.168,88.411,47.168z"})))),i.createElement("symbol",{id:"maphubs-icon-elephant",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M98.843,48.244L90,27.708v-0.001C89,23.92,85.585,21,81.541,21h-9.188l-4.344-1.864c-3.842-1.688-7.863-1.014-8.982,1.53  L58.871,21h0.435l-7.225,16.496c-0.485,1.104-0.28,2.467,0.576,3.799c0.891,1.383,2.365,2.587,4.152,3.373l12.99,5.5  c1.323,0.58,3.2,0.752,4.2,0.752v0.006c2,0,3.3-0.545,4.036-1.7l0.214,0.989C77.285,51.303,75.6,52,73.647,52  c-0.001,0-0.008,0-0.008,0c-1.414,0-2.918-0.336-4.341-0.961l-12.808-5.63c-1.928-0.847-3.529-2.147-4.503-3.66  c-1.006-1.563-1.232-3.216-0.637-4.574L58.436,21H36.891c-2.171-1-4.477-0.981-6.869-0.981c-30.692,0-29.34,42.737-29.34,42.737  C0.653,62.863,0.64,62.98,0.64,63.088c0,0.537,0.358,1.033,0.902,1.18c0.65,0.177,1.321-0.203,1.498-0.854l4.285-15.122  C7.503,49.146,7,53.156,7,54.553v26.339c0,1.812,0.553,3.447,1.738,4.634c1.186,1.185,3.199,1.92,5.008,1.92  c1.94,0,3.253-0.844,5.253-2.183v-15.67c0-0.461-0.09-0.835,0.371-0.835c0.231,0,0.338,0.093,0.49,0.243  c0.15,0.152,0.139,0.36,0.139,0.592v15.923c0,0.092,0.034,0.18,0.121,0.265c1.184,1.187,2.671,1.921,4.48,1.921  c3.62,0,6.399-2.935,6.399-6.554V70h-0.087l0.518-0.35c2.569-0.371,5.171-3.155,7.475-4.403l0.58-0.068  c-0.377,5.285,6.064,5.246,5.166,15.305c0.042,2.181,0.743,3.428,1.929,4.615c1.184,1.184,2.944,1.909,4.752,1.909  c3.618,0,6.668-2.943,6.668-6.562V61.839c1-0.1,2-1.774,2-1.936v21.184c0,1.809,0.585,3.448,1.774,4.634  c1.182,1.186,2.843,1.919,4.651,1.919c3.617,0,6.574-2.935,6.574-6.553V54.746C73,54.63,73.014,54,73.115,54h8.426  c5.011,0,0.22-5.085,1.115-5.406c0.894-0.32,2.203,4.456,4.193,3.333l0.571,1.278c0.194,0.446,0.673,26.489,0.673,26.489  c0,1.101,0.446,2.088,1.167,2.809c0.72,0.721,1.717,1.162,2.816,1.162c2.199,0,4.028-1.785,4.028-3.985  C96.105,79.68,100.225,51.416,98.843,48.244z M87.164,40.433c-0.502,0.609-1,0.959-1.785,0.959c-1.442,0-2.379-1.172-2.379-2.613  c0-0.021,0-0.043,0-0.065c0-1.402,0.968-2.546,2.379-2.546c1.44,0,2.49,1.172,2.49,2.612C87.869,39.38,87.543,39.967,87.164,40.433z  "})),i.createElement("symbol",{id:"maphubs-icon-wolf",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M98.984,51.463c0.269-1.746,0.786-1.177,0.487-2.744c-0.082-0.43-0.298-0.845-0.491-1.602 c-0.198-0.777-0.796-2.059-0.986-2.826c-0.233-0.956,0.005-1.373-0.207-2.343c-0.214-0.978-0.732-1.394-0.908-2.382 c-0.11-0.622-1.562-1.575-1.7-2.211c-0.231-1.065-1.338-1.941-2.193-2.709c-0.914-0.825-2.053-3.304-2.702-4.463 c-0.492-0.877-2.316-2.059-3.434-2.875c-1.888-2.316-3.02-3.974-6.505-5.328c-3.612-1.405-6.908-0.986-10.79-1.079 c-2.366-0.058-4.646,0-7.012,0c-2.092,0-3.247-0.924-5.313-0.612c-2.018,0.304-3.112-0.613-5.057-1.226 c-1.112-0.351-2.512-0.407-3.727-0.412c-0.666-0.004-1.533,0.164-2.085-0.197c0.135-0.329,0.499,0.05,0.81-0.369 c0.311-0.419-3.866-0.45-5.803-0.689c-1.938-0.239-2.867-1.742-4.25-2.036c-1.383-0.295-5.569-2.987-6.727-3.559 c-0.662-0.327-2.934-1.412-5.121-2.327c-0.862-0.36-0.29-0.47-1.127-1.069c-0.837-0.598-3.17-1.091-3.769-1.33 c-0.599-0.24-2.369-0.572-3.928-2.643c0,0-2.032-2.151-2.272-1.552C14,3.314,14.018,4.344,13.935,4.719 c-0.033,0.144-0.08,0.19-0.158,0.07c-0.537-0.4-3.911-2.172-4.156-1.751c-0.244,0.421,2.99,4.833,2.731,5.031 c-0.257,0.198-0.542,0.114-0.736,0.389c0,0-1.378,1.246-1.6,1.513c-0.363,0.44-1.545,1.663-1.545,1.663s-0.662,1.658-0.765,2.659 L7.585,15.02l-0.517,0.866c-1.861,1.567-3.192,3.021-3.654,3.225c-0.461,0.205-2.729,1.396-3.215,1.762 c-0.693,0.519,0.039,1.661,0.626,1.942c0.204,0.229,0.38,0.516,0.595,0.66c1.454,0.981,1.768,0.426,2.335,0.507l1.047-0.135 c0.387-0.102,0.477-0.211,0.643-0.271c0.476-0.173,1.205-0.553,1.726-0.813c0.519-0.259,2.24-1.698,2.587-1.914 c0.346-0.215,1.299-0.711,1.776-0.842c0.476-0.129,0.864-0.043,0.864-0.043s-0.736,0.562-0.952,0.692s-0.969,0.782-1.358,1.214 c-0.389,0.432-1.558,1.982-1.558,1.982s-0.727,0.349-0.927,0.539c-0.304,0.287-0.674,0.674-0.674,0.674s0.161-0.003-0.186-0.219 c-0.347-0.215-0.402-0.168-0.272,0.265c0.131,0.433,0.086,0.257,0.086,0.257s-0.405,0.542-0.691,0.997 c-0.448,0.709-0.652,1.528-0.659,1.54c-0.101,0.608,0.306,0.643,0.879-0.135c0.033-0.083,0.387-0.563,0.387-0.563 s0.102-0.161,0.188,0.056c0.087,0.217-0.087,0.282,0.114,0.433c0.718,0.369,1.303,0.613,1.754,0.506 c0.994-0.236,1.558-1.053,2.354-1.663c1.527-1.171,1.875-1.552,2.442-1.914c0.668-0.427,0.882-0.44,1.083,1.455 c0.101,0.959-0.212,1.482-0.096,2.1c0.073,0.395,0.185-0.826,0.288-0.443c0.247,0.931,0.854,1.923,0.854,1.923l0.082-0.494 c0,0,0.384,0.409,0.637,0.76c0.701,0.976,0.486,0.004,0.603-0.39c0,0-0.168,0.694,0.638,1.579c0.186-0.442,0.765,0.514,1.464,1.385 c1.167,1.452,3.289,4.078,3.33,3.601c0.123-1.4,0.302-0.069,0.302-0.069c1.373,1.146,3.417,4.412,4.846,6.1 c0.168,0.2,0.421,0.197,0.581,0.076c0.161-0.125,0.537-0.042,1.402,0.782c0.107,0.168,0.466,1.062,0.571,1.229 c0.269,0.428,1.157,0.226,1.357,0.687c0.168,0.384,0.304,0.757,0.467,1.095c0.508,1.058,0.899,1.24,1.399,2.375 c0.482,1.094,0.709,2.767,0.785,3.986c0.232,3.772-0.143,6.432-0.407,8.37c-0.229,1.685-0.812,3.174-0.955,4.891 c-0.104,1.252-0.193,2.354-0.589,3.544c-0.271,0.818-0.547,1.411-0.793,2.226c-0.206,0.686-0.962,1.858-1.487,2.243 c-0.815,0.601-1.693,0.175-2.659,0.377c-0.221,0.048-0.186,0.134-0.636,0.383l-0.702,0.136c-0.511,0.281-0.865,0.834-0.973,1.137 c-0.21,0.586,0,0.681,0.467,0.805c0.355,0.095,1.279,0.15,1.716,0.17c0.942,0.041,1.892-0.22,2.757,0.021 c0.158,0.045,0.388,0.323,0.848,0.359c0.669,0.053,1.663-0.021,2.056-0.021c0.798,0,1.216-0.064,2.015-0.064 c1.247,0,1.293,0.204,2.451-0.085c1.423-0.356,3.366,0.01,3.889-0.403c0.16-0.126,0.104-0.845,0.403-1.271 c0.499-0.71,0.309-1.016,0.561-1.194c0.251-0.179,0.483,0.636,0.636,0.181c0.152-0.455,1.193-2.911,1.697-4.062 c0.504-1.149,0.666-1.32,1.153-2.485c0.27-0.646,0.592-1.221,0.606-1.91c-0.292,1.566,0.345-2.08,0.243-1.91 c0.511-1.191,0.165-0.089,0.575-1.333c0.778-2.362,0.479-4.726,0.954-7.196c0.193-1.011,0.788-1.878,0.988-2.895 c0.098-0.499-0.063-1.342,0.157-1.773c0.253-0.497,1.381-0.97,1.835-1.384c0.741-0.675,1.464-1.142,2.32-1.654 c0.849-0.509,1.44-1.326,2.334-1.75c0.911-0.432,1.135-0.194,2.121-0.057c1.626,0.228,2.963-0.316,4.458-0.446 c1.671-0.146,1.311,0.291,1.715,0.256l0.973-0.074c0.811,0.088,1.889-0.471,2.711-0.188c1.25,0.431,1.247,2.688,1.849,3.739 c1.511,2.643,4.66,5.696,5.783,6.205c1.212,0.547,1.734,2.033,2.843,2.871c1.572,1.194,2.477,2.672,3.302,4.583 c1.12,2.585,0.673,4.939-0.324,7.363c-0.524,1.272-0.832,1.979-1.875,2.673c-0.493,0.33-1.734-0.079-2.273,0.227 c-0.281,0.158-0.826,0.551-1.058,0.676c-0.637,0.345-1.805,1.008-1.303,1.772c0.626,0.955,2.118,0.104,3.092,0.382 c1.003,0.286,1.836-0.158,2.933-0.158c0.822,0.002,2.381,0.1,2.935-0.519c0.341-0.382,0.417-0.609,0.557-1.06 c0.152-0.5,0.207-1.135,0.52-1.597c0.239-0.351,0.732-0.985,0.834-1.303c0.173-0.544-0.023-1.26,0.203-1.751 c0.354-0.77,1.392-1.949,1.744-2.855c0.249-0.637-0.021-2.544,0.855-2.687c-0.07-1.007-0.217-1.44,0.228-2.092 c0.418-0.615-0.819-1.308-1.145-1.973c-0.423-0.873-0.833-1.552-1.618-2.23c-0.892-0.771-1.803-1.771-3.007-2.674 c2.31,0.899,4.749,2.532,6.265,4.504c1.354,1.763,2.673,3.804,2.943,6.021c0.23,1.865,1.225,4.907-0.012,5.894 c-0.528,0.422-1.086,0.486-1.477,0.885c-0.277,0.284-0.538,0.95-0.87,1.5c-0.131,0.217-0.425,0.444-0.483,0.636 c-0.104,0.334-0.264,0.72-0.12,0.957c0.124,0.207,0.596,0.409,0.937,0.519c0.159,0.052,0.623-0.026,0.833,0 c1.018,0.132,2.162,0.106,3.132-0.22c0.565-0.191,1.277-0.469,1.823-0.704c0.838-0.364,0.729-0.325,1.289-1.018 c-0.32,0.589-0.256-1.101-0.297-1.094c0.055-0.904-0.247-1.118-0.184-2.01c0.044-0.62,0.358-1.254,0.395-1.933 c0.09-1.687,0.534-3.886,0.307-5.551c-0.158-1.161-1.038-1.532-1.582-2.596c-0.346-0.679-0.71-1.299-1.175-1.926 c-0.194-0.261-0.766-2.257-2.212-4.46c-1.618-2.463-3.232-4.132-3.401-4.781c-0.126-0.175-1.374-1.34-1.812-2.548 c-0.086-0.237-0.298-1.395-0.086-1.457c0.218-0.065,0.293,0.572,0.583,0.881c0.523,0.562,1.333,1.597,1.688,1.775 c-0.004,0.03,0.571,1.563,0.586,1.613c0.285,0.391,1.5,1.07,1.973,2.145c0.944,2.146,2.451,3.239,2.917,4.636 c0.093,0.275,0.922,0.545,1.588,1.329c1.093,1.287,2.434,2.406,2.533,1.847c0.104-0.591-0.052-2.006,0.171-2.79 c0.169-0.599,0.708-1.592,0.635-2.061C99.087,53.45,98.766,52.887,98.984,51.463z M39.62,64.505 c-0.325,0.544-0.445,3.646-0.614,4.431c-0.092,0.424-1.09,2.043-1.167,2.796c-0.086,0.848-1.784,2.213-1.784,2.213 s-0.449-0.32-0.531-0.554c-0.081-0.234,0.254-0.619,0.449-1.062c0.176-0.4,0.281-1.26,0.488-1.676 c0.435-0.869,0.122-0.632,0.231-1.283s0.601,0.16,1.104-0.879c0.123-0.249,0.115-0.56,0.213-0.892 c0.05-0.164,0.018-0.581,0.148-0.678c0.202-0.149,0.569,0.042,0.509-0.211c-0.054-0.223,0.132-1.674,0.057-1.95 c-0.077-0.279,0.038-1.482,0.243-2.152c0.673-2.203,0.752-4.832,1.061-4.336C40.178,58.516,39.946,63.961,39.62,64.505z"
})),i.createElement("symbol",{id:"maphubs-icon-truck",viewBox:"0 0 100 51.086",preserveAspectRatio:"xMidYMid meet"},i.createElement("circle",{cx:"13.955",cy:"42.837",r:"8.249"}),i.createElement("circle",{cx:"76.521",cy:"42.837",r:"8.249"}),i.createElement("rect",{x:"32.363",width:"67.637",height:"32.322"}),i.createElement("path",{d:"M70.126,34.587H28.073V7.999L6.438,9.646c0,0-4.745,11.746-6.438,15.884v11.202v4.021c0,1.151,0.933,2.084,2.083,2.084 h1.432c0-5.767,4.675-10.44,10.44-10.44c5.767,0,10.44,4.674,10.44,10.44h41.686C66.081,39.48,67.666,36.497,70.126,34.587z M19.733,23.681L3.08,25.775l4.81-12.491l11.844-0.903V23.681z"}),i.createElement("path",{d:"M99.944,34.587H82.917c2.46,1.91,4.045,4.894,4.045,8.25h2.437h4.322l6.244-2.211L99.944,34.587z"})),i.createElement("symbol",{id:"maphubs-icon-cargo-ship",viewBox:"0 0 120 150",preserveAspectRatio:"xMidYMid meet"},i.createElement("polygon",{points:"-715.8,-44.8 -791.8,-44.8 -801.8,-51.5 -801.8,-60.1 -705.8,-60.1 "}),i.createElement("rect",{x:"-801.8",y:"-89.9",width:"17.5",height:"29.8"}),i.createElement("line",{x1:"-793",y1:"-89.9",x2:"-793",y2:"-99.1"}),i.createElement("line",{x1:"-801.8",y1:"-44.8",x2:"-705.8",y2:"-44.8"}),i.createElement("rect",{x:"-796.4",y:"-70",width:"6.8",height:"9.9"}),i.createElement("g",null,i.createElement("rect",{x:"-784.3",y:"-67.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-771",y:"-67.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-757.6",y:"-67.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-744.3",y:"-67.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-731",y:"-67.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-784.3",y:"-75.1",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-771",y:"-75.1",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-757.6",y:"-75.1",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-784.3",y:"-82.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-771",y:"-82.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-757.6",y:"-82.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-744.3",y:"-75.1",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-731",y:"-75.1",width:"13.3",height:"7.5"})),i.createElement("g",null,i.createElement("path",{d:"M21,33.3c0-0.6-0.5-1-1-1c-0.6,0-1,0.5-1,1v8.3h2V33.3z"}),i.createElement("path",{d:"M109,85.7h-7l-1.3,2h8.3c0.6,0,1-0.5,1-1C110,86.1,109.5,85.7,109,85.7z"}),i.createElement("path",{d:"M11,85.7c-0.6,0-1,0.5-1,1c0,0.6,0.5,1,1,1h6.8l-3.1-2H11z"}),i.createElement("polygon",{points:"107.1,74.1 96.9,74.1 83.3,74.1 69.7,74.1 56.1,74.1 42.5,74.1 28.9,74.1 23.4,74.1 16.5,74.1 12,74.1 12,81.3    21.5,87.7 98.2,87.7  "}),i.createElement("path",{d:"M15.5,63c0-0.6,0.5-1,1-1h6.9c0.6,0,1,0.5,1,1v9.1h3.4v-6.6v-7.7v-7.7v-6.4H12v28.4h3.4V63z"}),i.createElement("rect",{x:"17.5",y:"64",width:"4.8",height:"8.1"}),i.createElement("rect",{x:"29.9",y:"66.5",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"43.5",y:"66.5",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"57.1",y:"66.5",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"70.7",y:"66.5",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"84.3",y:"66.5",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"29.9",y:"58.8",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"43.5",y:"58.8",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"57.1",y:"58.8",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"29.9",y:"51.2",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"43.5",y:"51.2",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"57.1",y:"51.2",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"70.7",y:"58.8",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"84.3",y:"58.8",width:"11.6",height:"5.6"}))),i.createElement("symbol",{id:"maphubs-icon-tug-boat",viewBox:"0 0 90 112.5",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M66.8,18.7l0,25l20.1-5.8L74.4,75.5l-63.9,3.7L5.7,66.9l54.6-12.5l-0.4-3L14.8,62.3l-1.3-3.5l24.6-5.4l-0.2-28.7l-3.1,0.6   l-0.3-3.7l6-1.5v-8.2h-2.6v-3h9.5v2.8h-2.6v7.4l25.7-5l0.3,3.8L66.8,18.7z M56.1,39c4,0,7.3-3.3,7.3-7.3s-3.3-7.3-7.3-7.3   s-7.3,3.3-7.3,7.3S52.1,39,56.1,39z"}),i.createElement("polygon",{points:"2.1,58.7 6.1,67.9 65,57.3 62,47.9  "}))),i.createElement("symbol",{id:"maphubs-icon-boat",viewBox:"0 0 763.17 953.9625",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M742.981,346.057c4.425,16.63,0.506,29.036-6.658,41.065c-51.952,87.241-124.926,147.343-223.962,173.905  c-59.403,15.932-119.879,19.647-181.122,17.261c-55.904-2.177-109.105-14.367-159.803-37.946  c-59.671-27.752-128.118-79.646-150.96-143.741c-4.411-12.378-2.205-20.409,7.962-28.155c4.992-3.803,10.86-6.739,16.73-9.063  c98.775-39.113,199.236-73.166,303.138-95.807c45.529-9.921,91.79-16.558,137.817-24.092c24.411-3.996,49.123-6.174,73.511-10.286  c9.837-1.659,18.139-0.437,26.259,4.782c2.378,1.528,5.092,2.555,7.392,4.18C643.564,273.706,695.162,307.437,742.981,346.057z   M552.123,419.154c-13.897-16.568-85.941-83.332-152.726-131.28c-42.549,7.451-86.178,17.136-131.318,32.596  c50.568,45.044,96.118,85.619,144.536,128.748C466.489,443.105,504.5,436.859,552.123,419.154z M454.333,278.333  c26.047,22.465,49.822,43.181,73.832,63.619c24.196,20.597,47.34,42.552,74.968,59.946c31.967-12.923,64.045-24.872,93.363-45.818  c-4.613-4.706-9.578-8.851-9.578-8.851c-27.808-20.825-55.642-41.617-83.6-62.24c-3.342-2.465-20.655-14.094-20.655-14.094  s-10.172-8.298-18.154-7.995c-29.219-3.019-52.783,3.712-81.853,9.294C474.492,273.762,466.231,275.671,454.333,278.333z   M74.483,385.758c42.932,24.186,85.454,39.175,129.459,49.335c76.526,17.671,122.266,26.699,143.338,18.719  c-42.087-37.582-91.347-80.825-133.393-118.371C167.263,349.764,122.15,365.482,74.483,385.758z"})),i.createElement("symbol",{id:"maphubs-icon-video",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M93.5,17.5c-1.4,0-2.5,1.1-2.5,2.5v3h-4v-3c0-1.4-1.1-2.5-2.5-2.5S82,18.6,82,20v3H18v-3c0-1.4-1.1-2.5-2.5-2.5    S13,18.6,13,20v3H9v-3c0-1.4-1.1-2.5-2.5-2.5S4,18.6,4,20v61c0,1.4,1.1,2.5,2.5,2.5S9,82.4,9,81v-3h4v3c0,1.4,1.1,2.5,2.5,2.5    S18,82.4,18,81v-3h64v3c0,1.4,1.1,2.5,2.5,2.5S87,82.4,87,81v-3h4v3c0,1.4,1.1,2.5,2.5,2.5S96,82.4,96,81V20    C96,18.6,94.9,17.5,93.5,17.5z M87,48h4v5h-4V48z M91,43h-4v-5h4V43z M87,58h4v5h-4V58z M91,28v5h-4v-5H91z M9,48h4v5H9V48z     M13,43H9v-5h4V43z M9,58h4v5H9V58z M13,28v5H9v-5H13z M9,73v-5h4v5H9z M18,73V28h64v45H18z M87,73v-5h4v5H87z"}),i.createElement("path",{d:"M37.2,50V37.2c0-1.4,1.6-2.3,2.8-1.6L50.9,42l11,6.4c1.2,0.7,1.2,2.5,0,3.2l-11,6.4L40,64.4c-1.2,0.7-2.8-0.2-2.8-1.6V50z    "}))),i.createElement("symbol",{id:"maphubs-icon-play",viewBox:"0 0 80 100",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",{transform:"translate(0,-972.36218)"},i.createElement("path",{style:{direction:"ltr",blockProgression:"tb",baselineShift:"baseline",enableBackground:"accumulate"},d:"m 40,991.36218 c -11.5743,0 -21,9.42572 -21,21.00002 0,11.5743 9.4257,21 21,21 11.5742,0 21,-9.4257 21,-21 0,-11.5743 -9.4258,-21.00002 -21,-21.00002 z m 0,4 c 9.4124,0 17,7.58752 17,17.00002 0,9.4125 -7.5876,17 -17,17 -9.4125,0 -17,-7.5875 -17,-17 0,-9.4125 7.5875,-17.00002 17,-17.00002 z m -6,6.00002 0,22 18,-11 -18,-11 z",fillOpacity:"1",stroke:"none",visibility:"visible",display:"inline",overflow:"visible"}))),i.createElement("symbol",{id:"maphubs-icon-oil",viewBox:"0 0 74 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M71,94V84H3v10c-1.656,0-3,1.343-3,3s1.344,3,3,3h68c1.657,0,3-1.343,3-3S72.657,94,71,94z"}),i.createElement("path",{d:"M3,6v10h68V6c1.657,0,3-1.343,3-3s-1.343-3-3-3H3C1.344,0,0,1.343,0,3S1.344,6,3,6z"}),i.createElement("path",{d:"M3,22v56h68V22H3z M37,65c-5.523,0-10-4.477-10-10c0-5.523,10-20,10-20s10,14.477,10,20C47,60.523,42.523,65,37,65z"})),i.createElement("symbol",{id:"maphubs-icon-tractor",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("g",null,i.createElement("path",{d:"M59.451,24.196c0.992-0.205,2.009-0.155,3.014-0.157c5.159,0.002,10.322,0.002,15.482,0    c1.146,0.008,2.375,0.157,3.288,0.917c1.015,0.782,1.69,2.014,1.644,3.312c-0.002,5.163,0.008,10.326-0.005,15.488    c-0.212,2.15,1.45,3.802,2.122,5.724c-0.844,1.755-1.718,3.492-2.605,5.226c-2.342-0.76-4.84-1.25-7.303-0.928    c-4.633,0.325-9.049,2.768-11.88,6.439c-2.272,2.941-3.604,6.646-3.545,10.38c-9.366,0.036-18.734,0.008-28.1,0.013    c-1.375-3.768-4.539-6.867-8.425-7.953c-2.587-0.81-5.36-0.553-7.926,0.189c-0.024-4.363-0.003-8.729-0.013-13.094    c-0.026-1.568,0.739-3.186,2.145-3.951c1.353-0.816,2.983-0.527,4.481-0.577c4.156-0.044,8.322,0.091,12.473-0.066    c-0.052-5.619-0.01-11.235-0.023-16.854c1.41-0.01,2.821-0.013,4.231,0.003c0.008,5.637-0.008,11.275,0.005,16.913    c3.511,0.013,7.021,0.005,10.533,0.002c2.538-6.138,4.928-12.339,7.436-18.49C56.99,25.475,58.125,24.49,59.451,24.196z     M61.491,28.349c-0.794,0.089-1.416,0.708-1.678,1.435c-1.681,4.187-3.359,8.375-5.026,12.567    c-0.542,1.303,0.493,2.908,1.924,2.865c5.854,0.021,11.709,0.003,17.561,0.008c1.141,0.1,2.299-0.847,2.268-2.024    c0.014-4.279,0.014-8.559,0-12.838c0.047-1.206-1.127-2.14-2.281-2.059C70.004,28.328,65.742,28.237,61.491,28.349z"})),i.createElement("g",null,i.createElement("path",{d:"M74.371,55.965c3.309-0.488,6.789,0.152,9.67,1.863c3.75,2.156,6.43,6.062,7.119,10.328    c0.646,3.611-0.191,7.435-2.182,10.502c-2.203,3.422-5.865,5.83-9.866,6.541c-2.947,0.392-6.049,0.178-8.745-1.164    c-4.245-1.924-7.477-5.985-8.316-10.58c-0.709-3.492-0.084-7.239,1.726-10.312C65.971,59.303,69.995,56.594,74.371,55.965z     M75.417,62.232c-3.659,0.434-6.77,3.538-7.226,7.196c-0.512,3.33,1.214,6.838,4.143,8.489c3.445,2.074,8.32,1.201,10.787-1.992    c2.499-2.96,2.489-7.672,0.016-10.646C81.338,62.996,78.286,61.82,75.417,62.232z"})),i.createElement("g",null,i.createElement("path",{d:"M18.255,64.34c2.446-0.27,4.981,0.24,7.045,1.607c2.802,1.762,4.625,4.93,4.821,8.226    c0.184,2.911-0.889,5.886-2.929,7.976c-1.99,2.064-4.848,3.346-7.737,3.209c-2.86,0.076-5.664-1.256-7.604-3.324    c-2.344-2.455-3.327-6.086-2.612-9.395C10.084,68.324,13.891,64.832,18.255,64.34z M18.534,69.855    c-2.231,0.451-4.009,2.541-4.024,4.827c-0.123,2.437,1.783,4.78,4.195,5.142c0.921,0.065,1.899,0.107,2.764-0.281    c1.993-0.807,3.383-2.946,3.144-5.109C24.51,71.479,21.398,69.18,18.534,69.855z"})))),i.createElement("symbol",{id:"maphubs-icon-farmer",viewBox:"0 0 169.917 321.99375000000003",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M87.571,38.513c2.079-11.416,12.09-20.101,24.097-20.101c12.006,0,22.017,8.685,24.096,20.101   c20.142-1.733,34.153-5.568,34.153-10.025c0-5.103-18.362-15.919-43.273-19.271C126.406,4.103,119.8,0,111.667,0   c-8.133,0-14.739,4.103-14.978,9.217c-17.916,2.411-32.443,8.682-39.19,13.913v9.407C63.053,35.19,73.893,37.336,87.571,38.513z"}),i.createElement("path",{d:"M19.128,101.597c-3.996,1.885-5.707,6.653-3.822,10.649c1.364,2.894,4.24,4.59,7.241,4.59c0.067,0,0.135-0.009,0.203-0.011   V99.898C21.546,100.46,20.339,101.025,19.128,101.597z"}),i.createElement("path",{d:"M73.076,95.227c4.461-1.858,8.356-3.451,11.546-4.741v154.746c0,6.83,5.537,12.363,12.363,12.363   c6.828,0,12.365-5.533,12.365-12.363V154.96h4.635v90.271c0,6.83,5.537,12.363,12.363,12.363c6.828,0,12.365-5.533,12.365-12.363   V95.482c0.593,1.216,1.191,2.611,1.781,4.238c2.819,7.813,5.189,20.63,5.18,40.638c0,5.516-0.177,11.574-0.565,18.224   c-0.257,4.411,3.109,8.195,7.52,8.452c0.159,0.009,0.318,0.014,0.475,0.014c4.205,0,7.729-3.283,7.979-7.535   c0.404-6.933,0.591-13.299,0.591-19.156c-0.04-30.182-4.861-46.887-11.434-56.932c-3.285-4.986-7.128-8.183-10.68-9.955   c-2.319-1.169-4.445-1.72-6.14-1.964c-0.766-0.254-1.583-0.398-2.436-0.398H92.351c-0.681,0-1.338,0.097-1.967,0.262   c-0.774,0.056-1.554,0.225-2.316,0.521v-0.002c-0.09,0.036-25.279,9.792-55.317,23.409v17.597   C47.813,105.939,62.108,99.798,73.076,95.227z"}),i.createElement("circle",{cx:"111.668",cy:"42.913",r:"22.5"}),i.createElement("path",{d:"M24.75,255.5h6v-184H48.5c3.867-0.002,6.997-3.133,6.999-7.001V18.834H49.5v45.665c-0.002,0.55-0.45,1-1,1H30.75V18.833h-6   v46.666H6.999c-0.55,0-1-0.45-1-1V18.834H0v45.665c0.002,3.868,3.132,6.999,6.999,7.001h17.75V255.5z"}))),i.createElement("symbol",{id:"maphubs-icon-clipboard",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M37.532,24.217h24.473c1.423,0,2.577-1.142,2.577-2.584v-3.849c0-1.427-1.152-2.584-2.583-2.584h-3.858   c0,0,0-9.017-8.373-9.017c-8.373,0-8.403,9.017-8.403,9.017h-3.84c-1.42,0-2.571,1.142-2.571,2.584v3.849   C34.954,23.06,36.116,24.217,37.532,24.217z"}),i.createElement("path",{d:"M76.221,17.428h-4.687v4.202h4.687c0,0,4.202,0,4.202,4.201v59.582c0,4.635-4.202,4.202-4.202,4.202H23.779   c0,0-4.202,0-4.202-4.202V25.831c0-4.201,4.202-4.201,4.202-4.201h4.684v-4.202h-4.684c0,0-8.404,0-8.404,8.403   c0,24.329,0,59.582,0,59.582c0,8.404,8.404,8.404,8.404,8.404h52.441c0,0,8.404,0,8.404-8.404V25.831   C84.625,17.428,76.221,17.428,76.221,17.428z"}),i.createElement("rect",{x:"27.553",y:"55.001",width:"44.894",height:"4.588"}),i.createElement("rect",{x:"27.553",y:"71.729",width:"44.894",height:"4.588"}),i.createElement("rect",{x:"27.553",y:"38.273",width:"44.894",height:"4.588"}))),i.createElement("symbol",{id:"maphubs-icon-hand-one",viewBox:"0 0 5000000 6250000",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{fill:"black",d:"M2123689 843452c-58112,0 -110909,23859 -149296,62128 -38269,38387 -62128,91184 -62128,149296l0 1854979 0 0c-118,11457 -4843,23033 -14056,31301 -17362,15354 -43820,13819 -59175,-3426 -11221,-12638 -22205,-24331 -32953,-35080l-2127 -2126c-97798,-97798 -212014,-165359 -329065,-183194 -112681,-17009 -229495,12520 -338042,107011l1019087 1019087c199376,199376 459581,307451 719786,312884 251347,5315 502812,-85278 699353,-281702 288553,-288670 288316,-644311 287962,-1025111l0 -34371 -118 0 0 -565530c0,-58112 -23859,-110909 -62128,-149296 -38387,-38269 -91184,-62128 -149296,-62128 -58112,0 -111027,23859 -149296,62128 -38387,38387 -62128,91184 -62128,149296l0 151659c0,23150 -18780,41930 -42049,41930l-2480 0c-23150,0 -41930,-18780 -41930,-41930l0 -312766c0,-58112 -23741,-110909 -62128,-149296 -38269,-38387 -91184,-62128 -149296,-62128 -58112,0 -110909,23741 -149296,62128 -38269,38387 -62128,91184 -62128,149296l0 312766c0,23150 -18781,41930 -41931,41930l-2480 0c-23151,0 -41931,-18780 -41931,-41930l0 -453440c0,-58112 -23859,-111027 -62128,-149296 -38387,-38387 -91184,-62128 -149296,-62128 -58112,0 -111027,23741 -149296,62128 -38387,38269 -62128,91184 -62128,149296l0 453440c0,23150 -18780,41930 -42048,41930l-2481 0c-23150,0 -41930,-18780 -41930,-41930l0 -1346381c0,-58112 -23741,-110909 -62128,-149296 -38269,-38269 -91184,-62128 -149296,-62128z"}))),i.createElement("symbol",{id:"maphubs-icon-magnifier",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M100,80.665L76.874,57.537c2.457-5.213,3.834-11.037,3.834-17.185C80.708,18.065,62.641,0,40.354,0   C18.067,0,0,18.065,0,40.353c0,22.289,18.067,40.355,40.354,40.355c6.147,0,11.971-1.375,17.186-3.835L80.665,100L100,80.665z    M19.526,40.353c0-11.5,9.325-20.826,20.827-20.826c11.503,0,20.828,9.326,20.828,20.826c0,11.503-9.325,20.828-20.828,20.828   C28.852,61.181,19.526,51.855,19.526,40.353z"}))),i.createElement("symbol",{id:"maphubs-icon-wifi",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M8.055,46.753L0,40.33c10.822-16.073,29.188-26.647,50.022-26.647c20.806,0,39.147,10.543,49.978,26.575l-8.078,6.388   C82.995,32.977,67.566,23.94,50.022,23.94C32.436,23.94,16.97,33.023,8.055,46.753z M50.056,59.838   c6.134,0,11.364,3.936,13.304,9.412l8.248-6.521c-4.053-7.771-12.182-13.077-21.552-13.077c-9.458,0-17.649,5.402-21.665,13.29   l8.264,6.588C38.512,63.906,43.816,59.838,50.056,59.838z M50.124,41.355c11.993,0,22.478,6.45,28.181,16.067l7.979-6.307   C78.697,39.1,65.303,31.115,50.042,31.115c-15.319,0-28.756,8.043-36.326,20.136l8.073,6.438   C27.455,47.925,38.023,41.355,50.124,41.355z M49.999,68.639c-4.882,0-8.839,3.959-8.839,8.841c0,4.881,3.957,8.838,8.839,8.838   c4.883,0,8.841-3.957,8.841-8.838C58.84,72.598,54.882,68.639,49.999,68.639z"}))),i.createElement("symbol",{id:"maphubs-icon-money",viewBox:"0 0 512 640",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M512.188,320V0h-512v320H66.75c1.75,5.594,4.313,10.969,7.828,16c-6.719,9.625-10.391,20.375-10.391,32  s3.672,22.375,10.391,32c-6.719,9.625-10.391,20.375-10.391,32c0,47.125,59.219,80,144,80s144-32.875,144-80  c0-11.625-3.656-22.375-10.375-32c0,0-0.031,0-0.031,0.031c6.719-9.625,10.406-20.406,10.406-32.031s-3.656-22.375-10.375-32  c0,0-0.031,0-0.031,0.031c3.5-5.031,6.094-10.406,7.844-16.031H512.188z M66.75,288H32.188V32h448v256H349.625  c-1.75-5.625-4.313-11-7.844-16.031c0,0.031,0.031,0.031,0.031,0.031h74.375c0-26.531,21.5-48,48-48V96c-26.5,0-48-21.469-48-48  H294.156c24.938,21.688,42.031,63.438,42.031,112c0,34.188-8.594,64.813-22.313,87.625C288.375,232.813,251.766,224,208.188,224  c-7.188,0-13.922,0.563-20.734,1c0.031,0,0.047,0,0.063,0c-7.156-18.969-11.328-41.125-11.328-65c0-48.563,17.125-90.313,42-112  h-122c0,26.531-21.5,48-48,48v128c20.25,0,37.5,12.563,44.547,30.313C79.906,263.844,70.75,275.125,66.75,288z M368.188,160  c0-13.25,10.75-24,24-24s24,10.75,24,24s-10.75,24-24,24S368.188,173.25,368.188,160z M331.063,260.25  c-0.469-0.438-0.75-0.938-1.25-1.375C330.313,259.313,330.594,259.813,331.063,260.25z M96.188,160c0-13.25,10.75-24,24-24  s24,10.75,24,24s-10.75,24-24,24S96.188,173.25,96.188,160z M208.188,480c-61.859,0-112-21.5-112-48c0-3.5,0.969-6.875,2.625-10.156  C124.391,438.125,162.313,448,208.188,448s83.813-9.875,109.375-26.156c1.656,3.281,2.625,6.656,2.625,10.156  C320.188,458.5,270.063,480,208.188,480z M208.188,416c-61.859,0-112-21.5-112-48c0-3.5,0.969-6.875,2.625-10.156  C124.391,374.125,162.313,384,208.188,384s83.813-9.875,109.375-26.156c1.656,3.281,2.625,6.656,2.625,10.156  C320.188,394.5,270.063,416,208.188,416z M208.188,352c-61.859,0-112-21.5-112-48s50.141-48,112-48c61.875,0,112,21.5,112,48  S270.063,352,208.188,352z"})),i.createElement("symbol",{id:"maphubs-icon-campfire",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M74.256,81.934l-6.426-2.04l6.426-2.039c0.271-0.085,0.498-0.276,0.629-0.53c0.131-0.252,0.156-0.547,0.07-0.817   l-2.553-8.047c-0.178-0.564-0.776-0.876-1.349-0.698L50.32,74.34l-20.733-6.578c-0.567-0.178-1.171,0.134-1.348,0.698l-2.555,8.047   c-0.084,0.27-0.06,0.565,0.071,0.817c0.132,0.253,0.358,0.444,0.629,0.53l6.426,2.039l-6.426,2.04   c-0.564,0.178-0.878,0.781-0.698,1.346l2.553,8.047c0.085,0.271,0.275,0.497,0.529,0.628c0.153,0.08,0.322,0.121,0.493,0.121   c0.107,0,0.219-0.017,0.325-0.05l20.733-6.578l20.733,6.578c0.106,0.033,0.218,0.05,0.325,0.05c0.172,0,0.34-0.041,0.493-0.121   c0.254-0.131,0.444-0.357,0.53-0.628l2.553-8.047C75.132,82.715,74.82,82.112,74.256,81.934z"}),i.createElement("path",{d:"M50.646,65.841c26.751-2.229,16.186-36.697,11.396-44.995C56.646,11.498,49.336,5.523,49.336,5.523   c1.946,14.062-3.691,23.684-3.691,23.684l-5.788-6.953c-2.086,16.911-11.338,23.52-5.473,34.308   C40.043,66.97,50.646,65.841,50.646,65.841z M47.231,39.783l2.545,3.057c0,0,5.359-7.878,4.503-14.062c0,0,3.304,4.616,4.806,9.119   c1.497,4.485,4.654,20.073-7.108,21.053c0,0-4.663,0.496-7.152-4.081C42.246,50.125,46.314,47.219,47.231,39.783z"}))),i.createElement("symbol",{id:"maphubs-icon-village",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M72.579,48.714L51.546,27.682c-0.825-0.825-2.286-0.825-3.111,0L27.247,48.871c-0.629,0.629-0.817,1.575-0.477,2.397  c0.34,0.822,1.143,1.358,2.033,1.358h3.637v28.678c0,1.214,0.985,2.2,2.2,2.2h30.703c1.216,0,2.2-0.986,2.2-2.2V52.626h3.637  c0.008,0.001,0.014,0,0.018,0c1.215,0,2.2-0.985,2.2-2.2C73.397,49.734,73.078,49.117,72.579,48.714z"}),i.createElement("path",{d:"M97.055,43.588L75.867,22.399c-0.826-0.825-2.287-0.825-3.111,0L62,33.155l12.967,12.967  c1.243,1.088,1.951,2.644,1.951,4.304c0,3.11-2.495,5.648-5.588,5.719l-0.029,0.002h-0.112h-0.116h-0.009v22.075h18.599  c1.215,0,2.199-0.985,2.199-2.2V47.344h3.638c0.89,0,1.692-0.535,2.032-1.357C97.872,45.165,97.684,44.217,97.055,43.588z"}),i.createElement("path",{d:"M2.945,43.588l21.188-21.189c0.825-0.825,2.286-0.825,3.111,0L38,33.155L25.033,46.122  c-1.243,1.088-1.951,2.644-1.951,4.304c0,3.11,2.495,5.648,5.588,5.719l0.029,0.002h0.112h0.116h0.009v22.075H10.338  c-1.215,0-2.2-0.985-2.2-2.2V47.344H4.501c-0.89,0-1.692-0.535-2.033-1.357C2.128,45.165,2.316,44.217,2.945,43.588z"})),i.createElement("symbol",{id:"maphubs-icon-clinic",viewBox:"0 0 16 20",preserveAspectRatio:"xMidYMid meet"},i.createElement("polygon",{points:"15,6 10,6 10,1 6,1 6,6 1,6 1,10 6,10 6,15 10,15 10,10 15,10 "})),i.createElement("symbol",{id:"maphubs-icon-star",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("polygon",{points:"50,77.4 23.7,91.2 28.8,62 7.5,41.3 36.9,37 50,10.4 63.1,37 92.5,41.3 71.2,62 76.3,91.2  "}))),i.createElement("symbol",{id:"maphubs-icon-eye",viewBox:"0 0 100 70.66625",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M99.995,28.08c-0.002-0.042-0.006-0.082-0.009-0.123c-0.002-0.021-0.003-0.042-0.005-0.062 c-0.003-0.03-0.008-0.06-0.012-0.089c-0.004-0.035-0.008-0.07-0.014-0.104c-0.001-0.004-0.002-0.009-0.002-0.013 c-0.123-0.773-0.487-1.498-1.045-2.056c-3.19-3.781-6.985-7.146-10.844-10.219C79.753,8.792,70.248,3.252,59.756,1.022 C53.692-0.266,47.59-0.321,41.494,0.769c-5.545,0.992-10.889,3.054-15.891,5.61c-7.829,4-14.979,9.515-21.209,15.698 c-1.153,1.144-2.3,2.312-3.348,3.555c-1.396,1.654-1.396,3.613,0,5.267c3.19,3.781,6.985,7.145,10.844,10.219 c8.312,6.622,17.817,12.161,28.309,14.391c6.064,1.289,12.167,1.344,18.263,0.254c5.544-0.992,10.888-3.054,15.891-5.61 c7.829-4.001,14.979-9.515,21.209-15.698c1.153-1.145,2.3-2.312,3.348-3.555c0.558-0.559,0.922-1.283,1.045-2.057 c0-0.004,0.001-0.009,0.002-0.013c0.006-0.035,0.01-0.069,0.014-0.104c0.004-0.029,0.009-0.059,0.012-0.089 c0.002-0.021,0.003-0.041,0.005-0.062c0.003-0.04,0.007-0.08,0.009-0.122c0.003-0.062,0.005-0.124,0.005-0.187 S99.998,28.142,99.995,28.08z M50,47.507c-10.627,0-19.241-8.614-19.241-19.241C30.759,17.64,39.373,9.025,50,9.025 s19.241,8.614,19.241,19.241C69.241,38.893,60.627,47.507,50,47.507z"}),i.createElement("circle",{cx:"50",cy:"28.266",r:"6.369"})),i.createElement("symbol",{id:"maphubs-icon-palm-oil",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M89.664,31.345c-6.29-17.548-29.178-12.972-29.178-12.972C46.561-6.042,19.856,3.496,19.856,3.496  C39.884,8.265,46.371,22.19,46.371,22.19C8.988,11.318,4.599,44.887,4.599,44.887c15.991-11.152,30.594-9.213,36.499-7.724  l-1.595,1.427c0,0-24.412,14.116-32.995,55.313c0,0,1.051,4.178,7.584,4.378c6.528,0.199,6.528-3.423,6.528-3.423  s9.534-39.485,25.176-53.408L47.025,40c11.865,9.734,6.915,36.736,6.915,36.736c23.401-12.97,8.259-45.834,8.259-45.834  c23.433,4.327,25.365,29.242,25.365,29.242S95.961,48.889,89.664,31.345z"}),i.createElement("path",{d:"M78.146,97.679c6.069,0,10.99-4.919,10.99-10.986c0-6.07-10.99-17.76-10.99-25.406h-0.381  c0,7.646-10.987,19.336-10.987,25.406c0,6.067,4.921,10.986,10.987,10.986H78.146z"})),i.createElement("symbol",{id:"maphubs-icon-log-pile",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M21.2,59.2c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2s16.2-7.3,16.2-16.2S30.1,59.2,21.2,59.2z M21.2,87.8  c-6.9,0-12.4-5.6-12.4-12.4c0-6.9,5.6-12.4,12.4-12.4s12.4,5.6,12.4,12.4C33.6,82.3,28,87.8,21.2,87.8z"}),i.createElement("path",{d:"M50.1,59.2c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2s16.2-7.3,16.2-16.2S59,59.2,50.1,59.2z M50.1,87.8  c-6.9,0-12.4-5.6-12.4-12.4c0-6.9,5.6-12.4,12.4-12.4s12.4,5.6,12.4,12.4C62.5,82.3,56.9,87.8,50.1,87.8z"}),i.createElement("path",{d:"M78.7,59.2c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2S95,84.4,95,75.4S87.7,59.2,78.7,59.2z M78.7,87.8  c-6.9,0-12.4-5.6-12.4-12.4c0-6.9,5.6-12.4,12.4-12.4c6.9,0,12.4,5.6,12.4,12.4C91.2,82.3,85.6,87.8,78.7,87.8z"}),i.createElement("path",{d:"M64.5,34.5c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2s16.2-7.3,16.2-16.2S73.5,34.5,64.5,34.5z M64.5,63.1  c-6.9,0-12.4-5.6-12.4-12.4s5.6-12.4,12.4-12.4S77,43.8,77,50.7S71.4,63.1,64.5,63.1z"}),i.createElement("path",{d:"M50.1,9.4c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2s16.2-7.3,16.2-16.2S59,9.4,50.1,9.4z M50.1,38  c-6.9,0-12.4-5.6-12.4-12.4s5.6-12.4,12.4-12.4s12.4,5.6,12.4,12.4S56.9,38,50.1,38z"}),i.createElement("path",{d:"M35.8,34.5c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2S52,59.6,52,50.7S44.7,34.5,35.8,34.5z M35.8,63.1  c-6.9,0-12.4-5.6-12.4-12.4s5.6-12.4,12.4-12.4s12.4,5.6,12.4,12.4S42.6,63.1,35.8,63.1z"})),i.createElement("symbol",{id:"maphubs-icon-clearcutting",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("polygon",{points:"68.9,63.2 60.9,48.2 62.8,48.2 56.2,36.7 55.9,36.2 58,36.2 53.8,29 52.5,26.8 54.3,26.8 52,22.7 49.6,18.7   47.3,22.7 44.9,26.8 46.7,26.8 45.4,29 41.3,36.2 43.3,36.2 43,36.7 36.4,48.2 39.1,48.2 31.1,63.2 46.9,63.2 46.9,74.6 52.2,74.6   52.2,63.2 "}),i.createElement("rect",{x:"16",y:"61.8",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"24.9",y:"48.7",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"74.5",y:"64.7",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"61.4",y:"74.6",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"83.4",y:"76.9",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"84.9",y:"51.5",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"66.7",y:"46.5",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"11.3",y:"43.7",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"30.2",y:"73",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"11.3",y:"77.9",width:"5.3",height:"9.9"})),i.createElement("symbol",{id:"maphubs-icon-dam",viewBox:"0 0 100 73.939",preserveAspectRatio:"xMidYMid meet"},i.createElement("polygon",{points:"34.284,73.939 0,73.939 0.024,67.227 34.284,67.227 "}),i.createElement("polygon",{points:"34.284,63.773 0,63.773 0.024,57.061 34.284,57.061 "}),i.createElement("polygon",{points:"34.284,53.584 0,53.584 0.024,46.871 34.284,46.871 "}),i.createElement("polygon",{points:"34.284,43.395 0,43.395 0.024,36.682 34.284,36.682 "}),i.createElement("path",{d:"M48.166,2.542C47.542,1.055,46.056,0,44.354,0l-5.516,0.024v73.915h26.109L48.166,2.542z"}),i.createElement("polygon",{points:"34.284,33.206 0,33.206 0.024,26.517 34.284,26.517 "}),i.createElement("polygon",{points:"34.284,23.04 0,23.04 0.024,16.327 34.284,16.327 "}),i.createElement("polygon",{points:"34.284,12.851 0,12.851 0.024,6.138 34.284,6.138 "}),i.createElement("path",{d:"M68.138,68.09c0.503,0.096,1.006,0.144,1.51,0.144c1.343,0,2.613-0.312,3.74-0.815c1.175-0.551,2.469-0.863,3.859-0.863 c1.367,0,2.662,0.312,3.836,0.863c1.127,0.504,2.422,0.815,3.74,0.815s2.59-0.312,3.74-0.815c1.15-0.551,2.47-0.863,3.836-0.863 c1.367,0,2.686,0.312,3.86,0.863c1.127,0.504,2.397,0.815,3.74,0.815v5.586c-1.343,0-2.613-0.288-3.74-0.791 c-1.175-0.552-2.493-0.863-3.86-0.863c-1.366,0-2.686,0.312-3.836,0.863c-1.15,0.503-2.422,0.791-3.74,0.791 s-2.613-0.288-3.74-0.791c-1.174-0.552-2.469-0.863-3.836-0.863c-1.391,0-2.685,0.312-3.859,0.863 c-1.127,0.503-2.397,0.791-3.74,0.791c-0.072,0-0.145,0-0.216,0L68.138,68.09z"}),i.createElement("path",{d:"M65.907,57.133c1.15,0.504,2.422,0.815,3.74,0.815c1.343,0,2.613-0.312,3.74-0.815c1.175-0.552,2.469-0.863,3.859-0.863 c1.367,0,2.662,0.312,3.836,0.863c1.127,0.504,2.422,0.815,3.74,0.815s2.59-0.312,3.74-0.815c1.15-0.552,2.47-0.863,3.836-0.863 c1.367,0,2.686,0.312,3.86,0.863c1.127,0.504,2.397,0.815,3.74,0.815v5.586c-1.343,0-2.613-0.288-3.74-0.791 c-1.175-0.552-2.493-0.863-3.86-0.863c-1.366,0-2.686,0.312-3.836,0.863c-1.15,0.503-2.422,0.791-3.74,0.791 s-2.613-0.288-3.74-0.791c-1.174-0.552-2.469-0.863-3.836-0.863c-1.391,0-2.685,0.312-3.859,0.863 c-1.127,0.503-2.397,0.791-3.74,0.791c-0.814,0-1.606-0.096-2.373-0.312L65.907,57.133z"})),i.createElement("symbol",{id:"maphubs-icon-sawblade",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M94.9,59.1c0-0.2-0.1-0.4-0.3-0.5c-0.1-0.1-0.2-0.2-0.2-0.4c0.2-1.6,0-3.3,0.2-4.9c0.1-0.7-0.1-1.3-0.5-1.8  c-1-1.2-2-2.5-3-3.7c-0.9-1.2-1.9-2.3-2.8-3.5c-0.7-0.9-0.4-2.1,0.6-2.5c0.7-0.2,1.5-0.3,2.2-0.2c0.9,0.2,1.8,0.2,2.6,0.3  c0.2,0,0.4,0,0.6,0c0.8,0.1,0.8,0,0.5-0.8c-0.1-0.3-0.5-0.3-0.6-0.7c-0.5-1.7-1.3-3.4-1.9-5c-0.2-0.5-0.5-0.8-1-1.1  c-1.6-0.9-3.2-1.7-4.9-2.6c-1.1-0.6-2.1-1.1-3.2-1.7c-1.2-0.7-1.2-2.1,0-2.8c0.5-0.3,1-0.6,1.6-0.8c1.1-0.3,2.2-0.7,3.2-1.1  c0.4-0.2,0.5-0.3,0.1-0.6c-0.2-0.1-0.4-0.3-0.7-0.3c-0.2,0-0.3-0.1-0.5-0.2c-1.1-1.2-2.3-2.4-3.4-3.6c-0.5-0.6-1.1-0.9-1.9-0.9  c-0.6,0-1.2-0.1-1.9-0.2c-2.3-0.2-4.6-0.5-6.9-0.7c-0.7-0.1-1.3-0.4-1.4-1.1c-0.2-0.7,0-1.4,0.6-1.8c0.3-0.2,0.6-0.5,0.9-0.8  c0.9-0.8,1.7-1.5,2.6-2.3c0.5-0.4,0.4-0.7-0.2-0.8c-0.2-0.1-0.4-0.1-0.6,0c-0.1,0.1-0.3,0.1-0.4,0c-1.6-0.8-3.3-1.4-4.9-2.2  c-0.5-0.2-1.1-0.3-1.6-0.1c-1.1,0.3-2.3,0.7-3.4,1c-1.8,0.5-3.6,1.1-5.4,1.6c-0.6,0.2-1.2,0-1.6-0.5c-0.4-0.5-0.5-1.1-0.2-1.7  c0.4-0.9,0.8-1.8,1.3-2.8c0.3-0.6,0.6-1.2,0.9-1.8c0.2-0.4,0.1-0.6-0.4-0.5c-0.3,0-0.7-0.1-0.9,0.3c-0.1,0.1-0.2,0.1-0.3,0.1  c-1.9-0.2-3.8-0.1-5.6-0.1c-0.4,0-0.8,0.1-1.1,0.4c-2.3,1.9-4.6,3.8-7,5.7c-0.6,0.5-1.2,0.7-1.9,0.4c-0.7-0.3-0.8-0.9-0.8-1.6  c0-1.6,0.1-3.2,0.3-4.8c0.1-0.6-0.1-0.5-0.6-0.4c-0.4,0.2-0.7,0.6-1.1,0.7c-1.7,0.6-3.3,1.3-5,2c-0.5,0.2-0.8,0.5-1.1,1  c-0.9,1.7-1.8,3.3-2.7,5c-0.6,1.1-1.2,2.2-1.8,3.2c-0.7,1.1-2,0.9-2.5-0.2c-0.2-0.5-0.4-1-0.6-1.5c-0.3-1.1-0.6-2.1-1-3.2  c-0.1-0.4-0.4-0.7-0.8-0.6c-0.4,0.1-0.8,0.4-0.7,0.9c0.1,0.4-0.1,0.6-0.4,0.8c-1.3,1.2-2.5,2.4-3.7,3.5c-0.3,0.3-0.4,0.6-0.5,1  c-0.2,1.5-0.3,3-0.5,4.6c-0.2,1.6-0.3,3.2-0.5,4.8c-0.1,1.1-1.3,1.7-2.2,1.1c-0.5-0.4-1-0.8-1.3-1.3c-0.7-1-1.6-1.9-2.4-2.8  c-0.1-0.2-0.3-0.3-0.5-0.1c-0.3,0.3-0.6,0.7-0.5,1.2c0.1,0.2,0,0.4-0.1,0.6c-0.6,1.4-1.2,2.9-1.9,4.3c-0.4,0.8-0.4,1.6-0.1,2.4  c0.8,2.6,1.6,5.2,2.3,7.9c0.1,0.3,0.2,0.6,0.2,0.9c0,1.2-1.1,1.9-2.2,1.4c-1.5-0.7-2.9-1.4-4.4-2.1c-0.2-0.1-0.4-0.3-0.5-0.1  c-0.1,0.3-0.3,0.7,0,1c0.1,0.1,0.3,0.2,0.3,0.4c-0.2,1,0,2-0.1,3c-0.2,1.9,0,3.6,1.4,5.1c1.6,1.7,3,3.7,4.5,5.5  c0.5,0.6,0.8,1.3,0.4,2.1c-0.4,0.8-1.1,0.8-1.9,0.8c-1.4-0.1-2.7-0.2-4.1-0.3c-0.6,0-0.6,0.2-0.6,0.7c0.1,0.5,0.5,0.7,0.6,1.1  c0.5,1.4,1.1,2.7,1.6,4.1c0.3,0.9,0.9,1.6,1.7,2c0.4,0.2,0.8,0.5,1.3,0.7c2,1.1,4.1,2.2,6.1,3.3c0.6,0.3,1.1,0.8,1,1.5  c0,0.7-0.4,1.3-1.1,1.6c-0.6,0.3-1.2,0.4-1.9,0.6c-1,0.2-2,0.7-2.9,1c-0.4,0.2-0.4,0.4-0.1,0.7c0.2,0.2,0.4,0.3,0.6,0.3  c0.2,0,0.4,0.1,0.6,0.3c1.3,1.3,2.5,2.5,3.8,3.8c0.4,0.4,0.8,0.6,1.3,0.6c1.6,0.2,3.2,0.3,4.8,0.5c1.3,0.1,2.7,0.2,4,0.4  c0.4,0,0.8,0.1,1.1,0.5c0.7,1.1,0.8,1.7-0.2,2.6c-1.1,1-2.3,1.8-3.3,2.9c-0.2,0.2-0.6,0.4-0.3,0.7c0.2,0.3,0.6,0.4,1,0.2  c0.2-0.1,0.3-0.1,0.5,0c1.7,0.7,3.3,1.4,5,2.2c0.5,0.2,0.9,0.2,1.4,0.1c3-0.9,5.9-1.8,8.9-2.6c1-0.3,1.6,0.1,1.9,1.1  c0.1,0.4,0,0.9-0.2,1.3c-0.6,1.3-1.3,2.6-1.9,4c-0.1,0.2-0.4,0.5-0.1,0.6c0.3,0.2,0.7,0.3,1,0c0.2-0.2,0.3-0.3,0.5-0.1  c0.2,0.1,0.4,0.1,0.6,0.1c1.5,0,3,0,4.5,0c0.7,0,1.3-0.2,1.8-0.7c2.1-1.7,4.3-3.5,6.4-5.2c0.4-0.4,0.9-0.6,1.5-0.6  c0.7-0.1,1.3,0.4,1.4,1.2c0,0.2,0,0.5,0,0.7c-0.1,1.3-0.2,2.6-0.2,4c0,0.2-0.1,0.6,0.3,0.7c0.3,0.1,0.7,0.1,0.9-0.2  c0.1-0.1,0.2-0.2,0.3-0.2c1.8-0.4,3.5-1.3,5.2-1.9c0.3-0.1,0.6-0.4,0.8-0.7c1.3-2.5,2.7-4.9,4-7.4c0.3-0.6,0.6-1.1,1.1-1.5  c0.6-0.4,1.6-0.4,1.9,0.2c0.3,0.6,0.7,1.3,0.8,2c0.1,1.2,0.7,2.2,1,3.3c0.1,0.2,0.3,0.5,0.5,0.3c0.3-0.2,0.7-0.4,0.7-0.9  c0-0.2,0-0.4,0.2-0.5c1.4-1.1,2.5-2.4,3.8-3.5c0.4-0.3,0.6-0.7,0.7-1.2c0.1-1.3,0.3-2.6,0.4-3.8c0.2-1.8,0.4-3.7,0.6-5.5  c0.1-0.5,0.3-0.9,0.8-1.2c0.8-0.4,1.4-0.3,2.1,0.3c0.5,0.4,0.7,1,1.1,1.5c0.5,0.7,1.2,1.4,1.7,2.1c0.4,0.5,0.4,0.5,0.8-0.1  c0.3-0.6,0.1-1.3,0.4-1.9c0.7-1.2,1.1-2.5,1.8-3.7c0.4-0.8,0.4-1.6,0.2-2.5c-0.8-2.7-1.6-5.4-2.4-8.1c-0.2-0.6-0.2-1.3,0.2-1.8  c0.6-0.6,1.3-0.6,2-0.3c0.7,0.2,1.3,0.6,1.9,1c0.7,0.5,1.6,0.8,2.5,1.1c0.2,0.1,0.4,0.3,0.6,0.1C95,59.7,94.9,59.4,94.9,59.1z   M50,55.7c-3.1,0-5.7-2.5-5.7-5.7s2.5-5.7,5.7-5.7s5.7,2.5,5.7,5.7S53.1,55.7,50,55.7z"
})),i.createElement("symbol",{id:"maphubs-icon-chainsaw",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",{style:{display:"inline",opacity:1}},i.createElement("path",{style:{opacity:1,fillOpacity:1,stroke:"none",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},d:"m 27.389978,30.839493 c -1.18069,0.715742 -2.23836,1.673042 -3.090596,2.857868 l -5.27304,7.331668 c -3.250791,4.519428 -2.39997,10.805272 1.795005,14.335604 l -6.846561,3.946098 c -5.0582387,2.9147 -6.8199347,9.462829 -3.905219,14.521117 l 1.686785,2.925503 c 2.914717,5.058288 9.46283,6.819937 14.521117,3.90522 l 3.946429,-2.273961 0.07227,0.125168 32.783797,-18.927734 -2.116211,-3.665385 4.473901,-2.583008 c 0.706744,1.212001 1.355601,2.576171 1.801405,4.456063 2.473464,-2.539867 2.571462,-4.729825 2.39848,-6.880867 l 1.924877,-1.111329 c 0.706744,1.212001 1.353908,2.577148 1.799714,4.457039 2.473464,-2.539866 2.571461,-4.729824 2.398479,-6.880867 l 1.706679,-0.985351 c 0.706744,1.212 1.353909,2.577147 1.799714,4.457039 2.473657,-2.540065 2.573209,-4.73064 2.400171,-6.881844 l 1.794635,-1.036133 c 1.162646,0.811055 2.3349,1.788254 3.540637,3.327876 0.980018,-2.764994 0.58181,-4.632657 -0.18244,-6.261308 0.279405,-0.391246 0.527891,-0.800657 0.74457,-1.22599 1.499547,0.105971 3.08343,0.338011 5.027449,1.114045 -0.621385,-3.302327 -2.212413,-4.681635 -3.959866,-5.749313 -0.0094,-0.420644 -0.05592,-0.841449 -0.12117,-1.260655 1.354023,-0.861215 2.829965,-1.677535 5.015967,-2.226153 -2.561983,-2.430688 -4.746376,-2.509594 -6.887021,-2.311482 l -0.08301,-0.143774 c -0.196201,-0.33983 -0.416012,-0.657658 -0.64676,-0.963971 0.644415,-1.537752 1.401305,-3.103576 2.956889,-4.8668 -3.365502,-0.533169 -5.203203,0.537782 -6.812291,1.849204 -0.562208,-0.242465 -1.145197,-0.430896 -1.741922,-0.563972 -0.282558,-1.461489 -0.465514,-3.037558 -0.225205,-5.093192 -2.97423,1.43461 -3.90743,3.290622 -4.485419,5.219308 -0.602361,0.170157 -1.193166,0.401728 -1.766829,0.697575 -0.728679,-1.235947 -1.397754,-2.623723 -1.855378,-4.553453 -2.510488,2.577885 -2.573501,4.795407 -2.390055,6.977491 l -1.999301,1.154297 c -0.72399,-1.230817 -1.388563,-2.614086 -1.843659,-4.533155 -2.510646,2.578046 -2.575236,4.796251 -2.391746,6.978467 l -1.887665,1.089844 c -0.723989,-1.230817 -1.388563,-2.614086 -1.843659,-4.533155 -2.510646,2.578046 -2.575236,4.796252 -2.391747,6.978467 l -1.669466,0.963867 c -0.72399,-1.230816 -1.388564,-2.614085 -1.84366,-4.533154 -2.510488,2.577885 -2.575192,4.796383 -2.391746,6.978467 l -0.774687,0.447266 -2.793945,-4.839255 -3.443804,1.988281 c -0.167667,-0.137021 -0.3294,-0.278154 -0.5074,-0.406188 l -4.669448,-3.35725 C 35.583548,28.716929 30.932054,28.692266 27.38998,30.839493 Z m 3.136868,5.085558 c 1.535048,-0.954347 3.514667,-0.927162 5.108496,0.219269 l 3.009766,2.166191 -4.184661,2.416016 -8.202593,11.210663 -1.305111,-0.940206 c -2.125106,-1.528572 -2.583319,-4.338477 -1.054742,-6.463585 l 5.273041,-7.331669 c 0.382144,-0.531276 0.844122,-0.958563 1.355804,-1.276679 z M 53.552617,43.0842 76.432941,29.874239 c 1.775567,-1.025124 3.902705,-0.455159 4.92783,1.320408 l 0.803711,1.392068 c 1.025124,1.775568 0.455159,3.902706 -1.320408,4.92783 L 57.96375,50.724507 53.552617,43.0842 Z m -36.582905,21.425613 3.932897,-2.266149 6.321289,10.948794 -3.941354,2.271031 c -2.268141,1.306962 -5.020148,0.567077 -6.32711,-1.701063 l -1.686785,-2.925504 c -1.30696,-2.268141 -0.567077,-5.020148 1.701063,-6.327109 z"}))))}});t.exports=r},function(t,e,n){"use strict";var i=n(1),r=n(680),o=n(170),a=i.createClass({displayName:"AnimationOverlay",mixins:[o.listenTo(r.tick,"tick")],propTypes:{style:i.PropTypes.object.isRequired},getDefaultProps:function(){return{}},getInitialState:function(){return{val:""}},tick:function(t){this.setState({val:t})},render:function(){return i.createElement("div",{style:this.props.style},i.createElement("p",null,this.state.val))}});t.exports=a},function(t,e,n){"use strict";var i=(n(201)("Map/ForestLossMixin"),n(662)),r=n(170),o=n(680),a={getLayer:function(t,e){return{id:"omh-"+t+"-"+e,source:{type:"raster",scheme:"xyz",maxzoom:19,minzoom:0,tiles:["https://storage.googleapis.com/moabi-raster-tiles/hansen-umd-"+t+"-"+e+"/{z}/{x}/{y}.png"],tileSize:256},layer:{id:"omh-"+t+"-"+e,type:"raster",source:"omh-"+t+"-"+e,minzoom:0,maxzoom:18,paint:{"raster-opacity":1},layout:{visibility:"none"}}}},toggleForestLoss:function(){this.state.showForestLoss?(this.props.onToggleForestLoss&&this.props.onToggleForestLoss(!1),this.removeForestLossLayers()):(this.props.onToggleForestLoss&&this.props.onToggleForestLoss(!0),this.addForestLossLayers())},getFirstLabelLayer:function(){var t,e=this.state.glStyle;return e&&e.layers&&e.layers.length>0?e.layers.forEach(function(e){!t&&e.id.startsWith("omh-label")&&(t=e.id)}):"default"!==this.state.baseMap&&"dark"!==this.state.baseMap&&"streets"!==this.state.baseMap||(t="place_other"),t},addForestLossLayers:function(){var t=this,e="water",n=this.state.glStyle;n&&n.layers&&n.layers.length>0&&(e=n.layers[0].id);var i=t.getLayer("treecover",2001);t.map.addSource(i.id,i.source),t.map.addLayer(i.layer,e);for(var r=this.getFirstLabelLayer(),o=2001;o<=2014;o++){var a=t.getLayer("lossyear",o);t.map.addSource(a.id,a.source),r?t.map.addLayer(a.layer,r):t.map.addLayer(a.layer)}this.setState({showForestLoss:!0})},removeForestLossLayers:function(){var t=this,e=t.getLayer("treecover",2001);t.map.removeLayer(e.layer.id),t.map.removeSource(e.id);for(var n=2001;n<=2014;n++){var i=t.getLayer("lossyear",n);t.map.removeLayer(i.layer.id),t.map.removeSource(i.id)}this.setState({showForestLoss:!1})},tick:function(t){var e=this;2001===t&&this.map.setLayoutProperty("omh-treecover-"+t,"visibility","visible"),this.map.setLayoutProperty("omh-lossyear-"+t,"visibility","visible"),setTimeout(function(){if(t>2001);else if(2001===t)for(var n=2002;n<=2014;n++)e.map.setLayoutProperty("omh-lossyear-"+n,"visibility","none")},1e3)}};t.exports=i(a,r.listenTo(o.tick,"tick"))},function(t,e,n){"use strict";var i=n(170),r=n(189)(i),o=n(680),a=n(201)("stores/AnimationStore");t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{playing:!1,startVal:2001,endVal:2014,currentVal:2001,tickLength:1,tickTime:3e3,loop:!0}},storeDidUpdate:function(){a("store updated")},play:function(){a("play");var t=this;return this.state.playing?void a("already playing"):(t.setState({playing:!0}),void t.runTick())},runTick:function(){var t=this;this.state.playing&&(a("tick: "+t.state.currentVal),o.tick(t.state.currentVal),setTimeout(function(){t.state.currentVal<t.state.endVal?t.state.currentVal=t.state.currentVal+1:t.state.loop?t.state.currentVal=t.state.startVal:t.stop(),t.runTick()},t.state.tickTime))},stop:function(){a("stop"),this.setState({playing:!1})},reset:function(){a("reset"),this.setState({playing:!1,currentVal:this.state.startVal})}})},function(t,e,n){"use strict";var i=n(1),r=n(669),o=n(718),a=n(170),s=n(189)(a),u=n(266),l=n(268),c=i.createClass({displayName:"DataCollectionForm",mixins:[s.connect(u)],__:function(t){return l.getLocaleString(this.state.locale,t)},propTypes:{presets:i.PropTypes.array.isRequired,values:i.PropTypes.object,showSubmit:i.PropTypes.bool,onSubmit:i.PropTypes.func,onValid:i.PropTypes.func,onInValid:i.PropTypes.func,onChange:i.PropTypes.func,submitText:i.PropTypes.string},getDefaultProps:function(){return{showSubmit:!0}},getInitialState:function(){var t="";return t=this.props.submitText?this.props.submitText:this.state&&this.state.locale?l.getLocaleString(this.state.locale,"Submit"):"Submit",{canSubmit:!1,submitText:t}},onSubmit:function(t){this.props.onSubmit(t)},onValid:function(){this.setState({canSubmit:!0}),this.props.onValid&&this.props.onValid()},onInValid:function(){this.setState({canSubmit:!1}),this.props.onValid&&this.props.onInValid()},onChange:function(t){this.props.onChange&&this.props.onChange(t)},render:function(){var t=this,e="";return this.props.showSubmit&&(e=i.createElement("div",{className:"right"},i.createElement("button",{type:"submit",className:"waves-effect waves-light btn",disabled:!this.state.canSubmit},i.createElement("i",{className:"material-icons right"},"arrow_forward"),this.state.submitText))),i.createElement(r.Form,{onValidSubmit:this.onSubmit,onChange:this.onChange,onValid:this.onValid,onInvalid:this.onInValid},this.props.presets.map(function(e){var n;if(t.props.values&&t.props.values[e.tag]&&(n=t.props.values[e.tag]),"photo_url"!=e.tag)return i.createElement(o,{key:e.tag,preset:e,value:n})}),e)}});t.exports=c},function(t,e,n){"use strict";var i=n(1),r=n(170),o=n(189)(r),a=n(266),s=n(268),u=n(719),l=n(679),c=n(720),h=i.createClass({displayName:"FormField",mixins:[o.connect(a)],__:function(t){return s.getLocaleString(this.state.locale,t)},propTypes:{preset:i.PropTypes.object.isRequired,value:i.PropTypes.any},render:function(){var t=this.props.preset,e=i.createElement(u,{name:t.tag,label:t.label,className:"col s12 no-margin",required:t.isRequired,showCharCount:!1,value:this.props.value});if("number"==t.type)e=i.createElement(u,{name:t.tag,label:t.label,className:"col s12 no-margin",validations:"isNumeric",validationErrors:{isNumeric:this.__("Value must be a number")},required:t.isRequired,value:this.props.value});else if("radio"==t.type||"combo"==t.type){var n={};e=i.createElement(c,{name:t.tag,id:"select-"+t.tag,label:t.label,options:n,className:"col s12 no-margin",startEmpty:!this.props.value,required:t.isRequired,value:this.props.value})}else"check"==t.type&&(e=i.createElement(l,{name:t.tag,labelOff:"",labelOn:t.label,className:"col s12",checked:this.props.value}));return i.createElement("div",{className:"row"},e)}});t.exports=h},function(t,e,n){"use strict";var i=n(1),r=n(669),o=n(284),a=n(168),s=n(676),u=i.createClass({displayName:"TextInput",mixins:[s,r.Mixin],propTypes:{value:i.PropTypes.string,length:i.PropTypes.number,successText:i.PropTypes.string,disabled:i.PropTypes.bool,icon:i.PropTypes.string,className:i.PropTypes.string,dataTooltip:i.PropTypes.string,dataDelay:i.PropTypes.number,dataPosition:i.PropTypes.string,name:i.PropTypes.string,label:i.PropTypes.string,placeholder:i.PropTypes.string,id:i.PropTypes.string,type:i.PropTypes.string,style:i.PropTypes.object,showCharCount:i.PropTypes.bool,useMaterialize:i.PropTypes.bool,onClick:i.PropTypes.func},getDefaultProps:function(){return{length:100,successText:"",defaultValue:"",disabled:!1,value:"",dataDelay:100,type:"text",style:{},showCharCount:!0,useMaterialize:!0,onClick:function(){}}},getInitialState:function(){return{value:this.props.value,charCount:this.props.value?this.props.value.length:0}},componentWillReceiveProps:function(t){if(this.props.value!=t.value){var e=0;t.value&&(e=t.value.length),this.setState({value:t.value,charCount:e})}},componentDidMount:function(){this.props.dataTooltip&&a(this.refs.inputWrapper).tooltip()},componentDidUpdate:function(t){!t.dataTooltip&&this.props.dataTooltip&&a(this.refs.inputWrapper).tooltip()},changeValue:function(t){t.stopPropagation(),this.setValue(t.currentTarget.value),this.setState({value:t.currentTarget.value,charCount:t.currentTarget.value.length})},render:function(){var t,e="";this.props.useMaterialize?(t=o("input-field",this.props.className),e=o({required:this.showRequired(),valid:this.isValid(),invalid:this.showError()})):t=o(this.props.className);var n="";this.props.icon&&(n=i.createElement("i",{className:"material-icons prefix"},this.props.icon));var r="black";this.state.charCount>this.props.length&&(r="red");var a="";this.state.value&&""!=this.state.value&&(a="active");var s="";s=this.props.id?this.props.id:this.props.name;var u="";return this.props.showCharCount&&(u=i.createElement("span",{className:"character-counter",style:{float:"right",fontSize:"12px",height:"1px",color:r}},this.state.charCount," / ",this.props.length)),i.createElement("div",{ref:"inputWrapper",className:t,style:this.props.style,"data-delay":this.props.dataDelay,"data-position":this.props.dataPosition,"data-tooltip":this.props.dataTooltip},n,i.createElement("input",{ref:"input",id:s,type:this.props.type,className:e,placeholder:this.props.placeholder,value:this.state.value,disabled:this.props.disabled,onClick:this.props.onClick,onChange:this.changeValue}),i.createElement("label",{htmlFor:s,className:a,"data-error":this.getErrorMessage(),"data-success":this.props.successText},this.props.label),u)}});t.exports=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(721),o=i(r),a=n(1),s=n(669),u=n(723),l=n(724),c=n(284),h=n(676),f=a.createClass({displayName:"Select",mixins:[h,s.Mixin],propTypes:{emptyText:a.PropTypes.string,defaultValue:a.PropTypes.string,name:a.PropTypes.string,className:a.PropTypes.string,options:a.PropTypes.array,dataTooltip:a.PropTypes.string,dataDelay:a.PropTypes.number,dataPosition:a.PropTypes.string,label:a.PropTypes.string,successText:a.PropTypes.string,id:a.PropTypes.string,onChange:a.PropTypes.func,startEmpty:a.PropTypes.bool,icon:a.PropTypes.string,note:a.PropTypes.string},getDefaultProps:function(){return{startEmpty:!0,emptyText:"Choose an Option",name:"select-box",id:"select-box",options:[],dataDelay:100}},getInitialState:function(){return{note:this.props.note}},setNote:function(t){var e=l(u(this.props.options,{value:t}),"note");e&&this.setState({note:e})},handleSelectChange:function(t){var e=t.value;this.setValue(e),this.setNote(e),this.props.onChange&&this.props.onChange(e)},componentWillMount:function(){this.setValue(this.props.defaultValue),this.setNote(this.props.defaultValue)},componentWillReceiveProps:function(t){t.startEmpty||this.props.defaultValue==t.defaultValue||(this.setValue(t.defaultValue),this.setNote(t.defaultValue))},validate:function(){return!this.isRequired()||!(!this.getValue()||""===this.getValue())},render:function(){var t=c("input-field",{tooltipped:!!this.props.dataTooltip}),e=this.getValue(),n="";this.state.note&&(n=a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.note}}));var i="";return this.props.icon&&(i=a.createElement("i",{className:"material-icons prefix"},this.props.icon)),a.createElement("div",{className:this.props.className},a.createElement("div",{className:t,id:this.props.id,"data-delay":this.props.dataDelay,"data-position":this.props.dataPosition,"data-tooltip":this.props.dataTooltip},i,a.createElement(o.default,{label:this.props.emptyText,resetLabel:this.props.emptyText,defaultValue:e,onChange:this.handleSelectChange},this.props.options.map(function(t,e){return a.createElement("option",{key:e,dataValue:t.value},t.label)})),a.createElement("label",{htmlFor:this.props.name,"data-error":this.getErrorMessage(),"data-success":this.props.successText},this.props.label)),n)}});t.exports=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(722),o=i(r);e.default=o.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(1),c=i(l),h=n(284),f=i(h),p=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=null;return t.defaultValue&&(i=n.getOptions().find(function(e){return e.key===t.defaultValue})),n.state={isOpen:!1,rmsListTopValue:0,isSelected:i,selected:{label:i?i.label:t.label,value:i?i.key:t.defaultValue}},n.mounted=!0,n.handleDocumentClick=n.handleDocumentClick.bind(n),n.fireChangeEvent=n.fireChangeEvent.bind(n),n.handleToggleSelect=n.handleToggleSelect.bind(n),n.handleOptionClick=n.handleOptionClick.bind(n),n.handleResetSelect=n.handleResetSelect.bind(n),n.changeState=n.changeState.bind(n),n.getValue=n.getValue.bind(n),n.countTopRmsList=n.countTopRmsList.bind(n),n}return a(e,t),u(e,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,!1)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,!1)}},{key:"componentDidUpdate",value:function(t,e){this.refs.rmsList&&e.isOpen!==this.state.isOpen&&this.countTopRmsList()}},{key:"getValue",value:function(){return this.state.selected.value}},{key:"getLabel",value:function(){return this.state.selected.label}},{key:"handleToggleSelect",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"handleOptionClick",value:function(t){var e=t.target.attributes.data.value,n=void 0;this.props.children instanceof Array?n=this.props.children[t.target.value].props.children:this.props.children&&(n=this.props.children.props.children),this.changeState({isOpen:!1,isSelected:e,selected:{value:e,label:n}})}},{key:"changeState",value:function(t){this.fireChangeEvent(t),this.setState(t)}},{key:"handleResetSelect",value:function(){this.changeState({isOpen:!1,isSelected:null,selected:{value:"",label:""}})}},{key:"handleDocumentClick",value:function(t){this.mounted&&(this.refs.rmsWrapper.contains(t.target)||this.setState({isOpen:!1}))}},{key:"fireChangeEvent",value:function(t){t.selected.value!==this.state.selected.value&&this.props.onChange&&this.props.onChange(t.selected)}},{key:"getOptions",value:function(){return this.props.children instanceof Array?this.props.children.map(function(t){return{key:t.props.dataValue,label:t.props.children}}):this.props.children?[{key:this.props.children.props.dataValue,label:this.props.children.props.children}]:[]}},{key:"countTopRmsList",value:function(){var t=40;this.setState({rmsListTopValue:document.body.offsetHeight-this.refs.rmsList.getBoundingClientRect().bottom>this.refs.rmsList.offsetHeight?0:-this.refs.rmsList.offsetHeight/2-t})}},{key:"render",value:function(){var t=this,e=this.props,n=e.label,i=e.resetLabel,r=(0,f.default)("rms-text",{"rms-text__empty":!this.state.isSelected});return c.default.createElement("div",{className:"rms-wrapper",ref:"rmsWrapper"},c.default.createElement("div",{className:r,onClick:this.handleToggleSelect},c.default.createElement("span",null,this.state.selected.label?this.state.selected.label:n)),c.default.createElement("label",{className:"rms-label"},n),c.default.createElement("i",{className:"rms-caret"},"arrow_drop_down"),this.state.isOpen&&c.default.createElement("ul",{ref:"rmsList",className:"rms-list",style:{top:this.state.rmsListTopValue}},i&&c.default.createElement("li",{className:"rms-item rms-item__reset",onMouseDown:this.handleResetSelect,onClick:this.handleResetSelect},i),this.getOptions().map(function(e,n){var i=(0,f.default)("rms-item",{"rms-item__active":e.selected});return c.default.createElement("li",{key:"reactMaterialSelect_"+n,className:i,value:n,data:e.key,onMouseDown:t.handleOptionClick,onClick:t.handleOptionClick},e.label)})))}}]),e}(l.Component);p.propTypes={children:l.PropTypes.oneOfType([l.PropTypes.array,l.PropTypes.object]).isRequired,defaultValue:l.PropTypes.string,resetLabel:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.bool]),onChange:l.PropTypes.func,label:l.PropTypes.string},p.defaultProps={resetLabel:"No value"},e.default=p},function(t,e,n){(function(t,n){function i(t,e){for(var n=-1,i=t?t.length:0;++n<i;)if(e(t[n],n,t))return!0;return!1}function r(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function o(t){return function(e){return null==e?void 0:e[t]}}function a(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function s(t){return function(e){return t(e)}}function u(t,e){return null==t?void 0:t[e]}function l(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function c(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function h(t,e){return function(n){return t(e(n))}}function f(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function p(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function d(){this.__data__=fn?fn(null):{}}function g(t){return this.has(t)&&delete this.__data__[t]}function m(t){var e=this.__data__;if(fn){var n=e[t];return n===Ut?void 0:n}return $e.call(e,t)?e[t]:void 0}function y(t){var e=this.__data__;return fn?void 0!==e[t]:$e.call(e,t)}function v(t,e){var n=this.__data__;return n[t]=fn&&void 0===e?Ut:e,this}function b(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function _(){this.__data__=[]}function x(t){var e=this.__data__,n=G(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():rn.call(e,n,1),!0}function w(t){var e=this.__data__,n=G(e,t);return n<0?void 0:e[n][1]}function E(t){return G(this.__data__,t)>-1}function S(t,e){var n=this.__data__,i=G(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function M(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function T(){this.__data__={hash:new p,map:new(un||b),string:new p}}function C(t){return st(this,t).delete(t)}function I(t){return st(this,t).get(t)}function N(t){return st(this,t).has(t)}function P(t,e){return st(this,t).set(t,e),this}function L(t){var e=-1,n=t?t.length:0;for(this.__data__=new M;++e<n;)this.add(t[e])}function A(t){return this.__data__.set(t,Ut),this}function k(t){return this.__data__.has(t)}function R(t){this.__data__=new b(t)}function O(){this.__data__=new b}function D(t){return this.__data__.delete(t)}function F(t){return this.__data__.get(t)}function z(t){return this.__data__.has(t)}function j(t,e){var n=this.__data__;if(n instanceof b){var i=n.__data__;if(!un||i.length<Bt-1)return i.push([t,e]),this;n=this.__data__=new M(i)}return n.set(t,e),this}function B(t,e){var n=Sn(t)||Et(t)?a(t.length,String):[],i=n.length,r=!!i;for(var o in t)!e&&!$e.call(t,o)||r&&("length"==o||ht(o,i))||n.push(o);return n}function G(t,e){for(var n=t.length;n--;)if(wt(t[n][0],e))return n;return-1}function U(t,e){e=ft(e,t)?[e]:nt(e);for(var n=0,i=e.length;null!=t&&n<i;)t=t[vt(e[n++])];return n&&n==i?t:void 0}function V(t){return Ze.call(t)}function K(t,e){return null!=t&&e in Object(t)}function H(t,e,n,i,r){return t===e||(null==t||null==e||!It(t)&&!Nt(e)?t!==t&&e!==e:q(t,e,H,n,i,r))}function q(t,e,n,i,r,o){var a=Sn(t),s=Sn(e),u=Jt,c=Jt;a||(u=xn(t),u=u==Yt?re:u),s||(c=xn(e),c=c==Yt?re:c);var h=u==re&&!l(t),f=c==re&&!l(e),p=u==c;if(p&&!h)return o||(o=new R),a||Mn(t)?rt(t,e,n,i,r,o):ot(t,e,u,n,i,r,o);if(!(r&Kt)){var d=h&&$e.call(t,"__wrapped__"),g=f&&$e.call(e,"__wrapped__");if(d||g){var m=d?t.value():t,y=g?e.value():e;return o||(o=new R),n(m,y,i,r,o)}}return!!p&&(o||(o=new R),at(t,e,n,i,r,o))}function X(t,e,n,i){var r=n.length,o=r,a=!i;if(null==t)return!o;for(t=Object(t);r--;){var s=n[r];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<o;){s=n[r];var u=s[0],l=t[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in t))return!1}else{var h=new R;if(i)var f=i(l,c,u,t,e,h);if(!(void 0===f?H(c,l,i,Vt|Kt,h):f))return!1}}return!0}function W(t){if(!It(t)||dt(t))return!1;var e=Tt(t)||l(t)?Qe:Le;return e.test(bt(t))}function Y(t){return Nt(t)&&Ct(t.length)&&!!Re[Ze.call(t)]}function J(t){return"function"==typeof t?t:null==t?zt:"object"==typeof t?Sn(t)?Q(t[0],t[1]):Z(t):jt(t)}function $(t){if(!gt(t))return on(t);var e=[];for(var n in Object(t))$e.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Z(t){var e=ut(t);return 1==e.length&&e[0][2]?yt(e[0][0],e[0][1]):function(n){return n===t||X(n,t,e)}}function Q(t,e){return ft(t)&&mt(e)?yt(vt(t),e):function(n){var i=Ot(n,t);return void 0===i&&i===e?Dt(n,t):H(e,i,void 0,Vt|Kt)}}function tt(t){return function(e){return U(e,t)}}function et(t){if("string"==typeof t)return t;if(Pt(t))return _n?_n.call(t):"";var e=t+"";return"0"==e&&1/t==-Ht?"-0":e}function nt(t){return Sn(t)?t:wn(t)}function it(t){return function(e,n,i){var r=Object(e);if(!St(e)){var o=J(n,3);e=Ft(e),n=function(t){return o(r[t],t,r)}}var a=t(e,n,i);return a>-1?r[o?e[a]:a]:void 0}}function rt(t,e,n,r,o,a){var s=o&Kt,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t);if(c&&a.get(e))return c==e;var h=-1,f=!0,p=o&Vt?new L:void 0;for(a.set(t,e),a.set(e,t);++h<u;){var d=t[h],g=e[h];if(r)var m=s?r(g,d,h,e,t,a):r(d,g,h,t,e,a);if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!i(e,function(t,e){if(!p.has(e)&&(d===t||n(d,t,r,o,a)))return p.add(e)})){f=!1;break}}else if(d!==g&&!n(d,g,r,o,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function ot(t,e,n,i,r,o,a){switch(n){case fe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case he:return!(t.byteLength!=e.byteLength||!i(new en(t),new en(e)));case $t:case Zt:case ie:return wt(+t,+e);case Qt:return t.name==e.name&&t.message==e.message;case ae:case ue:return t==e+"";case ne:var s=c;case se:var u=o&Kt;if(s||(s=f),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;o|=Vt,a.set(t,e);var h=rt(s(t),s(e),i,r,o,a);return a.delete(t),h;case le:if(bn)return bn.call(t)==bn.call(e)}return!1}function at(t,e,n,i,r,o){var a=r&Kt,s=Ft(t),u=s.length,l=Ft(e),c=l.length;if(u!=c&&!a)return!1;for(var h=u;h--;){var f=s[h];if(!(a?f in e:$e.call(e,f)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var d=!0;o.set(t,e),o.set(e,t);for(var g=a;++h<u;){f=s[h];var m=t[f],y=e[f];if(i)var v=a?i(y,m,f,e,t,o):i(m,y,f,t,e,o);if(!(void 0===v?m===y||n(m,y,i,r,o):v)){d=!1;break}g||(g="constructor"==f)}if(d&&!g){var b=t.constructor,_=e.constructor;b!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return o.delete(t),o.delete(e),d}function st(t,e){var n=t.__data__;return pt(e)?n["string"==typeof e?"string":"hash"]:n.map}function ut(t){for(var e=Ft(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,mt(r)]}return e}function lt(t,e){var n=u(t,e);return W(n)?n:void 0}function ct(t,e,n){e=ft(e,t)?[e]:nt(e);for(var i,r=-1,o=e.length;++r<o;){var a=vt(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}if(i)return i;var o=t?t.length:0;return!!o&&Ct(o)&&ht(a,o)&&(Sn(t)||Et(t))}function ht(t,e){return e=null==e?qt:e,!!e&&("number"==typeof t||ke.test(t))&&t>-1&&t%1==0&&t<e}function ft(t,e){if(Sn(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Pt(t))||(Ee.test(t)||!we.test(t)||null!=e&&t in Object(e))}function pt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function dt(t){return!!Ye&&Ye in t}function gt(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||Xe;return t===n}function mt(t){return t===t&&!It(t)}function yt(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function vt(t){if("string"==typeof t||Pt(t))return t;var e=t+"";return"0"==e&&1/t==-Ht?"-0":e}function bt(t){if(null!=t){try{return Je.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function _t(t,e,n){var i=t?t.length:0;if(!i)return-1;var o=null==n?0:At(n);return o<0&&(o=an(i+o,0)),r(t,J(e,3),o)}function xt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(Gt);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a),a};return n.cache=new(xt.Cache||M),n}function wt(t,e){return t===e||t!==t&&e!==e}function Et(t){return Mt(t)&&$e.call(t,"callee")&&(!nn.call(t,"callee")||Ze.call(t)==Yt)}function St(t){return null!=t&&Ct(t.length)&&!Tt(t)}function Mt(t){return Nt(t)&&St(t)}function Tt(t){var e=It(t)?Ze.call(t):"";return e==te||e==ee}function Ct(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=qt}function It(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Nt(t){return!!t&&"object"==typeof t}function Pt(t){return"symbol"==typeof t||Nt(t)&&Ze.call(t)==le}function Lt(t){if(!t)return 0===t?t:0;if(t=kt(t),t===Ht||t===-Ht){var e=t<0?-1:1;return e*Xt}return t===t?t:0}function At(t){var e=Lt(t),n=e%1;return e===e?n?e-n:e:0}function kt(t){if("number"==typeof t)return t;if(Pt(t))return Wt;if(It(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=It(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ce,"");var n=Pe.test(t);return n||Ae.test(t)?Oe(t.slice(2),n?2:8):Ne.test(t)?Wt:+t}function Rt(t){return null==t?"":et(t)}function Ot(t,e,n){var i=null==t?void 0:U(t,e);return void 0===i?n:i}function Dt(t,e){return null!=t&&ct(t,e,K)}function Ft(t){return St(t)?B(t):$(t)}function zt(t){return t}function jt(t){return ft(t)?o(vt(t)):tt(t)}var Bt=200,Gt="Expected a function",Ut="__lodash_hash_undefined__",Vt=1,Kt=2,Ht=1/0,qt=9007199254740991,Xt=1.7976931348623157e308,Wt=NaN,Yt="[object Arguments]",Jt="[object Array]",$t="[object Boolean]",Zt="[object Date]",Qt="[object Error]",te="[object Function]",ee="[object GeneratorFunction]",ne="[object Map]",ie="[object Number]",re="[object Object]",oe="[object Promise]",ae="[object RegExp]",se="[object Set]",ue="[object String]",le="[object Symbol]",ce="[object WeakMap]",he="[object ArrayBuffer]",fe="[object DataView]",pe="[object Float32Array]",de="[object Float64Array]",ge="[object Int8Array]",me="[object Int16Array]",ye="[object Int32Array]",ve="[object Uint8Array]",be="[object Uint8ClampedArray]",_e="[object Uint16Array]",xe="[object Uint32Array]",we=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ee=/^\w*$/,Se=/^\./,Me=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Te=/[\\^$.*+?()[\]{}|]/g,Ce=/^\s+|\s+$/g,Ie=/\\(\\)?/g,Ne=/^[-+]0x[0-9a-f]+$/i,Pe=/^0b[01]+$/i,Le=/^\[object .+?Constructor\]$/,Ae=/^0o[0-7]+$/i,ke=/^(?:0|[1-9]\d*)$/,Re={};Re[pe]=Re[de]=Re[ge]=Re[me]=Re[ye]=Re[ve]=Re[be]=Re[_e]=Re[xe]=!0,Re[Yt]=Re[Jt]=Re[he]=Re[$t]=Re[fe]=Re[Zt]=Re[Qt]=Re[te]=Re[ne]=Re[ie]=Re[re]=Re[ae]=Re[se]=Re[ue]=Re[ce]=!1;var Oe=parseInt,De="object"==typeof t&&t&&t.Object===Object&&t,Fe="object"==typeof self&&self&&self.Object===Object&&self,ze=De||Fe||Function("return this")(),je="object"==typeof e&&e&&!e.nodeType&&e,Be=je&&"object"==typeof n&&n&&!n.nodeType&&n,Ge=Be&&Be.exports===je,Ue=Ge&&De.process,Ve=function(){try{return Ue&&Ue.binding("util")}catch(t){}}(),Ke=Ve&&Ve.isTypedArray,He=Array.prototype,qe=Function.prototype,Xe=Object.prototype,We=ze["__core-js_shared__"],Ye=function(){var t=/[^.]+$/.exec(We&&We.keys&&We.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Je=qe.toString,$e=Xe.hasOwnProperty,Ze=Xe.toString,Qe=RegExp("^"+Je.call($e).replace(Te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tn=ze.Symbol,en=ze.Uint8Array,nn=Xe.propertyIsEnumerable,rn=He.splice,on=h(Object.keys,Object),an=Math.max,sn=lt(ze,"DataView"),un=lt(ze,"Map"),ln=lt(ze,"Promise"),cn=lt(ze,"Set"),hn=lt(ze,"WeakMap"),fn=lt(Object,"create"),pn=bt(sn),dn=bt(un),gn=bt(ln),mn=bt(cn),yn=bt(hn),vn=tn?tn.prototype:void 0,bn=vn?vn.valueOf:void 0,_n=vn?vn.toString:void 0;p.prototype.clear=d,p.prototype.delete=g,p.prototype.get=m,p.prototype.has=y,p.prototype.set=v,
b.prototype.clear=_,b.prototype.delete=x,b.prototype.get=w,b.prototype.has=E,b.prototype.set=S,M.prototype.clear=T,M.prototype.delete=C,M.prototype.get=I,M.prototype.has=N,M.prototype.set=P,L.prototype.add=L.prototype.push=A,L.prototype.has=k,R.prototype.clear=O,R.prototype.delete=D,R.prototype.get=F,R.prototype.has=z,R.prototype.set=j;var xn=V;(sn&&xn(new sn(new ArrayBuffer(1)))!=fe||un&&xn(new un)!=ne||ln&&xn(ln.resolve())!=oe||cn&&xn(new cn)!=se||hn&&xn(new hn)!=ce)&&(xn=function(t){var e=Ze.call(t),n=e==re?t.constructor:void 0,i=n?bt(n):void 0;if(i)switch(i){case pn:return fe;case dn:return ne;case gn:return oe;case mn:return se;case yn:return ce}return e});var wn=xt(function(t){t=Rt(t);var e=[];return Se.test(t)&&e.push(""),t.replace(Me,function(t,n,i,r){e.push(i?r.replace(Ie,"$1"):n||t)}),e}),En=it(_t);xt.Cache=M;var Sn=Array.isArray,Mn=Ke?s(Ke):Y;n.exports=En}).call(e,function(){return this}(),n(611)(t))},function(t,e){(function(e){function n(t,e){return null==t?void 0:t[e]}function i(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function o(){this.__data__=gt?gt(null):{}}function a(t){return this.has(t)&&delete this.__data__[t]}function s(t){var e=this.__data__;if(gt){var n=e[t];return n===U?void 0:n}return lt.call(e,t)?e[t]:void 0}function u(t){var e=this.__data__;return gt?void 0!==e[t]:lt.call(e,t)}function l(t,e){var n=this.__data__;return n[t]=gt&&void 0===e?U:e,this}function c(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function h(){this.__data__=[]}function f(t){var e=this.__data__,n=w(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():pt.call(e,n,1),!0}function p(t){var e=this.__data__,n=w(e,t);return n<0?void 0:e[n][1]}function d(t){return w(this.__data__,t)>-1}function g(t,e){var n=this.__data__,i=w(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function m(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function y(){this.__data__={hash:new r,map:new(dt||c),string:new r}}function v(t){return T(this,t).delete(t)}function b(t){return T(this,t).get(t)}function _(t){return T(this,t).has(t)}function x(t,e){return T(this,t).set(t,e),this}function w(t,e){for(var n=t.length;n--;)if(R(t[n][0],e))return n;return-1}function E(t){if(!D(t)||P(t))return!1;var e=O(t)||i(t)?ht:Q;return e.test(A(t))}function S(t){if("string"==typeof t)return t;if(z(t))return yt?yt.call(t):"";var e=t+"";return"0"==e&&1/t==-V?"-0":e}function M(t){return bt(t)?t:vt(t)}function T(t,e){var n=t.__data__;return N(e)?n["string"==typeof e?"string":"hash"]:n.map}function C(t,e){var i=n(t,e);return E(i)?i:void 0}function I(t,e){if(bt(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!z(t))||(W.test(t)||!X.test(t)||null!=e&&t in Object(e))}function N(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function P(t){return!!st&&st in t}function L(t){if("string"==typeof t||z(t))return t;var e=t+"";return"0"==e&&1/t==-V?"-0":e}function A(t){if(null!=t){try{return ut.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function k(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(G);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a),a};return n.cache=new(k.Cache||m),n}function R(t,e){return t===e||t!==t&&e!==e}function O(t){var e=D(t)?ct.call(t):"";return e==K||e==H}function D(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function F(t){return!!t&&"object"==typeof t}function z(t){return"symbol"==typeof t||F(t)&&ct.call(t)==q}function j(t){return null==t?"":S(t)}function B(t,e,n){e=I(e,t)?[e]:M(e);var i=-1,r=e.length;for(r||(t=void 0,r=1);++i<r;){var o=null==t?void 0:t[L(e[i])];void 0===o&&(i=r,o=n),t=O(o)?o.call(t):o}return t}var G="Expected a function",U="__lodash_hash_undefined__",V=1/0,K="[object Function]",H="[object GeneratorFunction]",q="[object Symbol]",X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,Y=/^\./,J=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/[\\^$.*+?()[\]{}|]/g,Z=/\\(\\)?/g,Q=/^\[object .+?Constructor\]$/,tt="object"==typeof e&&e&&e.Object===Object&&e,et="object"==typeof self&&self&&self.Object===Object&&self,nt=tt||et||Function("return this")(),it=Array.prototype,rt=Function.prototype,ot=Object.prototype,at=nt["__core-js_shared__"],st=function(){var t=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ut=rt.toString,lt=ot.hasOwnProperty,ct=ot.toString,ht=RegExp("^"+ut.call(lt).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ft=nt.Symbol,pt=it.splice,dt=C(nt,"Map"),gt=C(Object,"create"),mt=ft?ft.prototype:void 0,yt=mt?mt.toString:void 0;r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=u,r.prototype.set=l,c.prototype.clear=h,c.prototype.delete=f,c.prototype.get=p,c.prototype.has=d,c.prototype.set=g,m.prototype.clear=y,m.prototype.delete=v,m.prototype.get=b,m.prototype.has=_,m.prototype.set=x;var vt=k(function(t){t=j(t);var e=[];return Y.test(t)&&e.push(""),t.replace(J,function(t,n,i,r){e.push(i?r.replace(Z,"$1"):n||t)}),e});k.Cache=m;var bt=Array.isArray;t.exports=B}).call(e,function(){return this}())},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(283),o=n(726),a=i(o),s=n(1),u=n(201)("ImageCrop"),l=n(612),c=n(170),h=n(189)(c),f=n(266),p=n(268),d=n(286),g=(n(610),n(168)),m=n(728),y=s.createClass({displayName:"ImageCrop",mixins:[h.connect(f)],__:function(t){return p.getLocaleString(this.state.locale,t)},propTypes:{onCrop:s.PropTypes.func,lockAspect:s.PropTypes.bool,aspectRatio:s.PropTypes.number,autoCropArea:s.PropTypes.number,allowedExtensions:s.PropTypes.array,max_size:s.PropTypes.number,skip_size:s.PropTypes.number,jpeg_quality:s.PropTypes.number,resize_height:s.PropTypes.number,resize_max_height:s.PropTypes.number,resize_width:s.PropTypes.number,resize_max_width:s.PropTypes.number},getDefaultProps:function(){return{lockAspect:!1,aspectRatio:null,autoCropArea:1,allowedExtensions:["jpg","jpeg","png"],max_size:5242880,skip_size:1e4,jpeg_quality:75,resize_height:null,resize_max_height:null,resize_width:null,resize_max_width:null}},getInitialState:function(){return{img:null,file:null,show:!1,preview:null,autoCropArea:this.props.autoCropArea,aspectRatio:this.props.aspectRatio,loading:!1}},componentWillReceiveProps:function(t){var e={};t.aspectRatio&&(u("update aspectratio to: "+t.aspectRatio),e.aspectRatio=t.aspectRatio),t.autoCropArea&&(u("update autoCropArea to: "+t.autoCropArea),e.autoCropArea=t.autoCropArea),this.setState(e)},show:function(){this.setState({show:!0})},checkFile:function(t){var e=new RegExp(".("+this.props.allowedExtensions.join("|")+")$","i"),n=void 0;if(!e.test(t.name))return n="Unsupported File Extension: "+t.name,new Error(n)},checkFileSize:function(t){var e=this;return new l(function(n,i){var r=e.props.max_size,o=void 0;return t.size>r?(o=e.__("Maximum Size Exceeded:")+" "+Math.round(r/1024),u(o),i(new Error(o))):n()})},resizeImage:function(t){var e=null;if("undefined"!=typeof window){e=n(729);var i=this;return new l(function(n,r){if(i.state.file.size<i.props.skip_size){var o=t.toDataURL(i.state.file.type,m);return void n(o)}var a=void 0,s=void 0,u=i.props.resize_height,l=i.props.resize_width,c=i.props.resize_max_height,h=i.props.resize_max_width;if(u&&!l){a=u;var f=Math.floor(i.state.cropWidth*a/i.state.cropHeight);s=!h||h>f?f:h}else if(!u&&l){s=l;var p=Math.floor(i.state.cropHeight*s/i.state.cropWidth);a=!c||c>p?p:c}else if(u&&l)s=l,a=u;else if(!l&&h){if(!(i.state.cropWidth>h)){var d=t.toDataURL(i.state.file.type,m);return void n(d)}s=h;var g=Math.floor(i.state.cropHeight*s/i.state.cropWidth);a=!c||c>g?g:c}var m=i.props.jpeg_quality,y="png"===i.state.ext,v=document.createElement("canvas");v.width=s,v.height=a,e.resizeCanvas(t,v,{alpha:y},function(t){t&&r(t);var e=v.toDataURL(i.state.file.type,m);n(e)})})}},_onChange:function(t){var e=this;e.setState({loading:!0});var n=void 0;t.dataTransfer?n=t.dataTransfer.files:t.target&&(n=t.target.files);var i=n[0],r=i.name.split(".").pop(),o=this.checkFile(i);return o?(u(o),void d.showMessage({title:"Error",message:o})):void this.checkFileSize(i).then(function(){var t=new Image;t.onload=function(){var n=t.width,o=t.height;m.getData(t,function(){var a=t.exifdata,s=document.createElement("canvas");if(s.width=n,s.height=o,a.Orientation&&1!==a.Orientation){var u=s.getContext("2d");switch(a.Orientation){case 1:u.transform(1,0,0,1,0,0);break;case 2:u.transform(-1,0,0,1,n,0);break;case 3:u.transform(-1,0,0,-1,n,o);break;case 4:u.transform(1,0,0,-1,0,o);break;case 5:s.width=o,s.height=n,u.transform(0,1,1,0,0,0);break;case 6:s.width=o,s.height=n,u.transform(0,1,-1,0,o,0);break;case 7:s.width=o,s.height=n,u.transform(0,-1,-1,0,o,n);break;case 8:s.width=o,s.height=n,u.transform(0,-1,1,0,0,n)}}s.getContext("2d").drawImage(t,0,0,t.width,t.height);var l=s.toDataURL(i.type,1);e.setState({src:l,exif:a,file:i,img:t,ext:r,loading:!1}),g(s).remove()})},t.onerror=function(){var t=e.__("Bad Image:")+" "+i.name;u(t),d.showMessage({title:"Error",message:t})},t.src=window.URL.createObjectURL(i)}).catch(function(t){u(t),d.showMessage({title:"Error",message:t})})},_crop:function(t){this.setState({cropWidth:t.width,cropHeight:t.height,cropScaleX:t.scaleX,cropScaleY:t.scaleY})},onSave:function(){var t=this,e=this.refs.cropper,n=e.getCroppedCanvas();this.resizeImage(n).then(function(e){t.setState({show:!1});var n={width:t.state.cropWidth,height:t.state.cropHeight,exif:t.state.exif};t.props.onCrop&&t.props.onCrop(e,n),t.resetImageCrop()}).catch(function(t){u(t),d.showMessage({title:"Error",message:t})})},handleCloseSelected:function(){this.resetImageCrop(),this.setState({show:!1})},zoomIn:function(){this.refs.cropper.zoom(.1)},zoomOut:function(){this.refs.cropper.zoom(-.1)},cropOriginal:function(){this.resetCropPosition(),this.setState({autoCropArea:1,aspectRatio:null})},aspect16by9:function(){this.setState({aspectRatio:16/9})},aspect3by2:function(){this.setState({aspectRatio:1.5})},aspectSquare:function(){this.setState({aspectRatio:1})},resetCropPosition:function(){this.setState({autoCropArea:1,aspectRatio:NaN}),this.refs.cropper.reset()},resetImageCrop:function(){this.refs.cropper&&this.refs.cropper.reset&&this.refs.cropper.reset(),this.refs.cropper&&this.refs.cropper.clear&&this.refs.cropper.clear(),this.setState({img:null,src:null,selectedFile:null,file:null,show:!1,preview:null,autoCropArea:this.props.autoCropArea,aspectRatio:this.props.aspectRatio})},render:function(){var t="";"undefined"!=typeof window&&(t=this.state.src?s.createElement(a.default,{style:{height:"calc(100% - 10px)",paddingBottom:"10px",width:"100%"},autoCropArea:this.state.autoCropArea,aspectRatio:this.state.aspectRatio,guides:!1,src:this.state.src,ref:"cropper",crop:this._crop}):s.createElement("div",{className:"valign-wrapper",style:{height:"75%"}},s.createElement("h5",{className:"center-align valign",style:{margin:"auto"}},this.__("Choose an image file"))));var e="",n="",i="",o="",u="",l="";return this.state.src&&(this.props.lockAspect||(i=s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.cropOriginal},s.createElement("i",{className:"material-icons"},"crop_original")),o=s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.aspect16by9},s.createElement("i",{className:"material-icons"},"crop_16_9")),u=s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.aspect3by2},s.createElement("i",{className:"material-icons"},"crop_3_2")),l=s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.aspectSquare},s.createElement("i",{className:"material-icons"},"crop_square"))),e=s.createElement("div",{className:"col s12"},s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.zoomIn},s.createElement("i",{className:"material-icons"},"zoom_in")),s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.zoomOut},s.createElement("i",{className:"material-icons"},"zoom_out")),i,o,u,l,s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.reset},s.createElement("i",{className:"material-icons"},"restore"))),n=s.createElement("div",{className:"fixed-action-btn action-button-bottom-right tooltipped","data-position":"top","data-delay":"50","data-tooltip":this.__("Save Map")},s.createElement("a",{onMouseDown:this.onSave,className:"btn-floating btn-large omh-color"},s.createElement("i",{className:"large material-icons"},"save")))),s.createElement(r.Modal,{show:this.state.show,id:"image-crop-modal",className:"image-crop-modal",style:{overflow:"hidden"},dismissible:!1,fixedFooter:!1},s.createElement(r.ModalContent,{style:{padding:0,margin:0,height:"100%",overflow:"hidden"}},s.createElement("a",{className:"omh-color",style:{position:"absolute",top:0,right:0,cursor:"pointer"},onClick:this.handleCloseSelected},s.createElement("i",{className:"material-icons selected-feature-close",style:{fontSize:"35px"}},"close")),s.createElement("div",{className:"row no-padding",style:{height:"80px",marginRight:"35px",marginLeft:"0px",marginBottom:"0px"}},s.createElement("div",{className:"col s12"},s.createElement("div",{className:"file-field input-field"},s.createElement("div",{className:"btn"},s.createElement("span",null,this.__("Choose File")),s.createElement("input",{type:"file",onChange:this._onChange,value:this.state.selectedFile})),s.createElement("div",{className:"file-path-wrapper"},s.createElement("input",{className:"file-path validate",type:"text",value:this.state.selectedFile}))))),s.createElement("div",{className:"row no-margin no-padding",style:{height:"50px"}},e),s.createElement("div",{className:"row",style:{height:"calc(100% - 130px)"}},s.createElement("div",{className:"col s12",style:{height:"100%"}},t),s.createElement("br",{style:{clear:"both"}}),n)))}});t.exports=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=n(1),h=i(c),f=n(727),p=i(f),d=n(28),g=i(d),m=["dragMode","aspectRatio","data","viewMode","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRation","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minContainerWidth","minContainerHeight","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","build","built","cropstart","cropmove","cropend","crop","zoom"],y=m.slice(3),v=function(t){function e(){return o(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),l(e,[{key:"componentDidMount",value:function(){var t=this,e=Object.keys(this.props).filter(function(t){return m.indexOf(t)!==-1}).reduce(function(e,n){return Object.assign({},e,r({},n,t.props[n]))},{});this.img=g.default.findDOMNode(this.refs.img),this.cropper=new p.default(this.img,e)}},{key:"componentWillReceiveProps",value:function(t){t.src!==this.props.src&&this.cropper.reset().clear().replace(t.src),t.aspectRatio!==this.props.aspectRatio&&this.setAspectRatio(t.aspectRatio),t.data!==this.props.data&&this.setData(t.data),t.dragMode!==this.props.dragMode&&this.setDragMode(t.dragMode),t.cropBoxData!==this.props.cropBoxData&&this.setCropBoxData(t.cropBoxData),t.canvasData!==this.props.canvasData&&this.setCanvasData(t.canvasData),t.moveTo!==this.props.moveTo&&(t.moveTo.length>1?this.moveTo(t.moveTo[0],t.moveTo[1]):this.moveTo(t.moveTo[0])),t.zoomTo!==this.props.zoomTo&&this.zoomTo(t.zoomTo),t.rotateTo!==this.props.rotateTo&&this.rotateTo(t.rotateTo),t.scaleX!==this.props.scaleX&&this.scaleX(t.scaleX),t.scaleY!==this.props.scaleY&&this.scaleY(t.scaleY),t.enable!==this.props.enable&&(t.enable?this.enable():this.disable());for(var e in t)if(t[e]!==this.props[e]&&y.indexOf(e)!==-1)throw new Error("prop: "+e+" can't be change after componentDidMount")}},{key:"componentWillUnmount",value:function(){this.img&&(this.cropper.destroy(),delete this.img,delete this.cropper)}},{key:"setDragMode",value:function(t){return this.cropper.setDragMode(t)}},{key:"setAspectRatio",value:function(t){return this.cropper.setAspectRatio(t)}},{key:"getCroppedCanvas",value:function(t){return this.cropper.getCroppedCanvas(t)}},{key:"setCropBoxData",value:function(t){return this.cropper.setCropBoxData(t)}},{key:"getCropBoxData",value:function(){return this.cropper.getCropBoxData()}},{key:"setCanvasData",value:function(t){return this.cropper.setCanvasData(t)}},{key:"getCanvasData",value:function(){return this.cropper.getCanvasData()}},{key:"getImageData",value:function(){return this.cropper.getImageData()}},{key:"getContainerData",value:function(){return this.cropper.getContainerData()}},{key:"setData",value:function(t){return this.cropper.setData(t)}},{key:"getData",value:function(t){return this.cropper.getData(t)}},{key:"crop",value:function(){return this.cropper.crop()}},{key:"move",value:function(t,e){return this.cropper.move(t,e)}},{key:"moveTo",value:function(t,e){return this.cropper.moveTo(t,e)}},{key:"zoom",value:function(t){return this.cropper.zoom(t)}},{key:"zoomTo",value:function(t){return this.cropper.zoomTo(t)}},{key:"rotate",value:function(t){return this.cropper.rotate(t)}},{key:"rotateTo",value:function(t){return this.cropper.rotateTo(t)}},{key:"enable",value:function(){return this.cropper.enable()}},{key:"disable",value:function(){return this.cropper.disable()}},{key:"reset",value:function(){return this.cropper.reset()}},{key:"clear",value:function(){return this.cropper.clear()}},{key:"replace",value:function(t,e){return this.cropper.replace(t,e)}},{key:"scale",value:function(t,e){return this.cropper.scale(t,e)}},{key:"scaleX",value:function(t){return this.cropper.scaleX(t)}},{key:"scaleY",value:function(t){return this.cropper.scaleY(t)}},{key:"render",value:function(){var t=this.props,e=t.src,n=t.alt,i=t.crossOrigin;return h.default.createElement("div",u({},this.props,{src:null,crossOrigin:null,alt:null}),h.default.createElement("img",{crossOrigin:i,ref:"img",src:e,alt:void 0===n?"picture":n,style:{opacity:0}}))}}]),e}(c.Component);v.propTypes={crossOrigin:c.PropTypes.string,src:c.PropTypes.string,alt:c.PropTypes.string,aspectRatio:c.PropTypes.number,dragMode:c.PropTypes.oneOf(["crop","move","none"]),data:c.PropTypes.shape({x:c.PropTypes.number,y:c.PropTypes.number,width:c.PropTypes.number,height:c.PropTypes.number,rotate:c.PropTypes.number,scaleX:c.PropTypes.number,scaleY:c.PropTypes.number}),scaleX:c.PropTypes.number,scaleY:c.PropTypes.number,enable:c.PropTypes.bool,cropBoxData:c.PropTypes.shape({left:c.PropTypes.number,top:c.PropTypes.number,width:c.PropTypes.number,hegiht:c.PropTypes.number}),canvasData:c.PropTypes.shape({left:c.PropTypes.number,top:c.PropTypes.number,width:c.PropTypes.number,hegiht:c.PropTypes.number}),zoomTo:c.PropTypes.number,moveTo:c.PropTypes.arrayOf(c.PropTypes.number),rotateTo:c.PropTypes.number,viewMode:c.PropTypes.oneOf([0,1,2,3]),preview:c.PropTypes.string,responsive:c.PropTypes.bool,restore:c.PropTypes.bool,checkCrossOrigin:c.PropTypes.bool,checkOrientation:c.PropTypes.bool,modal:c.PropTypes.bool,guides:c.PropTypes.bool,center:c.PropTypes.bool,highlight:c.PropTypes.bool,background:c.PropTypes.bool,autoCrop:c.PropTypes.bool,autoCropArea:c.PropTypes.number,movable:c.PropTypes.bool,rotatable:c.PropTypes.bool,scalable:c.PropTypes.bool,zoomable:c.PropTypes.bool,zoomOnTouch:c.PropTypes.bool,zoomOnWheel:c.PropTypes.bool,wheelZoomRation:c.PropTypes.number,cropBoxMovable:c.PropTypes.bool,cropBoxResizable:c.PropTypes.bool,toggleDragModeOnDblclick:c.PropTypes.bool,minContainerWidth:c.PropTypes.number,minContainerHeight:c.PropTypes.number,minCanvasWidth:c.PropTypes.number,minCanvasHeight:c.PropTypes.number,minCropBoxWidth:c.PropTypes.number,minCropBoxHeight:c.PropTypes.number,build:c.PropTypes.func,built:c.PropTypes.func,cropstart:c.PropTypes.func,cropmove:c.PropTypes.func,cropend:c.PropTypes.func,crop:c.PropTypes.func,zoom:c.PropTypes.func},v.defaultProps={src:null,dragMode:"crop",data:null,scaleX:1,scaleY:1,enable:!0,zoomTo:1,rotateTo:0},e.default=v},function(t,e,n){var i,r;/*!
	 * Cropper.js v0.5.6
	 * https://github.com/fengyuanchen/cropperjs
	 *
	 * Copyright (c) 2015-2016 Fengyuan Chen
	 * Released under the MIT license
	 *
	 * Date: 2016-01-18T05:33:43.542Z
	 */
!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("Cropper requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,o){"use strict";function a(t){return te.call(t).slice(8,-1).toLowerCase()}function s(t){return"number"==typeof t&&!isNaN(t)}function u(t){return"undefined"==typeof t}function l(t){return"object"==typeof t&&null!==t}function c(t){var e,n;if(!l(t))return!1;try{return e=t.constructor,n=e.prototype,e&&n&&ee.call(n,"isPrototypeOf")}catch(t){return!1}}function h(t){return"function"===a(t)}function f(t){return Q.isArray?Q.isArray(t):"array"===a(t)}function p(t,e){return e=e>=0?e:0,Q.from?Q.from(t).slice(e):ne.call(t,e)}function d(t){return"string"==typeof t&&(t=t.trim?t.trim():t.replace(Et,"$1")),t}function g(t,e){var n,i;if(t&&h(e))if(f(t)||s(t.length))for(i=0,n=t.length;i<n&&e.call(t,t[i],i,t)!==!1;i++);else if(l(t))for(i in t)if(t.hasOwnProperty(i)&&e.call(t,t[i],i,t)===!1)break;return t}function m(t){var e;if(arguments.length>1){if(e=p(arguments),Z.assign)return Z.assign.apply(Z,e);e.shift(),g(e,function(e){g(e,function(e,n){t[n]=e})})}return t}function y(t,e){var n=p(arguments,2);return function(){return t.apply(e,n.concat(p(arguments)))}}function v(t,e){var n=t.style;g(e,function(t,e){xt.test(e)&&s(t)&&(t+="px"),n[e]=t})}function b(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function _(t,e){var n;return s(t.length)?g(t,function(t){_(t,e)}):t.classList?t.classList.add(e):(n=d(t.className),void(n?n.indexOf(e)<0&&(t.className=n+" "+e):t.className=e))}function x(t,e){return s(t.length)?g(t,function(t){x(t,e)}):t.classList?t.classList.remove(e):void(t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function w(t,e,n){return s(t.length)?g(t,function(t){w(t,e,n)}):void(n?_(t,e):x(t,e))}function E(t,e){return l(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-"+e)}function S(t,e,n){l(n)&&u(t[e])?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-"+e,n)}function M(t,e){l(t[e])?delete t[e]:t.dataset?delete t.dataset[e]:t.removeAttribute("data-"+e)}function T(t,e,n){var i=d(e).split(St);return i.length>1?g(i,function(e){T(t,e,n)}):void(t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n))}function C(t,e,n){var i=d(e).split(St);return i.length>1?g(i,function(e){C(t,e,n)}):void(t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n))}function I(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function N(t){var e,i=t||n.event;return i.target||(i.target=i.srcElement||Y),s(i.pageX)||(e=Y.documentElement,i.pageX=i.clientX+(n.scrollX||e&&e.scrollLeft||0)-(e&&e.clientLeft||0),i.pageY=i.clientY+(n.scrollY||e&&e.scrollTop||0)-(e&&e.clientTop||0)),i}function P(t){var e=Y.documentElement,i=t.getBoundingClientRect();return{left:i.left+(n.scrollX||e&&e.scrollLeft||0)-(e&&e.clientLeft||0),top:i.top+(n.scrollY||e&&e.scrollTop||0)-(e&&e.clientTop||0)}}function L(t){var e=t.length,n=0,i=0;return e&&(g(t,function(t){n+=t.pageX,i+=t.pageY}),n/=e,i/=e),{pageX:n,pageY:i}}function A(t,e){return t.getElementsByTagName(e)}function k(t,e){return t.getElementsByClassName?t.getElementsByClassName(e):t.querySelectorAll("."+e)}function R(t){return Y.createElement(t)}function O(t,e){t.appendChild(e)}function D(t){t.parentNode&&t.parentNode.removeChild(t)}function F(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function z(t){var e=t.match(wt);return e&&(e[1]!==J.protocol||e[2]!==J.hostname||e[3]!==J.port)}function j(t){var e="timestamp="+(new Date).getTime();return t+(t.indexOf("?")===-1?"?":"&")+e}function B(t,e){var n;return t.naturalWidth?e(t.naturalWidth,t.naturalHeight):(n=R("img"),n.onload=function(){e(this.width,this.height)},void(n.src=t.src))}function G(t){var e=[],n=t.rotate,i=t.scaleX,r=t.scaleY;return s(n)&&e.push("rotate("+n+"deg)"),s(i)&&s(r)&&e.push("scale("+i+","+r+")"),e.length?e.join(" "):"none"}function U(t,e){var n,i,r=qt(t.degree)%180,o=(r>90?180-r:r)*Zt/180,a=Xt(o),s=Wt(o),u=t.width,l=t.height,c=t.aspectRatio;return e?(n=u/(s+a/c),i=n/c):(n=u*s+l*a,i=u*a+l*s),{width:n,height:i}}function V(t,e){var n,i,r,o=R("canvas"),a=o.getContext("2d"),u=0,l=0,c=e.naturalWidth,h=e.naturalHeight,f=e.rotate,p=e.scaleX,d=e.scaleY,g=s(p)&&s(d)&&(1!==p||1!==d),m=s(f)&&0!==f,y=m||g,v=c,b=h;return g&&(n=c/2,i=h/2),m&&(r=U({width:c,height:h,degree:f}),v=r.width,b=r.height,n=r.width/2,i=r.height/2),o.width=v,o.height=b,y&&(u=-c/2,l=-h/2,a.save(),a.translate(n,i)),m&&a.rotate(f*Zt/180),g&&a.scale(p,d),a.drawImage(t,$t(u),$t(l),$t(c),$t(h)),y&&a.restore(),o}function K(t,e,n){var i="",r=e;for(n+=e;r<n;r++)i+=ie(t.getUint8(r));return i}function H(t){var e,n,i,r,o,a,s,u,l,c,h=new DataView(t),f=h.byteLength;if(255===h.getUint8(0)&&216===h.getUint8(1))for(l=2;l<f;){if(255===h.getUint8(l)&&225===h.getUint8(l+1)){s=l;break}l++}if(s&&(n=s+4,i=s+10,"Exif"===K(h,n,4)&&(a=h.getUint16(i),o=18761===a,(o||19789===a)&&42===h.getUint16(i+2,o)&&(r=h.getUint32(i+4,o),r>=8&&(u=i+r)))),u)for(f=h.getUint16(u,o),c=0;c<f;c++)if(l=u+12*c+2,274===h.getUint16(l,o)){l+=8,e=h.getUint16(l,o),h.setUint16(l,1,o);break}return e}function q(t){var e,n=t.replace(Tt,""),i=atob(n),r=i.length,o=new $(r),a=new Uint8Array(o);for(e=0;e<r;e++)a[e]=i.charCodeAt(e);return o}function X(t){var e,n=new Uint8Array(t),i=n.length,r="";for(e=0;e<i;e++)r+=ie(n[e]);return"data:image/jpeg;base64,"+btoa(r)}function W(t,e){var n=this;n.element=t,n.options=m({},W.DEFAULTS,c(e)&&e),n.ready=!1,n.built=!1,n.complete=!1,n.rotated=!1,n.cropped=!1,n.disabled=!1,n.replaced=!1,n.limited=!1,n.wheeling=!1,n.isImg=!1,n.originalUrl="",n.canvasData=null,n.cropBoxData=null,n.previews=null,n.init()}var Y=n.document,J=n.location,$=n.ArrayBuffer,Z=n.Object,Q=n.Array,tt=n.String,et=n.Number,nt=n.Math,it="cropper",rt=it+"-modal",ot=it+"-hide",at=it+"-hidden",st=it+"-invisible",ut=it+"-move",lt=it+"-crop",ct=it+"-disabled",ht=it+"-bg",ft="mousedown touchstart pointerdown MSPointerDown",pt="mousemove touchmove pointermove MSPointerMove",dt="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",gt="wheel mousewheel DOMMouseScroll",mt="dblclick",yt="resize",vt="error",bt="load",_t=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/,xt=/width|height|left|top|marginLeft|marginTop/,wt=/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i,Et=/^\s+(.*)\s+$/,St=/\s+/,Mt=/^data\:/,Tt=/^data\:([^\;]+)\;base64,/,Ct=/^data\:image\/jpeg.*;base64,/,It="preview",Nt="action",Pt="e",Lt="w",At="s",kt="n",Rt="se",Ot="sw",Dt="ne",Ft="nw",zt="all",jt="crop",Bt="move",Gt="zoom",Ut="none",Vt=!!Y.createElement("canvas").getContext,Kt=nt.min,Ht=nt.max,qt=nt.abs,Xt=nt.sin,Wt=nt.cos,Yt=nt.sqrt,Jt=nt.round,$t=nt.floor,Zt=nt.PI,Qt=Z.prototype,te=Qt.toString,ee=Qt.hasOwnProperty,ne=Q.prototype.slice,ie=tt.fromCharCode;W.prototype={constructor:W,init:function(){var t,e=this,n=e.element,i=n.tagName.toLowerCase();if(!E(n,it)){if(S(n,it,e),"img"===i){if(e.isImg=!0,e.originalUrl=t=n.getAttribute("src"),!t)return;t=n.src}else"canvas"===i&&Vt&&(t=n.toDataURL());e.load(t)}},load:function(t){var e,n=this,i=n.options;if(t&&(!h(i.build)||i.build.call(n.element)!==!1)){if(n.url=t,n.imageData={},!i.checkOrientation||!$)return n.clone();if(Mt.test(t))return Ct.test(t)?n.read(q(t)):n.clone();e=new XMLHttpRequest,e.onerror=e.onabort=function(){n.clone()},e.onload=function(){n.read(this.response)},e.open("get",t),e.responseType="arraybuffer",e.send()}},read:function(t){var e,n,i,r=this,o=r.options,a=H(t),s=r.imageData;if(a>1)switch(r.url=X(t),a){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}o.rotatable&&(s.rotate=e),o.scalable&&(s.scaleX=n,s.scaleY=i),r.clone()},clone:function(){var t,e,n,i,r,o=this,a=o.element,s=o.url;o.options.checkCrossOrigin&&z(s)&&(t=a.crossOrigin,t?e=s:(t="anonymous",e=j(s))),o.crossOrigin=t,o.crossOriginUrl=e,n=R("img"),t&&(n.crossOrigin=t),n.src=e||s,o.image=n,o._start=i=y(o.start,o),o._stop=r=y(o.stop,o),o.isImg?a.complete?o.start():T(a,bt,i):(T(n,bt,i),T(n,vt,r),_(n,ot),a.parentNode.insertBefore(n,a.nextSibling))},start:function(t){var e=this,n=e.isImg?e.element:e.image;t&&(C(n,bt,e._start),C(n,vt,e._stop)),B(n,function(t,n){m(e.imageData,{naturalWidth:t,naturalHeight:n,aspectRatio:t/n}),e.ready=!0,e.build()})},stop:function(){var t=this,e=t.image;C(e,bt,t._start),C(e,vt,t._stop),D(e),t.image=null},build:function(){var t,e,n,i,r,o,a,s=this,u=s.options,l=s.element,c=s.image;s.ready&&(s.built&&s.unbuild(),e=R("div"),e.innerHTML=W.TEMPLATE,s.container=t=l.parentNode,s.cropper=n=k(e,"cropper-container")[0],s.canvas=i=k(n,"cropper-canvas")[0],s.dragBox=r=k(n,"cropper-drag-box")[0],s.cropBox=o=k(n,"cropper-crop-box")[0],s.viewBox=k(n,"cropper-view-box")[0],s.face=a=k(o,"cropper-face")[0],O(i,c),_(l,at),t.insertBefore(n,l.nextSibling),s.isImg||x(c,ot),s.initPreview(),s.bind(),u.aspectRatio=Ht(0,u.aspectRatio)||NaN,u.viewMode=Ht(0,Kt(3,Jt(u.viewMode)))||0,u.autoCrop?(s.cropped=!0,u.modal&&_(r,rt)):_(o,at),u.guides||_(k(o,"cropper-dashed"),at),u.center||_(k(o,"cropper-center"),at),u.background&&_(n,ht),u.highlight||_(a,st),u.cropBoxMovable&&(_(a,ut),S(a,Nt,zt)),u.cropBoxResizable||(_(k(o,"cropper-line"),at),_(k(o,"cropper-point"),at)),s.setDragMode(u.dragMode),s.render(),s.built=!0,s.setData(u.data),setTimeout(function(){h(u.built)&&u.built.call(l),h(u.crop)&&u.crop.call(l,s.getData()),s.complete=!0},0))},unbuild:function(){var t=this;t.built&&(t.built=!1,t.complete=!1,t.initialImageData=null,t.initialCanvasData=null,t.initialCropBoxData=null,t.containerData=null,t.canvasData=null,t.cropBoxData=null,t.unbind(),t.resetPreview(),t.previews=null,t.viewBox=null,t.cropBox=null,t.dragBox=null,t.canvas=null,t.container=null,D(t.cropper),t.cropper=null)},render:function(){var t=this;t.initContainer(),t.initCanvas(),t.initCropBox(),t.renderCanvas(),t.cropped&&t.renderCropBox()},initContainer:function(){var t,e=this,n=e.options,i=e.element,r=e.container,o=e.cropper;_(o,at),x(i,at),e.containerData=t={width:Ht(r.offsetWidth,et(n.minContainerWidth)||200),height:Ht(r.offsetHeight,et(n.minContainerHeight)||100)},v(o,{width:t.width,height:t.height}),_(i,at),x(o,at)},initCanvas:function(){var t,e=this,n=e.options.viewMode,i=e.containerData,r=e.imageData,o=90===qt(r.rotate),a=o?r.naturalHeight:r.naturalWidth,s=o?r.naturalWidth:r.naturalHeight,u=a/s,l=i.width,c=i.height;i.height*u>i.width?3===n?l=i.height*u:c=i.width/u:3===n?c=i.width/u:l=i.height*u,t={naturalWidth:a,naturalHeight:s,aspectRatio:u,width:l,height:c},t.oldLeft=t.left=(i.width-l)/2,t.oldTop=t.top=(i.height-c)/2,e.canvasData=t,e.limited=1===n||2===n,e.limitCanvas(!0,!0),e.initialImageData=m({},r),e.initialCanvasData=m({},t)},limitCanvas:function(t,e){var n,i,r,o,a=this,s=a.options,u=s.viewMode,l=a.containerData,c=a.canvasData,h=c.aspectRatio,f=a.cropBoxData,p=a.cropped&&f;t&&(n=et(s.minCanvasWidth)||0,i=et(s.minCanvasHeight)||0,u>1?(n=Ht(n,l.width),i=Ht(i,l.height),3===u&&(i*h>n?n=i*h:i=n/h)):u>0&&(n?n=Ht(n,p?f.width:0):i?i=Ht(i,p?f.height:0):p&&(n=f.width,i=f.height,i*h>n?n=i*h:i=n/h)),n&&i?i*h>n?i=n/h:n=i*h:n?i=n/h:i&&(n=i*h),c.minWidth=n,c.minHeight=i,c.maxWidth=1/0,c.maxHeight=1/0),e&&(u?(r=l.width-c.width,o=l.height-c.height,c.minLeft=Kt(0,r),c.minTop=Kt(0,o),c.maxLeft=Ht(0,r),c.maxTop=Ht(0,o),p&&a.limited&&(c.minLeft=Kt(f.left,f.left+f.width-c.width),c.minTop=Kt(f.top,f.top+f.height-c.height),c.maxLeft=f.left,c.maxTop=f.top,2===u&&(c.width>=l.width&&(c.minLeft=Kt(0,r),c.maxLeft=Ht(0,r)),c.height>=l.height&&(c.minTop=Kt(0,o),c.maxTop=Ht(0,o))))):(c.minLeft=-c.width,c.minTop=-c.height,c.maxLeft=l.width,c.maxTop=l.height))},renderCanvas:function(t){var e,n,i=this,r=i.canvasData,o=i.imageData,a=o.rotate;i.rotated&&(i.rotated=!1,n=U({width:o.width,height:o.height,degree:a}),e=n.width/n.height,e!==r.aspectRatio&&(r.left-=(n.width-r.width)/2,r.top-=(n.height-r.height)/2,r.width=n.width,r.height=n.height,r.aspectRatio=e,r.naturalWidth=o.naturalWidth,r.naturalHeight=o.naturalHeight,a%180&&(n=U({width:o.naturalWidth,height:o.naturalHeight,degree:a}),r.naturalWidth=n.width,r.naturalHeight=n.height),i.limitCanvas(!0,!1))),(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Kt(Ht(r.width,r.minWidth),r.maxWidth),r.height=Kt(Ht(r.height,r.minHeight),r.maxHeight),i.limitCanvas(!1,!0),r.oldLeft=r.left=Kt(Ht(r.left,r.minLeft),r.maxLeft),r.oldTop=r.top=Kt(Ht(r.top,r.minTop),r.maxTop),v(i.canvas,{width:r.width,height:r.height,left:r.left,top:r.top}),i.renderImage(),i.cropped&&i.limited&&i.limitCropBox(!0,!0),t&&i.output()},renderImage:function(t){var e,n,i,r,o,a=this,s=a.canvasData,u=a.imageData;u.rotate&&(n=U({width:s.width,height:s.height,degree:u.rotate,aspectRatio:u.aspectRatio},!0),i=n.width,r=n.height,e={width:i,height:r,left:(s.width-i)/2,top:(s.height-r)/2}),m(u,e||{width:s.width,height:s.height,left:0,top:0}),o=G(u),v(a.image,{width:u.width,height:u.height,marginLeft:u.left,marginTop:u.top,WebkitTransform:o,msTransform:o,transform:o}),t&&a.output()},initCropBox:function(){var t=this,e=t.options,n=e.aspectRatio,i=et(e.autoCropArea)||.8,r=t.canvasData,o={width:r.width,height:r.height};n&&(r.height*n>r.width?o.height=o.width/n:o.width=o.height*n),t.cropBoxData=o,t.limitCropBox(!0,!0),o.width=Kt(Ht(o.width,o.minWidth),o.maxWidth),o.height=Kt(Ht(o.height,o.minHeight),o.maxHeight),o.width=Ht(o.minWidth,o.width*i),o.height=Ht(o.minHeight,o.height*i),o.oldLeft=o.left=r.left+(r.width-o.width)/2,o.oldTop=o.top=r.top+(r.height-o.height)/2,t.initialCropBoxData=m({},o)},limitCropBox:function(t,e){var n,i,r,o,a=this,s=a.options,u=s.aspectRatio,l=a.containerData,c=a.canvasData,h=a.cropBoxData,f=a.limited;t&&(n=et(s.minCropBoxWidth)||0,i=et(s.minCropBoxHeight)||0,n=Kt(n,l.width),i=Kt(i,l.height),r=Kt(l.width,f?c.width:l.width),o=Kt(l.height,f?c.height:l.height),u&&(n&&i?i*u>n?i=n/u:n=i*u:n?i=n/u:i&&(n=i*u),o*u>r?o=r/u:r=o*u),h.minWidth=Kt(n,r),h.minHeight=Kt(i,o),h.maxWidth=r,h.maxHeight=o),e&&(f?(h.minLeft=Ht(0,c.left),h.minTop=Ht(0,c.top),h.maxLeft=Kt(l.width,c.left+c.width)-h.width,h.maxTop=Kt(l.height,c.top+c.height)-h.height):(h.minLeft=0,h.minTop=0,h.maxLeft=l.width-h.width,h.maxTop=l.height-h.height))},renderCropBox:function(){var t=this,e=t.options,n=t.containerData,i=t.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Kt(Ht(i.width,i.minWidth),i.maxWidth),i.height=Kt(Ht(i.height,i.minHeight),i.maxHeight),t.limitCropBox(!1,!0),i.oldLeft=i.left=Kt(Ht(i.left,i.minLeft),i.maxLeft),i.oldTop=i.top=Kt(Ht(i.top,i.minTop),i.maxTop),e.movable&&e.cropBoxMovable&&S(t.face,Nt,i.width===n.width&&i.height===n.height?Bt:zt),v(t.cropBox,{width:i.width,height:i.height,left:i.left,top:i.top}),t.cropped&&t.limited&&t.limitCanvas(!0,!0),t.disabled||t.output()},output:function(){var t=this,e=t.options;t.preview(),t.complete&&h(e.crop)&&e.crop.call(t.element,t.getData())},initPreview:function(){var t,e=this,n=e.options.preview,i=R("img"),r=e.crossOrigin,o=r?e.crossOriginUrl:e.url;r&&(i.crossOrigin=r),i.src=o,O(e.viewBox,i),n&&(e.previews=t=Y.querySelectorAll(n),g(t,function(t){var e=R("img");S(t,It,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),r&&(e.crossOrigin=r),e.src=o,e.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',F(t),O(t,e)}))},resetPreview:function(){g(this.previews,function(t){var e=E(t,It);v(t,{width:e.width,height:e.height}),t.innerHTML=e.html,M(t,It)})},preview:function(){var t=this,e=t.imageData,n=t.canvasData,i=t.cropBoxData,r=i.width,o=i.height,a=e.width,s=e.height,u=i.left-n.left-e.left,l=i.top-n.top-e.top,c=G(e),h={WebkitTransform:c,msTransform:c,transform:c};t.cropped&&!t.disabled&&(v(A(t.viewBox,"img")[0],m({width:a,height:s,marginLeft:-u,marginTop:-l},h)),g(t.previews,function(t){var e=E(t,It),n=e.width,i=e.height,c=n,f=i,p=1;r&&(p=n/r,f=o*p),o&&f>i&&(p=i/o,c=r*p,f=i),v(t,{width:c,height:f}),v(A(t,"img")[0],m({width:a*p,height:s*p,marginLeft:-u*p,marginTop:-l*p},h))}))},bind:function(){var t=this,e=t.options,i=t.cropper;T(i,ft,t._cropStart=y(t.cropStart,t)),e.zoomable&&e.zoomOnWheel&&T(i,gt,t._wheel=y(t.wheel,t)),e.toggleDragModeOnDblclick&&T(i,mt,t._dblclick=y(t.dblclick,t)),T(Y,pt,t._cropMove=y(t.cropMove,t)),T(Y,dt,t._cropEnd=y(t.cropEnd,t)),e.responsive&&T(n,yt,t._resize=y(t.resize,t))},unbind:function(){var t=this,e=t.options,i=t.cropper;C(i,ft,t._cropStart),e.zoomable&&e.zoomOnWheel&&C(i,gt,t._wheel),e.toggleDragModeOnDblclick&&C(i,mt,t._dblclick),C(Y,pt,t._cropMove),C(Y,dt,t._cropEnd),e.responsive&&C(n,yt,t._resize)},resize:function(){var t,e,n,i=this,r=i.options.restore,o=i.container,a=i.containerData;!i.disabled&&a&&(n=o.offsetWidth/a.width,1===n&&o.offsetHeight===a.height||(r&&(t=i.getCanvasData(),e=i.getCropBoxData()),i.render(),r&&(i.setCanvasData(g(t,function(e,i){t[i]=e*n})),i.setCropBoxData(g(e,function(t,i){e[i]=t*n})))))},dblclick:function(){var t=this;t.disabled||t.setDragMode(b(t.dragBox,lt)?Bt:jt)},wheel:function(t){var e=this,n=N(t),i=et(e.options.wheelZoomRatio)||.1,r=1;e.disabled||(I(n),e.wheeling||(e.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),n.deltaY?r=n.deltaY>0?1:-1:n.wheelDelta?r=-n.wheelDelta/120:n.detail&&(r=n.detail>0?1:-1),e.zoom(-r*i,n)))},cropStart:function(t){var e,n,i,r=this,o=r.options,a=N(t),s=a.touches;if(!r.disabled){if(s){if(e=s.length,e>1){if(!o.zoomable||!o.zoomOnTouch||2!==e)return;n=s[1],r.startX2=n.pageX,r.startY2=n.pageY,i=Gt}n=s[0]}if(i=i||E(a.target,Nt),_t.test(i)){if(h(o.cropstart)&&o.cropstart.call(r.element,{originalEvent:a,action:i})===!1)return;I(a),r.action=i,r.cropping=!1,r.startX=n?n.pageX:a.pageX,r.startY=n?n.pageY:a.pageY,i===jt&&(r.cropping=!0,_(r.dragBox,rt))}}},cropMove:function(t){var e,n,i=this,r=i.options,o=N(t),a=o.touches,s=i.action;if(!i.disabled){if(a){if(e=a.length,e>1){if(!r.zoomable||!r.zoomOnTouch||2!==e)return;n=a[1],i.endX2=n.pageX,i.endY2=n.pageY}n=a[0]}if(s){if(h(r.cropmove)&&r.cropmove.call(i.element,{originalEvent:o,action:s})===!1)return;I(o),i.endX=n?n.pageX:o.pageX,i.endY=n?n.pageY:o.pageY,i.change(o.shiftKey,s===Gt?o:null)}}},cropEnd:function(t){var e=this,n=e.options,i=N(t),r=e.action;e.disabled||r&&(I(i),e.cropping&&(e.cropping=!1,w(e.dragBox,rt,e.cropped&&n.modal)),e.action="",h(n.cropend)&&n.cropend.call(e.element,{originalEvent:i,action:r}))},change:function(t,e){var n,i,r=this,o=r.options,a=o.aspectRatio,s=r.action,u=r.containerData,l=r.canvasData,c=r.cropBoxData,h=c.width,f=c.height,p=c.left,d=c.top,g=p+h,m=d+f,y=0,v=0,b=u.width,_=u.height,w=!0;switch(!a&&t&&(a=h&&f?h/f:1),r.limited&&(y=c.minLeft,v=c.minTop,b=y+Kt(u.width,l.width),_=v+Kt(u.height,l.height)),i={x:r.endX-r.startX,y:r.endY-r.startY},a&&(i.X=i.y*a,i.Y=i.x/a),s){case zt:p+=i.x,d+=i.y;break;case Pt:if(i.x>=0&&(g>=b||a&&(d<=v||m>=_))){w=!1;break}h+=i.x,a&&(f=h/a,d-=i.Y/2),h<0&&(s=Lt,h=0);break;case kt:if(i.y<=0&&(d<=v||a&&(p<=y||g>=b))){w=!1;break}f-=i.y,d+=i.y,a&&(h=f*a,p+=i.X/2),f<0&&(s=At,f=0);break;case Lt:if(i.x<=0&&(p<=y||a&&(d<=v||m>=_))){w=!1;break}h-=i.x,p+=i.x,a&&(f=h/a,d+=i.Y/2),h<0&&(s=Pt,h=0);break;case At:if(i.y>=0&&(m>=_||a&&(p<=y||g>=b))){w=!1;break}f+=i.y,a&&(h=f*a,p-=i.X/2),f<0&&(s=kt,f=0);break;case Dt:if(a){if(i.y<=0&&(d<=v||g>=b)){w=!1;break}f-=i.y,d+=i.y,h=f*a}else i.x>=0?g<b?h+=i.x:i.y<=0&&d<=v&&(w=!1):h+=i.x,i.y<=0?d>v&&(f-=i.y,d+=i.y):(f-=i.y,d+=i.y);h<0&&f<0?(s=Ot,f=0,h=0):h<0?(s=Ft,h=0):f<0&&(s=Rt,f=0);break;case Ft:if(a){if(i.y<=0&&(d<=v||p<=y)){w=!1;break}f-=i.y,d+=i.y,h=f*a,p+=i.X}else i.x<=0?p>y?(h-=i.x,p+=i.x):i.y<=0&&d<=v&&(w=!1):(h-=i.x,p+=i.x),i.y<=0?d>v&&(f-=i.y,d+=i.y):(f-=i.y,d+=i.y);h<0&&f<0?(s=Rt,f=0,h=0):h<0?(s=Dt,h=0):f<0&&(s=Ot,f=0);break;case Ot:if(a){if(i.x<=0&&(p<=y||m>=_)){w=!1;break}h-=i.x,p+=i.x,f=h/a}else i.x<=0?p>y?(h-=i.x,p+=i.x):i.y>=0&&m>=_&&(w=!1):(h-=i.x,p+=i.x),i.y>=0?m<_&&(f+=i.y):f+=i.y;h<0&&f<0?(s=Dt,f=0,h=0):h<0?(s=Rt,h=0):f<0&&(s=Ft,f=0);break;case Rt:if(a){if(i.x>=0&&(g>=b||m>=_)){w=!1;break}h+=i.x,f=h/a}else i.x>=0?g<b?h+=i.x:i.y>=0&&m>=_&&(w=!1):h+=i.x,i.y>=0?m<_&&(f+=i.y):f+=i.y;h<0&&f<0?(s=Ft,f=0,h=0):h<0?(s=Ot,h=0):f<0&&(s=Dt,f=0);break;case Bt:r.move(i.x,i.y),w=!1;break;case Gt:r.zoom(function(t,e,n,i){var r=Yt(t*t+e*e),o=Yt(n*n+i*i);return(o-r)/r}(qt(r.startX-r.startX2),qt(r.startY-r.startY2),qt(r.endX-r.endX2),qt(r.endY-r.endY2)),e),r.startX2=r.endX2,r.startY2=r.endY2,w=!1;break;case jt:if(!i.x||!i.y){w=!1;break}n=P(r.cropper),p=r.startX-n.left,d=r.startY-n.top,h=c.minWidth,f=c.minHeight,i.x>0?s=i.y>0?Rt:Dt:i.x<0&&(p-=h,s=i.y>0?Ot:Ft),i.y<0&&(d-=f),r.cropped||(x(r.cropBox,at),r.cropped=!0,r.limited&&r.limitCropBox(!0,!0))}w&&(c.width=h,c.height=f,c.left=p,c.top=d,r.action=s,r.renderCropBox()),r.startX=r.endX,r.startY=r.endY},crop:function(){var t=this;return t.built&&!t.disabled&&(t.cropped||(t.cropped=!0,t.limitCropBox(!0,!0),t.options.modal&&_(t.dragBox,rt),x(t.cropBox,at)),t.setCropBoxData(t.initialCropBoxData)),t},reset:function(){var t=this;return t.built&&!t.disabled&&(t.imageData=m({},t.initialImageData),t.canvasData=m({},t.initialCanvasData),t.cropBoxData=m({},t.initialCropBoxData),t.renderCanvas(),t.cropped&&t.renderCropBox()),t},clear:function(){var t=this;return t.cropped&&!t.disabled&&(m(t.cropBoxData,{left:0,top:0,width:0,height:0}),t.cropped=!1,t.renderCropBox(),t.limitCanvas(),t.renderCanvas(),x(t.dragBox,rt),_(t.cropBox,at)),t},replace:function(t){var e=this;return!e.disabled&&t&&(e.isImg&&(e.replaced=!0,e.element.src=t),e.options.data=null,e.load(t)),e},enable:function(){var t=this;return t.built&&(t.disabled=!1,x(t.cropper,ct)),t},disable:function(){var t=this;return t.built&&(t.disabled=!0,_(t.cropper,ct)),t},destroy:function(){var t=this,e=t.element,n=t.image;return t.ready?(t.isImg&&t.replaced&&(e.src=t.originalUrl),t.unbuild(),x(e,at)):t.isImg?C(e,bt,t.start):n&&D(n),M(e,it),t},move:function(t,e){var n=this,i=n.canvasData;return n.moveTo(u(t)?t:i.left+et(t),u(e)?e:i.top+et(e))},moveTo:function(t,e){var n=this,i=n.canvasData,r=!1;return u(e)&&(e=t),t=et(t),e=et(e),n.built&&!n.disabled&&n.options.movable&&(s(t)&&(i.left=t,r=!0),s(e)&&(i.top=e,r=!0),r&&n.renderCanvas(!0)),n},zoom:function(t,e){var n=this,i=n.canvasData;return t=et(t),t=t<0?1/(1-t):1+t,n.zoomTo(i.width*t/i.naturalWidth,e)},zoomTo:function(t,e){var n,i,r,o,a=this,s=a.options,u=a.canvasData,l=u.width,c=u.height,f=u.naturalWidth,p=u.naturalHeight;if(t=et(t),t>=0&&a.built&&!a.disabled&&s.zoomable){if(n=f*t,i=p*t,h(s.zoom)&&s.zoom.call(a.element,{originalEvent:e,oldRatio:l/f,ratio:n/f})===!1)return a;e?(r=P(a.cropper),o=e.touches?L(e.touches):{pageX:e.pageX,pageY:e.pageY},u.left-=(n-l)*((o.pageX-r.left-u.left)/l),u.top-=(i-c)*((o.pageY-r.top-u.top)/c)):(u.left-=(n-l)/2,u.top-=(i-c)/2),u.width=n,u.height=i,a.renderCanvas(!0)}return a},rotate:function(t){var e=this;return e.rotateTo((e.imageData.rotate||0)+et(t))},rotateTo:function(t){var e=this;return t=et(t),s(t)&&e.built&&!e.disabled&&e.options.rotatable&&(e.imageData.rotate=t%360,e.rotated=!0,e.renderCanvas(!0)),e},scale:function(t,e){var n=this,i=n.imageData,r=!1;return u(e)&&(e=t),t=et(t),e=et(e),n.built&&!n.disabled&&n.options.scalable&&(s(t)&&(i.scaleX=t,r=!0),s(e)&&(i.scaleY=e,r=!0),r&&n.renderImage(!0)),n},scaleX:function(t){var e=this,n=e.imageData.scaleY;return e.scale(t,s(n)?n:1)},scaleY:function(t){var e=this,n=e.imageData.scaleX;return e.scale(s(n)?n:1,t)},getData:function(t){var e,n,i=this,r=i.options,o=i.imageData,a=i.canvasData,s=i.cropBoxData;return i.built&&i.cropped?(n={x:s.left-a.left,y:s.top-a.top,width:s.width,height:s.height},e=o.width/o.naturalWidth,g(n,function(i,r){i/=e,n[r]=t?Jt(i):i})):n={x:0,y:0,width:0,height:0},r.rotatable&&(n.rotate=o.rotate||0),r.scalable&&(n.scaleX=o.scaleX||1,n.scaleY=o.scaleY||1),n},setData:function(t){var e,n,i,r=this,o=r.options,a=r.imageData,u=r.canvasData,l={};return h(t)&&(t=t.call(r.element)),r.built&&!r.disabled&&c(t)&&(o.rotatable&&s(t.rotate)&&t.rotate!==a.rotate&&(a.rotate=t.rotate,r.rotated=e=!0),o.scalable&&(s(t.scaleX)&&t.scaleX!==a.scaleX&&(a.scaleX=t.scaleX,n=!0),s(t.scaleY)&&t.scaleY!==a.scaleY&&(a.scaleY=t.scaleY,n=!0)),e?r.renderCanvas():n&&r.renderImage(),i=a.width/a.naturalWidth,s(t.x)&&(l.left=t.x*i+u.left),s(t.y)&&(l.top=t.y*i+u.top),s(t.width)&&(l.width=t.width*i),s(t.height)&&(l.height=t.height*i),r.setCropBoxData(l)),r},getContainerData:function(){var t=this;return t.built?t.containerData:{}},getImageData:function(){var t=this;return t.ready?t.imageData:{}},getCanvasData:function(){var t=this,e=t.canvasData,n={};return t.built&&g(["left","top","width","height","naturalWidth","naturalHeight"],function(t){n[t]=e[t]}),n},setCanvasData:function(t){var e=this,n=e.canvasData,i=n.aspectRatio;return h(t)&&(t=t.call(e.element)),e.built&&!e.disabled&&c(t)&&(s(t.left)&&(n.left=t.left),s(t.top)&&(n.top=t.top),s(t.width)?(n.width=t.width,n.height=t.width/i):s(t.height)&&(n.height=t.height,n.width=t.height*i),e.renderCanvas(!0)),e},getCropBoxData:function(){var t,e=this,n=e.cropBoxData;return e.built&&e.cropped&&(t={left:n.left,top:n.top,width:n.width,height:n.height}),t||{}},setCropBoxData:function(t){var e,n,i=this,r=i.cropBoxData,o=i.options.aspectRatio;return h(t)&&(t=t.call(i.element)),i.built&&i.cropped&&!i.disabled&&c(t)&&(s(t.left)&&(r.left=t.left),s(t.top)&&(r.top=t.top),s(t.width)&&(e=!0,r.width=t.width),s(t.height)&&(n=!0,r.height=t.height),o&&(e?r.height=r.width/o:n&&(r.width=r.height*o)),i.renderCropBox()),i},getCroppedCanvas:function(t){var e,n,i,r,o,a,s,u,l,h,f,p=this;if(p.built&&p.cropped&&Vt)return c(t)||(t={}),f=p.getData(),e=f.width,n=f.height,u=e/n,c(t)&&(o=t.width,a=t.height,o?(a=o/u,s=o/e):a&&(o=a*u,s=a/n)),i=$t(o||e),r=$t(a||n),l=R("canvas"),l.width=i,l.height=r,h=l.getContext("2d"),t.fillColor&&(h.fillStyle=t.fillColor,h.fillRect(0,0,i,r)),h.drawImage.apply(h,function(){var t,i,r,o,a,u,l=V(p.image,p.imageData),c=l.width,h=l.height,d=[l],g=f.x,m=f.y;return g<=-e||g>c?g=t=r=a=0:g<=0?(r=-g,g=0,t=a=Kt(c,e+g)):g<=c&&(r=0,t=a=Kt(e,c-g)),t<=0||m<=-n||m>h?m=i=o=u=0:m<=0?(o=-m,m=0,i=u=Kt(h,n+m)):m<=h&&(o=0,i=u=Kt(n,h-m)),d.push($t(g),$t(m),$t(t),$t(i)),s&&(r*=s,o*=s,a*=s,u*=s),a>0&&u>0&&d.push($t(r),$t(o),$t(a),$t(u)),d}.call(p)),l},setAspectRatio:function(t){var e=this,n=e.options;return e.disabled||u(t)||(n.aspectRatio=Ht(0,t)||NaN,e.built&&(e.initCropBox(),e.cropped&&e.renderCropBox())),e},setDragMode:function(t){var e,n,i=this,r=i.options,o=i.dragBox,a=i.face;return i.ready&&!i.disabled&&(e=t===jt,n=r.movable&&t===Bt,t=e||n?t:Ut,S(o,Nt,t),w(o,lt,e),w(o,ut,n),r.cropBoxMovable||(S(a,Nt,t),w(a,lt,e),w(a,ut,n))),i}},W.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},W.TEMPLATE=function(t,e){return e=e.split(","),t.replace(/\d+/g,function(t){return e[t]})}('<0 6="5-container"><0 6="5-wrap-9"><0 6="5-canvas"></0></0><0 6="5-drag-9"></0><0 6="5-crop-9"><1 6="5-view-9"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-center"></1><1 6="5-face"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,action,data,point,cropper,class,line,dashed,box");var re=n.Cropper;return W.noConflict=function(){return n.Cropper=re,W},W.setDefaults=function(t){m(W.DEFAULTS,t)},i=[],r=function(){return W}.apply(e,i),!(void 0!==r&&(t.exports=r)),o||(n.Cropper=W),W})},function(t,e,i){var r,o;(function(){function i(t){return!!t.exifdata}function a(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(t),i=n.length,r=new ArrayBuffer(i),o=new Uint8Array(r),a=0;a<i;a++)o[a]=n.charCodeAt(a);return r}function s(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(t){200!=this.status&&0!==this.status||e(this.response)},n.send()}function u(t,e){function n(n){var i=l(n),r=c(n);t.exifdata=i||{},t.iptcdata=r||{},e&&e.call(t)}if(t.src)if(/^data\:/i.test(t.src)){var i=a(t.src);n(i)}else if(/^blob\:/i.test(t.src)){var r=new FileReader;r.onload=function(t){n(t.target.result)},s(t.src,function(t){r.readAsArrayBuffer(t)})}else{var o=new XMLHttpRequest;o.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(o.response),o=null},o.open("GET",t.src,!0),o.responseType="arraybuffer",o.send(null)}else if(window.FileReader&&(t instanceof window.Blob||t instanceof window.File)){var r=new FileReader;r.onload=function(t){m&&console.log("Got file of length "+t.target.result.byteLength),n(t.target.result)},r.readAsArrayBuffer(t)}}function l(t){var e=new DataView(t);if(m&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return m&&console.log("Not a valid JPEG"),!1;for(var n,i=2,r=t.byteLength;i<r;){if(255!=e.getUint8(i))return m&&console.log("Not a valid marker at offset "+i+", found: "+e.getUint8(i)),!1;if(n=e.getUint8(i+1),m&&console.log(n),225==n)return m&&console.log("Found 0xFFE1 marker"),g(e,i+4,e.getUint16(i+2)-2);i+=2+e.getUint16(i+2)}}function c(t){var e=new DataView(t);if(m&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return m&&console.log("Not a valid JPEG"),!1;for(var n=2,i=t.byteLength,r=function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)};n<i;){if(r(e,n)){var o=e.getUint8(n+7);o%2!==0&&(o+=1),0===o&&(o=4);var a=n+8+o,s=e.getUint16(n+6+o);return h(t,a,s)}n++}}function h(t,e,n){for(var i,r,o,a,s,u=new DataView(t),l={},c=e;c<e+n;)28===u.getUint8(c)&&2===u.getUint8(c+1)&&(a=u.getUint8(c+2),a in w&&(o=u.getInt16(c+3),s=o+5,r=w[a],i=d(u,c+5,o),l.hasOwnProperty(r)?l[r]instanceof Array?l[r].push(i):l[r]=[l[r],i]:l[r]=i)),c++;return l}function f(t,e,n,i,r){var o,a,s,u=t.getUint16(n,!r),l={};for(s=0;s<u;s++)o=n+12*s+2,a=i[t.getUint16(o,!r)],!a&&m&&console.log("Unknown tag: "+t.getUint16(o,!r)),l[a]=p(t,o,e,n,r);return l}function p(t,e,n,i,r){var o,a,s,u,l,c,h=t.getUint16(e+2,!r),f=t.getUint32(e+4,!r),p=t.getUint32(e+8,!r)+n;switch(h){case 1:case 7:if(1==f)return t.getUint8(e+8,!r);for(o=f>4?p:e+8,a=[],u=0;u<f;u++)a[u]=t.getUint8(o+u);return a;case 2:return o=f>4?p:e+8,d(t,o,f-1);case 3:if(1==f)return t.getUint16(e+8,!r);for(o=f>2?p:e+8,a=[],u=0;u<f;u++)a[u]=t.getUint16(o+2*u,!r);return a;case 4:if(1==f)return t.getUint32(e+8,!r);for(a=[],u=0;u<f;u++)a[u]=t.getUint32(p+4*u,!r);return a;case 5:if(1==f)return l=t.getUint32(p,!r),c=t.getUint32(p+4,!r),s=new Number(l/c),s.numerator=l,s.denominator=c,s;for(a=[],u=0;u<f;u++)l=t.getUint32(p+8*u,!r),c=t.getUint32(p+4+8*u,!r),a[u]=new Number(l/c),a[u].numerator=l,a[u].denominator=c;return a;case 9:if(1==f)return t.getInt32(e+8,!r);for(a=[],u=0;u<f;u++)a[u]=t.getInt32(p+4*u,!r);return a;case 10:if(1==f)return t.getInt32(p,!r)/t.getInt32(p+4,!r);for(a=[],u=0;u<f;u++)a[u]=t.getInt32(p+8*u,!r)/t.getInt32(p+4+8*u,!r);return a}}function d(t,e,i){var r="";for(n=e;n<e+i;n++)r+=String.fromCharCode(t.getUint8(n));return r}function g(t,e){if("Exif"!=d(t,e,4))return m&&console.log("Not valid EXIF data! "+d(t,e,4)),!1;var n,i,r,o,a,s=e+6;if(18761==t.getUint16(s))n=!1;else{if(19789!=t.getUint16(s))return m&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),
!1;n=!0}if(42!=t.getUint16(s+2,!n))return m&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var u=t.getUint32(s+4,!n);if(u<8)return m&&console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(s+4,!n)),!1;if(i=f(t,s,s+u,b,n),i.ExifIFDPointer){o=f(t,s,s+i.ExifIFDPointer,v,n);for(r in o){switch(r){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[r]=x[r][o[r]];break;case"ExifVersion":case"FlashpixVersion":o[r]=String.fromCharCode(o[r][0],o[r][1],o[r][2],o[r][3]);break;case"ComponentsConfiguration":o[r]=x.Components[o[r][0]]+x.Components[o[r][1]]+x.Components[o[r][2]]+x.Components[o[r][3]]}i[r]=o[r]}}if(i.GPSInfoIFDPointer){a=f(t,s,s+i.GPSInfoIFDPointer,_,n);for(r in a){switch(r){case"GPSVersionID":a[r]=a[r][0]+"."+a[r][1]+"."+a[r][2]+"."+a[r][3]}i[r]=a[r]}}return i}var m=!1,y=function(t){return t instanceof y?t:this instanceof y?void(this.EXIFwrapped=t):new y(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=y),e.EXIF=y;var v=y.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},b=y.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},_=y.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},x=y.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},w={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};y.getData=function(t,e){return!((t instanceof Image||t instanceof HTMLImageElement)&&!t.complete)&&(i(t)?e&&e.call(t):u(t,e),!0)},y.getTag=function(t,e){if(i(t))return t.exifdata[e]},y.getAllTags=function(t){if(!i(t))return{};var e,n=t.exifdata,r={};for(e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r},y.pretty=function(t){if(!i(t))return"";var e,n=t.exifdata,r="";for(e in n)n.hasOwnProperty(e)&&(r+="object"==typeof n[e]?n[e]instanceof Number?e+" : "+n[e]+" ["+n[e].numerator+"/"+n[e].denominator+"]\r\n":e+" : ["+n[e].length+" values]\r\n":e+" : "+n[e]+"\r\n");return r},y.readFromBinaryFile=function(t){return l(t)},r=[],o=function(){return y}.apply(e,r),!(void 0!==o&&(t.exports=o))}).call(this)},function(t,e){!function(n){if("object"==typeof e&&"undefined"!=typeof t)t.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.pica=n()}}(function(){return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";e.exports=function(){return document.createElement("canvas")}},{}],2:[function(t,e,n){"use strict";var i=1;e.exports=function(){return i++}},{}],3:[function(t,e,n){"use strict";function i(t){this.create=t,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0}var r=2e3,o=500;i.prototype.acquire=function(){var t,e=this;return 0!==this.available.length?t=this.available.pop():(t=this.create(),t.id=this.lastId++,t.release=function(){e.release(t)}),this.acquired[t.id]=t,t},i.prototype.release=function(t){delete this.acquired[t.id],t.lastUsed=Date.now(),this.available.push(t),0===this.timeoutId&&(this.timeoutId=setTimeout(this.gc.bind(this),o))},i.prototype.gc=function(){var t=Date.now();this.available=this.available.filter(function(e){return!(t-e.lastUsed>r&&(e.destroy(),1))}),0!==this.available.length?this.timeoutId=setTimeout(this.gc.bind(this),o):this.timeoutId=0},e.exports=i},{}],4:[function(t,e,n){"use strict";function i(t){return t<0?0:t>255?255:t}function r(t){return Math.round(t*((1<<c)-1))}function o(t,e,n,i,o){var a,s,u,l,c,f,p,d,g,m,y,v,b,_,x,w,E,S=h[t].filter,M=1/i,T=Math.min(1,i),C=h[t].win/T,I=Math.floor(2*(C+1)),N=new Int16Array((I+2)*n),P=0;for(a=0;a<n;a++){for(s=(a+.5)*M+o,u=Math.max(0,Math.floor(s-C)),l=Math.min(e-1,Math.ceil(s+C)),c=l-u+1,f=new Float32Array(c),p=new Int16Array(c),d=0,g=u,m=0;g<=l;g++,m++)y=S((g+.5-s)*T),d+=y,f[m]=y;for(v=0,m=0;m<f.length;m++)b=f[m]/d,v+=b,p[m]=r(b);for(p[n>>1]+=r(1-v),_=0;_<p.length&&0===p[_];)_++;if(_<p.length){for(x=p.length-1;x>0&&0===p[x];)x--;w=u+_,E=x-_+1,N[P++]=w,N[P++]=E,N.set(p.subarray(_,x+1),P),P+=E}else N[P++]=0,N[P++]=0}return N}function a(t,e,n,r,o,a){var s,u,l,c,h,f,p,d,g,m,y,v=0,b=0;for(g=0;g<r;g++){for(h=0,m=0;m<o;m++){for(f=a[h++],p=a[h++],d=v+4*f|0,s=u=l=c=0;p>0;p--)y=a[h++],c=c+y*t[d+3]|0,l=l+y*t[d+2]|0,u=u+y*t[d+1]|0,s=s+y*t[d]|0,d=d+4|0;e[b+3]=i(c+8192>>14),e[b+2]=i(l+8192>>14),e[b+1]=i(u+8192>>14),e[b]=i(s+8192>>14),b=b+4*r|0}b=4*(g+1)|0,v=(g+1)*n*4|0}}function s(t,e,n,r,o,a){var s,u,l,c,h,f,p,d,g,m,y,v=0,b=0;for(g=0;g<r;g++){for(h=0,m=0;m<o;m++){for(f=a[h++],p=a[h++],d=v+4*f|0,s=u=l=c=0;p>0;p--)y=a[h++],c=c+y*t[d+3]|0,l=l+y*t[d+2]|0,u=u+y*t[d+1]|0,s=s+y*t[d]|0,d=d+4|0;e[b+3]=i(c+8192>>14),e[b+2]=i(l+8192>>14),e[b+1]=i(u+8192>>14),e[b]=i(s+8192>>14),b=b+4*r|0}b=4*(g+1)|0,v=(g+1)*n*4|0}}function u(t,e,n){for(var i=3,r=e*n*4|0;i<r;)t[i]=255,i=i+4|0}function l(t){var e=t.src,n=t.width,i=t.height,r=t.toWidth,l=t.toHeight,c=t.scaleX||t.toWidth/t.width,h=t.scaleY||t.toHeight/t.height,f=t.offsetX||0,p=t.offsetY||0,d=t.dest||new Uint8Array(r*l*4),g="undefined"==typeof t.quality?3:t.quality,m=t.alpha||!1;if(n<1||i<1||r<1||l<1)return[];var y=o(g,n,r,c,f),v=o(g,i,l,h,p),b=new Uint8Array(r*i*4);return a(e,b,n,i,r,y),s(b,d,i,r,l,v),m||u(d,r,l),d}var c=14,h=[{win:.5,filter:function(t){return t>=-.5&&t<.5?1:0}},{win:1,filter:function(t){if(t<=-1||t>=1)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*(.54+.46*Math.cos(e/1))}},{win:2,filter:function(t){if(t<=-2||t>=2)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/2)/(e/2)}},{win:3,filter:function(t){if(t<=-3||t>=3)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/3)/(e/3)}}];e.exports=l},{}],5:[function(t,e,n){"use strict";function i(t,e,n){for(var i,r,o,a,s,u=e*n,l=new Uint16Array(u),c=0;c<u;c++)i=t[4*c],r=t[4*c+1],o=t[4*c+2],s=i>=r&&i>=o?i:r>=o&&r>=i?r:o,a=i<=r&&i<=o?i:r<=o&&r<=i?r:o,l[c]=257*(s+a)>>1;return l}function r(t,e,n,r,a,s){var u,l,c,h,f,p,d,g,m,y,v,b,_;if(!(0===r||a<.5)){a>2&&(a=2);var x=i(t,e,n),w=new Uint16Array(x);o(w,e,n,a);for(var E=r/100*4096+.5|0,S=257*s|0,M=e*n,T=0;T<M;T++)b=2*(x[T]-w[T]),Math.abs(b)>=S&&(_=4*T,u=t[_],l=t[_+1],c=t[_+2],g=u>=l&&u>=c?u:l>=u&&l>=c?l:c,d=u<=l&&u<=c?u:l<=u&&l<=c?l:c,p=257*(g+d)>>1,d===g?h=f=0:(f=p<=32767?4095*(g-d)/(g+d)|0:4095*(g-d)/(510-g-d)|0,h=u===g?65535*(l-c)/(6*(g-d))|0:l===g?21845+(65535*(c-u)/(6*(g-d))|0):43690+(65535*(u-l)/(6*(g-d))|0)),p+=E*b+2048>>12,p>65535?p=65535:p<0&&(p=0),0===f?u=l=c=p>>8:(y=p<=32767?p*(4096+f)+2048>>12:p+((65535-p)*f+2048>>12),m=2*p-y>>8,y>>=8,v=h+21845&65535,u=v>=43690?m:v>=32767?m+(6*(y-m)*(43690-v)+32768>>16):v>=10922?y:m+(6*(y-m)*v+32768>>16),v=65535&h,l=v>=43690?m:v>=32767?m+(6*(y-m)*(43690-v)+32768>>16):v>=10922?y:m+(6*(y-m)*v+32768>>16),v=h-21845&65535,c=v>=43690?m:v>=32767?m+(6*(y-m)*(43690-v)+32768>>16):v>=10922?y:m+(6*(y-m)*v+32768>>16)),t[_]=u,t[_+1]=l,t[_+2]=c)}}var o=t("glur/mono16");e.exports=r,e.exports.lightness=i},{"glur/mono16":11}],6:[function(t,e,n){"use strict";function i(t){var e=Math.round(t);return Math.abs(t-e)<o?e:Math.floor(t)}function r(t){var e=Math.round(t);return Math.abs(t-e)<o?e:Math.ceil(t)}var o=1e-5;e.exports.createRegions=function(t){var e,n,o,a,s,u,l,c=t.toWidth/t.width,h=t.toHeight/t.height,f=i(t.srcTileSize*c)-2*t.destTileBorder,p=i(t.srcTileSize*h)-2*t.destTileBorder,d=[];for(a=0;a<t.toHeight;a+=p)for(o=0;o<t.toWidth;o+=f)e=o-t.destTileBorder,e<0&&(e=0),s=o+f+t.destTileBorder-e,e+s>=t.toWidth&&(s=t.toWidth-e),n=a-t.destTileBorder,n<0&&(n=0),u=a+p+t.destTileBorder-n,n+u>=t.toHeight&&(u=t.toHeight-n),l={toX:e,toY:n,toWidth:s,toHeight:u,toInnerX:o,toInnerY:a,toInnerWidth:f,toInnerHeight:p,offsetX:e/c-i(e/c),offsetY:n/h-i(n/h),scaleX:c,scaleY:h,x:i(e/c),y:i(n/h),width:r(s/c),height:r(u/h)},d.push(l);return d},e.exports.eachLimit=function(t,e,n,i){function r(e){if(!s){if(e)return s=!0,void i(e);a++,a===t.length?i():o<t.length&&n(t[o++],r)}}0===t.length&&i();for(var o=0,a=0,s=!1;o<e&&o<t.length;)n(t[o++],r)}},{}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./resize_array"),i=t("./unsharp");e.onmessage=function(t){var r=t.data;r.dest=new Uint8Array(r.toWidth*r.toHeight*4),n(r),r.unsharpAmount&&i(r.dest,r.toWidth,r.toHeight,r.unsharpAmount,r.unsharpRadius,r.unsharpThreshold),e.postMessage({output:r.dest},[r.dest.buffer])}}},{"./resize_array":4,"./unsharp":5}],8:[function(t,e,n){"use strict";function i(t,e,n,i){var f=e.getContext("2d",{alpha:Boolean(n.alpha)}),p=l();p.width=Math.min(c,t.width),p.height=Math.min(c,t.height);var d=p.getContext("2d",{alpha:Boolean(n.alpha)});d.globalCompositeOperation="copy";var g=a({width:t.naturalWidth||t.width,height:t.naturalHeight||t.height,srcTileSize:c,toWidth:e.width,toHeight:e.height,destTileBorder:Math.ceil(Math.max(h,2.5*n.unsharpRadius|0))});return s(g,1,function(e,i){d.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var a=d.getImageData(0,0,e.width,e.height),s=f.createImageData(e.toWidth,e.toHeight),u={src:a.data,dest:s.data,width:e.width,height:e.height,toWidth:e.toWidth,toHeight:e.toHeight,scaleX:e.scaleX,scaleY:e.scaleY,offsetX:e.offsetX,offsetY:e.offsetY,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};r(u),n.unsharpAmount&&o(u.dest,u.toWidth,u.toHeight,u.unsharpAmount,u.unsharpRadius,u.unsharpThreshold),f.putImageData(s,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),i()},i),u()}var r=t("./js/resize_array"),o=t("./js/unsharp"),a=t("./js/utils").createRegions,s=t("./js/utils").eachLimit,u=t("./js/generate_id"),l=t("./js/create_canvas"),c=1024,h=3;e.exports=i,e.exports.terminate=function(){}},{"./js/create_canvas":1,"./js/generate_id":2,"./js/resize_array":4,"./js/unsharp":5,"./js/utils":6}],9:[function(t,e,n){"use strict";function i(t,e,n,i){var r=e.getContext("2d",{alpha:Boolean(n.alpha)}),o=c();o.width=Math.min(f,t.naturalWidth||t.width),o.height=Math.min(f,t.naturalHeight||t.height);var a=o.getContext("2d",{alpha:Boolean(n.alpha)});a.globalCompositeOperation="copy";var h=s({width:t.naturalWidth||t.width,height:t.naturalHeight||t.height,srcTileSize:f,toWidth:e.width,toHeight:e.height,destTileBorder:Math.ceil(Math.max(p,2.5*n.unsharpRadius|0))}),y=1;"undefined"!=typeof navigator&&(y=navigator.hardwareConcurrency||1);var v=n._id||l();return m[v]=!0,u(h,y,function(e,i){a.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var o=a.getImageData(0,0,e.width,e.height),s={src:o.data,width:e.width,height:e.height,toWidth:e.toWidth,toHeight:e.toHeight,scaleX:e.scaleX,scaleY:e.scaleY,offsetX:e.offsetX,offsetY:e.offsetY,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold},u=g.acquire();u.value.onmessage=function(t){var n,o,a,s,l;if(u.release(),!m[v])return void i(!0);if(t.data.err)return void i(t.data.err);if(a=r.createImageData(e.toWidth,e.toHeight),s=t.data.output,l=a.data,l.set)l.set(s);else for(n=0,o=s.length;n<o;n++)l[n]=s[n];d?r.putImageData(a,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth+1e-5,e.toInnerHeight+1e-5):r.putImageData(a,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),i()},u.value.postMessage(s,[s.src.buffer])},function(t){m[v]&&(delete m[v],i(t))}),v}function r(t){m[t]&&delete m[t]}var o=t("webworkify"),a=t("./js/worker.js"),s=t("./js/utils").createRegions,u=t("./js/utils").eachLimit,l=t("./js/generate_id"),c=t("./js/create_canvas"),h=t("./js/pool"),f=1024,p=3,d=!1;try{d=navigator.userAgent.indexOf("Safari")!==-1}catch(t){}var g=new h(function(){return{value:o(a),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var t=window.URL||window.webkitURL||window.mozURL||window.msURL;t&&t.revokeObjectURL&&this.value.objectURL&&t.revokeObjectURL(this.value.objectURL)}}}}),m={};e.exports=i,e.exports.terminate=r},{"./js/create_canvas":1,"./js/generate_id":2,"./js/pool":3,"./js/utils":6,"./js/worker.js":7,webworkify:13}],10:[function(t,e,n){"use strict";function i(t){try{(window.console.error||window.console.log).call(window.console,t)}catch(t){}}function r(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("gl error "+e)}function o(t){return t.getContext("webgl")||t.getContext("experimental-webgl")}function a(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(i("Shader compile error: "+t.getShaderInfoLog(r)+". Source: `"+n+"`"),t.deleteShader(r),null)}function s(t,e,n){var o=t.createProgram();return t.attachShader(o,e),t.attachShader(o,n),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(i("Program linking error: "+t.getProgramInfoLog(o)),t.deleteProgram(o)),r(t),o}function u(t,e,n,i,o){var a=t.getAttribLocation(e,n);t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.enableVertexAttribArray(a),t.vertexAttribPointer(a,o.elementSize,t.FLOAT,!1,0,0),r(t)}function l(t,e,n,i){var r=t.getUniformLocation(e,n);t.uniform1i(r,i)}function c(t,e,n,i,r){var o=t.getUniformLocation(e,n);t.uniform2f(o,i,r)}function h(t,e,n){var i=t.createTexture();return t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),r(t),i}function f(t,e,n,i){var o=t.createTexture();return t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,i,0,t.RGBA,t.UNSIGNED_BYTE,null),r(t),o}function p(t,e,n,i){var o=f(t,e,n,i),a=t.getParameter(t.FRAMEBUFFER_BINDING),s=t.createFramebuffer();return t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),r(t),{fbo:s,texture:o,oldFbo:a}}function d(t,e,n,i){var r=t,o=t+n,a=e,s=e+i;return[r,a,o,a,r,s,r,s,o,a,o,s]}function g(t){function e(t){return t.toFixed(20)}for(var n=x["#fsh-lanczos1d-optimized-tpl"],i=t.direction,r=t.texW/t.destW,o=t.texH/t.destH,a="horizontal"===i?r:o,s=3,u=w[s].filter,l=w[s].win,c="horizontal"===i,h=1/t.texW,f=1/t.texH,p=c?h:f,d=2*Math.ceil(l*a),g="float total = 0.0;\ngl_FragColor = vec4(0.0);\n",m=0;m<d+1;m++){var y=m-d/2,v=y/a,b=u(v),_=p*y,E=c?_:0,S=c?0:_;g+="addPoint(vec2("+e(E)+", "+e(S)+"), "+e(b)+", total);\n"}g+="gl_FragColor /= vec4(total);";var M=n.replace("__CODE__",g);return M}function m(t,e){var n=a(t,t.VERTEX_SHADER,x["#vsh-basic"]),i=a(t,t.FRAGMENT_SHADER,g(e));return s(t,n,i)}function y(t,e,n,i,o,a,s,h,f){var g={direction:a,texW:n,texH:i,destW:s,destH:h},y=m(t,g);t.useProgram(y),l(t,y,"u_image",e),c(t,y,"u_resolution",s,h),u(t,y,"a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1],{elementSize:2}),u(t,y,"a_position",f?d(0,h,s,-h):d(0,0,s,h),{elementSize:2}),t.viewport(0,0,s,h);var v=p(t,o,s,h);return t.viewport(0,0,s,h),t.drawArrays(t.TRIANGLES,0,6),t.bindFramebuffer(t.FRAMEBUFFER,v.oldFbo),r(t),v}function v(t,e,n){var i=t.naturalWidth||t.width,r=t.naturalHeight||t.height,o=e.canvas.width,a=e.canvas.height,s=0,u=1,l=2;h(e,s,t),y(e,s,i,r,u,"horizontal",o,r,!1);var c=y(e,u,o,r,l,"vertical",o,a,!0);e.flush();var f=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,f),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,c.texture,0);var p=e.checkFramebufferStatus(e.FRAMEBUFFER);if(p!==e.FRAMEBUFFER_COMPLETE)throw new Error("Bad framebuffer status: "+p);n.alpha||(e.clearColor(1,1,1,1),e.colorMask(!1,!1,!1,!0),e.clear(e.COLOR_BUFFER_BIT));var d=new Uint8Array(o*a*4);e.readPixels(0,0,o,a,e.RGBA,e.UNSIGNED_BYTE,d);var g="undefined"==typeof n.unsharpAmount?0:0|n.unsharpAmount,m="undefined"==typeof n.unsharpRadius?0:n.unsharpRadius,v="undefined"==typeof n.unsharpThreshold?0:0|n.unsharpThreshold;return g&&b(d,o,a,g,m,v),d}var b=t("./js/unsharp"),_=t("./js/generate_id"),x={};x["#vsh-basic"]="precision highp float;\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 clipSpace = a_position / u_resolution * 2.0 - 1.0;\n\n   gl_Position = vec4(clipSpace, 0, 1);\n   v_texCoord = a_texCoord;\n}\n",x["#fsh-lanczos1d-optimized-tpl"]="precision highp float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image;\n\n#define addPoint(offset, kv, total)   {vec2 pos = v_texCoord + offset; gl_FragColor += texture2D(u_image, pos) * kv; total += kv; }\n\nvoid main()\n{\n__CODE__\n}\n";var w=[{win:.5,filter:function(t){return t>=-.5&&t<.5?1:0}},{win:1,filter:function(t){if(t<=-1||t>=1)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*(.54+.46*Math.cos(e/1))}},{win:2,filter:function(t){if(t<=-2||t>=2)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/2)/(e/2)}},{win:3,filter:function(t){if(t<=-3||t>=3)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/3)/(e/3)}}];e.exports=function(t,e,n,r){var a,s;try{s=document.createElement("canvas"),s.id="pica-webgl-temporarry-canvas",s.height=e.height,s.width=e.width,document.body.appendChild(s),a=o(s);var u=v(t,a,n);a.finish(),document.body.removeChild(s);var l=e.getContext("2d"),c=l.createImageData(e.width,e.height);c.data.set(u),l.putImageData(c,0,0),r(null,u)}catch(t){i(t),a.finish(),document.body.removeChild(s),r(t)}return _()},e.exports.terminate=function(){}},{"./js/generate_id":2,"./js/unsharp":5}],11:[function(t,e,n){function i(t){t<.5&&(t=.5);var e=Math.exp(.527076)/t,n=Math.exp(-e),i=Math.exp(-2*e),r=(1-n)*(1-n)/(1+2*e*n-i);return a=r,s=r*(e-1)*n,u=r*(e+1)*n,l=-r*i,c=2*n,h=-i,f=(a+s)/(1-c-h),p=(u+l)/(1-c-h),new Float32Array([a,s,u,l,c,h,f,p])}function r(t,e,n,i,r,o){var a,s,u,l,c,h,f,p,d,g,m,y,v,b;for(d=0;d<o;d++){for(h=d*r,f=d,p=0,a=t[h],c=a*i[6],l=c,m=i[0],y=i[1],v=i[4],b=i[5],g=0;g<r;g++)s=t[h],u=s*m+a*y+l*v+c*b,c=l,l=u,a=s,n[p]=l,p++,h++;for(h--,p--,f+=o*(r-1),a=t[h],c=a*i[7],l=c,s=a,m=i[2],y=i[3],g=r-1;g>=0;g--)u=s*m+a*y+l*v+c*b,c=l,l=u,a=s,s=t[h],e[f]=n[p]+l,h--,p--,f-=o}}function o(t,e,n,o){if(o){var a=new Uint16Array(t.length),s=new Float32Array(Math.max(e,n)),u=i(o);r(t,a,s,u,e,n,o),r(a,t,s,u,n,e,o)}}var a,s,u,l,c,h,f,p;e.exports=o},{}],12:[function(t,e,n){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==i.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}var o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(t,e){for(var n,r,s=i(t),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var l in n)o.call(n,l)&&(s[l]=n[l]);if(Object.getOwnPropertySymbols){r=Object.getOwnPropertySymbols(n);for(var c=0;c<r.length;c++)a.call(n,r[c])&&(s[r[c]]=n[r[c]])}}return s}},{}],13:[function(t,e,n){var i=arguments[3],r=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t,e){function n(t){m[t]=!0;for(var e in r[t][1]){var i=r[t][1][e];m[i]||n(i)}}for(var s,u=Object.keys(o),l=0,c=u.length;l<c;l++){var h=u[l],f=o[h].exports;if(f===t||f&&f.default===t){s=h;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var p={},l=0,c=u.length;l<c;l++){var h=u[l];p[h]=h}r[s]=[Function(["require","module","exports"],"("+t+")(self)"),p]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[s]=s,r[d]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),g];var m={};n(d);var y="("+i+")({"+Object.keys(m).map(function(t){return a(t)+":["+r[t][0]+","+a(r[t][1])+"]"}).join(",")+"},{},["+a(d)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,b=new Blob([y],{type:"text/javascript"});if(e&&e.bare)return b;var _=v.createObjectURL(b),x=new Worker(_);return x.objectURL=_,x}},{}],"/":[function(t,e,n){"use strict";function i(t){return Object.prototype.toString.call(t)}function r(t){return"[object Function]"===i(t)}function o(t,e,i,a){if(r(i)&&(a=i,i={}),isNaN(i)||(i={quality:i,alpha:!1}),h||(n.WEBGL=!1),h&&n.WEBGL){n.debug("Resize canvas with WebGL");var s=d(t,e,i,function(r){r?(n.debug("WebGL resize failed, do fallback and cancel next attempts"),n.debug(r),h=!1,o(t,e,y({},i,{_id:s}),a)):a()});return s}return u||(n.WW=!1),u&&n.WW?(n.debug("Resize buffer in WebWorker"),p(t,e,i,a)):(n.debug("Resize buffer sync (freeze event loop)"),f(t,e,i,a))}function a(t,e){var n={src:t.src,dest:t.dest,width:0|t.width,height:0|t.height,toWidth:0|t.toWidth,toHeight:0|t.toHeight,quality:t.quality,alpha:t.alpha,unsharpAmount:t.unsharpAmount,unsharpRadius:t.unsharpRadius,unsharpThreshold:t.unsharpThreshold};n.dest=g(n),n.unsharpAmount&&m(n.dest,n.toWidth,n.toHeight,n.unsharpAmount,n.unsharpRadius,n.unsharpThreshold),e(null,n.dest)}function s(t){f.terminate(t),p.terminate(t),d.terminate(t)}var u="undefined"!=typeof window&&"Worker"in window;if(u)try{var l=t("webworkify")(function(){});l.terminate()}catch(t){u=!1}var c,h=!1;try{"undefined"!=typeof document&&"undefined"!=typeof window&&window.WebGLRenderingContext&&(c=document.createElement("canvas"),(c.getContext("webgl")||c.getContext("experimental-webgl"))&&(h=!0))}catch(t){}finally{c=null}var f=t("./lib/resize_js"),p=t("./lib/resize_js_ww"),d=t("./lib/resize_webgl"),g=t("./lib/js/resize_array"),m=t("./lib/js/unsharp"),y=t("object-assign");n.resizeCanvas=o,n.resizeBuffer=a,n.terminate=s,n.WW=u,n.WEBGL=!1,n.debug=function(){}},{"./lib/js/resize_array":4,"./lib/js/unsharp":5,"./lib/resize_js":8,"./lib/resize_js_ww":9,"./lib/resize_webgl":10,"object-assign":12,webworkify:13}]},{},[])("/")})},function(t,e,n){"use strict";var i=n(170),r=n(189)(i),o=n(731),a=n(196),s=n(201)("stores/hub-store"),u=n(205).checkClientError,l=n(732),c=n(733);t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{layer:null,image:null,imageInfo:null,geoJSON:null,submitted:!1,mhid:null}},reset:function(){this.setState(this.getInitialState())},storeDidUpdate:function(){s("store updated")},setImage:function(t,e,i){if(s("set image"),e&&e.exif&&e.exif.GPSLatitude){var r=e.exif.GPSLatitude,o=e.exif.GPSLatitudeRef,a=e.exif.GPSLongitude,u=e.exif.GPSLongitudeRef,h={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:l(r,o,a,u).reverse()}}]},f=n(699)(h);s(f),h.bbox=f;var p={};if(e.exif.Make&&(p.photo_make=e.exif.Make),e.exif.Model&&(p.photo_model=e.exif.Model),e.exif.GPSAltitude&&(p.photo_gps_altitude=e.exif.GPSAltitude),e.exif.GPSDestBearing&&(p.photo_gps_bearing=e.exif.GPSDestBearing),e.exif.GPSDateStamp&&e.exif.GPSTimeStamp){var d=e.exif.GPSDateStamp.split(":"),g=d[0],m=d[1],y=d[2],v=e.exif.GPSTimeStamp,b=v[0],_=v[1],x=v[2],w=c().year(g).month(m).date(y).hour(b).minute(_).second(x).format();p.photo_timestamp=w}h.features[0].properties=p,this.setState({image:t,imageInfo:e,geoJSON:h}),i(null)}else i("Photo Missing GPS Information")},submit:function(t,e,n){s("submit photo point");var i=this,r=this.state.geoJSON;Object.keys(t).map(function(e){var n=t[e];r.features[0].properties[e]=n}),a.post("/api/layer/addphotopoint").type("json").accept("json").send({layer_id:this.state.layer.layer_id,geoJSON:this.state.geoJSON,image:this.state.image,imageInfo:this.state.imageInfo,_csrf:e}).end(function(t,e){u(e,t,n,function(t){i.setState({mhid:e.body.mhid,image_id:e.body.image_id,image_url:e.body.image_url,submitted:!0}),i.trigger(i.state),t()})})}})},function(t,e,n){"use strict";var i=n(170),r=i.createActions({setImage:{},submit:{},resetPhoto:{}});t.exports=r},function(t,e,n){var i,r;!function(){var o=function(t,e,n,i){var r,o={N:1,E:1,S:-1,W:-1},a=[" ,"," ",","];if("string"==typeof t)for(r=0;r<a.length;r++)if(3===t.split(a[r]).length){t=t.split(a[r]);break}if("string"==typeof n)for(r=0;r<a.length;r++)if(3===n.split(a[r]).length){n=n.split(a[r]);break}for(r=0;r<t.length;r++)"string"==typeof t[r]&&(t[r]=t[r].split("/"),t[r]=parseInt(t[r][0],10)/parseInt(t[r][1],10));for(r=0;r<n.length;r++)"string"==typeof n[r]&&(n[r]=n[r].split("/"),n[r]=parseInt(n[r][0],10)/parseInt(n[r][1],10));return t=(t[0]+t[1]/60+t[2]/3600)*o[e],n=(n[0]+n[1]/60+n[2]/3600)*o[i],[t,n]};"object"==typeof t&&"object"==typeof t.exports?t.exports=o:(i=o,r="function"==typeof i?i.call(e,n,e,t):i,!(void 0!==r&&(t.exports=r)))}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},,function(t,e){}]);