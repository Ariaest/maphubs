webpackJsonp([20],{0:function(t,e,n){"use strict";var i=n(1),r=n(30),o=n(1119);n(165),n(556),document.addEventListener("DOMContentLoaded",function(){var t=window.__appData;r.render(i.createElement(o,t),document.querySelector("#app"))})},166:function(t,e,n){"use strict";var i=n(1),r=n(165),o=n(167),a=n(186)(o),s=n(191),l=n(192),u=n(203),c=n(226),h=n(228),d=i.createClass({displayName:"UserMenu",mixins:[a.connect(s),a.connect(c)],__:function(t){return h.getLocaleString(this.state.locale,t)},propTypes:{id:i.PropTypes.string},getDefaultProps:function(){return{id:"user-menu"}},componentDidMount:function(){l.getUser(function(){})},componentDidUpdate:function(t){this.state.loggedIn&&!t.loggedIn&&r(this.refs.userButton).dropdown({inDuration:300,outDuration:225,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!0,alignment:"right"})},loginClick:function(){window.location="/login?returnTo="+window.location},logoutClick:function(){window.location="/logout?returnTo="+window.location},render:function(){var t=i.createElement("div",null);if(this.state.loggedIn&&this.state.user){var e="";this.state.user.admin&&(e=i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/admin/invite"},this.__("Invite Users")))),t=i.createElement("li",null,i.createElement("div",{ref:"userButton",className:"chip user-dropdown-button omh-btn",style:{marginRight:"5px",marginLeft:"5px",backgroundColor:"#FFF"},"data-activates":this.props.id},i.createElement(u,{email:this.state.user.email}),this.state.user.display_name,i.createElement("i",{className:"material-icons right",style:{marginLeft:0,color:"#212121",height:"30px",lineHeight:"30px",width:"15px"}},"arrow_drop_down")),i.createElement("ul",{id:this.props.id,className:"dropdown-content",style:{top:"100px"}},i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/"+this.state.user.display_name+"/maps"},this.__("My Maps"))),i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/"+this.state.user.display_name+"/stories"},this.__("My Stories"))),i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/"+this.state.user.display_name+"/groups"},this.__("My Groups"))),i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/"+this.state.user.display_name+"/hubs"},this.__("My Hubs"))),i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/settings"},this.__("Settings"))),e,i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/logout"},this.__("Logout")))))}else t=i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{className:"nav-link-item",href:"#",onClick:this.loginClick},this.__("Login")));return t}});t.exports=d},191:function(t,e,n){"use strict";var i=n(167),r=n(186)(i),o=n(192),a=n(193),s=n(198)("stores/user-store"),l=n(202).checkClientError;t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{user:{},loggedIn:!1}},reset:function(){this.setState(this.getInitialState())},storeDidUpdate:function(){s("store updated")},login:function(t){this.setState({user:t,loggedIn:!0})},getUser:function(t){var e=this;a.post("/api/user/details/json").type("json").accept("json").end(function(n,i){l(i,n,t,function(t){n?t(n):i.body&&i.body.loggedIn?(e.login(i.body.user),t()):t(JSON.stringify(i.body))})})},logout:function(){this.setState(this.getInitialState()),this.trigger(this.state)},register:function(){},updatePassword:function(t,e,n,i,r){return this.state.loggedIn&&this.state.user.id!==t?(s("User ID mismatch, will not send request"),void r("User session error, please clear browser sessions/cache and try again.")):void(this.state.loggedIn||n?a.post("/api/user/updatepassword").type("json").accept("json").send({user_id:t,password:e,pass_reset:n,_csrf:i}).end(function(t,e){l(e,t,r,function(e){e(t)})}):(s("Pass reset key not found"),r("User session error, please clear browser sessions/cache and try again.")))},forgotPassword:function(t,e,n){a.post("/api/user/forgotpassword").type("json").accept("json").send({email:t,_csrf:e}).end(function(t,e){l(e,t,n,function(e){e(t)})})},signup:function(t,e,n,i,r,o,s,u){a.post("/api/user/signup").type("json").accept("json").send({username:t,name:e,email:n,password:i,joinmailinglist:r,inviteKey:o,_csrf:s}).end(function(t,e){l(e,t,u,function(e){e(t)})})},joinMailingList:function(t,e,n){a.post("/api/user/mailinglistsignup").type("json").accept("json").send({email:t,_csrf:e}).end(function(t,e){l(e,t,n,function(e){e(t)})})},resendConfirmation:function(t,e){a.post("/api/user/resendconfirmation").type("json").accept("json").send({_csrf:t}).end(function(t,n){l(n,t,e,function(e){e(t)})})},checkUserNameAvailable:function(t,e){}})},192:function(t,e,n){"use strict";var i=n(167),r=i.createActions({login:{},logout:{},register:{},getUser:{},updatePassword:{},forgotPassword:{},checkUserNameAvailable:{},signup:{},resendConfirmation:{},joinMailingList:{}});t.exports=r},198:function(t,e,n){"use strict";var i=n(199);t.exports=function(t){return i("maphubs:"+t)}},202:function(t,e,n){"use strict";var i=n(198)("clientError");t.exports={checkClientError:function(t,e,n,r){e&&t&&t.body&&t.body.error?(i(t.body.error),n(t.body.error)):e?(i(e.message),n(e.message)):t&&t.body&&void 0!==t.body.success&&0==t.body.success?t.body.error?(i(t.body.error),n(t.body.error)):(i("unknown error"),n("unknown error")):t.body.error?(i(t.body.error),n(t.body.error)):r(t.body.success?n:n)}}},203:function(t,e,n){"use strict";var i=n(1),r=n(204),o=i.createClass({displayName:"Gravatar",propTypes:{email:i.PropTypes.string,emailHash:i.PropTypes.string,size:i.PropTypes.number},getDefaultProps:function(){return{size:30}},render:function(){var t=null;t=this.props.emailHash?this.props.emailHash:r.createHash("md5").update(this.props.email.trim().toLowerCase()).digest("hex");var e="https://www.gravatar.com/avatar/"+t;return e+=this.props.size?"?s="+2*this.props.size+"&d=mm":"?d=mm",i.createElement("img",{className:"circle",height:this.props.size,width:this.props.size,style:{height:this.props.size+"px",width:this.props.size+"px",border:"1px solid #bbbbbb"},src:e,alt:"User Profile Photo"})}});t.exports=o},204:function(t,e,n){(function(t){function i(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function r(t,e){for(var n in t)e(t[n],n)}var o=n(209);e.createHash=n(211),e.createHmac=n(223),e.randomBytes=function(e,n){if(!n||!n.call)return new t(o(e));try{n.call(this,void 0,new t(o(e)))}catch(t){n(t)}},e.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var a=n(224)(e);e.pbkdf2=a.pbkdf2,e.pbkdf2Sync=a.pbkdf2Sync,r(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(t){e[t]=function(){i("sorry,",t,"is not implemented yet")}})}).call(e,n(205).Buffer)},205:function(t,e,n){(function(t,i){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function o(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,n){if(o()<n)throw new RangeError("Invalid typed array length");return t.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(n),e.__proto__=t.prototype):(null===e&&(e=new t(n)),e.length=n),e}function t(e,n,i){if(!(t.TYPED_ARRAY_SUPPORT||this instanceof t))return new t(e,n,i);if("number"==typeof e){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return s(this,e,n,i)}function s(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,n,i):"string"==typeof e?h(t,e,n):f(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,n,i){return l(e),e<=0?a(t,e):void 0!==n?"string"==typeof i?a(t,e).fill(n,i):a(t,e).fill(n):a(t,e)}function c(e,n){if(l(n),e=a(e,n<0?0:0|m(n)),!t.TYPED_ARRAY_SUPPORT)for(var i=0;i<n;++i)e[i]=0;return e}function h(e,n,i){if("string"==typeof i&&""!==i||(i="utf8"),!t.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(n,i);e=a(e,r);var o=e.write(n,i);return o!==r&&(e=e.slice(0,o)),e}function d(t,e){var n=e.length<0?0:0|m(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function p(e,n,i,r){if(n.byteLength,i<0||n.byteLength<i)throw new RangeError("'offset' is out of bounds");if(n.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return n=void 0===i&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,i):new Uint8Array(n,i,r),t.TYPED_ARRAY_SUPPORT?(e=n,e.__proto__=t.prototype):e=d(e,n),e}function f(e,n){if(t.isBuffer(n)){var i=0|m(n.length);return e=a(e,i),0===e.length?e:(n.copy(e,0,0,i),e)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||$(n.length)?a(e,0):d(e,n);if("Buffer"===n.type&&Q(n.data))return d(e,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function g(e){return+e!=e&&(e=0),t.alloc(+e)}function v(e,n){if(t.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return K(e).length;default:if(r)return q(e).length;n=(""+n).toLowerCase(),r=!0}}function b(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return F(this,e,n);case"base64":return D(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function y(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function w(e,n,i,r,o){if(0===e.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=o?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(o)return-1;i=e.length-1}else if(i<0){if(!o)return-1;i=0}if("string"==typeof n&&(n=t.from(n,r)),t.isBuffer(n))return 0===n.length?-1:E(e,n,i,r,o);if("number"==typeof n)return n&=255,t.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,n,i):Uint8Array.prototype.lastIndexOf.call(e,n,i):E(e,[n],i,r,o);throw new TypeError("val must be string, number or Buffer")}function E(t,e,n,i,r){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,l=e.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}var u;if(r){var c=-1;for(u=n;u<s;u++)if(o(t,u)===o(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===l)return c*a}else c!==-1&&(u-=u-c),c=-1}else for(n+l>s&&(n=s-l),u=n;u>=0;u--){for(var h=!0,d=0;d<l;d++)if(o(t,u+d)!==o(e,d)){h=!1;break}if(h)return u}return-1}function C(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function x(t,e,n,i){return G(q(e,t.length-n),t,n,i)}function _(t,e,n,i){return G(Y(e),t,n,i)}function T(t,e,n,i){return _(t,e,n,i)}function S(t,e,n,i){return G(K(e),t,n,i)}function A(t,e,n,i){return G(X(e,t.length-n),t,n,i)}function D(t,e,n){return 0===e&&n===t.length?J.fromByteArray(t):J.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o=t[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r+s<=n){var l,u,c,h;switch(s){case 1:o<128&&(a=o);break;case 2:l=t[r+1],128===(192&l)&&(h=(31&o)<<6|63&l,h>127&&(a=h));break;case 3:l=t[r+1],u=t[r+2],128===(192&l)&&128===(192&u)&&(h=(15&o)<<12|(63&l)<<6|63&u,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:l=t[r+1],u=t[r+2],c=t[r+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(h=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c,h>65535&&h<1114112&&(a=h))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),r+=s}return N(i)}function N(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=tt));return n}function P(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function F(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function R(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=V(t[o]);return r}function M(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function L(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,n,i,r,o,a){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<a)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}function B(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function O(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function j(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,i,r){return r||j(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(t,e,n,i,23,4),n+4}function H(t,e,n,i,r){return r||j(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(t,e,n,i,52,8),n+8}function z(t){if(t=W(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function W(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function q(t,e){e=e||1/0;for(var n,i=t.length,r=null,o=[],a=0;a<i;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function X(t,e){for(var n,i,r,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function K(t){return J.toByteArray(z(t))}function G(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function $(t){return t!==t}var J=n(206),Z=n(207),Q=n(208);e.Buffer=t,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50,t.TYPED_ARRAY_SUPPORT=void 0!==i.TYPED_ARRAY_SUPPORT?i.TYPED_ARRAY_SUPPORT:r(),e.kMaxLength=o(),t.poolSize=8192,t._augment=function(e){return e.__proto__=t.prototype,e},t.from=function(t,e,n){return s(null,t,e,n)},t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0})),t.alloc=function(t,e,n){return u(null,t,e,n)},t.allocUnsafe=function(t){return c(null,t)},t.allocUnsafeSlow=function(t){return c(null,t)},t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var i=e.length,r=n.length,o=0,a=Math.min(i,r);o<a;++o)if(e[o]!==n[o]){i=e[o],r=n[o];break}return i<r?-1:r<i?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var i;if(void 0===n)for(n=0,i=0;i<e.length;++i)n+=e[i].length;var r=t.allocUnsafe(n),o=0;for(i=0;i<e.length;++i){var a=e[i];if(!t.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},t.byteLength=v,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},t.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},t.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):b.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e,n,i,r,o){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),n<0||i>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&n>=i)return 0;if(r>=o)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var a=o-r,s=i-n,l=Math.min(a,s),u=this.slice(r,o),c=e.slice(n,i),h=0;h<l;++h)if(u[h]!==c[h]){a=u[h],s=c[h];break}return a<s?-1:s<a?1:0},t.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},t.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},t.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},t.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return C(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;t.prototype.slice=function(e,n){var i=this.length;e=~~e,n=void 0===n?i:~~n,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),n<0?(n+=i,n<0&&(n=0)):n>i&&(n=i),n<e&&(n=e);var r;if(t.TYPED_ARRAY_SUPPORT)r=this.subarray(e,n),r.__proto__=t.prototype;else{var o=n-e;r=new t(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+e]}return r},t.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},t.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},t.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},t.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},t.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),Z.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),Z.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),Z.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),Z.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;I(this,t,e,n,r,0)}var o=1,a=0;for(this[e]=255&t;++a<n&&(o*=256);)this[e+a]=t/o&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;I(this,t,e,n,r,0)}var o=n-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+n},t.prototype.writeUInt8=function(e,n,i){return e=+e,n|=0,i||I(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,i){return e=+e,n|=0,i||I(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):B(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,i){return e=+e,n|=0,i||I(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):B(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,i){return e=+e,n|=0,i||I(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):O(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,i){return e=+e,n|=0,i||I(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):O(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},t.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},t.prototype.writeInt8=function(e,n,i){return e=+e,n|=0,i||I(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,i){return e=+e,n|=0,i||I(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):B(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,i){return e=+e,n|=0,i||I(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):B(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,i){return e=+e,n|=0,i||I(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):O(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,i){return e=+e,n|=0,i||I(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):O(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return H(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return H(this,t,e,!1,n)},t.prototype.copy=function(e,n,i,r){if(i||(i=0),r||0===r||(r=this.length),n>=e.length&&(n=e.length),n||(n=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-n<r-i&&(r=e.length-n+i);var o,a=r-i;if(this===e&&i<n&&n<r)for(o=a-1;o>=0;--o)e[o+n]=this[o+i];else if(a<1e3||!t.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+n]=this[o+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+a),n);return a},t.prototype.fill=function(e,n,i,r){if("string"==typeof e){if("string"==typeof n?(r=n,n=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!t.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;n>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0);var a;if("number"==typeof e)for(a=n;a<i;++a)this[a]=e;else{var s=t.isBuffer(e)?e:q(new t(e,r).toString()),l=s.length;for(a=0;a<i-n;++a)this[a+n]=s[a%l]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,n(205).Buffer,function(){return this}())},206:function(t,e){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return 3*t.length/4-n(t)}function r(t){var e,i,r,o,a,s,l=t.length;a=n(t),s=new c(3*l/4-a),r=a>0?l-4:l;var h=0;for(e=0,i=0;e<r;e+=4,i+=3)o=u[t.charCodeAt(e)]<<18|u[t.charCodeAt(e+1)]<<12|u[t.charCodeAt(e+2)]<<6|u[t.charCodeAt(e+3)],s[h++]=o>>16&255,s[h++]=o>>8&255,s[h++]=255&o;return 2===a?(o=u[t.charCodeAt(e)]<<2|u[t.charCodeAt(e+1)]>>4,s[h++]=255&o):1===a&&(o=u[t.charCodeAt(e)]<<10|u[t.charCodeAt(e+1)]<<4|u[t.charCodeAt(e+2)]>>2,s[h++]=o>>8&255,s[h++]=255&o),s}function o(t){return l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}function a(t,e,n){for(var i,r=[],a=e;a<n;a+=3)i=(t[a]<<16)+(t[a+1]<<8)+t[a+2],r.push(o(i));return r.join("")}function s(t){for(var e,n=t.length,i=n%3,r="",o=[],s=16383,u=0,c=n-i;u<c;u+=s)o.push(a(t,u,u+s>c?c:u+s));return 1===i?(e=t[n-1],r+=l[e>>2],r+=l[e<<4&63],r+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],r+=l[e>>10],r+=l[e>>4&63],r+=l[e<<2&63],r+="="),o.push(r),o.join("")}e.byteLength=i,e.toByteArray=r,e.fromByteArray=s;for(var l=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=h.length;d<p;++d)l[d]=h[d],u[h.charCodeAt(d)]=d;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},207:function(t,e){e.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?r-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+t[e+h],h+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,i),o-=u}return(p?-1:1)*a*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var a,s,l,u=8*o-r-1,c=(1<<u)-1,h=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),e+=a+h>=1?d/l:d*Math.pow(2,1-h),e*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,u+=r;u>0;t[n+p]=255&a,p+=f,a/=256,u-=8);t[n+p-f]|=128*m}},208:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},209:function(t,e,n){(function(e,i){!function(){var r=("undefined"==typeof window?e:window)||{};_crypto=r.crypto||r.msCrypto||n(210),t.exports=function(t){if(_crypto.getRandomValues){var e=new i(t);return _crypto.getRandomValues(e),e}if(_crypto.randomBytes)return _crypto.randomBytes(t);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(e,function(){return this}(),n(205).Buffer)},210:function(t,e){},211:function(t,e,n){(function(e){function i(t){return function(){var n=[],i={update:function(t,i){return e.isBuffer(t)||(t=new e(t,i)),n.push(t),this},digest:function(i){var r=e.concat(n),o=t(r);return n=null,i?o.toString(i):o}};return i}}var r=n(212),o=i(n(220)),a=i(n(222));t.exports=function(t){return"md5"===t?new o:"rmd160"===t?new a:r(t)}}).call(e,n(205).Buffer)},212:function(t,e,n){var e=t.exports=function(t){var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n},i=n(205).Buffer,r=n(213)(i);e.sha1=n(214)(i,r),e.sha256=n(218)(i,r),e.sha512=n(219)(i,r)},213:function(t,e){t.exports=function(t){function e(e,n){this._block=new t(e),this._finalSize=n,this._blockSize=e,this._len=0,this._s=0}return e.prototype.init=function(){this._s=0,this._len=0},e.prototype.update=function(e,n){"string"==typeof e&&(n=n||"utf8",e=new t(e,n));for(var i=this._len+=e.length,r=this._s=this._s||0,o=0,a=this._block;r<i;){for(var s=Math.min(e.length,o+this._blockSize-r%this._blockSize),l=s-o,u=0;u<l;u++)a[r%this._blockSize+u]=e[u+o];r+=l,o+=l,r%this._blockSize===0&&this._update(a)}return this._s=r,this},e.prototype.digest=function(t){var e=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),e%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(e,this._blockSize-4);var n=this._update(this._block)||this._hash();return t?n.toString(t):n},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e}},214:function(t,e,n){var i=n(215).inherits;t.exports=function(t,e){function n(){return f.length?f.pop().init():this instanceof n?(this._w=p,e.call(this,64,56),this._h=null,void this.init()):new n}function r(t,e,n,i){return t<20?e&n|~e&i:t<40?e^n^i:t<60?e&n|e&i|n&i:e^n^i}function o(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function a(t,e){return t+e|0}function s(t,e){return t<<e|t>>>32-e}var l=0,u=4,c=8,h=12,d=16,p=new("undefined"==typeof Int32Array?Array:Int32Array)(80),f=[];return i(n,e),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,e.prototype.init.call(this),this},n.prototype._POOL=f,n.prototype._update=function(t){var e,n,i,l,u,c,h,d,p,f;e=c=this._a,n=h=this._b,i=d=this._c,l=p=this._d,u=f=this._e;for(var m=this._w,g=0;g<80;g++){var v=m[g]=g<16?t.readInt32BE(4*g):s(m[g-3]^m[g-8]^m[g-14]^m[g-16],1),b=a(a(s(e,5),r(g,n,i,l)),a(a(u,v),o(g)));u=l,l=i,i=s(n,30),n=e,e=b}this._a=a(e,c),this._b=a(n,h),this._c=a(i,d),this._d=a(l,p),this._e=a(u,f)},n.prototype._hash=function(){f.length<100&&f.push(this);var e=new t(20);return e.writeInt32BE(0|this._a,l),e.writeInt32BE(0|this._b,u),e.writeInt32BE(0|this._c,c),e.writeInt32BE(0|this._d,h),e.writeInt32BE(0|this._e,d),e},n}},215:function(t,e,n){(function(t,i){function r(t,n){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(n)?i.showHidden=n:n&&e._extend(i,n),E(i.showHidden)&&(i.showHidden=!1),E(i.depth)&&(i.depth=2),E(i.colors)&&(i.colors=!1),E(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),l(i,t,i.depth)}function o(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function l(t,n,i){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return y(r)||(r=l(t,r,i)),r}var o=u(t,n);if(o)return o;var a=Object.keys(n),m=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),T(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(n);if(0===a.length){if(S(n)){var g=n.name?": "+n.name:"";return t.stylize("[Function"+g+"]","special")}if(C(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return t.stylize(Date.prototype.toString.call(n),"date");if(T(n))return c(n)}var v="",b=!1,w=["{","}"];if(f(n)&&(b=!0,w=["[","]"]),S(n)){var E=n.name?": "+n.name:"";v=" [Function"+E+"]"}if(C(n)&&(v=" "+RegExp.prototype.toString.call(n)),_(n)&&(v=" "+Date.prototype.toUTCString.call(n)),T(n)&&(v=" "+c(n)),0===a.length&&(!b||0==n.length))return w[0]+v+w[1];if(i<0)return C(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var x;return x=b?h(t,n,i,m,a):a.map(function(e){return d(t,n,i,m,e,b)}),t.seen.pop(),p(x,v,w)}function u(t,e){if(E(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return b(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,i,r){for(var o=[],a=0,s=e.length;a<s;++a)P(e,String(a))?o.push(d(t,e,n,i,String(a),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(d(t,e,n,i,r,!0))}),o}function d(t,e,n,i,r,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},u.get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),P(i,r)||(a="["+r+"]"),s||(t.seen.indexOf(u.value)<0?(s=g(n)?l(t,u.value,null):l(t,u.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),E(a)){if(o&&r.match(/^\d+$/))return s;a=JSON.stringify(""+r),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,n){var i=0,r=t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function f(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function g(t){return null===t}function v(t){return null==t}function b(t){return"number"==typeof t}function y(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function E(t){return void 0===t}function C(t){return x(t)&&"[object RegExp]"===D(t)}function x(t){return"object"==typeof t&&null!==t}function _(t){return x(t)&&"[object Date]"===D(t)}function T(t){return x(t)&&("[object Error]"===D(t)||t instanceof Error)}function S(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function D(t){return Object.prototype.toString.call(t)}function k(t){return t<10?"0"+t.toString(10):t.toString(10)}function N(){var t=new Date,e=[k(t.getHours()),k(t.getMinutes()),k(t.getSeconds())].join(":");return[t.getDate(),L[t.getMonth()],e].join(" ")}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var F=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(t).replace(F,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),s=i[n];n<o;s=i[++n])a+=g(s)||!x(s)?" "+s:" "+r(s);return a},e.deprecate=function(n,r){function o(){if(!a){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),a=!0}return n.apply(this,arguments)}if(E(t.process))return function(){return e.deprecate(n,r).apply(this,arguments)};if(i.noDeprecation===!0)return n;var a=!1;return o};var R,M={};e.debuglog=function(t){if(E(R)&&(R={APP_ENV:"browser",NODE_ENV:"production"}.NODE_DEBUG||""),t=t.toUpperCase(),!M[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var n=i.pid;M[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else M[t]=function(){};return M[t]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=m,e.isNull=g,e.isNullOrUndefined=v,e.isNumber=b,e.isString=y,e.isSymbol=w,e.isUndefined=E,e.isRegExp=C,e.isObject=x,e.isDate=_,e.isError=T,e.isFunction=S,e.isPrimitive=A,e.isBuffer=n(216);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",N(),e.format.apply(e,arguments))},e.inherits=n(217),e._extend=function(t,e){if(!e||!x(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(e,function(){return this}(),n(111))},216:function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},217:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){
t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},218:function(t,e,n){var i=n(215).inherits;t.exports=function(t,e){function n(){this.init(),this._w=p,e.call(this,64,56)}function r(t,e){return t>>>e|t<<32-e}function o(t,e){return t>>>e}function a(t,e,n){return t&e^~t&n}function s(t,e,n){return t&e^t&n^e&n}function l(t){return r(t,2)^r(t,13)^r(t,22)}function u(t){return r(t,6)^r(t,11)^r(t,25)}function c(t){return r(t,7)^r(t,18)^o(t,3)}function h(t){return r(t,17)^r(t,19)^o(t,10)}var d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);return i(n,e),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},n.prototype._update=function(t){var e,n,i,r,o,p,f,m,g,v,b=this._w;e=0|this._a,n=0|this._b,i=0|this._c,r=0|this._d,o=0|this._e,p=0|this._f,f=0|this._g,m=0|this._h;for(var y=0;y<64;y++){var w=b[y]=y<16?t.readInt32BE(4*y):h(b[y-2])+b[y-7]+c(b[y-15])+b[y-16];g=m+u(o)+a(o,p,f)+d[y]+w,v=l(e)+s(e,n,i),m=f,f=p,p=o,o=r+g,r=i,i=n,n=e,e=g+v}this._a=e+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=r+this._d|0,this._e=o+this._e|0,this._f=p+this._f|0,this._g=f+this._g|0,this._h=m+this._h|0},n.prototype._hash=function(){var e=new t(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},n}},219:function(t,e,n){var i=n(215).inherits;t.exports=function(t,e){function n(){this.init(),this._w=l,e.call(this,128,112)}function r(t,e,n){return t>>>n|e<<32-n}function o(t,e,n){return t&e^~t&n}function a(t,e,n){return t&e^t&n^e&n}var s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],l=new Array(160);return i(n,e),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},n.prototype._update=function(t){var e,n,i,l,u,c,h,d,p,f,m,g,v,b,y,w,E=this._w;e=0|this._a,n=0|this._b,i=0|this._c,l=0|this._d,u=0|this._e,c=0|this._f,h=0|this._g,d=0|this._h,p=0|this._al,f=0|this._bl,m=0|this._cl,g=0|this._dl,v=0|this._el,b=0|this._fl,y=0|this._gl,w=0|this._hl;for(var C=0;C<80;C++){var x,_,T=2*C;if(C<16)x=E[T]=t.readInt32BE(4*T),_=E[T+1]=t.readInt32BE(4*T+4);else{var S=E[T-30],A=E[T-30+1],D=r(S,A,1)^r(S,A,8)^S>>>7,k=r(A,S,1)^r(A,S,8)^r(A,S,7);S=E[T-4],A=E[T-4+1];var N=r(S,A,19)^r(A,S,29)^S>>>6,P=r(A,S,19)^r(S,A,29)^r(A,S,6),F=E[T-14],R=E[T-14+1],M=E[T-32],L=E[T-32+1];_=k+R,x=D+F+(_>>>0<k>>>0?1:0),_+=P,x=x+N+(_>>>0<P>>>0?1:0),_+=L,x=x+M+(_>>>0<L>>>0?1:0),E[T]=x,E[T+1]=_}var I=a(e,n,i),B=a(p,f,m),O=r(e,p,28)^r(p,e,2)^r(p,e,7),j=r(p,e,28)^r(e,p,2)^r(e,p,7),U=r(u,v,14)^r(u,v,18)^r(v,u,9),H=r(v,u,14)^r(v,u,18)^r(u,v,9),z=s[T],W=s[T+1],V=o(u,c,h),q=o(v,b,y),Y=w+H,X=d+U+(Y>>>0<w>>>0?1:0);Y+=q,X=X+V+(Y>>>0<q>>>0?1:0),Y+=W,X=X+z+(Y>>>0<W>>>0?1:0),Y+=_,X=X+x+(Y>>>0<_>>>0?1:0);var K=j+B,G=O+I+(K>>>0<j>>>0?1:0);d=h,w=y,h=c,y=b,c=u,b=v,v=g+Y|0,u=l+X+(v>>>0<g>>>0?1:0)|0,l=i,g=m,i=n,m=f,n=e,f=p,p=Y+K|0,e=X+G+(p>>>0<Y>>>0?1:0)|0}this._al=this._al+p|0,this._bl=this._bl+f|0,this._cl=this._cl+m|0,this._dl=this._dl+g|0,this._el=this._el+v|0,this._fl=this._fl+b|0,this._gl=this._gl+y|0,this._hl=this._hl+w|0,this._a=this._a+e+(this._al>>>0<p>>>0?1:0)|0,this._b=this._b+n+(this._bl>>>0<f>>>0?1:0)|0,this._c=this._c+i+(this._cl>>>0<m>>>0?1:0)|0,this._d=this._d+l+(this._dl>>>0<g>>>0?1:0)|0,this._e=this._e+u+(this._el>>>0<v>>>0?1:0)|0,this._f=this._f+c+(this._fl>>>0<b>>>0?1:0)|0,this._g=this._g+h+(this._gl>>>0<y>>>0?1:0)|0,this._h=this._h+d+(this._hl>>>0<w>>>0?1:0)|0},n.prototype._hash=function(){function e(t,e,i){n.writeInt32BE(t,i),n.writeInt32BE(e,i+4)}var n=new t(64);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),e(this._g,this._gl,48),e(this._h,this._hl,56),n},n}},220:function(t,e,n){function i(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,i=-271733879,r=-1732584194,c=271733878,h=0;h<t.length;h+=16){var d=n,p=i,f=r,m=c;n=o(n,i,r,c,t[h+0],7,-680876936),c=o(c,n,i,r,t[h+1],12,-389564586),r=o(r,c,n,i,t[h+2],17,606105819),i=o(i,r,c,n,t[h+3],22,-1044525330),n=o(n,i,r,c,t[h+4],7,-176418897),c=o(c,n,i,r,t[h+5],12,1200080426),r=o(r,c,n,i,t[h+6],17,-1473231341),i=o(i,r,c,n,t[h+7],22,-45705983),n=o(n,i,r,c,t[h+8],7,1770035416),c=o(c,n,i,r,t[h+9],12,-1958414417),r=o(r,c,n,i,t[h+10],17,-42063),i=o(i,r,c,n,t[h+11],22,-1990404162),n=o(n,i,r,c,t[h+12],7,1804603682),c=o(c,n,i,r,t[h+13],12,-40341101),r=o(r,c,n,i,t[h+14],17,-1502002290),i=o(i,r,c,n,t[h+15],22,1236535329),n=a(n,i,r,c,t[h+1],5,-165796510),c=a(c,n,i,r,t[h+6],9,-1069501632),r=a(r,c,n,i,t[h+11],14,643717713),i=a(i,r,c,n,t[h+0],20,-373897302),n=a(n,i,r,c,t[h+5],5,-701558691),c=a(c,n,i,r,t[h+10],9,38016083),r=a(r,c,n,i,t[h+15],14,-660478335),i=a(i,r,c,n,t[h+4],20,-405537848),n=a(n,i,r,c,t[h+9],5,568446438),c=a(c,n,i,r,t[h+14],9,-1019803690),r=a(r,c,n,i,t[h+3],14,-187363961),i=a(i,r,c,n,t[h+8],20,1163531501),n=a(n,i,r,c,t[h+13],5,-1444681467),c=a(c,n,i,r,t[h+2],9,-51403784),r=a(r,c,n,i,t[h+7],14,1735328473),i=a(i,r,c,n,t[h+12],20,-1926607734),n=s(n,i,r,c,t[h+5],4,-378558),c=s(c,n,i,r,t[h+8],11,-2022574463),r=s(r,c,n,i,t[h+11],16,1839030562),i=s(i,r,c,n,t[h+14],23,-35309556),n=s(n,i,r,c,t[h+1],4,-1530992060),c=s(c,n,i,r,t[h+4],11,1272893353),r=s(r,c,n,i,t[h+7],16,-155497632),i=s(i,r,c,n,t[h+10],23,-1094730640),n=s(n,i,r,c,t[h+13],4,681279174),c=s(c,n,i,r,t[h+0],11,-358537222),r=s(r,c,n,i,t[h+3],16,-722521979),i=s(i,r,c,n,t[h+6],23,76029189),n=s(n,i,r,c,t[h+9],4,-640364487),c=s(c,n,i,r,t[h+12],11,-421815835),r=s(r,c,n,i,t[h+15],16,530742520),i=s(i,r,c,n,t[h+2],23,-995338651),n=l(n,i,r,c,t[h+0],6,-198630844),c=l(c,n,i,r,t[h+7],10,1126891415),r=l(r,c,n,i,t[h+14],15,-1416354905),i=l(i,r,c,n,t[h+5],21,-57434055),n=l(n,i,r,c,t[h+12],6,1700485571),c=l(c,n,i,r,t[h+3],10,-1894986606),r=l(r,c,n,i,t[h+10],15,-1051523),i=l(i,r,c,n,t[h+1],21,-2054922799),n=l(n,i,r,c,t[h+8],6,1873313359),c=l(c,n,i,r,t[h+15],10,-30611744),r=l(r,c,n,i,t[h+6],15,-1560198380),i=l(i,r,c,n,t[h+13],21,1309151649),n=l(n,i,r,c,t[h+4],6,-145523070),c=l(c,n,i,r,t[h+11],10,-1120210379),r=l(r,c,n,i,t[h+2],15,718787259),i=l(i,r,c,n,t[h+9],21,-343485551),n=u(n,d),i=u(i,p),r=u(r,f),c=u(c,m)}return Array(n,i,r,c)}function r(t,e,n,i,r,o){return u(c(u(u(e,t),u(i,o)),r),n)}function o(t,e,n,i,o,a,s){return r(e&n|~e&i,t,e,o,a,s)}function a(t,e,n,i,o,a,s){return r(e&i|n&~i,t,e,o,a,s)}function s(t,e,n,i,o,a,s){return r(e^n^i,t,e,o,a,s)}function l(t,e,n,i,o,a,s){return r(n^(e|~i),t,e,o,a,s)}function u(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n}function c(t,e){return t<<e|t>>>32-e}var h=n(221);t.exports=function(t){return h.hash(t,i,16)}},221:function(t,e,n){(function(e){function n(t,n){if(t.length%o!==0){var i=t.length+(o-t.length%o);t=e.concat([t,a],i)}for(var r=[],s=n?t.readInt32BE:t.readInt32LE,l=0;l<t.length;l+=o)r.push(s.call(t,l));return r}function i(t,n,i){for(var r=new e(n),o=i?r.writeInt32BE:r.writeInt32LE,a=0;a<t.length;a++)o.call(r,t[a],4*a,!0);return r}function r(t,r,o,a){e.isBuffer(t)||(t=new e(t));var l=r(n(t,a),t.length*s);return i(l,o,a)}var o=4,a=new e(o);a.fill(0);var s=8;t.exports={hash:r}}).call(e,n(205).Buffer)},222:function(t,e,n){(function(e){function n(t,e,n){return t^e^n}function i(t,e,n){return t&e|~t&n}function r(t,e,n){return(t|~e)^n}function o(t,e,n){return t&n|e&~n}function a(t,e,n){return t^(e|~n)}function s(t,e){return t<<e|t>>>32-e}function l(t){var n=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var i=m(t),r=8*t.length,o=8*t.length;i[r>>>5]|=128<<24-r%32,i[(r+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var a=0;a<i.length;a+=16)v(n,i,a);for(var a=0;a<5;a++){var s=n[a];n[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var l=g(n);return new e(l)}t.exports=l;/** @preserve
	(c) 2012 by Cédric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
var u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0],m=function(t){for(var e=[],n=0,i=0;n<t.length;n++,i+=8)e[i>>>5]|=t[n]<<24-i%32;return e},g=function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},v=function(t,e,l){for(var m=0;m<16;m++){var g=l+m,v=e[g];e[g]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8)}var b,y,w,E,C,x,_,T,S,A;x=b=t[0],_=y=t[1],T=w=t[2],S=E=t[3],A=C=t[4];for(var D,m=0;m<80;m+=1)D=b+e[l+u[m]]|0,D+=m<16?n(y,w,E)+p[0]:m<32?i(y,w,E)+p[1]:m<48?r(y,w,E)+p[2]:m<64?o(y,w,E)+p[3]:a(y,w,E)+p[4],D|=0,D=s(D,h[m]),D=D+C|0,b=C,C=E,E=s(w,10),w=y,y=D,D=x+e[l+c[m]]|0,D+=m<16?a(_,T,S)+f[0]:m<32?o(_,T,S)+f[1]:m<48?r(_,T,S)+f[2]:m<64?i(_,T,S)+f[3]:n(_,T,S)+f[4],D|=0,D=s(D,d[m]),D=D+A|0,x=A,A=S,S=s(T,10),T=_,_=D;D=t[1]+w+S|0,t[1]=t[2]+E+A|0,t[2]=t[3]+C+x|0,t[3]=t[4]+b+_|0,t[4]=t[0]+y+T|0,t[0]=D}}).call(e,n(205).Buffer)},223:function(t,e,n){(function(e){function i(t,n){if(!(this instanceof i))return new i(t,n);this._opad=l,this._alg=t;var a="sha512"===t?128:64;n=this._key=e.isBuffer(n)?n:new e(n),n.length>a?n=r(t).update(n).digest():n.length<a&&(n=e.concat([n,o],a));for(var s=this._ipad=new e(a),l=this._opad=new e(a),u=0;u<a;u++)s[u]=54^n[u],l[u]=92^n[u];this._hash=r(t).update(s)}var r=n(211),o=new e(128);o.fill(0),t.exports=i,i.prototype.update=function(t,e){return this._hash.update(t,e),this},i.prototype.digest=function(t){var e=this._hash.digest();return r(this._alg).update(this._opad).update(e).digest(t)}}).call(e,n(205).Buffer)},224:function(t,e,n){var i=n(225);t.exports=function(t,e){e=e||{};var n=i(t);return e.pbkdf2=n.pbkdf2,e.pbkdf2Sync=n.pbkdf2Sync,e}},225:function(t,e,n){(function(e){t.exports=function(t){function n(t,e,n,r,o,a){if("function"==typeof o&&(a=o,o=void 0),"function"!=typeof a)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var s;try{s=i(t,e,n,r,o)}catch(t){return a(t)}a(void 0,s)})}function i(n,i,r,o,a){if("number"!=typeof r)throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(o<0)throw new TypeError("Bad key length");a=a||"sha1",e.isBuffer(n)||(n=new e(n)),e.isBuffer(i)||(i=new e(i));var s,l,u,c=1,h=new e(o),d=new e(i.length+4);i.copy(d,0,0,i.length);for(var p=1;p<=c;p++){d.writeUInt32BE(p,i.length);var f=t.createHmac(a,n).update(d).digest();if(!s&&(s=f.length,u=new e(s),c=Math.ceil(o/s),l=o-(c-1)*s,o>(Math.pow(2,32)-1)*s))throw new TypeError("keylen exceeds maximum length");f.copy(u,0,0,s);for(var m=1;m<r;m++){f=t.createHmac(a,n).update(f).digest();for(var g=0;g<s;g++)u[g]^=f[g]}var v=(p-1)*s,b=p==c?l:s;u.copy(h,v,0,b)}return h}return{pbkdf2:n,pbkdf2Sync:i}}}).call(e,n(205).Buffer)},226:function(t,e,n){"use strict";var i=n(167),r=n(186)(i),o=n(227),a=n(193),s=n(198)("stores/local-store"),l=n(202).checkClientError;t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{locale:"en",_csrf:null}},reset:function(){this.setState(this.getInitialState())},storeDidUpdate:function(){s("store updated")},changeLocale:function(t){var e=this;a.post("/api/user/setlocale").type("json").accept("json").send({locale:t}).end(function(n,i){l(i,n,function(n){n?s(n):(s("changed locale to: "+t),e.setState({locale:t}),e.trigger(e.state))},function(t){t()})})}})},227:function(t,e,n){"use strict";var i=n(167),r=i.createActions({changeLocale:{}});t.exports=r},234:function(t,e,n){"use strict";var i=n(235),r=n(1),o=n(167),a=n(186)(o),s=n(240),l=n(241),u=r.createClass({displayName:"MapHubsNotification",mixins:[a.connect(s)],onDismiss:function(){l.dismissNotification()},render:function(){var t={};switch(this.state.position){case"topright":t={top:"60px",right:"20px",bottom:void 0,left:void 0};break;case"bottomright":t={top:void 0,right:"20px",bottom:"60px",left:void 0};break;case"topleft":t={top:"60px",right:void 0,bottom:void 0,left:"20px"};break;case"bottomleft":t={top:void 0,right:void 0,bottom:"60px",left:"20px"}}return r.createElement(i.Notification,{id:"omh-notification",isActive:this.state.isActive,message:this.state.message,action:this.state.action,onClick:this.state.onClick,dismissAfter:this.state.dismissAfter,onDismiss:this.onDismiss,barStyle:{background:this.state.backgroundColor},activeBarStyle:t,actionStyle:{color:this.state.color}})}});t.exports=u},240:function(t,e,n){"use strict";var i=n(167),r=n(186)(i),o=n(241),a=n(198)("stores/notification-store"),s=n(165);t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{isActive:!1,message:"",action:null,onClick:function(){},backgroundColor:MAPHUBS_CONFIG.primaryColor,color:"white",position:"topright",dismissAfter:3e3,onDismiss:function(){}}},reset:function(){this.setState(this.getInitialState()),this.trigger(this.state)},storeDidUpdate:function(){a("store updated")},showNotification:function(t){if(t){var e=s.extend(this.getInitialState(),t);this.setState(e),this.setState({isActive:!0})}},dismissNotification:function(){this.state.onDismiss(),this.reset()}})},241:function(t,e,n){"use strict";var i=n(167),r=i.createActions({showNotification:{},dismissNotification:{}});t.exports=r},242:function(t,e,n){"use strict";var i=n(243),r=n(1),o=n(167),a=n(186)(o),s=n(245),l=n(246),u=n(226),c=n(228),h=r.createClass({displayName:"Message",mixins:[a.connect(s),a.connect(u)],__:function(t){return c.getLocaleString(this.state.locale,t)},onDismiss:function(){l.dismissMessage()},render:function(){return r.createElement(i.Modal,{id:"message-modal",show:this.state.show,fixedFooter:!1},r.createElement(i.ModalContent,null,r.createElement("h4",null,this.state.title),r.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.message.toString()}})),r.createElement(i.ModalFooter,null,r.createElement("a",{href:"#!",className:" modal-action modal-close waves-effect waves-light btn-flat",onClick:this.onDismiss},this.__("Okay"))))}});t.exports=h},243:function(t,e,n){"use strict";var i=n(1),r=n(165),o=n(244),a=i.createClass({displayName:"ModalContent",propTypes:{className:i.PropTypes.string,style:i.PropTypes.object},getDefaultProps:function(){return{style:{},insideAnotherModal:!1}},render:function(){var t=o("modal-content",this.props.className);return i.createElement("div",{className:t,style:this.props.style},this.props.children)}}),s=i.createClass({displayName:"ModalFooter",propTypes:{className:i.PropTypes.string},render:function(){var t=o("modal-footer",this.props.className);return i.createElement("div",{className:t},this.props.children)}}),l=i.createClass({displayName:"Modal",propTypes:{id:i.PropTypes.string,show:i.PropTypes.bool.isRequired,className:i.PropTypes.string,fixedFooter:i.PropTypes.bool,dismissible:i.PropTypes.bool,in_duration:i.PropTypes.number,out_duration:i.PropTypes.number,ready:i.PropTypes.func,complete:i.PropTypes.func,insideAnotherModal:i.PropTypes.bool},getDefaultProps:function(){return{id:"modal",show:!1,fixedFooter:!1,className:"",dismissible:!0,opacity:.5,in_duration:300,out_duration:200,ready:function(){},complete:function(){}}},componentDidUpdate:function(t){var e=this;if(this.props.show&&!t.show){if(r("#"+this.props.id).openModal({dismissible:e.props.dismissible,opacity:e.props.opacity,in_duration:e.props.in_duration,out_duration:e.props.out_duration,ready:e.props.ready,complete:e.props.complete}),this.props.insideAnotherModal){var n=r(".lean-overlay");n.length>1&&n.each(function(t){0!=t&&r(this).hide()});var i=r(".modal").first().attr("z-index");r(".lean-overlay").attr("z-index",i-1)}var o=document.createEvent("UIEvents");o.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(o)}else t.show&&!this.props.show&&(r("#"+this.props.id).closeModal(),r(".lean-overlay").remove())},render:function(){var t="";return t=this.props.fixedFooter?o("modal","modal-fixed-footer",this.props.className):o("modal",this.props.className),i.createElement("div",{id:this.props.id,className:t},this.props.children)}});t.exports={Modal:l,ModalContent:a,ModalFooter:s}},245:function(t,e,n){"use strict";var i=n(167),r=n(186)(i),o=n(246),a=n(198)("stores/message-store"),s=n(165);t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{show:!1,title:"Message",message:"",onDismiss:null}},reset:function(){this.setState(this.getInitialState()),this.trigger(this.state)},storeDidUpdate:function(){a("store updated")},showMessage:function(t){if(t){var e=s.extend(this.getInitialState(),t);this.setState(e),this.setState({show:!0})}},dismissMessage:function(){this.state.onDismiss&&this.state.onDismiss(),this.reset()}})},246:function(t,e,n){"use strict";var i=n(167),r=i.createActions({showMessage:{},dismissMessage:{}});t.exports=r},247:function(t,e,n){"use strict";var i=n(243),r=n(1),o=n(167),a=n(186)(o),s=n(248),l=n(249),u=r.createClass({displayName:"Confirmation",mixins:[a.connect(s)],hide:function(){l.reset()},onNegativeResponse:function(){this.state.onNegativeResponse(),this.hide()},onPositiveResponse:function(){this.state.onPositiveResponse(),this.hide()},render:function(){return r.createElement(i.Modal,{id:"confirmation",show:this.state.show,fixedFooter:!1,dismissible:!1},r.createElement(i.ModalContent,null,r.createElement("h5",null,this.state.title),r.createElement("p",null,this.state.message)),r.createElement(i.ModalFooter,null,r.createElement("div",{className:"right"},r.createElement("a",{className:"waves-effect waves-light btn",style:{float:"none",marginRight:"15px"},onClick:this.onNegativeResponse},this.state.negativeButtonText),r.createElement("a",{className:"waves-effect waves-light btn",style:{float:"none"},onClick:this.onPositiveResponse},this.state.postitiveButtonText))))}});t.exports=u},248:function(t,e,n){"use strict";var i=n(167),r=n(186)(i),o=n(249),a=n(198)("stores/confirmation-store"),s=n(165),l=n(226),u=n(228);t.exports=i.createStore({mixins:[r,i.ListenerMixin],listenables:o,__:function(t){var e="en";return this.state&&this.state.locale&&(e=this.state.locale),u.getLocaleString(e,t)},getInitialState:function(){return this.listenTo(l.locale,this.updateLocale),this.getEmptyState()},getEmptyState:function(){return{show:!1,locale:l.state.locale,title:this.__("Confirmation"),message:this.__("Please confirm"),postitiveButtonText:this.__("Okay"),negativeButtonText:this.__("Cancel"),onPositiveResponse:function(){},onNegativeResponse:function(){}}},reset:function(){this.setState(this.getEmptyState())},updateLocale:function(t){this.setState({locale:t})},storeDidUpdate:function(){a("store updated")},showConfirmation:function(t){if(t){var e=s.extend(this.getInitialState(),t);this.setState(e),this.setState({show:!0})}}})},249:function(t,e,n){"use strict";var i=n(167),r=i.createActions({showConfirmation:{},positiveResponse:{},negativeResponse:{},reset:{}});t.exports=r},250:function(t,e,n){"use strict";var i=n(1),r=n(167),o=n(186)(r),a=n(191),s=n(227),l=n(226),u=n(228),c=n(165),h=i.createClass({displayName:"LocaleChooser",mixins:[o.connect(a),o.connect(l)],__:function(t){return u.getLocaleString(this.state.locale,t)},propTypes:{id:i.PropTypes.string},getDefaultProps:function(){return{id:"locale-dropdown"}},componentDidMount:function(){c(".locale-tooltip").tooltip(),c(this.refs.dropdownButton).dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,gutter:0,belowOrigin:!0,alignment:"right"})},shouldComponentUpdate:function(t,e){return this.state.locale!=e.locale},onChange:function(t){s.changeLocale(t),c(this.refs.dropdownMenu).hide()},render:function(){var t=this,e={en:{label:"EN"},fr:{label:"FR"},es:{label:"ES"},it:{label:"IT"}};return i.createElement("li",{className:"nav-link-wrapper nav-dropdown-link-wrapper locale-tooltip","data-position":"bottom","data-delay":"50","data-tooltip":this.__("Change Language")},i.createElement("a",{ref:"dropdownButton",className:"locale-dropdown-button nav-dropdown-button",href:"#!","data-activates":this.props.id,style:{paddingRight:0}},e[this.state.locale].label,i.createElement("i",{className:"material-icons right",style:{marginLeft:0,color:"#212121 !important"}},"arrow_drop_down")),i.createElement("ul",{ref:"dropdownMenu",id:this.props.id,className:"dropdown-content"},i.createElement("li",null,i.createElement("a",{href:"#!",onClick:function(){t.onChange("en")},className:"nav-hover-menu-item"},"English (EN)")),i.createElement("li",null,i.createElement("a",{href:"#!",onClick:function(){t.onChange("fr")},className:"nav-hover-menu-item"},"Français (FR)")),i.createElement("li",null,i.createElement("a",{href:"#!",onClick:function(){t.onChange("es")},className:"nav-hover-menu-item"},"Español (ES)")),i.createElement("li",null,i.createElement("a",{href:"#!",onClick:function(){t.onChange("it")},className:"nav-hover-menu-item"},"Italiano (IT)"))))}});t.exports=h},564:function(t,e,n){"use strict";var i=n(243),r=n(1),o=r.createClass({displayName:"Progress",propTypes:{id:r.PropTypes.string,message:r.PropTypes.string,onClose:r.PropTypes.func,show:r.PropTypes.bool,title:r.PropTypes.string,subTitle:r.PropTypes.string},getDefaultProps:function(){return{id:"progress",show:!1,message:"",onClose:null}},getInitialState:function(){return{show:this.props.show}},componentWillReceiveProps:function(t){this.props.show!=t.show&&this.setState({show:t.show})},onClose:function(){this.setState({show:!1}),this.props.onClose&&this.props.onClose()},render:function(){var t="";return this.props.subTitle&&(t=r.createElement("div",{className:"row"},r.createElement("p",{className:"center"},this.props.subTitle))),r.createElement(i.Modal,{id:this.props.id,show:this.state.show,dismissible:!1,fixedFooter:!1},r.createElement(i.ModalContent,{className:"valign-wrapper"},r.createElement("div",{className:"container"},r.createElement("div",{className:"row"},r.createElement("h4",{className:"center"},this.props.title)),t,r.createElement("div",{className:"row"},r.createElement("div",{className:"progress"},r.createElement("div",{className:"indeterminate"}))))))}});t.exports=o},568:function(t,e){"use strict";t.exports={getBaseUrl:function(t){var e,n;t?(e=MAPHUBS_CONFIG.host_internal,n=MAPHUBS_CONFIG.internal_port):(e=MAPHUBS_CONFIG.host,n=MAPHUBS_CONFIG.port);var i="http://";MAPHUBS_CONFIG.https&&!t&&(i="https://");var r=i+e;return 80!=n&&(r+=":"+n),r},getUrlParameter:function(t){if("undefined"!=typeof window){var e,n,i=decodeURIComponent(window.location.search.substring(1)),r=i.split("&");for(n=0;n<r.length;n++)if(e=r[n].split("="),e[0]===t)return void 0===e[1]||e[1]}}}},574:function(t,e,n){(function(t,n){function i(t,e){for(var n=-1,i=t?t.length:0;++n<i;)if(e(t[n],n,t))return!0;return!1}function r(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function o(t){return function(e){return null==e?void 0:e[t]}}function a(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function s(t){return function(e){return t(e)}}function l(t,e){return null==t?void 0:t[e]}function u(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function c(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function h(t,e){return function(n){return t(e(n))}}function d(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function p(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function f(){this.__data__=hn?hn(null):{}}function m(t){return this.has(t)&&delete this.__data__[t]}function g(t){var e=this.__data__;if(hn){var n=e[t];return n===Ht?void 0:n}return $e.call(e,t)?e[t]:void 0}function v(t){var e=this.__data__;return hn?void 0!==e[t]:$e.call(e,t)}function b(t,e){var n=this.__data__;return n[t]=hn&&void 0===e?Ht:e,this}function y(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function w(){this.__data__=[]}function E(t){var e=this.__data__,n=H(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():nn.call(e,n,1),!0}function C(t){var e=this.__data__,n=H(e,t);return n<0?void 0:e[n][1]}function x(t){return H(this.__data__,t)>-1}function _(t,e){var n=this.__data__,i=H(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function T(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function S(){this.__data__={hash:new p,map:new(sn||y),string:new p}}function A(t){return at(this,t).delete(t)}function D(t){return at(this,t).get(t)}function k(t){return at(this,t).has(t)}function N(t,e){return at(this,t).set(t,e),this}function P(t){var e=-1,n=t?t.length:0;for(this.__data__=new T;++e<n;)this.add(t[e])}function F(t){return this.__data__.set(t,Ht),this}function R(t){return this.__data__.has(t)}function M(t){this.__data__=new y(t)}function L(){this.__data__=new y}function I(t){return this.__data__.delete(t)}function B(t){return this.__data__.get(t)}function O(t){return this.__data__.has(t)}function j(t,e){var n=this.__data__;if(n instanceof y){var i=n.__data__;if(!sn||i.length<jt-1)return i.push([t,e]),this;n=this.__data__=new T(i)}return n.set(t,e),this}function U(t,e){var n=Cn(t)||Ct(t)?a(t.length,String):[],i=n.length,r=!!i;for(var o in t)!e&&!$e.call(t,o)||r&&("length"==o||ct(o,i))||n.push(o);return n}function H(t,e){for(var n=t.length;n--;)if(Et(t[n][0],e))return n;return-1}function z(t,e){e=ht(e,t)?[e]:nt(e);for(var n=0,i=e.length;null!=t&&n<i;)t=t[vt(e[n++])];return n&&n==i?t:void 0}function W(t){return Je.call(t)}function V(t,e){return null!=t&&e in Object(t)}function q(t,e,n,i,r){return t===e||(null==t||null==e||!At(t)&&!Dt(e)?t!==t&&e!==e:Y(t,e,q,n,i,r))}function Y(t,e,n,i,r,o){var a=Cn(t),s=Cn(e),l=Gt,c=Gt;a||(l=wn(t),l=l==Kt?ie:l),s||(c=wn(e),c=c==Kt?ie:c);var h=l==ie&&!u(t),d=c==ie&&!u(e),p=l==c;if(p&&!h)return o||(o=new M),a||xn(t)?it(t,e,n,i,r,o):rt(t,e,l,n,i,r,o);if(!(r&Wt)){var f=h&&$e.call(t,"__wrapped__"),m=d&&$e.call(e,"__wrapped__");if(f||m){var g=f?t.value():t,v=m?e.value():e;return o||(o=new M),n(g,v,i,r,o)}}return!!p&&(o||(o=new M),ot(t,e,n,i,r,o))}function X(t,e,n,i){var r=n.length,o=r,a=!i;if(null==t)return!o;for(t=Object(t);r--;){var s=n[r];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<o;){s=n[r];var l=s[0],u=t[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in t))return!1}else{var h=new M;if(i)var d=i(u,c,l,t,e,h);if(!(void 0===d?q(c,u,i,zt|Wt,h):d))return!1}}return!0}function K(t){if(!At(t)||pt(t))return!1;var e=Tt(t)||u(t)?Ze:Ne;return e.test(bt(t))}function G(t){return Dt(t)&&St(t.length)&&!!Re[Je.call(t)]}function $(t){return"function"==typeof t?t:null==t?Bt:"object"==typeof t?Cn(t)?Q(t[0],t[1]):Z(t):Ot(t)}function J(t){if(!ft(t))return rn(t);var e=[];for(var n in Object(t))$e.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Z(t){var e=st(t);return 1==e.length&&e[0][2]?gt(e[0][0],e[0][1]):function(n){return n===t||X(n,t,e)}}function Q(t,e){return ht(t)&&mt(e)?gt(vt(t),e):function(n){var i=Mt(n,t);return void 0===i&&i===e?Lt(n,t):q(e,i,void 0,zt|Wt)}}function tt(t){return function(e){return z(e,t)}}function et(t){if("string"==typeof t)return t;if(kt(t))return yn?yn.call(t):"";var e=t+"";return"0"==e&&1/t==-Vt?"-0":e}function nt(t){return Cn(t)?t:En(t)}function it(t,e,n,r,o,a){var s=o&Wt,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(t);if(c&&a.get(e))return c==e;var h=-1,d=!0,p=o&zt?new P:void 0;for(a.set(t,e),a.set(e,t);++h<l;){var f=t[h],m=e[h];if(r)var g=s?r(m,f,h,e,t,a):r(f,m,h,t,e,a);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!i(e,function(t,e){if(!p.has(e)&&(f===t||n(f,t,r,o,a)))return p.add(e)})){d=!1;break}}else if(f!==m&&!n(f,m,r,o,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function rt(t,e,n,i,r,o,a){switch(n){case he:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ce:return!(t.byteLength!=e.byteLength||!i(new tn(t),new tn(e)));case $t:case Jt:case ne:return Et(+t,+e);case Zt:return t.name==e.name&&t.message==e.message;case oe:case se:return t==e+"";case ee:var s=c;case ae:var l=o&Wt;if(s||(s=d),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;o|=zt,a.set(t,e);var h=it(s(t),s(e),i,r,o,a);return a.delete(t),h;case le:if(bn)return bn.call(t)==bn.call(e)}return!1}function ot(t,e,n,i,r,o){var a=r&Wt,s=It(t),l=s.length,u=It(e),c=u.length;if(l!=c&&!a)return!1;for(var h=l;h--;){var d=s[h];if(!(a?d in e:$e.call(e,d)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var f=!0;o.set(t,e),o.set(e,t);for(var m=a;++h<l;){d=s[h];var g=t[d],v=e[d];if(i)var b=a?i(v,g,d,e,t,o):i(g,v,d,t,e,o);if(!(void 0===b?g===v||n(g,v,i,r,o):b)){f=!1;break}m||(m="constructor"==d)}if(f&&!m){var y=t.constructor,w=e.constructor;y!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w)&&(f=!1)}return o.delete(t),o.delete(e),f}function at(t,e){var n=t.__data__;return dt(e)?n["string"==typeof e?"string":"hash"]:n.map}function st(t){for(var e=It(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,mt(r)]}return e}function lt(t,e){var n=l(t,e);return K(n)?n:void 0}function ut(t,e,n){e=ht(e,t)?[e]:nt(e);for(var i,r=-1,o=e.length;++r<o;){var a=vt(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}if(i)return i;var o=t?t.length:0;return!!o&&St(o)&&ct(a,o)&&(Cn(t)||Ct(t))}function ct(t,e){return e=null==e?qt:e,!!e&&("number"==typeof t||Fe.test(t))&&t>-1&&t%1==0&&t<e}function ht(t,e){if(Cn(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!kt(t))||(Ce.test(t)||!Ee.test(t)||null!=e&&t in Object(e))}function dt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function pt(t){return!!Ke&&Ke in t}function ft(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||Ye;return t===n}function mt(t){return t===t&&!At(t)}function gt(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function vt(t){if("string"==typeof t||kt(t))return t;var e=t+"";return"0"==e&&1/t==-Vt?"-0":e}function bt(t){if(null!=t){try{return Ge.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function yt(t,e,n){var i=t?t.length:0;if(!i)return-1;var o=null==n?0:Pt(n);return o<0&&(o=on(i+o,0)),r(t,$(e,3),o)}function wt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(Ut);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a),a};return n.cache=new(wt.Cache||T),n}function Et(t,e){return t===e||t!==t&&e!==e}function Ct(t){return _t(t)&&$e.call(t,"callee")&&(!en.call(t,"callee")||Je.call(t)==Kt)}function xt(t){return null!=t&&St(t.length)&&!Tt(t)}function _t(t){return Dt(t)&&xt(t)}function Tt(t){var e=At(t)?Je.call(t):"";return e==Qt||e==te}function St(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=qt}function At(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Dt(t){return!!t&&"object"==typeof t}function kt(t){return"symbol"==typeof t||Dt(t)&&Je.call(t)==le}function Nt(t){if(!t)return 0===t?t:0;if(t=Ft(t),t===Vt||t===-Vt){var e=t<0?-1:1;return e*Yt}return t===t?t:0}function Pt(t){var e=Nt(t),n=e%1;return e===e?n?e-n:e:0}function Ft(t){if("number"==typeof t)return t;if(kt(t))return Xt;if(At(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=At(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Se,"");var n=ke.test(t);return n||Pe.test(t)?Me(t.slice(2),n?2:8):De.test(t)?Xt:+t}function Rt(t){return null==t?"":et(t)}function Mt(t,e,n){var i=null==t?void 0:z(t,e);return void 0===i?n:i}function Lt(t,e){return null!=t&&ut(t,e,V)}function It(t){return xt(t)?U(t):J(t)}function Bt(t){return t}function Ot(t){return ht(t)?o(vt(t)):tt(t)}var jt=200,Ut="Expected a function",Ht="__lodash_hash_undefined__",zt=1,Wt=2,Vt=1/0,qt=9007199254740991,Yt=1.7976931348623157e308,Xt=NaN,Kt="[object Arguments]",Gt="[object Array]",$t="[object Boolean]",Jt="[object Date]",Zt="[object Error]",Qt="[object Function]",te="[object GeneratorFunction]",ee="[object Map]",ne="[object Number]",ie="[object Object]",re="[object Promise]",oe="[object RegExp]",ae="[object Set]",se="[object String]",le="[object Symbol]",ue="[object WeakMap]",ce="[object ArrayBuffer]",he="[object DataView]",de="[object Float32Array]",pe="[object Float64Array]",fe="[object Int8Array]",me="[object Int16Array]",ge="[object Int32Array]",ve="[object Uint8Array]",be="[object Uint8ClampedArray]",ye="[object Uint16Array]",we="[object Uint32Array]",Ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ce=/^\w*$/,xe=/^\./,_e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Te=/[\\^$.*+?()[\]{}|]/g,Se=/^\s+|\s+$/g,Ae=/\\(\\)?/g,De=/^[-+]0x[0-9a-f]+$/i,ke=/^0b[01]+$/i,Ne=/^\[object .+?Constructor\]$/,Pe=/^0o[0-7]+$/i,Fe=/^(?:0|[1-9]\d*)$/,Re={};Re[de]=Re[pe]=Re[fe]=Re[me]=Re[ge]=Re[ve]=Re[be]=Re[ye]=Re[we]=!0,Re[Kt]=Re[Gt]=Re[ce]=Re[$t]=Re[he]=Re[Jt]=Re[Zt]=Re[Qt]=Re[ee]=Re[ne]=Re[ie]=Re[oe]=Re[ae]=Re[se]=Re[ue]=!1;var Me=parseInt,Le="object"==typeof t&&t&&t.Object===Object&&t,Ie="object"==typeof self&&self&&self.Object===Object&&self,Be=Le||Ie||Function("return this")(),Oe="object"==typeof e&&e&&!e.nodeType&&e,je=Oe&&"object"==typeof n&&n&&!n.nodeType&&n,Ue=je&&je.exports===Oe,He=Ue&&Le.process,ze=function(){try{return He&&He.binding("util")}catch(t){}}(),We=ze&&ze.isTypedArray,Ve=Array.prototype,qe=Function.prototype,Ye=Object.prototype,Xe=Be["__core-js_shared__"],Ke=function(){var t=/[^.]+$/.exec(Xe&&Xe.keys&&Xe.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ge=qe.toString,$e=Ye.hasOwnProperty,Je=Ye.toString,Ze=RegExp("^"+Ge.call($e).replace(Te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qe=Be.Symbol,tn=Be.Uint8Array,en=Ye.propertyIsEnumerable,nn=Ve.splice,rn=h(Object.keys,Object),on=Math.max,an=lt(Be,"DataView"),sn=lt(Be,"Map"),ln=lt(Be,"Promise"),un=lt(Be,"Set"),cn=lt(Be,"WeakMap"),hn=lt(Object,"create"),dn=bt(an),pn=bt(sn),fn=bt(ln),mn=bt(un),gn=bt(cn),vn=Qe?Qe.prototype:void 0,bn=vn?vn.valueOf:void 0,yn=vn?vn.toString:void 0;p.prototype.clear=f,p.prototype.delete=m,p.prototype.get=g,p.prototype.has=v,p.prototype.set=b,y.prototype.clear=w,y.prototype.delete=E,y.prototype.get=C,y.prototype.has=x,y.prototype.set=_,T.prototype.clear=S,T.prototype.delete=A,T.prototype.get=D,T.prototype.has=k,T.prototype.set=N,P.prototype.add=P.prototype.push=F,P.prototype.has=R,M.prototype.clear=L,M.prototype.delete=I,M.prototype.get=B,M.prototype.has=O,M.prototype.set=j;var wn=W;(an&&wn(new an(new ArrayBuffer(1)))!=he||sn&&wn(new sn)!=ee||ln&&wn(ln.resolve())!=re||un&&wn(new un)!=ae||cn&&wn(new cn)!=ue)&&(wn=function(t){var e=Je.call(t),n=e==ie?t.constructor:void 0,i=n?bt(n):void 0;if(i)switch(i){case dn:return he;case pn:return ee;case fn:return re;case mn:return ae;case gn:return ue}return e});var En=wt(function(t){t=Rt(t);var e=[];return xe.test(t)&&e.push(""),t.replace(_e,function(t,n,i,r){e.push(i?r.replace(Ae,"$1"):n||t)}),e});wt.Cache=T;var Cn=Array.isArray,xn=We?s(We):G;n.exports=yt}).call(e,function(){return this}(),n(571)(t))},587:function(t,e,n){(function(e){"use strict";function i(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=e.React||n(1),s={},l=n(588),u=n(589),c=n(590),h=n(591),d=n(592),p=n(593),f={},m=[];s.Mixin=h,s.HOC=d,s.Decorator=p,s.defaults=function(t){f=t},s.addValidationRule=function(t,e){l[t]=e},s.Form=a.createClass({displayName:"Formsy",getInitialState:function(){return{isValid:!0,isSubmitting:!1,canChange:!1}},getDefaultProps:function(){return{onSuccess:function(){},onError:function(){},onSubmit:function(){},onValidSubmit:function(){},onInvalidSubmit:function(){},onValid:function(){},onInvalid:function(){},onChange:function(){},validationErrors:null,preventExternalInvalidation:!1}},childContextTypes:{formsy:a.PropTypes.object},getChildContext:function(){var t=this;return{formsy:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,validate:this.validate,isFormDisabled:this.isFormDisabled,isValidValue:function(e,n){return t.runValidation(e,n).isValid}}}},componentWillMount:function(){this.inputs=[]},componentDidMount:function(){this.validateForm()},componentWillUpdate:function(){this.prevInputNames=this.inputs.map(function(t){return t.props.name})},componentDidUpdate:function(){this.props.validationErrors&&"object"===o(this.props.validationErrors)&&Object.keys(this.props.validationErrors).length>0&&this.setInputValidationErrors(this.props.validationErrors);var t=this.inputs.map(function(t){return t.props.name});c.arraysDiffer(this.prevInputNames,t)&&this.validateForm()},reset:function(t){this.setFormPristine(!0),this.resetModel(t)},submit:function(t){t&&t.preventDefault(),this.setFormPristine(!1);var e=this.getModel();this.props.onSubmit(e,this.resetModel,this.updateInputsWithError),this.state.isValid?this.props.onValidSubmit(e,this.resetModel,this.updateInputsWithError):this.props.onInvalidSubmit(e,this.resetModel,this.updateInputsWithError)},mapModel:function(t){return this.props.mapping?this.props.mapping(t):u.toObj(Object.keys(t).reduce(function(e,n){for(var i=n.split("."),r=e;i.length;){var o=i.shift();r=r[o]=i.length?r[o]||{}:t[n]}return e},{}))},getModel:function(){var t=this.getCurrentValues();return this.mapModel(t)},resetModel:function(t){this.inputs.forEach(function(e){var n=e.props.name;t&&t.hasOwnProperty(n)?e.setValue(t[n]):e.resetValue()}),this.validateForm()},setInputValidationErrors:function(t){this.inputs.forEach(function(e){var n=e.props.name,i=[{_isValid:!(n in t),_validationError:"string"==typeof t[n]?[t[n]]:t[n]}];e.setState.apply(e,i)})},isChanged:function(){return!c.isSame(this.getPristineValues(),this.getCurrentValues())},getPristineValues:function(){return this.inputs.reduce(function(t,e){var n=e.props.name;return t[n]=e.props.value,t},{})},updateInputsWithError:function(t){var e=this;Object.keys(t).forEach(function(n,i){var r=c.find(e.inputs,function(t){return t.props.name===n});if(!r)throw new Error("You are trying to update an input that does not exist. Verify errors object with input names. "+JSON.stringify(t));var o=[{_isValid:e.props.preventExternalInvalidation||!1,_externalError:"string"==typeof t[n]?[t[n]]:t[n]}];r.setState.apply(r,o)})},isFormDisabled:function(){return this.props.disabled},getCurrentValues:function(){return this.inputs.reduce(function(t,e){var n=e.props.name;return t[n]=e.state._value,t},{})},setFormPristine:function(t){this.setState({_formSubmitted:!t}),this.inputs.forEach(function(e,n){e.setState({_formSubmitted:!t,_isPristine:t})})},validate:function(t){this.state.canChange&&this.props.onChange(this.getCurrentValues(),this.isChanged());var e=this.runValidation(t);t.setState({_isValid:e.isValid,_isRequired:e.isRequired,_validationError:e.error,_externalError:null},this.validateForm)},runValidation:function(t,e){var n=this.getCurrentValues(),i=t.props.validationErrors,r=t.props.validationError;e=2===arguments.length?e:t.state._value;var o=this.runRules(e,n,t._validations),a=this.runRules(e,n,t._requiredValidations);
"function"==typeof t.validate&&(o.failed=t.validate()?[]:["failed"]);var s=!!Object.keys(t._requiredValidations).length&&!!a.success.length,l=!(o.failed.length||this.props.validationErrors&&this.props.validationErrors[t.props.name]);return{isRequired:s,isValid:!s&&l,error:function(){if(l&&!s)return m;if(o.errors.length)return o.errors;if(this.props.validationErrors&&this.props.validationErrors[t.props.name])return"string"==typeof this.props.validationErrors[t.props.name]?[this.props.validationErrors[t.props.name]]:this.props.validationErrors[t.props.name];if(s){var e=i[a.success[0]];return e?[e]:null}return o.failed.length?o.failed.map(function(t){return i[t]?i[t]:r}).filter(function(t,e,n){return n.indexOf(t)===e}):void 0}.call(this)}},runRules:function(t,e,n){var i={errors:[],failed:[],success:[]};return Object.keys(n).length&&Object.keys(n).forEach(function(r){if(l[r]&&"function"==typeof n[r])throw new Error("Formsy does not allow you to override default validations: "+r);if(!l[r]&&"function"!=typeof n[r])throw new Error("Formsy does not have the validation rule: "+r);if("function"==typeof n[r]){var o=n[r](e,t);return void("string"==typeof o?(i.errors.push(o),i.failed.push(r)):o||i.failed.push(r))}if("function"!=typeof n[r]){var o=l[r](e,t,n[r]);return void("string"==typeof o?(i.errors.push(o),i.failed.push(r)):o?i.success.push(r):i.failed.push(r))}return i.success.push(r)}),i},validateForm:function(){var t=this,e=function(){var t=this.inputs.every(function(t){return t.state._isValid});this.setState({isValid:t}),t?this.props.onValid():this.props.onInvalid(),this.setState({canChange:!0})}.bind(this);this.inputs.forEach(function(n,i){var r=t.runValidation(n);r.isValid&&n.state._externalError&&(r.isValid=!1),n.setState({_isValid:r.isValid,_isRequired:r.isRequired,_validationError:r.error,_externalError:!r.isValid&&n.state._externalError?n.state._externalError:null},i===t.inputs.length-1?e:null)}),!this.inputs.length&&this.isMounted()&&this.setState({canChange:!0})},attachToForm:function(t){this.inputs.indexOf(t)===-1&&this.inputs.push(t),this.validate(t)},detachFromForm:function(t){var e=this.inputs.indexOf(t);e!==-1&&(this.inputs=this.inputs.slice(0,e).concat(this.inputs.slice(e+1))),this.validateForm()},render:function(){var t=this.props,e=(t.mapping,t.validationErrors,t.onSubmit,t.onValid,t.onValidSubmit,t.onInvalid,t.onInvalidSubmit,t.onChange,t.reset,t.preventExternalInvalidation,t.onSuccess,t.onError,i(t,["mapping","validationErrors","onSubmit","onValid","onValidSubmit","onInvalid","onInvalidSubmit","onChange","reset","preventExternalInvalidation","onSuccess","onError"]));return a.createElement("form",r({},e,{onSubmit:this.submit}),this.props.children)}}),e.exports||e.module||e.define&&e.define.amd||(e.Formsy=s),t.exports=s}).call(e,function(){return this}())},588:function(t,e){"use strict";var n=function(t){return null!==t&&void 0!==t},i=function(t){return""===t},r={isDefaultRequiredValue:function(t,e){return void 0===e||""===e},isExisty:function(t,e){return n(e)},matchRegexp:function(t,e,r){return!n(e)||i(e)||r.test(e)},isUndefined:function(t,e){return void 0===e},isEmptyString:function(t,e){return i(e)},isEmail:function(t,e){return r.matchRegexp(t,e,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},isUrl:function(t,e){return r.matchRegexp(t,e,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i)},isTrue:function(t,e){return e===!0},isFalse:function(t,e){return e===!1},isNumeric:function(t,e){return"number"==typeof e||r.matchRegexp(t,e,/^[-+]?(?:\d*[.])?\d+$/)},isAlpha:function(t,e){return r.matchRegexp(t,e,/^[A-Z]+$/i)},isAlphanumeric:function(t,e){return r.matchRegexp(t,e,/^[0-9A-Z]+$/i)},isInt:function(t,e){return r.matchRegexp(t,e,/^(?:[-+]?(?:0|[1-9]\d*))$/)},isFloat:function(t,e){return r.matchRegexp(t,e,/^(?:[-+]?(?:\d+))?(?:\.\d*)?(?:[eE][\+\-]?(?:\d+))?$/)},isWords:function(t,e){return r.matchRegexp(t,e,/^[A-Z\s]+$/i)},isSpecialWords:function(t,e){return r.matchRegexp(t,e,/^[A-Z\s\u00C0-\u017F]+$/i)},isLength:function(t,e,r){return!n(e)||i(e)||e.length===r},equals:function(t,e,r){return!n(e)||i(e)||e==r},equalsField:function(t,e,n){return e==t[n]},maxLength:function(t,e,i){return!n(e)||e.length<=i},minLength:function(t,e,r){return!n(e)||i(e)||e.length>=r}};t.exports=r},589:function(t,e){function n(t){return Object.keys(t).reduce(function(e,n){var i=n.match(/[^\[]*/i),r=n.match(/\[.*?\]/g)||[];r=[i[0]].concat(r).map(function(t){return t.replace(/\[|\]/g,"")});for(var o=e;r.length;){var a=r.shift();a in o?o=o[a]:(o[a]=r.length?isNaN(r[0])?{}:[]:t[n],o=o[a])}return e},{})}function i(t){function e(t,n,i){return Array.isArray(i)||"[object Object]"===Object.prototype.toString.call(i)?(Object.keys(i).forEach(function(r){e(t,n+"["+r+"]",i[r])}),t):(t[n]=i,t)}var n=Object.keys(t);return n.reduce(function(n,i){return e(n,i,t[i])},{})}t.exports={fromObj:i,toObj:n}},590:function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};t.exports={arraysDiffer:function(t,e){var n=!1;return t.length!==e.length?n=!0:t.forEach(function(t,i){this.isSame(t,e[i])||(n=!0)},this),n},objectsDiffer:function(t,e){var n=!1;return Object.keys(t).length!==Object.keys(e).length?n=!0:Object.keys(t).forEach(function(i){this.isSame(t[i],e[i])||(n=!0)},this),n},isSame:function(t,e){return("undefined"==typeof t?"undefined":n(t))===("undefined"==typeof e?"undefined":n(e))&&(Array.isArray(t)?!this.arraysDiffer(t,e):"function"==typeof t?t.toString()===e.toString():"object"===("undefined"==typeof t?"undefined":n(t))&&null!==t&&null!==e?!this.objectsDiffer(t,e):t===e)},find:function(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n];if(e(r))return r}return null}}},591:function(t,e,n){(function(e){"use strict";var i=n(590),r=e.React||n(1),o=function(t){return"string"==typeof t?t.split(/\,(?![^{\[]*[}\]])/g).reduce(function(t,e){var n=e.split(":"),i=n.shift();if(n=n.map(function(t){try{return JSON.parse(t)}catch(e){return t}}),n.length>1)throw new Error("Formsy does not support multiple args on string validations. Use object format of validations instead.");return t[i]=!n.length||n[0],t},{}):t||{}};t.exports={getInitialState:function(){return{_value:this.props.value,_isRequired:!1,_isValid:!0,_isPristine:!0,_pristineValue:this.props.value,_validationError:[],_externalError:null,_formSubmitted:!1}},contextTypes:{formsy:r.PropTypes.object},getDefaultProps:function(){return{validationError:"",validationErrors:{}}},componentWillMount:function(){var t=function(){this.setValidations(this.props.validations,this.props.required),this.context.formsy.attachToForm(this)}.bind(this);if(!this.props.name)throw new Error("Form Input requires a name property when used");t()},componentWillReceiveProps:function(t){this.setValidations(t.validations,t.required)},componentDidUpdate:function(t){i.isSame(this.props.value,t.value)||this.setValue(this.props.value),i.isSame(this.props.validations,t.validations)&&i.isSame(this.props.required,t.required)||this.context.formsy.validate(this)},componentWillUnmount:function(){this.context.formsy.detachFromForm(this)},setValidations:function(t,e){this._validations=o(t)||{},this._requiredValidations=e===!0?{isDefaultRequiredValue:!0}:o(e)},setValue:function(t){this.setState({_value:t,_isPristine:!1},function(){this.context.formsy.validate(this)}.bind(this))},resetValue:function(){this.setState({_value:this.state._pristineValue,_isPristine:!0},function(){this.context.formsy.validate(this)})},getValue:function(){return this.state._value},hasValue:function(){return""!==this.state._value},getErrorMessage:function(){var t=this.getErrorMessages();return t.length?t[0]:null},getErrorMessages:function(){return!this.isValid()||this.showRequired()?this.state._externalError||this.state._validationError||[]:[]},isFormDisabled:function(){return this.context.formsy.isFormDisabled()},isValid:function(){return this.state._isValid},isPristine:function(){return this.state._isPristine},isFormSubmitted:function(){return this.state._formSubmitted},isRequired:function(){return!!this.props.required},showRequired:function(){return this.state._isRequired},showError:function(){return!this.showRequired()&&!this.isValid()},isValidValue:function(t){return this.context.formsy.isValidValue.call(null,this,t)}}}).call(e,function(){return this}())},592:function(t,e,n){(function(e){"use strict";function i(t){return t.displayName||t.name||("string"==typeof t?t:"Component")}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o=e.React||n(1),a=n(591);t.exports=function(t){return o.createClass({displayName:"Formsy("+i(t)+")",mixins:[a],render:function(){return o.createElement(t,r({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props))}})}}).call(e,function(){return this}())},593:function(t,e,n){(function(e){"use strict";var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=e.React||n(1),o=n(591);t.exports=function(){return function(t){return r.createClass({mixins:[o],render:function(){return r.createElement(t,i({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props))}})}}}).call(e,function(){return this}())},600:function(t,e,n){"use strict";var i=n(1),r=n(587),o=n(244),a=i.createClass({displayName:"Toggle",mixins:[r.Mixin],propTypes:{className:i.PropTypes.string,dataTooltip:i.PropTypes.string,dataDelay:i.PropTypes.number,dataPosition:i.PropTypes.string,defaultChecked:i.PropTypes.bool,labelOn:i.PropTypes.string.isRequired,labelOff:i.PropTypes.string.isRequired,name:i.PropTypes.string.isRequired,style:i.PropTypes.object,onChange:i.PropTypes.func},getDefaultProps:function(){return{style:{},defaultChecked:!1,dataDelay:100}},changeValue:function(t){t.stopPropagation(),this.setValue(t.currentTarget.checked),this.props.onChange&&this.props.onChange(t.currentTarget.checked)},componentWillMount:function(){this.setValue(!!this.props.defaultChecked&&this.props.defaultChecked)},componentWillReceiveProps:function(t){t.defaultChecked!=this.props.defaultChecked&&this.setValue(t.defaultChecked)},render:function(){var t=o("switch",this.props.className,{tooltipped:!!this.props.dataTooltip}),e=!!this.props.defaultChecked&&this.props.defaultChecked;return i.createElement("div",{className:t,"data-delay":this.props.dataDelay,"data-position":this.props.dataPosition,style:this.props.style,"data-tooltip":this.props.dataTooltip},i.createElement("label",null,this.props.labelOff,i.createElement("input",{type:"checkbox",id:this.props.name,defaultChecked:e,onChange:this.changeValue}),i.createElement("span",{className:"lever"}),this.props.labelOn))}});t.exports=a},606:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(243),o=n(607),a=i(o),s=n(564),l=i(s),u=n(1),c=n(198)("ImageCrop"),h=n(576),d=n(167),p=n(186)(d),f=n(226),m=n(228),g=n(246),v=(n(570),n(165)),b=n(609),y=u.createClass({displayName:"ImageCrop",mixins:[p.connect(f)],__:function(t){return m.getLocaleString(this.state.locale,t)},propTypes:{onCrop:u.PropTypes.func,lockAspect:u.PropTypes.bool,aspectRatio:u.PropTypes.number,autoCropArea:u.PropTypes.number,allowedExtensions:u.PropTypes.array,max_size:u.PropTypes.number,skip_size:u.PropTypes.number,jpeg_quality:u.PropTypes.number,resize_height:u.PropTypes.number,resize_max_height:u.PropTypes.number,resize_width:u.PropTypes.number,resize_max_width:u.PropTypes.number},getDefaultProps:function(){return{lockAspect:!1,aspectRatio:null,autoCropArea:1,allowedExtensions:["jpg","jpeg","png"],max_size:5242880,skip_size:1e4,jpeg_quality:75,resize_height:null,resize_max_height:null,resize_width:null,resize_max_width:null}},getInitialState:function(){return{img:null,file:null,show:!1,preview:null,autoCropArea:this.props.autoCropArea,aspectRatio:this.props.aspectRatio,loading:!1}},componentWillReceiveProps:function(t){var e={};t.aspectRatio&&(c("update aspectratio to: "+t.aspectRatio),e.aspectRatio=t.aspectRatio),t.autoCropArea&&(c("update autoCropArea to: "+t.autoCropArea),e.autoCropArea=t.autoCropArea),this.setState(e)},show:function(){this.setState({show:!0})},checkFile:function(t){var e=new RegExp(".("+this.props.allowedExtensions.join("|")+")$","i"),n=void 0;if(!e.test(t.name))return n="Unsupported File Extension: "+t.name,new Error(n)},checkFileSize:function(t){var e=this;return new h(function(n,i){var r=e.props.max_size,o=void 0;return t.size>r?(o=e.__("Maximum Size Exceeded:")+" "+Math.round(r/1024),c(o),i(new Error(o))):n()})},resizeImage:function(t){var e=null;if("undefined"!=typeof window){e=n(610);var i=this;return new h(function(n,r){if(i.state.file.size<i.props.skip_size){var o=t.toDataURL(i.state.file.type,g);return void n(o)}var a=void 0,s=void 0,l=i.props.resize_height,u=i.props.resize_width,c=i.props.resize_max_height,h=i.props.resize_max_width;if(l&&!u){a=l;var d=Math.floor(i.state.cropWidth*a/i.state.cropHeight);s=!h||h>d?d:h}else if(!l&&u){s=u;var p=Math.floor(i.state.cropHeight*s/i.state.cropWidth);a=!c||c>p?p:c}else if(l&&u)s=u,a=l;else if(!u&&h){if(!(i.state.cropWidth>h)){var f=t.toDataURL(i.state.file.type,g);return void n(f)}s=h;var m=Math.floor(i.state.cropHeight*s/i.state.cropWidth);a=!c||c>m?m:c}var g=i.props.jpeg_quality,v="png"===i.state.ext,b=document.createElement("canvas");b.width=s,b.height=a,e.resizeCanvas(t,b,{alpha:v},function(t){t&&r(t);var e=b.toDataURL(i.state.file.type,g);n(e)})})}},_onChange:function(t){var e=this;e.setState({loading:!0});var n=void 0;t.dataTransfer?n=t.dataTransfer.files:t.target&&(n=t.target.files);var i=n[0],r=i.name.split(".").pop(),o=this.checkFile(i);return o?(c(o),void g.showMessage({title:"Error",message:o})):void this.checkFileSize(i).then(function(){var t=new Image;t.onload=function(){var n=t.width,o=t.height;b.getData(t,function(){var a=t.exifdata,s=document.createElement("canvas");if(s.width=n,s.height=o,a.Orientation&&1!==a.Orientation){var l=s.getContext("2d");switch(a.Orientation){case 1:l.transform(1,0,0,1,0,0);break;case 2:l.transform(-1,0,0,1,n,0);break;case 3:l.transform(-1,0,0,-1,n,o);break;case 4:l.transform(1,0,0,-1,0,o);break;case 5:s.width=o,s.height=n,l.transform(0,1,1,0,0,0);break;case 6:s.width=o,s.height=n,l.transform(0,1,-1,0,o,0);break;case 7:s.width=o,s.height=n,l.transform(0,-1,-1,0,o,n);break;case 8:s.width=o,s.height=n,l.transform(0,-1,1,0,0,n)}}s.getContext("2d").drawImage(t,0,0,t.width,t.height);var u=s.toDataURL(i.type,1);e.setState({src:u,exif:a,file:i,img:t,ext:r,loading:!1}),v(s).remove()})},t.onerror=function(){var t=e.__("Bad Image:")+" "+i.name;c(t),g.showMessage({title:"Error",message:t})},t.src=window.URL.createObjectURL(i)}).catch(function(t){c(t),g.showMessage({title:"Error",message:t})})},_crop:function(t){this.setState({cropWidth:t.width,cropHeight:t.height,cropScaleX:t.scaleX,cropScaleY:t.scaleY})},onSave:function(){var t=this,e=this.refs.cropper,n=e.getCroppedCanvas();this.resizeImage(n).then(function(e){t.setState({show:!1});var n={width:t.state.cropWidth,height:t.state.cropHeight,exif:t.state.exif};t.props.onCrop&&t.props.onCrop(e,n),t.resetImageCrop()}).catch(function(t){c(t),g.showMessage({title:"Error",message:t})})},handleCloseSelected:function(){this.resetImageCrop(),this.setState({show:!1})},zoomIn:function(){this.refs.cropper.zoom(.1)},zoomOut:function(){this.refs.cropper.zoom(-.1)},cropOriginal:function(){this.resetCropPosition(),this.setState({autoCropArea:1,aspectRatio:null})},aspect16by9:function(){this.setState({aspectRatio:16/9})},aspect3by2:function(){this.setState({aspectRatio:1.5})},aspectSquare:function(){this.setState({aspectRatio:1})},resetCropPosition:function(){this.setState({autoCropArea:1,aspectRatio:NaN}),this.refs.cropper.reset()},resetImageCrop:function(){this.refs.cropper&&this.refs.cropper.reset&&this.refs.cropper.reset(),this.refs.cropper&&this.refs.cropper.clear&&this.refs.cropper.clear(),this.setState({img:null,src:null,selectedFile:null,file:null,show:!1,preview:null,autoCropArea:this.props.autoCropArea,aspectRatio:this.props.aspectRatio})},render:function(){var t="";"undefined"!=typeof window&&(t=this.state.src?u.createElement(a.default,{style:{height:"calc(100% - 10px)",paddingBottom:"10px",width:"100%"},autoCropArea:this.state.autoCropArea,aspectRatio:this.state.aspectRatio,guides:!1,src:this.state.src,ref:"cropper",crop:this._crop}):u.createElement("div",{className:"valign-wrapper",style:{height:"75%"}},u.createElement("h5",{className:"center-align valign",style:{margin:"auto"}},this.__("Choose an image file"))));var e="",n="",i="",o="",s="",c="";return this.state.src&&(this.props.lockAspect||(i=u.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.cropOriginal},u.createElement("i",{className:"material-icons"},"crop_original")),o=u.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.aspect16by9},u.createElement("i",{className:"material-icons"},"crop_16_9")),s=u.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.aspect3by2},u.createElement("i",{className:"material-icons"},"crop_3_2")),c=u.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.aspectSquare},u.createElement("i",{className:"material-icons"},"crop_square"))),e=u.createElement("div",{className:"col s12"},u.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.zoomIn},u.createElement("i",{className:"material-icons"},"zoom_in")),u.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.zoomOut},u.createElement("i",{className:"material-icons"},"zoom_out")),i,o,s,c,u.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.reset},u.createElement("i",{className:"material-icons"},"restore"))),n=u.createElement("div",{className:"fixed-action-btn action-button-bottom-right tooltipped","data-position":"top","data-delay":"50","data-tooltip":this.__("Save Map")},u.createElement("a",{onMouseDown:this.onSave,className:"btn-floating btn-large omh-color"},u.createElement("i",{className:"large material-icons"},"save")))),u.createElement(r.Modal,{show:this.state.show,id:"image-crop-modal",className:"image-crop-modal",style:{overflow:"hidden"},dismissible:!1,fixedFooter:!1},u.createElement(r.ModalContent,{style:{padding:0,margin:0,height:"100%",overflow:"hidden"}},u.createElement("a",{className:"omh-color",style:{position:"absolute",top:0,right:0,cursor:"pointer"},onClick:this.handleCloseSelected},u.createElement("i",{className:"material-icons selected-feature-close",style:{fontSize:"35px"}},"close")),u.createElement("div",{className:"row no-padding",style:{height:"80px",marginRight:"35px",marginLeft:"0px",marginBottom:"0px"}},u.createElement("div",{className:"col s12"},u.createElement("div",{className:"file-field input-field"},u.createElement("div",{className:"btn"},u.createElement("span",null,this.__("Choose File")),u.createElement("input",{type:"file",onChange:this._onChange,value:this.state.selectedFile})),u.createElement("div",{className:"file-path-wrapper"},u.createElement("input",{className:"file-path validate",type:"text",value:this.state.selectedFile}))))),u.createElement("div",{className:"row no-margin no-padding",style:{height:"50px"}},e),u.createElement("div",{className:"row",style:{height:"calc(100% - 130px)"}},u.createElement("div",{className:"col s12",style:{height:"100%"}},t),u.createElement("br",{style:{clear:"both"}}),n),u.createElement(l.default,{id:"imagecrop-loading",title:this.__("Loading"),subTitle:"",dismissible:!1,show:this.state.loading})))}});t.exports=y},607:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=n(1),h=i(c),d=n(608),p=i(d),f=n(30),m=i(f),g=["dragMode","aspectRatio","data","viewMode","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRation","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minContainerWidth","minContainerHeight","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","build","built","cropstart","cropmove","cropend","crop","zoom"],v=g.slice(3),b=function(t){function e(){return o(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),u(e,[{key:"componentDidMount",value:function(){var t=this,e=Object.keys(this.props).filter(function(t){return g.indexOf(t)!==-1}).reduce(function(e,n){return Object.assign({},e,r({},n,t.props[n]))},{});this.img=m.default.findDOMNode(this.refs.img),this.cropper=new p.default(this.img,e)}},{key:"componentWillReceiveProps",value:function(t){t.src!==this.props.src&&this.cropper.reset().clear().replace(t.src),t.aspectRatio!==this.props.aspectRatio&&this.setAspectRatio(t.aspectRatio),t.data!==this.props.data&&this.setData(t.data),t.dragMode!==this.props.dragMode&&this.setDragMode(t.dragMode),t.cropBoxData!==this.props.cropBoxData&&this.setCropBoxData(t.cropBoxData),t.canvasData!==this.props.canvasData&&this.setCanvasData(t.canvasData),t.moveTo!==this.props.moveTo&&(t.moveTo.length>1?this.moveTo(t.moveTo[0],t.moveTo[1]):this.moveTo(t.moveTo[0])),t.zoomTo!==this.props.zoomTo&&this.zoomTo(t.zoomTo),t.rotateTo!==this.props.rotateTo&&this.rotateTo(t.rotateTo),t.scaleX!==this.props.scaleX&&this.scaleX(t.scaleX),t.scaleY!==this.props.scaleY&&this.scaleY(t.scaleY),t.enable!==this.props.enable&&(t.enable?this.enable():this.disable());for(var e in t)if(t[e]!==this.props[e]&&v.indexOf(e)!==-1)throw new Error("prop: "+e+" can't be change after componentDidMount")}},{key:"componentWillUnmount",value:function(){this.img&&(this.cropper.destroy(),delete this.img,delete this.cropper)}},{key:"setDragMode",value:function(t){return this.cropper.setDragMode(t)}},{key:"setAspectRatio",value:function(t){return this.cropper.setAspectRatio(t)}},{key:"getCroppedCanvas",value:function(t){return this.cropper.getCroppedCanvas(t)}},{key:"setCropBoxData",value:function(t){return this.cropper.setCropBoxData(t)}},{key:"getCropBoxData",value:function(){return this.cropper.getCropBoxData()}},{key:"setCanvasData",value:function(t){return this.cropper.setCanvasData(t)}},{key:"getCanvasData",value:function(){return this.cropper.getCanvasData()}},{key:"getImageData",value:function(){return this.cropper.getImageData()}},{key:"getContainerData",value:function(){return this.cropper.getContainerData()}},{key:"setData",value:function(t){return this.cropper.setData(t)}},{key:"getData",value:function(t){return this.cropper.getData(t)}},{key:"crop",value:function(){return this.cropper.crop()}},{key:"move",value:function(t,e){return this.cropper.move(t,e)}},{key:"moveTo",value:function(t,e){return this.cropper.moveTo(t,e)}},{key:"zoom",value:function(t){return this.cropper.zoom(t)}},{key:"zoomTo",value:function(t){return this.cropper.zoomTo(t)}},{key:"rotate",value:function(t){return this.cropper.rotate(t)}},{key:"rotateTo",value:function(t){return this.cropper.rotateTo(t)}},{key:"enable",value:function(){return this.cropper.enable()}},{key:"disable",value:function(){return this.cropper.disable()}},{key:"reset",value:function(){return this.cropper.reset()}},{key:"clear",value:function(){return this.cropper.clear()}},{key:"replace",value:function(t,e){return this.cropper.replace(t,e)}},{key:"scale",value:function(t,e){return this.cropper.scale(t,e)}},{key:"scaleX",value:function(t){return this.cropper.scaleX(t)}},{key:"scaleY",value:function(t){return this.cropper.scaleY(t)}},{key:"render",value:function(){var t=this.props,e=t.src,n=t.alt,i=t.crossOrigin;return h.default.createElement("div",l({},this.props,{src:null,crossOrigin:null,alt:null}),h.default.createElement("img",{crossOrigin:i,ref:"img",src:e,alt:void 0===n?"picture":n,style:{opacity:0}}))}}]),e}(c.Component);b.propTypes={crossOrigin:c.PropTypes.string,src:c.PropTypes.string,alt:c.PropTypes.string,aspectRatio:c.PropTypes.number,dragMode:c.PropTypes.oneOf(["crop","move","none"]),data:c.PropTypes.shape({x:c.PropTypes.number,y:c.PropTypes.number,width:c.PropTypes.number,height:c.PropTypes.number,rotate:c.PropTypes.number,scaleX:c.PropTypes.number,scaleY:c.PropTypes.number}),scaleX:c.PropTypes.number,scaleY:c.PropTypes.number,enable:c.PropTypes.bool,cropBoxData:c.PropTypes.shape({left:c.PropTypes.number,top:c.PropTypes.number,width:c.PropTypes.number,hegiht:c.PropTypes.number}),canvasData:c.PropTypes.shape({left:c.PropTypes.number,top:c.PropTypes.number,width:c.PropTypes.number,hegiht:c.PropTypes.number}),zoomTo:c.PropTypes.number,moveTo:c.PropTypes.arrayOf(c.PropTypes.number),rotateTo:c.PropTypes.number,viewMode:c.PropTypes.oneOf([0,1,2,3]),preview:c.PropTypes.string,responsive:c.PropTypes.bool,restore:c.PropTypes.bool,checkCrossOrigin:c.PropTypes.bool,checkOrientation:c.PropTypes.bool,modal:c.PropTypes.bool,guides:c.PropTypes.bool,center:c.PropTypes.bool,highlight:c.PropTypes.bool,background:c.PropTypes.bool,autoCrop:c.PropTypes.bool,autoCropArea:c.PropTypes.number,movable:c.PropTypes.bool,rotatable:c.PropTypes.bool,scalable:c.PropTypes.bool,zoomable:c.PropTypes.bool,zoomOnTouch:c.PropTypes.bool,zoomOnWheel:c.PropTypes.bool,wheelZoomRation:c.PropTypes.number,cropBoxMovable:c.PropTypes.bool,cropBoxResizable:c.PropTypes.bool,toggleDragModeOnDblclick:c.PropTypes.bool,minContainerWidth:c.PropTypes.number,minContainerHeight:c.PropTypes.number,minCanvasWidth:c.PropTypes.number,minCanvasHeight:c.PropTypes.number,minCropBoxWidth:c.PropTypes.number,minCropBoxHeight:c.PropTypes.number,build:c.PropTypes.func,built:c.PropTypes.func,cropstart:c.PropTypes.func,cropmove:c.PropTypes.func,cropend:c.PropTypes.func,crop:c.PropTypes.func,zoom:c.PropTypes.func},b.defaultProps={src:null,dragMode:"crop",data:null,scaleX:1,scaleY:1,enable:!0,zoomTo:1,rotateTo:0},e.default=b},608:function(t,e,n){var i,r;/*!
	 * Cropper.js v0.5.6
	 * https://github.com/fengyuanchen/cropperjs
	 *
	 * Copyright (c) 2015-2016 Fengyuan Chen
	 * Released under the MIT license
	 *
	 * Date: 2016-01-18T05:33:43.542Z
	 */
!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("Cropper requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,o){"use strict";function a(t){return te.call(t).slice(8,-1).toLowerCase()}function s(t){return"number"==typeof t&&!isNaN(t)}function l(t){return"undefined"==typeof t}function u(t){return"object"==typeof t&&null!==t}function c(t){var e,n;if(!u(t))return!1;try{return e=t.constructor,n=e.prototype,e&&n&&ee.call(n,"isPrototypeOf")}catch(t){return!1}}function h(t){return"function"===a(t)}function d(t){return Q.isArray?Q.isArray(t):"array"===a(t)}function p(t,e){return e=e>=0?e:0,Q.from?Q.from(t).slice(e):ne.call(t,e)}function f(t){return"string"==typeof t&&(t=t.trim?t.trim():t.replace(xt,"$1")),t}function m(t,e){var n,i;if(t&&h(e))if(d(t)||s(t.length))for(i=0,n=t.length;i<n&&e.call(t,t[i],i,t)!==!1;i++);else if(u(t))for(i in t)if(t.hasOwnProperty(i)&&e.call(t,t[i],i,t)===!1)break;return t}function g(t){var e;if(arguments.length>1){if(e=p(arguments),Z.assign)return Z.assign.apply(Z,e);e.shift(),m(e,function(e){m(e,function(e,n){t[n]=e})})}return t}function v(t,e){var n=p(arguments,2);return function(){return t.apply(e,n.concat(p(arguments)))}}function b(t,e){var n=t.style;m(e,function(t,e){Et.test(e)&&s(t)&&(t+="px"),n[e]=t})}function y(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function w(t,e){var n;return s(t.length)?m(t,function(t){w(t,e)}):t.classList?t.classList.add(e):(n=f(t.className),void(n?n.indexOf(e)<0&&(t.className=n+" "+e):t.className=e))}function E(t,e){return s(t.length)?m(t,function(t){E(t,e)}):t.classList?t.classList.remove(e):void(t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function C(t,e,n){return s(t.length)?m(t,function(t){C(t,e,n)}):void(n?w(t,e):E(t,e))}function x(t,e){return u(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-"+e)}function _(t,e,n){u(n)&&l(t[e])?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-"+e,n)}function T(t,e){u(t[e])?delete t[e]:t.dataset?delete t.dataset[e]:t.removeAttribute("data-"+e)}function S(t,e,n){var i=f(e).split(_t);return i.length>1?m(i,function(e){S(t,e,n)}):void(t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n))}function A(t,e,n){var i=f(e).split(_t);return i.length>1?m(i,function(e){A(t,e,n)}):void(t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n))}function D(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function k(t){var e,i=t||n.event;return i.target||(i.target=i.srcElement||G),s(i.pageX)||(e=G.documentElement,i.pageX=i.clientX+(n.scrollX||e&&e.scrollLeft||0)-(e&&e.clientLeft||0),i.pageY=i.clientY+(n.scrollY||e&&e.scrollTop||0)-(e&&e.clientTop||0)),i}function N(t){var e=G.documentElement,i=t.getBoundingClientRect();return{left:i.left+(n.scrollX||e&&e.scrollLeft||0)-(e&&e.clientLeft||0),top:i.top+(n.scrollY||e&&e.scrollTop||0)-(e&&e.clientTop||0)}}function P(t){var e=t.length,n=0,i=0;return e&&(m(t,function(t){n+=t.pageX,i+=t.pageY}),n/=e,i/=e),{pageX:n,pageY:i}}function F(t,e){return t.getElementsByTagName(e)}function R(t,e){return t.getElementsByClassName?t.getElementsByClassName(e):t.querySelectorAll("."+e)}function M(t){return G.createElement(t)}function L(t,e){t.appendChild(e)}function I(t){t.parentNode&&t.parentNode.removeChild(t)}function B(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function O(t){var e=t.match(Ct);return e&&(e[1]!==$.protocol||e[2]!==$.hostname||e[3]!==$.port)}function j(t){var e="timestamp="+(new Date).getTime();return t+(t.indexOf("?")===-1?"?":"&")+e}function U(t,e){var n;return t.naturalWidth?e(t.naturalWidth,t.naturalHeight):(n=M("img"),n.onload=function(){e(this.width,this.height)},void(n.src=t.src))}function H(t){var e=[],n=t.rotate,i=t.scaleX,r=t.scaleY;return s(n)&&e.push("rotate("+n+"deg)"),s(i)&&s(r)&&e.push("scale("+i+","+r+")"),e.length?e.join(" "):"none"}function z(t,e){var n,i,r=Yt(t.degree)%180,o=(r>90?180-r:r)*Zt/180,a=Xt(o),s=Kt(o),l=t.width,u=t.height,c=t.aspectRatio;return e?(n=l/(s+a/c),i=n/c):(n=l*s+u*a,i=l*a+u*s),{width:n,height:i}}function W(t,e){var n,i,r,o=M("canvas"),a=o.getContext("2d"),l=0,u=0,c=e.naturalWidth,h=e.naturalHeight,d=e.rotate,p=e.scaleX,f=e.scaleY,m=s(p)&&s(f)&&(1!==p||1!==f),g=s(d)&&0!==d,v=g||m,b=c,y=h;return m&&(n=c/2,i=h/2),g&&(r=z({width:c,height:h,degree:d}),b=r.width,y=r.height,n=r.width/2,i=r.height/2),o.width=b,o.height=y,v&&(l=-c/2,u=-h/2,a.save(),a.translate(n,i)),g&&a.rotate(d*Zt/180),m&&a.scale(p,f),a.drawImage(t,Jt(l),Jt(u),Jt(c),Jt(h)),v&&a.restore(),o}function V(t,e,n){var i="",r=e;for(n+=e;r<n;r++)i+=ie(t.getUint8(r));return i}function q(t){var e,n,i,r,o,a,s,l,u,c,h=new DataView(t),d=h.byteLength;if(255===h.getUint8(0)&&216===h.getUint8(1))for(u=2;u<d;){if(255===h.getUint8(u)&&225===h.getUint8(u+1)){s=u;break}u++}if(s&&(n=s+4,i=s+10,"Exif"===V(h,n,4)&&(a=h.getUint16(i),o=18761===a,(o||19789===a)&&42===h.getUint16(i+2,o)&&(r=h.getUint32(i+4,o),r>=8&&(l=i+r)))),l)for(d=h.getUint16(l,o),c=0;c<d;c++)if(u=l+12*c+2,274===h.getUint16(u,o)){u+=8,e=h.getUint16(u,o),h.setUint16(u,1,o);break}return e}function Y(t){var e,n=t.replace(St,""),i=atob(n),r=i.length,o=new J(r),a=new Uint8Array(o);for(e=0;e<r;e++)a[e]=i.charCodeAt(e);return o}function X(t){var e,n=new Uint8Array(t),i=n.length,r="";for(e=0;e<i;e++)r+=ie(n[e]);return"data:image/jpeg;base64,"+btoa(r)}function K(t,e){var n=this;n.element=t,n.options=g({},K.DEFAULTS,c(e)&&e),n.ready=!1,n.built=!1,n.complete=!1,n.rotated=!1,n.cropped=!1,n.disabled=!1,n.replaced=!1,n.limited=!1,n.wheeling=!1,n.isImg=!1,n.originalUrl="",n.canvasData=null,n.cropBoxData=null,n.previews=null,n.init()}var G=n.document,$=n.location,J=n.ArrayBuffer,Z=n.Object,Q=n.Array,tt=n.String,et=n.Number,nt=n.Math,it="cropper",rt=it+"-modal",ot=it+"-hide",at=it+"-hidden",st=it+"-invisible",lt=it+"-move",ut=it+"-crop",ct=it+"-disabled",ht=it+"-bg",dt="mousedown touchstart pointerdown MSPointerDown",pt="mousemove touchmove pointermove MSPointerMove",ft="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",mt="wheel mousewheel DOMMouseScroll",gt="dblclick",vt="resize",bt="error",yt="load",wt=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/,Et=/width|height|left|top|marginLeft|marginTop/,Ct=/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i,xt=/^\s+(.*)\s+$/,_t=/\s+/,Tt=/^data\:/,St=/^data\:([^\;]+)\;base64,/,At=/^data\:image\/jpeg.*;base64,/,Dt="preview",kt="action",Nt="e",Pt="w",Ft="s",Rt="n",Mt="se",Lt="sw",It="ne",Bt="nw",Ot="all",jt="crop",Ut="move",Ht="zoom",zt="none",Wt=!!G.createElement("canvas").getContext,Vt=nt.min,qt=nt.max,Yt=nt.abs,Xt=nt.sin,Kt=nt.cos,Gt=nt.sqrt,$t=nt.round,Jt=nt.floor,Zt=nt.PI,Qt=Z.prototype,te=Qt.toString,ee=Qt.hasOwnProperty,ne=Q.prototype.slice,ie=tt.fromCharCode;K.prototype={constructor:K,init:function(){var t,e=this,n=e.element,i=n.tagName.toLowerCase();if(!x(n,it)){if(_(n,it,e),"img"===i){if(e.isImg=!0,e.originalUrl=t=n.getAttribute("src"),!t)return;t=n.src}else"canvas"===i&&Wt&&(t=n.toDataURL());e.load(t)}},load:function(t){var e,n=this,i=n.options;if(t&&(!h(i.build)||i.build.call(n.element)!==!1)){if(n.url=t,n.imageData={},!i.checkOrientation||!J)return n.clone();if(Tt.test(t))return At.test(t)?n.read(Y(t)):n.clone();e=new XMLHttpRequest,e.onerror=e.onabort=function(){n.clone()},e.onload=function(){n.read(this.response)},e.open("get",t),e.responseType="arraybuffer",e.send()}},read:function(t){var e,n,i,r=this,o=r.options,a=q(t),s=r.imageData;if(a>1)switch(r.url=X(t),a){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}o.rotatable&&(s.rotate=e),o.scalable&&(s.scaleX=n,s.scaleY=i),r.clone()},clone:function(){var t,e,n,i,r,o=this,a=o.element,s=o.url;o.options.checkCrossOrigin&&O(s)&&(t=a.crossOrigin,t?e=s:(t="anonymous",e=j(s))),o.crossOrigin=t,o.crossOriginUrl=e,n=M("img"),t&&(n.crossOrigin=t),n.src=e||s,o.image=n,o._start=i=v(o.start,o),o._stop=r=v(o.stop,o),o.isImg?a.complete?o.start():S(a,yt,i):(S(n,yt,i),S(n,bt,r),w(n,ot),a.parentNode.insertBefore(n,a.nextSibling))},start:function(t){var e=this,n=e.isImg?e.element:e.image;t&&(A(n,yt,e._start),A(n,bt,e._stop)),U(n,function(t,n){g(e.imageData,{naturalWidth:t,naturalHeight:n,aspectRatio:t/n}),e.ready=!0,e.build()})},stop:function(){var t=this,e=t.image;A(e,yt,t._start),A(e,bt,t._stop),I(e),t.image=null},build:function(){var t,e,n,i,r,o,a,s=this,l=s.options,u=s.element,c=s.image;s.ready&&(s.built&&s.unbuild(),e=M("div"),e.innerHTML=K.TEMPLATE,s.container=t=u.parentNode,s.cropper=n=R(e,"cropper-container")[0],s.canvas=i=R(n,"cropper-canvas")[0],s.dragBox=r=R(n,"cropper-drag-box")[0],s.cropBox=o=R(n,"cropper-crop-box")[0],s.viewBox=R(n,"cropper-view-box")[0],s.face=a=R(o,"cropper-face")[0],L(i,c),w(u,at),t.insertBefore(n,u.nextSibling),s.isImg||E(c,ot),s.initPreview(),s.bind(),l.aspectRatio=qt(0,l.aspectRatio)||NaN,l.viewMode=qt(0,Vt(3,$t(l.viewMode)))||0,l.autoCrop?(s.cropped=!0,l.modal&&w(r,rt)):w(o,at),l.guides||w(R(o,"cropper-dashed"),at),l.center||w(R(o,"cropper-center"),at),l.background&&w(n,ht),l.highlight||w(a,st),l.cropBoxMovable&&(w(a,lt),_(a,kt,Ot)),l.cropBoxResizable||(w(R(o,"cropper-line"),at),w(R(o,"cropper-point"),at)),s.setDragMode(l.dragMode),s.render(),s.built=!0,s.setData(l.data),setTimeout(function(){h(l.built)&&l.built.call(u),h(l.crop)&&l.crop.call(u,s.getData()),s.complete=!0},0))},unbuild:function(){var t=this;t.built&&(t.built=!1,t.complete=!1,t.initialImageData=null,t.initialCanvasData=null,t.initialCropBoxData=null,t.containerData=null,t.canvasData=null,t.cropBoxData=null,t.unbind(),t.resetPreview(),t.previews=null,t.viewBox=null,t.cropBox=null,t.dragBox=null,t.canvas=null,t.container=null,I(t.cropper),t.cropper=null)},render:function(){var t=this;t.initContainer(),t.initCanvas(),t.initCropBox(),t.renderCanvas(),t.cropped&&t.renderCropBox()},initContainer:function(){var t,e=this,n=e.options,i=e.element,r=e.container,o=e.cropper;w(o,at),E(i,at),e.containerData=t={width:qt(r.offsetWidth,et(n.minContainerWidth)||200),height:qt(r.offsetHeight,et(n.minContainerHeight)||100)},b(o,{width:t.width,height:t.height}),w(i,at),E(o,at)},initCanvas:function(){var t,e=this,n=e.options.viewMode,i=e.containerData,r=e.imageData,o=90===Yt(r.rotate),a=o?r.naturalHeight:r.naturalWidth,s=o?r.naturalWidth:r.naturalHeight,l=a/s,u=i.width,c=i.height;i.height*l>i.width?3===n?u=i.height*l:c=i.width/l:3===n?c=i.width/l:u=i.height*l,t={naturalWidth:a,naturalHeight:s,aspectRatio:l,width:u,height:c},t.oldLeft=t.left=(i.width-u)/2,t.oldTop=t.top=(i.height-c)/2,e.canvasData=t,e.limited=1===n||2===n,e.limitCanvas(!0,!0),e.initialImageData=g({},r),e.initialCanvasData=g({},t)},limitCanvas:function(t,e){var n,i,r,o,a=this,s=a.options,l=s.viewMode,u=a.containerData,c=a.canvasData,h=c.aspectRatio,d=a.cropBoxData,p=a.cropped&&d;t&&(n=et(s.minCanvasWidth)||0,i=et(s.minCanvasHeight)||0,l>1?(n=qt(n,u.width),i=qt(i,u.height),3===l&&(i*h>n?n=i*h:i=n/h)):l>0&&(n?n=qt(n,p?d.width:0):i?i=qt(i,p?d.height:0):p&&(n=d.width,i=d.height,i*h>n?n=i*h:i=n/h)),n&&i?i*h>n?i=n/h:n=i*h:n?i=n/h:i&&(n=i*h),c.minWidth=n,c.minHeight=i,c.maxWidth=1/0,c.maxHeight=1/0),e&&(l?(r=u.width-c.width,o=u.height-c.height,c.minLeft=Vt(0,r),c.minTop=Vt(0,o),c.maxLeft=qt(0,r),c.maxTop=qt(0,o),p&&a.limited&&(c.minLeft=Vt(d.left,d.left+d.width-c.width),c.minTop=Vt(d.top,d.top+d.height-c.height),c.maxLeft=d.left,c.maxTop=d.top,2===l&&(c.width>=u.width&&(c.minLeft=Vt(0,r),c.maxLeft=qt(0,r)),c.height>=u.height&&(c.minTop=Vt(0,o),c.maxTop=qt(0,o))))):(c.minLeft=-c.width,c.minTop=-c.height,c.maxLeft=u.width,c.maxTop=u.height))},renderCanvas:function(t){var e,n,i=this,r=i.canvasData,o=i.imageData,a=o.rotate;i.rotated&&(i.rotated=!1,n=z({width:o.width,height:o.height,degree:a}),e=n.width/n.height,e!==r.aspectRatio&&(r.left-=(n.width-r.width)/2,r.top-=(n.height-r.height)/2,r.width=n.width,r.height=n.height,r.aspectRatio=e,r.naturalWidth=o.naturalWidth,r.naturalHeight=o.naturalHeight,a%180&&(n=z({width:o.naturalWidth,height:o.naturalHeight,degree:a}),r.naturalWidth=n.width,r.naturalHeight=n.height),i.limitCanvas(!0,!1))),(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Vt(qt(r.width,r.minWidth),r.maxWidth),r.height=Vt(qt(r.height,r.minHeight),r.maxHeight),i.limitCanvas(!1,!0),r.oldLeft=r.left=Vt(qt(r.left,r.minLeft),r.maxLeft),r.oldTop=r.top=Vt(qt(r.top,r.minTop),r.maxTop),b(i.canvas,{width:r.width,height:r.height,left:r.left,top:r.top}),i.renderImage(),i.cropped&&i.limited&&i.limitCropBox(!0,!0),t&&i.output()},renderImage:function(t){var e,n,i,r,o,a=this,s=a.canvasData,l=a.imageData;l.rotate&&(n=z({width:s.width,height:s.height,degree:l.rotate,aspectRatio:l.aspectRatio},!0),i=n.width,r=n.height,e={width:i,height:r,left:(s.width-i)/2,top:(s.height-r)/2}),g(l,e||{width:s.width,height:s.height,left:0,top:0}),o=H(l),b(a.image,{width:l.width,height:l.height,marginLeft:l.left,marginTop:l.top,WebkitTransform:o,msTransform:o,transform:o}),t&&a.output()},initCropBox:function(){var t=this,e=t.options,n=e.aspectRatio,i=et(e.autoCropArea)||.8,r=t.canvasData,o={width:r.width,height:r.height};n&&(r.height*n>r.width?o.height=o.width/n:o.width=o.height*n),t.cropBoxData=o,t.limitCropBox(!0,!0),o.width=Vt(qt(o.width,o.minWidth),o.maxWidth),o.height=Vt(qt(o.height,o.minHeight),o.maxHeight),o.width=qt(o.minWidth,o.width*i),o.height=qt(o.minHeight,o.height*i),o.oldLeft=o.left=r.left+(r.width-o.width)/2,o.oldTop=o.top=r.top+(r.height-o.height)/2,t.initialCropBoxData=g({},o)},limitCropBox:function(t,e){var n,i,r,o,a=this,s=a.options,l=s.aspectRatio,u=a.containerData,c=a.canvasData,h=a.cropBoxData,d=a.limited;t&&(n=et(s.minCropBoxWidth)||0,i=et(s.minCropBoxHeight)||0,n=Vt(n,u.width),i=Vt(i,u.height),r=Vt(u.width,d?c.width:u.width),o=Vt(u.height,d?c.height:u.height),l&&(n&&i?i*l>n?i=n/l:n=i*l:n?i=n/l:i&&(n=i*l),o*l>r?o=r/l:r=o*l),h.minWidth=Vt(n,r),h.minHeight=Vt(i,o),h.maxWidth=r,h.maxHeight=o),e&&(d?(h.minLeft=qt(0,c.left),h.minTop=qt(0,c.top),h.maxLeft=Vt(u.width,c.left+c.width)-h.width,h.maxTop=Vt(u.height,c.top+c.height)-h.height):(h.minLeft=0,h.minTop=0,h.maxLeft=u.width-h.width,h.maxTop=u.height-h.height))},renderCropBox:function(){var t=this,e=t.options,n=t.containerData,i=t.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Vt(qt(i.width,i.minWidth),i.maxWidth),i.height=Vt(qt(i.height,i.minHeight),i.maxHeight),t.limitCropBox(!1,!0),i.oldLeft=i.left=Vt(qt(i.left,i.minLeft),i.maxLeft),i.oldTop=i.top=Vt(qt(i.top,i.minTop),i.maxTop),e.movable&&e.cropBoxMovable&&_(t.face,kt,i.width===n.width&&i.height===n.height?Ut:Ot),b(t.cropBox,{width:i.width,height:i.height,left:i.left,top:i.top}),t.cropped&&t.limited&&t.limitCanvas(!0,!0),t.disabled||t.output()},output:function(){var t=this,e=t.options;t.preview(),t.complete&&h(e.crop)&&e.crop.call(t.element,t.getData())},initPreview:function(){var t,e=this,n=e.options.preview,i=M("img"),r=e.crossOrigin,o=r?e.crossOriginUrl:e.url;r&&(i.crossOrigin=r),i.src=o,L(e.viewBox,i),n&&(e.previews=t=G.querySelectorAll(n),m(t,function(t){var e=M("img");_(t,Dt,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),r&&(e.crossOrigin=r),e.src=o,e.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',B(t),L(t,e)}))},resetPreview:function(){m(this.previews,function(t){var e=x(t,Dt);b(t,{width:e.width,height:e.height}),t.innerHTML=e.html,T(t,Dt)})},preview:function(){var t=this,e=t.imageData,n=t.canvasData,i=t.cropBoxData,r=i.width,o=i.height,a=e.width,s=e.height,l=i.left-n.left-e.left,u=i.top-n.top-e.top,c=H(e),h={WebkitTransform:c,msTransform:c,transform:c};t.cropped&&!t.disabled&&(b(F(t.viewBox,"img")[0],g({width:a,height:s,marginLeft:-l,marginTop:-u},h)),m(t.previews,function(t){var e=x(t,Dt),n=e.width,i=e.height,c=n,d=i,p=1;r&&(p=n/r,d=o*p),o&&d>i&&(p=i/o,c=r*p,d=i),b(t,{width:c,height:d}),b(F(t,"img")[0],g({width:a*p,height:s*p,marginLeft:-l*p,marginTop:-u*p},h))}))},bind:function(){var t=this,e=t.options,i=t.cropper;S(i,dt,t._cropStart=v(t.cropStart,t)),e.zoomable&&e.zoomOnWheel&&S(i,mt,t._wheel=v(t.wheel,t)),e.toggleDragModeOnDblclick&&S(i,gt,t._dblclick=v(t.dblclick,t)),S(G,pt,t._cropMove=v(t.cropMove,t)),S(G,ft,t._cropEnd=v(t.cropEnd,t)),e.responsive&&S(n,vt,t._resize=v(t.resize,t))},unbind:function(){var t=this,e=t.options,i=t.cropper;A(i,dt,t._cropStart),e.zoomable&&e.zoomOnWheel&&A(i,mt,t._wheel),e.toggleDragModeOnDblclick&&A(i,gt,t._dblclick),A(G,pt,t._cropMove),A(G,ft,t._cropEnd),e.responsive&&A(n,vt,t._resize)},resize:function(){var t,e,n,i=this,r=i.options.restore,o=i.container,a=i.containerData;!i.disabled&&a&&(n=o.offsetWidth/a.width,1===n&&o.offsetHeight===a.height||(r&&(t=i.getCanvasData(),e=i.getCropBoxData()),i.render(),r&&(i.setCanvasData(m(t,function(e,i){t[i]=e*n})),i.setCropBoxData(m(e,function(t,i){e[i]=t*n})))))},dblclick:function(){var t=this;t.disabled||t.setDragMode(y(t.dragBox,ut)?Ut:jt)},wheel:function(t){var e=this,n=k(t),i=et(e.options.wheelZoomRatio)||.1,r=1;e.disabled||(D(n),e.wheeling||(e.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),n.deltaY?r=n.deltaY>0?1:-1:n.wheelDelta?r=-n.wheelDelta/120:n.detail&&(r=n.detail>0?1:-1),e.zoom(-r*i,n)))},cropStart:function(t){var e,n,i,r=this,o=r.options,a=k(t),s=a.touches;if(!r.disabled){if(s){if(e=s.length,e>1){if(!o.zoomable||!o.zoomOnTouch||2!==e)return;n=s[1],r.startX2=n.pageX,r.startY2=n.pageY,i=Ht}n=s[0]}if(i=i||x(a.target,kt),wt.test(i)){if(h(o.cropstart)&&o.cropstart.call(r.element,{originalEvent:a,action:i})===!1)return;D(a),r.action=i,r.cropping=!1,r.startX=n?n.pageX:a.pageX,r.startY=n?n.pageY:a.pageY,i===jt&&(r.cropping=!0,w(r.dragBox,rt))}}},cropMove:function(t){var e,n,i=this,r=i.options,o=k(t),a=o.touches,s=i.action;if(!i.disabled){if(a){if(e=a.length,e>1){if(!r.zoomable||!r.zoomOnTouch||2!==e)return;n=a[1],i.endX2=n.pageX,i.endY2=n.pageY}n=a[0]}if(s){if(h(r.cropmove)&&r.cropmove.call(i.element,{originalEvent:o,action:s})===!1)return;D(o),i.endX=n?n.pageX:o.pageX,i.endY=n?n.pageY:o.pageY,i.change(o.shiftKey,s===Ht?o:null)}}},cropEnd:function(t){var e=this,n=e.options,i=k(t),r=e.action;e.disabled||r&&(D(i),e.cropping&&(e.cropping=!1,C(e.dragBox,rt,e.cropped&&n.modal)),e.action="",h(n.cropend)&&n.cropend.call(e.element,{originalEvent:i,action:r}))},change:function(t,e){var n,i,r=this,o=r.options,a=o.aspectRatio,s=r.action,l=r.containerData,u=r.canvasData,c=r.cropBoxData,h=c.width,d=c.height,p=c.left,f=c.top,m=p+h,g=f+d,v=0,b=0,y=l.width,w=l.height,C=!0;switch(!a&&t&&(a=h&&d?h/d:1),r.limited&&(v=c.minLeft,b=c.minTop,y=v+Vt(l.width,u.width),w=b+Vt(l.height,u.height)),i={x:r.endX-r.startX,y:r.endY-r.startY},a&&(i.X=i.y*a,i.Y=i.x/a),s){case Ot:p+=i.x,f+=i.y;break;case Nt:if(i.x>=0&&(m>=y||a&&(f<=b||g>=w))){C=!1;break}h+=i.x,a&&(d=h/a,f-=i.Y/2),h<0&&(s=Pt,h=0);break;case Rt:if(i.y<=0&&(f<=b||a&&(p<=v||m>=y))){C=!1;break}d-=i.y,f+=i.y,a&&(h=d*a,p+=i.X/2),d<0&&(s=Ft,d=0);break;case Pt:if(i.x<=0&&(p<=v||a&&(f<=b||g>=w))){C=!1;break}h-=i.x,p+=i.x,a&&(d=h/a,f+=i.Y/2),h<0&&(s=Nt,h=0);break;case Ft:if(i.y>=0&&(g>=w||a&&(p<=v||m>=y))){C=!1;break}d+=i.y,a&&(h=d*a,p-=i.X/2),d<0&&(s=Rt,d=0);break;case It:if(a){if(i.y<=0&&(f<=b||m>=y)){C=!1;break}d-=i.y,f+=i.y,h=d*a}else i.x>=0?m<y?h+=i.x:i.y<=0&&f<=b&&(C=!1):h+=i.x,i.y<=0?f>b&&(d-=i.y,f+=i.y):(d-=i.y,f+=i.y);h<0&&d<0?(s=Lt,d=0,h=0):h<0?(s=Bt,h=0):d<0&&(s=Mt,d=0);break;case Bt:if(a){if(i.y<=0&&(f<=b||p<=v)){C=!1;break}d-=i.y,f+=i.y,h=d*a,p+=i.X}else i.x<=0?p>v?(h-=i.x,p+=i.x):i.y<=0&&f<=b&&(C=!1):(h-=i.x,p+=i.x),i.y<=0?f>b&&(d-=i.y,f+=i.y):(d-=i.y,f+=i.y);h<0&&d<0?(s=Mt,d=0,h=0):h<0?(s=It,h=0):d<0&&(s=Lt,d=0);break;case Lt:if(a){if(i.x<=0&&(p<=v||g>=w)){C=!1;break}h-=i.x,p+=i.x,d=h/a}else i.x<=0?p>v?(h-=i.x,p+=i.x):i.y>=0&&g>=w&&(C=!1):(h-=i.x,p+=i.x),i.y>=0?g<w&&(d+=i.y):d+=i.y;h<0&&d<0?(s=It,d=0,h=0):h<0?(s=Mt,h=0):d<0&&(s=Bt,d=0);break;case Mt:if(a){if(i.x>=0&&(m>=y||g>=w)){C=!1;break}h+=i.x,d=h/a}else i.x>=0?m<y?h+=i.x:i.y>=0&&g>=w&&(C=!1):h+=i.x,i.y>=0?g<w&&(d+=i.y):d+=i.y;h<0&&d<0?(s=Bt,d=0,h=0):h<0?(s=Lt,h=0):d<0&&(s=It,d=0);break;case Ut:r.move(i.x,i.y),C=!1;break;case Ht:r.zoom(function(t,e,n,i){var r=Gt(t*t+e*e),o=Gt(n*n+i*i);return(o-r)/r}(Yt(r.startX-r.startX2),Yt(r.startY-r.startY2),Yt(r.endX-r.endX2),Yt(r.endY-r.endY2)),e),r.startX2=r.endX2,r.startY2=r.endY2,C=!1;break;case jt:if(!i.x||!i.y){C=!1;break}n=N(r.cropper),p=r.startX-n.left,f=r.startY-n.top,h=c.minWidth,d=c.minHeight,i.x>0?s=i.y>0?Mt:It:i.x<0&&(p-=h,s=i.y>0?Lt:Bt),i.y<0&&(f-=d),r.cropped||(E(r.cropBox,at),r.cropped=!0,r.limited&&r.limitCropBox(!0,!0))}C&&(c.width=h,c.height=d,c.left=p,c.top=f,r.action=s,r.renderCropBox()),r.startX=r.endX,r.startY=r.endY},crop:function(){var t=this;return t.built&&!t.disabled&&(t.cropped||(t.cropped=!0,t.limitCropBox(!0,!0),t.options.modal&&w(t.dragBox,rt),E(t.cropBox,at)),t.setCropBoxData(t.initialCropBoxData)),t},reset:function(){var t=this;return t.built&&!t.disabled&&(t.imageData=g({},t.initialImageData),t.canvasData=g({},t.initialCanvasData),t.cropBoxData=g({},t.initialCropBoxData),t.renderCanvas(),t.cropped&&t.renderCropBox()),t},clear:function(){var t=this;return t.cropped&&!t.disabled&&(g(t.cropBoxData,{left:0,top:0,width:0,height:0}),t.cropped=!1,t.renderCropBox(),t.limitCanvas(),t.renderCanvas(),E(t.dragBox,rt),w(t.cropBox,at)),t},replace:function(t){var e=this;return!e.disabled&&t&&(e.isImg&&(e.replaced=!0,e.element.src=t),e.options.data=null,e.load(t)),e},enable:function(){var t=this;return t.built&&(t.disabled=!1,E(t.cropper,ct)),t},disable:function(){var t=this;return t.built&&(t.disabled=!0,w(t.cropper,ct)),t},destroy:function(){var t=this,e=t.element,n=t.image;return t.ready?(t.isImg&&t.replaced&&(e.src=t.originalUrl),t.unbuild(),E(e,at)):t.isImg?A(e,yt,t.start):n&&I(n),T(e,it),t},move:function(t,e){var n=this,i=n.canvasData;return n.moveTo(l(t)?t:i.left+et(t),l(e)?e:i.top+et(e))},moveTo:function(t,e){var n=this,i=n.canvasData,r=!1;return l(e)&&(e=t),t=et(t),e=et(e),n.built&&!n.disabled&&n.options.movable&&(s(t)&&(i.left=t,r=!0),s(e)&&(i.top=e,r=!0),r&&n.renderCanvas(!0)),n},zoom:function(t,e){var n=this,i=n.canvasData;return t=et(t),t=t<0?1/(1-t):1+t,n.zoomTo(i.width*t/i.naturalWidth,e)},zoomTo:function(t,e){var n,i,r,o,a=this,s=a.options,l=a.canvasData,u=l.width,c=l.height,d=l.naturalWidth,p=l.naturalHeight;if(t=et(t),t>=0&&a.built&&!a.disabled&&s.zoomable){if(n=d*t,i=p*t,h(s.zoom)&&s.zoom.call(a.element,{originalEvent:e,oldRatio:u/d,ratio:n/d})===!1)return a;e?(r=N(a.cropper),o=e.touches?P(e.touches):{pageX:e.pageX,pageY:e.pageY},l.left-=(n-u)*((o.pageX-r.left-l.left)/u),l.top-=(i-c)*((o.pageY-r.top-l.top)/c)):(l.left-=(n-u)/2,l.top-=(i-c)/2),l.width=n,l.height=i,a.renderCanvas(!0)}return a},rotate:function(t){var e=this;return e.rotateTo((e.imageData.rotate||0)+et(t))},rotateTo:function(t){var e=this;return t=et(t),s(t)&&e.built&&!e.disabled&&e.options.rotatable&&(e.imageData.rotate=t%360,e.rotated=!0,e.renderCanvas(!0)),e},scale:function(t,e){var n=this,i=n.imageData,r=!1;return l(e)&&(e=t),t=et(t),e=et(e),n.built&&!n.disabled&&n.options.scalable&&(s(t)&&(i.scaleX=t,r=!0),s(e)&&(i.scaleY=e,r=!0),r&&n.renderImage(!0)),n},scaleX:function(t){var e=this,n=e.imageData.scaleY;return e.scale(t,s(n)?n:1)},scaleY:function(t){var e=this,n=e.imageData.scaleX;return e.scale(s(n)?n:1,t)},getData:function(t){var e,n,i=this,r=i.options,o=i.imageData,a=i.canvasData,s=i.cropBoxData;return i.built&&i.cropped?(n={x:s.left-a.left,y:s.top-a.top,width:s.width,height:s.height},e=o.width/o.naturalWidth,m(n,function(i,r){i/=e,n[r]=t?$t(i):i})):n={x:0,y:0,width:0,height:0},r.rotatable&&(n.rotate=o.rotate||0),r.scalable&&(n.scaleX=o.scaleX||1,n.scaleY=o.scaleY||1),n},setData:function(t){var e,n,i,r=this,o=r.options,a=r.imageData,l=r.canvasData,u={};return h(t)&&(t=t.call(r.element)),r.built&&!r.disabled&&c(t)&&(o.rotatable&&s(t.rotate)&&t.rotate!==a.rotate&&(a.rotate=t.rotate,r.rotated=e=!0),o.scalable&&(s(t.scaleX)&&t.scaleX!==a.scaleX&&(a.scaleX=t.scaleX,n=!0),s(t.scaleY)&&t.scaleY!==a.scaleY&&(a.scaleY=t.scaleY,n=!0)),e?r.renderCanvas():n&&r.renderImage(),i=a.width/a.naturalWidth,s(t.x)&&(u.left=t.x*i+l.left),s(t.y)&&(u.top=t.y*i+l.top),s(t.width)&&(u.width=t.width*i),s(t.height)&&(u.height=t.height*i),r.setCropBoxData(u)),r},getContainerData:function(){var t=this;return t.built?t.containerData:{}},getImageData:function(){var t=this;return t.ready?t.imageData:{}},getCanvasData:function(){var t=this,e=t.canvasData,n={};return t.built&&m(["left","top","width","height","naturalWidth","naturalHeight"],function(t){n[t]=e[t]}),n},setCanvasData:function(t){var e=this,n=e.canvasData,i=n.aspectRatio;return h(t)&&(t=t.call(e.element)),e.built&&!e.disabled&&c(t)&&(s(t.left)&&(n.left=t.left),s(t.top)&&(n.top=t.top),s(t.width)?(n.width=t.width,n.height=t.width/i):s(t.height)&&(n.height=t.height,n.width=t.height*i),e.renderCanvas(!0)),e},getCropBoxData:function(){var t,e=this,n=e.cropBoxData;return e.built&&e.cropped&&(t={left:n.left,top:n.top,width:n.width,height:n.height}),t||{}},setCropBoxData:function(t){var e,n,i=this,r=i.cropBoxData,o=i.options.aspectRatio;return h(t)&&(t=t.call(i.element)),i.built&&i.cropped&&!i.disabled&&c(t)&&(s(t.left)&&(r.left=t.left),s(t.top)&&(r.top=t.top),s(t.width)&&(e=!0,r.width=t.width),s(t.height)&&(n=!0,r.height=t.height),o&&(e?r.height=r.width/o:n&&(r.width=r.height*o)),i.renderCropBox()),i},getCroppedCanvas:function(t){var e,n,i,r,o,a,s,l,u,h,d,p=this;if(p.built&&p.cropped&&Wt)return c(t)||(t={}),d=p.getData(),e=d.width,n=d.height,l=e/n,c(t)&&(o=t.width,a=t.height,o?(a=o/l,s=o/e):a&&(o=a*l,s=a/n)),i=Jt(o||e),r=Jt(a||n),u=M("canvas"),u.width=i,u.height=r,h=u.getContext("2d"),t.fillColor&&(h.fillStyle=t.fillColor,h.fillRect(0,0,i,r)),h.drawImage.apply(h,function(){var t,i,r,o,a,l,u=W(p.image,p.imageData),c=u.width,h=u.height,f=[u],m=d.x,g=d.y;return m<=-e||m>c?m=t=r=a=0:m<=0?(r=-m,m=0,t=a=Vt(c,e+m)):m<=c&&(r=0,t=a=Vt(e,c-m)),t<=0||g<=-n||g>h?g=i=o=l=0:g<=0?(o=-g,g=0,i=l=Vt(h,n+g)):g<=h&&(o=0,i=l=Vt(n,h-g)),f.push(Jt(m),Jt(g),Jt(t),Jt(i)),s&&(r*=s,o*=s,a*=s,l*=s),a>0&&l>0&&f.push(Jt(r),Jt(o),Jt(a),Jt(l)),f}.call(p)),u},setAspectRatio:function(t){var e=this,n=e.options;return e.disabled||l(t)||(n.aspectRatio=qt(0,t)||NaN,e.built&&(e.initCropBox(),e.cropped&&e.renderCropBox())),e},setDragMode:function(t){var e,n,i=this,r=i.options,o=i.dragBox,a=i.face;return i.ready&&!i.disabled&&(e=t===jt,n=r.movable&&t===Ut,t=e||n?t:zt,_(o,kt,t),C(o,ut,e),C(o,lt,n),r.cropBoxMovable||(_(a,kt,t),C(a,ut,e),C(a,lt,n))),i}},K.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},K.TEMPLATE=function(t,e){return e=e.split(","),t.replace(/\d+/g,function(t){return e[t]})}('<0 6="5-container"><0 6="5-wrap-9"><0 6="5-canvas"></0></0><0 6="5-drag-9"></0><0 6="5-crop-9"><1 6="5-view-9"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-center"></1><1 6="5-face"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,action,data,point,cropper,class,line,dashed,box");var re=n.Cropper;return K.noConflict=function(){return n.Cropper=re,K},K.setDefaults=function(t){g(K.DEFAULTS,t)},i=[],r=function(){return K}.apply(e,i),!(void 0!==r&&(t.exports=r)),o||(n.Cropper=K),K})},609:function(t,e,i){var r,o;(function(){function i(t){return!!t.exifdata}function a(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(t),i=n.length,r=new ArrayBuffer(i),o=new Uint8Array(r),a=0;a<i;a++)o[a]=n.charCodeAt(a);return r}function s(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(t){200!=this.status&&0!==this.status||e(this.response)},n.send()}function l(t,e){function n(n){var i=u(n),r=c(n);t.exifdata=i||{},t.iptcdata=r||{},e&&e.call(t)}if(t.src)if(/^data\:/i.test(t.src)){var i=a(t.src);n(i)}else if(/^blob\:/i.test(t.src)){var r=new FileReader;r.onload=function(t){n(t.target.result)},s(t.src,function(t){r.readAsArrayBuffer(t)})}else{var o=new XMLHttpRequest;o.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(o.response),o=null},o.open("GET",t.src,!0),o.responseType="arraybuffer",o.send(null)}else if(window.FileReader&&(t instanceof window.Blob||t instanceof window.File)){var r=new FileReader;r.onload=function(t){g&&console.log("Got file of length "+t.target.result.byteLength),n(t.target.result)},r.readAsArrayBuffer(t)}}function u(t){var e=new DataView(t);if(g&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return g&&console.log("Not a valid JPEG"),!1;for(var n,i=2,r=t.byteLength;i<r;){if(255!=e.getUint8(i))return g&&console.log("Not a valid marker at offset "+i+", found: "+e.getUint8(i)),!1;if(n=e.getUint8(i+1),g&&console.log(n),225==n)return g&&console.log("Found 0xFFE1 marker"),m(e,i+4,e.getUint16(i+2)-2);i+=2+e.getUint16(i+2)}}function c(t){var e=new DataView(t);if(g&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return g&&console.log("Not a valid JPEG"),!1;for(var n=2,i=t.byteLength,r=function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)};n<i;){if(r(e,n)){var o=e.getUint8(n+7);o%2!==0&&(o+=1),0===o&&(o=4);var a=n+8+o,s=e.getUint16(n+6+o);return h(t,a,s)}n++}}function h(t,e,n){for(var i,r,o,a,s,l=new DataView(t),u={},c=e;c<e+n;)28===l.getUint8(c)&&2===l.getUint8(c+1)&&(a=l.getUint8(c+2),a in C&&(o=l.getInt16(c+3),s=o+5,r=C[a],i=f(l,c+5,o),u.hasOwnProperty(r)?u[r]instanceof Array?u[r].push(i):u[r]=[u[r],i]:u[r]=i)),c++;return u}function d(t,e,n,i,r){var o,a,s,l=t.getUint16(n,!r),u={};for(s=0;s<l;s++)o=n+12*s+2,a=i[t.getUint16(o,!r)],!a&&g&&console.log("Unknown tag: "+t.getUint16(o,!r)),u[a]=p(t,o,e,n,r);return u}function p(t,e,n,i,r){var o,a,s,l,u,c,h=t.getUint16(e+2,!r),d=t.getUint32(e+4,!r),p=t.getUint32(e+8,!r)+n;switch(h){case 1:case 7:if(1==d)return t.getUint8(e+8,!r);for(o=d>4?p:e+8,a=[],l=0;l<d;l++)a[l]=t.getUint8(o+l);return a;case 2:return o=d>4?p:e+8,f(t,o,d-1);case 3:if(1==d)return t.getUint16(e+8,!r);for(o=d>2?p:e+8,a=[],l=0;l<d;l++)a[l]=t.getUint16(o+2*l,!r);return a;case 4:if(1==d)return t.getUint32(e+8,!r);for(a=[],l=0;l<d;l++)a[l]=t.getUint32(p+4*l,!r);return a;case 5:if(1==d)return u=t.getUint32(p,!r),c=t.getUint32(p+4,!r),s=new Number(u/c),s.numerator=u,s.denominator=c,s;for(a=[],l=0;l<d;l++)u=t.getUint32(p+8*l,!r),c=t.getUint32(p+4+8*l,!r),a[l]=new Number(u/c),a[l].numerator=u,a[l].denominator=c;return a;case 9:if(1==d)return t.getInt32(e+8,!r);for(a=[],l=0;l<d;l++)a[l]=t.getInt32(p+4*l,!r);return a;case 10:if(1==d)return t.getInt32(p,!r)/t.getInt32(p+4,!r);for(a=[],l=0;l<d;l++)a[l]=t.getInt32(p+8*l,!r)/t.getInt32(p+4+8*l,!r);return a}}function f(t,e,i){var r="";for(n=e;n<e+i;n++)r+=String.fromCharCode(t.getUint8(n));return r}function m(t,e){if("Exif"!=f(t,e,4))return g&&console.log("Not valid EXIF data! "+f(t,e,4)),!1;var n,i,r,o,a,s=e+6;if(18761==t.getUint16(s))n=!1;else{if(19789!=t.getUint16(s))return g&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),
!1;n=!0}if(42!=t.getUint16(s+2,!n))return g&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var l=t.getUint32(s+4,!n);if(l<8)return g&&console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(s+4,!n)),!1;if(i=d(t,s,s+l,y,n),i.ExifIFDPointer){o=d(t,s,s+i.ExifIFDPointer,b,n);for(r in o){switch(r){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[r]=E[r][o[r]];break;case"ExifVersion":case"FlashpixVersion":o[r]=String.fromCharCode(o[r][0],o[r][1],o[r][2],o[r][3]);break;case"ComponentsConfiguration":o[r]=E.Components[o[r][0]]+E.Components[o[r][1]]+E.Components[o[r][2]]+E.Components[o[r][3]]}i[r]=o[r]}}if(i.GPSInfoIFDPointer){a=d(t,s,s+i.GPSInfoIFDPointer,w,n);for(r in a){switch(r){case"GPSVersionID":a[r]=a[r][0]+"."+a[r][1]+"."+a[r][2]+"."+a[r][3]}i[r]=a[r]}}return i}var g=!1,v=function(t){return t instanceof v?t:this instanceof v?void(this.EXIFwrapped=t):new v(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=v),e.EXIF=v;var b=v.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},y=v.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},w=v.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},E=v.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},C={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};v.getData=function(t,e){return!((t instanceof Image||t instanceof HTMLImageElement)&&!t.complete)&&(i(t)?e&&e.call(t):l(t,e),!0)},v.getTag=function(t,e){if(i(t))return t.exifdata[e]},v.getAllTags=function(t){if(!i(t))return{};var e,n=t.exifdata,r={};for(e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r},v.pretty=function(t){if(!i(t))return"";var e,n=t.exifdata,r="";for(e in n)n.hasOwnProperty(e)&&(r+="object"==typeof n[e]?n[e]instanceof Number?e+" : "+n[e]+" ["+n[e].numerator+"/"+n[e].denominator+"]\r\n":e+" : ["+n[e].length+" values]\r\n":e+" : "+n[e]+"\r\n");return r},v.readFromBinaryFile=function(t){return u(t)},r=[],o=function(){return v}.apply(e,r),!(void 0!==o&&(t.exports=o))}).call(this)},610:function(t,e){!function(n){if("object"==typeof e&&"undefined"!=typeof t)t.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.pica=n()}}(function(){return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";e.exports=function(){return document.createElement("canvas")}},{}],2:[function(t,e,n){"use strict";var i=1;e.exports=function(){return i++}},{}],3:[function(t,e,n){"use strict";function i(t){this.create=t,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0}var r=2e3,o=500;i.prototype.acquire=function(){var t,e=this;return 0!==this.available.length?t=this.available.pop():(t=this.create(),t.id=this.lastId++,t.release=function(){e.release(t)}),this.acquired[t.id]=t,t},i.prototype.release=function(t){delete this.acquired[t.id],t.lastUsed=Date.now(),this.available.push(t),0===this.timeoutId&&(this.timeoutId=setTimeout(this.gc.bind(this),o))},i.prototype.gc=function(){var t=Date.now();this.available=this.available.filter(function(e){return!(t-e.lastUsed>r&&(e.destroy(),1))}),0!==this.available.length?this.timeoutId=setTimeout(this.gc.bind(this),o):this.timeoutId=0},e.exports=i},{}],4:[function(t,e,n){"use strict";function i(t){return t<0?0:t>255?255:t}function r(t){return Math.round(t*((1<<c)-1))}function o(t,e,n,i,o){var a,s,l,u,c,d,p,f,m,g,v,b,y,w,E,C,x,_=h[t].filter,T=1/i,S=Math.min(1,i),A=h[t].win/S,D=Math.floor(2*(A+1)),k=new Int16Array((D+2)*n),N=0;for(a=0;a<n;a++){for(s=(a+.5)*T+o,l=Math.max(0,Math.floor(s-A)),u=Math.min(e-1,Math.ceil(s+A)),c=u-l+1,d=new Float32Array(c),p=new Int16Array(c),f=0,m=l,g=0;m<=u;m++,g++)v=_((m+.5-s)*S),f+=v,d[g]=v;for(b=0,g=0;g<d.length;g++)y=d[g]/f,b+=y,p[g]=r(y);for(p[n>>1]+=r(1-b),w=0;w<p.length&&0===p[w];)w++;if(w<p.length){for(E=p.length-1;E>0&&0===p[E];)E--;C=l+w,x=E-w+1,k[N++]=C,k[N++]=x,k.set(p.subarray(w,E+1),N),N+=x}else k[N++]=0,k[N++]=0}return k}function a(t,e,n,r,o,a){var s,l,u,c,h,d,p,f,m,g,v,b=0,y=0;for(m=0;m<r;m++){for(h=0,g=0;g<o;g++){for(d=a[h++],p=a[h++],f=b+4*d|0,s=l=u=c=0;p>0;p--)v=a[h++],c=c+v*t[f+3]|0,u=u+v*t[f+2]|0,l=l+v*t[f+1]|0,s=s+v*t[f]|0,f=f+4|0;e[y+3]=i(c+8192>>14),e[y+2]=i(u+8192>>14),e[y+1]=i(l+8192>>14),e[y]=i(s+8192>>14),y=y+4*r|0}y=4*(m+1)|0,b=(m+1)*n*4|0}}function s(t,e,n,r,o,a){var s,l,u,c,h,d,p,f,m,g,v,b=0,y=0;for(m=0;m<r;m++){for(h=0,g=0;g<o;g++){for(d=a[h++],p=a[h++],f=b+4*d|0,s=l=u=c=0;p>0;p--)v=a[h++],c=c+v*t[f+3]|0,u=u+v*t[f+2]|0,l=l+v*t[f+1]|0,s=s+v*t[f]|0,f=f+4|0;e[y+3]=i(c+8192>>14),e[y+2]=i(u+8192>>14),e[y+1]=i(l+8192>>14),e[y]=i(s+8192>>14),y=y+4*r|0}y=4*(m+1)|0,b=(m+1)*n*4|0}}function l(t,e,n){for(var i=3,r=e*n*4|0;i<r;)t[i]=255,i=i+4|0}function u(t){var e=t.src,n=t.width,i=t.height,r=t.toWidth,u=t.toHeight,c=t.scaleX||t.toWidth/t.width,h=t.scaleY||t.toHeight/t.height,d=t.offsetX||0,p=t.offsetY||0,f=t.dest||new Uint8Array(r*u*4),m="undefined"==typeof t.quality?3:t.quality,g=t.alpha||!1;if(n<1||i<1||r<1||u<1)return[];var v=o(m,n,r,c,d),b=o(m,i,u,h,p),y=new Uint8Array(r*i*4);return a(e,y,n,i,r,v),s(y,f,i,r,u,b),g||l(f,r,u),f}var c=14,h=[{win:.5,filter:function(t){return t>=-.5&&t<.5?1:0}},{win:1,filter:function(t){if(t<=-1||t>=1)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*(.54+.46*Math.cos(e/1))}},{win:2,filter:function(t){if(t<=-2||t>=2)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/2)/(e/2)}},{win:3,filter:function(t){if(t<=-3||t>=3)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/3)/(e/3)}}];e.exports=u},{}],5:[function(t,e,n){"use strict";function i(t,e,n){for(var i,r,o,a,s,l=e*n,u=new Uint16Array(l),c=0;c<l;c++)i=t[4*c],r=t[4*c+1],o=t[4*c+2],s=i>=r&&i>=o?i:r>=o&&r>=i?r:o,a=i<=r&&i<=o?i:r<=o&&r<=i?r:o,u[c]=257*(s+a)>>1;return u}function r(t,e,n,r,a,s){var l,u,c,h,d,p,f,m,g,v,b,y,w;if(!(0===r||a<.5)){a>2&&(a=2);var E=i(t,e,n),C=new Uint16Array(E);o(C,e,n,a);for(var x=r/100*4096+.5|0,_=257*s|0,T=e*n,S=0;S<T;S++)y=2*(E[S]-C[S]),Math.abs(y)>=_&&(w=4*S,l=t[w],u=t[w+1],c=t[w+2],m=l>=u&&l>=c?l:u>=l&&u>=c?u:c,f=l<=u&&l<=c?l:u<=l&&u<=c?u:c,p=257*(m+f)>>1,f===m?h=d=0:(d=p<=32767?4095*(m-f)/(m+f)|0:4095*(m-f)/(510-m-f)|0,h=l===m?65535*(u-c)/(6*(m-f))|0:u===m?21845+(65535*(c-l)/(6*(m-f))|0):43690+(65535*(l-u)/(6*(m-f))|0)),p+=x*y+2048>>12,p>65535?p=65535:p<0&&(p=0),0===d?l=u=c=p>>8:(v=p<=32767?p*(4096+d)+2048>>12:p+((65535-p)*d+2048>>12),g=2*p-v>>8,v>>=8,b=h+21845&65535,l=b>=43690?g:b>=32767?g+(6*(v-g)*(43690-b)+32768>>16):b>=10922?v:g+(6*(v-g)*b+32768>>16),b=65535&h,u=b>=43690?g:b>=32767?g+(6*(v-g)*(43690-b)+32768>>16):b>=10922?v:g+(6*(v-g)*b+32768>>16),b=h-21845&65535,c=b>=43690?g:b>=32767?g+(6*(v-g)*(43690-b)+32768>>16):b>=10922?v:g+(6*(v-g)*b+32768>>16)),t[w]=l,t[w+1]=u,t[w+2]=c)}}var o=t("glur/mono16");e.exports=r,e.exports.lightness=i},{"glur/mono16":11}],6:[function(t,e,n){"use strict";function i(t){var e=Math.round(t);return Math.abs(t-e)<o?e:Math.floor(t)}function r(t){var e=Math.round(t);return Math.abs(t-e)<o?e:Math.ceil(t)}var o=1e-5;e.exports.createRegions=function(t){var e,n,o,a,s,l,u,c=t.toWidth/t.width,h=t.toHeight/t.height,d=i(t.srcTileSize*c)-2*t.destTileBorder,p=i(t.srcTileSize*h)-2*t.destTileBorder,f=[];for(a=0;a<t.toHeight;a+=p)for(o=0;o<t.toWidth;o+=d)e=o-t.destTileBorder,e<0&&(e=0),s=o+d+t.destTileBorder-e,e+s>=t.toWidth&&(s=t.toWidth-e),n=a-t.destTileBorder,n<0&&(n=0),l=a+p+t.destTileBorder-n,n+l>=t.toHeight&&(l=t.toHeight-n),u={toX:e,toY:n,toWidth:s,toHeight:l,toInnerX:o,toInnerY:a,toInnerWidth:d,toInnerHeight:p,offsetX:e/c-i(e/c),offsetY:n/h-i(n/h),scaleX:c,scaleY:h,x:i(e/c),y:i(n/h),width:r(s/c),height:r(l/h)},f.push(u);return f},e.exports.eachLimit=function(t,e,n,i){function r(e){if(!s){if(e)return s=!0,void i(e);a++,a===t.length?i():o<t.length&&n(t[o++],r)}}0===t.length&&i();for(var o=0,a=0,s=!1;o<e&&o<t.length;)n(t[o++],r)}},{}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./resize_array"),i=t("./unsharp");e.onmessage=function(t){var r=t.data;r.dest=new Uint8Array(r.toWidth*r.toHeight*4),n(r),r.unsharpAmount&&i(r.dest,r.toWidth,r.toHeight,r.unsharpAmount,r.unsharpRadius,r.unsharpThreshold),e.postMessage({output:r.dest},[r.dest.buffer])}}},{"./resize_array":4,"./unsharp":5}],8:[function(t,e,n){"use strict";function i(t,e,n,i){var d=e.getContext("2d",{alpha:Boolean(n.alpha)}),p=u();p.width=Math.min(c,t.width),p.height=Math.min(c,t.height);var f=p.getContext("2d",{alpha:Boolean(n.alpha)});f.globalCompositeOperation="copy";var m=a({width:t.naturalWidth||t.width,height:t.naturalHeight||t.height,srcTileSize:c,toWidth:e.width,toHeight:e.height,destTileBorder:Math.ceil(Math.max(h,2.5*n.unsharpRadius|0))});return s(m,1,function(e,i){f.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var a=f.getImageData(0,0,e.width,e.height),s=d.createImageData(e.toWidth,e.toHeight),l={src:a.data,dest:s.data,width:e.width,height:e.height,toWidth:e.toWidth,toHeight:e.toHeight,scaleX:e.scaleX,scaleY:e.scaleY,offsetX:e.offsetX,offsetY:e.offsetY,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};r(l),n.unsharpAmount&&o(l.dest,l.toWidth,l.toHeight,l.unsharpAmount,l.unsharpRadius,l.unsharpThreshold),d.putImageData(s,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),i()},i),l()}var r=t("./js/resize_array"),o=t("./js/unsharp"),a=t("./js/utils").createRegions,s=t("./js/utils").eachLimit,l=t("./js/generate_id"),u=t("./js/create_canvas"),c=1024,h=3;e.exports=i,e.exports.terminate=function(){}},{"./js/create_canvas":1,"./js/generate_id":2,"./js/resize_array":4,"./js/unsharp":5,"./js/utils":6}],9:[function(t,e,n){"use strict";function i(t,e,n,i){var r=e.getContext("2d",{alpha:Boolean(n.alpha)}),o=c();o.width=Math.min(d,t.naturalWidth||t.width),o.height=Math.min(d,t.naturalHeight||t.height);var a=o.getContext("2d",{alpha:Boolean(n.alpha)});a.globalCompositeOperation="copy";var h=s({width:t.naturalWidth||t.width,height:t.naturalHeight||t.height,srcTileSize:d,toWidth:e.width,toHeight:e.height,destTileBorder:Math.ceil(Math.max(p,2.5*n.unsharpRadius|0))}),v=1;"undefined"!=typeof navigator&&(v=navigator.hardwareConcurrency||1);var b=n._id||u();return g[b]=!0,l(h,v,function(e,i){a.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var o=a.getImageData(0,0,e.width,e.height),s={src:o.data,width:e.width,height:e.height,toWidth:e.toWidth,toHeight:e.toHeight,scaleX:e.scaleX,scaleY:e.scaleY,offsetX:e.offsetX,offsetY:e.offsetY,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold},l=m.acquire();l.value.onmessage=function(t){var n,o,a,s,u;if(l.release(),!g[b])return void i(!0);if(t.data.err)return void i(t.data.err);if(a=r.createImageData(e.toWidth,e.toHeight),s=t.data.output,u=a.data,u.set)u.set(s);else for(n=0,o=s.length;n<o;n++)u[n]=s[n];f?r.putImageData(a,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth+1e-5,e.toInnerHeight+1e-5):r.putImageData(a,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),i()},l.value.postMessage(s,[s.src.buffer])},function(t){g[b]&&(delete g[b],i(t))}),b}function r(t){g[t]&&delete g[t]}var o=t("webworkify"),a=t("./js/worker.js"),s=t("./js/utils").createRegions,l=t("./js/utils").eachLimit,u=t("./js/generate_id"),c=t("./js/create_canvas"),h=t("./js/pool"),d=1024,p=3,f=!1;try{f=navigator.userAgent.indexOf("Safari")!==-1}catch(t){}var m=new h(function(){return{value:o(a),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var t=window.URL||window.webkitURL||window.mozURL||window.msURL;t&&t.revokeObjectURL&&this.value.objectURL&&t.revokeObjectURL(this.value.objectURL)}}}}),g={};e.exports=i,e.exports.terminate=r},{"./js/create_canvas":1,"./js/generate_id":2,"./js/pool":3,"./js/utils":6,"./js/worker.js":7,webworkify:13}],10:[function(t,e,n){"use strict";function i(t){try{(window.console.error||window.console.log).call(window.console,t)}catch(t){}}function r(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("gl error "+e)}function o(t){return t.getContext("webgl")||t.getContext("experimental-webgl")}function a(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(i("Shader compile error: "+t.getShaderInfoLog(r)+". Source: `"+n+"`"),t.deleteShader(r),null)}function s(t,e,n){var o=t.createProgram();return t.attachShader(o,e),t.attachShader(o,n),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(i("Program linking error: "+t.getProgramInfoLog(o)),t.deleteProgram(o)),r(t),o}function l(t,e,n,i,o){var a=t.getAttribLocation(e,n);t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.enableVertexAttribArray(a),t.vertexAttribPointer(a,o.elementSize,t.FLOAT,!1,0,0),r(t)}function u(t,e,n,i){var r=t.getUniformLocation(e,n);t.uniform1i(r,i)}function c(t,e,n,i,r){var o=t.getUniformLocation(e,n);t.uniform2f(o,i,r)}function h(t,e,n){var i=t.createTexture();return t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),r(t),i}function d(t,e,n,i){var o=t.createTexture();return t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,i,0,t.RGBA,t.UNSIGNED_BYTE,null),r(t),o}function p(t,e,n,i){var o=d(t,e,n,i),a=t.getParameter(t.FRAMEBUFFER_BINDING),s=t.createFramebuffer();return t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),r(t),{fbo:s,texture:o,oldFbo:a}}function f(t,e,n,i){var r=t,o=t+n,a=e,s=e+i;return[r,a,o,a,r,s,r,s,o,a,o,s]}function m(t){function e(t){return t.toFixed(20)}for(var n=E["#fsh-lanczos1d-optimized-tpl"],i=t.direction,r=t.texW/t.destW,o=t.texH/t.destH,a="horizontal"===i?r:o,s=3,l=C[s].filter,u=C[s].win,c="horizontal"===i,h=1/t.texW,d=1/t.texH,p=c?h:d,f=2*Math.ceil(u*a),m="float total = 0.0;\ngl_FragColor = vec4(0.0);\n",g=0;g<f+1;g++){var v=g-f/2,b=v/a,y=l(b),w=p*v,x=c?w:0,_=c?0:w;m+="addPoint(vec2("+e(x)+", "+e(_)+"), "+e(y)+", total);\n"}m+="gl_FragColor /= vec4(total);";var T=n.replace("__CODE__",m);return T}function g(t,e){var n=a(t,t.VERTEX_SHADER,E["#vsh-basic"]),i=a(t,t.FRAGMENT_SHADER,m(e));return s(t,n,i)}function v(t,e,n,i,o,a,s,h,d){var m={direction:a,texW:n,texH:i,destW:s,destH:h},v=g(t,m);t.useProgram(v),u(t,v,"u_image",e),c(t,v,"u_resolution",s,h),l(t,v,"a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1],{elementSize:2}),l(t,v,"a_position",d?f(0,h,s,-h):f(0,0,s,h),{elementSize:2}),t.viewport(0,0,s,h);var b=p(t,o,s,h);return t.viewport(0,0,s,h),t.drawArrays(t.TRIANGLES,0,6),t.bindFramebuffer(t.FRAMEBUFFER,b.oldFbo),r(t),b}function b(t,e,n){var i=t.naturalWidth||t.width,r=t.naturalHeight||t.height,o=e.canvas.width,a=e.canvas.height,s=0,l=1,u=2;h(e,s,t),v(e,s,i,r,l,"horizontal",o,r,!1);var c=v(e,l,o,r,u,"vertical",o,a,!0);e.flush();var d=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,d),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,c.texture,0);var p=e.checkFramebufferStatus(e.FRAMEBUFFER);if(p!==e.FRAMEBUFFER_COMPLETE)throw new Error("Bad framebuffer status: "+p);n.alpha||(e.clearColor(1,1,1,1),e.colorMask(!1,!1,!1,!0),e.clear(e.COLOR_BUFFER_BIT));var f=new Uint8Array(o*a*4);e.readPixels(0,0,o,a,e.RGBA,e.UNSIGNED_BYTE,f);var m="undefined"==typeof n.unsharpAmount?0:0|n.unsharpAmount,g="undefined"==typeof n.unsharpRadius?0:n.unsharpRadius,b="undefined"==typeof n.unsharpThreshold?0:0|n.unsharpThreshold;return m&&y(f,o,a,m,g,b),f}var y=t("./js/unsharp"),w=t("./js/generate_id"),E={};E["#vsh-basic"]="precision highp float;\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 clipSpace = a_position / u_resolution * 2.0 - 1.0;\n\n   gl_Position = vec4(clipSpace, 0, 1);\n   v_texCoord = a_texCoord;\n}\n",E["#fsh-lanczos1d-optimized-tpl"]="precision highp float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image;\n\n#define addPoint(offset, kv, total)   {vec2 pos = v_texCoord + offset; gl_FragColor += texture2D(u_image, pos) * kv; total += kv; }\n\nvoid main()\n{\n__CODE__\n}\n";var C=[{win:.5,filter:function(t){return t>=-.5&&t<.5?1:0}},{win:1,filter:function(t){if(t<=-1||t>=1)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*(.54+.46*Math.cos(e/1))}},{win:2,filter:function(t){if(t<=-2||t>=2)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/2)/(e/2)}},{win:3,filter:function(t){if(t<=-3||t>=3)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/3)/(e/3)}}];e.exports=function(t,e,n,r){var a,s;try{s=document.createElement("canvas"),s.id="pica-webgl-temporarry-canvas",s.height=e.height,s.width=e.width,document.body.appendChild(s),a=o(s);var l=b(t,a,n);a.finish(),document.body.removeChild(s);var u=e.getContext("2d"),c=u.createImageData(e.width,e.height);c.data.set(l),u.putImageData(c,0,0),r(null,l)}catch(t){i(t),a.finish(),document.body.removeChild(s),r(t)}return w()},e.exports.terminate=function(){}},{"./js/generate_id":2,"./js/unsharp":5}],11:[function(t,e,n){function i(t){t<.5&&(t=.5);var e=Math.exp(.527076)/t,n=Math.exp(-e),i=Math.exp(-2*e),r=(1-n)*(1-n)/(1+2*e*n-i);return a=r,s=r*(e-1)*n,l=r*(e+1)*n,u=-r*i,c=2*n,h=-i,d=(a+s)/(1-c-h),p=(l+u)/(1-c-h),new Float32Array([a,s,l,u,c,h,d,p])}function r(t,e,n,i,r,o){var a,s,l,u,c,h,d,p,f,m,g,v,b,y;for(f=0;f<o;f++){for(h=f*r,d=f,p=0,a=t[h],c=a*i[6],u=c,g=i[0],v=i[1],b=i[4],y=i[5],m=0;m<r;m++)s=t[h],l=s*g+a*v+u*b+c*y,c=u,u=l,a=s,n[p]=u,p++,h++;for(h--,p--,d+=o*(r-1),a=t[h],c=a*i[7],u=c,s=a,g=i[2],v=i[3],m=r-1;m>=0;m--)l=s*g+a*v+u*b+c*y,c=u,u=l,a=s,s=t[h],e[d]=n[p]+u,h--,p--,d-=o}}function o(t,e,n,o){if(o){var a=new Uint16Array(t.length),s=new Float32Array(Math.max(e,n)),l=i(o);r(t,a,s,l,e,n,o),r(a,t,s,l,n,e,o)}}var a,s,l,u,c,h,d,p;e.exports=o},{}],12:[function(t,e,n){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==i.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}var o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(t,e){for(var n,r,s=i(t),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var u in n)o.call(n,u)&&(s[u]=n[u]);if(Object.getOwnPropertySymbols){r=Object.getOwnPropertySymbols(n);for(var c=0;c<r.length;c++)a.call(n,r[c])&&(s[r[c]]=n[r[c]])}}return s}},{}],13:[function(t,e,n){var i=arguments[3],r=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t,e){function n(t){g[t]=!0;for(var e in r[t][1]){var i=r[t][1][e];g[i]||n(i)}}for(var s,l=Object.keys(o),u=0,c=l.length;u<c;u++){var h=l[u],d=o[h].exports;if(d===t||d&&d.default===t){s=h;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var p={},u=0,c=l.length;u<c;u++){var h=l[u];p[h]=h}r[s]=[Function(["require","module","exports"],"("+t+")(self)"),p]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[s]=s,r[f]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),m];var g={};n(f);var v="("+i+")({"+Object.keys(g).map(function(t){return a(t)+":["+r[t][0]+","+a(r[t][1])+"]"}).join(",")+"},{},["+a(f)+"])",b=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([v],{type:"text/javascript"});if(e&&e.bare)return y;var w=b.createObjectURL(y),E=new Worker(w);return E.objectURL=w,E}},{}],"/":[function(t,e,n){"use strict";function i(t){return Object.prototype.toString.call(t)}function r(t){return"[object Function]"===i(t)}function o(t,e,i,a){if(r(i)&&(a=i,i={}),isNaN(i)||(i={quality:i,alpha:!1}),h||(n.WEBGL=!1),h&&n.WEBGL){n.debug("Resize canvas with WebGL");var s=f(t,e,i,function(r){r?(n.debug("WebGL resize failed, do fallback and cancel next attempts"),n.debug(r),h=!1,o(t,e,v({},i,{_id:s}),a)):a()});return s}return l||(n.WW=!1),l&&n.WW?(n.debug("Resize buffer in WebWorker"),p(t,e,i,a)):(n.debug("Resize buffer sync (freeze event loop)"),d(t,e,i,a))}function a(t,e){var n={src:t.src,dest:t.dest,width:0|t.width,height:0|t.height,toWidth:0|t.toWidth,toHeight:0|t.toHeight,quality:t.quality,alpha:t.alpha,unsharpAmount:t.unsharpAmount,unsharpRadius:t.unsharpRadius,unsharpThreshold:t.unsharpThreshold};n.dest=m(n),n.unsharpAmount&&g(n.dest,n.toWidth,n.toHeight,n.unsharpAmount,n.unsharpRadius,n.unsharpThreshold),e(null,n.dest)}function s(t){d.terminate(t),p.terminate(t),f.terminate(t)}var l="undefined"!=typeof window&&"Worker"in window;if(l)try{var u=t("webworkify")(function(){});u.terminate()}catch(t){l=!1}var c,h=!1;try{"undefined"!=typeof document&&"undefined"!=typeof window&&window.WebGLRenderingContext&&(c=document.createElement("canvas"),(c.getContext("webgl")||c.getContext("experimental-webgl"))&&(h=!0))}catch(t){}finally{c=null}var d=t("./lib/resize_js"),p=t("./lib/resize_js_ww"),f=t("./lib/resize_webgl"),m=t("./lib/js/resize_array"),g=t("./lib/js/unsharp"),v=t("object-assign");n.resizeCanvas=o,n.resizeBuffer=a,n.terminate=s,n.WW=l,n.WEBGL=!1,n.debug=function(){}},{"./lib/js/resize_array":4,"./lib/js/unsharp":5,"./lib/resize_js":8,"./lib/resize_js_ww":9,"./lib/resize_webgl":10,"object-assign":12,webworkify:13}]},{},[])("/")})},731:function(t,e,n){"use strict";var i=n(1),r=n(165),o=n(568),a=n(166),s=n(167),l=n(186)(s),u=n(226),c=n(228),h=n(250),d=i.createClass({displayName:"HubHav",mixins:[l.connect(u)],__:function(t){return c.getLocaleString(this.state.locale,t)},propTypes:{hubid:i.PropTypes.string.isRequired,canEdit:i.PropTypes.bool},getDefaultProps:function(){return{canEdit:!1}},componentDidMount:function(){r(this.refs.hubNav).sideNav({edge:"right"})},render:function(){var t=o.getBaseUrl(),e=t+"/hub/"+this.props.hubid+"/",n="";return this.props.canEdit&&(n=i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{href:e+"admin"},this.__("Manage Hub")))),i.createElement("nav",{className:"white",style:{height:"0px"}},i.createElement("div",{className:"nav-wrapper"},i.createElement("a",{href:"#",ref:"hubNav","data-activates":"nav",className:"button-collapse white-text text-shadow",style:{display:"block",position:"absolute",top:"5px",right:"5px"}},i.createElement("i",{className:"material-icons"},"menu")),i.createElement("ul",{className:"side-nav",id:"nav"},i.createElement(a,{id:"user-menu-sidenav"}),i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{href:e},this.__("Home"))),i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{href:e+"map"},this.__("Map"))),i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{href:e+"stories"},this.__("Stories"))),i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{href:e+"resources"},this.__("Resources"))),i.createElement(h,null),i.createElement("hr",null),i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{href:t},this.__("Back to ")+MAPHUBS_CONFIG.productName)),n)))}});t.exports=d},732:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(733),o=i(r),a=n(1),s=n(606),l=n(167),u=n(186)(l),c=n(737),h=n(738),d=n(226),p=n(228),f=n(570),m=n(568),g=a.createClass({displayName:"HubBanner",mixins:[u.connect(c),u.connect(d)],__:function(t){return p.getLocaleString(this.state.locale,t)},propTypes:{hubid:a.PropTypes.string.isRequired,editing:a.PropTypes.bool,subPage:a.PropTypes.bool},getDefaultProps:function(){return{editing:!1,subPage:!1}},getInitialState:function(){return{imageCropAspectRatio:1,imageCropResizeWidth:null,imageCropResizeMaxWidth:null,imageCropResizeHeight:null,onCrop:function(){}}},shouldComponentUpdate:function(t,e){return!f(this.props,t)||!f(this.state,e)},handleTitleChange:function(t){h.setTitle(t)},handleTaglineChange:function(t){h.setTagline(t)},handleDescriptionChange:function(t){h.setDescription(t)},showLogoEdit:function(){this.setState({imageCropAspectRatio:1,imageCropResizeWidth:300,imageCropResizeHeight:300,imageCropResizeMaxWidth:null,onCrop:this.onLogoCrop}),this.refs.imagecrop.show()},onLogoCrop:function(t,e){h.setHubLogoImage(t,e)},showBannerEdit:function(){this.setState({imageCropAspectRatio:4,imageCropResizeMaxWidth:2e3,imageCropResizeWidth:null,imageCropResizeHeight:null,onCrop:this.onBannerCrop}),this.refs.imagecrop.show()},onBannerCrop:function(t,e){h.setHubBannerImage(t,e)},render:function(){var t=m.getBaseUrl(),e=t+"/hub/"+this.props.hubid,n="hub-banner";this.props.subPage&&(n="hub-banner-subpage");var i="",r="",l="",u="",c="",h="",d=null;this.state.hub.name&&(d=this.state.hub.name.replace("&nbsp;",""));var p=null;this.state.hub.tagline&&(p=this.state.hub.tagline.replace("&nbsp;",""));var f=null;this.state.hub.description&&(f=this.state.hub.description.replace("&nbsp;","")),this.props.editing?(r=a.createElement("div",{className:"white-text text-shadow hub-title"},a.createElement(o.default,{tag:"h2",text:d,onChange:this.handleTitleChange,options:{toolbar:!1,placeholder:{
text:this.__("Enter a Title for Your Hub")},disableReturn:!0,buttons:[]}})),l=a.createElement("div",{className:"white-text text-shadow hub-tagline"},a.createElement(o.default,{tag:"p",text:p,onChange:this.handleTaglineChange,options:{toolbar:!1,buttonLabels:!1,placeholder:{text:this.__("Enter a Tagline or Subheading for Your Hub")},disableReturn:!0,buttons:[]}})),i=a.createElement("div",{className:"container"},a.createElement("div",{className:"row"},a.createElement("div",{className:"flow-text"},a.createElement(o.default,{tag:"p",text:f,onChange:this.handleDescriptionChange,options:{toolbar:!1,buttonLabels:!1,placeholder:{text:this.__("Enter a Description or Intro for Your Hub")},disableReturn:!0,buttons:[]}})))),u=a.createElement("a",{className:"btn-floating omh-color white-text",onClick:this.showLogoEdit,style:{position:"absolute",top:"-15px",left:"85px"}},a.createElement("i",{className:"material-icons"},"edit")),c=a.createElement("a",{className:"btn-floating omh-color white-text",onClick:this.showBannerEdit,style:{position:"absolute",top:"205px",right:"10px"}},a.createElement("i",{className:"material-icons"},"edit")),h=a.createElement(s,{ref:"imagecrop",aspectRatio:this.state.imageCropAspectRatio,lockAspect:!0,resize_max_width:this.state.imageCropResizeMaxWidth,resize_width:this.state.imageCropResizeWidth,resize_height:this.state.imageCropResizeHeight,onCrop:this.state.onCrop})):(r=a.createElement("h2",{className:"white-text text-shadow no-margin"},d),l=a.createElement("p",{className:"white-text text-shadow no-margin"},p),i=a.createElement("div",{className:"container"},a.createElement("div",{className:"row"},a.createElement("p",{className:"flow-text hub-description"},f))));var g="",v="";return g=this.state.logoImage?a.createElement("a",{href:e},a.createElement("img",{alt:this.__("Hub Photo"),width:"100",style:{borderRadius:"25px"},src:this.state.logoImage})):this.state.hub.hasLogoImage?a.createElement("a",{href:e},a.createElement("img",{alt:this.__("Hub Photo"),width:"100",style:{borderRadius:"25px"},src:"/hub/"+this.state.hub.hub_id+"/images/logo"})):a.createElement("div",{className:"center center-align valign-wrapper",style:{margin:"auto",borderRadius:"25px",width:"100px",height:"100px",borderStyle:"dashed",borderColor:"#bdbdbd",borderWidth:"3px"}},a.createElement("i",{className:"material-icons grey-text valign"},"add_a_photo"),a.createElement("p",{className:"valign grey-text"},this.__("Add a Logo"))),v=this.state.bannerImage?a.createElement("div",{className:n,style:{width:"100%",position:"absolute",top:0,backgroundImage:"url("+this.state.bannerImage+")",backgroundSize:"cover",backgroundPosition:"center"}}):this.state.hub.hasBannerImage?a.createElement("div",{className:n,style:{width:"100%",position:"absolute",top:0,backgroundImage:'url("/hub/'+this.state.hub.hub_id+'/images/banner")',backgroundSize:"cover",backgroundPosition:"center"}}):a.createElement("div",{className:"center center-align",style:{margin:"auto",borderRadius:"25px",width:"100%",height:"100%",position:"absolute",top:0,borderColor:"#bdbdbd",borderStyle:"dashed",borderWidth:"3px"}},a.createElement("div",{className:"center center-align valign-wrapper",style:{margin:"auto",height:"100%",width:"200px"}},a.createElement("i",{className:"material-icons grey-text valign"},"add_a_photo"),a.createElement("p",{className:"valign grey-text"},this.__("Add a Banner Image")))),this.props.subPage&&(i=""),a.createElement("div",null,a.createElement("div",{className:"row no-margin valign-wrapper "+n,style:{position:"relative"}},v,c,a.createElement("div",{className:"row no-margin valign",style:{margin:0,paddingLeft:"20px",width:"100%"}},a.createElement("div",{className:"col s12 m1 l1 no-padding",style:{position:"relative",minWidth:"110px"}},g,u),a.createElement("div",{className:"col s12 m9 l10 no-padding",style:{position:"relative",marginTop:"20px"}},r,l))),i,h)}});t.exports=g},733:function(t,e,n){"use strict";t.exports=n(734)},734:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(3),c=i(u),h=n(735),d=i(h),p=n(1),f=i(p),m=n(30),g=i(m);if("undefined"!=typeof document)var v=n(736);var b=function(t){function e(t){r(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.state={text:n.props.text},n}return a(e,t),l(e,[{key:"componentDidMount",value:function(){var t=this,e=g.default.findDOMNode(this);this.medium=new v(e,this.props.options),this.medium.subscribe("editableInput",function(n){t._updated=!0,t.change(e.innerHTML)})}},{key:"componentDidUpdate",value:function(){this.medium.restoreSelection()}},{key:"componentWillUnmount",value:function(){this.medium.destroy()}},{key:"componentWillReceiveProps",value:function(t){t.text===this.state.text||this._updated||this.setState({text:t.text}),this._updated&&(this._updated=!1)}},{key:"render",value:function(){var t=this.props.tag,e=(0,d.default)(this.props,"options","text","tag","contentEditable","dangerouslySetInnerHTML");return(0,c.default)(e,{dangerouslySetInnerHTML:{__html:this.state.text}}),this.medium&&this.medium.saveSelection(),f.default.createElement(t,e)}},{key:"change",value:function(t){this.props.onChange&&this.props.onChange(t,this.medium)}}]),e}(f.default.Component);b.defaultProps={tag:"div"},e.default=b},735:function(t,e){t.exports=function(t){var e={},n=arguments[1];if("string"==typeof n){n={};for(var i=1;i<arguments.length;i++)n[arguments[i]]=!0}for(var r in t)n[r]||(e[r]=t[r]);return e}},736:function(t,e,n){var i;(function(t,r){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
"classList"in document.createElement("_")||!function(t){if("Element"in t){var e="classList",n="prototype",i=t.Element[n],r=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},s=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(t,e)},u=function(t){for(var e=o.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,r=n.length;i<r;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},c=u[n]=[],h=function(){return new u(this)};if(s[n]=Error[n],c.item=function(t){return this[t]||null},c.contains=function(t){return t+="",l(this,t)!==-1},c.add=function(){var t,e=arguments,n=0,i=e.length,r=!1;do t=e[n]+"",l(this,t)===-1&&(this.push(t),r=!0);while(++n<i);r&&this._updateClassName()},c.remove=function(){var t,e,n=arguments,i=0,r=n.length,o=!1;do for(t=n[i]+"",e=l(this,t);e!==-1;)this.splice(e,1),o=!0,e=l(this,t);while(++i<r);o&&this._updateClassName()},c.toggle=function(t,e){t+="";var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},c.toString=function(){return this.join(" ")},r.defineProperty){var d={get:h,enumerable:!0,configurable:!0};try{r.defineProperty(i,e,d)}catch(t){t.number===-2146823252&&(d.enumerable=!1,r.defineProperty(i,e,d))}}else r[n].__defineGetter__&&i.__defineGetter__(e,h)}}(self),/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
function(t){if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(t){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},i=function(t,e,n){this.data=t,this.size=t.length,this.type=e,this.encoding=n},r=n.prototype,o=i.prototype,a=t.FileReaderSync,s=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=l.length,c=t.URL||t.webkitURL||t,h=c.createObjectURL,d=c.revokeObjectURL,p=c,f=t.btoa,m=t.atob,g=t.ArrayBuffer,v=t.Uint8Array,b=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(i.fake=o.fake=!0;u--;)s.prototype[l[u]]=u+1;return c.createObjectURL||(p=t.URL=function(t){var e,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=t,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(e=t.match(b),n.origin=e&&e[1])),n}),p.createObjectURL=function(t){var e,n=t.type;return null===n&&(n="application/octet-stream"),t instanceof i?(e="data:"+n,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):f?e+";base64,"+f(t.data):e+","+encodeURIComponent(t.data)):h?h.call(c,t):void 0},p.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&d&&d.call(c,t)},r.append=function(t){var n=this.data;if(v&&(t instanceof g||t instanceof v)){for(var r="",o=new v(t),l=0,u=o.length;l<u;l++)r+=String.fromCharCode(o[l]);n.push(r)}else if("Blob"===e(t)||"File"===e(t)){if(!a)throw new s("NOT_READABLE_ERR");var c=new a;n.push(c.readAsBinaryString(t))}else t instanceof i?"base64"===t.encoding&&m?n.push(m(t.data)):"URI"===t.encoding?n.push(decodeURIComponent(t.data)):"raw"===t.encoding&&n.push(t.data):("string"!=typeof t&&(t+=""),n.push(unescape(encodeURIComponent(t))))},r.getBlob=function(t){return arguments.length||(t=null),new i(this.data.join(""),t,"raw")},r.toString=function(){return"[object BlobBuilder]"},o.slice=function(t,e,n){var r=arguments.length;return r<3&&(n=null),new i(this.data.slice(t,r>1?e:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(t);t.Blob=function(t,n){var i=n?n.type||"":"",r=new e;if(t)for(var o=0,a=t.length;o<a;o++)Uint8Array&&t[o]instanceof Uint8Array?r.append(t[o].buffer):r.append(t[o]);var s=r.getBlob(i);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var n=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=n(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content||void 0),function(a,s){var l="object"===o(t)&&"undefined"!=typeof r&&r&&r.versions&&r.versions.electron;l||"object"!==o(t)?(i=function(){return s}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))):t.exports=s}(void 0,function(){function t(t,e){return this.init(t,e)}return t.extensions={},function(e){function n(t,e){var n,i=Array.prototype.slice.call(arguments,2);e=e||{};for(var r=0;r<i.length;r++){var o=i[r];if(o)for(n in o)o.hasOwnProperty(n)&&"undefined"!=typeof o[n]&&(t||e.hasOwnProperty(n)===!1)&&(e[n]=o[n])}return e}var i=!1;try{var r=document.createElement("div"),o=document.createTextNode(" ");r.appendChild(o),i=r.contains(o)}catch(t){}var a={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:e.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(t){return!!(a.isMac&&t.metaKey||!a.isMac&&t.ctrlKey)},isKey:function(t,e){var n=a.getKeyCode(t);return!1===Array.isArray(e)?n===e:-1!==e.indexOf(n)},getKeyCode:function(t){var e=t.which;return null===e&&(e=null!==t.charCode?t.charCode:t.keyCode),e},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var t=[!0].concat(Array.prototype.slice.call(arguments));return n.apply(this,t)},defaults:function(){var t=[!1].concat(Array.prototype.slice.call(arguments));return n.apply(this,t)},createLink:function(t,e,n,i){var r=t.createElement("a");return a.moveTextRangeIntoElement(e[0],e[e.length-1],r),r.setAttribute("href",n),i&&r.setAttribute("target",i),r},findOrCreateMatchingTextNodes:function(t,e,n){for(var i=t.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1),r=[],o=0,s=!1,l=null,u=null;null!==(l=i.nextNode());)if(!(l.nodeType>3))if(3===l.nodeType){if(!s&&n.start<o+l.nodeValue.length&&(s=!0,u=a.splitStartNodeIfNeeded(l,n.start,o)),s&&a.splitEndNodeIfNeeded(l,u,n.end,o),s&&o===n.end)break;if(s&&o>n.end+1)throw new Error("PerformLinking overshot the target!");s&&r.push(u||l),o+=l.nodeValue.length,null!==u&&(o+=u.nodeValue.length,i.nextNode()),u=null}else"img"===l.tagName.toLowerCase()&&(!s&&n.start<=o&&(s=!0),s&&r.push(l));return r},splitStartNodeIfNeeded:function(t,e,n){return e!==n?t.splitText(e-n):null},splitEndNodeIfNeeded:function(t,e,n,i){var r,o;r=i+(e||t).nodeValue.length+(e?t.nodeValue.length:0)-1,o=(e||t).nodeValue.length-(r+1-n),r>=n&&i!==r&&0!==o&&(e||t).splitText(o)},splitByBlockElements:function(e){if(3!==e.nodeType&&1!==e.nodeType)return[];var n=[],i=t.util.blockContainerElementNames.join(",");if(3===e.nodeType||0===e.querySelectorAll(i).length)return[e];for(var r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];if(3===o.nodeType)n.push(o);else if(1===o.nodeType){var a=o.querySelectorAll(i);0===a.length?n.push(o):n=n.concat(t.util.splitByBlockElements(o))}}return n},findAdjacentTextNodeWithContent:function(t,e,n){var i,r=!1,o=n.createNodeIterator(t,NodeFilter.SHOW_TEXT,null,!1);for(i=o.nextNode();i;){if(i===e)r=!0;else if(r&&3===i.nodeType&&i.nodeValue&&i.nodeValue.trim().length>0)break;i=o.nextNode()}return i},findPreviousSibling:function(t){if(!t||a.isMediumEditorElement(t))return!1;for(var e=t.previousSibling;!e&&!a.isMediumEditorElement(t.parentNode);)t=t.parentNode,e=t.previousSibling;return e},isDescendant:function(t,e,n){if(!t||!e)return!1;if(t===e)return!!n;if(1!==t.nodeType)return!1;if(i||3!==e.nodeType)return t.contains(e);for(var r=e.parentNode;null!==r;){if(r===t)return!0;r=r.parentNode}return!1},isElement:function(t){return!(!t||1!==t.nodeType)},throttle:function(t,e){var n,i,r,o=50,a=null,s=0,l=function(){s=Date.now(),a=null,r=t.apply(n,i),a||(n=i=null)};return e||0===e||(e=o),function(){var o=Date.now(),u=e-(o-s);return n=this,i=arguments,u<=0||u>e?(a&&(clearTimeout(a),a=null),s=o,r=t.apply(n,i),a||(n=i=null)):a||(a=setTimeout(l,u)),r}},traverseUp:function(t,e){if(!t)return!1;do{if(1===t.nodeType){if(e(t))return t;if(a.isMediumEditorElement(t))return!1}t=t.parentNode}while(t);return!1},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(e,n){var i,r,o,s,l,u,c,h=!1,d=["insertHTML",!1,n];if(!t.util.isEdge&&e.queryCommandSupported("insertHTML"))try{return e.execCommand.apply(e,d)}catch(t){}if(i=e.getSelection(),i.rangeCount){if(r=i.getRangeAt(0),c=r.commonAncestorContainer,a.isMediumEditorElement(c)&&!c.firstChild)r.selectNode(c.appendChild(e.createTextNode("")));else if(3===c.nodeType&&0===r.startOffset&&r.endOffset===c.nodeValue.length||3!==c.nodeType&&c.innerHTML===r.toString()){for(;!a.isMediumEditorElement(c)&&c.parentNode&&1===c.parentNode.childNodes.length&&!a.isMediumEditorElement(c.parentNode);)c=c.parentNode;r.selectNode(c)}for(r.deleteContents(),o=e.createElement("div"),o.innerHTML=n,s=e.createDocumentFragment();o.firstChild;)l=o.firstChild,u=s.appendChild(l);r.insertNode(s),u&&(r=r.cloneRange(),r.setStartAfter(u),r.collapse(!0),t.selection.selectRange(e,r)),h=!0}return e.execCommand.callListeners&&e.execCommand.callListeners(d,h),h},execFormatBlock:function(e,n){var i,r=a.getTopBlockContainer(t.selection.getSelectionStart(e));if("blockquote"===n){if(r&&(i=Array.prototype.slice.call(r.childNodes),i.some(function(t){return a.isBlockContainer(t)})))return e.execCommand("outdent",!1,null);if(a.isIE)return e.execCommand("indent",!1,n)}if(r&&n===r.nodeName.toLowerCase()&&(n="p"),a.isIE&&(n="<"+n+">"),r&&"blockquote"===r.nodeName.toLowerCase()){if(a.isIE&&"<p>"===n)return e.execCommand("outdent",!1,n);if((a.isFF||a.isEdge)&&"p"===n)return i=Array.prototype.slice.call(r.childNodes),i.some(function(t){return!a.isBlockContainer(t)})&&e.execCommand("formatBlock",!1,n),e.execCommand("outdent",!1,n)}return e.execCommand("formatBlock",!1,n)},setTargetBlank:function(t,e){var n,i=e||!1;if("a"===t.nodeName.toLowerCase())t.target="_blank";else for(t=t.getElementsByTagName("a"),n=0;n<t.length;n+=1)!1!==i&&i!==t[n].attributes.href.value||(t[n].target="_blank")},removeTargetBlank:function(t,e){var n;if("a"===t.nodeName.toLowerCase())t.removeAttribute("target");else for(t=t.getElementsByTagName("a"),n=0;n<t.length;n+=1)e===t[n].attributes.href.value&&t[n].removeAttribute("target")},addClassToAnchors:function(t,e){var n,i,r=e.split(" ");if("a"===t.nodeName.toLowerCase())for(i=0;i<r.length;i+=1)t.classList.add(r[i]);else for(t=t.getElementsByTagName("a"),n=0;n<t.length;n+=1)for(i=0;i<r.length;i+=1)t[n].classList.add(r[i])},isListItem:function(t){if(!t)return!1;if("li"===t.nodeName.toLowerCase())return!0;for(var e=t.parentNode,n=e.nodeName.toLowerCase();"li"===n||!a.isBlockContainer(e)&&"div"!==n;){if("li"===n)return!0;if(e=e.parentNode,!e)return!1;n=e.nodeName.toLowerCase()}return!1},cleanListDOM:function(e,n){if("li"===n.nodeName.toLowerCase()){var i=n.parentElement;"p"===i.parentElement.nodeName.toLowerCase()&&(a.unwrap(i.parentElement,e),t.selection.moveCursor(e,n.firstChild,n.firstChild.textContent.length))}},splitOffDOMTree:function(t,e,n){for(var i=e,r=null,o=!n;i!==t;){var a,s=i.parentNode,l=s.cloneNode(!1),u=o?i:s.firstChild;for(r&&(o?l.appendChild(r):a=r),r=l;u;){var c=u.nextSibling;u===i?(u.hasChildNodes()?u=u.cloneNode(!1):u.parentNode.removeChild(u),u.textContent&&r.appendChild(u),u=o?c:null):(u.parentNode.removeChild(u),(u.hasChildNodes()||u.textContent)&&r.appendChild(u),u=c)}a&&r.appendChild(a),i=s}return r},moveTextRangeIntoElement:function(t,e,n){if(!t||!e)return!1;var i=a.findCommonRoot(t,e);if(!i)return!1;if(e===t){var r=t.parentNode,o=t.nextSibling;return r.removeChild(t),n.appendChild(t),o?r.insertBefore(n,o):r.appendChild(n),n.hasChildNodes()}for(var s,l,u,c=[],h=0;h<i.childNodes.length;h++)if(u=i.childNodes[h],s){if(a.isDescendant(u,e,!0)){l=u;break}c.push(u)}else a.isDescendant(u,t,!0)&&(s=u);var d=l.nextSibling,p=i.ownerDocument.createDocumentFragment();return s===t?(s.parentNode.removeChild(s),p.appendChild(s)):p.appendChild(a.splitOffDOMTree(s,t)),c.forEach(function(t){t.parentNode.removeChild(t),p.appendChild(t)}),l===e?(l.parentNode.removeChild(l),p.appendChild(l)):p.appendChild(a.splitOffDOMTree(l,e,!0)),n.appendChild(p),l.parentNode===i?i.insertBefore(n,l):d?i.insertBefore(n,d):i.appendChild(n),n.hasChildNodes()},depthOfNode:function(t){for(var e=0,n=t;null!==n.parentNode;)n=n.parentNode,e++;return e},findCommonRoot:function(t,e){for(var n=a.depthOfNode(t),i=a.depthOfNode(e),r=t,o=e;n!==i;)n>i?(r=r.parentNode,n-=1):(o=o.parentNode,i-=1);for(;r!==o;)r=r.parentNode,o=o.parentNode;return r},isElementAtBeginningOfBlock:function(t){for(var e,n;!a.isBlockContainer(t)&&!a.isMediumEditorElement(t);){for(n=t;n=n.previousSibling;)if(e=3===n.nodeType?n.nodeValue:n.textContent,e.length>0)return!1;t=t.parentNode}return!0},isMediumEditorElement:function(t){return t&&t.getAttribute&&!!t.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(t){return a.traverseUp(t,function(t){return a.isMediumEditorElement(t)})},isBlockContainer:function(t){return t&&3!==t.nodeType&&a.blockContainerElementNames.indexOf(t.nodeName.toLowerCase())!==-1},getClosestBlockContainer:function(t){return a.traverseUp(t,function(t){return a.isBlockContainer(t)||a.isMediumEditorElement(t)})},getTopBlockContainer:function(t){var e=!!a.isBlockContainer(t)&&t;return a.traverseUp(t,function(t){return a.isBlockContainer(t)&&(e=t),!(e||!a.isMediumEditorElement(t))&&(e=t,!0)}),e},getFirstSelectableLeafNode:function(t){for(;t&&t.firstChild;)t=t.firstChild;if(t=a.traverseUp(t,function(t){return a.emptyElementNames.indexOf(t.nodeName.toLowerCase())===-1}),"table"===t.nodeName.toLowerCase()){var e=t.querySelector("th, td");e&&(t=e)}return t},getFirstTextNode:function(t){return a.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),a._getFirstTextNode(t)},_getFirstTextNode:function(t){if(3===t.nodeType)return t;for(var e=0;e<t.childNodes.length;e++){var n=a._getFirstTextNode(t.childNodes[e]);if(null!==n)return n}return null},ensureUrlHasProtocol:function(t){return t.indexOf("://")===-1?"http://"+t:t},warn:function(){void 0!==e.console&&"function"==typeof e.console.warn&&e.console.warn.apply(e.console,arguments)},deprecated:function(t,e,n){var i=t+" is deprecated, please use "+e+" instead.";n&&(i+=" Will be removed in "+n),a.warn(i)},deprecatedMethod:function(t,e,n,i){a.deprecated(t,e,i),"function"==typeof this[e]&&this[e].apply(this,n)},cleanupAttrs:function(t,e){e.forEach(function(e){t.removeAttribute(e)})},cleanupTags:function(t,e){e.indexOf(t.nodeName.toLowerCase())!==-1&&t.parentNode.removeChild(t)},unwrapTags:function(e,n){n.indexOf(e.nodeName.toLowerCase())!==-1&&t.util.unwrap(e,document)},getClosestTag:function(t,e){return a.traverseUp(t,function(t){return t.nodeName.toLowerCase()===e.toLowerCase()})},unwrap:function(t,e){for(var n=e.createDocumentFragment(),i=Array.prototype.slice.call(t.childNodes),r=0;r<i.length;r++)n.appendChild(i[r]);n.childNodes.length?t.parentNode.replaceChild(n,t):t.parentNode.removeChild(t)},guid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}};t.util=a}(window),function(){var e=function(e){t.util.extend(this,e)};e.extend=function(e){var n,i=this;n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},t.util.extend(n,i);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,e&&t.util.extend(n.prototype,e),n},e.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(t){return this.base.options[t]}},["execAction","on","off","subscribe","trigger"].forEach(function(t){e.prototype[t]=function(){return this.base[t].apply(this.base,arguments)}}),t.Extension=e}(),function(){function e(e){return t.util.isBlockContainer(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var n={findMatchingSelectionParent:function(e,n){var i,r,o=n.getSelection();return 0!==o.rangeCount&&(i=o.getRangeAt(0),r=i.commonAncestorContainer,t.util.traverseUp(r,e))},getSelectionElement:function(e){return this.findMatchingSelectionParent(function(e){return t.util.isMediumEditorElement(e)},e)},exportSelection:function(t,e){if(!t)return null;var n=null,i=e.getSelection();if(i.rangeCount>0){var r,o=i.getRangeAt(0),a=o.cloneRange();a.selectNodeContents(t),a.setEnd(o.startContainer,o.startOffset),r=a.toString().length,n={start:r,end:r+o.toString().length},this.doesRangeStartWithImages(o,e)&&(n.startsWithImage=!0);var s=this.getTrailingImageCount(t,n,o.endContainer,o.endOffset);if(s&&(n.trailingImageCount=s),0!==r){var l=this.getIndexRelativeToAdjacentEmptyBlocks(e,t,o.startContainer,o.startOffset);l!==-1&&(n.emptyBlocksIndex=l)}}return n},importSelection:function(t,e,n,i){if(t&&e){var r=n.createRange();r.setStart(e,0),r.collapse(!0);var o,a=e,s=[],l=0,u=!1,c=!1,h=0,d=!1,p=!1,f=null;for((i||t.startsWithImage||"undefined"!=typeof t.emptyBlocksIndex)&&(p=!0);!d&&a;)if(a.nodeType>3)a=s.pop();else{if(3!==a.nodeType||c){if(t.trailingImageCount&&c&&("img"===a.nodeName.toLowerCase()&&h++,h===t.trailingImageCount)){for(var m=0;a.parentNode.childNodes[m]!==a;)m++;r.setEnd(a.parentNode,m+1),d=!0}if(!d&&1===a.nodeType)for(var g=a.childNodes.length-1;g>=0;)s.push(a.childNodes[g]),g-=1}else o=l+a.length,!u&&t.start>=l&&t.start<=o&&(p||t.start<o?(r.setStart(a,t.start-l),u=!0):f=a),u&&t.end>=l&&t.end<=o&&(t.trailingImageCount?c=!0:(r.setEnd(a,t.end-l),d=!0)),l=o;d||(a=s.pop())}!u&&f&&(r.setStart(f,f.length),r.setEnd(f,f.length)),"undefined"!=typeof t.emptyBlocksIndex&&(r=this.importSelectionMoveCursorPastBlocks(n,e,t.emptyBlocksIndex,r)),i&&(r=this.importSelectionMoveCursorPastAnchor(t,r)),this.selectRange(n,r)}},importSelectionMoveCursorPastAnchor:function(e,n){var i=function(t){return"a"===t.nodeName.toLowerCase()};if(e.start===e.end&&3===n.startContainer.nodeType&&n.startOffset===n.startContainer.nodeValue.length&&t.util.traverseUp(n.startContainer,i)){for(var r=n.startContainer,o=n.startContainer.parentNode;null!==o&&"a"!==o.nodeName.toLowerCase();)o.childNodes[o.childNodes.length-1]!==r?o=null:(r=o,o=o.parentNode);if(null!==o&&"a"===o.nodeName.toLowerCase()){for(var a=null,s=0;null===a&&s<o.parentNode.childNodes.length;s++)o.parentNode.childNodes[s]===o&&(a=s);n.setStart(o.parentNode,a+1),n.collapse(!0)}}return n},importSelectionMoveCursorPastBlocks:function(n,i,r,o){var a,s,l=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,e,!1),u=o.startContainer,c=0;for(r=r||1,a=3===u.nodeType&&t.util.isBlockContainer(u.previousSibling)?u.previousSibling:t.util.getClosestBlockContainer(u);l.nextNode();)if(s){if(s=l.currentNode,c++,c===r)break;if(s.textContent.length>0)break}else a===l.currentNode&&(s=l.currentNode);return s||(s=a),o.setStart(t.util.getFirstSelectableLeafNode(s),0),o},getIndexRelativeToAdjacentEmptyBlocks:function(n,i,r,o){if(r.textContent.length>0&&o>0)return-1;var a=r;if(3!==a.nodeType&&(a=r.childNodes[o]),a){if(!t.util.isElementAtBeginningOfBlock(a))return-1;var s=t.util.findPreviousSibling(a);if(!s)return-1;if(s.nodeValue)return-1}for(var l=t.util.getClosestBlockContainer(r),u=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,e,!1),c=0;u.nextNode();){var h=""===u.currentNode.textContent;if((h||c>0)&&(c+=1),u.currentNode===l)return c;h||(c=0)}return c},doesRangeStartWithImages:function(t,e){if(0!==t.startOffset||1!==t.startContainer.nodeType)return!1;if("img"===t.startContainer.nodeName.toLowerCase())return!0;var n=t.startContainer.querySelector("img");if(!n)return!1;for(var i=e.createTreeWalker(t.startContainer,NodeFilter.SHOW_ALL,null,!1);i.nextNode();){var r=i.currentNode;if(r===n)break;if(r.nodeValue)return!1}return!0},getTrailingImageCount:function(t,e,n,i){if(0===i||1!==n.nodeType)return 0;if("img"!==n.nodeName.toLowerCase()&&!n.querySelector("img"))return 0;for(var r=n.childNodes[i-1];r.hasChildNodes();)r=r.lastChild;for(var o,a=t,s=[],l=0,u=!1,c=!1,h=!1,d=0;!h&&a;)if(a.nodeType>3)a=s.pop();else{if(3!==a.nodeType||c){if("img"===a.nodeName.toLowerCase()&&d++,a===r)h=!0;else if(1===a.nodeType)for(var p=a.childNodes.length-1;p>=0;)s.push(a.childNodes[p]),p-=1}else d=0,o=l+a.length,!u&&e.start>=l&&e.start<=o&&(u=!0),u&&e.end>=l&&e.end<=o&&(c=!0),l=o;h||(a=s.pop())}return d},selectionContainsContent:function(t){var e=t.getSelection();if(!e||e.isCollapsed||!e.rangeCount)return!1;if(""!==e.toString().trim())return!0;var n=this.getSelectedParentElement(e.getRangeAt(0));return!(!n||!("img"===n.nodeName.toLowerCase()||1===n.nodeType&&n.querySelector("img")))},selectionInContentEditableFalse:function(t){var e,n=this.findMatchingSelectionParent(function(t){var n=t&&t.getAttribute("contenteditable");return"true"===n&&(e=!0),"#text"!==t.nodeName&&"false"===n},t);return!e&&n},getSelectionHtml:function(t){var e,n,i,r="",o=t.getSelection();if(o.rangeCount){for(i=t.createElement("div"),e=0,n=o.rangeCount;e<n;e+=1)i.appendChild(o.getRangeAt(e).cloneContents());r=i.innerHTML}return r},getCaretOffsets:function(t,e){var n,i;return e||(e=window.getSelection().getRangeAt(0)),n=e.cloneRange(),i=e.cloneRange(),n.selectNodeContents(t),n.setEnd(e.endContainer,e.endOffset),i.selectNodeContents(t),i.setStart(e.endContainer,e.endOffset),{left:n.toString().length,right:i.toString().length}},rangeSelectsSingleNode:function(t){var e=t.startContainer;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===t.startOffset+1},getSelectedParentElement:function(t){return t?this.rangeSelectsSingleNode(t)&&3!==t.startContainer.childNodes[t.startOffset].nodeType?t.startContainer.childNodes[t.startOffset]:3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer:null},getSelectedElements:function(t){var e,n,i,r=t.getSelection();if(!r.rangeCount||r.isCollapsed||!r.getRangeAt(0).commonAncestorContainer)return[];if(e=r.getRangeAt(0),3===e.commonAncestorContainer.nodeType){for(n=[],i=e.commonAncestorContainer;i.parentNode&&1===i.parentNode.childNodes.length;)n.push(i.parentNode),i=i.parentNode;return n}return[].filter.call(e.commonAncestorContainer.getElementsByTagName("*"),function(t){return"function"!=typeof r.containsNode||r.containsNode(t,!0)})},selectNode:function(t,e){var n=e.createRange();n.selectNodeContents(t),this.selectRange(e,n)},select:function(t,e,n,i,r){var o=t.createRange();return o.setStart(e,n),i?o.setEnd(i,r):o.collapse(!0),this.selectRange(t,o),o},clearSelection:function(t,e){e?t.getSelection().collapseToStart():t.getSelection().collapseToEnd()},moveCursor:function(t,e,n){this.select(t,e,n)},getSelectionRange:function(t){var e=t.getSelection();return 0===e.rangeCount?null:e.getRangeAt(0)},selectRange:function(t,e){var n=t.getSelection();n.removeAllRanges(),n.addRange(e)},getSelectionStart:function(t){var e=t.getSelection().anchorNode,n=e&&3===e.nodeType?e.parentNode:e;return n}};t.selection=n}(),function(){function e(e,n){return e.some(function(e){if("function"!=typeof e.getInteractionElements)return!1;var i=e.getInteractionElements();return!!i&&(Array.isArray(i)||(i=[i]),i.some(function(e){return t.util.isDescendant(e,n,!0)}))})}var n=function(t){this.base=t,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};n.prototype={InputEventOnContenteditableSupported:!t.util.isIE&&!t.util.isEdge,attachDOMEvent:function(e,n,i,r){var o=this.base.options.contentWindow,a=this.base.options.ownerDocument;e=t.util.isElement(e)||[o,a].indexOf(e)>-1?[e]:e,Array.prototype.forEach.call(e,function(t){t.addEventListener(n,i,r),this.events.push([t,n,i,r])}.bind(this))},detachDOMEvent:function(e,n,i,r){var o,a,s=this.base.options.contentWindow,l=this.base.options.ownerDocument;e=t.util.isElement(e)||[s,l].indexOf(e)>-1?[e]:e,Array.prototype.forEach.call(e,function(t){o=this.indexOfListener(t,n,i,r),o!==-1&&(a=this.events.splice(o,1)[0],a[0].removeEventListener(a[1],a[2],a[3]))}.bind(this))},indexOfListener:function(t,e,n,i){var r,o,a;for(r=0,o=this.events.length;r<o;r+=1)if(a=this.events[r],a[0]===t&&a[1]===e&&a[2]===n&&a[3]===i)return r;return-1},detachAllDOMEvents:function(){for(var t=this.events.pop();t;)t[0].removeEventListener(t[1],t[2],t[3]),t=this.events.pop()},detachAllEventsFromElement:function(t){for(var e=this.events.filter(function(e){return e&&e[0].getAttribute&&e[0].getAttribute("medium-editor-index")===t.getAttribute("medium-editor-index")}),n=0,i=e.length;n<i;n++){var r=e[n];this.detachDOMEvent(r[0],r[1],r[2],r[3])}},attachAllEventsToElement:function(t){this.listeners.editableInput&&(this.contentCache[t.getAttribute("medium-editor-index")]=t.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(e){this.attachDOMEvent(t,e.name,e.handler.bind(this))},this)},enableCustomEvent:function(t){void 0!==this.disabledEvents[t]&&delete this.disabledEvents[t]},disableCustomEvent:function(t){this.disabledEvents[t]=!0},attachCustomEvent:function(t,e){this.setupListener(t),this.customEvents[t]||(this.customEvents[t]=[]),this.customEvents[t].push(e)},detachCustomEvent:function(t,e){var n=this.indexOfCustomListener(t,e);n!==-1&&this.customEvents[t].splice(n,1)},indexOfCustomListener:function(t,e){return this.customEvents[t]&&this.customEvents[t].length?this.customEvents[t].indexOf(e):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(t,e,n){this.customEvents[t]&&!this.disabledEvents[t]&&this.customEvents[t].forEach(function(t){t(e,n)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(t){t.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(t){this.handleDocumentExecCommand(t)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var t=this.options.ownerDocument;if(this.execCommandListener&&t.execCommand.listeners){var e=t.execCommand.listeners.indexOf(this.execCommandListener);e!==-1&&t.execCommand.listeners.splice(e,1),t.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var t=this.options.ownerDocument;if(!t.execCommand.listeners){var e=function(e,n){t.execCommand.listeners&&t.execCommand.listeners.forEach(function(t){t({command:e[0],value:e[2],args:e,result:n})})},n=function(){var n=t.execCommand.orig.apply(this,arguments);if(!t.execCommand.listeners)return n;var i=Array.prototype.slice.call(arguments);return e(i,n),n};n.orig=t.execCommand,n.listeners=[],n.callListeners=e,t.execCommand=n}},unwrapExecCommand:function(){var t=this.options.ownerDocument;t.execCommand.orig&&(t.execCommand=t.execCommand.orig)},setupListener:function(t){if(!this.listeners[t]){switch(t){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(t){this.contentCache[t.getAttribute("medium-editor-index")]=t.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[t]=!0}},attachToEachElement:function(t,e){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(n){this.attachDOMEvent(n,t,e.bind(this))},this),this.eventsCache.push({name:t,handler:e})},cleanupElement:function(t){var e=t.getAttribute("medium-editor-index");e&&(this.detachAllEventsFromElement(t),this.contentCache&&delete this.contentCache[e])},focusElement:function(t){t.focus(),this.updateFocus(t,{target:t,type:"focus"})},updateFocus:function(n,i){var r,o=this.base.getFocusedElement();o&&"click"===i.type&&this.lastMousedownTarget&&(t.util.isDescendant(o,this.lastMousedownTarget,!0)||e(this.base.extensions,this.lastMousedownTarget))&&(r=o),r||this.base.elements.some(function(e){return!r&&t.util.isDescendant(e,n,!0)&&(r=e),!!r},this);var a=!t.util.isDescendant(o,n,!0)&&!e(this.base.extensions,n);r!==o&&(o&&a&&(o.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",i,o)),r&&(r.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",i,r))),a&&this.triggerCustomEvent("externalInteraction",i)},updateInput:function(t,e){if(this.contentCache){var n=t.getAttribute("medium-editor-index"),i=t.innerHTML;i!==this.contentCache[n]&&this.triggerCustomEvent("editableInput",e,t),this.contentCache[n]=i}},handleDocumentSelectionChange:function(e){if(e.currentTarget&&e.currentTarget.activeElement){var n,i=e.currentTarget.activeElement;this.base.elements.some(function(e){return!!t.util.isDescendant(e,i,!0)&&(n=e,!0)},this),n&&this.updateInput(n,{target:i,currentTarget:n})}},handleDocumentExecCommand:function(){var t=this.base.getFocusedElement();t&&this.updateInput(t,{target:t,currentTarget:t})},handleBodyClick:function(t){this.updateFocus(t.target,t)},handleBodyFocus:function(t){this.updateFocus(t.target,t)},handleBodyMousedown:function(t){this.lastMousedownTarget=t.target},handleInput:function(t){this.updateInput(t.currentTarget,t)},handleClick:function(t){this.triggerCustomEvent("editableClick",t,t.currentTarget)},handleBlur:function(t){this.triggerCustomEvent("editableBlur",t,t.currentTarget)},handleKeypress:function(t){if(this.triggerCustomEvent("editableKeypress",t,t.currentTarget),this.keypressUpdateInput){var e={target:t.target,currentTarget:t.currentTarget};setTimeout(function(){this.updateInput(e.currentTarget,e)}.bind(this),0)}},handleKeyup:function(t){this.triggerCustomEvent("editableKeyup",t,t.currentTarget)},handleMouseover:function(t){this.triggerCustomEvent("editableMouseover",t,t.currentTarget)},handleDragging:function(t){this.triggerCustomEvent("editableDrag",t,t.currentTarget)},handleDrop:function(t){this.triggerCustomEvent("editableDrop",t,t.currentTarget)},handlePaste:function(t){this.triggerCustomEvent("editablePaste",t,t.currentTarget)},handleKeydown:function(e){return this.triggerCustomEvent("editableKeydown",e,e.currentTarget),t.util.isKey(e,t.util.keyCode.SPACE)?this.triggerCustomEvent("editableKeydownSpace",e,e.currentTarget):t.util.isKey(e,t.util.keyCode.ENTER)||e.ctrlKey&&t.util.isKey(e,t.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",e,e.currentTarget):t.util.isKey(e,t.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",e,e.currentTarget):t.util.isKey(e,[t.util.keyCode.DELETE,t.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",e,e.currentTarget):void 0}},t.Events=n}(),function(){var e=t.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(n){e.isBuiltInButton(n)?t.Extension.call(this,this.defaults[n]):t.Extension.call(this,n)},init:function(){t.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this));
},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var t=this.document.createElement("button"),e=this.contentDefault,n=this.getAria(),i=this.getEditorOption("buttonLabels");return t.classList.add("medium-editor-action"),t.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(e){t.classList.add(e)}),t.setAttribute("data-action",this.getAction()),n&&(t.setAttribute("title",n),t.setAttribute("aria-label",n)),this.attrs&&Object.keys(this.attrs).forEach(function(e){t.setAttribute(e,this.attrs[e])},this),"fontawesome"===i&&this.contentFA&&(e=this.contentFA),t.innerHTML=e,t},handleClick:function(t){t.preventDefault(),t.stopPropagation();var e=this.getAction();e&&this.execAction(e)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var t=null;return this.useQueryState&&(t=this.base.queryCommandState(this.getAction())),t},isAlreadyApplied:function(t){var e,n,i=!1,r=this.getTagNames();return this.knownState===!1||this.knownState===!0?this.knownState:(r&&r.length>0&&(i=r.indexOf(t.nodeName.toLowerCase())!==-1),!i&&this.style&&(e=this.style.value.split("|"),n=this.window.getComputedStyle(t,null).getPropertyValue(this.style.prop),e.forEach(function(t){this.knownState||(i=n.indexOf(t)!==-1,(i||"text-decoration"!==this.style.prop)&&(this.knownState=i))},this)),i)}});e.isBuiltInButton=function(e){return"string"==typeof e&&t.extensions.button.prototype.defaults.hasOwnProperty(e)},t.extensions.button=e}(),function(){t.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var e=t.extensions.button.extend({init:function(){t.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return!!this.hasForm&&this.getForm().classList.contains(this.activeClass)},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var t=this.base.getExtensionByName("toolbar");t&&t.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var t=this.base.getExtensionByName("toolbar");t&&t.hideToolbarDefaultActions()},setToolbarPosition:function(){var t=this.base.getExtensionByName("toolbar");t&&t.setToolbarPosition()}});t.extensions.form=e}(),function(){var e=t.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){t.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(e){e.preventDefault(),e.stopPropagation();var n=t.selection.getSelectionRange(this.document);return"a"===n.startContainer.nodeName.toLowerCase()||"a"===n.endContainer.nodeName.toLowerCase()||t.util.getClosestTag(t.selection.getSelectedParentElement(n),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(e){t.util.isKey(e,t.util.keyCode.K)&&t.util.isMetaCtrlKey(e)&&!e.shiftKey&&this.handleClick(e)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var t=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return t.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),t.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&t.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target">',"<label>",this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&t.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),t.join("")},isDisplayed:function(){return t.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){t.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(e){var n=this.getInput(),i=this.getAnchorTargetCheckbox(),r=this.getAnchorButtonCheckbox();if(e=e||{value:""},"string"==typeof e&&(e={value:e}),this.base.saveSelection(),this.hideToolbarDefaultActions(),t.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),n.value=e.value,n.focus(),i&&(i.checked="_blank"===e.target),r){var o=e.buttonClass?e.buttonClass.split(" "):[];r.checked=o.indexOf(this.customClassOption)!==-1}},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},getFormOpts:function(){var t=this.getAnchorTargetCheckbox(),e=this.getAnchorButtonCheckbox(),n={value:this.getInput().value.trim()};return this.linkValidation&&(n.value=this.checkLinkFormat(n.value)),n.target="_self",t&&t.checked&&(n.target="_blank"),e&&e.checked&&(n.buttonClass=this.customClassOption),n},doFormSave:function(){var t=this.getFormOpts();this.completeFormSave(t)},completeFormSave:function(t){this.base.restoreSelection(),this.execAction(this.action,t),this.base.checkSelection()},ensureEncodedUri:function(t){return t===decodeURI(t)?encodeURI(t):t},ensureEncodedUriComponent:function(t){return t===decodeURIComponent(t)?encodeURIComponent(t):t},ensureEncodedParam:function(t){var e=t.split("="),n=e[0],i=e[1];return n+(void 0===i?"":"="+this.ensureEncodedUriComponent(i))},ensureEncodedQuery:function(t){return t.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(t){var e=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,n=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,i=t.split("?"),r=i[0],o=i[1];return n.test(t)?"tel:"+t:(e.test(t)?"":"http://")+this.ensureEncodedUri(r)+(void 0===o?"":"?"+this.ensureEncodedQuery(o))},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(t){var e=t.querySelector(".medium-editor-toolbar-close"),n=t.querySelector(".medium-editor-toolbar-save"),i=t.querySelector(".medium-editor-toolbar-input");this.on(t,"click",this.handleFormClick.bind(this)),this.on(i,"keyup",this.handleTextboxKeyup.bind(this)),this.on(e,"click",this.handleCloseClick.bind(this)),this.on(n,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var t=this.document,e=t.createElement("div");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),e.innerHTML=this.getTemplate(),this.attachFormEvents(e),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(e){return e.keyCode===t.util.keyCode.ENTER?(e.preventDefault(),void this.doFormSave()):void(e.keyCode===t.util.keyCode.ESCAPE&&(e.preventDefault(),this.doFormCancel()))},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.anchor=e}(),function(){var e=t.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var t=this.document.createElement("div");return t.id="medium-editor-anchor-preview-"+this.getEditorId(),t.className="medium-editor-anchor-preview",t.innerHTML=this.getTemplate(),this.on(t,"click",this.handleClick.bind(this)),t},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(t){return!(!this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&!t.getAttribute("data-disable-preview"))||(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=t.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=t.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=t,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(t){t=t||this.activeAnchor;var e,n,i,r,o,a=this.window.innerWidth,s=this.anchorPreview.offsetHeight,l=t.getBoundingClientRect(),u=this.diffLeft,c=this.diffTop,h=this.getEditorOption("elementsContainer"),d=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,p={};e=this.anchorPreview.offsetWidth/2;var f=this.base.getExtensionByName("toolbar");f&&(u=f.diffLeft,c=f.diffTop),n=u-e,d?(r=h.getBoundingClientRect(),["top","left"].forEach(function(t){p[t]=l[t]-r[t]}),p.width=l.width,p.height=l.height,l=p,a=r.width,o=h.scrollTop):o=this.window.pageYOffset,i=l.left+l.width/2,o+=s+l.top+l.height-c-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(o)+"px",this.anchorPreview.style.right="initial",i<e?(this.anchorPreview.style.left=n+e+"px",this.anchorPreview.style.right="initial"):a-i<e?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=n+i+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(t){var e=this.base.getExtensionByName("anchor"),n=this.activeAnchor;e&&n&&(t.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(n){var t={value:n.attributes.href.value,target:n.getAttribute("target"),buttonClass:n.getAttribute("class")};e.showForm(t),n=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(e){var n=t.util.getClosestTag(e.target,"a");if(!1!==n){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(n.outerHTML)||/href=["']#\S+["']/.test(n.outerHTML)))return!0;var i=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&i&&i.isDisplayed&&i.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==n&&this.detachPreviewHandlers(),this.anchorToPreview=n,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(t){t.relatedTarget&&/anchor-preview/.test(t.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var t=(new Date).getTime()-this.lastOver;t>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});t.extensions.anchorPreview=e}(),function(){function e(e){return!t.util.getClosestTag(e,"a")}var n,i,r,o;n=[" ","\t","\n","\r"," "," "," "," "," ","\u2028","\u2029"],i="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",r="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+i+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+i+"))",o=new RegExp("^("+i+")$","i");var a=t.Extension.extend({init:function(){t.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var t=0,e=0;e<this.window._mediumEditors.length;e++){var n=this.window._mediumEditors[e];null!==n&&void 0!==n.getExtensionByName("autoLink")&&t++}return 1===t},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(t,e){this.performLinking(e)},onKeypress:function(e){this.disableEventHandling||t.util.isKey(e,[t.util.keyCode.SPACE,t.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var t=this.base.exportSelection();this.performLinking(e.target)&&this.base.importSelection(t,!0)}catch(t){window.console&&window.console.error("Failed to perform linking",t),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(e){var n=t.util.splitByBlockElements(e),i=!1;0===n.length&&(n=[e]);for(var r=0;r<n.length;r++)i=this.removeObsoleteAutoLinkSpans(n[r])||i,i=this.performLinkingWithinElement(n[r])||i;return this.base.events.updateInput(e,{target:e,currentTarget:e}),i},removeObsoleteAutoLinkSpans:function(n){if(!n||3===n.nodeType)return!1;for(var i=n.querySelectorAll('span[data-auto-link="true"]'),r=!1,o=0;o<i.length;o++){var a=i[o].textContent;if(a.indexOf("://")===-1&&(a=t.util.ensureUrlHasProtocol(a)),i[o].getAttribute("data-href")!==a&&e(i[o])){r=!0;var s=a.replace(/\s+$/,"");if(i[o].getAttribute("data-href")===s){var l=a.length-s.length,u=t.util.splitOffDOMTree(i[o],this.splitTextBeforeEnd(i[o],l));i[o].parentNode.insertBefore(u,i[o].nextSibling)}else t.util.unwrap(i[o],this.document)}}return r},splitTextBeforeEnd:function(t,e){for(var n=this.document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1),i=!0;i;)i=null!==n.lastChild();for(var r,o,a;e>0&&null!==a;)r=n.currentNode,o=r.nodeValue,o.length>e?(a=r.splitText(o.length-e),e=0):(a=n.previousNode(),e-=o.length);return a},performLinkingWithinElement:function(e){for(var n=this.findLinkableText(e),i=!1,r=0;r<n.length;r++){var o=t.util.findOrCreateMatchingTextNodes(this.document,e,n[r]);this.shouldNotLink(o)||this.createAutoLink(o,n[r].href)}return i},shouldNotLink:function e(n){for(var e=!1,i=0;i<n.length&&e===!1;i++)e=!!t.util.traverseUp(n[i],function(t){return"a"===t.nodeName.toLowerCase()||t.getAttribute&&"true"===t.getAttribute("data-auto-link")});return e},findLinkableText:function(t){for(var e=new RegExp(r,"gi"),i=t.textContent,a=null,s=[];null!==(a=e.exec(i));){var l=!0,u=a.index+a[0].length;l=!(0!==a.index&&n.indexOf(i[a.index-1])===-1||u!==i.length&&n.indexOf(i[u])===-1),l=l&&(a[0].indexOf("/")!==-1||o.test(a[0].split(".").pop().split("?").shift())),l&&s.push({href:a[0],start:a.index,end:u})}return s},createAutoLink:function(e,n){n=t.util.ensureUrlHasProtocol(n);var i=t.util.createLink(this.document,e,n,this.getEditorOption("targetBlank")?"_blank":null),r=this.document.createElement("span");for(r.setAttribute("data-auto-link","true"),r.setAttribute("data-href",n),i.insertBefore(r,i.firstChild);i.childNodes.length>1;)r.appendChild(i.childNodes[1])}});t.extensions.autoLink=a}(),function(){function e(e){var i=t.util.getContainerEditorElement(e),r=Array.prototype.slice.call(i.parentElement.querySelectorAll("."+n));r.forEach(function(t){t.classList.remove(n)})}var n="medium-editor-dragover",i=t.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy";var i=t.target.classList?t.target:t.target.parentElement;e(i),"dragover"===t.type&&i.classList.add(n)},handleDrop:function(t){t.preventDefault(),t.stopPropagation(),this.base.selectElement(t.target);var n=this.base.exportSelection();n.start=n.end,this.base.importSelection(n),t.dataTransfer.files&&Array.prototype.slice.call(t.dataTransfer.files).forEach(function(t){this.isAllowedFile(t)&&t.type.match("image")&&this.insertImageFile(t)},this),e(t.target)},isAllowedFile:function(t){return this.allowedTypes.some(function(e){return!!t.type.match(e)})},insertImageFile:function(e){if("function"==typeof FileReader){var n=new FileReader;n.readAsDataURL(e),n.addEventListener("load",function(e){var n=this.document.createElement("img");n.src=e.target.result,t.util.insertHTMLCommand(this.document,n.outerHTML)}.bind(this))}}});t.extensions.fileDragging=i}(),function(){var e=t.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(t){var e=t.key.charCodeAt(0);this.keys[e]||(this.keys[e]=[]),this.keys[e].push(t)},this)},handleKeydown:function(e){var n=t.util.getKeyCode(e);if(this.keys[n]){var i=t.util.isMetaCtrlKey(e),r=!!e.shiftKey,o=!!e.altKey;this.keys[n].forEach(function(t){t.meta!==i||t.shift!==r||t.alt!==o&&void 0!==t.alt||(e.preventDefault(),e.stopPropagation(),"function"==typeof t.command?t.command.apply(this):!1!==t.command&&this.execAction(t.command))},this)}}});t.extensions.keyboardCommands=e}(),function(){var e=t.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){t.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(t){if(t.preventDefault(),t.stopPropagation(),!this.isDisplayed()){var e=this.document.queryCommandValue("fontName")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(t){var e=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),e.value=t||"",e.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var t,e=this.document,n=e.createElement("div"),i=e.createElement("select"),r=e.createElement("a"),o=e.createElement("a");n.className="medium-editor-toolbar-form",n.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(n,"click",this.handleFormClick.bind(this));for(var a=0;a<this.fonts.length;a++)t=e.createElement("option"),t.innerHTML=this.fonts[a],t.value=this.fonts[a],i.appendChild(t);return i.className="medium-editor-toolbar-select",n.appendChild(i),this.on(i,"change",this.handleFontChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",n.appendChild(o),this.on(o,"click",this.handleSaveClick.bind(this),!0),r.setAttribute("href","#"),r.className="medium-editor-toobar-close",r.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",n.appendChild(r),this.on(r,"click",this.handleCloseClick.bind(this)),n},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){t.selection.getSelectedElements(this.document).forEach(function(t){"font"===t.nodeName.toLowerCase()&&t.hasAttribute("face")&&t.removeAttribute("face")})},handleFontChange:function(){var t=this.getSelect().value;""===t?this.clearFontName():this.execAction("fontName",{value:t})},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.fontName=e}(),function(){var e=t.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){t.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(t){if(t.preventDefault(),t.stopPropagation(),!this.isDisplayed()){var e=this.document.queryCommandValue("fontSize")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(t){var e=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),e.value=t||"",e.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var t=this.document,e=t.createElement("div"),n=t.createElement("input"),i=t.createElement("a"),r=t.createElement("a");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(e,"click",this.handleFormClick.bind(this)),n.setAttribute("type","range"),n.setAttribute("min","1"),n.setAttribute("max","7"),n.className="medium-editor-toolbar-input",e.appendChild(n),this.on(n,"change",this.handleSliderChange.bind(this)),r.setAttribute("href","#"),r.className="medium-editor-toobar-save",r.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",e.appendChild(r),this.on(r,"click",this.handleSaveClick.bind(this),!0),i.setAttribute("href","#"),i.className="medium-editor-toobar-close",i.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",e.appendChild(i),this.on(i,"click",this.handleCloseClick.bind(this)),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){t.selection.getSelectedElements(this.document).forEach(function(t){"font"===t.nodeName.toLowerCase()&&t.hasAttribute("size")&&t.removeAttribute("size")})},handleSliderChange:function(){var t=this.getInput().value;"4"===t?this.clearFontSize():this.execAction("fontSize",{value:t})},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.fontSize=e}(),function(){function e(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function n(t,e,n){var i=t.clipboardData||e.clipboardData||n.dataTransfer,r={};if(!i)return r;
if(i.getData){var o=i.getData("Text");o&&o.length>0&&(r["text/plain"]=o)}if(i.types)for(var a=0;a<i.types.length;a++){var s=i.types[a];r[s]=i.getData(s)}return r}var i="%ME_PASTEBIN%",r=null,o=null,a=function(t){t.stopPropagation()},s=t.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){t.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(t){this.on(t,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(t,e){this.on(e,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(t,e){if(!t.defaultPrevented){var i=n(t,this.window,this.document),r=i["text/html"],o=i["text/plain"];this.window.clipboardData&&void 0===t.clipboardData&&!r&&(r=o),(r||o)&&(t.preventDefault(),this.doPaste(r,o,e))}},doPaste:function(e,n,i){var r,o,a="";if(this.cleanPastedHTML&&e)return this.cleanPaste(e);if(this.getEditorOption("disableReturn")||i&&i.getAttribute("data-disable-return"))a=t.util.htmlEntities(n);else if(r=n.split(/[\r\n]+/g),r.length>1)for(o=0;o<r.length;o+=1)""!==r[o]&&(a+="<p>"+t.util.htmlEntities(r[o])+"</p>");else a=t.util.htmlEntities(r[0]);t.util.insertHTMLCommand(this.document,a)},handlePasteBinPaste:function(t){if(t.defaultPrevented)return void this.removePasteBin();var e=n(t,this.window,this.document),i=e["text/html"],r=e["text/plain"],a=o;return!this.cleanPastedHTML||i?(t.preventDefault(),this.removePasteBin(),this.doPaste(i,r,a),void this.trigger("editablePaste",{currentTarget:a,target:a},a)):void setTimeout(function(){this.cleanPastedHTML&&(i=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(i,r,a),this.trigger("editablePaste",{currentTarget:a,target:a},a)}.bind(this),0)},handleKeydown:function(e,n){t.util.isKey(e,t.util.keyCode.V)&&t.util.isMetaCtrlKey(e)&&(e.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(n))},createPasteBin:function(e){var n,s=t.selection.getSelectionRange(this.document),l=this.window.pageYOffset;o=e,s&&(n=s.getClientRects(),l+=n.length?n[0].top:s.startContainer.getBoundingClientRect().top),r=s;var u=this.document.createElement("div");u.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),u.setAttribute("style","border: 1px red solid; position: absolute; top: "+l+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),u.setAttribute("contentEditable",!0),u.innerHTML=i,this.document.body.appendChild(u),this.on(u,"focus",a),this.on(u,"focusin",a),this.on(u,"focusout",a),u.focus(),t.selection.selectNode(u,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(u,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==r&&(t.selection.selectRange(this.document,r),r=null),null!==o&&(o=null);var e=this.getPasteBin();e&&e&&(this.off(e,"focus",a),this.off(e,"focusin",a),this.off(e,"focusout",a),this.off(e,"paste",this.boundHandlePaste),e.parentElement.removeChild(e))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var t=this.getPasteBin();if(!t)return!1;if(t.firstChild&&"mcepastebin"===t.firstChild.id)return!1;var e=t.innerHTML;return!(!e||e===i)&&e},cleanPaste:function(t){var n,i,r,o,a=/<p|<br|<div/.test(t),s=[].concat(this.preCleanReplacements||[],e(),this.cleanReplacements||[]);for(n=0;n<s.length;n+=1)t=t.replace(s[n][0],s[n][1]);if(!a)return this.pasteHTML(t);for(r=this.document.createElement("div"),r.innerHTML="<p>"+t.split("<br><br>").join("</p><p>")+"</p>",i=r.querySelectorAll("a,p,div,br"),n=0;n<i.length;n+=1)switch(o=i[n],o.innerHTML=o.innerHTML.replace(/\n/gi," "),o.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(o);break;case"br":this.filterLineBreak(o)}this.pasteHTML(r.innerHTML)},pasteHTML:function(e,n){n=t.util.defaults({},n,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var i,r,o,a,s=this.document.createDocumentFragment();for(s.appendChild(this.document.createElement("body")),a=s.querySelector("body"),a.innerHTML=e,this.cleanupSpans(a),i=a.querySelectorAll("*"),o=0;o<i.length;o+=1)r=i[o],"a"===r.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&t.util.setTargetBlank(r),t.util.cleanupAttrs(r,n.cleanAttrs),t.util.cleanupTags(r,n.cleanTags),t.util.unwrapTags(r,n.unwrapTags);t.util.insertHTMLCommand(this.document,a.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(t){return t&&("p"===t.nodeName.toLowerCase()||"div"===t.nodeName.toLowerCase())},filterCommonBlocks:function(t){/^\s*$/.test(t.textContent)&&t.parentNode&&t.parentNode.removeChild(t)},filterLineBreak:function(t){this.isCommonBlock(t.previousElementSibling)?this.removeWithParent(t):!this.isCommonBlock(t.parentNode)||t.parentNode.firstChild!==t&&t.parentNode.lastChild!==t?t.parentNode&&1===t.parentNode.childElementCount&&""===t.parentNode.textContent&&this.removeWithParent(t):this.removeWithParent(t)},removeWithParent:function(t){t&&t.parentNode&&(t.parentNode.parentNode&&1===t.parentNode.childElementCount?t.parentNode.parentNode.removeChild(t.parentNode):t.parentNode.removeChild(t))},cleanupSpans:function(e){var n,i,r,o=e.querySelectorAll(".replace-with"),a=function(t){return t&&"#text"!==t.nodeName&&"false"===t.getAttribute("contenteditable")};for(n=0;n<o.length;n+=1)i=o[n],r=this.document.createElement(i.classList.contains("bold")?"b":"i"),i.classList.contains("bold")&&i.classList.contains("italic")?r.innerHTML="<i>"+i.innerHTML+"</i>":r.innerHTML=i.innerHTML,i.parentNode.replaceChild(r,i);for(o=e.querySelectorAll("span"),n=0;n<o.length;n+=1){if(i=o[n],t.util.traverseUp(i,a))return!1;t.util.unwrap(i,this.document)}}});t.extensions.paste=s}(),function(){var e=t.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){t.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(t,e){this.initElement(e)},initElement:function(t){t.getAttribute("data-placeholder")||t.setAttribute("data-placeholder",this.text),this.updatePlaceholder(t)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(t,e){this.cleanupElement(e)},cleanupElement:function(t){t.getAttribute("data-placeholder")===this.text&&t.removeAttribute("data-placeholder")},showPlaceholder:function(e){e&&(t.util.isFF&&0===e.childNodes.length?(e.classList.add("medium-editor-placeholder-relative"),e.classList.remove("medium-editor-placeholder")):(e.classList.add("medium-editor-placeholder"),e.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(t){t&&(t.classList.remove("medium-editor-placeholder"),t.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(t,e){return t.querySelector("img, blockquote, ul, ol, table")||""!==t.textContent.replace(/^\s+|\s+$/g,"")?this.hidePlaceholder(t):void(e||this.showPlaceholder(t))},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(t,e){var n=this.hideOnClick&&e===this.base.getFocusedElement();this.updatePlaceholder(e,n)},handleFocus:function(t,e){this.hidePlaceholder(e)},handleBlur:function(t,e){this.updatePlaceholder(e)}});t.extensions.placeholder=e}(),function(){var e=t.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){t.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(t,e){return this.base.extensions.forEach(function(n){if(n!==this)return t.apply(e||this,arguments)},this)},createToolbar:function(){var t=this.document.createElement("div");return t.id="medium-editor-toolbar-"+this.getEditorId(),t.className="medium-editor-toolbar",this.static?t.className+=" static-toolbar":this.relativeContainer?t.className+=" medium-editor-relative-toolbar":t.className+=" medium-editor-stalker-toolbar",t.appendChild(this.createToolbarButtons()),this.forEachExtension(function(e){e.hasForm&&t.appendChild(e.getForm())}),this.attachEventHandlers(),t},createToolbarButtons:function(){var e,n,i,r,o,a,s=this.document.createElement("ul");return s.id="medium-editor-toolbar-actions"+this.getEditorId(),s.className="medium-editor-toolbar-actions",s.style.display="block",this.buttons.forEach(function(i){"string"==typeof i?(o=i,a=null):(o=i.name,a=i),r=this.base.addBuiltInExtension(o,a),r&&"function"==typeof r.getButton&&(n=r.getButton(this.base),e=this.document.createElement("li"),t.util.isElement(n)?e.appendChild(n):e.innerHTML=n,s.appendChild(e))},this),i=s.querySelectorAll("button"),i.length>0&&(i[0].classList.add(this.firstButtonClass),i[i.length-1].classList.add(this.lastButtonClass)),s},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=t.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(e){return!(e&&e.target&&t.util.isDescendant(this.getToolbarElement(),e.target))&&void this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(t){t.hasForm&&t.isDisplayed()&&t.hideForm()})},multipleBlockElementsSelected:function(){var e=/<[^\/>][^>]*><\/[^>]+>/gim,n=new RegExp("<("+t.util.blockContainerElementNames.join("|")+")[^>]*>","g"),i=t.selection.getSelectionHtml(this.document).replace(e,""),r=i.match(n);return!!r&&r.length>1},modifySelection:function(){var e=this.window.getSelection(),n=e.getRangeAt(0);if(this.standardizeSelectionStart&&n.startContainer.nodeValue&&n.startOffset===n.startContainer.nodeValue.length){var i=t.util.findAdjacentTextNodeWithContent(t.selection.getSelectionElement(this.window),n.startContainer,this.document);if(i){for(var r=0;0===i.nodeValue.substr(r,1).trim().length;)r+=1;n=t.selection.select(this.document,i,r,n.endContainer,n.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||t.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var e=t.selection.getSelectionElement(this.window);return!e||this.getEditorElements().indexOf(e)===-1||e.getAttribute("data-disable-toolbar")?this.hideToolbar():this.updateOnEmptySelection&&this.static?this.showAndUpdateToolbar():!t.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(t){"function"==typeof t.isActive&&"function"==typeof t.setInactive&&t.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var e,n=[],i=null,r=t.selection.getSelectionRange(this.document),o=function(t){"function"==typeof t.checkState?t.checkState(e):"function"==typeof t.isActive&&"function"==typeof t.isAlreadyApplied&&"function"==typeof t.setActive&&!t.isActive()&&t.isAlreadyApplied(e)&&t.setActive()};if(r&&(this.forEachExtension(function(t){return"function"==typeof t.queryCommandState&&(i=t.queryCommandState(),null!==i)?void(i&&"function"==typeof t.setActive&&t.setActive()):void n.push(t)}),e=t.selection.getSelectedParentElement(r),this.getEditorElements().some(function(n){return t.util.isDescendant(n,e,!0)})))for(;e&&(n.forEach(o),!t.util.isMediumEditorElement(e));)e=e.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var t=this.base.getFocusedElement(),e=this.window.getSelection();return t?void(!this.static&&e.isCollapsed||(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(t):this.positionToolbar(e)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))):this},positionStaticToolbar:function(t){this.getToolbarElement().style.left="0";var e,n=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,i=this.window.innerWidth,r=this.getToolbarElement(),o=t.getBoundingClientRect(),a=o.top+n,s=o.left+o.width/2,l=r.offsetHeight,u=r.offsetWidth,c=u/2;switch(this.sticky?n>a+t.offsetHeight-l-this.stickyTopOffset?(r.style.top=a+t.offsetHeight-l+"px",r.classList.remove("medium-editor-sticky-toolbar")):n>a-l-this.stickyTopOffset?(r.classList.add("medium-editor-sticky-toolbar"),r.style.top=this.stickyTopOffset+"px"):(r.classList.remove("medium-editor-sticky-toolbar"),r.style.top=a-l+"px"):r.style.top=a-l+"px",this.align){case"left":e=o.left;break;case"right":e=o.right-u;break;case"center":e=s-c}e<0?e=0:e+u>i&&(e=i-Math.ceil(u)-1),r.style.left=e+"px"},positionToolbar:function(t){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var e=t.getRangeAt(0),n=e.getBoundingClientRect();(!n||0===n.height&&0===n.width&&e.startContainer===e.endContainer)&&(n=1===e.startContainer.nodeType&&e.startContainer.querySelector("img")?e.startContainer.querySelector("img").getBoundingClientRect():e.startContainer.getBoundingClientRect());var i,r,o=this.window.innerWidth,a=this.getToolbarElement(),s=a.offsetHeight,l=a.offsetWidth,u=l/2,c=50,h=this.diffLeft-u,d=this.getEditorOption("elementsContainer"),p=["absolute","fixed"].indexOf(window.getComputedStyle(d).getPropertyValue("position"))>-1,f={},m={};p?(r=d.getBoundingClientRect(),["top","left"].forEach(function(t){m[t]=n[t]-r[t]}),m.width=n.width,m.height=n.height,n=m,o=r.width,f.top=d.scrollTop):f.top=this.window.pageYOffset,i=n.left+n.width/2,f.top+=n.top-s,n.top<c?(a.classList.add("medium-toolbar-arrow-over"),a.classList.remove("medium-toolbar-arrow-under"),f.top+=c+n.height-this.diffTop):(a.classList.add("medium-toolbar-arrow-under"),a.classList.remove("medium-toolbar-arrow-over"),f.top+=this.diffTop),i<u?(f.left=h+u,f.right="initial"):o-i<u?(f.left="auto",f.right=0):(f.left=h+i,f.right="initial"),["top","left","right"].forEach(function(t){a.style[t]=f[t]+(isNaN(f[t])?"":"px")})}});t.extensions.toolbar=e}(),function(){var e=t.Extension.extend({init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(t){var e="medium-editor-dragover";t.preventDefault(),t.dataTransfer.dropEffect="copy","dragover"===t.type?t.target.classList.add(e):"dragleave"===t.type&&t.target.classList.remove(e)},handleDrop:function(e){var n,i="medium-editor-dragover";e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&(n=Array.prototype.slice.call(e.dataTransfer.files,0),n.some(function(e){if(e.type.match("image")){var n,i;n=new FileReader,n.readAsDataURL(e),i="medium-img-"+ +new Date,t.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+i+'" />'),n.onload=function(){var t=this.document.getElementById(i);t&&(t.removeAttribute("id"),t.removeAttribute("class"),t.src=n.result)}.bind(this)}}.bind(this))),e.target.classList.remove(i)}});t.extensions.imageDragging=e}(),function(){function e(e){var n=t.selection.getSelectionStart(this.options.ownerDocument),i=n.textContent,r=t.selection.getCaretOffsets(n);(void 0===i[r.left-1]||""===i[r.left-1].trim()||void 0!==i[r.left]&&""===i[r.left].trim())&&e.preventDefault()}function n(e,n){if(this.options.disableReturn||n.getAttribute("data-disable-return"))e.preventDefault();else if(this.options.disableDoubleReturn||n.getAttribute("data-disable-double-return")){var i=t.selection.getSelectionStart(this.options.ownerDocument);(i&&""===i.textContent.trim()&&"li"!==i.nodeName.toLowerCase()||i.previousElementSibling&&"br"!==i.previousElementSibling.nodeName.toLowerCase()&&""===i.previousElementSibling.textContent.trim())&&e.preventDefault()}}function i(e){var n=t.selection.getSelectionStart(this.options.ownerDocument),i=n&&n.nodeName.toLowerCase();"pre"===i&&(e.preventDefault(),t.util.insertHTMLCommand(this.options.ownerDocument,"    ")),t.util.isListItem(n)&&(e.preventDefault(),e.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function r(e){var n,i=t.selection.getSelectionStart(this.options.ownerDocument),r=i.nodeName.toLowerCase(),o=/^(\s+|<br\/?>)?$/i,a=/h\d/i;t.util.isKey(e,[t.util.keyCode.BACKSPACE,t.util.keyCode.ENTER])&&i.previousElementSibling&&a.test(r)&&0===t.selection.getCaretOffsets(i).left?t.util.isKey(e,t.util.keyCode.BACKSPACE)&&o.test(i.previousElementSibling.innerHTML)?(i.previousElementSibling.parentNode.removeChild(i.previousElementSibling),e.preventDefault()):!this.options.disableDoubleReturn&&t.util.isKey(e,t.util.keyCode.ENTER)&&(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.previousElementSibling.parentNode.insertBefore(n,i),e.preventDefault()):t.util.isKey(e,t.util.keyCode.DELETE)&&i.nextElementSibling&&i.previousElementSibling&&!a.test(r)&&o.test(i.innerHTML)&&a.test(i.nextElementSibling.nodeName.toLowerCase())?(t.selection.moveCursor(this.options.ownerDocument,i.nextElementSibling),i.previousElementSibling.parentNode.removeChild(i),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&"li"===r&&o.test(i.innerHTML)&&!i.previousElementSibling&&!i.parentElement.previousElementSibling&&i.nextElementSibling&&"li"===i.nextElementSibling.nodeName.toLowerCase()?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.parentElement.insertBefore(n,i.parentElement),t.selection.moveCursor(this.options.ownerDocument,n),i.parentElement.removeChild(i),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&t.util.getClosestTag(i,"blockquote")!==!1&&0===t.selection.getCaretOffsets(i).left?(e.preventDefault(),t.util.execFormatBlock(this.options.ownerDocument,"p")):t.util.isKey(e,t.util.keyCode.ENTER)&&t.util.getClosestTag(i,"blockquote")!==!1&&0===t.selection.getCaretOffsets(i).right?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.insertBefore(n,i.nextSibling),t.selection.moveCursor(this.options.ownerDocument,n),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&t.util.isMediumEditorElement(i.parentElement)&&!i.previousElementSibling&&i.nextElementSibling&&o.test(i.innerHTML)&&(e.preventDefault(),t.selection.moveCursor(this.options.ownerDocument,i.nextSibling),i.parentElement.removeChild(i))}function o(e){var n,i=t.selection.getSelectionStart(this.options.ownerDocument);i&&(t.util.isMediumEditorElement(i)&&0===i.children.length&&!t.util.isBlockContainer(i)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!t.util.isKey(e,t.util.keyCode.ENTER)||t.util.isListItem(i)||t.util.isBlockContainer(i)||(n=i.nodeName.toLowerCase(),"a"===n?this.options.ownerDocument.execCommand("unlink",!1,null):e.shiftKey||e.ctrlKey||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function a(t,e){var n=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');n&&(n.value=e.innerHTML.trim())}function s(t){t._mediumEditors||(t._mediumEditors=[null]),this.id||(this.id=t._mediumEditors.length),t._mediumEditors[this.id]=this}function l(t){t._mediumEditors&&t._mediumEditors[this.id]&&(t._mediumEditors[this.id]=null)}function u(e,n,i){var r=[];if(e||(e=[]),"string"==typeof e&&(e=n.querySelectorAll(e)),t.util.isElement(e)&&(e=[e]),i)for(var o=0;o<e.length;o++){var a=e[o];!t.util.isElement(a)||a.getAttribute("data-medium-editor-element")||a.getAttribute("medium-editor-textarea-id")||r.push(a)}else r=Array.prototype.slice.apply(e);return r}function c(t){var e=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');e&&(e.classList.remove("medium-editor-hidden"),e.removeAttribute("medium-editor-textarea-id")),t.parentNode&&t.parentNode.removeChild(t)}function h(t,e){return Object.keys(e).forEach(function(n){void 0===t[n]&&(t[n]=e[n])}),t}function d(t,e,n){var i={window:n.options.contentWindow,document:n.options.ownerDocument,base:n};return t=h(t,i),"function"==typeof t.init&&t.init(),t.name||(t.name=e),t}function p(){return!this.elements.every(function(t){return!!t.getAttribute("data-disable-toolbar")})&&this.options.toolbar!==!1}function f(){return!!p.call(this)&&this.options.anchorPreview!==!1}function m(){return this.options.placeholder!==!1}function g(){return this.options.autoLink!==!1}function v(){return this.options.imageDragging!==!1}function b(){return this.options.keyboardCommands!==!1}function y(){return!this.options.extensions.imageDragging}function w(t){for(var e=this.options.ownerDocument.createElement("div"),n=Date.now(),i="medium-editor-"+n,r=t.attributes;this.options.ownerDocument.getElementById(i);)n++,i="medium-editor-"+n;e.className=t.className,e.id=i,e.innerHTML=t.value,t.setAttribute("medium-editor-textarea-id",i);for(var o=0,a=r.length;o<a;o++)e.hasAttribute(r[o].nodeName)||e.setAttribute(r[o].nodeName,r[o].nodeValue);return t.form&&this.on(t.form,"reset",function(t){t.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(i))}.bind(this)),t.classList.add("medium-editor-hidden"),t.parentNode.insertBefore(e,t),e}function E(e,i){if(!e.getAttribute("data-medium-editor-element")){"textarea"===e.nodeName.toLowerCase()&&(e=w.call(this,e),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=a.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),this.options.disableEditing||e.getAttribute("data-disable-editing")||(e.setAttribute("contentEditable",!0),e.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(e.getAttribute("data-disable-return")||e.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),this.options.disableReturn||e.getAttribute("data-disable-return")||this.on(e,"keyup",o.bind(this));var r=t.util.guid();e.setAttribute("data-medium-editor-element",!0),e.classList.add("medium-editor-element"),e.setAttribute("role","textbox"),e.setAttribute("aria-multiline",!0),e.setAttribute("data-medium-editor-editor-index",i),e.setAttribute("medium-editor-index",r),A[r]=e.innerHTML,this.events.attachAllEventsToElement(e)}return e}function C(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",r.bind(this)),this.subscribe("editableKeydownEnter",r.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",e.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function x(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(t){"toolbar"!==t&&this.options.extensions[t]&&this.extensions.push(d(this.options.extensions[t],t,this))},this),y.call(this)){var e=this.options.fileDragging;e||(e={},v.call(this)||(e.allowedTypes=[])),this.addBuiltInExtension("fileDragging",e)}var n={paste:!0,"anchor-preview":f.call(this),autoLink:g.call(this),keyboardCommands:b.call(this),placeholder:m.call(this)};Object.keys(n).forEach(function(t){n[t]&&this.addBuiltInExtension(t)},this);var i=this.options.extensions.toolbar;if(!i&&p.call(this)){var r=t.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});i=new t.extensions.toolbar(r)}i&&this.extensions.push(d(i,"toolbar",this))}function _(e,n){var i=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return n&&i.forEach(function(e){n.hasOwnProperty(e[0])&&void 0!==n[e[0]]&&t.util.deprecated(e[0],e[1],"v6.0.0")}),t.util.defaults({},n,e)}function T(e,n){var i,r,o=/^append-(.+)$/gi,a=/justify([A-Za-z]*)$/g;if(i=o.exec(e))return t.util.execFormatBlock(this.options.ownerDocument,i[1]);if("fontSize"===e)return n.size&&t.util.deprecated(".size option for fontSize command",".value","6.0.0"),r=n.value||n.size,this.options.ownerDocument.execCommand("fontSize",!1,r);if("fontName"===e)return n.name&&t.util.deprecated(".name option for fontName command",".value","6.0.0"),r=n.value||n.name,this.options.ownerDocument.execCommand("fontName",!1,r);if("createLink"===e)return this.createLink(n);if("image"===e){var s=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,s)}if(a.exec(e)){var l=this.options.ownerDocument.execCommand(e,!1,null),u=t.selection.getSelectedParentElement(t.selection.getSelectionRange(this.options.ownerDocument));return u&&S.call(this,t.util.getTopBlockContainer(u)),l}return r=n&&n.value,this.options.ownerDocument.execCommand(e,!1,r)}function S(e){if(e){var n,i=Array.prototype.slice.call(e.childNodes).filter(function(t){var e="div"===t.nodeName.toLowerCase();return e&&!n&&(n=t.style.textAlign),e});i.length&&(this.saveSelection(),i.forEach(function(e){if(e.style.textAlign===n){var i=e.lastChild;if(i){t.util.unwrap(e,this.options.ownerDocument);var r=this.options.ownerDocument.createElement("BR");i.parentNode.insertBefore(r,i.nextSibling)}}},this),e.style.textAlign=n,this.restoreSelection())}}var A={};t.prototype={init:function(t,e){return this.options=_.call(this,this.defaults,e),this.origElements=t,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(s.call(this,this.options.contentWindow),this.events=new t.Events(this),this.elements=[],this.addElements(this.origElements),0!==this.elements.length&&(this.isActive=!0,x.call(this),C.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(t){"function"==typeof t.destroy&&t.destroy()},this),this.events.destroy(),this.elements.forEach(function(t){this.options.spellcheck&&(t.innerHTML=t.innerHTML),t.removeAttribute("contentEditable"),t.removeAttribute("spellcheck"),t.removeAttribute("data-medium-editor-element"),t.classList.remove("medium-editor-element"),t.removeAttribute("role"),t.removeAttribute("aria-multiline"),t.removeAttribute("medium-editor-index"),t.removeAttribute("data-medium-editor-editor-index"),t.getAttribute("medium-editor-textarea-id")&&c(t)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,l.call(this,this.options.contentWindow))},on:function(t,e,n,i){return this.events.attachDOMEvent(t,e,n,i),this},off:function(t,e,n,i){return this.events.detachDOMEvent(t,e,n,i),this},subscribe:function(t,e){return this.events.attachCustomEvent(t,e),this},unsubscribe:function(t,e){return this.events.detachCustomEvent(t,e),this},trigger:function(t,e,n){return this.events.triggerCustomEvent(t,e,n),this},delay:function(t){var e=this;return setTimeout(function(){e.isActive&&t()},this.options.delay)},serialize:function(){var t,e,n={},i=this.elements.length;for(t=0;t<i;t+=1)e=""!==this.elements[t].id?this.elements[t].id:"element-"+t,n[e]={value:this.elements[t].innerHTML.trim()};return n},getExtensionByName:function(t){var e;return this.extensions&&this.extensions.length&&this.extensions.some(function(n){return n.name===t&&(e=n,!0)}),e},addBuiltInExtension:function(e,n){var i,r=this.getExtensionByName(e);if(r)return r;switch(e){case"anchor":i=t.util.extend({},this.options.anchor,n),r=new t.extensions.anchor(i);break;case"anchor-preview":r=new t.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":r=new t.extensions.autoLink;break;case"fileDragging":r=new t.extensions.fileDragging(n);break;case"fontname":r=new t.extensions.fontName(this.options.fontName);break;case"fontsize":r=new t.extensions.fontSize(n);break;case"keyboardCommands":r=new t.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":r=new t.extensions.paste(this.options.paste);break;case"placeholder":r=new t.extensions.placeholder(this.options.placeholder);break;default:t.extensions.button.isBuiltInButton(e)&&(n?(i=t.util.defaults({},n,t.extensions.button.prototype.defaults[e]),r=new t.extensions.button(i)):r=new t.extensions.button(e))}return r&&this.extensions.push(d(r,e,this)),r},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var t=this.getExtensionByName("toolbar");
return t&&t.checkState(),this},queryCommandState:function(t){var e,n=/^full-(.+)$/gi,i=null;e=n.exec(t),e&&(t=e[1]);try{i=this.options.ownerDocument.queryCommandState(t)}catch(t){i=null}return i},execAction:function(e,n){var i,r,o=/^full-(.+)$/gi;return i=o.exec(e),i?(this.saveSelection(),this.selectAllContents(),r=T.call(this,i[1],n),this.restoreSelection()):r=T.call(this,e,n),"insertunorderedlist"!==e&&"insertorderedlist"!==e||t.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),r},getSelectedParentElement:function(e){return void 0===e&&(e=this.options.contentWindow.getSelection().getRangeAt(0)),t.selection.getSelectedParentElement(e)},selectAllContents:function(){var e=t.selection.getSelectionElement(this.options.contentWindow);if(e){for(;1===e.children.length;)e=e.children[0];this.selectElement(e)}},selectElement:function(e){t.selection.selectNode(e,this.options.ownerDocument);var n=t.selection.getSelectionElement(this.options.contentWindow);n&&this.events.focusElement(n)},getFocusedElement:function(){var t;return this.elements.some(function(e){return!t&&e.getAttribute("data-medium-focused")&&(t=e),!!t},this),t},exportSelection:function(){var e=t.selection.getSelectionElement(this.options.contentWindow),n=this.elements.indexOf(e),i=null;return n>=0&&(i=t.selection.exportSelection(e,this.options.ownerDocument)),null!==i&&0!==n&&(i.editableElementIndex=n),i},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(e,n){if(e){var i=this.elements[e.editableElementIndex||0];t.selection.importSelection(e,i,this.options.ownerDocument,n)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(e){var n,i=t.selection.getSelectionElement(this.options.contentWindow),r={};if(this.elements.indexOf(i)!==-1){try{if(this.events.disableCustomEvent("editableInput"),e.url&&t.util.deprecated(".url option for createLink",".value","6.0.0"),n=e.url||e.value,n&&n.trim().length>0){var o=this.options.contentWindow.getSelection();if(o){var a,s,l,u,c=o.getRangeAt(0),h=c.commonAncestorContainer;if(3===c.endContainer.nodeType&&3!==c.startContainer.nodeType&&0===c.startOffset&&c.startContainer.firstChild===c.endContainer&&(h=c.endContainer),s=t.util.getClosestBlockContainer(c.startContainer),l=t.util.getClosestBlockContainer(c.endContainer),3!==h.nodeType&&0!==h.textContent.length&&s===l){var d=s||i,p=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),a=this.exportSelection(),p.appendChild(d.cloneNode(!0)),i===d?t.selection.select(this.options.ownerDocument,d.firstChild,0,d.lastChild,3===d.lastChild.nodeType?d.lastChild.nodeValue.length:d.lastChild.childNodes.length):t.selection.select(this.options.ownerDocument,d,0,d,d.childNodes.length);var f=this.exportSelection();u=t.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,p,{start:a.start-f.start,end:a.end-f.start,editableElementIndex:a.editableElementIndex}),0===u.length&&(p=this.options.ownerDocument.createDocumentFragment(),p.appendChild(h.cloneNode(!0)),u=[p.firstChild.firstChild,p.firstChild.lastChild]),t.util.createLink(this.options.ownerDocument,u,n.trim());var m=(p.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;t.util.insertHTMLCommand(this.options.ownerDocument,p.firstChild.innerHTML.replace(/^\s+/,"")),a.start-=m,a.end-=m,this.importSelection(a)}else this.options.ownerDocument.execCommand("createLink",!1,n);this.options.targetBlank||"_blank"===e.target?t.util.setTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument),n):t.util.removeTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument),n),e.buttonClass&&t.util.addClassToAnchors(t.selection.getSelectionStart(this.options.ownerDocument),e.buttonClass)}}if(this.options.targetBlank||"_blank"===e.target||e.buttonClass){r=this.options.ownerDocument.createEvent("HTMLEvents"),r.initEvent("input",!0,!0,this.options.contentWindow);for(var g=0,v=this.elements.length;g<v;g+=1)this.elements[g].dispatchEvent(r)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",r,i)}},cleanPaste:function(t){this.getExtensionByName("paste").cleanPaste(t)},pasteHTML:function(t,e){this.getExtensionByName("paste").pasteHTML(t,e)},setContent:function(t,e){if(e=e||0,this.elements[e]){var n=this.elements[e];n.innerHTML=t,this.checkContentChanged(n)}},getContent:function(t){return t=t||0,this.elements[t]?this.elements[t].innerHTML.trim():null},checkContentChanged:function(e){e=e||t.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(e,{target:e,currentTarget:e})},resetContent:function(t){if(t){var e=this.elements.indexOf(t);return void(e!==-1&&this.setContent(A[t.getAttribute("medium-editor-index")],e))}this.elements.forEach(function(t,e){this.setContent(A[t.getAttribute("medium-editor-index")],e)},this)},addElements:function(t){var e=u(t,this.options.ownerDocument,!0);return 0!==e.length&&void e.forEach(function(t){t=E.call(this,t,this.id),this.elements.push(t),this.trigger("addElement",{target:t,currentTarget:t},t)},this)},removeElements:function(t){var e=u(t,this.options.ownerDocument),n=e.map(function(t){return t.getAttribute("medium-editor-textarea-id")&&t.parentNode?t.parentNode.querySelector('div[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]'):t});this.elements=this.elements.filter(function(t){return n.indexOf(t)===-1||(this.events.cleanupElement(t),t.getAttribute("medium-editor-textarea-id")&&c(t),this.trigger("removeElement",{target:t,currentTarget:t},t),!1)},this)}},t.getEditorFromElement=function(t){var e=t.getAttribute("data-medium-editor-editor-index"),n=t&&t.ownerDocument&&(t.ownerDocument.defaultView||t.ownerDocument.parentWindow);return n&&n._mediumEditors&&n._mediumEditors[e]?n._mediumEditors[e]:null}}(),function(){t.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),t.parseVersionString=function(t){var e=t.split("-"),n=e[0].split("."),i=e.length>1?e[1]:"";return{major:parseInt(n[0],10),minor:parseInt(n[1],10),revision:parseInt(n[2],10),preRelease:i,toString:function(){return[n[0],n[1],n[2]].join(".")+(i?"-"+i:"")}}},t.version=t.parseVersionString.call(this,{version:"5.22.1"}.version),t}())}).call(e,n(571)(t),n(111))},737:function(t,e,n){"use strict";var i=n(167),r=n(186)(i),o=n(738),a=n(193),s=n(198)("stores/hub-store"),l=n(202).checkClientError,u=n(574),c=n(739),h=n(165);t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{hub:{},members:[],layers:[],logoImage:null,bannerImage:null,logoImageInfo:null,bannerImageInfo:null,hasLogoImage:!1,hasBannerImage:!1,unsavedChanges:!1,saving:!1}},reset:function(){this.setState(this.getInitialState())},storeDidUpdate:function(){s("store updated")},loadHub:function(t){s("load hub"),this.setState({hub:t})},loadMembers:function(t){s("load members"),this.setState({members:t})},loadLayers:function(t){s("load layers"),this.setState({layers:t})},createHub:function(t,e,n,i){s("create hub");var r=this;a.post("/api/hub/create").type("json").accept("json").send({hub_id:t,name:e,published:n}).end(function(o,a){l(a,o,i,function(i){var o={hub_id:t,name:e,published:n};r.setState({hub:o}),r.trigger(r.state),i(null)})})},saveHub:function(t){s("save hub");var e=this,n="/hub/"+this.state.hub.hub_id;this.setState({saving:!0}),a.post(n+"/api/save").type("json").accept("json").send({hub_id:this.state.hub.hub_id,name:this.state.hub.name,description:this.state.hub.description,tagline:this.state.hub.tagline,resources:this.state.hub.resources,about:this.state.hub.about,published:this.state.hub.published,style:this.state.hub.map_style,basemap:this.state.hub.basemap,position:this.state.hub.map_position,layers:this.state.layers,logoImage:this.state.logoImage,logoImageInfo:this.state.logoImageInfo,bannerImage:this.state.bannerImage,bannerImageInfo:this.state.bannerImageInfo}).end(function(n,i){l(i,n,t,function(t){e.setState({saving:!1,unsavedChanges:!1}),t(null)})})},deleteHub:function(t){var e=this;s("delete hub");var n="/hub/"+this.state.hub.hub_id;a.post(n+"/api/delete").type("json").accept("json").send({hub_id:this.state.hub.hub_id}).end(function(n,i){l(i,n,t,function(t){e.setState({hub:{}}),e.trigger(e.state),t(null)})})},setMap:function(t,e,n,i){var r=this.state.hub;r.map_style=e,r.map_position=n,r.basemap=i,this.setState({hub:r,layers:t,unsavedChanges:!0}),this.trigger(this.state)},saveMap:function(t){s("save hub map");var e=this;this.setState({saving:!0});var n="/hub/"+this.state.hub.hub_id;a.post(n+"/api/savemap").type("json").accept("json").send({style:this.state.hub.map_style,basemap:this.state.hub.basemap,layers:this.state.layers,position:this.state.hub.map_position}).end(function(n,i){l(i,n,t,function(t){var n=e.state.hub;e.setState({hub:n,saving:!1}),e.trigger(e.state),t(null)})})},setHubLogoImage:function(t,e){var n=this.state.hub;n.hasLogoImage=!0,this.setState({logoImage:t,logoImageInfo:e,unsavedChanges:!0,hub:n})},saveHubLogoImage:function(t){s("save hub logo image");var e=this,n="/hub/"+this.state.hub.hub_id;a.post(n+"/api/setphoto").type("json").accept("json").send({hub_id:this.state.hub.hub_id,image:this.state.logoImage,info:this.state.logoImageInfo,type:"logo"}).end(function(n,i){l(i,n,t,function(t){var n=e.state.hub;n.hasLogoImage=!0,e.setState({hub:n}),e.trigger(e.state),t(null)})})},setHubBannerImage:function(t,e){var n=this.state.hub;n.hasBannerImage=!0,this.setState({bannerImage:t,bannerImageInfo:e,unsavedChanges:!0,hub:n})},saveHubBannerImage:function(t){s("set hub banner image");var e=this,n="/hub/"+this.state.hub.hub_id;a.post(n+"/api/setphoto").type("json").accept("json").send({hub_id:this.state.hub.hub_id,image:this.state.bannerImage,info:this.state.bannerImageInfo,type:"banner"}).end(function(n,i){l(i,n,t,function(t){var n=e.state.hub;n.hasBannerImage=!0,e.setState({hub:n}),e.trigger(e.state),t(null)})})},setTitle:function(t){var e=this.state.hub;e.name=t,this.setState({hub:e,unsavedChanges:!0})},publish:function(t){var e=this.state.hub;e.published=!0,this.setState({hub:e,unsavedChanges:!0}),this.trigger(this.state),this.saveHub(t)},setTagline:function(t){var e=this.state.hub;e.tagline=t,this.setState({hub:e,unsavedChanges:!0})},setDescription:function(t){var e=this.state.hub;e.description=t,this.setState({hub:e,unsavedChanges:!0})},setResources:function(t){var e=this.state.hub;e.resources=t,this.setState({hub:e,unsavedChanges:!0})},setAbout:function(t){var e=this.state.hub;e.about=t,this.setState({hub:e,unsavedChanges:!0})},addMember:function(t,e,n){s("add member");var i=this,r="/hub/"+this.state.hub.hub_id;a.post(r+"/api/addmember").type("json").accept("json").send({hub_id:this.state.hub.hub_id,display_name:t,asAdmin:e}).end(function(t,e){l(e,t,n,function(t){i.reloadMembers(t)})})},removeMember:function(t,e){s("remove member");var n=this,i="/hub/"+this.state.hub.hub_id;a.post(i+"/api/removemember").type("json").accept("json").send({hub_id:this.state.hub.hub_id,user_id:t}).end(function(t,i){l(i,t,e,function(t){n.reloadMembers(t)})})},setMemberAdmin:function(t,e){s("set member admin");var n=this,i="/hub/"+this.state.hub.hub_id;a.post(i+"/api/updatememberrole").type("json").accept("json").send({hub_id:this.state.hub.hub_id,user_id:t,role:"Administrator"}).end(function(t,i){l(i,t,e,function(t){n.reloadMembers(t)})})},removeMemberAdmin:function(t,e){s("remove member admin");var n=this,i="/hub/"+this.state.hub.hub_id;a.post(i+"/api/updatememberrole").type("json").accept("json").send({hub_id:this.state.hub.hub_id,user_id:t,role:"Member"}).end(function(t,i){l(i,t,e,function(t){n.reloadMembers(t)})})},reloadMembers:function(t){s("reload members");var e=this,n="/hub/"+this.state.hub.hub_id;a.get(n+"/api/members").type("json").accept("json").end(function(n,i){l(i,n,t,function(t){e.loadMembers(i.body.members),t(null)})})},addLayer:function(t,e,n){s("add layer");var i=this,r="/hub/"+this.state.hub.hub_id;a.post(r+"/api/addlayer").type("json").accept("json").send({hub_id:this.state.hub.hub_id,layer_id:t,active:e}).end(function(t,e){l(e,t,n,function(t){i.reloadLayers(t)})})},removeLayer:function(t,e){s("remove member");var n=this,i="/hub/"+this.state.hub.hub_id;a.post(i+"/api/removelayer").type("json").accept("json").send({hub_id:this.state.hub.hub_id,layer_id:t}).end(function(t,i){l(i,t,e,function(t){n.reloadLayers(t)})})},reloadLayers:function(t){s("reload layers");var e=this,n="/hub/"+this.state.hub.hub_id;a.get(n+"/api/hub/"+this.state.hub.hub_id+"/layers").type("json").accept("json").end(function(n,i){l(i,n,t,function(t){e.loadLayers(i.body.layers),t(null)})})},toggleVisibility:function(t,e){var n=this.state.layers,i=u(n,{layer_id:t});n[i].active?n[i].active=!1:n[i].active=!0,this.updateMap(n),e()},moveUp:function(t){var e=u(this.state.layers,{layer_id:t});if(0!==e){var n=this.move(this.state.layers,e,e-1);this.updateMap(n)}},moveDown:function(t){var e=u(this.state.layers,{layer_id:t});if(e!==this.state.layers.length-1){var n=this.move(this.state.layers,e,e+1);this.updateMap(n)}},move:function(t,e,n){return t.splice(n,0,t.splice(e,1)[0]),t},updateMap:function(t){var e=this.buildMapStyle(t),n=this.state.hub;n.map_style=e,this.setState({layers:t,hub:n}),this.trigger(this.state)},buildMapStyle:function(t){var e={sources:{},layers:[]};return c(t,function(t){t.map_style||(t.map_style=t.style);var n=t.map_style;n&&n.sources&&n.layers?(void 0!=t.active&&0==t.active?n.layers.forEach(function(t){t.layout={visibility:"none"}}):n.layers.forEach(function(t){t.layout={visibility:"visible"}}),h.extend(e.sources,n.sources),e.layers=e.layers.concat(n.layers)):s("Not added to map, incomplete style for layer: "+t.layer_id)}),e}})},738:function(t,e,n){"use strict";var i=n(167),r=i.createActions({loadHub:{},loadMembers:{},loadLayers:{},createHub:{},saveHub:{},setTitle:{},setTagline:{},setDescription:{},setResources:{},setAbout:{},setHubLogoImage:{},setHubBannerImage:{},addMember:{},removeMember:{},setMemberAdmin:{},removeMemberAdmin:{},setMap:{},saveMap:{},deleteHub:{},publish:{},moveUp:{},moveDown:{},toggleVisibility:{}});t.exports=r},739:function(t,e){function n(t,e){for(var n=t?t.length:0;n--&&e(t[n],n,t)!==!1;);return t}function i(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function r(t,e){return function(n){return t(e(n))}}function o(t,e){var n=M(t)||p(t)?i(t.length,String):[],r=n.length,o=!!r;for(var a in t)!e&&!D.call(t,a)||o&&("length"==a||c(a,r))||n.push(a);return n}function a(t,e){return t&&R(t,e,w)}function s(t){if(!h(t))return P(t);var e=[];for(var n in Object(t))D.call(t,n)&&"constructor"!=n&&e.push(n);return e}function l(t,e){return function(n,i){if(null==n)return n;if(!f(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=Object(n);(e?o--:++o<r)&&i(a[o],o,a)!==!1;);return n}}function u(t){return function(e,n,i){for(var r=-1,o=Object(e),a=i(e),s=a.length;s--;){var l=a[t?s:++r];if(n(o[l],l,o)===!1)break}return e}}function c(t,e){return e=null==e?C:e,!!e&&("number"==typeof t||S.test(t))&&t>-1&&t%1==0&&t<e}function h(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||A;return t===n}function d(t,e){var i=M(t)?n:F;return i(t,"function"==typeof e?e:E)}function p(t){return m(t)&&D.call(t,"callee")&&(!N.call(t,"callee")||k.call(t)==x)}function f(t){return null!=t&&v(t.length)&&!g(t)}function m(t){return y(t)&&f(t)}function g(t){var e=b(t)?k.call(t):"";return e==_||e==T}function v(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=C}function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){return!!t&&"object"==typeof t}function w(t){return f(t)?o(t):s(t)}function E(t){return t}var C=9007199254740991,x="[object Arguments]",_="[object Function]",T="[object GeneratorFunction]",S=/^(?:0|[1-9]\d*)$/,A=Object.prototype,D=A.hasOwnProperty,k=A.toString,N=A.propertyIsEnumerable,P=r(Object.keys,Object),F=l(a,!0),R=u(!0),M=Array.isArray;t.exports=d},797:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=i(r),a=n(244),s=i(a);e.default=o.default.createClass({displayName:"Suggestions",getDefaultProps:function(){return{suggestions:[],highlightedItem:-1}},propTypes:{suggestions:o.default.PropTypes.array,highlightedItem:o.default.PropTypes.number},render:function(){var t=this,e=this.props.suggestions.map(function(e,n){return o.default.createElement("li",{className:(0,s.default)({highlighted:t.props.highlightedItem==n}),key:e.key,onClick:t.props.onSelection.bind(null,e)},o.default.createElement("a",{href:"#!"},e.value))});return o.default.createElement("ul",{className:"search-bar-suggestions omh-search-bar-suggestions dropdown-content"},e)}})},1104:function(t,e,n){"use strict";var i=n(1),r=i.createClass({displayName:"EditList",propTypes:{title:i.PropTypes.string.isRequired,items:i.PropTypes.array,onDelete:i.PropTypes.func.isRequired,onAction:i.PropTypes.func,onError:i.PropTypes.func},getDefaultProps:function(){return{items:[]}},onDelete:function(t){this.props.onDelete(t)},onAction:function(t){this.props.onAction(t)},render:function(){var t=this;return i.createElement("ul",{className:"collection with-header"},i.createElement("li",{className:"collection-header"},i.createElement("h5",null,this.props.title)),this.props.items.map(function(e){var n="",r="collection-item";e.image?(n=i.createElement("img",{alt:"",className:"circle",src:e.image}),r="collection-item avatar"):e.icon&&(n=i.createElement("i",{className:"material-icons circle"},e.icon),r="collection-item avatar");var o="";e.actionIcon&&e.actionLabel&&(o=i.createElement("a",{className:"tooltipped","data-delay":"50","data-position":"bottom","data-tooltip":e.actionLabel},i.createElement("i",{className:"material-icons",onClick:function(){t.onAction(e)},style:{cursor:"pointer"}},e.actionIcon)));var a="";return e.type&&(a=i.createElement("p",null,e.type)),i.createElement("li",{className:r,key:e.key},n,i.createElement("span",{className:"title"},i.createElement("b",null,e.label)),a,i.createElement("div",{className:"secondary-content"},o,i.createElement("a",{className:"tooltipped","data-delay":"50","data-position":"bottom","data-tooltip":"Remove"},i.createElement("i",{className:"material-icons",onClick:function(){t.onDelete(e)},style:{cursor:"pointer"}},"delete"))))}))}});t.exports=r},1105:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(797),o=i(r),a=n(1),s=n(30),l=n(165),u=n(576),c=n(587),h=n(600),d=n(246),p={UP:38,DOWN:40,ENTER:13},f=n(167),m=n(186)(f),g=n(226),v=n(228),b=a.createClass({displayName:"AddItem",mixins:[m.connect(g)],__:function(t){return v.getLocaleString(this.state.locale,t)},getDefaultProps:function(){return{id:"additem",autoFocus:!1,autosuggestDelay:250,inputName:"query",placeholder:"Add",addButtonLabel:"Add",optionLabel:null}},propTypes:{id:a.PropTypes.string,placeholder:a.PropTypes.string,suggestionUrl:a.PropTypes.string,onAdd:a.PropTypes.func.isRequired,autosuggestDelay:a.PropTypes.number,autoFocus:a.PropTypes.bool,inputName:a.PropTypes.string,optionLabel:a.PropTypes.string,addButtonLabel:a.PropTypes.string},getInitialState:function(){return{value:"",suggestions:[],highlightedItem:-1,option:!1}},updateSuggestions:function(t,e){"undefined"!=typeof window&&this.props.suggestionUrl&&l.ajax({url:this.props.suggestionUrl+"?q="+t,contentType:"application/json;charset=UTF-8",dataType:"json",async:!0,success:function(t){t.suggestions&&e(t.suggestions)},error:function(t){d.showMessage({title:"Error",message:t})},complete:function(){}})},handleAddWithOptionChecked:function(t){this.setState({option:t})},componentDidMount:function(){this.props.autoFocus&&s.findDOMNode(this.refs.value).focus(),l(s.findDOMNode(this.refs.suggestions)).dropdown({inDuration:300,outDuration:225,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!0}),l(document.body).on("click",this.hideSuggestions)},componentWillUnmount:function(){document.body.removeEventListener("click",this.hideSuggestions)},handleClick:function(t){t.nativeEvent.stopImmediatePropagation()},handleKeyDown:function(t){if(t.which==p.ENTER&&(t.preventDefault(),this.submit(t)),t.which==p.UP||t.which==p.DOWN){t.preventDefault();var e=this.state.highlightedItem;if(t.which==p.UP){if(e<=0)return;--e}if(t.which==p.DOWN){if(e==this.state.suggestions.length-1)return;++e}this.setState({highlightedItem:e,value:this.state.suggestions[e]})}},displaySuggestions:function(t){this.setState({suggestions:t,highlightedItem:-1}),l(s.findDOMNode(this.refs.suggestions)).show()},hideSuggestions:function(){l(s.findDOMNode(this.refs.suggestions)).hide()},fillInSuggestion:function(t){this.setState({value:t})},handleChange:function(t){var e=this;clearTimeout(this._timerId);var n=t.target.value;return n?(this.setState({value:{key:n,value:n}}),void(this._timerId=setTimeout(function(){new u(function(t){e.updateSuggestions(n,t)}).then(function(t){e.state.value&&e.displaySuggestions(t)})},this.props.autosuggestDelay))):this.setState(this.getInitialState())},submit:function(t){t.preventDefault(),this.state.value&&(this.props.onAdd({value:this.state.value,option:this.state.option}),this.setState(this.getInitialState()))},render:function(){return a.createElement("div",null,a.createElement("nav",{className:"omh-search-bar white"},a.createElement("div",{className:"nav-wrapper omh-search-bar-wrapper no-margin row"},a.createElement("form",null,a.createElement("div",{className:"input-field"},a.createElement("input",{id:this.props.id,className:"omh-search",type:"search",style:{margin:0},name:this.props.inputName,maxLength:"100",autoComplete:"off",ref:"value",value:this.state.value.value,placeholder:this.props.placeholder,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onClick:this.handleClick,"data-beloworigin":"true","data-activates":this.refs.suggestions,required:!0}),a.createElement("label",{htmlFor:this.props.id},a.createElement("i",{className:"material-icons omh-search-icon"},"search")))),a.createElement(c.Form,null,a.createElement(h,{name:"admin",onChange:this.handleAddWithOptionChecked,labelOff:this.__("Member"),labelOn:this.__("Administrator"),defaultChecked:this.state.option,dataPosition:"top",dataTooltip:this.props.optionLabel})),a.createElement("a",{className:"btn waves-effect waves-light right",onClick:this.submit},this.props.addButtonLabel))),a.createElement("div",{className:"row no-margin"},!!this.state.suggestions.length&&a.createElement(o.default,{ref:"suggestions",suggestions:this.state.suggestions,highlightedItem:this.state.highlightedItem,onSelection:this.fillInSuggestion})))}});t.exports=b},1119:function(t,e,n){"use strict";var i=n(1),r=n(1104),o=n(732),a=n(731),s=n(246),l=n(1105),u=n(741),c=n(167),h=n(186)(c),d=n(737),p=n(738),f=n(241),m=n(249),g=n(234),v=n(242),b=n(247),y=n(226),w=n(228),E=n(198)("views/HubAdmin"),C=i.createClass({displayName:"HubAdmin",mixins:[h.connect(d,{initWithProps:["hub"]}),h.connect(y,{initWithProps:["locale","_csrf"]})],__:function(t){return w.getLocaleString(this.state.locale,t)},propTypes:{hub:i.PropTypes.object.isRequired,layers:i.PropTypes.array,members:i.PropTypes.array,locale:i.PropTypes.string.isRequired},getDefaultProps:function(){return{layers:[],members:[]}},getInitialState:function(){return p.loadHub(this.props.hub),p.loadMembers(this.props.members),p.loadLayers(this.props.layers),{canSubmit:!1}},handleMemberDelete:function(t){var e=this;m.showConfirmation({title:"Confirm Removal",message:"Please confirm removal of "+t.label,onPositiveResponse:function(){p.removeMember(t.key,function(t){t?s.showMessage({title:"Error",message:t}):f.showNotification({message:e.__("Member Removed"),dismissAfter:7e3})})}})},handleMemberMakeAdmin:function(t){var e=this;"Administrator"==t.type?this.handleRemoveMemberAdmin(t):m.showConfirmation({title:this.__("Confirm Administrator"),message:this.__("Please confirm that you want to make this user an Administrator: ")+t.label,onPositiveResponse:function(){p.setMemberAdmin(t.key,function(t){t?s.showMessage({title:e.__("Error"),message:t}):f.showNotification({message:e.__("Member is now an Administrator"),dismissAfter:7e3})})}})},handleRemoveMemberAdmin:function(t){var e=this;m.showConfirmation({title:this.__("Confirm Remove Administrator"),message:this.__("Please confirm that you want to remove Administrator permissions for: ")+t.label,onPositiveResponse:function(){p.removeMemberAdmin(t.key,function(t){t?s.showMessage({title:e.__("Error"),message:t}):f.showNotification({message:e.__("Member is no longer an Administrator"),dismissAfter:7e3})})}})},handleAddMember:function(t){var e=this;E(t.value.value+" as Admin:"+t.option),p.addMember(t.value.value,t.option,function(t){t?s.showMessage({title:"Error",message:t}):f.showNotification({message:e.__("Member Added"),dismissAfter:7e3})})},deleteHub:function(){var t=this;m.showConfirmation({title:this.__("Confirm Hub Deletion"),message:this.__("Please confirm that you want to delete this hub and all of its stories."),onPositiveResponse:function(){p.deleteHub(function(e){e?s.showMessage({title:t.__("Error"),message:e}):f.showNotification({message:t.__("Hub Deleted"),dismissAfter:7e3,onDismiss:function(){window.location="/hubs"}})})}})},handleViewLayer:function(t){window.location="/layer/info/"+t.layer_id+"/"+u(t.name)},render:function(){var t=this,e=[];this.state.members.forEach(function(n){e.push({key:n.id,label:n.display_name,type:n.role,image:n.image,icon:"person",actionIcon:"supervisor_account",actionLabel:t.__("Add/Remove Administrator Access")})});var n=[];return this.state.layers.forEach(function(e){n.push({key:e.layer_id,label:e.name,type:e.active?"Active":"Inactive",image:"",icon:"map",actionIcon:"info",actionLabel:t.__("View Layer Info")})}),i.createElement("div",null,i.createElement(a,{hubid:this.props.hub.hub_id}),i.createElement("main",null,i.createElement("div",{className:"row no-margin"},i.createElement(o,{hubid:this.props.hub.hub_id,subPage:!0})),i.createElement("div",{className:"container"},i.createElement("h4",null,this.__("Manage Hub")),i.createElement("div",{className:"row"},i.createElement(r,{title:"Members",items:e,onDelete:this.handleMemberDelete,onAction:this.handleMemberMakeAdmin,onError:this.onError})),i.createElement("div",{className:"row"},i.createElement("h5",null,this.__("Add Hub Member")),i.createElement(l,{id:"hubaddmember",placeholder:this.__("Search for User Name"),suggestionUrl:"/api/user/search/suggestions",optionLabel:this.__("Add as Administrator"),addButtonLabel:this.__("Add and Send Invite"),onAdd:this.handleAddMember,onError:this.onError})),i.createElement("div",{className:"row"},i.createElement("button",{onClick:this.deleteHub,className:"btn red"},this.__("Delete Hub"))))),i.createElement(g,null),i.createElement(v,null),i.createElement(b,null))}});t.exports=C}});