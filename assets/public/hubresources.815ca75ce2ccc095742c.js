webpackJsonp([24],{0:function(e,t,n){"use strict";var i=n(1),r=n(28),o=n(1179);n(172),n(563),n(732),n(816),n(818),document.addEventListener("DOMContentLoaded",function(){var e=window.__appData;r.render(i.createElement(o,e),document.querySelector("#app"))})},173:function(e,t,n){"use strict";var i=n(1),r=n(172),o=n(174),a=n(193)(o),s=n(198),l=n(199),c=n(210),u=n(233),h=n(235),d=i.createClass({displayName:"UserMenu",mixins:[a.connect(s),a.connect(u)],__:function(e){return h.getLocaleString(this.state.locale,e)},propTypes:{id:i.PropTypes.string},getDefaultProps:function(){return{id:"user-menu"}},componentDidMount:function(){l.getUser(function(){})},componentDidUpdate:function(e){this.state.loggedIn&&!e.loggedIn&&r(this.refs.userButton).dropdown({inDuration:300,outDuration:225,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!0,alignment:"right"})},loginClick:function(){window.location="/login?returnTo="+window.location},logoutClick:function(){window.location="/logout?returnTo="+window.location},render:function(){var e=i.createElement("div",null);if(this.state.loggedIn&&this.state.user){var t="";this.state.user.admin&&(t=i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/admin/invite"},this.__("Invite Users")))),e=i.createElement("li",null,i.createElement("div",{ref:"userButton",className:"chip user-dropdown-button omh-btn",style:{marginRight:"5px",marginLeft:"5px",backgroundColor:"#FFF"},"data-activates":this.props.id},i.createElement(c,{email:this.state.user.email}),this.state.user.display_name,i.createElement("i",{className:"material-icons right",style:{marginLeft:0,color:"#212121",height:"30px",lineHeight:"30px",width:"15px"}},"arrow_drop_down")),i.createElement("ul",{id:this.props.id,className:"dropdown-content",style:{top:"100px"}},i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/"+this.state.user.display_name+"/maps"},this.__("My Maps"))),i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/"+this.state.user.display_name+"/stories"},this.__("My Stories"))),i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/"+this.state.user.display_name+"/groups"},this.__("My Groups"))),i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/"+this.state.user.display_name+"/hubs"},this.__("My Hubs"))),i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/user/settings"},this.__("Settings"))),t,i.createElement("li",{className:"divider"}),i.createElement("li",{className:"usermenu-wrapper"},i.createElement("a",{href:"/logout"},this.__("Logout")))))}else e=i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{className:"nav-link-item",href:"#",onClick:this.loginClick},this.__("Login")));return e}});e.exports=d},198:function(e,t,n){"use strict";var i=n(174),r=n(193)(i),o=n(199),a=n(200),s=n(205)("stores/user-store"),l=n(209).checkClientError;e.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{user:{},loggedIn:!1}},reset:function(){this.setState(this.getInitialState())},storeDidUpdate:function(){s("store updated")},login:function(e){this.setState({user:e,loggedIn:!0})},getUser:function(e){var t=this;a.post("/api/user/details/json").type("json").accept("json").end(function(n,i){l(i,n,e,function(e){n?e(n):i.body&&i.body.loggedIn?(t.login(i.body.user),e()):e(JSON.stringify(i.body))})})},logout:function(){this.setState(this.getInitialState()),this.trigger(this.state)},register:function(){},updatePassword:function(e,t,n,i,r){return this.state.loggedIn&&this.state.user.id!==e?(s("User ID mismatch, will not send request"),void r("User session error, please clear browser sessions/cache and try again.")):void(this.state.loggedIn||n?a.post("/api/user/updatepassword").type("json").accept("json").send({user_id:e,password:t,pass_reset:n,_csrf:i}).end(function(e,t){l(t,e,r,function(t){t(e)})}):(s("Pass reset key not found"),r("User session error, please clear browser sessions/cache and try again.")))},forgotPassword:function(e,t,n){a.post("/api/user/forgotpassword").type("json").accept("json").send({email:e,_csrf:t}).end(function(e,t){l(t,e,n,function(t){t(e)})})},signup:function(e,t,n,i,r,o,s,c){a.post("/api/user/signup").type("json").accept("json").send({username:e,name:t,email:n,password:i,joinmailinglist:r,inviteKey:o,_csrf:s}).end(function(e,t){l(t,e,c,function(t){t(e)})})},joinMailingList:function(e,t,n){a.post("/api/user/mailinglistsignup").type("json").accept("json").send({email:e,_csrf:t}).end(function(e,t){l(t,e,n,function(t){t(e)})})},resendConfirmation:function(e,t){a.post("/api/user/resendconfirmation").type("json").accept("json").send({_csrf:e}).end(function(e,n){l(n,e,t,function(t){t(e)})})},checkUserNameAvailable:function(e,t){}})},199:function(e,t,n){"use strict";var i=n(174),r=i.createActions({login:{},logout:{},register:{},getUser:{},updatePassword:{},forgotPassword:{},checkUserNameAvailable:{},signup:{},resendConfirmation:{},joinMailingList:{}});e.exports=r},205:function(e,t,n){"use strict";var i=n(206);e.exports=function(e){return i("maphubs:"+e)}},209:function(e,t,n){"use strict";var i=n(205)("clientError");e.exports={checkClientError:function(e,t,n,r){t&&e&&e.body&&e.body.error?(i(e.body.error),n(e.body.error)):t?(i(t.message),n(t.message)):e&&e.body&&void 0!==e.body.success&&0==e.body.success?e.body.error?(i(e.body.error),n(e.body.error)):(i("unknown error"),n("unknown error")):e.body.error?(i(e.body.error),n(e.body.error)):r(e.body.success?n:n)}}},210:function(e,t,n){"use strict";var i=n(1),r=n(211),o=i.createClass({displayName:"Gravatar",propTypes:{email:i.PropTypes.string,emailHash:i.PropTypes.string,size:i.PropTypes.number},getDefaultProps:function(){return{size:30}},render:function(){var e=null;e=this.props.emailHash?this.props.emailHash:r.createHash("md5").update(this.props.email.trim().toLowerCase()).digest("hex");var t="https://www.gravatar.com/avatar/"+e;return t+=this.props.size?"?s="+2*this.props.size+"&d=mm":"?d=mm",i.createElement("img",{className:"circle",height:this.props.size,width:this.props.size,style:{height:this.props.size+"px",width:this.props.size+"px",border:"1px solid #bbbbbb"},src:t,alt:"User Profile Photo"})}});e.exports=o},211:function(e,t,n){(function(e){function i(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function r(e,t){for(var n in e)t(e[n],n)}var o=n(216);t.createHash=n(218),t.createHmac=n(230),t.randomBytes=function(t,n){if(!n||!n.call)return new e(o(t));try{n.call(this,void 0,new e(o(t)))}catch(e){n(e)}},t.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var a=n(231)(t);t.pbkdf2=a.pbkdf2,t.pbkdf2Sync=a.pbkdf2Sync,r(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(e){t[e]=function(){i("sorry,",e,"is not implemented yet")}})}).call(t,n(212).Buffer)},212:function(e,t,n){(function(e,i){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function o(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,n){if(o()<n)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=e.prototype):(null===t&&(t=new e(n)),t.length=n),t}function e(t,n,i){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,n,i);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return s(this,t,n,i)}function s(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,i):"string"==typeof t?h(e,t,n):p(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,i){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof i?a(e,t).fill(n,i):a(e,t).fill(n):a(e,t)}function u(t,n){if(l(n),t=a(t,n<0?0:0|m(n)),!e.TYPED_ARRAY_SUPPORT)for(var i=0;i<n;++i)t[i]=0;return t}function h(t,n,i){if("string"==typeof i&&""!==i||(i="utf8"),!e.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(n,i);t=a(t,r);var o=t.write(n,i);return o!==r&&(t=t.slice(0,o)),t}function d(e,t){var n=t.length<0?0:0|m(t.length);e=a(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function f(t,n,i,r){if(n.byteLength,i<0||n.byteLength<i)throw new RangeError("'offset' is out of bounds");if(n.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return n=void 0===i&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,i):new Uint8Array(n,i,r),e.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=e.prototype):t=d(t,n),t}function p(t,n){if(e.isBuffer(n)){var i=0|m(n.length);return t=a(t,i),0===t.length?t:(n.copy(t,0,0,i),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||$(n.length)?a(t,0):d(t,n);if("Buffer"===n.type&&Z(n.data))return d(t,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function g(t){return+t!=t&&(t=0),e.alloc(+t)}function v(t,n){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return G(t).length;default:if(r)return q(t).length;n=(""+n).toLowerCase(),r=!0}}function b(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return N(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function y(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function w(t,n,i,r,o){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=o?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(o)return-1;i=t.length-1}else if(i<0){if(!o)return-1;i=0}if("string"==typeof n&&(n=e.from(n,r)),e.isBuffer(n))return 0===n.length?-1:E(t,n,i,r,o);if("number"==typeof n)return n&=255,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,n,i):Uint8Array.prototype.lastIndexOf.call(t,n,i):E(t,[n],i,r,o);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,i,r){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}var c;if(r){var u=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,u===-1?0:c-u)){if(u===-1&&(u=c),c-u+1===l)return u*a}else u!==-1&&(c-=c-u),u=-1}else for(n+l>s&&(n=s-l),c=n;c>=0;c--){for(var h=!0,d=0;d<l;d++)if(o(e,c+d)!==o(t,d)){h=!1;break}if(h)return c}return-1}function C(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function x(e,t,n,i){return V(q(t,e.length-n),e,n,i)}function _(e,t,n,i){return V(X(t),e,n,i)}function T(e,t,n,i){return _(e,t,n,i)}function S(e,t,n,i){return V(G(t),e,n,i)}function A(e,t,n,i){return V(K(t,e.length-n),e,n,i)}function k(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function N(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o=e[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r+s<=n){var l,c,u,h;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[r+1],128===(192&l)&&(h=(31&o)<<6|63&l,h>127&&(a=h));break;case 3:l=e[r+1],c=e[r+2],128===(192&l)&&128===(192&c)&&(h=(15&o)<<12|(63&l)<<6|63&c,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:l=e[r+1],c=e[r+2],u=e[r+3],128===(192&l)&&128===(192&c)&&128===(192&u)&&(h=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&u,h>65535&&h<1114112&&(a=h))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),r+=s}return D(i)}function D(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=ee));return n}function P(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function R(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function L(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=Y(e[o]);return r}function B(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function M(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,n,i,r,o,a){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<a)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function O(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);r<o;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function F(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);r<o;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function j(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,i,r){return r||j(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,i,23,4),n+4}function H(e,t,n,i,r){return r||j(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,i,52,8),n+8}function z(e){if(e=W(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function W(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Y(e){return e<16?"0"+e.toString(16):e.toString(16)}function q(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],a=0;a<i;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function X(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function K(e,t){for(var n,i,r,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function G(e){return J.toByteArray(z(e))}function V(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function $(e){return e!==e}var J=n(213),Q=n(214),Z=n(215);t.Buffer=e,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==i.TYPED_ARRAY_SUPPORT?i.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=o(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,n){return s(null,e,t,n)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,n){return c(null,e,t,n)},e.allocUnsafe=function(e){return u(null,e)},e.allocUnsafeSlow=function(e){return u(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var i=t.length,r=n.length,o=0,a=Math.min(i,r);o<a;++o)if(t[o]!==n[o]){i=t[o],r=n[o];break}return i<r?-1:r<i?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var i;if(void 0===n)for(n=0,i=0;i<t.length;++i)n+=t[i].length;var r=e.allocUnsafe(n),o=0;for(i=0;i<t.length;++i){var a=t[i];if(!e.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},e.byteLength=v,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?N(this,0,e):b.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,n,i,r,o){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),n<0||i>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&n>=i)return 0;if(r>=o)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var a=o-r,s=i-n,l=Math.min(a,s),c=this.slice(r,o),u=t.slice(n,i),h=0;h<l;++h)if(c[h]!==u[h]){a=c[h],s=u[h];break}return a<s?-1:s<a?1:0},e.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},e.prototype.indexOf=function(e,t,n){return w(this,e,t,n,!0)},e.prototype.lastIndexOf=function(e,t,n){return w(this,e,t,n,!1)},e.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return C(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return T(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;e.prototype.slice=function(t,n){var i=this.length;t=~~t,n=void 0===n?i:~~n,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),n<0?(n+=i,n<0&&(n=0)):n>i&&(n=i),n<t&&(n=t);var r;if(e.TYPED_ARRAY_SUPPORT)r=this.subarray(t,n),r.__proto__=e.prototype;else{var o=n-t;r=new e(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+t]}return r},e.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},e.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},e.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},e.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),Q.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),Q.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),Q.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),Q.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;I(this,e,t,n,r,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;I(this,e,t,n,r,0)}var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},e.prototype.writeUInt8=function(t,n,i){return t=+t,n|=0,i||I(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,i){return t=+t,n|=0,i||I(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):O(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,i){return t=+t,n|=0,i||I(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):O(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,i){return t=+t,n|=0,i||I(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):F(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,i){return t=+t,n|=0,i||I(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):F(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);I(this,e,t,n,r-1,-r)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},e.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);I(this,e,t,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},e.prototype.writeInt8=function(t,n,i){return t=+t,n|=0,i||I(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,i){return t=+t,n|=0,i||I(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):O(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,i){return t=+t,n|=0,i||I(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):O(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,i){return t=+t,n|=0,i||I(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):F(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,i){return t=+t,n|=0,i||I(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):F(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return H(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return H(this,e,t,!1,n)},e.prototype.copy=function(t,n,i,r){if(i||(i=0),r||0===r||(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-i&&(r=t.length-n+i);var o,a=r-i;if(this===t&&i<n&&n<r)for(o=a-1;o>=0;--o)t[o+n]=this[o+i];else if(a<1e3||!e.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)t[o+n]=this[o+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+a),n);return a},e.prototype.fill=function(t,n,i,r){if("string"==typeof t){if("string"==typeof n?(r=n,n=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!e.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;n>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0);var a;if("number"==typeof t)for(a=n;a<i;++a)this[a]=t;else{var s=e.isBuffer(t)?t:q(new e(t,r).toString()),l=s.length;for(a=0;a<i-n;++a)this[a+n]=s[a%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(212).Buffer,function(){return this}())},213:function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function r(e){var t,i,r,o,a,s,l=e.length;a=n(e),s=new u(3*l/4-a),r=a>0?l-4:l;var h=0;for(t=0,i=0;t<r;t+=4,i+=3)o=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],s[h++]=o>>16&255,s[h++]=o>>8&255,s[h++]=255&o;return 2===a?(o=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,s[h++]=255&o):1===a&&(o=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,s[h++]=o>>8&255,s[h++]=255&o),s}function o(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function a(e,t,n){for(var i,r=[],a=t;a<n;a+=3)i=(e[a]<<16)+(e[a+1]<<8)+e[a+2],r.push(o(i));return r.join("")}function s(e){for(var t,n=e.length,i=n%3,r="",o=[],s=16383,c=0,u=n-i;c<u;c+=s)o.push(a(e,c,c+s>u?u:c+s));return 1===i?(t=e[n-1],r+=l[t>>2],r+=l[t<<4&63],r+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],r+=l[t>>10],r+=l[t>>4&63],r+=l[t<<2&63],r+="="),o.push(r),o.join("")}t.byteLength=i,t.toByteArray=r,t.fromByteArray=s;for(var l=[],c=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,f=h.length;d<f;++d)l[d]=h[d],c[h.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},214:function(e,t){t.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?r-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:(f?-1:1)*(1/0);a+=Math.pow(2,i),o-=c}return(f?-1:1)*a*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+h>=1?d/l:d*Math.pow(2,1-h),t*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,r),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;e[n+f]=255&s,f+=p,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;e[n+f]=255&a,f+=p,a/=256,c-=8);e[n+f-p]|=128*m}},215:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},216:function(e,t,n){(function(t,i){!function(){var r=("undefined"==typeof window?t:window)||{};_crypto=r.crypto||r.msCrypto||n(217),e.exports=function(e){if(_crypto.getRandomValues){var t=new i(e);return _crypto.getRandomValues(t),t}if(_crypto.randomBytes)return _crypto.randomBytes(e);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(t,function(){return this}(),n(212).Buffer)},217:function(e,t){},218:function(e,t,n){(function(t){function i(e){return function(){var n=[],i={update:function(e,i){return t.isBuffer(e)||(e=new t(e,i)),n.push(e),this},digest:function(i){var r=t.concat(n),o=e(r);return n=null,i?o.toString(i):o}};return i}}var r=n(219),o=i(n(227)),a=i(n(229));e.exports=function(e){return"md5"===e?new o:"rmd160"===e?new a:r(e)}}).call(t,n(212).Buffer)},219:function(e,t,n){var t=e.exports=function(e){var n=t[e];if(!n)throw new Error(e+" is not supported (we accept pull requests)");return new n},i=n(212).Buffer,r=n(220)(i);t.sha1=n(221)(i,r),t.sha256=n(225)(i,r),t.sha512=n(226)(i,r)},220:function(e,t){e.exports=function(e){function t(t,n){this._block=new e(t),this._finalSize=n,this._blockSize=t,this._len=0,this._s=0}return t.prototype.init=function(){this._s=0,this._len=0},t.prototype.update=function(t,n){"string"==typeof t&&(n=n||"utf8",t=new e(t,n));for(var i=this._len+=t.length,r=this._s=this._s||0,o=0,a=this._block;r<i;){for(var s=Math.min(t.length,o+this._blockSize-r%this._blockSize),l=s-o,c=0;c<l;c++)a[r%this._blockSize+c]=t[c+o];r+=l,o+=l,r%this._blockSize===0&&this._update(a)}return this._s=r,this},t.prototype.digest=function(e){var t=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),t%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(t,this._blockSize-4);var n=this._update(this._block)||this._hash();return e?n.toString(e):n},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t}},221:function(e,t,n){var i=n(222).inherits;e.exports=function(e,t){function n(){return p.length?p.pop().init():this instanceof n?(this._w=f,t.call(this,64,56),this._h=null,void this.init()):new n}function r(e,t,n,i){return e<20?t&n|~t&i:e<40?t^n^i:e<60?t&n|t&i|n&i:t^n^i}function o(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function a(e,t){return e+t|0}function s(e,t){return e<<t|e>>>32-t}var l=0,c=4,u=8,h=12,d=16,f=new("undefined"==typeof Int32Array?Array:Int32Array)(80),p=[];return i(n,t),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,t.prototype.init.call(this),this},n.prototype._POOL=p,n.prototype._update=function(e){var t,n,i,l,c,u,h,d,f,p;t=u=this._a,n=h=this._b,i=d=this._c,l=f=this._d,c=p=this._e;for(var m=this._w,g=0;g<80;g++){var v=m[g]=g<16?e.readInt32BE(4*g):s(m[g-3]^m[g-8]^m[g-14]^m[g-16],1),b=a(a(s(t,5),r(g,n,i,l)),a(a(c,v),o(g)));c=l,l=i,i=s(n,30),n=t,t=b}this._a=a(t,u),this._b=a(n,h),this._c=a(i,d),this._d=a(l,f),this._e=a(c,p)},n.prototype._hash=function(){p.length<100&&p.push(this);var t=new e(20);return t.writeInt32BE(0|this._a,l),t.writeInt32BE(0|this._b,c),t.writeInt32BE(0|this._c,u),t.writeInt32BE(0|this._d,h),t.writeInt32BE(0|this._e,d),t},n}},222:function(e,t,n){(function(e,i){function r(e,n){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(n)?i.showHidden=n:n&&t._extend(i,n),E(i.showHidden)&&(i.showHidden=!1),E(i.depth)&&(i.depth=2),E(i.colors)&&(i.colors=!1),E(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),l(i,e,i.depth)}function o(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function l(e,n,i){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,e);return y(r)||(r=l(e,r,i)),r}var o=c(e,n);if(o)return o;var a=Object.keys(n),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),T(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return u(n);if(0===a.length){if(S(n)){var g=n.name?": "+n.name:"";return e.stylize("[Function"+g+"]","special")}if(C(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(T(n))return u(n)}var v="",b=!1,w=["{","}"];if(p(n)&&(b=!0,w=["[","]"]),S(n)){var E=n.name?": "+n.name:"";v=" [Function"+E+"]"}if(C(n)&&(v=" "+RegExp.prototype.toString.call(n)),_(n)&&(v=" "+Date.prototype.toUTCString.call(n)),T(n)&&(v=" "+u(n)),0===a.length&&(!b||0==n.length))return w[0]+v+w[1];if(i<0)return C(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var x;return x=b?h(e,n,i,m,a):a.map(function(t){return d(e,n,i,m,t,b)}),e.seen.pop(),f(x,v,w)}function c(e,t){if(E(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,i,r){for(var o=[],a=0,s=t.length;a<s;++a)P(t,String(a))?o.push(d(e,t,n,i,String(a),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(d(e,t,n,i,r,!0))}),o}function d(e,t,n,i,r,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),P(i,r)||(a="["+r+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(n)?l(e,c.value,null):l(e,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),E(a)){if(o&&r.match(/^\d+$/))return s;a=JSON.stringify(""+r),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e,t,n){var i=0,r=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function b(e){return"number"==typeof e}function y(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function E(e){return void 0===e}function C(e){return x(e)&&"[object RegExp]"===k(e)}function x(e){return"object"==typeof e&&null!==e}function _(e){return x(e)&&"[object Date]"===k(e)}function T(e){return x(e)&&("[object Error]"===k(e)||e instanceof Error)}function S(e){return"function"==typeof e}function A(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function k(e){return Object.prototype.toString.call(e)}function N(e){return e<10?"0"+e.toString(10):e.toString(10)}function D(){var e=new Date,t=[N(e.getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var R=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(e).replace(R,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),s=i[n];n<o;s=i[++n])a+=g(s)||!x(s)?" "+s:" "+r(s);return a},t.deprecate=function(n,r){function o(){if(!a){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),a=!0}return n.apply(this,arguments)}if(E(e.process))return function(){return t.deprecate(n,r).apply(this,arguments)};if(i.noDeprecation===!0)return n;var a=!1;return o};var L,B={};t.debuglog=function(e){if(E(L)&&(L={APP_ENV:"browser",NODE_ENV:"production"}.NODE_DEBUG||""),e=e.toUpperCase(),!B[e])if(new RegExp("\\b"+e+"\\b","i").test(L)){var n=i.pid;B[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,i)}}else B[e]=function(){};return B[e]},t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=v,t.isNumber=b,t.isString=y,t.isSymbol=w,t.isUndefined=E,t.isRegExp=C,t.isObject=x,t.isDate=_,t.isError=T,t.isFunction=S,t.isPrimitive=A,t.isBuffer=n(223);var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",D(),t.format.apply(t,arguments))},t.inherits=n(224),t._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(t,function(){return this}(),n(112))},223:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},224:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){
e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},225:function(e,t,n){var i=n(222).inherits;e.exports=function(e,t){function n(){this.init(),this._w=f,t.call(this,64,56)}function r(e,t){return e>>>t|e<<32-t}function o(e,t){return e>>>t}function a(e,t,n){return e&t^~e&n}function s(e,t,n){return e&t^e&n^t&n}function l(e){return r(e,2)^r(e,13)^r(e,22)}function c(e){return r(e,6)^r(e,11)^r(e,25)}function u(e){return r(e,7)^r(e,18)^o(e,3)}function h(e){return r(e,17)^r(e,19)^o(e,10)}var d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=new Array(64);return i(n,t),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},n.prototype._update=function(e){var t,n,i,r,o,f,p,m,g,v,b=this._w;t=0|this._a,n=0|this._b,i=0|this._c,r=0|this._d,o=0|this._e,f=0|this._f,p=0|this._g,m=0|this._h;for(var y=0;y<64;y++){var w=b[y]=y<16?e.readInt32BE(4*y):h(b[y-2])+b[y-7]+u(b[y-15])+b[y-16];g=m+c(o)+a(o,f,p)+d[y]+w,v=l(t)+s(t,n,i),m=p,p=f,f=o,o=r+g,r=i,i=n,n=t,t=g+v}this._a=t+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=r+this._d|0,this._e=o+this._e|0,this._f=f+this._f|0,this._g=p+this._g|0,this._h=m+this._h|0},n.prototype._hash=function(){var t=new e(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},n}},226:function(e,t,n){var i=n(222).inherits;e.exports=function(e,t){function n(){this.init(),this._w=l,t.call(this,128,112)}function r(e,t,n){return e>>>n|t<<32-n}function o(e,t,n){return e&t^~e&n}function a(e,t,n){return e&t^e&n^t&n}var s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],l=new Array(160);return i(n,t),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},n.prototype._update=function(e){var t,n,i,l,c,u,h,d,f,p,m,g,v,b,y,w,E=this._w;t=0|this._a,n=0|this._b,i=0|this._c,l=0|this._d,c=0|this._e,u=0|this._f,h=0|this._g,d=0|this._h,f=0|this._al,p=0|this._bl,m=0|this._cl,g=0|this._dl,v=0|this._el,b=0|this._fl,y=0|this._gl,w=0|this._hl;for(var C=0;C<80;C++){var x,_,T=2*C;if(C<16)x=E[T]=e.readInt32BE(4*T),_=E[T+1]=e.readInt32BE(4*T+4);else{var S=E[T-30],A=E[T-30+1],k=r(S,A,1)^r(S,A,8)^S>>>7,N=r(A,S,1)^r(A,S,8)^r(A,S,7);S=E[T-4],A=E[T-4+1];var D=r(S,A,19)^r(A,S,29)^S>>>6,P=r(A,S,19)^r(S,A,29)^r(A,S,6),R=E[T-14],L=E[T-14+1],B=E[T-32],M=E[T-32+1];_=N+L,x=k+R+(_>>>0<N>>>0?1:0),_+=P,x=x+D+(_>>>0<P>>>0?1:0),_+=M,x=x+B+(_>>>0<M>>>0?1:0),E[T]=x,E[T+1]=_}var I=a(t,n,i),O=a(f,p,m),F=r(t,f,28)^r(f,t,2)^r(f,t,7),j=r(f,t,28)^r(t,f,2)^r(t,f,7),U=r(c,v,14)^r(c,v,18)^r(v,c,9),H=r(v,c,14)^r(v,c,18)^r(c,v,9),z=s[T],W=s[T+1],Y=o(c,u,h),q=o(v,b,y),X=w+H,K=d+U+(X>>>0<w>>>0?1:0);X+=q,K=K+Y+(X>>>0<q>>>0?1:0),X+=W,K=K+z+(X>>>0<W>>>0?1:0),X+=_,K=K+x+(X>>>0<_>>>0?1:0);var G=j+O,V=F+I+(G>>>0<j>>>0?1:0);d=h,w=y,h=u,y=b,u=c,b=v,v=g+X|0,c=l+K+(v>>>0<g>>>0?1:0)|0,l=i,g=m,i=n,m=p,n=t,p=f,f=X+G|0,t=K+V+(f>>>0<X>>>0?1:0)|0}this._al=this._al+f|0,this._bl=this._bl+p|0,this._cl=this._cl+m|0,this._dl=this._dl+g|0,this._el=this._el+v|0,this._fl=this._fl+b|0,this._gl=this._gl+y|0,this._hl=this._hl+w|0,this._a=this._a+t+(this._al>>>0<f>>>0?1:0)|0,this._b=this._b+n+(this._bl>>>0<p>>>0?1:0)|0,this._c=this._c+i+(this._cl>>>0<m>>>0?1:0)|0,this._d=this._d+l+(this._dl>>>0<g>>>0?1:0)|0,this._e=this._e+c+(this._el>>>0<v>>>0?1:0)|0,this._f=this._f+u+(this._fl>>>0<b>>>0?1:0)|0,this._g=this._g+h+(this._gl>>>0<y>>>0?1:0)|0,this._h=this._h+d+(this._hl>>>0<w>>>0?1:0)|0},n.prototype._hash=function(){function t(e,t,i){n.writeInt32BE(e,i),n.writeInt32BE(t,i+4)}var n=new e(64);return t(this._a,this._al,0),t(this._b,this._bl,8),t(this._c,this._cl,16),t(this._d,this._dl,24),t(this._e,this._el,32),t(this._f,this._fl,40),t(this._g,this._gl,48),t(this._h,this._hl,56),n},n}},227:function(e,t,n){function i(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,i=-271733879,r=-1732584194,u=271733878,h=0;h<e.length;h+=16){var d=n,f=i,p=r,m=u;n=o(n,i,r,u,e[h+0],7,-680876936),u=o(u,n,i,r,e[h+1],12,-389564586),r=o(r,u,n,i,e[h+2],17,606105819),i=o(i,r,u,n,e[h+3],22,-1044525330),n=o(n,i,r,u,e[h+4],7,-176418897),u=o(u,n,i,r,e[h+5],12,1200080426),r=o(r,u,n,i,e[h+6],17,-1473231341),i=o(i,r,u,n,e[h+7],22,-45705983),n=o(n,i,r,u,e[h+8],7,1770035416),u=o(u,n,i,r,e[h+9],12,-1958414417),r=o(r,u,n,i,e[h+10],17,-42063),i=o(i,r,u,n,e[h+11],22,-1990404162),n=o(n,i,r,u,e[h+12],7,1804603682),u=o(u,n,i,r,e[h+13],12,-40341101),r=o(r,u,n,i,e[h+14],17,-1502002290),i=o(i,r,u,n,e[h+15],22,1236535329),n=a(n,i,r,u,e[h+1],5,-165796510),u=a(u,n,i,r,e[h+6],9,-1069501632),r=a(r,u,n,i,e[h+11],14,643717713),i=a(i,r,u,n,e[h+0],20,-373897302),n=a(n,i,r,u,e[h+5],5,-701558691),u=a(u,n,i,r,e[h+10],9,38016083),r=a(r,u,n,i,e[h+15],14,-660478335),i=a(i,r,u,n,e[h+4],20,-405537848),n=a(n,i,r,u,e[h+9],5,568446438),u=a(u,n,i,r,e[h+14],9,-1019803690),r=a(r,u,n,i,e[h+3],14,-187363961),i=a(i,r,u,n,e[h+8],20,1163531501),n=a(n,i,r,u,e[h+13],5,-1444681467),u=a(u,n,i,r,e[h+2],9,-51403784),r=a(r,u,n,i,e[h+7],14,1735328473),i=a(i,r,u,n,e[h+12],20,-1926607734),n=s(n,i,r,u,e[h+5],4,-378558),u=s(u,n,i,r,e[h+8],11,-2022574463),r=s(r,u,n,i,e[h+11],16,1839030562),i=s(i,r,u,n,e[h+14],23,-35309556),n=s(n,i,r,u,e[h+1],4,-1530992060),u=s(u,n,i,r,e[h+4],11,1272893353),r=s(r,u,n,i,e[h+7],16,-155497632),i=s(i,r,u,n,e[h+10],23,-1094730640),n=s(n,i,r,u,e[h+13],4,681279174),u=s(u,n,i,r,e[h+0],11,-358537222),r=s(r,u,n,i,e[h+3],16,-722521979),i=s(i,r,u,n,e[h+6],23,76029189),n=s(n,i,r,u,e[h+9],4,-640364487),u=s(u,n,i,r,e[h+12],11,-421815835),r=s(r,u,n,i,e[h+15],16,530742520),i=s(i,r,u,n,e[h+2],23,-995338651),n=l(n,i,r,u,e[h+0],6,-198630844),u=l(u,n,i,r,e[h+7],10,1126891415),r=l(r,u,n,i,e[h+14],15,-1416354905),i=l(i,r,u,n,e[h+5],21,-57434055),n=l(n,i,r,u,e[h+12],6,1700485571),u=l(u,n,i,r,e[h+3],10,-1894986606),r=l(r,u,n,i,e[h+10],15,-1051523),i=l(i,r,u,n,e[h+1],21,-2054922799),n=l(n,i,r,u,e[h+8],6,1873313359),u=l(u,n,i,r,e[h+15],10,-30611744),r=l(r,u,n,i,e[h+6],15,-1560198380),i=l(i,r,u,n,e[h+13],21,1309151649),n=l(n,i,r,u,e[h+4],6,-145523070),u=l(u,n,i,r,e[h+11],10,-1120210379),r=l(r,u,n,i,e[h+2],15,718787259),i=l(i,r,u,n,e[h+9],21,-343485551),n=c(n,d),i=c(i,f),r=c(r,p),u=c(u,m)}return Array(n,i,r,u)}function r(e,t,n,i,r,o){return c(u(c(c(t,e),c(i,o)),r),n)}function o(e,t,n,i,o,a,s){return r(t&n|~t&i,e,t,o,a,s)}function a(e,t,n,i,o,a,s){return r(t&i|n&~i,e,t,o,a,s)}function s(e,t,n,i,o,a,s){return r(t^n^i,e,t,o,a,s)}function l(e,t,n,i,o,a,s){return r(n^(t|~i),e,t,o,a,s)}function c(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function u(e,t){return e<<t|e>>>32-t}var h=n(228);e.exports=function(e){return h.hash(e,i,16)}},228:function(e,t,n){(function(t){function n(e,n){if(e.length%o!==0){var i=e.length+(o-e.length%o);e=t.concat([e,a],i)}for(var r=[],s=n?e.readInt32BE:e.readInt32LE,l=0;l<e.length;l+=o)r.push(s.call(e,l));return r}function i(e,n,i){for(var r=new t(n),o=i?r.writeInt32BE:r.writeInt32LE,a=0;a<e.length;a++)o.call(r,e[a],4*a,!0);return r}function r(e,r,o,a){t.isBuffer(e)||(e=new t(e));var l=r(n(e,a),e.length*s);return i(l,o,a)}var o=4,a=new t(o);a.fill(0);var s=8;e.exports={hash:r}}).call(t,n(212).Buffer)},229:function(e,t,n){(function(t){function n(e,t,n){return e^t^n}function i(e,t,n){return e&t|~e&n}function r(e,t,n){return(e|~t)^n}function o(e,t,n){return e&n|t&~n}function a(e,t,n){return e^(t|~n)}function s(e,t){return e<<t|e>>>32-t}function l(e){var n=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof e&&(e=new t(e,"utf8"));var i=m(e),r=8*e.length,o=8*e.length;i[r>>>5]|=128<<24-r%32,i[(r+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var a=0;a<i.length;a+=16)v(n,i,a);for(var a=0;a<5;a++){var s=n[a];n[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var l=g(n);return new t(l)}e.exports=l;/** @preserve
	(c) 2012 by Cédric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],f=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0],m=function(e){for(var t=[],n=0,i=0;n<e.length;n++,i+=8)t[i>>>5]|=e[n]<<24-i%32;return t},g=function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},v=function(e,t,l){for(var m=0;m<16;m++){var g=l+m,v=t[g];t[g]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8)}var b,y,w,E,C,x,_,T,S,A;x=b=e[0],_=y=e[1],T=w=e[2],S=E=e[3],A=C=e[4];for(var k,m=0;m<80;m+=1)k=b+t[l+c[m]]|0,k+=m<16?n(y,w,E)+f[0]:m<32?i(y,w,E)+f[1]:m<48?r(y,w,E)+f[2]:m<64?o(y,w,E)+f[3]:a(y,w,E)+f[4],k|=0,k=s(k,h[m]),k=k+C|0,b=C,C=E,E=s(w,10),w=y,y=k,k=x+t[l+u[m]]|0,k+=m<16?a(_,T,S)+p[0]:m<32?o(_,T,S)+p[1]:m<48?r(_,T,S)+p[2]:m<64?i(_,T,S)+p[3]:n(_,T,S)+p[4],k|=0,k=s(k,d[m]),k=k+A|0,x=A,A=S,S=s(T,10),T=_,_=k;k=e[1]+w+S|0,e[1]=e[2]+E+A|0,e[2]=e[3]+C+x|0,e[3]=e[4]+b+_|0,e[4]=e[0]+y+T|0,e[0]=k}}).call(t,n(212).Buffer)},230:function(e,t,n){(function(t){function i(e,n){if(!(this instanceof i))return new i(e,n);this._opad=l,this._alg=e;var a="sha512"===e?128:64;n=this._key=t.isBuffer(n)?n:new t(n),n.length>a?n=r(e).update(n).digest():n.length<a&&(n=t.concat([n,o],a));for(var s=this._ipad=new t(a),l=this._opad=new t(a),c=0;c<a;c++)s[c]=54^n[c],l[c]=92^n[c];this._hash=r(e).update(s)}var r=n(218),o=new t(128);o.fill(0),e.exports=i,i.prototype.update=function(e,t){return this._hash.update(e,t),this},i.prototype.digest=function(e){var t=this._hash.digest();return r(this._alg).update(this._opad).update(t).digest(e)}}).call(t,n(212).Buffer)},231:function(e,t,n){var i=n(232);e.exports=function(e,t){t=t||{};var n=i(e);return t.pbkdf2=n.pbkdf2,t.pbkdf2Sync=n.pbkdf2Sync,t}},232:function(e,t,n){(function(t){e.exports=function(e){function n(e,t,n,r,o,a){if("function"==typeof o&&(a=o,o=void 0),"function"!=typeof a)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var s;try{s=i(e,t,n,r,o)}catch(e){return a(e)}a(void 0,s)})}function i(n,i,r,o,a){if("number"!=typeof r)throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(o<0)throw new TypeError("Bad key length");a=a||"sha1",t.isBuffer(n)||(n=new t(n)),t.isBuffer(i)||(i=new t(i));var s,l,c,u=1,h=new t(o),d=new t(i.length+4);i.copy(d,0,0,i.length);for(var f=1;f<=u;f++){d.writeUInt32BE(f,i.length);var p=e.createHmac(a,n).update(d).digest();if(!s&&(s=p.length,c=new t(s),u=Math.ceil(o/s),l=o-(u-1)*s,o>(Math.pow(2,32)-1)*s))throw new TypeError("keylen exceeds maximum length");p.copy(c,0,0,s);for(var m=1;m<r;m++){p=e.createHmac(a,n).update(p).digest();for(var g=0;g<s;g++)c[g]^=p[g]}var v=(f-1)*s,b=f==u?l:s;c.copy(h,v,0,b)}return h}return{pbkdf2:n,pbkdf2Sync:i}}}).call(t,n(212).Buffer)},233:function(e,t,n){"use strict";var i=n(174),r=n(193)(i),o=n(234),a=n(200),s=n(205)("stores/local-store"),l=n(209).checkClientError;e.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{locale:"en",_csrf:null}},reset:function(){this.setState(this.getInitialState())},storeDidUpdate:function(){s("store updated")},changeLocale:function(e){var t=this;a.post("/api/user/setlocale").type("json").accept("json").send({locale:e}).end(function(n,i){l(i,n,function(n){n?s(n):(s("changed locale to: "+e),t.setState({locale:e}),t.trigger(t.state))},function(e){e()})})}})},234:function(e,t,n){"use strict";var i=n(174),r=i.createActions({changeLocale:{}});e.exports=r},241:function(e,t,n){"use strict";var i=n(242),r=n(1),o=n(174),a=n(193)(o),s=n(247),l=n(248),c=r.createClass({displayName:"MapHubsNotification",mixins:[a.connect(s)],onDismiss:function(){l.dismissNotification()},render:function(){var e={};switch(this.state.position){case"topright":e={top:"60px",right:"20px",bottom:void 0,left:void 0};break;case"bottomright":e={top:void 0,right:"20px",bottom:"60px",left:void 0};break;case"topleft":e={top:"60px",right:void 0,bottom:void 0,left:"20px"};break;case"bottomleft":e={top:void 0,right:void 0,bottom:"60px",left:"20px"}}return r.createElement(i.Notification,{id:"omh-notification",isActive:this.state.isActive,message:this.state.message,action:this.state.action,onClick:this.state.onClick,dismissAfter:this.state.dismissAfter,onDismiss:this.onDismiss,barStyle:{background:this.state.backgroundColor},activeBarStyle:e,actionStyle:{color:this.state.color}})}});e.exports=c},247:function(e,t,n){"use strict";var i=n(174),r=n(193)(i),o=n(248),a=n(205)("stores/notification-store"),s=n(172);e.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{isActive:!1,message:"",action:null,onClick:function(){},backgroundColor:MAPHUBS_CONFIG.primaryColor,color:"white",position:"topright",dismissAfter:3e3,onDismiss:function(){}}},reset:function(){this.setState(this.getInitialState()),this.trigger(this.state)},storeDidUpdate:function(){a("store updated")},showNotification:function(e){if(e){var t=s.extend(this.getInitialState(),e);this.setState(t),this.setState({isActive:!0})}},dismissNotification:function(){this.state.onDismiss(),this.reset()}})},248:function(e,t,n){"use strict";var i=n(174),r=i.createActions({showNotification:{},dismissNotification:{}});e.exports=r},249:function(e,t,n){"use strict";var i=n(250),r=n(1),o=n(174),a=n(193)(o),s=n(252),l=n(253),c=n(233),u=n(235),h=r.createClass({displayName:"Message",mixins:[a.connect(s),a.connect(c)],__:function(e){return u.getLocaleString(this.state.locale,e)},onDismiss:function(){l.dismissMessage()},render:function(){return r.createElement(i.Modal,{id:"message-modal",show:this.state.show,fixedFooter:!1},r.createElement(i.ModalContent,null,r.createElement("h4",null,this.state.title),r.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.message.toString()}})),r.createElement(i.ModalFooter,null,r.createElement("a",{href:"#!",className:" modal-action modal-close waves-effect waves-light btn-flat",onClick:this.onDismiss},this.__("Okay"))))}});e.exports=h},250:function(e,t,n){"use strict";var i=n(1),r=n(172),o=n(251),a=i.createClass({displayName:"ModalContent",propTypes:{className:i.PropTypes.string,style:i.PropTypes.object},getDefaultProps:function(){return{style:{}}},render:function(){var e=o("modal-content",this.props.className);return i.createElement("div",{className:e,style:this.props.style},this.props.children)}}),s=i.createClass({displayName:"ModalFooter",propTypes:{className:i.PropTypes.string},render:function(){var e=o("modal-footer",this.props.className);return i.createElement("div",{className:e},this.props.children)}}),l=i.createClass({displayName:"Modal",propTypes:{id:i.PropTypes.string,show:i.PropTypes.bool.isRequired,className:i.PropTypes.string,fixedFooter:i.PropTypes.bool,dismissible:i.PropTypes.bool,in_duration:i.PropTypes.number,out_duration:i.PropTypes.number,opacity:i.PropTypes.number,ready:i.PropTypes.func,complete:i.PropTypes.func},getDefaultProps:function(){return{id:"modal",show:!1,fixedFooter:!1,className:"",dismissible:!0,opacity:.5,in_duration:300,out_duration:200,ready:function(){},complete:function(){}}},componentDidMount:function(){r(this.refs.modal).modal({dismissible:this.props.dismissible,opacity:this.props.opacity,in_duration:this.props.in_duration,out_duration:this.props.out_duration,ready:this.props.ready,complete:this.props.complete})},componentDidUpdate:function(e){if(this.props.show&&!e.show){r(this.refs.modal).modal("open");var t=document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}else e.show&&!this.props.show&&r(this.refs.modal).modal("close")},render:function(){var e="";return e=this.props.fixedFooter?o("modal","modal-fixed-footer",this.props.className):o("modal",this.props.className),i.createElement("div",{ref:"modal",id:this.props.id,className:e},this.props.children)}});e.exports={Modal:l,ModalContent:a,ModalFooter:s}},252:function(e,t,n){"use strict";var i=n(174),r=n(193)(i),o=n(253),a=n(205)("stores/message-store"),s=n(172);e.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{show:!1,title:"Message",message:"",onDismiss:null}},reset:function(){this.setState(this.getInitialState()),this.trigger(this.state)},storeDidUpdate:function(){a("store updated")},showMessage:function(e){if(e){var t=s.extend(this.getInitialState(),e);this.setState(t),this.setState({show:!0})}},dismissMessage:function(){this.state.onDismiss&&this.state.onDismiss(),this.reset()}})},253:function(e,t,n){"use strict";var i=n(174),r=i.createActions({showMessage:{},dismissMessage:{}});e.exports=r},254:function(e,t,n){"use strict";var i=n(250),r=n(1),o=n(174),a=n(193)(o),s=n(255),l=n(256),c=r.createClass({displayName:"Confirmation",mixins:[a.connect(s)],hide:function(){l.reset()},onNegativeResponse:function(){this.state.onNegativeResponse(),this.hide()},onPositiveResponse:function(){this.state.onPositiveResponse(),this.hide()},render:function(){return r.createElement(i.Modal,{id:"confirmation",show:this.state.show,fixedFooter:!1,dismissible:!1},r.createElement(i.ModalContent,null,r.createElement("h5",null,this.state.title),r.createElement("p",null,this.state.message)),r.createElement(i.ModalFooter,null,r.createElement("div",{className:"right"},r.createElement("a",{className:"waves-effect waves-light btn",style:{float:"none",marginRight:"15px"},onClick:this.onNegativeResponse},this.state.negativeButtonText),r.createElement("a",{className:"waves-effect waves-light btn",style:{float:"none"},onClick:this.onPositiveResponse},this.state.postitiveButtonText))))}});e.exports=c},255:function(e,t,n){"use strict";var i=n(174),r=n(193)(i),o=n(256),a=n(205)("stores/confirmation-store"),s=n(172),l=n(233),c=n(235);e.exports=i.createStore({mixins:[r,i.ListenerMixin],listenables:o,__:function(e){var t="en";return this.state&&this.state.locale&&(t=this.state.locale),c.getLocaleString(t,e)},getInitialState:function(){return this.listenTo(l.locale,this.updateLocale),this.getEmptyState()},getEmptyState:function(){return{show:!1,locale:l.state.locale,title:this.__("Confirmation"),message:this.__("Please confirm"),postitiveButtonText:this.__("Okay"),negativeButtonText:this.__("Cancel"),onPositiveResponse:function(){},onNegativeResponse:function(){}}},reset:function(){this.setState(this.getEmptyState())},updateLocale:function(e){this.setState({locale:e})},storeDidUpdate:function(){a("store updated")},showConfirmation:function(e){if(e){var t=s.extend(this.getInitialState(),e);this.setState(t),this.setState({show:!0})}}})},256:function(e,t,n){"use strict";var i=n(174),r=i.createActions({showConfirmation:{},positiveResponse:{},negativeResponse:{},reset:{}});e.exports=r},257:function(e,t,n){"use strict";var i=n(1),r=n(174),o=n(193)(r),a=n(198),s=n(234),l=n(233),c=n(235),u=n(172),h=i.createClass({displayName:"LocaleChooser",mixins:[o.connect(a),o.connect(l)],__:function(e){return c.getLocaleString(this.state.locale,e)},propTypes:{id:i.PropTypes.string},getDefaultProps:function(){return{id:"locale-dropdown"}},componentDidMount:function(){u(".locale-tooltip").tooltip(),u(this.refs.dropdownButton).dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,gutter:0,belowOrigin:!0,alignment:"right"})},shouldComponentUpdate:function(e,t){return this.state.locale!=t.locale},onChange:function(e){s.changeLocale(e),u(this.refs.dropdownMenu).hide()},render:function(){var e=this,t={en:{label:"EN"},fr:{label:"FR"},es:{label:"ES"},it:{label:"IT"}};return i.createElement("li",{className:"nav-link-wrapper nav-dropdown-link-wrapper locale-tooltip","data-position":"bottom","data-delay":"50","data-tooltip":this.__("Change Language")},i.createElement("a",{ref:"dropdownButton",className:"locale-dropdown-button nav-dropdown-button",href:"#!","data-activates":this.props.id,style:{paddingRight:0}},t[this.state.locale].label,i.createElement("i",{className:"material-icons right",style:{marginLeft:0,color:"#212121 !important"}},"arrow_drop_down")),i.createElement("ul",{ref:"dropdownMenu",id:this.props.id,className:"dropdown-content"},i.createElement("li",null,i.createElement("a",{href:"#!",onClick:function(){e.onChange("en")},className:"nav-hover-menu-item"},"English (EN)")),i.createElement("li",null,i.createElement("a",{href:"#!",onClick:function(){e.onChange("fr")},className:"nav-hover-menu-item"},"Français (FR)")),i.createElement("li",null,i.createElement("a",{href:"#!",onClick:function(){e.onChange("es")},className:"nav-hover-menu-item"},"Español (ES)")),i.createElement("li",null,i.createElement("a",{href:"#!",onClick:function(){e.onChange("it")},className:"nav-hover-menu-item"},"Italiano (IT)"))))}});e.exports=h},258:function(e,t,n){"use strict";var i=n(1),r=n(174),o=n(193)(r),a=n(233),s=n(235),l=i.createClass({displayName:"Footer",mixins:[o.connect(a)],__:function(e){return s.getLocaleString(this.state.locale,e)},render:function(){var e="",t="",n="",r="";return MAPHUBS_CONFIG.mapHubsPro?(t=i.createElement("li",null,i.createElement("a",{href:"https://maphubs.com/about"},this.__("About"))),n=i.createElement("li",null,i.createElement("a",{href:"https://maphubs.com/services"},this.__("Services")))):(e=i.createElement("ul",{style:{marginTop:"0px"}},i.createElement("li",{className:"valign-wrapper"},i.createElement("a",{href:"http://moabi.org",className:"valign",style:{float:"left",paddingRight:"5px"}},i.createElement("img",{width:"75",height:"75",style:{marginLeft:"-10px"},src:"/assets/moabi-logo.png",alt:"Moabi.org"})),i.createElement("span",{className:"valign"},MAPHUBS_CONFIG.productName+this.__(" is a non-profit initiative of the Moabi organization")))),t=i.createElement("li",null,i.createElement("a",{href:"/about"},this.__("About"))),n=i.createElement("li",null,i.createElement("a",{href:"/services"},this.__("Services"))),r=i.createElement("li",null,i.createElement("a",{href:"/journalists"},this.__("Journalists")))),i.createElement("footer",{className:"page-footer white"},i.createElement("div",{className:"divider"}),i.createElement("div",{className:"container"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col l4 s12",style:{marginTop:"15px"}},e,i.createElement("ul",null,i.createElement("li",{className:"valign-wrapper"},i.createElement("a",{href:"http://maphubs.com",className:"valign",style:{float:"left",paddingRight:"5px"}},i.createElement("img",{width:"111",height:"30",src:"/assets/maphubs-logo-small.png",alt:"MapHubs.com"})),i.createElement("span",{className:"valign"},this.__("Powered by MapHubs"))),i.createElement("li",null,this.__("View the open source code on "),i.createElement("a",{href:"https://github.com/maphubs"},"GitHub")))),i.createElement("div",{className:"col l5 s12"},i.createElement("ul",null,i.createElement("li",null,this.__("Contact Us")),i.createElement("li",null,i.createElement("a",{className:"text-darken-3 center",href:"#",onClick:function(){HS.beacon.open()}},MAPHUBS_CONFIG.contactEmail)),i.createElement("li",null,i.createElement("a",{className:"text-darken-3 center",href:"http://twitter.com/"+MAPHUBS_CONFIG.twitter},"@",MAPHUBS_CONFIG.twitter)))),i.createElement("div",{className:"col l3 s12"},i.createElement("ul",null,i.createElement("li",null,this.__("Learn More")),t,n,i.createElement("li",null,i.createElement("a",{href:"http://help.maphubs.com",target:"_blank"},this.__("Help"))),r,i.createElement("li",null,i.createElement("a",{href:"/terms"},this.__("Terms"))),i.createElement("li",null,i.createElement("a",{href:"/privacy"},this.__("Privacy"))))))),i.createElement("div",{className:"footer-copyright white"},i.createElement("div",{className:"grey-text container center"},i.createElement("small",null,"© 2016 ",MAPHUBS_CONFIG.productName))))}});e.exports=l},575:function(e,t){"use strict";e.exports={getBaseUrl:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n?(e=MAPHUBS_CONFIG.host_internal,t=MAPHUBS_CONFIG.internal_port):(e=MAPHUBS_CONFIG.host,t=MAPHUBS_CONFIG.port);var i="http://";MAPHUBS_CONFIG.https&&!n&&(i="https://");var r=i+e;return 80!=t&&(r+=":"+t),r},getUrlParameter:function(e){if("undefined"!=typeof window){var t,n,i=decodeURIComponent(window.location.search.substring(1)),r=i.split("&");for(n=0;n<r.length;n++)if(t=r[n].split("="),t[0]===e)return void 0===t[1]||t[1]}}}},581:function(e,t,n){(function(e,n){function i(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}function r(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function o(e){return function(t){return null==t?void 0:t[e]}}function a(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function s(e){return function(t){return e(t)}}function l(e,t){return null==e?void 0:e[t]}function c(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function u(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function h(e,t){return function(n){return e(t(n))}}function d(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function f(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function p(){this.__data__=hn?hn(null):{}}function m(e){return this.has(e)&&delete this.__data__[e]}function g(e){var t=this.__data__;if(hn){var n=t[e];return n===He?void 0:n}return $t.call(t,e)?t[e]:void 0}function v(e){var t=this.__data__;return hn?void 0!==t[e]:$t.call(t,e)}function b(e,t){var n=this.__data__;return n[e]=hn&&void 0===t?He:t,this}function y(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function w(){this.__data__=[]}function E(e){var t=this.__data__,n=H(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():nn.call(t,n,1),!0}function C(e){var t=this.__data__,n=H(t,e);return n<0?void 0:t[n][1]}function x(e){return H(this.__data__,e)>-1}function _(e,t){var n=this.__data__,i=H(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function S(){this.__data__={hash:new f,map:new(sn||y),string:new f}}function A(e){return ae(this,e).delete(e)}function k(e){return ae(this,e).get(e)}function N(e){return ae(this,e).has(e)}function D(e,t){return ae(this,e).set(e,t),this}function P(e){var t=-1,n=e?e.length:0;for(this.__data__=new T;++t<n;)this.add(e[t])}function R(e){return this.__data__.set(e,He),this}function L(e){return this.__data__.has(e)}function B(e){this.__data__=new y(e)}function M(){this.__data__=new y}function I(e){return this.__data__.delete(e)}function O(e){return this.__data__.get(e)}function F(e){return this.__data__.has(e)}function j(e,t){var n=this.__data__;if(n instanceof y){var i=n.__data__;if(!sn||i.length<je-1)return i.push([e,t]),this;n=this.__data__=new T(i)}return n.set(e,t),this}function U(e,t){var n=Cn(e)||Ce(e)?a(e.length,String):[],i=n.length,r=!!i;for(var o in e)!t&&!$t.call(e,o)||r&&("length"==o||ue(o,i))||n.push(o);return n}function H(e,t){for(var n=e.length;n--;)if(Ee(e[n][0],t))return n;return-1}function z(e,t){t=he(t,e)?[t]:ne(t);for(var n=0,i=t.length;null!=e&&n<i;)e=e[ve(t[n++])];return n&&n==i?e:void 0}function W(e){return Jt.call(e)}function Y(e,t){return null!=e&&t in Object(e)}function q(e,t,n,i,r){return e===t||(null==e||null==t||!Ae(e)&&!ke(t)?e!==e&&t!==t:X(e,t,q,n,i,r))}function X(e,t,n,i,r,o){var a=Cn(e),s=Cn(t),l=Ve,u=Ve;a||(l=wn(e),l=l==Ge?it:l),s||(u=wn(t),u=u==Ge?it:u);var h=l==it&&!c(e),d=u==it&&!c(t),f=l==u;if(f&&!h)return o||(o=new B),a||xn(e)?ie(e,t,n,i,r,o):re(e,t,l,n,i,r,o);if(!(r&We)){var p=h&&$t.call(e,"__wrapped__"),m=d&&$t.call(t,"__wrapped__");if(p||m){var g=p?e.value():e,v=m?t.value():t;return o||(o=new B),n(g,v,i,r,o)}}return!!f&&(o||(o=new B),oe(e,t,n,i,r,o))}function K(e,t,n,i){var r=n.length,o=r,a=!i;if(null==e)return!o;for(e=Object(e);r--;){var s=n[r];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<o;){s=n[r];var l=s[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var h=new B;if(i)var d=i(c,u,l,e,t,h);if(!(void 0===d?q(u,c,i,ze|We,h):d))return!1}}return!0}function G(e){if(!Ae(e)||fe(e))return!1;var t=Te(e)||c(e)?Qt:Dt;return t.test(be(e))}function V(e){return ke(e)&&Se(e.length)&&!!Lt[Jt.call(e)]}function $(e){return"function"==typeof e?e:null==e?Oe:"object"==typeof e?Cn(e)?Z(e[0],e[1]):Q(e):Fe(e)}function J(e){if(!pe(e))return rn(e);var t=[];for(var n in Object(e))$t.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Q(e){var t=se(e);return 1==t.length&&t[0][2]?ge(t[0][0],t[0][1]):function(n){return n===e||K(n,e,t)}}function Z(e,t){return he(e)&&me(t)?ge(ve(e),t):function(n){var i=Be(n,e);return void 0===i&&i===t?Me(n,e):q(t,i,void 0,ze|We)}}function ee(e){return function(t){return z(t,e)}}function te(e){if("string"==typeof e)return e;if(Ne(e))return yn?yn.call(e):"";var t=e+"";return"0"==t&&1/e==-Ye?"-0":t}function ne(e){return Cn(e)?e:En(e)}function ie(e,t,n,r,o,a){var s=o&We,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var h=-1,d=!0,f=o&ze?new P:void 0;for(a.set(e,t),a.set(t,e);++h<l;){var p=e[h],m=t[h];if(r)var g=s?r(m,p,h,t,e,a):r(p,m,h,e,t,a);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!i(t,function(e,t){if(!f.has(t)&&(p===e||n(p,e,r,o,a)))return f.add(t)})){d=!1;break}}else if(p!==m&&!n(p,m,r,o,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function re(e,t,n,i,r,o,a){switch(n){case ht:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ut:return!(e.byteLength!=t.byteLength||!i(new en(e),new en(t)));case $e:case Je:case nt:return Ee(+e,+t);case Qe:return e.name==t.name&&e.message==t.message;case ot:case st:return e==t+"";case tt:var s=u;case at:var l=o&We;if(s||(s=d),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;o|=ze,a.set(e,t);var h=ie(s(e),s(t),i,r,o,a);return a.delete(e),h;case lt:if(bn)return bn.call(e)==bn.call(t)}return!1}function oe(e,t,n,i,r,o){var a=r&We,s=Ie(e),l=s.length,c=Ie(t),u=c.length;if(l!=u&&!a)return!1;for(var h=l;h--;){var d=s[h];if(!(a?d in t:$t.call(t,d)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var p=!0;o.set(e,t),o.set(t,e);for(var m=a;++h<l;){d=s[h];var g=e[d],v=t[d];if(i)var b=a?i(v,g,d,t,e,o):i(g,v,d,e,t,o);if(!(void 0===b?g===v||n(g,v,i,r,o):b)){p=!1;break}m||(m="constructor"==d)}if(p&&!m){var y=e.constructor,w=t.constructor;y!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w)&&(p=!1)}return o.delete(e),o.delete(t),p}function ae(e,t){var n=e.__data__;return de(t)?n["string"==typeof t?"string":"hash"]:n.map}function se(e){for(var t=Ie(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,me(r)]}return t}function le(e,t){var n=l(e,t);return G(n)?n:void 0}function ce(e,t,n){t=he(t,e)?[t]:ne(t);for(var i,r=-1,o=t.length;++r<o;){var a=ve(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}if(i)return i;var o=e?e.length:0;return!!o&&Se(o)&&ue(a,o)&&(Cn(e)||Ce(e))}function ue(e,t){return t=null==t?qe:t,!!t&&("number"==typeof e||Rt.test(e))&&e>-1&&e%1==0&&e<t}function he(e,t){if(Cn(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ne(e))||(Ct.test(e)||!Et.test(e)||null!=t&&e in Object(t))}function de(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function fe(e){return!!Gt&&Gt in e}function pe(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||Xt;return e===n}function me(e){return e===e&&!Ae(e)}function ge(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function ve(e){if("string"==typeof e||Ne(e))return e;var t=e+"";return"0"==t&&1/e==-Ye?"-0":t}function be(e){if(null!=e){try{return Vt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ye(e,t,n){var i=e?e.length:0;if(!i)return-1;var o=null==n?0:Pe(n);return o<0&&(o=on(i+o,0)),r(e,$(t,3),o)}function we(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(Ue);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a),a};return n.cache=new(we.Cache||T),n}function Ee(e,t){return e===t||e!==e&&t!==t}function Ce(e){return _e(e)&&$t.call(e,"callee")&&(!tn.call(e,"callee")||Jt.call(e)==Ge)}function xe(e){return null!=e&&Se(e.length)&&!Te(e)}function _e(e){return ke(e)&&xe(e)}function Te(e){var t=Ae(e)?Jt.call(e):"";return t==Ze||t==et}function Se(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=qe}function Ae(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ke(e){return!!e&&"object"==typeof e}function Ne(e){return"symbol"==typeof e||ke(e)&&Jt.call(e)==lt}function De(e){if(!e)return 0===e?e:0;if(e=Re(e),e===Ye||e===-Ye){var t=e<0?-1:1;return t*Xe}return e===e?e:0}function Pe(e){var t=De(e),n=t%1;return t===t?n?t-n:t:0}function Re(e){if("number"==typeof e)return e;if(Ne(e))return Ke;if(Ae(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ae(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(St,"");var n=Nt.test(e);return n||Pt.test(e)?Bt(e.slice(2),n?2:8):kt.test(e)?Ke:+e}function Le(e){return null==e?"":te(e)}function Be(e,t,n){var i=null==e?void 0:z(e,t);return void 0===i?n:i}function Me(e,t){return null!=e&&ce(e,t,Y)}function Ie(e){return xe(e)?U(e):J(e)}function Oe(e){return e}function Fe(e){return he(e)?o(ve(e)):ee(e)}var je=200,Ue="Expected a function",He="__lodash_hash_undefined__",ze=1,We=2,Ye=1/0,qe=9007199254740991,Xe=1.7976931348623157e308,Ke=NaN,Ge="[object Arguments]",Ve="[object Array]",$e="[object Boolean]",Je="[object Date]",Qe="[object Error]",Ze="[object Function]",et="[object GeneratorFunction]",tt="[object Map]",nt="[object Number]",it="[object Object]",rt="[object Promise]",ot="[object RegExp]",at="[object Set]",st="[object String]",lt="[object Symbol]",ct="[object WeakMap]",ut="[object ArrayBuffer]",ht="[object DataView]",dt="[object Float32Array]",ft="[object Float64Array]",pt="[object Int8Array]",mt="[object Int16Array]",gt="[object Int32Array]",vt="[object Uint8Array]",bt="[object Uint8ClampedArray]",yt="[object Uint16Array]",wt="[object Uint32Array]",Et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ct=/^\w*$/,xt=/^\./,_t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tt=/[\\^$.*+?()[\]{}|]/g,St=/^\s+|\s+$/g,At=/\\(\\)?/g,kt=/^[-+]0x[0-9a-f]+$/i,Nt=/^0b[01]+$/i,Dt=/^\[object .+?Constructor\]$/,Pt=/^0o[0-7]+$/i,Rt=/^(?:0|[1-9]\d*)$/,Lt={};Lt[dt]=Lt[ft]=Lt[pt]=Lt[mt]=Lt[gt]=Lt[vt]=Lt[bt]=Lt[yt]=Lt[wt]=!0,Lt[Ge]=Lt[Ve]=Lt[ut]=Lt[$e]=Lt[ht]=Lt[Je]=Lt[Qe]=Lt[Ze]=Lt[tt]=Lt[nt]=Lt[it]=Lt[ot]=Lt[at]=Lt[st]=Lt[ct]=!1;var Bt=parseInt,Mt="object"==typeof e&&e&&e.Object===Object&&e,It="object"==typeof self&&self&&self.Object===Object&&self,Ot=Mt||It||Function("return this")(),Ft="object"==typeof t&&t&&!t.nodeType&&t,jt=Ft&&"object"==typeof n&&n&&!n.nodeType&&n,Ut=jt&&jt.exports===Ft,Ht=Ut&&Mt.process,zt=function(){try{return Ht&&Ht.binding("util")}catch(e){}}(),Wt=zt&&zt.isTypedArray,Yt=Array.prototype,qt=Function.prototype,Xt=Object.prototype,Kt=Ot["__core-js_shared__"],Gt=function(){var e=/[^.]+$/.exec(Kt&&Kt.keys&&Kt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Vt=qt.toString,$t=Xt.hasOwnProperty,Jt=Xt.toString,Qt=RegExp("^"+Vt.call($t).replace(Tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zt=Ot.Symbol,en=Ot.Uint8Array,tn=Xt.propertyIsEnumerable,nn=Yt.splice,rn=h(Object.keys,Object),on=Math.max,an=le(Ot,"DataView"),sn=le(Ot,"Map"),ln=le(Ot,"Promise"),cn=le(Ot,"Set"),un=le(Ot,"WeakMap"),hn=le(Object,"create"),dn=be(an),fn=be(sn),pn=be(ln),mn=be(cn),gn=be(un),vn=Zt?Zt.prototype:void 0,bn=vn?vn.valueOf:void 0,yn=vn?vn.toString:void 0;f.prototype.clear=p,f.prototype.delete=m,f.prototype.get=g,f.prototype.has=v,f.prototype.set=b,y.prototype.clear=w,y.prototype.delete=E,y.prototype.get=C,y.prototype.has=x,y.prototype.set=_,T.prototype.clear=S,T.prototype.delete=A,T.prototype.get=k,T.prototype.has=N,T.prototype.set=D,P.prototype.add=P.prototype.push=R,P.prototype.has=L,B.prototype.clear=M,B.prototype.delete=I,B.prototype.get=O,B.prototype.has=F,B.prototype.set=j;var wn=W;(an&&wn(new an(new ArrayBuffer(1)))!=ht||sn&&wn(new sn)!=tt||ln&&wn(ln.resolve())!=rt||cn&&wn(new cn)!=at||un&&wn(new un)!=ct)&&(wn=function(e){var t=Jt.call(e),n=t==it?e.constructor:void 0,i=n?be(n):void 0;if(i)switch(i){case dn:return ht;case fn:return tt;case pn:return rt;case mn:return at;case gn:return ct}return t});var En=we(function(e){e=Le(e);var t=[];return xt.test(e)&&t.push(""),e.replace(_t,function(e,n,i,r){t.push(i?r.replace(At,"$1"):n||e)}),t});we.Cache=T;var Cn=Array.isArray,xn=Wt?s(Wt):V;n.exports=ye}).call(t,function(){return this}(),n(578)(e))},613:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(250),o=n(614),a=i(o),s=n(1),l=n(205)("ImageCrop"),c=n(583),u=n(174),h=n(193)(u),d=n(233),f=n(235),p=n(253),m=(n(577),n(172)),g=n(616),v=s.createClass({displayName:"ImageCrop",mixins:[h.connect(d)],__:function(e){return f.getLocaleString(this.state.locale,e)},propTypes:{onCrop:s.PropTypes.func,lockAspect:s.PropTypes.bool,aspectRatio:s.PropTypes.number,autoCropArea:s.PropTypes.number,allowedExtensions:s.PropTypes.array,max_size:s.PropTypes.number,skip_size:s.PropTypes.number,jpeg_quality:s.PropTypes.number,resize_height:s.PropTypes.number,resize_max_height:s.PropTypes.number,resize_width:s.PropTypes.number,resize_max_width:s.PropTypes.number},getDefaultProps:function(){return{lockAspect:!1,aspectRatio:null,autoCropArea:1,allowedExtensions:["jpg","jpeg","png"],max_size:5242880,skip_size:1e4,jpeg_quality:75,resize_height:null,resize_max_height:null,resize_width:null,resize_max_width:null}},getInitialState:function(){return{img:null,file:null,show:!1,preview:null,autoCropArea:this.props.autoCropArea,aspectRatio:this.props.aspectRatio,loading:!1}},componentWillReceiveProps:function(e){var t={};e.aspectRatio&&(l("update aspectratio to: "+e.aspectRatio),t.aspectRatio=e.aspectRatio),e.autoCropArea&&(l("update autoCropArea to: "+e.autoCropArea),t.autoCropArea=e.autoCropArea),this.setState(t)},show:function(){this.setState({show:!0})},checkFile:function(e){var t=new RegExp(".("+this.props.allowedExtensions.join("|")+")$","i"),n=void 0;if(!t.test(e.name))return n="Unsupported File Extension: "+e.name,new Error(n)},checkFileSize:function(e){var t=this;return new c(function(n,i){var r=t.props.max_size,o=void 0;return e.size>r?(o=t.__("Maximum Size Exceeded:")+" "+Math.round(r/1024),l(o),i(new Error(o))):n()})},resizeImage:function(e){var t=null;if("undefined"!=typeof window){t=n(617);var i=this;return new c(function(n,r){if(i.state.file.size<i.props.skip_size){var o=e.toDataURL(i.state.file.type,g);return void n(o)}var a=void 0,s=void 0,l=i.props.resize_height,c=i.props.resize_width,u=i.props.resize_max_height,h=i.props.resize_max_width;if(l&&!c){a=l;var d=Math.floor(i.state.cropWidth*a/i.state.cropHeight);s=!h||h>d?d:h}else if(!l&&c){s=c;var f=Math.floor(i.state.cropHeight*s/i.state.cropWidth);a=!u||u>f?f:u}else if(l&&c)s=c,a=l;else if(!c&&h){if(!(i.state.cropWidth>h)){var p=e.toDataURL(i.state.file.type,g);return void n(p)}s=h;var m=Math.floor(i.state.cropHeight*s/i.state.cropWidth);a=!u||u>m?m:u}var g=i.props.jpeg_quality,v="png"===i.state.ext,b=document.createElement("canvas");
b.width=s,b.height=a,t.resizeCanvas(e,b,{alpha:v},function(e){e&&r(e);var t=b.toDataURL(i.state.file.type,g);n(t)})})}},_onChange:function(e){var t=this;t.setState({loading:!0});var n=void 0;e.dataTransfer?n=e.dataTransfer.files:e.target&&(n=e.target.files);var i=n[0],r=i.name.split(".").pop(),o=this.checkFile(i);return o?(l(o),void p.showMessage({title:"Error",message:o})):void this.checkFileSize(i).then(function(){var e=new Image;e.onload=function(){var n=e.width,o=e.height;g.getData(e,function(){var a=e.exifdata,s=document.createElement("canvas");if(s.width=n,s.height=o,a.Orientation&&1!==a.Orientation){var l=s.getContext("2d");switch(a.Orientation){case 1:l.transform(1,0,0,1,0,0);break;case 2:l.transform(-1,0,0,1,n,0);break;case 3:l.transform(-1,0,0,-1,n,o);break;case 4:l.transform(1,0,0,-1,0,o);break;case 5:s.width=o,s.height=n,l.transform(0,1,1,0,0,0);break;case 6:s.width=o,s.height=n,l.transform(0,1,-1,0,o,0);break;case 7:s.width=o,s.height=n,l.transform(0,-1,-1,0,o,n);break;case 8:s.width=o,s.height=n,l.transform(0,-1,1,0,0,n)}}s.getContext("2d").drawImage(e,0,0,e.width,e.height);var c=s.toDataURL(i.type,1);t.setState({src:c,exif:a,file:i,img:e,ext:r,loading:!1}),m(s).remove()})},e.onerror=function(){var e=t.__("Bad Image:")+" "+i.name;l(e),p.showMessage({title:"Error",message:e})},e.src=window.URL.createObjectURL(i)}).catch(function(e){l(e),p.showMessage({title:"Error",message:e})})},_crop:function(e){this.setState({cropWidth:e.width,cropHeight:e.height,cropScaleX:e.scaleX,cropScaleY:e.scaleY})},onSave:function(){var e=this,t=this.refs.cropper,n=t.getCroppedCanvas();this.resizeImage(n).then(function(t){e.setState({show:!1});var n={width:e.state.cropWidth,height:e.state.cropHeight,exif:e.state.exif};e.props.onCrop&&e.props.onCrop(t,n),e.resetImageCrop()}).catch(function(e){l(e),p.showMessage({title:"Error",message:e})})},handleCloseSelected:function(){this.resetImageCrop(),this.setState({show:!1})},zoomIn:function(){this.refs.cropper.zoom(.1)},zoomOut:function(){this.refs.cropper.zoom(-.1)},cropOriginal:function(){this.resetCropPosition(),this.setState({autoCropArea:1,aspectRatio:null})},aspect16by9:function(){this.setState({aspectRatio:16/9})},aspect3by2:function(){this.setState({aspectRatio:1.5})},aspectSquare:function(){this.setState({aspectRatio:1})},resetCropPosition:function(){this.setState({autoCropArea:1,aspectRatio:NaN}),this.refs.cropper.reset()},resetImageCrop:function(){this.refs.cropper&&this.refs.cropper.reset&&this.refs.cropper.reset(),this.refs.cropper&&this.refs.cropper.clear&&this.refs.cropper.clear(),this.setState({img:null,src:null,selectedFile:null,file:null,show:!1,preview:null,autoCropArea:this.props.autoCropArea,aspectRatio:this.props.aspectRatio})},render:function(){var e="";"undefined"!=typeof window&&(e=this.state.src?s.createElement(a.default,{style:{height:"calc(100% - 10px)",paddingBottom:"10px",width:"100%"},autoCropArea:this.state.autoCropArea,aspectRatio:this.state.aspectRatio,guides:!1,src:this.state.src,ref:"cropper",crop:this._crop}):s.createElement("div",{className:"valign-wrapper",style:{height:"75%"}},s.createElement("h5",{className:"center-align valign",style:{margin:"auto"}},this.__("Choose an image file"))));var t="",n="",i="",o="",l="",c="";return this.state.src&&(this.props.lockAspect||(i=s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.cropOriginal},s.createElement("i",{className:"material-icons"},"crop_original")),o=s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.aspect16by9},s.createElement("i",{className:"material-icons"},"crop_16_9")),l=s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.aspect3by2},s.createElement("i",{className:"material-icons"},"crop_3_2")),c=s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.aspectSquare},s.createElement("i",{className:"material-icons"},"crop_square"))),t=s.createElement("div",{className:"col s12"},s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.zoomIn},s.createElement("i",{className:"material-icons"},"zoom_in")),s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.zoomOut},s.createElement("i",{className:"material-icons"},"zoom_out")),i,o,l,c,s.createElement("a",{className:"btn-floating btn waves-effect waves-light",onClick:this.reset},s.createElement("i",{className:"material-icons"},"restore"))),n=s.createElement("div",{className:"fixed-action-btn action-button-bottom-right tooltipped","data-position":"top","data-delay":"50","data-tooltip":this.__("Save Map")},s.createElement("a",{onMouseDown:this.onSave,className:"btn-floating btn-large omh-color"},s.createElement("i",{className:"large material-icons"},"save")))),s.createElement(r.Modal,{show:this.state.show,id:"image-crop-modal",className:"image-crop-modal",style:{overflow:"hidden"},dismissible:!1,fixedFooter:!1},s.createElement(r.ModalContent,{style:{padding:0,margin:0,height:"100%",overflow:"hidden"}},s.createElement("a",{className:"omh-color",style:{position:"absolute",top:0,right:0,cursor:"pointer"},onClick:this.handleCloseSelected},s.createElement("i",{className:"material-icons selected-feature-close",style:{fontSize:"35px"}},"close")),s.createElement("div",{className:"row no-padding",style:{height:"80px",marginRight:"35px",marginLeft:"0px",marginBottom:"0px"}},s.createElement("div",{className:"col s12"},s.createElement("div",{className:"file-field input-field"},s.createElement("div",{className:"btn"},s.createElement("span",null,this.__("Choose File")),s.createElement("input",{type:"file",onChange:this._onChange,value:this.state.selectedFile})),s.createElement("div",{className:"file-path-wrapper"},s.createElement("input",{className:"file-path validate",type:"text",value:this.state.selectedFile}))))),s.createElement("div",{className:"row no-margin no-padding",style:{height:"50px"}},t),s.createElement("div",{className:"row",style:{height:"calc(100% - 130px)"}},s.createElement("div",{className:"col s12",style:{height:"100%"}},e),s.createElement("br",{style:{clear:"both"}}),n)))}});e.exports=v},614:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),h=i(u),d=n(615),f=i(d),p=n(28),m=i(p),g=["dragMode","aspectRatio","data","viewMode","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRation","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minContainerWidth","minContainerHeight","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","build","built","cropstart","cropmove","cropend","crop","zoom"],v=g.slice(3),b=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this,t=Object.keys(this.props).filter(function(e){return g.indexOf(e)!==-1}).reduce(function(t,n){return Object.assign({},t,r({},n,e.props[n]))},{});this.img=m.default.findDOMNode(this.refs.img),this.cropper=new f.default(this.img,t)}},{key:"componentWillReceiveProps",value:function(e){e.src!==this.props.src&&this.cropper.reset().clear().replace(e.src),e.aspectRatio!==this.props.aspectRatio&&this.setAspectRatio(e.aspectRatio),e.data!==this.props.data&&this.setData(e.data),e.dragMode!==this.props.dragMode&&this.setDragMode(e.dragMode),e.cropBoxData!==this.props.cropBoxData&&this.setCropBoxData(e.cropBoxData),e.canvasData!==this.props.canvasData&&this.setCanvasData(e.canvasData),e.moveTo!==this.props.moveTo&&(e.moveTo.length>1?this.moveTo(e.moveTo[0],e.moveTo[1]):this.moveTo(e.moveTo[0])),e.zoomTo!==this.props.zoomTo&&this.zoomTo(e.zoomTo),e.rotateTo!==this.props.rotateTo&&this.rotateTo(e.rotateTo),e.scaleX!==this.props.scaleX&&this.scaleX(e.scaleX),e.scaleY!==this.props.scaleY&&this.scaleY(e.scaleY),e.enable!==this.props.enable&&(e.enable?this.enable():this.disable());for(var t in e)if(e[t]!==this.props[t]&&v.indexOf(t)!==-1)throw new Error("prop: "+t+" can't be change after componentDidMount")}},{key:"componentWillUnmount",value:function(){this.img&&(this.cropper.destroy(),delete this.img,delete this.cropper)}},{key:"setDragMode",value:function(e){return this.cropper.setDragMode(e)}},{key:"setAspectRatio",value:function(e){return this.cropper.setAspectRatio(e)}},{key:"getCroppedCanvas",value:function(e){return this.cropper.getCroppedCanvas(e)}},{key:"setCropBoxData",value:function(e){return this.cropper.setCropBoxData(e)}},{key:"getCropBoxData",value:function(){return this.cropper.getCropBoxData()}},{key:"setCanvasData",value:function(e){return this.cropper.setCanvasData(e)}},{key:"getCanvasData",value:function(){return this.cropper.getCanvasData()}},{key:"getImageData",value:function(){return this.cropper.getImageData()}},{key:"getContainerData",value:function(){return this.cropper.getContainerData()}},{key:"setData",value:function(e){return this.cropper.setData(e)}},{key:"getData",value:function(e){return this.cropper.getData(e)}},{key:"crop",value:function(){return this.cropper.crop()}},{key:"move",value:function(e,t){return this.cropper.move(e,t)}},{key:"moveTo",value:function(e,t){return this.cropper.moveTo(e,t)}},{key:"zoom",value:function(e){return this.cropper.zoom(e)}},{key:"zoomTo",value:function(e){return this.cropper.zoomTo(e)}},{key:"rotate",value:function(e){return this.cropper.rotate(e)}},{key:"rotateTo",value:function(e){return this.cropper.rotateTo(e)}},{key:"enable",value:function(){return this.cropper.enable()}},{key:"disable",value:function(){return this.cropper.disable()}},{key:"reset",value:function(){return this.cropper.reset()}},{key:"clear",value:function(){return this.cropper.clear()}},{key:"replace",value:function(e,t){return this.cropper.replace(e,t)}},{key:"scale",value:function(e,t){return this.cropper.scale(e,t)}},{key:"scaleX",value:function(e){return this.cropper.scaleX(e)}},{key:"scaleY",value:function(e){return this.cropper.scaleY(e)}},{key:"render",value:function(){var e=this.props,t=e.src,n=e.alt,i=e.crossOrigin;return h.default.createElement("div",l({},this.props,{src:null,crossOrigin:null,alt:null}),h.default.createElement("img",{crossOrigin:i,ref:"img",src:t,alt:void 0===n?"picture":n,style:{opacity:0}}))}}]),t}(u.Component);b.propTypes={crossOrigin:u.PropTypes.string,src:u.PropTypes.string,alt:u.PropTypes.string,aspectRatio:u.PropTypes.number,dragMode:u.PropTypes.oneOf(["crop","move","none"]),data:u.PropTypes.shape({x:u.PropTypes.number,y:u.PropTypes.number,width:u.PropTypes.number,height:u.PropTypes.number,rotate:u.PropTypes.number,scaleX:u.PropTypes.number,scaleY:u.PropTypes.number}),scaleX:u.PropTypes.number,scaleY:u.PropTypes.number,enable:u.PropTypes.bool,cropBoxData:u.PropTypes.shape({left:u.PropTypes.number,top:u.PropTypes.number,width:u.PropTypes.number,hegiht:u.PropTypes.number}),canvasData:u.PropTypes.shape({left:u.PropTypes.number,top:u.PropTypes.number,width:u.PropTypes.number,hegiht:u.PropTypes.number}),zoomTo:u.PropTypes.number,moveTo:u.PropTypes.arrayOf(u.PropTypes.number),rotateTo:u.PropTypes.number,viewMode:u.PropTypes.oneOf([0,1,2,3]),preview:u.PropTypes.string,responsive:u.PropTypes.bool,restore:u.PropTypes.bool,checkCrossOrigin:u.PropTypes.bool,checkOrientation:u.PropTypes.bool,modal:u.PropTypes.bool,guides:u.PropTypes.bool,center:u.PropTypes.bool,highlight:u.PropTypes.bool,background:u.PropTypes.bool,autoCrop:u.PropTypes.bool,autoCropArea:u.PropTypes.number,movable:u.PropTypes.bool,rotatable:u.PropTypes.bool,scalable:u.PropTypes.bool,zoomable:u.PropTypes.bool,zoomOnTouch:u.PropTypes.bool,zoomOnWheel:u.PropTypes.bool,wheelZoomRation:u.PropTypes.number,cropBoxMovable:u.PropTypes.bool,cropBoxResizable:u.PropTypes.bool,toggleDragModeOnDblclick:u.PropTypes.bool,minContainerWidth:u.PropTypes.number,minContainerHeight:u.PropTypes.number,minCanvasWidth:u.PropTypes.number,minCanvasHeight:u.PropTypes.number,minCropBoxWidth:u.PropTypes.number,minCropBoxHeight:u.PropTypes.number,build:u.PropTypes.func,built:u.PropTypes.func,cropstart:u.PropTypes.func,cropmove:u.PropTypes.func,cropend:u.PropTypes.func,crop:u.PropTypes.func,zoom:u.PropTypes.func},b.defaultProps={src:null,dragMode:"crop",data:null,scaleX:1,scaleY:1,enable:!0,zoomTo:1,rotateTo:0},t.default=b},615:function(e,t,n){var i,r;/*!
	 * Cropper.js v0.5.6
	 * https://github.com/fengyuanchen/cropperjs
	 *
	 * Copyright (c) 2015-2016 Fengyuan Chen
	 * Released under the MIT license
	 *
	 * Date: 2016-01-18T05:33:43.542Z
	 */
!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("Cropper requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,o){"use strict";function a(e){return et.call(e).slice(8,-1).toLowerCase()}function s(e){return"number"==typeof e&&!isNaN(e)}function l(e){return"undefined"==typeof e}function c(e){return"object"==typeof e&&null!==e}function u(e){var t,n;if(!c(e))return!1;try{return t=e.constructor,n=t.prototype,t&&n&&tt.call(n,"isPrototypeOf")}catch(e){return!1}}function h(e){return"function"===a(e)}function d(e){return Z.isArray?Z.isArray(e):"array"===a(e)}function f(e,t){return t=t>=0?t:0,Z.from?Z.from(e).slice(t):nt.call(e,t)}function p(e){return"string"==typeof e&&(e=e.trim?e.trim():e.replace(xe,"$1")),e}function m(e,t){var n,i;if(e&&h(t))if(d(e)||s(e.length))for(i=0,n=e.length;i<n&&t.call(e,e[i],i,e)!==!1;i++);else if(c(e))for(i in e)if(e.hasOwnProperty(i)&&t.call(e,e[i],i,e)===!1)break;return e}function g(e){var t;if(arguments.length>1){if(t=f(arguments),Q.assign)return Q.assign.apply(Q,t);t.shift(),m(t,function(t){m(t,function(t,n){e[n]=t})})}return e}function v(e,t){var n=f(arguments,2);return function(){return e.apply(t,n.concat(f(arguments)))}}function b(e,t){var n=e.style;m(t,function(e,t){Ee.test(t)&&s(e)&&(e+="px"),n[t]=e})}function y(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function w(e,t){var n;return s(e.length)?m(e,function(e){w(e,t)}):e.classList?e.classList.add(t):(n=p(e.className),void(n?n.indexOf(t)<0&&(e.className=n+" "+t):e.className=t))}function E(e,t){return s(e.length)?m(e,function(e){E(e,t)}):e.classList?e.classList.remove(t):void(e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function C(e,t,n){return s(e.length)?m(e,function(e){C(e,t,n)}):void(n?w(e,t):E(e,t))}function x(e,t){return c(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-"+t)}function _(e,t,n){c(n)&&l(e[t])?e[t]=n:e.dataset?e.dataset[t]=n:e.setAttribute("data-"+t,n)}function T(e,t){c(e[t])?delete e[t]:e.dataset?delete e.dataset[t]:e.removeAttribute("data-"+t)}function S(e,t,n){var i=p(t).split(_e);return i.length>1?m(i,function(t){S(e,t,n)}):void(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n))}function A(e,t,n){var i=p(t).split(_e);return i.length>1?m(i,function(t){A(e,t,n)}):void(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n))}function k(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function N(e){var t,i=e||n.event;return i.target||(i.target=i.srcElement||V),s(i.pageX)||(t=V.documentElement,i.pageX=i.clientX+(n.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0),i.pageY=i.clientY+(n.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0)),i}function D(e){var t=V.documentElement,i=e.getBoundingClientRect();return{left:i.left+(n.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0),top:i.top+(n.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0)}}function P(e){var t=e.length,n=0,i=0;return t&&(m(e,function(e){n+=e.pageX,i+=e.pageY}),n/=t,i/=t),{pageX:n,pageY:i}}function R(e,t){return e.getElementsByTagName(t)}function L(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)}function B(e){return V.createElement(e)}function M(e,t){e.appendChild(t)}function I(e){e.parentNode&&e.parentNode.removeChild(e)}function O(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function F(e){var t=e.match(Ce);return t&&(t[1]!==$.protocol||t[2]!==$.hostname||t[3]!==$.port)}function j(e){var t="timestamp="+(new Date).getTime();return e+(e.indexOf("?")===-1?"?":"&")+t}function U(e,t){var n;return e.naturalWidth?t(e.naturalWidth,e.naturalHeight):(n=B("img"),n.onload=function(){t(this.width,this.height)},void(n.src=e.src))}function H(e){var t=[],n=e.rotate,i=e.scaleX,r=e.scaleY;return s(n)&&t.push("rotate("+n+"deg)"),s(i)&&s(r)&&t.push("scale("+i+","+r+")"),t.length?t.join(" "):"none"}function z(e,t){var n,i,r=Xe(e.degree)%180,o=(r>90?180-r:r)*Qe/180,a=Ke(o),s=Ge(o),l=e.width,c=e.height,u=e.aspectRatio;return t?(n=l/(s+a/u),i=n/u):(n=l*s+c*a,i=l*a+c*s),{width:n,height:i}}function W(e,t){var n,i,r,o=B("canvas"),a=o.getContext("2d"),l=0,c=0,u=t.naturalWidth,h=t.naturalHeight,d=t.rotate,f=t.scaleX,p=t.scaleY,m=s(f)&&s(p)&&(1!==f||1!==p),g=s(d)&&0!==d,v=g||m,b=u,y=h;return m&&(n=u/2,i=h/2),g&&(r=z({width:u,height:h,degree:d}),b=r.width,y=r.height,n=r.width/2,i=r.height/2),o.width=b,o.height=y,v&&(l=-u/2,c=-h/2,a.save(),a.translate(n,i)),g&&a.rotate(d*Qe/180),m&&a.scale(f,p),a.drawImage(e,Je(l),Je(c),Je(u),Je(h)),v&&a.restore(),o}function Y(e,t,n){var i="",r=t;for(n+=t;r<n;r++)i+=it(e.getUint8(r));return i}function q(e){var t,n,i,r,o,a,s,l,c,u,h=new DataView(e),d=h.byteLength;if(255===h.getUint8(0)&&216===h.getUint8(1))for(c=2;c<d;){if(255===h.getUint8(c)&&225===h.getUint8(c+1)){s=c;break}c++}if(s&&(n=s+4,i=s+10,"Exif"===Y(h,n,4)&&(a=h.getUint16(i),o=18761===a,(o||19789===a)&&42===h.getUint16(i+2,o)&&(r=h.getUint32(i+4,o),r>=8&&(l=i+r)))),l)for(d=h.getUint16(l,o),u=0;u<d;u++)if(c=l+12*u+2,274===h.getUint16(c,o)){c+=8,t=h.getUint16(c,o),h.setUint16(c,1,o);break}return t}function X(e){var t,n=e.replace(Se,""),i=atob(n),r=i.length,o=new J(r),a=new Uint8Array(o);for(t=0;t<r;t++)a[t]=i.charCodeAt(t);return o}function K(e){var t,n=new Uint8Array(e),i=n.length,r="";for(t=0;t<i;t++)r+=it(n[t]);return"data:image/jpeg;base64,"+btoa(r)}function G(e,t){var n=this;n.element=e,n.options=g({},G.DEFAULTS,u(t)&&t),n.ready=!1,n.built=!1,n.complete=!1,n.rotated=!1,n.cropped=!1,n.disabled=!1,n.replaced=!1,n.limited=!1,n.wheeling=!1,n.isImg=!1,n.originalUrl="",n.canvasData=null,n.cropBoxData=null,n.previews=null,n.init()}var V=n.document,$=n.location,J=n.ArrayBuffer,Q=n.Object,Z=n.Array,ee=n.String,te=n.Number,ne=n.Math,ie="cropper",re=ie+"-modal",oe=ie+"-hide",ae=ie+"-hidden",se=ie+"-invisible",le=ie+"-move",ce=ie+"-crop",ue=ie+"-disabled",he=ie+"-bg",de="mousedown touchstart pointerdown MSPointerDown",fe="mousemove touchmove pointermove MSPointerMove",pe="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",me="wheel mousewheel DOMMouseScroll",ge="dblclick",ve="resize",be="error",ye="load",we=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/,Ee=/width|height|left|top|marginLeft|marginTop/,Ce=/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i,xe=/^\s+(.*)\s+$/,_e=/\s+/,Te=/^data\:/,Se=/^data\:([^\;]+)\;base64,/,Ae=/^data\:image\/jpeg.*;base64,/,ke="preview",Ne="action",De="e",Pe="w",Re="s",Le="n",Be="se",Me="sw",Ie="ne",Oe="nw",Fe="all",je="crop",Ue="move",He="zoom",ze="none",We=!!V.createElement("canvas").getContext,Ye=ne.min,qe=ne.max,Xe=ne.abs,Ke=ne.sin,Ge=ne.cos,Ve=ne.sqrt,$e=ne.round,Je=ne.floor,Qe=ne.PI,Ze=Q.prototype,et=Ze.toString,tt=Ze.hasOwnProperty,nt=Z.prototype.slice,it=ee.fromCharCode;G.prototype={constructor:G,init:function(){var e,t=this,n=t.element,i=n.tagName.toLowerCase();if(!x(n,ie)){if(_(n,ie,t),"img"===i){if(t.isImg=!0,t.originalUrl=e=n.getAttribute("src"),!e)return;e=n.src}else"canvas"===i&&We&&(e=n.toDataURL());t.load(e)}},load:function(e){var t,n=this,i=n.options;if(e&&(!h(i.build)||i.build.call(n.element)!==!1)){if(n.url=e,n.imageData={},!i.checkOrientation||!J)return n.clone();if(Te.test(e))return Ae.test(e)?n.read(X(e)):n.clone();t=new XMLHttpRequest,t.onerror=t.onabort=function(){n.clone()},t.onload=function(){n.read(this.response)},t.open("get",e),t.responseType="arraybuffer",t.send()}},read:function(e){var t,n,i,r=this,o=r.options,a=q(e),s=r.imageData;if(a>1)switch(r.url=K(e),a){case 2:n=-1;break;case 3:t=-180;break;case 4:i=-1;break;case 5:t=90,i=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}o.rotatable&&(s.rotate=t),o.scalable&&(s.scaleX=n,s.scaleY=i),r.clone()},clone:function(){var e,t,n,i,r,o=this,a=o.element,s=o.url;o.options.checkCrossOrigin&&F(s)&&(e=a.crossOrigin,e?t=s:(e="anonymous",t=j(s))),o.crossOrigin=e,o.crossOriginUrl=t,n=B("img"),e&&(n.crossOrigin=e),n.src=t||s,o.image=n,o._start=i=v(o.start,o),o._stop=r=v(o.stop,o),o.isImg?a.complete?o.start():S(a,ye,i):(S(n,ye,i),S(n,be,r),w(n,oe),a.parentNode.insertBefore(n,a.nextSibling))},start:function(e){var t=this,n=t.isImg?t.element:t.image;e&&(A(n,ye,t._start),A(n,be,t._stop)),U(n,function(e,n){g(t.imageData,{naturalWidth:e,naturalHeight:n,aspectRatio:e/n}),t.ready=!0,t.build()})},stop:function(){var e=this,t=e.image;A(t,ye,e._start),A(t,be,e._stop),I(t),e.image=null},build:function(){var e,t,n,i,r,o,a,s=this,l=s.options,c=s.element,u=s.image;s.ready&&(s.built&&s.unbuild(),t=B("div"),t.innerHTML=G.TEMPLATE,s.container=e=c.parentNode,s.cropper=n=L(t,"cropper-container")[0],s.canvas=i=L(n,"cropper-canvas")[0],s.dragBox=r=L(n,"cropper-drag-box")[0],s.cropBox=o=L(n,"cropper-crop-box")[0],s.viewBox=L(n,"cropper-view-box")[0],s.face=a=L(o,"cropper-face")[0],M(i,u),w(c,ae),e.insertBefore(n,c.nextSibling),s.isImg||E(u,oe),s.initPreview(),s.bind(),l.aspectRatio=qe(0,l.aspectRatio)||NaN,l.viewMode=qe(0,Ye(3,$e(l.viewMode)))||0,l.autoCrop?(s.cropped=!0,l.modal&&w(r,re)):w(o,ae),l.guides||w(L(o,"cropper-dashed"),ae),l.center||w(L(o,"cropper-center"),ae),l.background&&w(n,he),l.highlight||w(a,se),l.cropBoxMovable&&(w(a,le),_(a,Ne,Fe)),l.cropBoxResizable||(w(L(o,"cropper-line"),ae),w(L(o,"cropper-point"),ae)),s.setDragMode(l.dragMode),s.render(),s.built=!0,s.setData(l.data),setTimeout(function(){h(l.built)&&l.built.call(c),h(l.crop)&&l.crop.call(c,s.getData()),s.complete=!0},0))},unbuild:function(){var e=this;e.built&&(e.built=!1,e.complete=!1,e.initialImageData=null,e.initialCanvasData=null,e.initialCropBoxData=null,e.containerData=null,e.canvasData=null,e.cropBoxData=null,e.unbind(),e.resetPreview(),e.previews=null,e.viewBox=null,e.cropBox=null,e.dragBox=null,e.canvas=null,e.container=null,I(e.cropper),e.cropper=null)},render:function(){var e=this;e.initContainer(),e.initCanvas(),e.initCropBox(),e.renderCanvas(),e.cropped&&e.renderCropBox()},initContainer:function(){var e,t=this,n=t.options,i=t.element,r=t.container,o=t.cropper;w(o,ae),E(i,ae),t.containerData=e={width:qe(r.offsetWidth,te(n.minContainerWidth)||200),height:qe(r.offsetHeight,te(n.minContainerHeight)||100)},b(o,{width:e.width,height:e.height}),w(i,ae),E(o,ae)},initCanvas:function(){var e,t=this,n=t.options.viewMode,i=t.containerData,r=t.imageData,o=90===Xe(r.rotate),a=o?r.naturalHeight:r.naturalWidth,s=o?r.naturalWidth:r.naturalHeight,l=a/s,c=i.width,u=i.height;i.height*l>i.width?3===n?c=i.height*l:u=i.width/l:3===n?u=i.width/l:c=i.height*l,e={naturalWidth:a,naturalHeight:s,aspectRatio:l,width:c,height:u},e.oldLeft=e.left=(i.width-c)/2,e.oldTop=e.top=(i.height-u)/2,t.canvasData=e,t.limited=1===n||2===n,t.limitCanvas(!0,!0),t.initialImageData=g({},r),t.initialCanvasData=g({},e)},limitCanvas:function(e,t){var n,i,r,o,a=this,s=a.options,l=s.viewMode,c=a.containerData,u=a.canvasData,h=u.aspectRatio,d=a.cropBoxData,f=a.cropped&&d;e&&(n=te(s.minCanvasWidth)||0,i=te(s.minCanvasHeight)||0,l>1?(n=qe(n,c.width),i=qe(i,c.height),3===l&&(i*h>n?n=i*h:i=n/h)):l>0&&(n?n=qe(n,f?d.width:0):i?i=qe(i,f?d.height:0):f&&(n=d.width,i=d.height,i*h>n?n=i*h:i=n/h)),n&&i?i*h>n?i=n/h:n=i*h:n?i=n/h:i&&(n=i*h),u.minWidth=n,u.minHeight=i,u.maxWidth=1/0,u.maxHeight=1/0),t&&(l?(r=c.width-u.width,o=c.height-u.height,u.minLeft=Ye(0,r),u.minTop=Ye(0,o),u.maxLeft=qe(0,r),u.maxTop=qe(0,o),f&&a.limited&&(u.minLeft=Ye(d.left,d.left+d.width-u.width),u.minTop=Ye(d.top,d.top+d.height-u.height),u.maxLeft=d.left,u.maxTop=d.top,2===l&&(u.width>=c.width&&(u.minLeft=Ye(0,r),u.maxLeft=qe(0,r)),u.height>=c.height&&(u.minTop=Ye(0,o),u.maxTop=qe(0,o))))):(u.minLeft=-u.width,u.minTop=-u.height,u.maxLeft=c.width,u.maxTop=c.height))},renderCanvas:function(e){var t,n,i=this,r=i.canvasData,o=i.imageData,a=o.rotate;i.rotated&&(i.rotated=!1,n=z({width:o.width,height:o.height,degree:a}),t=n.width/n.height,t!==r.aspectRatio&&(r.left-=(n.width-r.width)/2,r.top-=(n.height-r.height)/2,r.width=n.width,r.height=n.height,r.aspectRatio=t,r.naturalWidth=o.naturalWidth,r.naturalHeight=o.naturalHeight,a%180&&(n=z({width:o.naturalWidth,height:o.naturalHeight,degree:a}),r.naturalWidth=n.width,r.naturalHeight=n.height),i.limitCanvas(!0,!1))),(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Ye(qe(r.width,r.minWidth),r.maxWidth),r.height=Ye(qe(r.height,r.minHeight),r.maxHeight),i.limitCanvas(!1,!0),r.oldLeft=r.left=Ye(qe(r.left,r.minLeft),r.maxLeft),r.oldTop=r.top=Ye(qe(r.top,r.minTop),r.maxTop),b(i.canvas,{width:r.width,height:r.height,left:r.left,top:r.top}),i.renderImage(),i.cropped&&i.limited&&i.limitCropBox(!0,!0),e&&i.output()},renderImage:function(e){var t,n,i,r,o,a=this,s=a.canvasData,l=a.imageData;l.rotate&&(n=z({width:s.width,height:s.height,degree:l.rotate,aspectRatio:l.aspectRatio},!0),i=n.width,r=n.height,t={width:i,height:r,left:(s.width-i)/2,top:(s.height-r)/2}),g(l,t||{width:s.width,height:s.height,left:0,top:0}),o=H(l),b(a.image,{width:l.width,height:l.height,marginLeft:l.left,marginTop:l.top,WebkitTransform:o,msTransform:o,transform:o}),e&&a.output()},initCropBox:function(){var e=this,t=e.options,n=t.aspectRatio,i=te(t.autoCropArea)||.8,r=e.canvasData,o={width:r.width,height:r.height};n&&(r.height*n>r.width?o.height=o.width/n:o.width=o.height*n),e.cropBoxData=o,e.limitCropBox(!0,!0),o.width=Ye(qe(o.width,o.minWidth),o.maxWidth),o.height=Ye(qe(o.height,o.minHeight),o.maxHeight),o.width=qe(o.minWidth,o.width*i),o.height=qe(o.minHeight,o.height*i),o.oldLeft=o.left=r.left+(r.width-o.width)/2,o.oldTop=o.top=r.top+(r.height-o.height)/2,e.initialCropBoxData=g({},o)},limitCropBox:function(e,t){var n,i,r,o,a=this,s=a.options,l=s.aspectRatio,c=a.containerData,u=a.canvasData,h=a.cropBoxData,d=a.limited;e&&(n=te(s.minCropBoxWidth)||0,i=te(s.minCropBoxHeight)||0,n=Ye(n,c.width),i=Ye(i,c.height),r=Ye(c.width,d?u.width:c.width),o=Ye(c.height,d?u.height:c.height),l&&(n&&i?i*l>n?i=n/l:n=i*l:n?i=n/l:i&&(n=i*l),o*l>r?o=r/l:r=o*l),h.minWidth=Ye(n,r),h.minHeight=Ye(i,o),h.maxWidth=r,h.maxHeight=o),t&&(d?(h.minLeft=qe(0,u.left),h.minTop=qe(0,u.top),h.maxLeft=Ye(c.width,u.left+u.width)-h.width,h.maxTop=Ye(c.height,u.top+u.height)-h.height):(h.minLeft=0,h.minTop=0,h.maxLeft=c.width-h.width,h.maxTop=c.height-h.height))},renderCropBox:function(){var e=this,t=e.options,n=e.containerData,i=e.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Ye(qe(i.width,i.minWidth),i.maxWidth),i.height=Ye(qe(i.height,i.minHeight),i.maxHeight),e.limitCropBox(!1,!0),i.oldLeft=i.left=Ye(qe(i.left,i.minLeft),i.maxLeft),i.oldTop=i.top=Ye(qe(i.top,i.minTop),i.maxTop),t.movable&&t.cropBoxMovable&&_(e.face,Ne,i.width===n.width&&i.height===n.height?Ue:Fe),b(e.cropBox,{width:i.width,height:i.height,left:i.left,top:i.top}),e.cropped&&e.limited&&e.limitCanvas(!0,!0),e.disabled||e.output()},output:function(){var e=this,t=e.options;e.preview(),e.complete&&h(t.crop)&&t.crop.call(e.element,e.getData())},initPreview:function(){var e,t=this,n=t.options.preview,i=B("img"),r=t.crossOrigin,o=r?t.crossOriginUrl:t.url;r&&(i.crossOrigin=r),i.src=o,M(t.viewBox,i),n&&(t.previews=e=V.querySelectorAll(n),m(e,function(e){var t=B("img");_(e,ke,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),r&&(t.crossOrigin=r),t.src=o,t.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',O(e),M(e,t)}))},resetPreview:function(){m(this.previews,function(e){var t=x(e,ke);b(e,{width:t.width,height:t.height}),e.innerHTML=t.html,T(e,ke)})},preview:function(){var e=this,t=e.imageData,n=e.canvasData,i=e.cropBoxData,r=i.width,o=i.height,a=t.width,s=t.height,l=i.left-n.left-t.left,c=i.top-n.top-t.top,u=H(t),h={WebkitTransform:u,msTransform:u,transform:u};e.cropped&&!e.disabled&&(b(R(e.viewBox,"img")[0],g({width:a,height:s,marginLeft:-l,marginTop:-c},h)),m(e.previews,function(e){var t=x(e,ke),n=t.width,i=t.height,u=n,d=i,f=1;r&&(f=n/r,d=o*f),o&&d>i&&(f=i/o,u=r*f,d=i),b(e,{width:u,height:d}),b(R(e,"img")[0],g({width:a*f,height:s*f,marginLeft:-l*f,marginTop:-c*f},h))}))},bind:function(){var e=this,t=e.options,i=e.cropper;S(i,de,e._cropStart=v(e.cropStart,e)),t.zoomable&&t.zoomOnWheel&&S(i,me,e._wheel=v(e.wheel,e)),t.toggleDragModeOnDblclick&&S(i,ge,e._dblclick=v(e.dblclick,e)),S(V,fe,e._cropMove=v(e.cropMove,e)),S(V,pe,e._cropEnd=v(e.cropEnd,e)),t.responsive&&S(n,ve,e._resize=v(e.resize,e))},unbind:function(){var e=this,t=e.options,i=e.cropper;A(i,de,e._cropStart),t.zoomable&&t.zoomOnWheel&&A(i,me,e._wheel),t.toggleDragModeOnDblclick&&A(i,ge,e._dblclick),A(V,fe,e._cropMove),A(V,pe,e._cropEnd),t.responsive&&A(n,ve,e._resize)},resize:function(){var e,t,n,i=this,r=i.options.restore,o=i.container,a=i.containerData;!i.disabled&&a&&(n=o.offsetWidth/a.width,1===n&&o.offsetHeight===a.height||(r&&(e=i.getCanvasData(),t=i.getCropBoxData()),i.render(),r&&(i.setCanvasData(m(e,function(t,i){e[i]=t*n})),i.setCropBoxData(m(t,function(e,i){t[i]=e*n})))))},dblclick:function(){var e=this;e.disabled||e.setDragMode(y(e.dragBox,ce)?Ue:je)},wheel:function(e){var t=this,n=N(e),i=te(t.options.wheelZoomRatio)||.1,r=1;t.disabled||(k(n),t.wheeling||(t.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),n.deltaY?r=n.deltaY>0?1:-1:n.wheelDelta?r=-n.wheelDelta/120:n.detail&&(r=n.detail>0?1:-1),t.zoom(-r*i,n)))},cropStart:function(e){var t,n,i,r=this,o=r.options,a=N(e),s=a.touches;if(!r.disabled){if(s){if(t=s.length,t>1){if(!o.zoomable||!o.zoomOnTouch||2!==t)return;n=s[1],r.startX2=n.pageX,r.startY2=n.pageY,i=He}n=s[0]}if(i=i||x(a.target,Ne),we.test(i)){if(h(o.cropstart)&&o.cropstart.call(r.element,{originalEvent:a,action:i})===!1)return;k(a),r.action=i,r.cropping=!1,r.startX=n?n.pageX:a.pageX,r.startY=n?n.pageY:a.pageY,i===je&&(r.cropping=!0,w(r.dragBox,re))}}},cropMove:function(e){var t,n,i=this,r=i.options,o=N(e),a=o.touches,s=i.action;if(!i.disabled){if(a){if(t=a.length,t>1){if(!r.zoomable||!r.zoomOnTouch||2!==t)return;n=a[1],i.endX2=n.pageX,i.endY2=n.pageY}n=a[0]}if(s){if(h(r.cropmove)&&r.cropmove.call(i.element,{originalEvent:o,action:s})===!1)return;k(o),i.endX=n?n.pageX:o.pageX,i.endY=n?n.pageY:o.pageY,i.change(o.shiftKey,s===He?o:null)}}},cropEnd:function(e){var t=this,n=t.options,i=N(e),r=t.action;t.disabled||r&&(k(i),t.cropping&&(t.cropping=!1,C(t.dragBox,re,t.cropped&&n.modal)),t.action="",h(n.cropend)&&n.cropend.call(t.element,{originalEvent:i,action:r}))},change:function(e,t){var n,i,r=this,o=r.options,a=o.aspectRatio,s=r.action,l=r.containerData,c=r.canvasData,u=r.cropBoxData,h=u.width,d=u.height,f=u.left,p=u.top,m=f+h,g=p+d,v=0,b=0,y=l.width,w=l.height,C=!0;switch(!a&&e&&(a=h&&d?h/d:1),r.limited&&(v=u.minLeft,b=u.minTop,y=v+Ye(l.width,c.width),w=b+Ye(l.height,c.height)),i={x:r.endX-r.startX,y:r.endY-r.startY},a&&(i.X=i.y*a,i.Y=i.x/a),s){case Fe:f+=i.x,p+=i.y;break;case De:if(i.x>=0&&(m>=y||a&&(p<=b||g>=w))){C=!1;break}h+=i.x,a&&(d=h/a,p-=i.Y/2),h<0&&(s=Pe,h=0);break;case Le:if(i.y<=0&&(p<=b||a&&(f<=v||m>=y))){C=!1;break}d-=i.y,p+=i.y,a&&(h=d*a,f+=i.X/2),d<0&&(s=Re,d=0);break;case Pe:if(i.x<=0&&(f<=v||a&&(p<=b||g>=w))){C=!1;break}h-=i.x,f+=i.x,a&&(d=h/a,p+=i.Y/2),h<0&&(s=De,h=0);break;case Re:if(i.y>=0&&(g>=w||a&&(f<=v||m>=y))){C=!1;break}d+=i.y,a&&(h=d*a,f-=i.X/2),d<0&&(s=Le,d=0);break;case Ie:if(a){if(i.y<=0&&(p<=b||m>=y)){C=!1;break}d-=i.y,p+=i.y,h=d*a}else i.x>=0?m<y?h+=i.x:i.y<=0&&p<=b&&(C=!1):h+=i.x,i.y<=0?p>b&&(d-=i.y,p+=i.y):(d-=i.y,p+=i.y);h<0&&d<0?(s=Me,d=0,h=0):h<0?(s=Oe,h=0):d<0&&(s=Be,d=0);break;case Oe:if(a){if(i.y<=0&&(p<=b||f<=v)){C=!1;break}d-=i.y,p+=i.y,h=d*a,f+=i.X}else i.x<=0?f>v?(h-=i.x,f+=i.x):i.y<=0&&p<=b&&(C=!1):(h-=i.x,f+=i.x),i.y<=0?p>b&&(d-=i.y,p+=i.y):(d-=i.y,p+=i.y);h<0&&d<0?(s=Be,d=0,h=0):h<0?(s=Ie,h=0):d<0&&(s=Me,d=0);break;case Me:if(a){if(i.x<=0&&(f<=v||g>=w)){C=!1;break}h-=i.x,f+=i.x,d=h/a}else i.x<=0?f>v?(h-=i.x,f+=i.x):i.y>=0&&g>=w&&(C=!1):(h-=i.x,f+=i.x),i.y>=0?g<w&&(d+=i.y):d+=i.y;h<0&&d<0?(s=Ie,d=0,h=0):h<0?(s=Be,h=0):d<0&&(s=Oe,d=0);break;case Be:if(a){if(i.x>=0&&(m>=y||g>=w)){C=!1;break}h+=i.x,d=h/a}else i.x>=0?m<y?h+=i.x:i.y>=0&&g>=w&&(C=!1):h+=i.x,i.y>=0?g<w&&(d+=i.y):d+=i.y;h<0&&d<0?(s=Oe,d=0,h=0):h<0?(s=Me,h=0):d<0&&(s=Ie,d=0);break;case Ue:r.move(i.x,i.y),C=!1;break;case He:r.zoom(function(e,t,n,i){var r=Ve(e*e+t*t),o=Ve(n*n+i*i);return(o-r)/r}(Xe(r.startX-r.startX2),Xe(r.startY-r.startY2),Xe(r.endX-r.endX2),Xe(r.endY-r.endY2)),t),r.startX2=r.endX2,r.startY2=r.endY2,C=!1;break;case je:if(!i.x||!i.y){C=!1;break}n=D(r.cropper),f=r.startX-n.left,p=r.startY-n.top,h=u.minWidth,d=u.minHeight,i.x>0?s=i.y>0?Be:Ie:i.x<0&&(f-=h,s=i.y>0?Me:Oe),i.y<0&&(p-=d),r.cropped||(E(r.cropBox,ae),r.cropped=!0,r.limited&&r.limitCropBox(!0,!0))}C&&(u.width=h,u.height=d,u.left=f,u.top=p,r.action=s,r.renderCropBox()),r.startX=r.endX,r.startY=r.endY},crop:function(){var e=this;return e.built&&!e.disabled&&(e.cropped||(e.cropped=!0,e.limitCropBox(!0,!0),e.options.modal&&w(e.dragBox,re),E(e.cropBox,ae)),e.setCropBoxData(e.initialCropBoxData)),e},reset:function(){var e=this;return e.built&&!e.disabled&&(e.imageData=g({},e.initialImageData),e.canvasData=g({},e.initialCanvasData),e.cropBoxData=g({},e.initialCropBoxData),e.renderCanvas(),e.cropped&&e.renderCropBox()),e},clear:function(){var e=this;return e.cropped&&!e.disabled&&(g(e.cropBoxData,{left:0,top:0,width:0,height:0}),e.cropped=!1,e.renderCropBox(),e.limitCanvas(),e.renderCanvas(),E(e.dragBox,re),w(e.cropBox,ae)),e},replace:function(e){var t=this;return!t.disabled&&e&&(t.isImg&&(t.replaced=!0,t.element.src=e),t.options.data=null,t.load(e)),t},enable:function(){var e=this;return e.built&&(e.disabled=!1,E(e.cropper,ue)),e},disable:function(){var e=this;return e.built&&(e.disabled=!0,w(e.cropper,ue)),e},destroy:function(){var e=this,t=e.element,n=e.image;return e.ready?(e.isImg&&e.replaced&&(t.src=e.originalUrl),e.unbuild(),E(t,ae)):e.isImg?A(t,ye,e.start):n&&I(n),T(t,ie),e},move:function(e,t){var n=this,i=n.canvasData;return n.moveTo(l(e)?e:i.left+te(e),l(t)?t:i.top+te(t))},moveTo:function(e,t){var n=this,i=n.canvasData,r=!1;return l(t)&&(t=e),e=te(e),t=te(t),n.built&&!n.disabled&&n.options.movable&&(s(e)&&(i.left=e,r=!0),s(t)&&(i.top=t,r=!0),r&&n.renderCanvas(!0)),n},zoom:function(e,t){var n=this,i=n.canvasData;return e=te(e),e=e<0?1/(1-e):1+e,n.zoomTo(i.width*e/i.naturalWidth,t)},zoomTo:function(e,t){var n,i,r,o,a=this,s=a.options,l=a.canvasData,c=l.width,u=l.height,d=l.naturalWidth,f=l.naturalHeight;if(e=te(e),e>=0&&a.built&&!a.disabled&&s.zoomable){if(n=d*e,i=f*e,h(s.zoom)&&s.zoom.call(a.element,{originalEvent:t,oldRatio:c/d,ratio:n/d})===!1)return a;t?(r=D(a.cropper),o=t.touches?P(t.touches):{pageX:t.pageX,pageY:t.pageY},l.left-=(n-c)*((o.pageX-r.left-l.left)/c),l.top-=(i-u)*((o.pageY-r.top-l.top)/u)):(l.left-=(n-c)/2,l.top-=(i-u)/2),l.width=n,l.height=i,a.renderCanvas(!0)}return a},rotate:function(e){var t=this;return t.rotateTo((t.imageData.rotate||0)+te(e))},rotateTo:function(e){var t=this;return e=te(e),s(e)&&t.built&&!t.disabled&&t.options.rotatable&&(t.imageData.rotate=e%360,t.rotated=!0,t.renderCanvas(!0)),t},scale:function(e,t){var n=this,i=n.imageData,r=!1;return l(t)&&(t=e),e=te(e),t=te(t),n.built&&!n.disabled&&n.options.scalable&&(s(e)&&(i.scaleX=e,r=!0),s(t)&&(i.scaleY=t,r=!0),r&&n.renderImage(!0)),n},scaleX:function(e){var t=this,n=t.imageData.scaleY;return t.scale(e,s(n)?n:1)},scaleY:function(e){var t=this,n=t.imageData.scaleX;return t.scale(s(n)?n:1,e)},getData:function(e){var t,n,i=this,r=i.options,o=i.imageData,a=i.canvasData,s=i.cropBoxData;return i.built&&i.cropped?(n={x:s.left-a.left,y:s.top-a.top,width:s.width,height:s.height},t=o.width/o.naturalWidth,m(n,function(i,r){i/=t,n[r]=e?$e(i):i})):n={x:0,y:0,width:0,height:0},r.rotatable&&(n.rotate=o.rotate||0),r.scalable&&(n.scaleX=o.scaleX||1,n.scaleY=o.scaleY||1),n},setData:function(e){var t,n,i,r=this,o=r.options,a=r.imageData,l=r.canvasData,c={};return h(e)&&(e=e.call(r.element)),r.built&&!r.disabled&&u(e)&&(o.rotatable&&s(e.rotate)&&e.rotate!==a.rotate&&(a.rotate=e.rotate,r.rotated=t=!0),o.scalable&&(s(e.scaleX)&&e.scaleX!==a.scaleX&&(a.scaleX=e.scaleX,n=!0),s(e.scaleY)&&e.scaleY!==a.scaleY&&(a.scaleY=e.scaleY,n=!0)),t?r.renderCanvas():n&&r.renderImage(),i=a.width/a.naturalWidth,s(e.x)&&(c.left=e.x*i+l.left),s(e.y)&&(c.top=e.y*i+l.top),s(e.width)&&(c.width=e.width*i),s(e.height)&&(c.height=e.height*i),r.setCropBoxData(c)),r},getContainerData:function(){var e=this;return e.built?e.containerData:{}},getImageData:function(){var e=this;return e.ready?e.imageData:{}},getCanvasData:function(){var e=this,t=e.canvasData,n={};return e.built&&m(["left","top","width","height","naturalWidth","naturalHeight"],function(e){n[e]=t[e]}),n},setCanvasData:function(e){var t=this,n=t.canvasData,i=n.aspectRatio;return h(e)&&(e=e.call(t.element)),t.built&&!t.disabled&&u(e)&&(s(e.left)&&(n.left=e.left),s(e.top)&&(n.top=e.top),s(e.width)?(n.width=e.width,n.height=e.width/i):s(e.height)&&(n.height=e.height,n.width=e.height*i),t.renderCanvas(!0)),t},getCropBoxData:function(){var e,t=this,n=t.cropBoxData;return t.built&&t.cropped&&(e={left:n.left,top:n.top,width:n.width,height:n.height}),e||{}},setCropBoxData:function(e){var t,n,i=this,r=i.cropBoxData,o=i.options.aspectRatio;return h(e)&&(e=e.call(i.element)),i.built&&i.cropped&&!i.disabled&&u(e)&&(s(e.left)&&(r.left=e.left),s(e.top)&&(r.top=e.top),s(e.width)&&(t=!0,r.width=e.width),s(e.height)&&(n=!0,r.height=e.height),o&&(t?r.height=r.width/o:n&&(r.width=r.height*o)),i.renderCropBox()),i},getCroppedCanvas:function(e){var t,n,i,r,o,a,s,l,c,h,d,f=this;if(f.built&&f.cropped&&We)return u(e)||(e={}),d=f.getData(),t=d.width,n=d.height,l=t/n,u(e)&&(o=e.width,a=e.height,o?(a=o/l,s=o/t):a&&(o=a*l,s=a/n)),i=Je(o||t),r=Je(a||n),c=B("canvas"),c.width=i,c.height=r,h=c.getContext("2d"),e.fillColor&&(h.fillStyle=e.fillColor,h.fillRect(0,0,i,r)),h.drawImage.apply(h,function(){var e,i,r,o,a,l,c=W(f.image,f.imageData),u=c.width,h=c.height,p=[c],m=d.x,g=d.y;return m<=-t||m>u?m=e=r=a=0:m<=0?(r=-m,m=0,e=a=Ye(u,t+m)):m<=u&&(r=0,e=a=Ye(t,u-m)),e<=0||g<=-n||g>h?g=i=o=l=0:g<=0?(o=-g,g=0,i=l=Ye(h,n+g)):g<=h&&(o=0,i=l=Ye(n,h-g)),p.push(Je(m),Je(g),Je(e),Je(i)),s&&(r*=s,o*=s,a*=s,l*=s),a>0&&l>0&&p.push(Je(r),Je(o),Je(a),Je(l)),p}.call(f)),c},setAspectRatio:function(e){var t=this,n=t.options;return t.disabled||l(e)||(n.aspectRatio=qe(0,e)||NaN,t.built&&(t.initCropBox(),t.cropped&&t.renderCropBox())),t},setDragMode:function(e){var t,n,i=this,r=i.options,o=i.dragBox,a=i.face;return i.ready&&!i.disabled&&(t=e===je,n=r.movable&&e===Ue,e=t||n?e:ze,_(o,Ne,e),C(o,ce,t),C(o,le,n),r.cropBoxMovable||(_(a,Ne,e),C(a,ce,t),C(a,le,n))),i}},G.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},G.TEMPLATE=function(e,t){return t=t.split(","),e.replace(/\d+/g,function(e){return t[e]})}('<0 6="5-container"><0 6="5-wrap-9"><0 6="5-canvas"></0></0><0 6="5-drag-9"></0><0 6="5-crop-9"><1 6="5-view-9"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-center"></1><1 6="5-face"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,action,data,point,cropper,class,line,dashed,box");var rt=n.Cropper;return G.noConflict=function(){return n.Cropper=rt,G},G.setDefaults=function(e){g(G.DEFAULTS,e)},i=[],r=function(){return G}.apply(t,i),!(void 0!==r&&(e.exports=r)),o||(n.Cropper=G),G})},616:function(e,t,i){var r,o;(function(){function i(e){return!!e.exifdata}function a(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),i=n.length,r=new ArrayBuffer(i),o=new Uint8Array(r),a=0;a<i;a++)o[a]=n.charCodeAt(a);return r}function s(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}function l(e,t){function n(n){var i=c(n),r=u(n);e.exifdata=i||{},e.iptcdata=r||{},t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var i=a(e.src);n(i)}else if(/^blob\:/i.test(e.src)){var r=new FileReader;r.onload=function(e){n(e.target.result)},s(e.src,function(e){r.readAsArrayBuffer(e)})}else{var o=new XMLHttpRequest;o.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(o.response),o=null},o.open("GET",e.src,!0),o.responseType="arraybuffer",o.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var r=new FileReader;r.onload=function(e){g&&console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},r.readAsArrayBuffer(e)}}function c(e){var t=new DataView(e);if(g&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return g&&console.log("Not a valid JPEG"),!1;for(var n,i=2,r=e.byteLength;i<r;){if(255!=t.getUint8(i))return g&&console.log("Not a valid marker at offset "+i+", found: "+t.getUint8(i)),!1;if(n=t.getUint8(i+1),g&&console.log(n),225==n)return g&&console.log("Found 0xFFE1 marker"),m(t,i+4,t.getUint16(i+2)-2);i+=2+t.getUint16(i+2)}}function u(e){var t=new DataView(e);if(g&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return g&&console.log("Not a valid JPEG"),!1;for(var n=2,i=e.byteLength,r=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};n<i;){if(r(t,n)){var o=t.getUint8(n+7);o%2!==0&&(o+=1),0===o&&(o=4);var a=n+8+o,s=t.getUint16(n+6+o);return h(e,a,s)}n++}}function h(e,t,n){for(var i,r,o,a,s,l=new DataView(e),c={},u=t;u<t+n;)28===l.getUint8(u)&&2===l.getUint8(u+1)&&(a=l.getUint8(u+2),a in C&&(o=l.getInt16(u+3),s=o+5,r=C[a],i=p(l,u+5,o),c.hasOwnProperty(r)?c[r]instanceof Array?c[r].push(i):c[r]=[c[r],i]:c[r]=i)),u++;return c}function d(e,t,n,i,r){var o,a,s,l=e.getUint16(n,!r),c={};for(s=0;s<l;s++)o=n+12*s+2,a=i[e.getUint16(o,!r)],!a&&g&&console.log("Unknown tag: "+e.getUint16(o,!r)),c[a]=f(e,o,t,n,r);return c}function f(e,t,n,i,r){var o,a,s,l,c,u,h=e.getUint16(t+2,!r),d=e.getUint32(t+4,!r),f=e.getUint32(t+8,!r)+n;switch(h){case 1:case 7:if(1==d)return e.getUint8(t+8,!r);for(o=d>4?f:t+8,a=[],l=0;l<d;l++)a[l]=e.getUint8(o+l);return a;case 2:return o=d>4?f:t+8,p(e,o,d-1);case 3:if(1==d)return e.getUint16(t+8,!r);for(o=d>2?f:t+8,a=[],l=0;l<d;l++)a[l]=e.getUint16(o+2*l,!r);return a;case 4:if(1==d)return e.getUint32(t+8,!r);for(a=[],l=0;l<d;l++)a[l]=e.getUint32(f+4*l,!r);return a;case 5:if(1==d)return c=e.getUint32(f,!r),u=e.getUint32(f+4,!r),s=new Number(c/u),s.numerator=c,s.denominator=u,s;for(a=[],l=0;l<d;l++)c=e.getUint32(f+8*l,!r),u=e.getUint32(f+4+8*l,!r),a[l]=new Number(c/u),a[l].numerator=c,a[l].denominator=u;return a;case 9:if(1==d)return e.getInt32(t+8,!r);for(a=[],l=0;l<d;l++)a[l]=e.getInt32(f+4*l,!r);return a;case 10:if(1==d)return e.getInt32(f,!r)/e.getInt32(f+4,!r);for(a=[],l=0;l<d;l++)a[l]=e.getInt32(f+8*l,!r)/e.getInt32(f+4+8*l,!r);return a}}function p(e,t,i){var r="";for(n=t;n<t+i;n++)r+=String.fromCharCode(e.getUint8(n));return r}function m(e,t){if("Exif"!=p(e,t,4))return g&&console.log("Not valid EXIF data! "+p(e,t,4)),!1;var n,i,r,o,a,s=t+6;if(18761==e.getUint16(s))n=!1;else{if(19789!=e.getUint16(s))return g&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),
!1;n=!0}if(42!=e.getUint16(s+2,!n))return g&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var l=e.getUint32(s+4,!n);if(l<8)return g&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(s+4,!n)),!1;if(i=d(e,s,s+l,y,n),i.ExifIFDPointer){o=d(e,s,s+i.ExifIFDPointer,b,n);for(r in o){switch(r){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[r]=E[r][o[r]];break;case"ExifVersion":case"FlashpixVersion":o[r]=String.fromCharCode(o[r][0],o[r][1],o[r][2],o[r][3]);break;case"ComponentsConfiguration":o[r]=E.Components[o[r][0]]+E.Components[o[r][1]]+E.Components[o[r][2]]+E.Components[o[r][3]]}i[r]=o[r]}}if(i.GPSInfoIFDPointer){a=d(e,s,s+i.GPSInfoIFDPointer,w,n);for(r in a){switch(r){case"GPSVersionID":a[r]=a[r][0]+"."+a[r][1]+"."+a[r][2]+"."+a[r][3]}i[r]=a[r]}}return i}var g=!1,v=function(e){return e instanceof v?e:this instanceof v?void(this.EXIFwrapped=e):new v(e)};"undefined"!=typeof e&&e.exports&&(t=e.exports=v),t.EXIF=v;var b=v.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},y=v.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},w=v.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},E=v.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},C={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};v.getData=function(e,t){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(i(e)?t&&t.call(e):l(e,t),!0)},v.getTag=function(e,t){if(i(e))return e.exifdata[t]},v.getAllTags=function(e){if(!i(e))return{};var t,n=e.exifdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},v.pretty=function(e){if(!i(e))return"";var t,n=e.exifdata,r="";for(t in n)n.hasOwnProperty(t)&&(r+="object"==typeof n[t]?n[t]instanceof Number?t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":t+" : ["+n[t].length+" values]\r\n":t+" : "+n[t]+"\r\n");return r},v.readFromBinaryFile=function(e){return c(e)},r=[],o=function(){return v}.apply(t,r),!(void 0!==o&&(e.exports=o))}).call(this)},617:function(e,t){!function(n){if("object"==typeof t&&"undefined"!=typeof e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.pica=n()}}(function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";t.exports=function(){return document.createElement("canvas")}},{}],2:[function(e,t,n){"use strict";var i=1;t.exports=function(){return i++}},{}],3:[function(e,t,n){"use strict";function i(e){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0}var r=2e3,o=500;i.prototype.acquire=function(){var e,t=this;return 0!==this.available.length?e=this.available.pop():(e=this.create(),e.id=this.lastId++,e.release=function(){t.release(e)}),this.acquired[e.id]=e,e},i.prototype.release=function(e){delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout(this.gc.bind(this),o))},i.prototype.gc=function(){var e=Date.now();this.available=this.available.filter(function(t){return!(e-t.lastUsed>r)||(t.destroy(),!1)}),0!==this.available.length?this.timeoutId=setTimeout(this.gc.bind(this),o):this.timeoutId=0},t.exports=i},{}],4:[function(e,t,n){"use strict";function i(e){return 0>e?0:e>255?255:e}function r(e){return Math.round(e*((1<<u)-1))}function o(e,t,n,i,o){var a,s,l,c,u,d,f,p,m,g,v,b,y,w,E,C,x,_=h[e].filter,T=1/i,S=Math.min(1,i),A=h[e].win/S,k=Math.floor(2*(A+1)),N=new Int16Array((k+2)*n),D=0;for(a=0;n>a;a++){for(s=(a+.5)*T+o,l=Math.max(0,Math.floor(s-A)),c=Math.min(t-1,Math.ceil(s+A)),u=c-l+1,d=new Float32Array(u),f=new Int16Array(u),p=0,m=l,g=0;c>=m;m++,g++)v=_((m+.5-s)*S),p+=v,d[g]=v;for(b=0,g=0;g<d.length;g++)y=d[g]/p,b+=y,f[g]=r(y);for(f[n>>1]+=r(1-b),w=0;w<f.length&&0===f[w];)w++;if(w<f.length){for(E=f.length-1;E>0&&0===f[E];)E--;C=l+w,x=E-w+1,N[D++]=C,N[D++]=x,N.set(f.subarray(w,E+1),D),D+=x}else N[D++]=0,N[D++]=0}return N}function a(e,t,n,r,o,a){var s,l,c,u,h,d,f,p,m,g,v,b=0,y=0;for(m=0;r>m;m++){for(h=0,g=0;o>g;g++){for(d=a[h++],f=a[h++],p=b+4*d|0,s=l=c=u=0;f>0;f--)v=a[h++],u=u+v*e[p+3]|0,c=c+v*e[p+2]|0,l=l+v*e[p+1]|0,s=s+v*e[p]|0,p=p+4|0;t[y+3]=i(u+8192>>14),t[y+2]=i(c+8192>>14),t[y+1]=i(l+8192>>14),t[y]=i(s+8192>>14),y=y+4*r|0}y=4*(m+1)|0,b=(m+1)*n*4|0}}function s(e,t,n,r,o,a){var s,l,c,u,h,d,f,p,m,g,v,b=0,y=0;for(m=0;r>m;m++){for(h=0,g=0;o>g;g++){for(d=a[h++],f=a[h++],p=b+4*d|0,s=l=c=u=0;f>0;f--)v=a[h++],u=u+v*e[p+3]|0,c=c+v*e[p+2]|0,l=l+v*e[p+1]|0,s=s+v*e[p]|0,p=p+4|0;t[y+3]=i(u+8192>>14),t[y+2]=i(c+8192>>14),t[y+1]=i(l+8192>>14),t[y]=i(s+8192>>14),y=y+4*r|0}y=4*(m+1)|0,b=(m+1)*n*4|0}}function l(e,t,n){for(var i=3,r=t*n*4|0;r>i;)e[i]=255,i=i+4|0}function c(e){var t=e.src,n=e.width,i=e.height,r=e.toWidth,c=e.toHeight,u=e.scaleX||e.toWidth/e.width,h=e.scaleY||e.toHeight/e.height,d=e.offsetX||0,f=e.offsetY||0,p=e.dest||new Uint8Array(r*c*4),m="undefined"==typeof e.quality?3:e.quality,g=e.alpha||!1;if(1>n||1>i||1>r||1>c)return[];var v=o(m,n,r,u,d),b=o(m,i,c,h,f),y=new Uint8Array(r*i*4);return a(t,y,n,i,r,v),s(y,p,i,r,c,b),g||l(p,r,c),p}var u=14,h=[{win:.5,filter:function(e){return e>=-.5&&.5>e?1:0}},{win:1,filter:function(e){if(-1>=e||e>=1)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},{win:2,filter:function(e){if(-2>=e||e>=2)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},{win:3,filter:function(e){if(-3>=e||e>=3)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}}];t.exports=c},{}],5:[function(e,t,n){"use strict";function i(e,t,n){for(var i,r,o,a,s,l=t*n,c=new Uint16Array(l),u=0;l>u;u++)i=e[4*u],r=e[4*u+1],o=e[4*u+2],s=i>=r&&i>=o?i:r>=o&&r>=i?r:o,a=r>=i&&o>=i?i:o>=r&&i>=r?r:o,c[u]=257*(s+a)>>1;return c}function r(e,t,n,r,a,s){var l,c,u,h,d,f,p,m,g,v,b,y,w;if(!(0===r||.5>a)){a>2&&(a=2);var E=i(e,t,n),C=new Uint16Array(E);o(C,t,n,a);for(var x=r/100*4096+.5|0,_=257*s|0,T=t*n,S=0;T>S;S++)y=2*(E[S]-C[S]),Math.abs(y)>=_&&(w=4*S,l=e[w],c=e[w+1],u=e[w+2],m=l>=c&&l>=u?l:c>=l&&c>=u?c:u,p=c>=l&&u>=l?l:l>=c&&u>=c?c:u,f=257*(m+p)>>1,p===m?h=d=0:(d=32767>=f?4095*(m-p)/(m+p)|0:4095*(m-p)/(510-m-p)|0,h=l===m?65535*(c-u)/(6*(m-p))|0:c===m?21845+(65535*(u-l)/(6*(m-p))|0):43690+(65535*(l-c)/(6*(m-p))|0)),f+=x*y+2048>>12,f>65535?f=65535:0>f&&(f=0),0===d?l=c=u=f>>8:(v=32767>=f?f*(4096+d)+2048>>12:f+((65535-f)*d+2048>>12),g=2*f-v>>8,v>>=8,b=h+21845&65535,l=b>=43690?g:b>=32767?g+(6*(v-g)*(43690-b)+32768>>16):b>=10922?v:g+(6*(v-g)*b+32768>>16),b=65535&h,c=b>=43690?g:b>=32767?g+(6*(v-g)*(43690-b)+32768>>16):b>=10922?v:g+(6*(v-g)*b+32768>>16),b=h-21845&65535,u=b>=43690?g:b>=32767?g+(6*(v-g)*(43690-b)+32768>>16):b>=10922?v:g+(6*(v-g)*b+32768>>16)),e[w]=l,e[w+1]=c,e[w+2]=u)}}var o=e("glur/mono16");t.exports=r,t.exports.lightness=i},{"glur/mono16":11}],6:[function(e,t,n){"use strict";t.exports.createRegions=function(e){var t,n,i,r,o,a,s,l=e.toWidth/e.width,c=e.toHeight/e.height,u=Math.floor(e.srcTileSize*l)-2*e.destTileBorder,h=Math.floor(e.srcTileSize*c)-2*e.destTileBorder,d=[];for(r=0;r<e.toHeight;r+=h)for(i=0;i<e.toWidth;i+=u)t=i-e.destTileBorder,0>t&&(t=0),o=i+u+e.destTileBorder-t,t+o>=e.toWidth&&(o=e.toWidth-t),n=r-e.destTileBorder,0>n&&(n=0),a=r+h+e.destTileBorder-n,n+a>=e.toHeight&&(a=e.toHeight-n),s={toX:t,toY:n,toWidth:o,toHeight:a,toInnerX:i,toInnerY:r,toInnerWidth:u,toInnerHeight:h,offsetX:t/l-Math.floor(t/l),offsetY:n/c-Math.floor(n/c),scaleX:l,scaleY:c,x:Math.floor(t/l),y:Math.floor(n/c),width:Math.ceil(o/l),height:Math.ceil(a/c)},d.push(s);return d},t.exports.eachLimit=function(e,t,n,i){0===e.length&&i();for(var r=0,o=0,a=!1,s=function(t){if(!a){if(t)return a=!0,void i(t);o++,o===e.length?i():r<e.length&&n(e[r++],s)}};t>r&&r<e.length;)n(e[r++],s)}},{}],7:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./resize_array"),i=e("./unsharp");t.onmessage=function(e){var r=e.data;r.dest=new Uint8Array(r.toWidth*r.toHeight*4),n(r),r.unsharpAmount&&i(r.dest,r.toWidth,r.toHeight,r.unsharpAmount,r.unsharpRadius,r.unsharpThreshold),t.postMessage({output:r.dest},[r.dest.buffer])}}},{"./resize_array":4,"./unsharp":5}],8:[function(e,t,n){"use strict";function i(e,t,n,i){var d=t.getContext("2d",{alpha:Boolean(n.alpha)}),f=c();f.width=Math.min(u,e.width),f.height=Math.min(u,e.height);var p=f.getContext("2d",{alpha:Boolean(n.alpha)});p.globalCompositeOperation="copy";var m=a({width:e.naturalWidth||e.width,height:e.naturalHeight||e.height,srcTileSize:u,toWidth:t.width,toHeight:t.height,destTileBorder:Math.ceil(Math.max(h,2.5*n.unsharpRadius|0))});return s(m,1,function(t,i){p.drawImage(e,t.x,t.y,t.width,t.height,0,0,t.width,t.height);var a=p.getImageData(0,0,t.width,t.height),s=d.createImageData(t.toWidth,t.toHeight),l={src:a.data,dest:s.data,width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};r(l),n.unsharpAmount&&o(l.dest,l.toWidth,l.toHeight,l.unsharpAmount,l.unsharpRadius,l.unsharpThreshold),d.putImageData(s,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),i()},i),l()}var r=e("./js/resize_array"),o=e("./js/unsharp"),a=e("./js/utils").createRegions,s=e("./js/utils").eachLimit,l=e("./js/generate_id"),c=e("./js/create_canvas"),u=1024,h=3;t.exports=i,t.exports.terminate=function(){}},{"./js/create_canvas":1,"./js/generate_id":2,"./js/resize_array":4,"./js/unsharp":5,"./js/utils":6}],9:[function(e,t,n){"use strict";function i(e,t,n,i){var r=t.getContext("2d",{alpha:Boolean(n.alpha)}),o=u();o.width=Math.min(d,e.naturalWidth||e.width),o.height=Math.min(d,e.naturalHeight||e.height);var a=o.getContext("2d",{alpha:Boolean(n.alpha)});a.globalCompositeOperation="copy";var h=s({width:e.naturalWidth||e.width,height:e.naturalHeight||e.height,srcTileSize:d,toWidth:t.width,toHeight:t.height,destTileBorder:Math.ceil(Math.max(f,2.5*n.unsharpRadius|0))}),g=navigator&&navigator.hardwareConcurrency||4,v=n._id||c();return m[v]=!0,l(h,g,function(t,i){a.drawImage(e,t.x,t.y,t.width,t.height,0,0,t.width,t.height);var o=a.getImageData(0,0,t.width,t.height),s={src:o.data,width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold},l=p.acquire();l.value.onmessage=function(e){var n,o,a,s,c;if(l.release(),!m[v])return void i(!0);if(e.data.err)return void i(e.data.err);if(a=r.createImageData(t.toWidth,t.toHeight),s=e.data.output,c=a.data,c.set)c.set(s);else for(n=0,o=s.length;o>n;n++)c[n]=s[n];r.putImageData(a,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),i()},l.value.postMessage(s,[s.src.buffer])},function(e){m[v]&&(delete m[v],i(e))}),v}function r(e){m[e]&&delete m[e]}var o=e("webworkify"),a=e("./js/worker.js"),s=e("./js/utils").createRegions,l=e("./js/utils").eachLimit,c=e("./js/generate_id"),u=e("./js/create_canvas"),h=e("./js/pool"),d=1024,f=3,p=new h(function(){return{value:o(a),destroy:function(){this.value.terminate()}}}),m={};t.exports=i,t.exports.terminate=r},{"./js/create_canvas":1,"./js/generate_id":2,"./js/pool":3,"./js/utils":6,"./js/worker.js":7,webworkify:13}],10:[function(e,t,n){"use strict";function i(e){try{(window.console.error||window.console.log).call(window.console,e)}catch(e){}}function r(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("gl error "+t)}function o(e){return e.getContext("webgl")||e.getContext("experimental-webgl")}function a(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(i("Shader compile error: "+e.getShaderInfoLog(r)+". Source: `"+n+"`"),e.deleteShader(r),null)}function s(e,t,n){var o=a(e,e.VERTEX_SHADER,y[t]),s=a(e,e.FRAGMENT_SHADER,y[n]),l=e.createProgram();return e.attachShader(l,o),e.attachShader(l,s),e.linkProgram(l),e.getProgramParameter(l,e.LINK_STATUS)||(i("Program linking error: "+e.getProgramInfoLog(l)),e.deleteProgram(l)),r(e),l}function l(e,t,n,i,o){var a=e.getAttribLocation(t,n);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,o.elementSize,e.FLOAT,!1,0,0),r(e)}function c(e,t,n){var i=e.createTexture();return e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),r(e),i}function u(e,t,n,i){var r=e.getUniformLocation(t,n);e.uniform1i(r,i)}function h(e,t,n,i,r){var o=e.getUniformLocation(t,n);e.uniform2f(o,i,r)}function d(e,t,n,i){var r=e,o=e+n,a=t,s=t+i;return[r,a,o,a,r,s,r,s,o,a,o,s]}function f(e,t,n,i){var o=e.createTexture();return e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n,i,0,e.RGBA,e.UNSIGNED_BYTE,null),r(e),o}function p(e,t,n,i){var o=f(e,t,n,i),a=e.getParameter(e.FRAMEBUFFER_BINDING),s=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0),r(e),{fbo:s,texture:o,oldFbo:a}}function m(e,t,n,i,o,a,c,f,m){var g=s(e,"#vsh-basic",a);e.useProgram(g),u(e,g,"u_image",t),h(e,g,"u_imageSize",n,i),h(e,g,"u_resolution",c,f),l(e,g,"a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1],{elementSize:2}),l(e,g,"a_position",m?d(0,f,c,-f):d(0,0,c,f),{elementSize:2}),e.viewport(0,0,c,f);var v=p(e,o,c,f);return e.viewport(0,0,c,f),e.drawArrays(e.TRIANGLES,0,6),e.bindFramebuffer(e.FRAMEBUFFER,v.oldFbo),r(e),v}function g(e,t,n){var i=e.naturalWidth||e.width,r=e.naturalHeight||e.height,o=t.canvas.width,a=t.canvas.height;t.viewport(0,0,o,a);var s=0;c(t,s,e);var l=2,u=3;m(t,s,i,r,l,"#fsh-lanczos-1d-covolve-horizontal",o,r,!1);var h=m(t,l,o,r,u,"#fsh-lanczos-1d-covolve-vertical",o,a,!0);t.flush();var d=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,d),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,h.texture,0);var f=t.checkFramebufferStatus(t.FRAMEBUFFER);if(f!==t.FRAMEBUFFER_COMPLETE)throw new Error("Bad framebuffer status: "+f);n.alpha||(t.clearColor(1,1,1,1),t.colorMask(!1,!1,!1,!0),t.clear(t.COLOR_BUFFER_BIT));var p=new Uint8Array(o*a*4);t.readPixels(0,0,o,a,t.RGBA,t.UNSIGNED_BYTE,p);var g="undefined"==typeof n.unsharpAmount?0:0|n.unsharpAmount,b="undefined"==typeof n.unsharpRadius?0:n.unsharpRadius,y="undefined"==typeof n.unsharpThreshold?0:0|n.unsharpThreshold;return g&&v(p,o,a,g,b,y),p}var v=e("./js/unsharp"),b=e("./js/generate_id"),y={};y["#vsh-basic"]="precision highp float;\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 clipSpace = a_position / u_resolution * 2.0 - 1.0;\n\n   gl_Position = vec4(clipSpace, 0, 1);\n   v_texCoord = a_texCoord;\n}\n",y["#fsh-lanczos-1d-covolve-horizontal"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\n\n#define winSize 3.0\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.x / u_resolution.x;\n  float count = winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(pixel.x * k, 0.);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float xpi = x * M_PI;\n    float b = sinc(xpi) * sinc(xpi / winSize);\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",y["#fsh-lanczos-1d-covolve-vertical"]="precision highp float;\nuniform vec2 u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\n\n#define winSize 3.0\n\nvarying vec2 v_texCoord;\n\n#define sinc(a) (sin(a)/a)\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 pixel = vec2(1.) / u_imageSize;\n  gl_FragColor = vec4(0.);\n\n  float total = 0.;\n  float scale = u_imageSize.y / u_resolution.y;\n  float count = winSize * scale * 2.;\n  for (int i = 0; i < 1024*8; i++) {\n    if (float(i) >= count) {\n      break;\n    }\n    float k = float(i) - (count / 2.);\n    vec2 offset = vec2(0., pixel.y * k);\n    vec4 c = texture2D(u_image, v_texCoord+offset);\n    float x = k / scale; // max [-3, 3]\n    float xpi = x * M_PI;\n    float b = sinc(xpi) * sinc(xpi / winSize);\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) { \n      b = 1.;\n    }\n    total += b;\n    c *= vec4(b);\n    gl_FragColor += c;\n  }\n  gl_FragColor /= vec4(total);\n}\n",t.exports=function(e,t,n,r){var a,s;try{s=document.createElement("canvas"),s.id="pica-webgl-temporarry-canvas",s.height=t.height,s.width=t.width,document.body.appendChild(s),a=o(s);var l=g(e,a,n);a.finish(),document.body.removeChild(s);var c=t.getContext("2d"),u=c.createImageData(t.width,t.height);u.data.set(l),c.putImageData(u,0,0),r(null,l)}catch(e){i(e),a.finish(),document.body.removeChild(s),r(e)}return b()},t.exports.terminate=function(){}},{"./js/generate_id":2,"./js/unsharp":5}],11:[function(e,t,n){function i(e){.5>e&&(e=.5);var t=Math.exp(.527076)/e,n=Math.exp(-t),i=Math.exp(-2*t),r=(1-n)*(1-n)/(1+2*t*n-i);return a=r,s=r*(t-1)*n,l=r*(t+1)*n,c=-r*i,u=2*n,h=-i,d=(a+s)/(1-u-h),f=(l+c)/(1-u-h),new Float32Array([a,s,l,c,u,h,d,f])}function r(e,t,n,i,r,o){var a,s,l,c,u,h,d,f,p,m,g,v,b,y;for(p=0;o>p;p++){for(h=p*r,d=p,f=0,a=e[h],u=a*i[6],c=u,g=i[0],v=i[1],b=i[4],y=i[5],m=0;r>m;m++)s=e[h],l=s*g+a*v+c*b+u*y,u=c,c=l,a=s,n[f]=c,f++,h++;for(h--,f--,d+=o*(r-1),a=e[h],u=a*i[7],c=u,s=a,g=i[2],v=i[3],m=r-1;m>=0;m--)l=s*g+a*v+c*b+u*y,u=c,c=l,a=s,s=e[h],t[d]=n[f]+c,h--,f--,d-=o}}function o(e,t,n,o){if(o){var a=new Uint16Array(e.length),s=new Float32Array(Math.max(t,n)),l=i(o);r(e,a,s,l,t,n,o),r(a,e,s,l,n,t,o)}}var a,s,l,c,u,h,d,f;t.exports=o},{}],12:[function(e,t,n){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(e,t){for(var n,a,s=i(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)r.call(n,c)&&(s[c]=n[c]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(n);for(var u=0;u<a.length;u++)o.call(n,a[u])&&(s[a[u]]=n[a[u]])}}return s}},{}],13:[function(e,t,n){var i=arguments[3],r=arguments[4],o=arguments[5],a=JSON.stringify;t.exports=function(e){for(var t,n=Object.keys(o),s=0,l=n.length;l>s;s++){var c=n[s];if(o[c].exports===e){t=c;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var u={},s=0,l=n.length;l>s;s++){var c=n[s];u[c]=c}r[t]=[Function(["require","module","exports"],"("+e+")(self)"),u]}var h=Math.floor(Math.pow(16,8)*Math.random()).toString(16),d={};d[t]=t,r[h]=[Function(["require"],"require("+a(t)+")(self)"),d];var f="("+i+")({"+Object.keys(r).map(function(e){return a(e)+":["+r[e][0]+","+a(r[e][1])+"]"}).join(",")+"},{},["+a(h)+"])",p=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(p.createObjectURL(new Blob([f],{type:"text/javascript"})))}},{}],"/":[function(e,t,n){"use strict";function i(e){return Object.prototype.toString.call(e)}function r(e){return"[object Function]"===i(e)}function o(e,t,i,a){if(r(i)&&(a=i,i={}),isNaN(i)||(i={quality:i,alpha:!1}),h||(n.WEBGL=!1),h&&n.WEBGL){n.debug("Resize canvas with WebGL");var s=p(e,t,i,function(r){r?(n.debug("WebGL resize failed, do fallback and cancel next attempts"),n.debug(r),h=!1,o(e,t,v({},i,{_id:s}),a)):a()});return s}return l||(n.WW=!1),l&&n.WW?(n.debug("Resize buffer in WebWorker"),f(e,t,i,a)):(n.debug("Resize buffer sync (freeze event loop)"),d(e,t,i,a))}function a(e,t){var n={src:e.src,dest:e.dest,width:0|e.width,height:0|e.height,toWidth:0|e.toWidth,toHeight:0|e.toHeight,quality:e.quality,alpha:e.alpha,unsharpAmount:e.unsharpAmount,unsharpRadius:e.unsharpRadius,unsharpThreshold:e.unsharpThreshold};n.dest=m(n),n.unsharpAmount&&g(n.dest,n.toWidth,n.toHeight,n.unsharpAmount,n.unsharpRadius,n.unsharpThreshold),t(null,n.dest)}function s(e){d.terminate(e),f.terminate(e),p.terminate(e)}var l="undefined"!=typeof window&&"Worker"in window;if(l)try{var c=e("webworkify")(function(){});c.terminate()}catch(e){l=!1}var u,h=!1;try{"undefined"!=typeof document&&"undefined"!=typeof window&&window.WebGLRenderingContext&&(u=document.createElement("canvas"),(u.getContext("webgl")||u.getContext("experimental-webgl"))&&(h=!0))}catch(e){}finally{u=null}var d=e("./lib/resize_js"),f=e("./lib/resize_js_ww"),p=e("./lib/resize_webgl"),m=e("./lib/js/resize_array"),g=e("./lib/js/unsharp"),v=e("object-assign");n.resizeCanvas=o,n.resizeBuffer=a,n.terminate=s,n.WW=l,n.WEBGL=!1,n.debug=function(){}},{"./lib/js/resize_array":4,"./lib/js/unsharp":5,"./lib/resize_js":8,"./lib/resize_js_ww":9,"./lib/resize_webgl":10,"object-assign":12,webworkify:13}]},{},[])("/")})},732:function(e,t){},743:function(e,t,n){"use strict";var i=n(1),r=n(172),o=n(575),a=n(173),s=n(174),l=n(193)(s),c=n(233),u=n(235),h=n(257),d=i.createClass({displayName:"HubHav",mixins:[l.connect(c)],__:function(e){return u.getLocaleString(this.state.locale,e)},propTypes:{hubid:i.PropTypes.string.isRequired,canEdit:i.PropTypes.bool},getDefaultProps:function(){return{canEdit:!1}},componentDidMount:function(){r(this.refs.hubNav).sideNav({edge:"right"})},render:function(){var e=o.getBaseUrl(),t=e+"/hub/"+this.props.hubid+"/",n="";return this.props.canEdit&&(n=i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{href:t+"admin"},this.__("Manage Hub")))),i.createElement("nav",{className:"white",style:{height:"0px"}},i.createElement("div",{className:"nav-wrapper"},i.createElement("a",{href:"#",ref:"hubNav","data-activates":"nav",className:"button-collapse white-text text-shadow",style:{display:"block",position:"absolute",top:"5px",right:"5px"}},i.createElement("i",{className:"material-icons"},"menu")),i.createElement("ul",{className:"side-nav",id:"nav"},i.createElement(a,{id:"user-menu-sidenav"}),i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{href:t},this.__("Home"))),i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{href:t+"map"},this.__("Map"))),i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{href:t+"stories"},this.__("Stories"))),i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{href:t+"resources"},this.__("Resources"))),i.createElement(h,null),i.createElement("hr",null),i.createElement("li",{className:"nav-link-wrapper"},i.createElement("a",{href:e},this.__("Back to ")+MAPHUBS_CONFIG.productName)),n)))}});e.exports=d},744:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(745),o=i(r),a=n(1),s=n(613),l=n(174),c=n(193)(l),u=n(749),h=n(750),d=n(233),f=n(235),p=n(577),m=n(575),g=a.createClass({displayName:"HubBanner",mixins:[c.connect(u),c.connect(d)],__:function(e){return f.getLocaleString(this.state.locale,e)},propTypes:{hubid:a.PropTypes.string.isRequired,editing:a.PropTypes.bool,subPage:a.PropTypes.bool},getDefaultProps:function(){return{editing:!1,subPage:!1}},getInitialState:function(){return{imageCropAspectRatio:1,imageCropResizeWidth:null,imageCropResizeMaxWidth:null,imageCropResizeHeight:null,onCrop:function(){}}},shouldComponentUpdate:function(e,t){return!p(this.props,e)||!p(this.state,t)},handleTitleChange:function(e){h.setTitle(e)},handleTaglineChange:function(e){h.setTagline(e)},handleDescriptionChange:function(e){h.setDescription(e)},showLogoEdit:function(){this.setState({imageCropAspectRatio:1,imageCropResizeWidth:300,imageCropResizeHeight:300,imageCropResizeMaxWidth:null,onCrop:this.onLogoCrop}),this.refs.imagecrop.show()},onLogoCrop:function(e,t){h.setHubLogoImage(e,t)},showBannerEdit:function(){this.setState({imageCropAspectRatio:4,imageCropResizeMaxWidth:2e3,imageCropResizeWidth:null,imageCropResizeHeight:null,onCrop:this.onBannerCrop}),this.refs.imagecrop.show()},onBannerCrop:function(e,t){h.setHubBannerImage(e,t)},render:function(){var e=m.getBaseUrl(),t=e+"/hub/"+this.props.hubid,n="hub-banner";this.props.subPage&&(n="hub-banner-subpage");var i="",r="",l="",c="",u="",h="",d=null;this.state.hub.name&&(d=this.state.hub.name.replace("&nbsp;",""));var f=null;this.state.hub.tagline&&(f=this.state.hub.tagline.replace("&nbsp;",""));var p=null;this.state.hub.description&&(p=this.state.hub.description.replace("&nbsp;","")),this.props.editing?(r=a.createElement("div",{className:"white-text text-shadow hub-title"},a.createElement(o.default,{tag:"h2",text:d,onChange:this.handleTitleChange,options:{toolbar:!1,placeholder:{text:this.__("Enter a Title for Your Hub")},disableReturn:!0,buttons:[]}})),l=a.createElement("div",{className:"white-text text-shadow hub-tagline"},a.createElement(o.default,{tag:"p",text:f,onChange:this.handleTaglineChange,options:{toolbar:!1,buttonLabels:!1,placeholder:{text:this.__("Enter a Tagline or Subheading for Your Hub")},disableReturn:!0,buttons:[]}})),i=a.createElement("div",{className:"container"},a.createElement("div",{
className:"row"},a.createElement("div",{className:"flow-text"},a.createElement(o.default,{tag:"p",text:p,onChange:this.handleDescriptionChange,options:{toolbar:!1,buttonLabels:!1,placeholder:{text:this.__("Enter a Description or Intro for Your Hub")},disableReturn:!0,buttons:[]}})))),c=a.createElement("a",{className:"btn-floating omh-color white-text",onClick:this.showLogoEdit,style:{position:"absolute",top:"-15px",left:"85px"}},a.createElement("i",{className:"material-icons"},"edit")),u=a.createElement("a",{className:"btn-floating omh-color white-text",onClick:this.showBannerEdit,style:{position:"absolute",top:"205px",right:"10px"}},a.createElement("i",{className:"material-icons"},"edit")),h=a.createElement(s,{ref:"imagecrop",aspectRatio:this.state.imageCropAspectRatio,lockAspect:!0,resize_max_width:this.state.imageCropResizeMaxWidth,resize_width:this.state.imageCropResizeWidth,resize_height:this.state.imageCropResizeHeight,onCrop:this.state.onCrop})):(r=a.createElement("h2",{className:"white-text text-shadow no-margin"},d),l=a.createElement("p",{className:"white-text text-shadow no-margin"},f),i=a.createElement("div",{className:"container"},a.createElement("div",{className:"row"},a.createElement("p",{className:"flow-text hub-description"},p))));var g="",v="";return g=this.state.logoImage?a.createElement("a",{href:t},a.createElement("img",{alt:this.__("Hub Photo"),width:"100",style:{borderRadius:"25px"},src:this.state.logoImage})):this.state.hub.hasLogoImage?a.createElement("a",{href:t},a.createElement("img",{alt:this.__("Hub Photo"),width:"100",style:{borderRadius:"25px"},src:"/hub/"+this.state.hub.hub_id+"/images/logo"})):a.createElement("div",{className:"center center-align valign-wrapper",style:{margin:"auto",borderRadius:"25px",width:"100px",height:"100px",borderStyle:"dashed",borderColor:"#bdbdbd",borderWidth:"3px"}},a.createElement("i",{className:"material-icons grey-text valign"},"add_a_photo"),a.createElement("p",{className:"valign grey-text"},this.__("Add a Logo"))),v=this.state.bannerImage?a.createElement("div",{className:n,style:{width:"100%",position:"absolute",top:0,backgroundImage:"url("+this.state.bannerImage+")",backgroundSize:"cover",backgroundPosition:"center"}}):this.state.hub.hasBannerImage?a.createElement("div",{className:n,style:{width:"100%",position:"absolute",top:0,backgroundImage:'url("/hub/'+this.state.hub.hub_id+'/images/banner")',backgroundSize:"cover",backgroundPosition:"center"}}):a.createElement("div",{className:"center center-align",style:{margin:"auto",borderRadius:"25px",width:"100%",height:"100%",position:"absolute",top:0,borderColor:"#bdbdbd",borderStyle:"dashed",borderWidth:"3px"}},a.createElement("div",{className:"center center-align valign-wrapper",style:{margin:"auto",height:"100%",width:"200px"}},a.createElement("i",{className:"material-icons grey-text valign"},"add_a_photo"),a.createElement("p",{className:"valign grey-text"},this.__("Add a Banner Image")))),this.props.subPage&&(i=""),a.createElement("div",null,a.createElement("div",{className:"row no-margin valign-wrapper "+n,style:{position:"relative"}},v,u,a.createElement("div",{className:"row no-margin valign",style:{margin:0,paddingLeft:"20px",width:"100%"}},a.createElement("div",{className:"col s12 m1 l1 no-padding",style:{position:"relative",minWidth:"110px"}},g,c),a.createElement("div",{className:"col s12 m9 l10 no-padding",style:{position:"relative",marginTop:"20px"}},r,l))),i,h)}});e.exports=g},745:function(e,t,n){"use strict";e.exports=n(746)},746:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(3),u=i(c),h=n(747),d=i(h),f=n(1),p=i(f),m=n(28),g=i(m);if("undefined"!=typeof document)var v=n(748);var b=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={text:n.props.text},n}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=g.default.findDOMNode(this);this.medium=new v(t,this.props.options),this.medium.subscribe("editableInput",function(n){e._updated=!0,e.change(t.innerHTML)})}},{key:"componentDidUpdate",value:function(){this.medium.restoreSelection()}},{key:"componentWillUnmount",value:function(){this.medium.destroy()}},{key:"componentWillReceiveProps",value:function(e){e.text===this.state.text||this._updated||this.setState({text:e.text}),this._updated&&(this._updated=!1)}},{key:"render",value:function(){var e=this.props.tag,t=(0,d.default)(this.props,"tag","contentEditable","dangerouslySetInnerHTML");return(0,u.default)(t,{dangerouslySetInnerHTML:{__html:this.state.text}}),this.medium&&this.medium.saveSelection(),p.default.createElement(e,t)}},{key:"change",value:function(e){this.props.onChange&&this.props.onChange(e,this.medium)}}]),t}(p.default.Component);b.defaultProps={tag:"div"},t.default=b},747:function(e,t){e.exports=function(e){var t={},n=arguments[1];if("string"==typeof n){n={};for(var i=1;i<arguments.length;i++)n[arguments[i]]=!0}for(var r in e)n[r]||(t[r]=e[r]);return t}},748:function(e,t,n){var i;(function(e,r){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
"classList"in document.createElement("_")||!function(e){if("Element"in e){var t="classList",n="prototype",i=e.Element[n],r=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},c=function(e){for(var t=o.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,r=n.length;i<r;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},u=c[n]=[],h=function(){return new c(this)};if(s[n]=Error[n],u.item=function(e){return this[e]||null},u.contains=function(e){return e+="",l(this,e)!==-1},u.add=function(){var e,t=arguments,n=0,i=t.length,r=!1;do e=t[n]+"",l(this,e)===-1&&(this.push(e),r=!0);while(++n<i);r&&this._updateClassName()},u.remove=function(){var e,t,n=arguments,i=0,r=n.length,o=!1;do for(e=n[i]+"",t=l(this,e);t!==-1;)this.splice(t,1),o=!0,t=l(this,e);while(++i<r);o&&this._updateClassName()},u.toggle=function(e,t){e+="";var n=this.contains(e),i=n?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),t===!0||t===!1?t:!n},u.toString=function(){return this.join(" ")},r.defineProperty){var d={get:h,enumerable:!0,configurable:!0};try{r.defineProperty(i,t,d)}catch(e){e.number===-2146823252&&(d.enumerable=!1,r.defineProperty(i,t,d))}}else r[n].__defineGetter__&&i.__defineGetter__(t,h)}}(self),/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(e){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},i=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},r=n.prototype,o=i.prototype,a=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,u=e.URL||e.webkitURL||e,h=u.createObjectURL,d=u.revokeObjectURL,f=u,p=e.btoa,m=e.atob,g=e.ArrayBuffer,v=e.Uint8Array,b=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(i.fake=o.fake=!0;c--;)s.prototype[l[c]]=c+1;return u.createObjectURL||(f=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(b),n.origin=t&&t[1])),n}),f.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof i?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):p?t+";base64,"+p(e.data):t+","+encodeURIComponent(e.data)):h?h.call(u,e):void 0},f.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&d&&d.call(u,e)},r.append=function(e){var n=this.data;if(v&&(e instanceof g||e instanceof v)){for(var r="",o=new v(e),l=0,c=o.length;l<c;l++)r+=String.fromCharCode(o[l]);n.push(r)}else if("Blob"===t(e)||"File"===t(e)){if(!a)throw new s("NOT_READABLE_ERR");var u=new a;n.push(u.readAsBinaryString(e))}else e instanceof i?"base64"===e.encoding&&m?n.push(m(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},r.getBlob=function(e){return arguments.length||(e=null),new i(this.data.join(""),e,"raw")},r.toString=function(){return"[object BlobBuilder]"},o.slice=function(e,t,n){var r=arguments.length;return r<3&&(n=null),new i(this.data.slice(e,r>1?t:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,n){var i=n?n.type||"":"",r=new t;if(e)for(var o=0,a=e.length;o<a;o++)Uint8Array&&e[o]instanceof Uint8Array?r.append(e[o].buffer):r.append(e[o]);var s=r.getBlob(i);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var n=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=n(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content||void 0),function(a,s){var l="object"===o(e)&&"undefined"!=typeof r&&r&&r.versions&&r.versions.electron;l||"object"!==o(e)?(i=function(){return s}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))):e.exports=s}(void 0,function(){function e(e,t){return this.init(e,t)}return e.extensions={},function(t){function n(e,t){var n,i=Array.prototype.slice.call(arguments,2);t=t||{};for(var r=0;r<i.length;r++){var o=i[r];if(o)for(n in o)o.hasOwnProperty(n)&&"undefined"!=typeof o[n]&&(e||t.hasOwnProperty(n)===!1)&&(t[n]=o[n])}return t}var i=!1;try{var r=document.createElement("div"),o=document.createTextNode(" ");r.appendChild(o),i=r.contains(o)}catch(e){}var a={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:t.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(e){return!!(a.isMac&&e.metaKey||!a.isMac&&e.ctrlKey)},isKey:function(e,t){var n=a.getKeyCode(e);return!1===Array.isArray(t)?n===t:-1!==t.indexOf(n)},getKeyCode:function(e){var t=e.which;return null===t&&(t=null!==e.charCode?e.charCode:e.keyCode),t},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var e=[!0].concat(Array.prototype.slice.call(arguments));return n.apply(this,e)},defaults:function(){var e=[!1].concat(Array.prototype.slice.call(arguments));return n.apply(this,e)},createLink:function(e,t,n,i){var r=e.createElement("a");return a.moveTextRangeIntoElement(t[0],t[t.length-1],r),r.setAttribute("href",n),i&&r.setAttribute("target",i),r},findOrCreateMatchingTextNodes:function(e,t,n){for(var i=e.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1),r=[],o=0,s=!1,l=null,c=null;null!==(l=i.nextNode());)if(!(l.nodeType>3))if(3===l.nodeType){if(!s&&n.start<o+l.nodeValue.length&&(s=!0,c=a.splitStartNodeIfNeeded(l,n.start,o)),s&&a.splitEndNodeIfNeeded(l,c,n.end,o),s&&o===n.end)break;if(s&&o>n.end+1)throw new Error("PerformLinking overshot the target!");s&&r.push(c||l),o+=l.nodeValue.length,null!==c&&(o+=c.nodeValue.length,i.nextNode()),c=null}else"img"===l.tagName.toLowerCase()&&(!s&&n.start<=o&&(s=!0),s&&r.push(l));return r},splitStartNodeIfNeeded:function(e,t,n){return t!==n?e.splitText(t-n):null},splitEndNodeIfNeeded:function(e,t,n,i){var r,o;r=i+(t||e).nodeValue.length+(t?e.nodeValue.length:0)-1,o=(t||e).nodeValue.length-(r+1-n),r>=n&&i!==r&&0!==o&&(t||e).splitText(o)},splitByBlockElements:function(t){if(3!==t.nodeType&&1!==t.nodeType)return[];var n=[],i=e.util.blockContainerElementNames.join(",");if(3===t.nodeType||0===t.querySelectorAll(i).length)return[t];for(var r=0;r<t.childNodes.length;r++){var o=t.childNodes[r];if(3===o.nodeType)n.push(o);else if(1===o.nodeType){var a=o.querySelectorAll(i);0===a.length?n.push(o):n=n.concat(e.util.splitByBlockElements(o))}}return n},findAdjacentTextNodeWithContent:function(e,t,n){var i,r=!1,o=n.createNodeIterator(e,NodeFilter.SHOW_TEXT,null,!1);for(i=o.nextNode();i;){if(i===t)r=!0;else if(r&&3===i.nodeType&&i.nodeValue&&i.nodeValue.trim().length>0)break;i=o.nextNode()}return i},findPreviousSibling:function(e){if(!e||a.isMediumEditorElement(e))return!1;for(var t=e.previousSibling;!t&&!a.isMediumEditorElement(e.parentNode);)e=e.parentNode,t=e.previousSibling;return t},isDescendant:function(e,t,n){if(!e||!t)return!1;if(e===t)return!!n;if(1!==e.nodeType)return!1;if(i||3!==t.nodeType)return e.contains(t);for(var r=t.parentNode;null!==r;){if(r===e)return!0;r=r.parentNode}return!1},isElement:function(e){return!(!e||1!==e.nodeType)},throttle:function(e,t){var n,i,r,o=50,a=null,s=0,l=function(){s=Date.now(),a=null,r=e.apply(n,i),a||(n=i=null)};return t||0===t||(t=o),function(){var o=Date.now(),c=t-(o-s);return n=this,i=arguments,c<=0||c>t?(a&&(clearTimeout(a),a=null),s=o,r=e.apply(n,i),a||(n=i=null)):a||(a=setTimeout(l,c)),r}},traverseUp:function(e,t){if(!e)return!1;do{if(1===e.nodeType){if(t(e))return e;if(a.isMediumEditorElement(e))return!1}e=e.parentNode}while(e);return!1},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(t,n){var i,r,o,s,l,c,u,h=!1,d=["insertHTML",!1,n];if(!e.util.isEdge&&t.queryCommandSupported("insertHTML"))try{return t.execCommand.apply(t,d)}catch(e){}if(i=t.getSelection(),i.rangeCount){if(r=i.getRangeAt(0),u=r.commonAncestorContainer,a.isMediumEditorElement(u)&&!u.firstChild)r.selectNode(u.appendChild(t.createTextNode("")));else if(3===u.nodeType&&0===r.startOffset&&r.endOffset===u.nodeValue.length||3!==u.nodeType&&u.innerHTML===r.toString()){for(;!a.isMediumEditorElement(u)&&u.parentNode&&1===u.parentNode.childNodes.length&&!a.isMediumEditorElement(u.parentNode);)u=u.parentNode;r.selectNode(u)}for(r.deleteContents(),o=t.createElement("div"),o.innerHTML=n,s=t.createDocumentFragment();o.firstChild;)l=o.firstChild,c=s.appendChild(l);r.insertNode(s),c&&(r=r.cloneRange(),r.setStartAfter(c),r.collapse(!0),e.selection.selectRange(t,r)),h=!0}return t.execCommand.callListeners&&t.execCommand.callListeners(d,h),h},execFormatBlock:function(t,n){var i,r=a.getTopBlockContainer(e.selection.getSelectionStart(t));if("blockquote"===n){if(r&&(i=Array.prototype.slice.call(r.childNodes),i.some(function(e){return a.isBlockContainer(e)})))return t.execCommand("outdent",!1,null);if(a.isIE)return t.execCommand("indent",!1,n)}if(r&&n===r.nodeName.toLowerCase()&&(n="p"),a.isIE&&(n="<"+n+">"),r&&"blockquote"===r.nodeName.toLowerCase()){if(a.isIE&&"<p>"===n)return t.execCommand("outdent",!1,n);if((a.isFF||a.isEdge)&&"p"===n)return i=Array.prototype.slice.call(r.childNodes),i.some(function(e){return!a.isBlockContainer(e)})&&t.execCommand("formatBlock",!1,n),t.execCommand("outdent",!1,n)}return t.execCommand("formatBlock",!1,n)},setTargetBlank:function(e,t){var n,i=t||!1;if("a"===e.nodeName.toLowerCase())e.target="_blank";else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)!1!==i&&i!==e[n].attributes.href.value||(e[n].target="_blank")},removeTargetBlank:function(e,t){var n;if("a"===e.nodeName.toLowerCase())e.removeAttribute("target");else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)t===e[n].attributes.href.value&&e[n].removeAttribute("target")},addClassToAnchors:function(e,t){var n,i,r=t.split(" ");if("a"===e.nodeName.toLowerCase())for(i=0;i<r.length;i+=1)e.classList.add(r[i]);else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)for(i=0;i<r.length;i+=1)e[n].classList.add(r[i])},isListItem:function(e){if(!e)return!1;if("li"===e.nodeName.toLowerCase())return!0;for(var t=e.parentNode,n=t.nodeName.toLowerCase();"li"===n||!a.isBlockContainer(t)&&"div"!==n;){if("li"===n)return!0;if(t=t.parentNode,!t)return!1;n=t.nodeName.toLowerCase()}return!1},cleanListDOM:function(t,n){if("li"===n.nodeName.toLowerCase()){var i=n.parentElement;"p"===i.parentElement.nodeName.toLowerCase()&&(a.unwrap(i.parentElement,t),e.selection.moveCursor(t,n.firstChild,n.firstChild.textContent.length))}},splitOffDOMTree:function(e,t,n){for(var i=t,r=null,o=!n;i!==e;){var a,s=i.parentNode,l=s.cloneNode(!1),c=o?i:s.firstChild;for(r&&(o?l.appendChild(r):a=r),r=l;c;){var u=c.nextSibling;c===i?(c.hasChildNodes()?c=c.cloneNode(!1):c.parentNode.removeChild(c),c.textContent&&r.appendChild(c),c=o?u:null):(c.parentNode.removeChild(c),(c.hasChildNodes()||c.textContent)&&r.appendChild(c),c=u)}a&&r.appendChild(a),i=s}return r},moveTextRangeIntoElement:function(e,t,n){if(!e||!t)return!1;var i=a.findCommonRoot(e,t);if(!i)return!1;if(t===e){var r=e.parentNode,o=e.nextSibling;return r.removeChild(e),n.appendChild(e),o?r.insertBefore(n,o):r.appendChild(n),n.hasChildNodes()}for(var s,l,c,u=[],h=0;h<i.childNodes.length;h++)if(c=i.childNodes[h],s){if(a.isDescendant(c,t,!0)){l=c;break}u.push(c)}else a.isDescendant(c,e,!0)&&(s=c);var d=l.nextSibling,f=i.ownerDocument.createDocumentFragment();return s===e?(s.parentNode.removeChild(s),f.appendChild(s)):f.appendChild(a.splitOffDOMTree(s,e)),u.forEach(function(e){e.parentNode.removeChild(e),f.appendChild(e)}),l===t?(l.parentNode.removeChild(l),f.appendChild(l)):f.appendChild(a.splitOffDOMTree(l,t,!0)),n.appendChild(f),l.parentNode===i?i.insertBefore(n,l):d?i.insertBefore(n,d):i.appendChild(n),n.hasChildNodes()},depthOfNode:function(e){for(var t=0,n=e;null!==n.parentNode;)n=n.parentNode,t++;return t},findCommonRoot:function(e,t){for(var n=a.depthOfNode(e),i=a.depthOfNode(t),r=e,o=t;n!==i;)n>i?(r=r.parentNode,n-=1):(o=o.parentNode,i-=1);for(;r!==o;)r=r.parentNode,o=o.parentNode;return r},isElementAtBeginningOfBlock:function(e){for(var t,n;!a.isBlockContainer(e)&&!a.isMediumEditorElement(e);){for(n=e;n=n.previousSibling;)if(t=3===n.nodeType?n.nodeValue:n.textContent,t.length>0)return!1;e=e.parentNode}return!0},isMediumEditorElement:function(e){return e&&e.getAttribute&&!!e.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(e){return a.traverseUp(e,function(e){return a.isMediumEditorElement(e)})},isBlockContainer:function(e){return e&&3!==e.nodeType&&a.blockContainerElementNames.indexOf(e.nodeName.toLowerCase())!==-1},getClosestBlockContainer:function(e){return a.traverseUp(e,function(e){return a.isBlockContainer(e)||a.isMediumEditorElement(e)})},getTopBlockContainer:function(e){var t=!!a.isBlockContainer(e)&&e;return a.traverseUp(e,function(e){return a.isBlockContainer(e)&&(t=e),!(t||!a.isMediumEditorElement(e))&&(t=e,!0)}),t},getFirstSelectableLeafNode:function(e){for(;e&&e.firstChild;)e=e.firstChild;if(e=a.traverseUp(e,function(e){return a.emptyElementNames.indexOf(e.nodeName.toLowerCase())===-1}),"table"===e.nodeName.toLowerCase()){var t=e.querySelector("th, td");t&&(e=t)}return e},getFirstTextNode:function(e){return a.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),a._getFirstTextNode(e)},_getFirstTextNode:function(e){if(3===e.nodeType)return e;for(var t=0;t<e.childNodes.length;t++){var n=a._getFirstTextNode(e.childNodes[t]);if(null!==n)return n}return null},ensureUrlHasProtocol:function(e){return e.indexOf("://")===-1?"http://"+e:e},warn:function(){void 0!==t.console&&"function"==typeof t.console.warn&&t.console.warn.apply(t.console,arguments)},deprecated:function(e,t,n){var i=e+" is deprecated, please use "+t+" instead.";n&&(i+=" Will be removed in "+n),a.warn(i)},deprecatedMethod:function(e,t,n,i){a.deprecated(e,t,i),"function"==typeof this[t]&&this[t].apply(this,n)},cleanupAttrs:function(e,t){t.forEach(function(t){e.removeAttribute(t)})},cleanupTags:function(e,t){t.indexOf(e.nodeName.toLowerCase())!==-1&&e.parentNode.removeChild(e)},unwrapTags:function(t,n){n.indexOf(t.nodeName.toLowerCase())!==-1&&e.util.unwrap(t,document)},getClosestTag:function(e,t){return a.traverseUp(e,function(e){return e.nodeName.toLowerCase()===t.toLowerCase()})},unwrap:function(e,t){for(var n=t.createDocumentFragment(),i=Array.prototype.slice.call(e.childNodes),r=0;r<i.length;r++)n.appendChild(i[r]);n.childNodes.length?e.parentNode.replaceChild(n,e):e.parentNode.removeChild(e)},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}};e.util=a}(window),function(){var t=function(t){e.util.extend(this,t)};t.extend=function(t){var n,i=this;n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},e.util.extend(n,i);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,t&&e.util.extend(n.prototype,t),n},t.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(e){return this.base.options[e]}},["execAction","on","off","subscribe","trigger"].forEach(function(e){t.prototype[e]=function(){return this.base[e].apply(this.base,arguments)}}),e.Extension=t}(),function(){function t(t){return e.util.isBlockContainer(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var n={findMatchingSelectionParent:function(t,n){var i,r,o=n.getSelection();return 0!==o.rangeCount&&(i=o.getRangeAt(0),r=i.commonAncestorContainer,e.util.traverseUp(r,t))},getSelectionElement:function(t){return this.findMatchingSelectionParent(function(t){return e.util.isMediumEditorElement(t)},t)},exportSelection:function(e,t){if(!e)return null;var n=null,i=t.getSelection();if(i.rangeCount>0){var r,o=i.getRangeAt(0),a=o.cloneRange();a.selectNodeContents(e),a.setEnd(o.startContainer,o.startOffset),r=a.toString().length,n={start:r,end:r+o.toString().length},this.doesRangeStartWithImages(o,t)&&(n.startsWithImage=!0);var s=this.getTrailingImageCount(e,n,o.endContainer,o.endOffset);if(s&&(n.trailingImageCount=s),0!==r){var l=this.getIndexRelativeToAdjacentEmptyBlocks(t,e,o.startContainer,o.startOffset);l!==-1&&(n.emptyBlocksIndex=l)}}return n},importSelection:function(e,t,n,i){if(e&&t){var r=n.createRange();r.setStart(t,0),r.collapse(!0);var o,a=t,s=[],l=0,c=!1,u=!1,h=0,d=!1,f=!1,p=null;for((i||e.startsWithImage||"undefined"!=typeof e.emptyBlocksIndex)&&(f=!0);!d&&a;)if(a.nodeType>3)a=s.pop();else{if(3!==a.nodeType||u){if(e.trailingImageCount&&u&&("img"===a.nodeName.toLowerCase()&&h++,h===e.trailingImageCount)){for(var m=0;a.parentNode.childNodes[m]!==a;)m++;r.setEnd(a.parentNode,m+1),d=!0}if(!d&&1===a.nodeType)for(var g=a.childNodes.length-1;g>=0;)s.push(a.childNodes[g]),g-=1}else o=l+a.length,!c&&e.start>=l&&e.start<=o&&(f||e.start<o?(r.setStart(a,e.start-l),c=!0):p=a),c&&e.end>=l&&e.end<=o&&(e.trailingImageCount?u=!0:(r.setEnd(a,e.end-l),d=!0)),l=o;d||(a=s.pop())}!c&&p&&(r.setStart(p,p.length),r.setEnd(p,p.length)),"undefined"!=typeof e.emptyBlocksIndex&&(r=this.importSelectionMoveCursorPastBlocks(n,t,e.emptyBlocksIndex,r)),i&&(r=this.importSelectionMoveCursorPastAnchor(e,r)),this.selectRange(n,r)}},importSelectionMoveCursorPastAnchor:function(t,n){var i=function(e){return"a"===e.nodeName.toLowerCase()};if(t.start===t.end&&3===n.startContainer.nodeType&&n.startOffset===n.startContainer.nodeValue.length&&e.util.traverseUp(n.startContainer,i)){for(var r=n.startContainer,o=n.startContainer.parentNode;null!==o&&"a"!==o.nodeName.toLowerCase();)o.childNodes[o.childNodes.length-1]!==r?o=null:(r=o,o=o.parentNode);if(null!==o&&"a"===o.nodeName.toLowerCase()){for(var a=null,s=0;null===a&&s<o.parentNode.childNodes.length;s++)o.parentNode.childNodes[s]===o&&(a=s);n.setStart(o.parentNode,a+1),n.collapse(!0)}}return n},importSelectionMoveCursorPastBlocks:function(n,i,r,o){var a,s,l=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t,!1),c=o.startContainer,u=0;for(r=r||1,a=3===c.nodeType&&e.util.isBlockContainer(c.previousSibling)?c.previousSibling:e.util.getClosestBlockContainer(c);l.nextNode();)if(s){if(s=l.currentNode,u++,u===r)break;if(s.textContent.length>0)break}else a===l.currentNode&&(s=l.currentNode);return s||(s=a),o.setStart(e.util.getFirstSelectableLeafNode(s),0),o},getIndexRelativeToAdjacentEmptyBlocks:function(n,i,r,o){if(r.textContent.length>0&&o>0)return-1;var a=r;if(3!==a.nodeType&&(a=r.childNodes[o]),a){if(!e.util.isElementAtBeginningOfBlock(a))return-1;var s=e.util.findPreviousSibling(a);if(!s)return-1;if(s.nodeValue)return-1}for(var l=e.util.getClosestBlockContainer(r),c=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t,!1),u=0;c.nextNode();){var h=""===c.currentNode.textContent;if((h||u>0)&&(u+=1),c.currentNode===l)return u;h||(u=0)}return u},doesRangeStartWithImages:function(e,t){if(0!==e.startOffset||1!==e.startContainer.nodeType)return!1;if("img"===e.startContainer.nodeName.toLowerCase())return!0;var n=e.startContainer.querySelector("img");if(!n)return!1;for(var i=t.createTreeWalker(e.startContainer,NodeFilter.SHOW_ALL,null,!1);i.nextNode();){var r=i.currentNode;if(r===n)break;if(r.nodeValue)return!1}return!0},getTrailingImageCount:function(e,t,n,i){if(0===i||1!==n.nodeType)return 0;if("img"!==n.nodeName.toLowerCase()&&!n.querySelector("img"))return 0;for(var r=n.childNodes[i-1];r.hasChildNodes();)r=r.lastChild;for(var o,a=e,s=[],l=0,c=!1,u=!1,h=!1,d=0;!h&&a;)if(a.nodeType>3)a=s.pop();else{if(3!==a.nodeType||u){if("img"===a.nodeName.toLowerCase()&&d++,a===r)h=!0;else if(1===a.nodeType)for(var f=a.childNodes.length-1;f>=0;)s.push(a.childNodes[f]),f-=1}else d=0,o=l+a.length,!c&&t.start>=l&&t.start<=o&&(c=!0),c&&t.end>=l&&t.end<=o&&(u=!0),l=o;h||(a=s.pop())}return d},selectionContainsContent:function(e){var t=e.getSelection();if(!t||t.isCollapsed||!t.rangeCount)return!1;if(""!==t.toString().trim())return!0;var n=this.getSelectedParentElement(t.getRangeAt(0));return!(!n||!("img"===n.nodeName.toLowerCase()||1===n.nodeType&&n.querySelector("img")))},selectionInContentEditableFalse:function(e){var t,n=this.findMatchingSelectionParent(function(e){var n=e&&e.getAttribute("contenteditable");return"true"===n&&(t=!0),"#text"!==e.nodeName&&"false"===n},e);return!t&&n},getSelectionHtml:function(e){var t,n,i,r="",o=e.getSelection();if(o.rangeCount){for(i=e.createElement("div"),t=0,n=o.rangeCount;t<n;t+=1)i.appendChild(o.getRangeAt(t).cloneContents());r=i.innerHTML}return r},getCaretOffsets:function(e,t){var n,i;return t||(t=window.getSelection().getRangeAt(0)),n=t.cloneRange(),i=t.cloneRange(),n.selectNodeContents(e),n.setEnd(t.endContainer,t.endOffset),i.selectNodeContents(e),i.setStart(t.endContainer,t.endOffset),{left:n.toString().length,right:i.toString().length}},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(e){return e?this.rangeSelectsSingleNode(e)&&3!==e.startContainer.childNodes[e.startOffset].nodeType?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer:null},getSelectedElements:function(e){var t,n,i,r=e.getSelection();if(!r.rangeCount||r.isCollapsed||!r.getRangeAt(0).commonAncestorContainer)return[];if(t=r.getRangeAt(0),3===t.commonAncestorContainer.nodeType){for(n=[],i=t.commonAncestorContainer;i.parentNode&&1===i.parentNode.childNodes.length;)n.push(i.parentNode),i=i.parentNode;return n}return[].filter.call(t.commonAncestorContainer.getElementsByTagName("*"),function(e){return"function"!=typeof r.containsNode||r.containsNode(e,!0)})},selectNode:function(e,t){var n=t.createRange();n.selectNodeContents(e),this.selectRange(t,n)},select:function(e,t,n,i,r){var o=e.createRange();return o.setStart(t,n),i?o.setEnd(i,r):o.collapse(!0),this.selectRange(e,o),o},clearSelection:function(e,t){t?e.getSelection().collapseToStart():e.getSelection().collapseToEnd()},moveCursor:function(e,t,n){this.select(e,t,n)},getSelectionRange:function(e){var t=e.getSelection();return 0===t.rangeCount?null:t.getRangeAt(0)},selectRange:function(e,t){var n=e.getSelection();n.removeAllRanges(),n.addRange(t)},getSelectionStart:function(e){var t=e.getSelection().anchorNode,n=t&&3===t.nodeType?t.parentNode:t;return n}};e.selection=n}(),function(){function t(t,n){return t.some(function(t){if("function"!=typeof t.getInteractionElements)return!1;var i=t.getInteractionElements();return!!i&&(Array.isArray(i)||(i=[i]),i.some(function(t){return e.util.isDescendant(t,n,!0)}))})}var n=function(e){this.base=e,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};n.prototype={InputEventOnContenteditableSupported:!e.util.isIE&&!e.util.isEdge,attachDOMEvent:function(t,n,i,r){var o=this.base.options.contentWindow,a=this.base.options.ownerDocument;t=e.util.isElement(t)||[o,a].indexOf(t)>-1?[t]:t,Array.prototype.forEach.call(t,function(e){e.addEventListener(n,i,r),this.events.push([e,n,i,r])}.bind(this))},detachDOMEvent:function(t,n,i,r){var o,a,s=this.base.options.contentWindow,l=this.base.options.ownerDocument;t=e.util.isElement(t)||[s,l].indexOf(t)>-1?[t]:t,Array.prototype.forEach.call(t,function(e){o=this.indexOfListener(e,n,i,r),o!==-1&&(a=this.events.splice(o,1)[0],a[0].removeEventListener(a[1],a[2],a[3]))}.bind(this))},indexOfListener:function(e,t,n,i){var r,o,a;for(r=0,o=this.events.length;r<o;r+=1)if(a=this.events[r],a[0]===e&&a[1]===t&&a[2]===n&&a[3]===i)return r;return-1},detachAllDOMEvents:function(){for(var e=this.events.pop();e;)e[0].removeEventListener(e[1],e[2],e[3]),e=this.events.pop()},detachAllEventsFromElement:function(e){for(var t=this.events.filter(function(t){return t&&t[0].getAttribute&&t[0].getAttribute("medium-editor-index")===e.getAttribute("medium-editor-index")}),n=0,i=t.length;n<i;n++){var r=t[n];this.detachDOMEvent(r[0],r[1],r[2],r[3])}},attachAllEventsToElement:function(e){this.listeners.editableInput&&(this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(t){this.attachDOMEvent(e,t.name,t.handler.bind(this))},this)},enableCustomEvent:function(e){void 0!==this.disabledEvents[e]&&delete this.disabledEvents[e]},disableCustomEvent:function(e){this.disabledEvents[e]=!0},attachCustomEvent:function(e,t){this.setupListener(e),this.customEvents[e]||(this.customEvents[e]=[]),this.customEvents[e].push(t)},detachCustomEvent:function(e,t){var n=this.indexOfCustomListener(e,t);n!==-1&&this.customEvents[e].splice(n,1)},indexOfCustomListener:function(e,t){return this.customEvents[e]&&this.customEvents[e].length?this.customEvents[e].indexOf(t):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(e,t,n){this.customEvents[e]&&!this.disabledEvents[e]&&this.customEvents[e].forEach(function(e){e(t,n)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(e){e.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(e){this.handleDocumentExecCommand(e)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var e=this.options.ownerDocument;if(this.execCommandListener&&e.execCommand.listeners){var t=e.execCommand.listeners.indexOf(this.execCommandListener);t!==-1&&e.execCommand.listeners.splice(t,1),e.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var e=this.options.ownerDocument;if(!e.execCommand.listeners){var t=function(t,n){e.execCommand.listeners&&e.execCommand.listeners.forEach(function(e){e({command:t[0],value:t[2],args:t,result:n})})},n=function(){var n=e.execCommand.orig.apply(this,arguments);if(!e.execCommand.listeners)return n;var i=Array.prototype.slice.call(arguments);return t(i,n),n};n.orig=e.execCommand,n.listeners=[],n.callListeners=t,e.execCommand=n}},unwrapExecCommand:function(){var e=this.options.ownerDocument;e.execCommand.orig&&(e.execCommand=e.execCommand.orig)},setupListener:function(e){if(!this.listeners[e]){switch(e){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(e){this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[e]=!0}},attachToEachElement:function(e,t){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(n){this.attachDOMEvent(n,e,t.bind(this))},this),this.eventsCache.push({name:e,handler:t})},cleanupElement:function(e){var t=e.getAttribute("medium-editor-index");t&&(this.detachAllEventsFromElement(e),this.contentCache&&delete this.contentCache[t])},focusElement:function(e){e.focus(),this.updateFocus(e,{target:e,type:"focus"})},updateFocus:function(n,i){var r,o=this.base.getFocusedElement();o&&"click"===i.type&&this.lastMousedownTarget&&(e.util.isDescendant(o,this.lastMousedownTarget,!0)||t(this.base.extensions,this.lastMousedownTarget))&&(r=o),r||this.base.elements.some(function(t){return!r&&e.util.isDescendant(t,n,!0)&&(r=t),!!r},this);var a=!e.util.isDescendant(o,n,!0)&&!t(this.base.extensions,n);r!==o&&(o&&a&&(o.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",i,o)),r&&(r.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",i,r))),a&&this.triggerCustomEvent("externalInteraction",i)},updateInput:function(e,t){if(this.contentCache){var n=e.getAttribute("medium-editor-index"),i=e.innerHTML;i!==this.contentCache[n]&&this.triggerCustomEvent("editableInput",t,e),this.contentCache[n]=i}},handleDocumentSelectionChange:function(t){if(t.currentTarget&&t.currentTarget.activeElement){var n,i=t.currentTarget.activeElement;this.base.elements.some(function(t){return!!e.util.isDescendant(t,i,!0)&&(n=t,!0)},this),n&&this.updateInput(n,{target:i,currentTarget:n})}},handleDocumentExecCommand:function(){var e=this.base.getFocusedElement();e&&this.updateInput(e,{target:e,currentTarget:e})},handleBodyClick:function(e){this.updateFocus(e.target,e)},handleBodyFocus:function(e){this.updateFocus(e.target,e)},handleBodyMousedown:function(e){this.lastMousedownTarget=e.target},handleInput:function(e){this.updateInput(e.currentTarget,e)},handleClick:function(e){this.triggerCustomEvent("editableClick",e,e.currentTarget)},handleBlur:function(e){this.triggerCustomEvent("editableBlur",e,e.currentTarget)},handleKeypress:function(e){if(this.triggerCustomEvent("editableKeypress",e,e.currentTarget),this.keypressUpdateInput){var t={target:e.target,currentTarget:e.currentTarget};setTimeout(function(){this.updateInput(t.currentTarget,t)}.bind(this),0)}},handleKeyup:function(e){this.triggerCustomEvent("editableKeyup",e,e.currentTarget)},handleMouseover:function(e){this.triggerCustomEvent("editableMouseover",e,e.currentTarget)},handleDragging:function(e){this.triggerCustomEvent("editableDrag",e,e.currentTarget)},handleDrop:function(e){this.triggerCustomEvent("editableDrop",e,e.currentTarget)},handlePaste:function(e){this.triggerCustomEvent("editablePaste",e,e.currentTarget)},handleKeydown:function(t){return this.triggerCustomEvent("editableKeydown",t,t.currentTarget),e.util.isKey(t,e.util.keyCode.SPACE)?this.triggerCustomEvent("editableKeydownSpace",t,t.currentTarget):e.util.isKey(t,e.util.keyCode.ENTER)||t.ctrlKey&&e.util.isKey(t,e.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",t,t.currentTarget):e.util.isKey(t,e.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",t,t.currentTarget):e.util.isKey(t,[e.util.keyCode.DELETE,e.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",t,t.currentTarget):void 0}},e.Events=n}(),function(){var t=e.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(n){t.isBuiltInButton(n)?e.Extension.call(this,this.defaults[n]):e.Extension.call(this,n)},init:function(){e.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this));
},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var e=this.document.createElement("button"),t=this.contentDefault,n=this.getAria(),i=this.getEditorOption("buttonLabels");return e.classList.add("medium-editor-action"),e.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(t){e.classList.add(t)}),e.setAttribute("data-action",this.getAction()),n&&(e.setAttribute("title",n),e.setAttribute("aria-label",n)),this.attrs&&Object.keys(this.attrs).forEach(function(t){e.setAttribute(t,this.attrs[t])},this),"fontawesome"===i&&this.contentFA&&(t=this.contentFA),e.innerHTML=t,e},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.getAction();t&&this.execAction(t)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var e=null;return this.useQueryState&&(e=this.base.queryCommandState(this.getAction())),e},isAlreadyApplied:function(e){var t,n,i=!1,r=this.getTagNames();return this.knownState===!1||this.knownState===!0?this.knownState:(r&&r.length>0&&(i=r.indexOf(e.nodeName.toLowerCase())!==-1),!i&&this.style&&(t=this.style.value.split("|"),n=this.window.getComputedStyle(e,null).getPropertyValue(this.style.prop),t.forEach(function(e){this.knownState||(i=n.indexOf(e)!==-1,(i||"text-decoration"!==this.style.prop)&&(this.knownState=i))},this)),i)}});t.isBuiltInButton=function(t){return"string"==typeof t&&e.extensions.button.prototype.defaults.hasOwnProperty(t)},e.extensions.button=t}(),function(){e.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var t=e.extensions.button.extend({init:function(){e.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return!!this.hasForm&&this.getForm().classList.contains(this.activeClass)},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.hideToolbarDefaultActions()},setToolbarPosition:function(){var e=this.base.getExtensionByName("toolbar");e&&e.setToolbarPosition()}});e.extensions.form=t}(),function(){var t=e.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(t){t.preventDefault(),t.stopPropagation();var n=e.selection.getSelectionRange(this.document);return"a"===n.startContainer.nodeName.toLowerCase()||"a"===n.endContainer.nodeName.toLowerCase()||e.util.getClosestTag(e.selection.getSelectedParentElement(n),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(t){e.util.isKey(t,e.util.keyCode.K)&&e.util.isMetaCtrlKey(t)&&!t.shiftKey&&this.handleClick(t)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var e=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return e.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),e.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target">',"<label>",this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),e.join("")},isDisplayed:function(){return e.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){e.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(t){var n=this.getInput(),i=this.getAnchorTargetCheckbox(),r=this.getAnchorButtonCheckbox();if(t=t||{value:""},"string"==typeof t&&(t={value:t}),this.base.saveSelection(),this.hideToolbarDefaultActions(),e.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),n.value=t.value,n.focus(),i&&(i.checked="_blank"===t.target),r){var o=t.buttonClass?t.buttonClass.split(" "):[];r.checked=o.indexOf(this.customClassOption)!==-1}},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},getFormOpts:function(){var e=this.getAnchorTargetCheckbox(),t=this.getAnchorButtonCheckbox(),n={value:this.getInput().value.trim()};return this.linkValidation&&(n.value=this.checkLinkFormat(n.value)),n.target="_self",e&&e.checked&&(n.target="_blank"),t&&t.checked&&(n.buttonClass=this.customClassOption),n},doFormSave:function(){var e=this.getFormOpts();this.completeFormSave(e)},completeFormSave:function(e){this.base.restoreSelection(),this.execAction(this.action,e),this.base.checkSelection()},ensureEncodedUri:function(e){return e===decodeURI(e)?encodeURI(e):e},ensureEncodedUriComponent:function(e){return e===decodeURIComponent(e)?encodeURIComponent(e):e},ensureEncodedParam:function(e){var t=e.split("="),n=t[0],i=t[1];return n+(void 0===i?"":"="+this.ensureEncodedUriComponent(i))},ensureEncodedQuery:function(e){return e.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(e){var t=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,n=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,i=e.split("?"),r=i[0],o=i[1];return n.test(e)?"tel:"+e:(t.test(e)?"":"http://")+this.ensureEncodedUri(r)+(void 0===o?"":"?"+this.ensureEncodedQuery(o))},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(e){var t=e.querySelector(".medium-editor-toolbar-close"),n=e.querySelector(".medium-editor-toolbar-save"),i=e.querySelector(".medium-editor-toolbar-input");this.on(e,"click",this.handleFormClick.bind(this)),this.on(i,"keyup",this.handleTextboxKeyup.bind(this)),this.on(t,"click",this.handleCloseClick.bind(this)),this.on(n,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var e=this.document,t=e.createElement("div");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),t.innerHTML=this.getTemplate(),this.attachFormEvents(t),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(t){return t.keyCode===e.util.keyCode.ENTER?(t.preventDefault(),void this.doFormSave()):void(t.keyCode===e.util.keyCode.ESCAPE&&(t.preventDefault(),this.doFormCancel()))},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.anchor=t}(),function(){var t=e.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var e=this.document.createElement("div");return e.id="medium-editor-anchor-preview-"+this.getEditorId(),e.className="medium-editor-anchor-preview",e.innerHTML=this.getTemplate(),this.on(e,"click",this.handleClick.bind(this)),e},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(e){return!(!this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&!e.getAttribute("data-disable-preview"))||(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=e.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=e.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=e,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(e){e=e||this.activeAnchor;var t,n,i,r,o,a=this.window.innerWidth,s=this.anchorPreview.offsetHeight,l=e.getBoundingClientRect(),c=this.diffLeft,u=this.diffTop,h=this.getEditorOption("elementsContainer"),d=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,f={};t=this.anchorPreview.offsetWidth/2;var p=this.base.getExtensionByName("toolbar");p&&(c=p.diffLeft,u=p.diffTop),n=c-t,d?(r=h.getBoundingClientRect(),["top","left"].forEach(function(e){f[e]=l[e]-r[e]}),f.width=l.width,f.height=l.height,l=f,a=r.width,o=h.scrollTop):o=this.window.pageYOffset,i=l.left+l.width/2,o+=s+l.top+l.height-u-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(o)+"px",this.anchorPreview.style.right="initial",i<t?(this.anchorPreview.style.left=n+t+"px",this.anchorPreview.style.right="initial"):a-i<t?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=n+i+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),n=this.activeAnchor;t&&n&&(e.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(n){var e={value:n.attributes.href.value,target:n.getAttribute("target"),buttonClass:n.getAttribute("class")};t.showForm(e),n=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(t){var n=e.util.getClosestTag(t.target,"a");if(!1!==n){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(n.outerHTML)||/href=["']#\S+["']/.test(n.outerHTML)))return!0;var i=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&i&&i.isDisplayed&&i.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==n&&this.detachPreviewHandlers(),this.anchorToPreview=n,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var e=(new Date).getTime()-this.lastOver;e>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});e.extensions.anchorPreview=t}(),function(){function t(t){return!e.util.getClosestTag(t,"a")}var n,i,r,o;n=[" ","\t","\n","\r"," "," "," "," "," ","\u2028","\u2029"],i="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",r="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+i+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+i+"))",o=new RegExp("^("+i+")$","i");var a=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var e=0,t=0;t<this.window._mediumEditors.length;t++){var n=this.window._mediumEditors[t];null!==n&&void 0!==n.getExtensionByName("autoLink")&&e++}return 1===e},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(e,t){this.performLinking(t)},onKeypress:function(t){this.disableEventHandling||e.util.isKey(t,[e.util.keyCode.SPACE,e.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var e=this.base.exportSelection();this.performLinking(t.target)&&this.base.importSelection(e,!0)}catch(e){window.console&&window.console.error("Failed to perform linking",e),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(t){var n=e.util.splitByBlockElements(t),i=!1;0===n.length&&(n=[t]);for(var r=0;r<n.length;r++)i=this.removeObsoleteAutoLinkSpans(n[r])||i,i=this.performLinkingWithinElement(n[r])||i;return this.base.events.updateInput(t,{target:t,currentTarget:t}),i},removeObsoleteAutoLinkSpans:function(n){if(!n||3===n.nodeType)return!1;for(var i=n.querySelectorAll('span[data-auto-link="true"]'),r=!1,o=0;o<i.length;o++){var a=i[o].textContent;if(a.indexOf("://")===-1&&(a=e.util.ensureUrlHasProtocol(a)),i[o].getAttribute("data-href")!==a&&t(i[o])){r=!0;var s=a.replace(/\s+$/,"");if(i[o].getAttribute("data-href")===s){var l=a.length-s.length,c=e.util.splitOffDOMTree(i[o],this.splitTextBeforeEnd(i[o],l));i[o].parentNode.insertBefore(c,i[o].nextSibling)}else e.util.unwrap(i[o],this.document)}}return r},splitTextBeforeEnd:function(e,t){for(var n=this.document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),i=!0;i;)i=null!==n.lastChild();for(var r,o,a;t>0&&null!==a;)r=n.currentNode,o=r.nodeValue,o.length>t?(a=r.splitText(o.length-t),t=0):(a=n.previousNode(),t-=o.length);return a},performLinkingWithinElement:function(t){for(var n=this.findLinkableText(t),i=!1,r=0;r<n.length;r++){var o=e.util.findOrCreateMatchingTextNodes(this.document,t,n[r]);this.shouldNotLink(o)||this.createAutoLink(o,n[r].href)}return i},shouldNotLink:function t(n){for(var t=!1,i=0;i<n.length&&t===!1;i++)t=!!e.util.traverseUp(n[i],function(e){return"a"===e.nodeName.toLowerCase()||e.getAttribute&&"true"===e.getAttribute("data-auto-link")});return t},findLinkableText:function(e){for(var t=new RegExp(r,"gi"),i=e.textContent,a=null,s=[];null!==(a=t.exec(i));){var l=!0,c=a.index+a[0].length;l=!(0!==a.index&&n.indexOf(i[a.index-1])===-1||c!==i.length&&n.indexOf(i[c])===-1),l=l&&(a[0].indexOf("/")!==-1||o.test(a[0].split(".").pop().split("?").shift())),l&&s.push({href:a[0],start:a.index,end:c})}return s},createAutoLink:function(t,n){n=e.util.ensureUrlHasProtocol(n);var i=e.util.createLink(this.document,t,n,this.getEditorOption("targetBlank")?"_blank":null),r=this.document.createElement("span");for(r.setAttribute("data-auto-link","true"),r.setAttribute("data-href",n),i.insertBefore(r,i.firstChild);i.childNodes.length>1;)r.appendChild(i.childNodes[1])}});e.extensions.autoLink=a}(),function(){function t(t){var i=e.util.getContainerEditorElement(t),r=Array.prototype.slice.call(i.parentElement.querySelectorAll("."+n));r.forEach(function(e){e.classList.remove(n)})}var n="medium-editor-dragover",i=e.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy";var i=e.target.classList?e.target:e.target.parentElement;t(i),"dragover"===e.type&&i.classList.add(n)},handleDrop:function(e){e.preventDefault(),e.stopPropagation(),this.base.selectElement(e.target);var n=this.base.exportSelection();n.start=n.end,this.base.importSelection(n),e.dataTransfer.files&&Array.prototype.slice.call(e.dataTransfer.files).forEach(function(e){this.isAllowedFile(e)&&e.type.match("image")&&this.insertImageFile(e)},this),t(e.target)},isAllowedFile:function(e){return this.allowedTypes.some(function(t){return!!e.type.match(t)})},insertImageFile:function(t){if("function"==typeof FileReader){var n=new FileReader;n.readAsDataURL(t),n.addEventListener("load",function(t){var n=this.document.createElement("img");n.src=t.target.result,e.util.insertHTMLCommand(this.document,n.outerHTML)}.bind(this))}}});e.extensions.fileDragging=i}(),function(){var t=e.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(e){var t=e.key.charCodeAt(0);this.keys[t]||(this.keys[t]=[]),this.keys[t].push(e)},this)},handleKeydown:function(t){var n=e.util.getKeyCode(t);if(this.keys[n]){var i=e.util.isMetaCtrlKey(t),r=!!t.shiftKey,o=!!t.altKey;this.keys[n].forEach(function(e){e.meta!==i||e.shift!==r||e.alt!==o&&void 0!==e.alt||(t.preventDefault(),t.stopPropagation(),"function"==typeof e.command?e.command.apply(this):!1!==e.command&&this.execAction(e.command))},this)}}});e.extensions.keyboardCommands=t}(),function(){var t=e.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontName")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(e){var t=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var e,t=this.document,n=t.createElement("div"),i=t.createElement("select"),r=t.createElement("a"),o=t.createElement("a");n.className="medium-editor-toolbar-form",n.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(n,"click",this.handleFormClick.bind(this));for(var a=0;a<this.fonts.length;a++)e=t.createElement("option"),e.innerHTML=this.fonts[a],e.value=this.fonts[a],i.appendChild(e);return i.className="medium-editor-toolbar-select",n.appendChild(i),this.on(i,"change",this.handleFontChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",n.appendChild(o),this.on(o,"click",this.handleSaveClick.bind(this),!0),r.setAttribute("href","#"),r.className="medium-editor-toobar-close",r.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",n.appendChild(r),this.on(r,"click",this.handleCloseClick.bind(this)),n},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){e.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("face")&&e.removeAttribute("face")})},handleFontChange:function(){var e=this.getSelect().value;""===e?this.clearFontName():this.execAction("fontName",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.fontName=t}(),function(){var t=e.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontSize")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var e=this.document,t=e.createElement("div"),n=e.createElement("input"),i=e.createElement("a"),r=e.createElement("a");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(t,"click",this.handleFormClick.bind(this)),n.setAttribute("type","range"),n.setAttribute("min","1"),n.setAttribute("max","7"),n.className="medium-editor-toolbar-input",t.appendChild(n),this.on(n,"change",this.handleSliderChange.bind(this)),r.setAttribute("href","#"),r.className="medium-editor-toobar-save",r.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",t.appendChild(r),this.on(r,"click",this.handleSaveClick.bind(this),!0),i.setAttribute("href","#"),i.className="medium-editor-toobar-close",i.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",t.appendChild(i),this.on(i,"click",this.handleCloseClick.bind(this)),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){e.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("size")&&e.removeAttribute("size")})},handleSliderChange:function(){var e=this.getInput().value;"4"===e?this.clearFontSize():this.execAction("fontSize",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.fontSize=t}(),function(){function t(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function n(e,t,n){var i=e.clipboardData||t.clipboardData||n.dataTransfer,r={};if(!i)return r;
if(i.getData){var o=i.getData("Text");o&&o.length>0&&(r["text/plain"]=o)}if(i.types)for(var a=0;a<i.types.length;a++){var s=i.types[a];r[s]=i.getData(s)}return r}var i="%ME_PASTEBIN%",r=null,o=null,a=function(e){e.stopPropagation()},s=e.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){e.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(e){this.on(e,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(e,t){this.on(t,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(e,t){if(!e.defaultPrevented){var i=n(e,this.window,this.document),r=i["text/html"],o=i["text/plain"];this.window.clipboardData&&void 0===e.clipboardData&&!r&&(r=o),(r||o)&&(e.preventDefault(),this.doPaste(r,o,t))}},doPaste:function(t,n,i){var r,o,a="";if(this.cleanPastedHTML&&t)return this.cleanPaste(t);if(this.getEditorOption("disableReturn")||i&&i.getAttribute("data-disable-return"))a=e.util.htmlEntities(n);else if(r=n.split(/[\r\n]+/g),r.length>1)for(o=0;o<r.length;o+=1)""!==r[o]&&(a+="<p>"+e.util.htmlEntities(r[o])+"</p>");else a=e.util.htmlEntities(r[0]);e.util.insertHTMLCommand(this.document,a)},handlePasteBinPaste:function(e){if(e.defaultPrevented)return void this.removePasteBin();var t=n(e,this.window,this.document),i=t["text/html"],r=t["text/plain"],a=o;return!this.cleanPastedHTML||i?(e.preventDefault(),this.removePasteBin(),this.doPaste(i,r,a),void this.trigger("editablePaste",{currentTarget:a,target:a},a)):void setTimeout(function(){this.cleanPastedHTML&&(i=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(i,r,a),this.trigger("editablePaste",{currentTarget:a,target:a},a)}.bind(this),0)},handleKeydown:function(t,n){e.util.isKey(t,e.util.keyCode.V)&&e.util.isMetaCtrlKey(t)&&(t.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(n))},createPasteBin:function(t){var n,s=e.selection.getSelectionRange(this.document),l=this.window.pageYOffset;o=t,s&&(n=s.getClientRects(),l+=n.length?n[0].top:s.startContainer.getBoundingClientRect().top),r=s;var c=this.document.createElement("div");c.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),c.setAttribute("style","border: 1px red solid; position: absolute; top: "+l+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),c.setAttribute("contentEditable",!0),c.innerHTML=i,this.document.body.appendChild(c),this.on(c,"focus",a),this.on(c,"focusin",a),this.on(c,"focusout",a),c.focus(),e.selection.selectNode(c,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(c,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==r&&(e.selection.selectRange(this.document,r),r=null),null!==o&&(o=null);var t=this.getPasteBin();t&&t&&(this.off(t,"focus",a),this.off(t,"focusin",a),this.off(t,"focusout",a),this.off(t,"paste",this.boundHandlePaste),t.parentElement.removeChild(t))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var e=this.getPasteBin();if(!e)return!1;if(e.firstChild&&"mcepastebin"===e.firstChild.id)return!1;var t=e.innerHTML;return!(!t||t===i)&&t},cleanPaste:function(e){var n,i,r,o,a=/<p|<br|<div/.test(e),s=[].concat(this.preCleanReplacements||[],t(),this.cleanReplacements||[]);for(n=0;n<s.length;n+=1)e=e.replace(s[n][0],s[n][1]);if(!a)return this.pasteHTML(e);for(r=this.document.createElement("div"),r.innerHTML="<p>"+e.split("<br><br>").join("</p><p>")+"</p>",i=r.querySelectorAll("a,p,div,br"),n=0;n<i.length;n+=1)switch(o=i[n],o.innerHTML=o.innerHTML.replace(/\n/gi," "),o.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(o);break;case"br":this.filterLineBreak(o)}this.pasteHTML(r.innerHTML)},pasteHTML:function(t,n){n=e.util.defaults({},n,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var i,r,o,a,s=this.document.createDocumentFragment();for(s.appendChild(this.document.createElement("body")),a=s.querySelector("body"),a.innerHTML=t,this.cleanupSpans(a),i=a.querySelectorAll("*"),o=0;o<i.length;o+=1)r=i[o],"a"===r.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&e.util.setTargetBlank(r),e.util.cleanupAttrs(r,n.cleanAttrs),e.util.cleanupTags(r,n.cleanTags),e.util.unwrapTags(r,n.unwrapTags);e.util.insertHTMLCommand(this.document,a.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(e){return e&&("p"===e.nodeName.toLowerCase()||"div"===e.nodeName.toLowerCase())},filterCommonBlocks:function(e){/^\s*$/.test(e.textContent)&&e.parentNode&&e.parentNode.removeChild(e)},filterLineBreak:function(e){this.isCommonBlock(e.previousElementSibling)?this.removeWithParent(e):!this.isCommonBlock(e.parentNode)||e.parentNode.firstChild!==e&&e.parentNode.lastChild!==e?e.parentNode&&1===e.parentNode.childElementCount&&""===e.parentNode.textContent&&this.removeWithParent(e):this.removeWithParent(e)},removeWithParent:function(e){e&&e.parentNode&&(e.parentNode.parentNode&&1===e.parentNode.childElementCount?e.parentNode.parentNode.removeChild(e.parentNode):e.parentNode.removeChild(e))},cleanupSpans:function(t){var n,i,r,o=t.querySelectorAll(".replace-with"),a=function(e){return e&&"#text"!==e.nodeName&&"false"===e.getAttribute("contenteditable")};for(n=0;n<o.length;n+=1)i=o[n],r=this.document.createElement(i.classList.contains("bold")?"b":"i"),i.classList.contains("bold")&&i.classList.contains("italic")?r.innerHTML="<i>"+i.innerHTML+"</i>":r.innerHTML=i.innerHTML,i.parentNode.replaceChild(r,i);for(o=t.querySelectorAll("span"),n=0;n<o.length;n+=1){if(i=o[n],e.util.traverseUp(i,a))return!1;e.util.unwrap(i,this.document)}}});e.extensions.paste=s}(),function(){var t=e.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(e,t){this.initElement(t)},initElement:function(e){e.getAttribute("data-placeholder")||e.setAttribute("data-placeholder",this.text),this.updatePlaceholder(e)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(e,t){this.cleanupElement(t)},cleanupElement:function(e){e.getAttribute("data-placeholder")===this.text&&e.removeAttribute("data-placeholder")},showPlaceholder:function(t){t&&(e.util.isFF&&0===t.childNodes.length?(t.classList.add("medium-editor-placeholder-relative"),t.classList.remove("medium-editor-placeholder")):(t.classList.add("medium-editor-placeholder"),t.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(e){e&&(e.classList.remove("medium-editor-placeholder"),e.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(e,t){return e.querySelector("img, blockquote, ul, ol, table")||""!==e.textContent.replace(/^\s+|\s+$/g,"")?this.hidePlaceholder(e):void(t||this.showPlaceholder(e))},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(e,t){var n=this.hideOnClick&&t===this.base.getFocusedElement();this.updatePlaceholder(t,n)},handleFocus:function(e,t){this.hidePlaceholder(t)},handleBlur:function(e,t){this.updatePlaceholder(t)}});e.extensions.placeholder=t}(),function(){var t=e.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(e,t){return this.base.extensions.forEach(function(n){if(n!==this)return e.apply(t||this,arguments)},this)},createToolbar:function(){var e=this.document.createElement("div");return e.id="medium-editor-toolbar-"+this.getEditorId(),e.className="medium-editor-toolbar",this.static?e.className+=" static-toolbar":this.relativeContainer?e.className+=" medium-editor-relative-toolbar":e.className+=" medium-editor-stalker-toolbar",e.appendChild(this.createToolbarButtons()),this.forEachExtension(function(t){t.hasForm&&e.appendChild(t.getForm())}),this.attachEventHandlers(),e},createToolbarButtons:function(){var t,n,i,r,o,a,s=this.document.createElement("ul");return s.id="medium-editor-toolbar-actions"+this.getEditorId(),s.className="medium-editor-toolbar-actions",s.style.display="block",this.buttons.forEach(function(i){"string"==typeof i?(o=i,a=null):(o=i.name,a=i),r=this.base.addBuiltInExtension(o,a),r&&"function"==typeof r.getButton&&(n=r.getButton(this.base),t=this.document.createElement("li"),e.util.isElement(n)?t.appendChild(n):t.innerHTML=n,s.appendChild(t))},this),i=s.querySelectorAll("button"),i.length>0&&(i[0].classList.add(this.firstButtonClass),i[i.length-1].classList.add(this.lastButtonClass)),s},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=e.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(t){return!(t&&t.target&&e.util.isDescendant(this.getToolbarElement(),t.target))&&void this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(e){e.hasForm&&e.isDisplayed()&&e.hideForm()})},multipleBlockElementsSelected:function(){var t=/<[^\/>][^>]*><\/[^>]+>/gim,n=new RegExp("<("+e.util.blockContainerElementNames.join("|")+")[^>]*>","g"),i=e.selection.getSelectionHtml(this.document).replace(t,""),r=i.match(n);return!!r&&r.length>1},modifySelection:function(){var t=this.window.getSelection(),n=t.getRangeAt(0);if(this.standardizeSelectionStart&&n.startContainer.nodeValue&&n.startOffset===n.startContainer.nodeValue.length){var i=e.util.findAdjacentTextNodeWithContent(e.selection.getSelectionElement(this.window),n.startContainer,this.document);if(i){for(var r=0;0===i.nodeValue.substr(r,1).trim().length;)r+=1;n=e.selection.select(this.document,i,r,n.endContainer,n.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||e.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var t=e.selection.getSelectionElement(this.window);return!t||this.getEditorElements().indexOf(t)===-1||t.getAttribute("data-disable-toolbar")?this.hideToolbar():this.updateOnEmptySelection&&this.static?this.showAndUpdateToolbar():!e.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(e){"function"==typeof e.isActive&&"function"==typeof e.setInactive&&e.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var t,n=[],i=null,r=e.selection.getSelectionRange(this.document),o=function(e){"function"==typeof e.checkState?e.checkState(t):"function"==typeof e.isActive&&"function"==typeof e.isAlreadyApplied&&"function"==typeof e.setActive&&!e.isActive()&&e.isAlreadyApplied(t)&&e.setActive()};if(r&&(this.forEachExtension(function(e){return"function"==typeof e.queryCommandState&&(i=e.queryCommandState(),null!==i)?void(i&&"function"==typeof e.setActive&&e.setActive()):void n.push(e)}),t=e.selection.getSelectedParentElement(r),this.getEditorElements().some(function(n){return e.util.isDescendant(n,t,!0)})))for(;t&&(n.forEach(o),!e.util.isMediumEditorElement(t));)t=t.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var e=this.base.getFocusedElement(),t=this.window.getSelection();return e?void(!this.static&&t.isCollapsed||(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(e):this.positionToolbar(t)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))):this},positionStaticToolbar:function(e){this.getToolbarElement().style.left="0";var t,n=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,i=this.window.innerWidth,r=this.getToolbarElement(),o=e.getBoundingClientRect(),a=o.top+n,s=o.left+o.width/2,l=r.offsetHeight,c=r.offsetWidth,u=c/2;switch(this.sticky?n>a+e.offsetHeight-l-this.stickyTopOffset?(r.style.top=a+e.offsetHeight-l+"px",r.classList.remove("medium-editor-sticky-toolbar")):n>a-l-this.stickyTopOffset?(r.classList.add("medium-editor-sticky-toolbar"),r.style.top=this.stickyTopOffset+"px"):(r.classList.remove("medium-editor-sticky-toolbar"),r.style.top=a-l+"px"):r.style.top=a-l+"px",this.align){case"left":t=o.left;break;case"right":t=o.right-c;break;case"center":t=s-u}t<0?t=0:t+c>i&&(t=i-Math.ceil(c)-1),r.style.left=t+"px"},positionToolbar:function(e){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var t=e.getRangeAt(0),n=t.getBoundingClientRect();(!n||0===n.height&&0===n.width&&t.startContainer===t.endContainer)&&(n=1===t.startContainer.nodeType&&t.startContainer.querySelector("img")?t.startContainer.querySelector("img").getBoundingClientRect():t.startContainer.getBoundingClientRect());var i,r,o=this.window.innerWidth,a=this.getToolbarElement(),s=a.offsetHeight,l=a.offsetWidth,c=l/2,u=50,h=this.diffLeft-c,d=this.getEditorOption("elementsContainer"),f=["absolute","fixed"].indexOf(window.getComputedStyle(d).getPropertyValue("position"))>-1,p={},m={};f?(r=d.getBoundingClientRect(),["top","left"].forEach(function(e){m[e]=n[e]-r[e]}),m.width=n.width,m.height=n.height,n=m,o=r.width,p.top=d.scrollTop):p.top=this.window.pageYOffset,i=n.left+n.width/2,p.top+=n.top-s,n.top<u?(a.classList.add("medium-toolbar-arrow-over"),a.classList.remove("medium-toolbar-arrow-under"),p.top+=u+n.height-this.diffTop):(a.classList.add("medium-toolbar-arrow-under"),a.classList.remove("medium-toolbar-arrow-over"),p.top+=this.diffTop),i<c?(p.left=h+c,p.right="initial"):o-i<c?(p.left="auto",p.right=0):(p.left=h+i,p.right="initial"),["top","left","right"].forEach(function(e){a.style[e]=p[e]+(isNaN(p[e])?"":"px")})}});e.extensions.toolbar=t}(),function(){var t=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){var t="medium-editor-dragover";e.preventDefault(),e.dataTransfer.dropEffect="copy","dragover"===e.type?e.target.classList.add(t):"dragleave"===e.type&&e.target.classList.remove(t)},handleDrop:function(t){var n,i="medium-editor-dragover";t.preventDefault(),t.stopPropagation(),t.dataTransfer.files&&(n=Array.prototype.slice.call(t.dataTransfer.files,0),n.some(function(t){if(t.type.match("image")){var n,i;n=new FileReader,n.readAsDataURL(t),i="medium-img-"+ +new Date,e.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+i+'" />'),n.onload=function(){var e=this.document.getElementById(i);e&&(e.removeAttribute("id"),e.removeAttribute("class"),e.src=n.result)}.bind(this)}}.bind(this))),t.target.classList.remove(i)}});e.extensions.imageDragging=t}(),function(){function t(t){var n=e.selection.getSelectionStart(this.options.ownerDocument),i=n.textContent,r=e.selection.getCaretOffsets(n);(void 0===i[r.left-1]||""===i[r.left-1].trim()||void 0!==i[r.left]&&""===i[r.left].trim())&&t.preventDefault()}function n(t,n){if(this.options.disableReturn||n.getAttribute("data-disable-return"))t.preventDefault();else if(this.options.disableDoubleReturn||n.getAttribute("data-disable-double-return")){var i=e.selection.getSelectionStart(this.options.ownerDocument);(i&&""===i.textContent.trim()&&"li"!==i.nodeName.toLowerCase()||i.previousElementSibling&&"br"!==i.previousElementSibling.nodeName.toLowerCase()&&""===i.previousElementSibling.textContent.trim())&&t.preventDefault()}}function i(t){var n=e.selection.getSelectionStart(this.options.ownerDocument),i=n&&n.nodeName.toLowerCase();"pre"===i&&(t.preventDefault(),e.util.insertHTMLCommand(this.options.ownerDocument,"    ")),e.util.isListItem(n)&&(t.preventDefault(),t.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function r(t){var n,i=e.selection.getSelectionStart(this.options.ownerDocument),r=i.nodeName.toLowerCase(),o=/^(\s+|<br\/?>)?$/i,a=/h\d/i;e.util.isKey(t,[e.util.keyCode.BACKSPACE,e.util.keyCode.ENTER])&&i.previousElementSibling&&a.test(r)&&0===e.selection.getCaretOffsets(i).left?e.util.isKey(t,e.util.keyCode.BACKSPACE)&&o.test(i.previousElementSibling.innerHTML)?(i.previousElementSibling.parentNode.removeChild(i.previousElementSibling),t.preventDefault()):!this.options.disableDoubleReturn&&e.util.isKey(t,e.util.keyCode.ENTER)&&(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.previousElementSibling.parentNode.insertBefore(n,i),t.preventDefault()):e.util.isKey(t,e.util.keyCode.DELETE)&&i.nextElementSibling&&i.previousElementSibling&&!a.test(r)&&o.test(i.innerHTML)&&a.test(i.nextElementSibling.nodeName.toLowerCase())?(e.selection.moveCursor(this.options.ownerDocument,i.nextElementSibling),i.previousElementSibling.parentNode.removeChild(i),t.preventDefault()):e.util.isKey(t,e.util.keyCode.BACKSPACE)&&"li"===r&&o.test(i.innerHTML)&&!i.previousElementSibling&&!i.parentElement.previousElementSibling&&i.nextElementSibling&&"li"===i.nextElementSibling.nodeName.toLowerCase()?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.parentElement.insertBefore(n,i.parentElement),e.selection.moveCursor(this.options.ownerDocument,n),i.parentElement.removeChild(i),t.preventDefault()):e.util.isKey(t,e.util.keyCode.BACKSPACE)&&e.util.getClosestTag(i,"blockquote")!==!1&&0===e.selection.getCaretOffsets(i).left?(t.preventDefault(),e.util.execFormatBlock(this.options.ownerDocument,"p")):e.util.isKey(t,e.util.keyCode.ENTER)&&e.util.getClosestTag(i,"blockquote")!==!1&&0===e.selection.getCaretOffsets(i).right?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.insertBefore(n,i.nextSibling),e.selection.moveCursor(this.options.ownerDocument,n),t.preventDefault()):e.util.isKey(t,e.util.keyCode.BACKSPACE)&&e.util.isMediumEditorElement(i.parentElement)&&!i.previousElementSibling&&i.nextElementSibling&&o.test(i.innerHTML)&&(t.preventDefault(),e.selection.moveCursor(this.options.ownerDocument,i.nextSibling),i.parentElement.removeChild(i))}function o(t){var n,i=e.selection.getSelectionStart(this.options.ownerDocument);i&&(e.util.isMediumEditorElement(i)&&0===i.children.length&&!e.util.isBlockContainer(i)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!e.util.isKey(t,e.util.keyCode.ENTER)||e.util.isListItem(i)||e.util.isBlockContainer(i)||(n=i.nodeName.toLowerCase(),"a"===n?this.options.ownerDocument.execCommand("unlink",!1,null):t.shiftKey||t.ctrlKey||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function a(e,t){var n=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');n&&(n.value=t.innerHTML.trim())}function s(e){e._mediumEditors||(e._mediumEditors=[null]),this.id||(this.id=e._mediumEditors.length),e._mediumEditors[this.id]=this}function l(e){e._mediumEditors&&e._mediumEditors[this.id]&&(e._mediumEditors[this.id]=null)}function c(t,n,i){var r=[];if(t||(t=[]),"string"==typeof t&&(t=n.querySelectorAll(t)),e.util.isElement(t)&&(t=[t]),i)for(var o=0;o<t.length;o++){var a=t[o];!e.util.isElement(a)||a.getAttribute("data-medium-editor-element")||a.getAttribute("medium-editor-textarea-id")||r.push(a)}else r=Array.prototype.slice.apply(t);return r}function u(e){var t=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');t&&(t.classList.remove("medium-editor-hidden"),t.removeAttribute("medium-editor-textarea-id")),e.parentNode&&e.parentNode.removeChild(e)}function h(e,t){return Object.keys(t).forEach(function(n){void 0===e[n]&&(e[n]=t[n])}),e}function d(e,t,n){var i={window:n.options.contentWindow,document:n.options.ownerDocument,base:n};return e=h(e,i),"function"==typeof e.init&&e.init(),e.name||(e.name=t),e}function f(){return!this.elements.every(function(e){return!!e.getAttribute("data-disable-toolbar")})&&this.options.toolbar!==!1}function p(){return!!f.call(this)&&this.options.anchorPreview!==!1}function m(){return this.options.placeholder!==!1}function g(){return this.options.autoLink!==!1}function v(){return this.options.imageDragging!==!1}function b(){return this.options.keyboardCommands!==!1}function y(){return!this.options.extensions.imageDragging}function w(e){for(var t=this.options.ownerDocument.createElement("div"),n=Date.now(),i="medium-editor-"+n,r=e.attributes;this.options.ownerDocument.getElementById(i);)n++,i="medium-editor-"+n;t.className=e.className,t.id=i,t.innerHTML=e.value,e.setAttribute("medium-editor-textarea-id",i);for(var o=0,a=r.length;o<a;o++)t.hasAttribute(r[o].nodeName)||t.setAttribute(r[o].nodeName,r[o].nodeValue);return e.form&&this.on(e.form,"reset",function(e){e.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(i))}.bind(this)),e.classList.add("medium-editor-hidden"),e.parentNode.insertBefore(t,e),t}function E(t,i){if(!t.getAttribute("data-medium-editor-element")){"textarea"===t.nodeName.toLowerCase()&&(t=w.call(this,t),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=a.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),this.options.disableEditing||t.getAttribute("data-disable-editing")||(t.setAttribute("contentEditable",!0),t.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(t.getAttribute("data-disable-return")||t.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),this.options.disableReturn||t.getAttribute("data-disable-return")||this.on(t,"keyup",o.bind(this));var r=e.util.guid();t.setAttribute("data-medium-editor-element",!0),t.classList.add("medium-editor-element"),t.setAttribute("role","textbox"),t.setAttribute("aria-multiline",!0),t.setAttribute("data-medium-editor-editor-index",i),t.setAttribute("medium-editor-index",r),A[r]=t.innerHTML,this.events.attachAllEventsToElement(t)}return t}function C(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",r.bind(this)),this.subscribe("editableKeydownEnter",r.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",t.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function x(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(e){"toolbar"!==e&&this.options.extensions[e]&&this.extensions.push(d(this.options.extensions[e],e,this))},this),y.call(this)){var t=this.options.fileDragging;t||(t={},v.call(this)||(t.allowedTypes=[])),this.addBuiltInExtension("fileDragging",t)}var n={paste:!0,"anchor-preview":p.call(this),autoLink:g.call(this),keyboardCommands:b.call(this),placeholder:m.call(this)};Object.keys(n).forEach(function(e){n[e]&&this.addBuiltInExtension(e)},this);var i=this.options.extensions.toolbar;if(!i&&f.call(this)){var r=e.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});i=new e.extensions.toolbar(r)}i&&this.extensions.push(d(i,"toolbar",this))}function _(t,n){var i=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return n&&i.forEach(function(t){n.hasOwnProperty(t[0])&&void 0!==n[t[0]]&&e.util.deprecated(t[0],t[1],"v6.0.0")}),e.util.defaults({},n,t)}function T(t,n){var i,r,o=/^append-(.+)$/gi,a=/justify([A-Za-z]*)$/g;if(i=o.exec(t))return e.util.execFormatBlock(this.options.ownerDocument,i[1]);if("fontSize"===t)return n.size&&e.util.deprecated(".size option for fontSize command",".value","6.0.0"),r=n.value||n.size,this.options.ownerDocument.execCommand("fontSize",!1,r);if("fontName"===t)return n.name&&e.util.deprecated(".name option for fontName command",".value","6.0.0"),r=n.value||n.name,this.options.ownerDocument.execCommand("fontName",!1,r);if("createLink"===t)return this.createLink(n);if("image"===t){var s=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,s)}if(a.exec(t)){var l=this.options.ownerDocument.execCommand(t,!1,null),c=e.selection.getSelectedParentElement(e.selection.getSelectionRange(this.options.ownerDocument));return c&&S.call(this,e.util.getTopBlockContainer(c)),l}return r=n&&n.value,this.options.ownerDocument.execCommand(t,!1,r)}function S(t){if(t){var n,i=Array.prototype.slice.call(t.childNodes).filter(function(e){var t="div"===e.nodeName.toLowerCase();return t&&!n&&(n=e.style.textAlign),t});i.length&&(this.saveSelection(),i.forEach(function(t){if(t.style.textAlign===n){var i=t.lastChild;if(i){e.util.unwrap(t,this.options.ownerDocument);var r=this.options.ownerDocument.createElement("BR");i.parentNode.insertBefore(r,i.nextSibling)}}},this),t.style.textAlign=n,this.restoreSelection())}}var A={};e.prototype={init:function(e,t){return this.options=_.call(this,this.defaults,t),this.origElements=e,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(s.call(this,this.options.contentWindow),this.events=new e.Events(this),this.elements=[],this.addElements(this.origElements),0!==this.elements.length&&(this.isActive=!0,x.call(this),C.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(e){"function"==typeof e.destroy&&e.destroy()},this),this.events.destroy(),this.elements.forEach(function(e){this.options.spellcheck&&(e.innerHTML=e.innerHTML),e.removeAttribute("contentEditable"),e.removeAttribute("spellcheck"),e.removeAttribute("data-medium-editor-element"),e.classList.remove("medium-editor-element"),e.removeAttribute("role"),e.removeAttribute("aria-multiline"),e.removeAttribute("medium-editor-index"),e.removeAttribute("data-medium-editor-editor-index"),e.getAttribute("medium-editor-textarea-id")&&u(e)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,l.call(this,this.options.contentWindow))},on:function(e,t,n,i){return this.events.attachDOMEvent(e,t,n,i),this},off:function(e,t,n,i){return this.events.detachDOMEvent(e,t,n,i),this},subscribe:function(e,t){return this.events.attachCustomEvent(e,t),this},unsubscribe:function(e,t){return this.events.detachCustomEvent(e,t),this},trigger:function(e,t,n){return this.events.triggerCustomEvent(e,t,n),this},delay:function(e){var t=this;return setTimeout(function(){t.isActive&&e()},this.options.delay)},serialize:function(){var e,t,n={},i=this.elements.length;for(e=0;e<i;e+=1)t=""!==this.elements[e].id?this.elements[e].id:"element-"+e,n[t]={value:this.elements[e].innerHTML.trim()};return n},getExtensionByName:function(e){var t;return this.extensions&&this.extensions.length&&this.extensions.some(function(n){return n.name===e&&(t=n,!0)}),t},addBuiltInExtension:function(t,n){var i,r=this.getExtensionByName(t);if(r)return r;switch(t){case"anchor":i=e.util.extend({},this.options.anchor,n),r=new e.extensions.anchor(i);break;case"anchor-preview":r=new e.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":r=new e.extensions.autoLink;break;case"fileDragging":r=new e.extensions.fileDragging(n);break;case"fontname":r=new e.extensions.fontName(this.options.fontName);break;case"fontsize":r=new e.extensions.fontSize(n);break;case"keyboardCommands":r=new e.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":r=new e.extensions.paste(this.options.paste);break;case"placeholder":r=new e.extensions.placeholder(this.options.placeholder);break;default:e.extensions.button.isBuiltInButton(t)&&(n?(i=e.util.defaults({},n,e.extensions.button.prototype.defaults[t]),r=new e.extensions.button(i)):r=new e.extensions.button(t))}return r&&this.extensions.push(d(r,t,this)),r},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var e=this.getExtensionByName("toolbar");
return e&&e.checkState(),this},queryCommandState:function(e){var t,n=/^full-(.+)$/gi,i=null;t=n.exec(e),t&&(e=t[1]);try{i=this.options.ownerDocument.queryCommandState(e)}catch(e){i=null}return i},execAction:function(t,n){var i,r,o=/^full-(.+)$/gi;return i=o.exec(t),i?(this.saveSelection(),this.selectAllContents(),r=T.call(this,i[1],n),this.restoreSelection()):r=T.call(this,t,n),"insertunorderedlist"!==t&&"insertorderedlist"!==t||e.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),r},getSelectedParentElement:function(t){return void 0===t&&(t=this.options.contentWindow.getSelection().getRangeAt(0)),e.selection.getSelectedParentElement(t)},selectAllContents:function(){var t=e.selection.getSelectionElement(this.options.contentWindow);if(t){for(;1===t.children.length;)t=t.children[0];this.selectElement(t)}},selectElement:function(t){e.selection.selectNode(t,this.options.ownerDocument);var n=e.selection.getSelectionElement(this.options.contentWindow);n&&this.events.focusElement(n)},getFocusedElement:function(){var e;return this.elements.some(function(t){return!e&&t.getAttribute("data-medium-focused")&&(e=t),!!e},this),e},exportSelection:function(){var t=e.selection.getSelectionElement(this.options.contentWindow),n=this.elements.indexOf(t),i=null;return n>=0&&(i=e.selection.exportSelection(t,this.options.ownerDocument)),null!==i&&0!==n&&(i.editableElementIndex=n),i},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(t,n){if(t){var i=this.elements[t.editableElementIndex||0];e.selection.importSelection(t,i,this.options.ownerDocument,n)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(t){var n,i=e.selection.getSelectionElement(this.options.contentWindow),r={};if(this.elements.indexOf(i)!==-1){try{if(this.events.disableCustomEvent("editableInput"),t.url&&e.util.deprecated(".url option for createLink",".value","6.0.0"),n=t.url||t.value,n&&n.trim().length>0){var o=this.options.contentWindow.getSelection();if(o){var a,s,l,c,u=o.getRangeAt(0),h=u.commonAncestorContainer;if(3===u.endContainer.nodeType&&3!==u.startContainer.nodeType&&0===u.startOffset&&u.startContainer.firstChild===u.endContainer&&(h=u.endContainer),s=e.util.getClosestBlockContainer(u.startContainer),l=e.util.getClosestBlockContainer(u.endContainer),3!==h.nodeType&&0!==h.textContent.length&&s===l){var d=s||i,f=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),a=this.exportSelection(),f.appendChild(d.cloneNode(!0)),i===d?e.selection.select(this.options.ownerDocument,d.firstChild,0,d.lastChild,3===d.lastChild.nodeType?d.lastChild.nodeValue.length:d.lastChild.childNodes.length):e.selection.select(this.options.ownerDocument,d,0,d,d.childNodes.length);var p=this.exportSelection();c=e.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,f,{start:a.start-p.start,end:a.end-p.start,editableElementIndex:a.editableElementIndex}),0===c.length&&(f=this.options.ownerDocument.createDocumentFragment(),f.appendChild(h.cloneNode(!0)),c=[f.firstChild.firstChild,f.firstChild.lastChild]),e.util.createLink(this.options.ownerDocument,c,n.trim());var m=(f.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;e.util.insertHTMLCommand(this.options.ownerDocument,f.firstChild.innerHTML.replace(/^\s+/,"")),a.start-=m,a.end-=m,this.importSelection(a)}else this.options.ownerDocument.execCommand("createLink",!1,n);this.options.targetBlank||"_blank"===t.target?e.util.setTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),n):e.util.removeTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),n),t.buttonClass&&e.util.addClassToAnchors(e.selection.getSelectionStart(this.options.ownerDocument),t.buttonClass)}}if(this.options.targetBlank||"_blank"===t.target||t.buttonClass){r=this.options.ownerDocument.createEvent("HTMLEvents"),r.initEvent("input",!0,!0,this.options.contentWindow);for(var g=0,v=this.elements.length;g<v;g+=1)this.elements[g].dispatchEvent(r)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",r,i)}},cleanPaste:function(e){this.getExtensionByName("paste").cleanPaste(e)},pasteHTML:function(e,t){this.getExtensionByName("paste").pasteHTML(e,t)},setContent:function(e,t){if(t=t||0,this.elements[t]){var n=this.elements[t];n.innerHTML=e,this.checkContentChanged(n)}},getContent:function(e){return e=e||0,this.elements[e]?this.elements[e].innerHTML.trim():null},checkContentChanged:function(t){t=t||e.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(t,{target:t,currentTarget:t})},resetContent:function(e){if(e){var t=this.elements.indexOf(e);return void(t!==-1&&this.setContent(A[e.getAttribute("medium-editor-index")],t))}this.elements.forEach(function(e,t){this.setContent(A[e.getAttribute("medium-editor-index")],t)},this)},addElements:function(e){var t=c(e,this.options.ownerDocument,!0);return 0!==t.length&&void t.forEach(function(e){e=E.call(this,e,this.id),this.elements.push(e),this.trigger("addElement",{target:e,currentTarget:e},e)},this)},removeElements:function(e){var t=c(e,this.options.ownerDocument),n=t.map(function(e){return e.getAttribute("medium-editor-textarea-id")&&e.parentNode?e.parentNode.querySelector('div[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]'):e});this.elements=this.elements.filter(function(e){return n.indexOf(e)===-1||(this.events.cleanupElement(e),e.getAttribute("medium-editor-textarea-id")&&u(e),this.trigger("removeElement",{target:e,currentTarget:e},e),!1)},this)}},e.getEditorFromElement=function(e){var t=e.getAttribute("data-medium-editor-editor-index"),n=e&&e.ownerDocument&&(e.ownerDocument.defaultView||e.ownerDocument.parentWindow);return n&&n._mediumEditors&&n._mediumEditors[t]?n._mediumEditors[t]:null}}(),function(){e.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),e.parseVersionString=function(e){var t=e.split("-"),n=t[0].split("."),i=t.length>1?t[1]:"";return{major:parseInt(n[0],10),minor:parseInt(n[1],10),revision:parseInt(n[2],10),preRelease:i,toString:function(){return[n[0],n[1],n[2]].join(".")+(i?"-"+i:"")}}},e.version=e.parseVersionString.call(this,{version:"5.22.1"}.version),e}())}).call(t,n(578)(e),n(112))},749:function(e,t,n){"use strict";var i=n(174),r=n(193)(i),o=n(750),a=n(200),s=n(205)("stores/hub-store"),l=n(209).checkClientError,c=n(581),u=n(751),h=n(172);e.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{hub:{},members:[],layers:[],logoImage:null,bannerImage:null,logoImageInfo:null,bannerImageInfo:null,hasLogoImage:!1,hasBannerImage:!1,unsavedChanges:!1,saving:!1}},reset:function(){this.setState(this.getInitialState())},storeDidUpdate:function(){s("store updated")},loadHub:function(e){s("load hub"),this.setState({hub:e})},loadMembers:function(e){s("load members"),this.setState({members:e})},loadLayers:function(e){s("load layers"),this.setState({layers:e})},createHub:function(e,t,n,i){s("create hub");var r=this;a.post("/api/hub/create").type("json").accept("json").send({hub_id:e,name:t,published:n}).end(function(o,a){l(a,o,i,function(i){var o={hub_id:e,name:t,published:n};r.setState({hub:o}),r.trigger(r.state),i(null)})})},saveHub:function(e){s("save hub");var t=this,n="/hub/"+this.state.hub.hub_id;this.setState({saving:!0}),a.post(n+"/api/save").type("json").accept("json").send({hub_id:this.state.hub.hub_id,name:this.state.hub.name,description:this.state.hub.description,tagline:this.state.hub.tagline,resources:this.state.hub.resources,about:this.state.hub.about,published:this.state.hub.published,style:this.state.hub.map_style,basemap:this.state.hub.basemap,position:this.state.hub.map_position,layers:this.state.layers,logoImage:this.state.logoImage,logoImageInfo:this.state.logoImageInfo,bannerImage:this.state.bannerImage,bannerImageInfo:this.state.bannerImageInfo}).end(function(n,i){l(i,n,e,function(e){t.setState({saving:!1,unsavedChanges:!1}),e(null)})})},deleteHub:function(e){var t=this;s("delete hub");var n="/hub/"+this.state.hub.hub_id;a.post(n+"/api/delete").type("json").accept("json").send({hub_id:this.state.hub.hub_id}).end(function(n,i){l(i,n,e,function(e){t.setState({hub:{}}),t.trigger(t.state),e(null)})})},setMap:function(e,t,n,i){var r=this.state.hub;r.map_style=t,r.map_position=n,r.basemap=i,this.setState({hub:r,layers:e,unsavedChanges:!0}),this.trigger(this.state)},saveMap:function(e){s("save hub map");var t=this;this.setState({saving:!0});var n="/hub/"+this.state.hub.hub_id;a.post(n+"/api/savemap").type("json").accept("json").send({style:this.state.hub.map_style,basemap:this.state.hub.basemap,layers:this.state.layers,position:this.state.hub.map_position}).end(function(n,i){l(i,n,e,function(e){var n=t.state.hub;t.setState({hub:n,saving:!1}),t.trigger(t.state),e(null)})})},setHubLogoImage:function(e,t){var n=this.state.hub;n.hasLogoImage=!0,this.setState({logoImage:e,logoImageInfo:t,unsavedChanges:!0,hub:n})},saveHubLogoImage:function(e){s("save hub logo image");var t=this,n="/hub/"+this.state.hub.hub_id;a.post(n+"/api/setphoto").type("json").accept("json").send({hub_id:this.state.hub.hub_id,image:this.state.logoImage,info:this.state.logoImageInfo,type:"logo"}).end(function(n,i){l(i,n,e,function(e){var n=t.state.hub;n.hasLogoImage=!0,t.setState({hub:n}),t.trigger(t.state),e(null)})})},setHubBannerImage:function(e,t){var n=this.state.hub;n.hasBannerImage=!0,this.setState({bannerImage:e,bannerImageInfo:t,unsavedChanges:!0,hub:n})},saveHubBannerImage:function(e){s("set hub banner image");var t=this,n="/hub/"+this.state.hub.hub_id;a.post(n+"/api/setphoto").type("json").accept("json").send({hub_id:this.state.hub.hub_id,image:this.state.bannerImage,info:this.state.bannerImageInfo,type:"banner"}).end(function(n,i){l(i,n,e,function(e){var n=t.state.hub;n.hasBannerImage=!0,t.setState({hub:n}),t.trigger(t.state),e(null)})})},setTitle:function(e){var t=this.state.hub;t.name=e,this.setState({hub:t,unsavedChanges:!0})},publish:function(e){var t=this.state.hub;t.published=!0,this.setState({hub:t,unsavedChanges:!0}),this.trigger(this.state),this.saveHub(e)},setTagline:function(e){var t=this.state.hub;t.tagline=e,this.setState({hub:t,unsavedChanges:!0})},setDescription:function(e){var t=this.state.hub;t.description=e,this.setState({hub:t,unsavedChanges:!0})},setResources:function(e){var t=this.state.hub;t.resources=e,this.setState({hub:t,unsavedChanges:!0})},setAbout:function(e){var t=this.state.hub;t.about=e,this.setState({hub:t,unsavedChanges:!0})},addMember:function(e,t,n){s("add member");var i=this,r="/hub/"+this.state.hub.hub_id;a.post(r+"/api/addmember").type("json").accept("json").send({hub_id:this.state.hub.hub_id,display_name:e,asAdmin:t}).end(function(e,t){l(t,e,n,function(e){i.reloadMembers(e)})})},removeMember:function(e,t){s("remove member");var n=this,i="/hub/"+this.state.hub.hub_id;a.post(i+"/api/removemember").type("json").accept("json").send({hub_id:this.state.hub.hub_id,user_id:e}).end(function(e,i){l(i,e,t,function(e){n.reloadMembers(e)})})},setMemberAdmin:function(e,t){s("set member admin");var n=this,i="/hub/"+this.state.hub.hub_id;a.post(i+"/api/updatememberrole").type("json").accept("json").send({hub_id:this.state.hub.hub_id,user_id:e,role:"Administrator"}).end(function(e,i){l(i,e,t,function(e){n.reloadMembers(e)})})},removeMemberAdmin:function(e,t){s("remove member admin");var n=this,i="/hub/"+this.state.hub.hub_id;a.post(i+"/api/updatememberrole").type("json").accept("json").send({hub_id:this.state.hub.hub_id,user_id:e,role:"Member"}).end(function(e,i){l(i,e,t,function(e){n.reloadMembers(e)})})},reloadMembers:function(e){s("reload members");var t=this,n="/hub/"+this.state.hub.hub_id;a.get(n+"/api/members").type("json").accept("json").end(function(n,i){l(i,n,e,function(e){t.loadMembers(i.body.members),e(null)})})},addLayer:function(e,t,n){s("add layer");var i=this,r="/hub/"+this.state.hub.hub_id;a.post(r+"/api/addlayer").type("json").accept("json").send({hub_id:this.state.hub.hub_id,layer_id:e,active:t}).end(function(e,t){l(t,e,n,function(e){i.reloadLayers(e)})})},removeLayer:function(e,t){s("remove member");var n=this,i="/hub/"+this.state.hub.hub_id;a.post(i+"/api/removelayer").type("json").accept("json").send({hub_id:this.state.hub.hub_id,layer_id:e}).end(function(e,i){l(i,e,t,function(e){n.reloadLayers(e)})})},reloadLayers:function(e){s("reload layers");var t=this,n="/hub/"+this.state.hub.hub_id;a.get(n+"/api/hub/"+this.state.hub.hub_id+"/layers").type("json").accept("json").end(function(n,i){l(i,n,e,function(e){t.loadLayers(i.body.layers),e(null)})})},toggleVisibility:function(e,t){var n=this.state.layers,i=c(n,{layer_id:e});n[i].active?n[i].active=!1:n[i].active=!0,this.updateMap(n),t()},moveUp:function(e){var t=c(this.state.layers,{layer_id:e});if(0!==t){var n=this.move(this.state.layers,t,t-1);this.updateMap(n)}},moveDown:function(e){var t=c(this.state.layers,{layer_id:e});if(t!==this.state.layers.length-1){var n=this.move(this.state.layers,t,t+1);this.updateMap(n)}},move:function(e,t,n){return e.splice(n,0,e.splice(t,1)[0]),e},updateMap:function(e){var t=this.buildMapStyle(e),n=this.state.hub;n.map_style=t,this.setState({layers:e,hub:n}),this.trigger(this.state)},buildMapStyle:function(e){var t={sources:{},layers:[]};return u(e,function(e){e.map_style||(e.map_style=e.style);var n=e.map_style;n&&n.sources&&n.layers?(void 0!=e.active&&0==e.active?n.layers.forEach(function(e){e.layout={visibility:"none"}}):n.layers.forEach(function(e){e.layout={visibility:"visible"}}),h.extend(t.sources,n.sources),t.layers=t.layers.concat(n.layers)):s("Not added to map, incomplete style for layer: "+e.layer_id)}),t}})},750:function(e,t,n){"use strict";var i=n(174),r=i.createActions({loadHub:{},loadMembers:{},loadLayers:{},createHub:{},saveHub:{},setTitle:{},setTagline:{},setDescription:{},setResources:{},setAbout:{},setHubLogoImage:{},setHubBannerImage:{},addMember:{},removeMember:{},setMemberAdmin:{},removeMemberAdmin:{},setMap:{},saveMap:{},deleteHub:{},publish:{},moveUp:{},moveDown:{},toggleVisibility:{}});e.exports=r},751:function(e,t){function n(e,t){for(var n=e?e.length:0;n--&&t(e[n],n,e)!==!1;);return e}function i(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function r(e,t){return function(n){return e(t(n))}}function o(e,t){var n=B(e)||f(e)?i(e.length,String):[],r=n.length,o=!!r;for(var a in e)!t&&!k.call(e,a)||o&&("length"==a||u(a,r))||n.push(a);return n}function a(e,t){return e&&L(e,t,w)}function s(e){if(!h(e))return P(e);var t=[];for(var n in Object(e))k.call(e,n)&&"constructor"!=n&&t.push(n);return t}function l(e,t){return function(n,i){if(null==n)return n;if(!p(n))return e(n,i);for(var r=n.length,o=t?r:-1,a=Object(n);(t?o--:++o<r)&&i(a[o],o,a)!==!1;);return n}}function c(e){return function(t,n,i){for(var r=-1,o=Object(t),a=i(t),s=a.length;s--;){var l=a[e?s:++r];if(n(o[l],l,o)===!1)break}return t}}function u(e,t){return t=null==t?C:t,!!t&&("number"==typeof e||S.test(e))&&e>-1&&e%1==0&&e<t}function h(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||A;return e===n}function d(e,t){var i=B(e)?n:R;return i(e,"function"==typeof t?t:E)}function f(e){return m(e)&&k.call(e,"callee")&&(!D.call(e,"callee")||N.call(e)==x)}function p(e){return null!=e&&v(e.length)&&!g(e)}function m(e){return y(e)&&p(e)}function g(e){var t=b(e)?N.call(e):"";return t==_||t==T}function v(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=C}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){return!!e&&"object"==typeof e}function w(e){return p(e)?o(e):s(e)}function E(e){return e}var C=9007199254740991,x="[object Arguments]",_="[object Function]",T="[object GeneratorFunction]",S=/^(?:0|[1-9]\d*)$/,A=Object.prototype,k=A.hasOwnProperty,N=A.toString,D=A.propertyIsEnumerable,P=r(Object.keys,Object),R=l(a,!0),L=c(!0),B=Array.isArray;e.exports=d},816:function(e,t){},818:function(e,t){},1140:function(e,t,n){"use strict";var i=n(1),r=n(577),o=i.createClass({displayName:"HubEditButton",propTypes:{editing:i.PropTypes.bool.isRequired,startEditing:i.PropTypes.func.isRequired,stopEditing:i.PropTypes.func.isRequired,style:i.PropTypes.object},getDefaultProps:function(){return{style:{}}},shouldComponentUpdate:function(e,t){return!r(this.props,e)||!r(this.state,t)},render:function(){var e="";return e=this.props.editing?i.createElement("a",{onClick:this.props.stopEditing,className:"btn-floating btn-large omh-accent-text"},i.createElement("i",{className:"large material-icons"},"save")):i.createElement("a",{onClick:this.props.startEditing,className:"btn-floating btn-large omh-accent-text"},i.createElement("i",{className:"large material-icons"},"mode_edit")),i.createElement("div",{style:this.props.style,className:"fixed-action-btn action-button-bottom-right"},e)}});e.exports=o},1165:function(e,t,n){(function(e,n){function i(e,t){return null==e?void 0:e[t]}function r(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function o(e,t){return function(n){return e(t(n))}}function a(e){return q.call(e)}function s(e){if(!b(e)||c(e))return!1;var t=g(e)||r(e)?X:R;return t.test(h(e))}function l(e,t){var n=i(e,t);return s(n)?n:void 0}function c(e){return!!z&&z in e}function u(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||U;return e===n}function h(e){if(null!=e){try{return W.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function d(e){return p(e)&&Y.call(e,"callee")&&(!G.call(e,"callee")||q.call(e)==C)}function f(e){return null!=e&&v(e.length)&&!g(e)}function p(e){return y(e)&&f(e)}function m(e){if(f(e)&&(ce(e)||"string"==typeof e||"function"==typeof e.splice||ue(e)||d(e)))return!e.length;var t=le(e);if(t==T||t==k)return!e.size;if(ne||u(e))return!$(e).length;for(var n in e)if(Y.call(e,n))return!1;return!0}function g(e){var t=b(e)?q.call(e):"";return t==x||t==_}function v(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=E}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){return!!e&&"object"==typeof e}function w(){return!1}var E=9007199254740991,C="[object Arguments]",x="[object Function]",_="[object GeneratorFunction]",T="[object Map]",S="[object Object]",A="[object Promise]",k="[object Set]",N="[object WeakMap]",D="[object DataView]",P=/[\\^$.*+?()[\]{}|]/g,R=/^\[object .+?Constructor\]$/,L="object"==typeof e&&e&&e.Object===Object&&e,B="object"==typeof self&&self&&self.Object===Object&&self,M=L||B||Function("return this")(),I="object"==typeof t&&t&&!t.nodeType&&t,O=I&&"object"==typeof n&&n&&!n.nodeType&&n,F=O&&O.exports===I,j=Function.prototype,U=Object.prototype,H=M["__core-js_shared__"],z=function(){var e=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),W=j.toString,Y=U.hasOwnProperty,q=U.toString,X=RegExp("^"+W.call(Y).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=F?M.Buffer:void 0,G=U.propertyIsEnumerable,V=K?K.isBuffer:void 0,$=o(Object.keys,Object),J=l(M,"DataView"),Q=l(M,"Map"),Z=l(M,"Promise"),ee=l(M,"Set"),te=l(M,"WeakMap"),ne=!G.call({valueOf:1},"valueOf"),ie=h(J),re=h(Q),oe=h(Z),ae=h(ee),se=h(te),le=a;(J&&le(new J(new ArrayBuffer(1)))!=D||Q&&le(new Q)!=T||Z&&le(Z.resolve())!=A||ee&&le(new ee)!=k||te&&le(new te)!=N)&&(le=function(e){var t=q.call(e),n=t==S?e.constructor:void 0,i=n?h(n):void 0;if(i)switch(i){case ie:return D;case re:return T;case oe:return A;case ae:return k;case se:return N}return t});var ce=Array.isArray,ue=V||w;n.exports=m}).call(t,function(){return this}(),n(578)(e))},1177:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(745),o=i(r),a=n(1),s=n(174),l=n(193)(s),c=n(749),u=n(750),h=n(233),d=n(235),f=n(577),p=a.createClass({displayName:"HubResources",mixins:[l.connect(c),l.connect(h)],__:function(e){return d.getLocaleString(this.state.locale,e)},propTypes:{editing:a.PropTypes.bool},getDefaultProps:function(){return{editing:!1}},shouldComponentUpdate:function(e,t){return!f(this.props,e)||!f(this.state,t)},handleResourcesChange:function(e){u.setResources(e)},render:function(){var e="";return e=this.props.editing?a.createElement("div",{className:"row"},a.createElement(o.default,{className:"hub-resources",text:this.state.hub.resources,onChange:this.handleResourcesChange,options:{buttonLabels:"fontawesome",delay:100,placeholder:{text:this.__("Enter text, links to webpages, links to documents (from Dropbox, Google Docs, etc.)")},buttons:["bold","italic","underline","anchor","h5","justifyLeft","justifyCenter","justifyRight","quote","orderedlist","unorderedlist","pre","removeFormat"]}})):a.createElement("div",{className:"resource-content col s12",dangerouslySetInnerHTML:{__html:this.state.hub.resources}}),a.createElement("div",{className:"row",style:{marginLeft:"0px"}},e)}});e.exports=p},1179:function(e,t,n){"use strict";var i=n(1),r=n(1165),o=n(744),a=n(743),s=n(1140),l=n(1177),c=n(174),u=n(193)(c),h=n(749),d=n(750),f=n(253),p=n(248),m=n(241),g=n(249),v=n(254),b=n(233),y=n(235),w=n(258),E=i.createClass({displayName:"HubResourcesPage",mixins:[u.connect(h,{initWithProps:["hub"]}),u.connect(b,{initWithProps:["locale","_csrf"]})],propTypes:{hub:i.PropTypes.object,canEdit:i.PropTypes.bool,locale:i.PropTypes.string.isRequired},__:function(e){return y.getLocaleString(this.state.locale,e)},getDefaultProps:function(){return{hub:{name:"Unknown"},resources:[],canEdit:!1}},getInitialState:function(){return{editing:!1}},componentDidMount:function(){var e=this;window.onbeforeunload=function(){if(e.state.editing)return e.__("You have not saved the edits for your hub, your changes will be lost.")}},startEditing:function(){this.setState({editing:!0})},stopEditing:function(){var e=this;d.saveHub(function(t){t?f.showMessage({title:e.__("Server Error"),message:t}):(p.showNotification({message:e.__("Hub Saved")}),e.setState({editing:!1}))})},publish:function(){var e=this;this.state.unsavedChanges?f.showMessage({title:e.__("Unsaved Changes"),message:e.__("Please save your changes before publishing.")}):r(this.state.hub.title)||r(this.state.hub.description)||!this.state.hub.hasLogoImage||!this.state.hub.hasBannerImage?f.showMessage({title:e.__("Required Content"),message:e.__("Please complete your hub before publishing. Add a title, description, logo image, and banner image. \n We also recommend adding map layers and publishing your first story.")}):d.publish(function(t){t?f.showMessage({title:e.__("Server Error"),message:t}):p.showNotification({message:e.__("Hub Published")})})},render:function(){var e="",t="";return this.props.canEdit&&(e=i.createElement(s,{editing:this.state.editing,startEditing:this.startEditing,stopEditing:this.stopEditing}),this.state.hub.published||(t=i.createElement("div",{className:"center center-align",style:{margin:"auto",position:"fixed",top:"15px",right:"calc(50% - 60px)"}},i.createElement("button",{className:"waves-effect waves-light btn",onClick:this.publish},this.__("Publish"))))),i.createElement("div",null,i.createElement(a,{hubid:this.props.hub.hub_id,canEdit:this.props.canEdit}),i.createElement("main",{style:{marginTop:"0px"}},t,i.createElement("div",{className:"row"},i.createElement(o,{editing:!1,hubid:this.props.hub.hub_id,subPage:!0})),i.createElement("div",{className:"container"},i.createElement(l,{editing:this.state.editing})),e,i.createElement(w,null)),i.createElement(m,null),i.createElement(g,null),i.createElement(v,null))}});e.exports=E}});