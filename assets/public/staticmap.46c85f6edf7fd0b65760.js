webpackJsonp([46],[function(t,e,n){"use strict";var i=n(1),r=n(28);n(304),n(172),n(600);var o=n(1598);n(800),n(802),document.addEventListener("DOMContentLoaded",function(){var t=window.__appData;r.render(i.createElement(o,t),document.querySelector("#app"))})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(206);t.exports=function(t){return i("maphubs:"+t)}},,,,function(t,e,n){"use strict";var i=n(205)("clientError");t.exports={checkClientError:function(t,e,n,r){e&&t&&t.body&&t.body.error?(i(t.body.error),n(t.body.error)):e?(i(e.message),n(e.message)):t&&t.body&&void 0!==t.body.success&&0==t.body.success?t.body.error?(i(t.body.error),n(t.body.error)):(i("unknown error"),n("unknown error")):t.body.error?(i(t.body.error),n(t.body.error)):r(t.body.success?n:n)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(174),r=n(193)(i),o=n(271),s=n(200),a=n(205)("stores/local-store"),u=n(209).checkClientError;t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{locale:"en",_csrf:null}},reset:function(){this.setState(this.getInitialState())},storeDidUpdate:function(){a("store updated")},changeLocale:function(t){var e=this;s.post("/api/user/setlocale").type("json").accept("json").send({locale:t}).end(function(n,i){u(i,n,function(n){n?a(n):(a("changed locale to: "+t),e.setState({locale:t}),e.trigger(e.state))},function(t){t()})})}})},function(t,e,n){"use strict";var i=n(174),r=i.createActions({changeLocale:{}});t.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){(function(t){"use strict";function e(t,e,n){t[e]||Object[i](t,e,{writable:!0,configurable:!0,value:n})}if(n(305),n(596),n(597),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var i="defineProperty";e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(e,function(){return this}())},function(t,e,n){n(306),n(355),n(356),n(357),n(358),n(360),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(373),n(375),n(377),n(379),n(382),n(383),n(384),n(388),n(390),n(392),n(395),n(396),n(397),n(398),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(408),n(409),n(410),n(412),n(413),n(414),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(434),n(435),n(439),n(440),n(441),n(442),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(462),n(463),n(469),n(470),n(472),n(473),n(474),n(478),n(479),n(480),n(481),n(482),n(484),n(485),n(486),n(487),n(490),n(492),n(493),n(494),n(496),n(498),n(500),n(501),n(502),n(504),n(505),n(506),n(507),n(514),n(517),n(518),n(520),n(521),n(524),n(525),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(547),n(548),n(549),n(550),n(551),n(552),n(554),n(555),n(556),n(557),n(558),n(559),n(560),n(561),n(563),n(564),n(566),n(567),n(568),n(569),n(572),n(573),n(574),n(575),n(576),n(577),n(578),n(579),n(581),n(582),n(583),n(584),n(585),n(586),n(587),n(588),n(589),n(590),n(591),n(594),n(595),t.exports=n(312)},function(t,e,n){"use strict";var i=n(307),r=n(308),o=n(309),s=n(311),a=n(321),u=n(325).KEY,l=n(310),c=n(326),h=n(327),f=n(322),p=n(328),d=n(329),g=n(330),m=n(332),y=n(345),v=n(348),_=n(315),x=n(335),b=n(319),E=n(320),w=n(349),S=n(352),I=n(354),C=n(314),T=n(333),N=I.f,L=C.f,M=S.f,P=i.Symbol,A=i.JSON,R=A&&A.stringify,O="prototype",F=p("_hidden"),D=p("toPrimitive"),z={}.propertyIsEnumerable,k=c("symbol-registry"),B=c("symbols"),j=c("op-symbols"),V=Object[O],G="function"==typeof P,U=i.QObject,q=!U||!U[O]||!U[O].findChild,X=o&&l(function(){return 7!=w(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=N(V,e);i&&delete V[e],L(t,e,n),i&&t!==V&&L(V,e,i)}:L,Y=function(t){var e=B[t]=w(P[O]);return e._k=t,e},W=G&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},H=function(t,e,n){return t===V&&H(j,e,n),_(t),e=b(e,!0),_(n),r(B,e)?(n.enumerable?(r(t,F)&&t[F][e]&&(t[F][e]=!1),n=w(n,{enumerable:E(0,!1)})):(r(t,F)||L(t,F,E(1,{})),t[F][e]=!0),X(t,e,n)):L(t,e,n)},Z=function(t,e){_(t);for(var n,i=y(e=x(e)),r=0,o=i.length;o>r;)H(t,n=i[r++],e[n]);return t},J=function(t,e){return void 0===e?w(t):Z(w(t),e)},$=function(t){var e=z.call(this,t=b(t,!0));return!(this===V&&r(B,t)&&!r(j,t))&&(!(e||!r(this,t)||!r(B,t)||r(this,F)&&this[F][t])||e)},K=function(t,e){if(t=x(t),e=b(e,!0),t!==V||!r(B,e)||r(j,e)){var n=N(t,e);return!n||!r(B,e)||r(t,F)&&t[F][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=M(x(t)),i=[],o=0;n.length>o;)r(B,e=n[o++])||e==F||e==u||i.push(e);return i},tt=function(t){for(var e,n=t===V,i=M(n?j:x(t)),o=[],s=0;i.length>s;)!r(B,e=i[s++])||n&&!r(V,e)||o.push(B[e]);return o};G||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(j,n),r(this,F)&&r(this[F],t)&&(this[F][t]=!1),X(this,t,E(1,n))};return o&&q&&X(V,t,{configurable:!0,set:e}),Y(t)},a(P[O],"toString",function(){return this._k}),I.f=K,C.f=H,n(353).f=S.f=Q,n(347).f=$,n(346).f=tt,o&&!n(331)&&a(V,"propertyIsEnumerable",$,!0),d.f=function(t){return Y(p(t))}),s(s.G+s.W+s.F*!G,{Symbol:P});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)p(et[nt++]);for(var et=T(p.store),nt=0;et.length>nt;)g(et[nt++]);s(s.S+s.F*!G,"Symbol",{for:function(t){return r(k,t+="")?k[t]:k[t]=P(t)},keyFor:function(t){if(W(t))return m(k,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){q=!0},useSimple:function(){q=!1}}),s(s.S+s.F*!G,"Object",{create:J,defineProperty:H,defineProperties:Z,getOwnPropertyDescriptor:K,getOwnPropertyNames:Q,getOwnPropertySymbols:tt}),A&&s(s.S+s.F*(!G||l(function(){var t=P();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!W(t)){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);return e=i[1],"function"==typeof e&&(n=e),!n&&v(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!W(e))return e}),i[1]=e,R.apply(A,i)}}}),P[O][D]||n(313)(P[O],D,P[O].valueOf),h(P,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){t.exports=!n(310)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(307),r=n(312),o=n(313),s=n(321),a=n(323),u="prototype",l=function(t,e,n){var c,h,f,p,d=t&l.F,g=t&l.G,m=t&l.S,y=t&l.P,v=t&l.B,_=g?i:m?i[e]||(i[e]={}):(i[e]||{})[u],x=g?r:r[e]||(r[e]={}),b=x[u]||(x[u]={});g&&(n=e);for(c in n)h=!d&&_&&void 0!==_[c],f=(h?_:n)[c],p=v&&h?a(f,i):y&&"function"==typeof f?a(Function.call,f):f,_&&s(_,c,f,t&l.U),x[c]!=f&&o(x,c,p),y&&b[c]!=f&&(b[c]=f)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(314),r=n(320);t.exports=n(309)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(315),r=n(317),o=n(319),s=Object.defineProperty;e.f=n(309)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(316);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(309)&&!n(310)(function(){return 7!=Object.defineProperty(n(318)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(316),r=n(307).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){var i=n(316);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(307),r=n(313),o=n(308),s=n(322)("src"),a="toString",u=Function[a],l=(""+u).split(a);n(312).inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,n,a){var u="function"==typeof n;u&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(u&&(o(n,s)||r(n,s,t[e]?""+t[e]:l.join(String(e)))),t===i?t[e]=n:a?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,a,function(){return"function"==typeof this&&this[s]||u.call(this)})},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(324);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(322)("meta"),r=n(316),o=n(308),s=n(314).f,a=0,u=Object.isExtensible||function(){return!0},l=!n(310)(function(){return u(Object.preventExtensions({}))}),c=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},h=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[i].i},f=function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[i].w},p=function(t){return l&&d.NEED&&u(t)&&!o(t,i)&&c(t),t},d=t.exports={KEY:i,NEED:!1,fastKey:h,getWeak:f,onFreeze:p}},function(t,e,n){var i=n(307),r="__core-js_shared__",o=i[r]||(i[r]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var i=n(314).f,r=n(308),o=n(328)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(326)("wks"),r=n(322),o=n(307).Symbol,s="function"==typeof o,a=t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))};a.store=i},function(t,e,n){e.f=n(328)},function(t,e,n){var i=n(307),r=n(312),o=n(331),s=n(329),a=n(314).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e){t.exports=!1},function(t,e,n){var i=n(333),r=n(335);t.exports=function(t,e){for(var n,o=r(t),s=i(o),a=s.length,u=0;a>u;)if(o[n=s[u++]]===e)return n}},function(t,e,n){var i=n(334),r=n(344);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){var i=n(308),r=n(335),o=n(339)(!1),s=n(343)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),u=0,l=[];for(n in a)n!=s&&i(a,n)&&l.push(n);for(;e.length>u;)i(a,n=e[u++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){var i=n(336),r=n(338);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(337);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(335),r=n(340),o=n(342);t.exports=function(t){return function(e,n,s){var a,u=i(e),l=r(u.length),c=o(s,l);if(t&&n!=n){for(;l>c;)if(a=u[c++],a!=a)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var i=n(341),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(341),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(326)("keys"),r=n(322);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(333),r=n(346),o=n(347);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var s,a=n(t),u=o.f,l=0;a.length>l;)u.call(t,s=a[l++])&&e.push(s);return e}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(337);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(315),r=n(350),o=n(344),s=n(343)("IE_PROTO"),a=function(){},u="prototype",l=function(){var t,e=n(318)("iframe"),i=o.length,r="<",s=">";for(e.style.display="none",n(351).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+s+"document.F=Object"+r+"/script"+s),t.close(),l=t.F;i--;)delete l[u][o[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[u]=i(t),n=new a,a[u]=null,n[s]=t):n=l(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(314),r=n(315),o=n(333);t.exports=n(309)?Object.defineProperties:function(t,e){r(t);for(var n,s=o(e),a=s.length,u=0;a>u;)i.f(t,n=s[u++],e[n]);return t}},function(t,e,n){t.exports=n(307).document&&document.documentElement},function(t,e,n){var i=n(335),r=n(353).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return r(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):r(i(t))}},function(t,e,n){var i=n(334),r=n(344).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){var i=n(347),r=n(320),o=n(335),s=n(319),a=n(308),u=n(317),l=Object.getOwnPropertyDescriptor;e.f=n(309)?l:function(t,e){if(t=o(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(a(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(311);i(i.S,"Object",{create:n(349)})},function(t,e,n){var i=n(311);i(i.S+i.F*!n(309),"Object",{defineProperty:n(314).f})},function(t,e,n){var i=n(311);i(i.S+i.F*!n(309),"Object",{defineProperties:n(350)})},function(t,e,n){var i=n(335),r=n(354).f;n(359)("getOwnPropertyDescriptor",function(){return function(t,e){return r(i(t),e)}})},function(t,e,n){var i=n(311),r=n(312),o=n(310);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",s)}},function(t,e,n){var i=n(361),r=n(362);n(359)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(338);t.exports=function(t){return Object(i(t))}},function(t,e,n){var i=n(308),r=n(361),o=n(343)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var i=n(361),r=n(333);n(359)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){n(359)("getOwnPropertyNames",function(){return n(352).f})},function(t,e,n){var i=n(316),r=n(325).onFreeze;n(359)("freeze",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(316),r=n(325).onFreeze;n(359)("seal",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(316),r=n(325).onFreeze;n(359)("preventExtensions",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(316);n(359)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(316);n(359)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(316);n(359)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){var i=n(311);i(i.S+i.F,"Object",{assign:n(372)})},function(t,e,n){"use strict";var i=n(333),r=n(346),o=n(347),s=n(361),a=n(336),u=Object.assign;t.exports=!u||n(310)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=s(t),u=arguments.length,l=1,c=r.f,h=o.f;u>l;)for(var f,p=a(arguments[l++]),d=c?i(p).concat(c(p)):i(p),g=d.length,m=0;g>m;)h.call(p,f=d[m++])&&(n[f]=p[f]);return n}:u},function(t,e,n){var i=n(311);i(i.S,"Object",{is:n(374)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var i=n(311);i(i.S,"Object",{setPrototypeOf:n(376).set})},function(t,e,n){var i=n(316),r=n(315),o=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(323)(Function.call,n(354).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){"use strict";var i=n(378),r={};r[n(328)("toStringTag")]="z",r+""!="[object z]"&&n(321)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(t,e,n){var i=n(337),r=n(328)("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),r))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var i=n(311);i(i.P,"Function",{bind:n(380)})},function(t,e,n){"use strict";var i=n(324),r=n(316),o=n(381),s=[].slice,a={},u=function(t,e,n){if(!(e in a)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";a[e]=Function("F,a","return new F("+i.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=s.call(arguments,1),a=function(){var i=n.concat(s.call(arguments));return this instanceof a?u(e,i.length,i):o(e,i,t)};return r(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(314).f,r=n(320),o=n(308),s=Function.prototype,a=/^\s*function ([^ (]*)/,u="name",l=Object.isExtensible||function(){return!0};u in s||n(309)&&i(s,u,{configurable:!0,get:function(){try{var t=this,e=(""+t).match(a)[1];return o(t,u)||!l(t)||i(t,u,r(5,e)),e}catch(t){return""}}})},function(t,e,n){"use strict";var i=n(316),r=n(362),o=n(328)("hasInstance"),s=Function.prototype;o in s||n(314).f(s,o,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=r(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var i=n(311),r=n(385);i(i.G+i.F*(parseInt!=r),{parseInt:r})},function(t,e,n){var i=n(307).parseInt,r=n(386).trim,o=n(387),s=/^[\-+]?0[xX]/;t.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(t,e){var n=r(String(t),3);return i(n,e>>>0||(s.test(n)?16:10))}:i},function(t,e,n){var i=n(311),r=n(338),o=n(310),s=n(387),a="["+s+"]",u="​",l=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),h=function(t,e,n){var r={},a=o(function(){return!!s[t]()||u[t]()!=u}),l=r[t]=a?e(f):s[t];n&&(r[n]=l),i(i.P+i.F*a,"String",r)},f=h.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(c,"")),t};t.exports=h},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var i=n(311),r=n(389);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},function(t,e,n){var i=n(307).parseFloat,r=n(386).trim;t.exports=1/i(n(387)+"-0")!==-(1/0)?function(t){var e=r(String(t),3),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},function(t,e,n){"use strict";var i=n(307),r=n(308),o=n(337),s=n(391),a=n(319),u=n(310),l=n(353).f,c=n(354).f,h=n(314).f,f=n(386).trim,p="Number",d=i[p],g=d,m=d.prototype,y=o(n(349)(m))==p,v="trim"in String.prototype,_=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():f(e,3);var n,i,r,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+e}for(var s,u=e.slice(2),l=0,c=u.length;l<c;l++)if(s=u.charCodeAt(l),s<48||s>r)return NaN;return parseInt(u,i)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(y?u(function(){m.valueOf.call(n)}):o(n)!=p)?s(new g(_(e)),n,d):_(e)};for(var x,b=n(309)?l(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;b.length>E;E++)r(g,x=b[E])&&!r(d,x)&&h(d,x,c(g,x));d.prototype=m,m.constructor=d,n(321)(i,p,d)}},function(t,e,n){var i=n(316),r=n(376).set;t.exports=function(t,e,n){var o,s=e.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&i(o)&&r&&r(t,o),t}},function(t,e,n){"use strict";var i=n(311),r=n(341),o=n(393),s=n(394),a=1..toFixed,u=Math.floor,l=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",h="0",f=function(t,e){for(var n=-1,i=e;++n<6;)i+=t*l[n],l[n]=i%1e7,i=u(i/1e7)},p=function(t){for(var e=6,n=0;--e>=0;)n+=l[e],l[e]=u(n/t),n=n%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==l[t]){var n=String(l[t]);e=""===e?n:e+s.call(h,7-n.length)+n}return e},g=function(t,e,n){return 0===e?n:e%2===1?g(t,e-1,n*t):g(t*t,e/2,n)},m=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};i(i.P+i.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(310)(function(){a.call({})})),"Number",{toFixed:function(t){var e,n,i,a,u=o(this,c),l=r(t),y="",v=h;if(l<0||l>20)throw RangeError(c);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(y="-",u=-u),u>1e-21)if(e=m(u*g(2,69,1))-69,n=e<0?u*g(2,-e,1):u/g(2,e,1),n*=4503599627370496,e=52-e,e>0){for(f(0,n),i=l;i>=7;)f(1e7,0),i-=7;for(f(g(10,i,1),0),i=e-1;i>=23;)p(1<<23),i-=23;p(1<<i),f(1,1),p(2),v=d()}else f(0,n),f(1<<-e,0),v=d()+s.call(h,l);return l>0?(a=v.length,v=y+(a<=l?"0."+s.call(h,l-a)+v:v.slice(0,a-l)+"."+v.slice(a-l))):v=y+v,v}})},function(t,e,n){var i=n(337);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=i(t))throw TypeError(e);return+t}},function(t,e,n){"use strict";var i=n(341),r=n(338);t.exports=function(t){var e=String(r(this)),n="",o=i(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){"use strict";var i=n(311),r=n(310),o=n(393),s=1..toPrecision;i(i.P+i.F*(r(function(){return"1"!==s.call(1,void 0)})||!r(function(){s.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},function(t,e,n){var i=n(311);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var i=n(311),r=n(307).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,n){var i=n(311);i(i.S,"Number",{isInteger:n(399)})},function(t,e,n){var i=n(316),r=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&r(t)===t}},function(t,e,n){var i=n(311);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(311),r=n(399),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return r(t)&&o(t)<=9007199254740991}})},function(t,e,n){var i=n(311);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var i=n(311);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var i=n(311),r=n(389);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(t,e,n){var i=n(311),r=n(385);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(t,e,n){var i=n(311),r=n(407),o=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:r(t-1+o(t-1)*o(t+1))}})},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){function i(t){return isFinite(t=+t)&&0!=t?t<0?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}var r=n(311),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:i})},function(t,e,n){var i=n(311),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var i=n(311),r=n(411);i(i.S,"Math",{cbrt:function(t){return r(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){var i=n(311);i(i.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var i=n(311),r=Math.exp;i(i.S,"Math",{cosh:function(t){return(r(t=+t)+r(-t))/2}})},function(t,e,n){var i=n(311),r=n(415);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var i=n(311),r=n(411),o=Math.pow,s=o(2,-52),a=o(2,-23),u=o(2,127)*(2-a),l=o(2,-126),c=function(t){return t+1/s-1/s};i(i.S,"Math",{fround:function(t){var e,n,i=Math.abs(t),o=r(t);return i<l?o*c(i/l/a)*l*a:(e=(1+a/s)*i,n=e-(e-i),n>u||n!=n?o*(1/0):o*n)}})},function(t,e,n){var i=n(311),r=Math.abs;i(i.S,"Math",{hypot:function(t,e){for(var n,i,o=0,s=0,a=arguments.length,u=0;s<a;)n=r(arguments[s++]),u<n?(i=u/n,o=o*i*i+1,u=n):n>0?(i=n/u,o+=i*i):o+=n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,e,n){var i=n(311),r=Math.imul;i(i.S+i.F*n(310)(function(){return r(4294967295,5)!=-5||2!=r.length}),"Math",{imul:function(t,e){var n=65535,i=+t,r=+e,o=n&i,s=n&r;return 0|o*s+((n&i>>>16)*s+o*(n&r>>>16)<<16>>>0)}})},function(t,e,n){var i=n(311);i(i.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,n){var i=n(311);i(i.S,"Math",{log1p:n(407)})},function(t,e,n){var i=n(311);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var i=n(311);i(i.S,"Math",{sign:n(411)})},function(t,e,n){var i=n(311),r=n(415),o=Math.exp;i(i.S+i.F*n(310)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(r(t)-r(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var i=n(311),r=n(415),o=Math.exp;i(i.S,"Math",{tanh:function(t){var e=r(t=+t),n=r(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var i=n(311);i(i.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var i=n(311),r=n(342),o=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,n=[],i=arguments.length,s=0;i>s;){if(e=+arguments[s++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")}})},function(t,e,n){var i=n(311),r=n(335),o=n(340);i(i.S,"String",{raw:function(t){for(var e=r(t.raw),n=o(e.length),i=arguments.length,s=[],a=0;n>a;)s.push(String(e[a++])),a<i&&s.push(String(arguments[a]));return s.join("")}})},function(t,e,n){"use strict";n(386)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var i=n(430)(!0);n(431)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var i=n(341),r=n(338);t.exports=function(t){return function(e,n){var o,s,a=String(r(e)),u=i(n),l=a.length;return u<0||u>=l?t?"":void 0:(o=a.charCodeAt(u),o<55296||o>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):(o-55296<<10)+(s-56320)+65536)}}},function(t,e,n){"use strict";var i=n(331),r=n(311),o=n(321),s=n(313),a=n(308),u=n(432),l=n(433),c=n(327),h=n(362),f=n(328)("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",g="keys",m="values",y=function(){return this};t.exports=function(t,e,n,v,_,x,b){l(n,e,v);var E,w,S,I=function(t){if(!p&&t in L)return L[t];switch(t){case g:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},C=e+" Iterator",T=_==m,N=!1,L=t.prototype,M=L[f]||L[d]||_&&L[_],P=M||I(_),A=_?T?I("entries"):P:void 0,R="Array"==e?L.entries||M:M;if(R&&(S=h(R.call(new t)),S!==Object.prototype&&(c(S,C,!0),i||a(S,f)||s(S,f,y))),T&&M&&M.name!==m&&(N=!0,P=function(){return M.call(this)}),i&&!b||!p&&!N&&L[f]||s(L,f,P),u[e]=P,u[C]=y,_)if(E={values:T?P:I(m),keys:x?P:I(g),entries:A},b)for(w in E)w in L||o(L,w,E[w]);else r(r.P+r.F*(p||N),e,E);return E}},function(t,e){t.exports={}},function(t,e,n){"use strict";var i=n(349),r=n(320),o=n(327),s={};n(313)(s,n(328)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){"use strict";var i=n(311),r=n(430)(!1);i(i.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(311),r=n(340),o=n(436),s="endsWith",a=""[s];i(i.P+i.F*n(438)(s),"String",{endsWith:function(t){var e=o(this,t,s),n=arguments.length>1?arguments[1]:void 0,i=r(e.length),u=void 0===n?i:Math.min(r(n),i),l=String(t);return a?a.call(e,l,u):e.slice(u-l.length,u)===l}})},function(t,e,n){var i=n(437),r=n(338);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},function(t,e,n){var i=n(316),r=n(337),o=n(328)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,n){var i=n(328)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){"use strict";var i=n(311),r=n(436),o="includes";i(i.P+i.F*n(438)(o),"String",{includes:function(t){return!!~r(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var i=n(311);i(i.P,"String",{repeat:n(394)})},function(t,e,n){"use strict";var i=n(311),r=n(340),o=n(436),s="startsWith",a=""[s];i(i.P+i.F*n(438)(s),"String",{startsWith:function(t){var e=o(this,t,s),n=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return a?a.call(e,i,n):e.slice(n,n+i.length)===i}})},function(t,e,n){"use strict";n(443)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){var i=n(311),r=n(310),o=n(338),s=/"/g,a=function(t,e,n,i){var r=String(o(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),a+">"+r+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(a),i(i.P+i.F*r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){"use strict";n(443)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(443)("blink",function(t){return function(){
return t(this,"blink","","")}})},function(t,e,n){"use strict";n(443)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(443)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(443)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(443)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(443)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(443)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(443)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(443)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(443)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(443)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var i=n(311);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var i=n(311),r=n(361),o=n(319);i(i.P+i.F*n(310)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=r(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){"use strict";var i=n(311),r=n(310),o=Date.prototype.getTime,s=function(t){return t>9?t:"0"+t};i(i.P+i.F*(r(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!r(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),i=e<0?"-":e>9999?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+"."+(n>99?n:"0"+s(n))+"Z"}})},function(t,e,n){var i=Date.prototype,r="Invalid Date",o="toString",s=i[o],a=i.getTime;new Date(NaN)+""!=r&&n(321)(i,o,function(){var t=a.call(this);return t===t?s.call(this):r})},function(t,e,n){var i=n(328)("toPrimitive"),r=Date.prototype;i in r||n(313)(r,i,n(461))},function(t,e,n){"use strict";var i=n(315),r=n(319),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return r(i(this),t!=o)}},function(t,e,n){var i=n(311);i(i.S,"Array",{isArray:n(348)})},function(t,e,n){"use strict";var i=n(323),r=n(311),o=n(361),s=n(464),a=n(465),u=n(340),l=n(466),c=n(467);r(r.S+r.F*!n(468)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,h,f=o(t),p="function"==typeof this?this:Array,d=arguments.length,g=d>1?arguments[1]:void 0,m=void 0!==g,y=0,v=c(f);if(m&&(g=i(g,d>2?arguments[2]:void 0,2)),void 0==v||p==Array&&a(v))for(e=u(f.length),n=new p(e);e>y;y++)l(n,y,m?g(f[y],y):f[y]);else for(h=v.call(f),n=new p;!(r=h.next()).done;y++)l(n,y,m?s(h,g,[r.value,y],!0):r.value);return n.length=y,n}})},function(t,e,n){var i=n(315);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var i=n(432),r=n(328)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){"use strict";var i=n(314),r=n(320);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){var i=n(378),r=n(328)("iterator"),o=n(432);t.exports=n(312).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){var i=n(328)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var i=n(311),r=n(466);i(i.S+i.F*n(310)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)r(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var i=n(311),r=n(335),o=[].join;i(i.P+i.F*(n(336)!=Object||!n(471)(o)),"Array",{join:function(t){return o.call(r(this),void 0===t?",":t)}})},function(t,e,n){var i=n(310);t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){"use strict";var i=n(311),r=n(351),o=n(337),s=n(342),a=n(340),u=[].slice;i(i.P+i.F*n(310)(function(){r&&u.call(r)}),"Array",{slice:function(t,e){var n=a(this.length),i=o(this);if(e=void 0===e?n:e,"Array"==i)return u.call(this,t,e);for(var r=s(t,n),l=s(e,n),c=a(l-r),h=Array(c),f=0;f<c;f++)h[f]="String"==i?this.charAt(r+f):this[r+f];return h}})},function(t,e,n){"use strict";var i=n(311),r=n(324),o=n(361),s=n(310),a=[].sort,u=[1,2,3];i(i.P+i.F*(s(function(){u.sort(void 0)})||!s(function(){u.sort(null)})||!n(471)(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),r(t))}})},function(t,e,n){"use strict";var i=n(311),r=n(475)(0),o=n(471)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(t){return r(this,t,arguments[1])}})},function(t,e,n){var i=n(323),r=n(336),o=n(361),s=n(340),a=n(476);t.exports=function(t,e){var n=1==t,u=2==t,l=3==t,c=4==t,h=6==t,f=5==t||h,p=e||a;return function(e,a,d){for(var g,m,y=o(e),v=r(y),_=i(a,d,3),x=s(v.length),b=0,E=n?p(e,x):u?p(e,0):void 0;x>b;b++)if((f||b in v)&&(g=v[b],m=_(g,b,y),t))if(n)E[b]=m;else if(m)switch(t){case 3:return!0;case 5:return g;case 6:return b;case 2:E.push(g)}else if(c)return!1;return h?-1:l||c?c:E}}},function(t,e,n){var i=n(477);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){var i=n(316),r=n(348),o=n(328)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},function(t,e,n){"use strict";var i=n(311),r=n(475)(1);i(i.P+i.F*!n(471)([].map,!0),"Array",{map:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(311),r=n(475)(2);i(i.P+i.F*!n(471)([].filter,!0),"Array",{filter:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(311),r=n(475)(3);i(i.P+i.F*!n(471)([].some,!0),"Array",{some:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(311),r=n(475)(4);i(i.P+i.F*!n(471)([].every,!0),"Array",{every:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(311),r=n(483);i(i.P+i.F*!n(471)([].reduce,!0),"Array",{reduce:function(t){return r(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){var i=n(324),r=n(361),o=n(336),s=n(340);t.exports=function(t,e,n,a,u){i(e);var l=r(t),c=o(l),h=s(l.length),f=u?h-1:0,p=u?-1:1;if(n<2)for(;;){if(f in c){a=c[f],f+=p;break}if(f+=p,u?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:h>f;f+=p)f in c&&(a=e(a,c[f],f,l));return a}},function(t,e,n){"use strict";var i=n(311),r=n(483);i(i.P+i.F*!n(471)([].reduceRight,!0),"Array",{reduceRight:function(t){return r(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var i=n(311),r=n(339)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!n(471)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(311),r=n(335),o=n(341),s=n(340),a=[].lastIndexOf,u=!!a&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(u||!n(471)(a)),"Array",{lastIndexOf:function(t){if(u)return a.apply(this,arguments)||0;var e=r(this),n=s(e.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}})},function(t,e,n){var i=n(311);i(i.P,"Array",{copyWithin:n(488)}),n(489)("copyWithin")},function(t,e,n){"use strict";var i=n(361),r=n(342),o=n(340);t.exports=[].copyWithin||function(t,e){var n=i(this),s=o(n.length),a=r(t,s),u=r(e,s),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?s:r(l,s))-u,s-a),h=1;for(u<a&&a<u+c&&(h=-1,u+=c-1,a+=c-1);c-- >0;)u in n?n[a]=n[u]:delete n[a],a+=h,u+=h;return n}},function(t,e,n){var i=n(328)("unscopables"),r=Array.prototype;void 0==r[i]&&n(313)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){var i=n(311);i(i.P,"Array",{fill:n(491)}),n(489)("fill")},function(t,e,n){"use strict";var i=n(361),r=n(342),o=n(340);t.exports=function(t){for(var e=i(this),n=o(e.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,n),u=s>2?arguments[2]:void 0,l=void 0===u?n:r(u,n);l>a;)e[a++]=t;return e}},function(t,e,n){"use strict";var i=n(311),r=n(475)(5),o="find",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(489)(o)},function(t,e,n){"use strict";var i=n(311),r=n(475)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(489)(o)},function(t,e,n){n(495)("Array")},function(t,e,n){"use strict";var i=n(307),r=n(314),o=n(309),s=n(328)("species");t.exports=function(t){var e=i[t];o&&e&&!e[s]&&r.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var i=n(489),r=n(497),o=n(432),s=n(335);t.exports=n(431)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(307),r=n(391),o=n(314).f,s=n(353).f,a=n(437),u=n(499),l=i.RegExp,c=l,h=l.prototype,f=/a/g,p=/a/g,d=new l(f)!==f;if(n(309)&&(!d||n(310)(function(){return p[n(328)("match")]=!1,l(f)!=f||l(p)==p||"/a/i"!=l(f,"i")}))){l=function(t,e){var n=this instanceof l,i=a(t),o=void 0===e;return!n&&i&&t.constructor===l&&o?t:r(d?new c(i&&!o?t.source:t,e):c((i=t instanceof l)?t.source:t,i&&o?u.call(t):e),n?this:h,l)};for(var g=(function(t){t in l||o(l,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})}),m=s(c),y=0;m.length>y;)g(m[y++]);h.constructor=l,l.prototype=h,n(321)(i,"RegExp",l)}n(495)("RegExp")},function(t,e,n){"use strict";var i=n(315);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";n(501);var i=n(315),r=n(499),o=n(309),s="toString",a=/./[s],u=function(t){n(321)(RegExp.prototype,s,t,!0)};n(310)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?u(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?r.call(t):void 0)}):a.name!=s&&u(function(){return a.call(this)})},function(t,e,n){n(309)&&"g"!=/./g.flags&&n(314).f(RegExp.prototype,"flags",{configurable:!0,get:n(499)})},function(t,e,n){n(503)("match",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){"use strict";var i=n(313),r=n(321),o=n(310),s=n(338),a=n(328);t.exports=function(t,e,n){var u=a(t),l=n(s,u,""[t]),c=l[0],h=l[1];o(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(r(String.prototype,t,c),i(RegExp.prototype,u,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}))}},function(t,e,n){n(503)("replace",2,function(t,e,n){return[function(i,r){"use strict";var o=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]})},function(t,e,n){n(503)("search",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){n(503)("split",2,function(t,e,i){"use strict";var r=n(437),o=i,s=[].push,a="split",u="length",l="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[u]||2!="ab"[a](/(?:ab)*/)[u]||4!="."[a](/(.?)(.?)/)[u]||"."[a](/()()/)[u]>1||""[a](/.?/)[u]){var c=void 0===/()??/.exec("")[1];i=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!r(t))return o.call(n,t,e);var i,a,h,f,p,d=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,y=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,g+"g");for(c||(i=new RegExp("^"+v.source+"$(?!\\s)",g));(a=v.exec(n))&&(h=a.index+a[0][u],!(h>m&&(d.push(n.slice(m,a.index)),!c&&a[u]>1&&a[0].replace(i,function(){for(p=1;p<arguments[u]-2;p++)void 0===arguments[p]&&(a[p]=void 0)}),a[u]>1&&a.index<n[u]&&s.apply(d,a.slice(1)),f=a[0][u],m=h,d[u]>=y)));)v[l]===a.index&&v[l]++;return m===n[u]?!f&&v.test("")||d.push(""):d.push(n.slice(m)),d[u]>y?d.slice(0,y):d}}else"0"[a](void 0,0)[u]&&(i=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(n,r){var o=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},i]})},function(t,e,n){"use strict";var i,r,o,s=n(331),a=n(307),u=n(323),l=n(378),c=n(311),h=n(316),f=n(324),p=n(508),d=n(509),g=n(510),m=n(511).set,y=n(512)(),v="Promise",_=a.TypeError,x=a.process,b=a[v],x=a.process,E="process"==l(x),w=function(){},S=!!function(){try{var t=b.resolve(1),e=(t.constructor={})[n(328)("species")]=function(t){t(w,w)};return(E||"function"==typeof PromiseRejectionEvent)&&t.then(w)instanceof e}catch(t){}}(),I=function(t,e){return t===e||t===b&&e===o},C=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},T=function(t){return I(b,t)?new N(t):new r(t)},N=r=function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw _("Bad Promise constructor");e=t,n=i}),this.resolve=f(e),this.reject=f(n)},L=function(t){try{t()}catch(t){return{error:t}}},M=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var i=t._v,r=1==t._s,o=0,s=function(e){var n,o,s=r?e.ok:e.fail,a=e.resolve,u=e.reject,l=e.domain;try{s?(r||(2==t._h&&R(t),t._h=1),s===!0?n=i:(l&&l.enter(),n=s(i),l&&l.exit()),n===e.promise?u(_("Promise-chain cycle")):(o=C(n))?o.call(n,a,u):a(n)):u(i)}catch(t){u(t)}};n.length>o;)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&P(t)})}},P=function(t){m.call(a,function(){var e,n,i,r=t._v;if(A(t)&&(e=L(function(){E?x.emit("unhandledRejection",r,t):(n=a.onunhandledrejection)?n({promise:t,reason:r}):(i=a.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=E||A(t)?2:1),t._a=void 0,e)throw e.error})},A=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,i=0;n.length>i;)if(e=n[i++],e.fail||!A(e.promise))return!1;return!0},R=function(t){m.call(a,function(){var e;E?x.emit("rejectionHandled",t):(e=a.onrejectionhandled)&&e({promise:t,reason:t._v})})},O=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),M(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw _("Promise can't be resolved itself");(e=C(t))?y(function(){var i={_w:n,_d:!1};try{e.call(t,u(F,i,1),u(O,i,1))}catch(t){O.call(i,t)}}):(n._v=t,n._s=1,M(n,!1))}catch(t){O.call({_w:n,_d:!1},t)}}};S||(b=function(t){p(this,b,v,"_h"),f(t),i.call(this);try{t(u(F,this,1),u(O,this,1))}catch(t){O.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(513)(b.prototype,{then:function(t,e){var n=T(g(this,b));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=E?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),N=function(){var t=new i;this.promise=t,this.resolve=u(F,t,1),this.reject=u(O,t,1)}),c(c.G+c.W+c.F*!S,{Promise:b}),n(327)(b,v),n(495)(v),o=n(312)[v],c(c.S+c.F*!S,v,{reject:function(t){var e=T(this),n=e.reject;return n(t),e.promise}}),c(c.S+c.F*(s||!S),v,{resolve:function(t){if(t instanceof b&&I(t.constructor,this))return t;var e=T(this),n=e.resolve;return n(t),e.promise}}),c(c.S+c.F*!(S&&n(468)(function(t){b.all(t).catch(w)})),v,{all:function(t){var e=this,n=T(e),i=n.resolve,r=n.reject,o=L(function(){var n=[],o=0,s=1;d(t,!1,function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,n[a]=t,--s||i(n))},r)}),--s||i(n)});return o&&r(o.error),n.promise},race:function(t){var e=this,n=T(e),i=n.reject,r=L(function(){d(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r&&i(r.error),n.promise}})},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(323),r=n(464),o=n(465),s=n(315),a=n(340),u=n(467),l={},c={},e=t.exports=function(t,e,n,h,f){var p,d,g,m,y=f?function(){return t}:u(t),v=i(n,h,e?2:1),_=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(p=a(t.length);p>_;_++)if(m=e?v(s(d=t[_])[0],d[1]):v(t[_]),m===l||m===c)return m}else for(g=y.call(t);!(d=g.next()).done;)if(m=r(g,v,d.value,e),m===l||m===c)return m};e.BREAK=l,e.RETURN=c},function(t,e,n){var i=n(315),r=n(324),o=n(328)("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||void 0==(n=i(s)[o])?e:r(n)}},function(t,e,n){var i,r,o,s=n(323),a=n(381),u=n(351),l=n(318),c=n(307),h=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,g=0,m={},y="onreadystatechange",v=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},_=function(t){v.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++g]=function(){a("function"==typeof t?t:Function(t),e)},i(g),g},p=function(t){delete m[t]},"process"==n(337)(h)?i=function(t){h.nextTick(s(v,t,1))}:d?(r=new d,o=r.port2,r.port1.onmessage=_,i=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",_,!1)):i=y in l("script")?function(t){u.appendChild(l("script"))[y]=function(){u.removeChild(this),v.call(t)}}:function(t){setTimeout(s(v,t,1),0)}),t.exports={set:f,clear:p}},function(t,e,n){var i=n(307),r=n(511).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,u="process"==n(337)(s);t.exports=function(){var t,e,n,l=function(){var i,r;for(u&&(i=s.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(u)n=function(){s.nextTick(l)};else if(o){var c=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),n=function(){h.data=c=!c}}else if(a&&a.resolve){var f=a.resolve();n=function(){f.then(l)}}else n=function(){r.call(i,l)};return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){var i=n(321);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e,n){"use strict";var i=n(515);t.exports=n(516)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(this,t);return e&&e.v},set:function(t,e){return i.def(this,0===t?0:t,e)}},i,!0)},function(t,e,n){"use strict";var i=n(314).f,r=n(349),o=n(513),s=n(323),a=n(508),u=n(338),l=n(509),c=n(431),h=n(497),f=n(495),p=n(309),d=n(325).fastKey,g=p?"_s":"size",m=function(t,e){var n,i=d(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var h=t(function(t,i){a(t,h,e,"_i"),t._i=r(null),t._f=void 0,t._l=void 0,t[g]=0,void 0!=i&&l(i,n,t[c],t)});return o(h.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var e=this,n=m(e,t);if(n){var i=n.n,r=n.p;delete e._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),e._f==n&&(e._f=i),e._l==n&&(e._l=r),e[g]--}return!!n},forEach:function(t){a(this,h,"forEach");for(var e,n=s(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!m(this,t)}}),p&&i(h.prototype,"size",{get:function(){return u(this[g])}}),h},def:function(t,e,n){var i,r,o=m(t,e);return o?o.v=n:(t._l=o={i:r=d(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[g]++,"F"!==r&&(t._i[r]=o)),t},getEntry:m,setStrong:function(t,e,n){c(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?h(0,n.k):"values"==e?h(0,n.v):h(0,[n.k,n.v]):(t._t=void 0,h(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var i=n(307),r=n(311),o=n(321),s=n(513),a=n(325),u=n(509),l=n(508),c=n(316),h=n(310),f=n(468),p=n(327),d=n(391);t.exports=function(t,e,n,g,m,y){var v=i[t],_=v,x=m?"set":"add",b=_&&_.prototype,E={},w=function(t){var e=b[t];o(b,t,"delete"==t?function(t){return!(y&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof _&&(y||b.forEach&&!h(function(){(new _).entries().next()}))){var S=new _,I=S[x](y?{}:-0,1)!=S,C=h(function(){S.has(1)}),T=f(function(t){new _(t)}),N=!y&&h(function(){for(var t=new _,e=5;e--;)t[x](e,e);return!t.has(-0)});T||(_=e(function(e,n){l(e,_,t);var i=d(new v,e,_);return void 0!=n&&u(n,m,i[x],i),i}),_.prototype=b,b.constructor=_),(C||N)&&(w("delete"),w("has"),m&&w("get")),(N||I)&&w(x),y&&b.clear&&delete b.clear}else _=g.getConstructor(e,t,m,x),s(_.prototype,n),a.NEED=!0;return p(_,t),E[t]=_,r(r.G+r.W+r.F*(_!=v),E),y||g.setStrong(_,t,m),_}},function(t,e,n){"use strict";var i=n(515);t.exports=n(516)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(this,t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";var i,r=n(475)(0),o=n(321),s=n(325),a=n(372),u=n(519),l=n(316),c=s.getWeak,h=Object.isExtensible,f=u.ufstore,p={},d=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(l(t)){var e=c(t);return e===!0?f(this).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(this,t,e)}},m=t.exports=n(516)("WeakMap",d,g,u,!0,!0);7!=(new m).set((Object.freeze||Object)(p),7).get(p)&&(i=u.getConstructor(d),a(i.prototype,g),s.NEED=!0,r(["delete","has","get","set"],function(t){var e=m.prototype,n=e[t];o(e,t,function(e,r){if(l(e)&&!h(e)){this._f||(this._f=new i);var o=this._f[t](e,r);return"set"==t?this:o}return n.call(this,e,r)})}))},function(t,e,n){"use strict";var i=n(513),r=n(325).getWeak,o=n(315),s=n(316),a=n(508),u=n(509),l=n(475),c=n(308),h=l(5),f=l(6),p=0,d=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},m=function(t,e){return h(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=f(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var l=t(function(t,i){a(t,l,e,"_i"),t._i=p++,t._l=void 0,void 0!=i&&u(i,n,t[o],t)});return i(l.prototype,{delete:function(t){if(!s(t))return!1;var e=r(t);return e===!0?d(this).delete(t):e&&c(e,this._i)&&delete e[this._i]},has:function(t){if(!s(t))return!1;var e=r(t);return e===!0?d(this).has(t):e&&c(e,this._i)}}),l},def:function(t,e,n){var i=r(o(e),!0);return i===!0?d(t).set(e,n):i[t._i]=n,t},ufstore:d}},function(t,e,n){"use strict";var i=n(519);n(516)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(this,t,!0)}},i,!1,!0)},function(t,e,n){"use strict";var i=n(311),r=n(522),o=n(523),s=n(315),a=n(342),u=n(340),l=n(316),c=n(307).ArrayBuffer,h=n(510),f=o.ArrayBuffer,p=o.DataView,d=r.ABV&&c.isView,g=f.prototype.slice,m=r.VIEW,y="ArrayBuffer";i(i.G+i.W+i.F*(c!==f),{ArrayBuffer:f}),i(i.S+i.F*!r.CONSTR,y,{isView:function(t){return d&&d(t)||l(t)&&m in t}}),i(i.P+i.U+i.F*n(310)(function(){return!new f(2).slice(1,void 0).byteLength}),y,{slice:function(t,e){if(void 0!==g&&void 0===e)return g.call(s(this),t);for(var n=s(this).byteLength,i=a(t,n),r=a(void 0===e?n:e,n),o=new(h(this,f))(u(r-i)),l=new p(this),c=new p(o),d=0;i<r;)c.setUint8(d++,l.getUint8(i++));return o}}),n(495)(y)},function(t,e,n){for(var i,r=n(307),o=n(313),s=n(322),a=s("typed_array"),u=s("view"),l=!(!r.ArrayBuffer||!r.DataView),c=l,h=0,f=9,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<f;)(i=r[p[h++]])?(o(i.prototype,a,!0),o(i.prototype,u,!0)):c=!1;t.exports={ABV:l,CONSTR:c,TYPED:a,VIEW:u}},function(t,e,n){"use strict";var i=n(307),r=n(309),o=n(331),s=n(522),a=n(313),u=n(513),l=n(310),c=n(508),h=n(341),f=n(340),p=n(353).f,d=n(314).f,g=n(491),m=n(327),y="ArrayBuffer",v="DataView",_="prototype",x="Wrong length!",b="Wrong index!",E=i[y],w=i[v],S=i.Math,I=i.RangeError,C=i.Infinity,T=E,N=S.abs,L=S.pow,M=S.floor,P=S.log,A=S.LN2,R="buffer",O="byteLength",F="byteOffset",D=r?"_b":R,z=r?"_l":O,k=r?"_o":F,B=function(t,e,n){var i,r,o,s=Array(n),a=8*n-e-1,u=(1<<a)-1,l=u>>1,c=23===e?L(2,-24)-L(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for(t=N(t),t!=t||t===C?(r=t!=t?1:0,i=u):(i=M(P(t)/A),t*(o=L(2,-i))<1&&(i--,o*=2),t+=i+l>=1?c/o:c*L(2,1-l),t*o>=2&&(i++,o/=2),i+l>=u?(r=0,i=u):i+l>=1?(r=(t*o-1)*L(2,e),i+=l):(r=t*L(2,l-1)*L(2,e),i=0));e>=8;s[h++]=255&r,r/=256,e-=8);for(i=i<<e|r,a+=e;a>0;s[h++]=255&i,i/=256,a-=8);return s[--h]|=128*f,s},j=function(t,e,n){var i,r=8*n-e-1,o=(1<<r)-1,s=o>>1,a=r-7,u=n-1,l=t[u--],c=127&l;for(l>>=7;a>0;c=256*c+t[u],u--,a-=8);for(i=c&(1<<-a)-1,c>>=-a,a+=e;a>0;i=256*i+t[u],u--,a-=8);if(0===c)c=1-s;else{if(c===o)return i?NaN:l?-C:C;i+=L(2,e),c-=s}return(l?-1:1)*i*L(2,c-e)},V=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},G=function(t){return[255&t]},U=function(t){return[255&t,t>>8&255]},q=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},X=function(t){return B(t,52,8)},Y=function(t){return B(t,23,4)},W=function(t,e,n){d(t[_],e,{get:function(){return this[n]}})},H=function(t,e,n,i){var r=+n,o=h(r);if(r!=o||o<0||o+e>t[z])throw I(b);var s=t[D]._b,a=o+t[k],u=s.slice(a,a+e);return i?u:u.reverse()},Z=function(t,e,n,i,r,o){var s=+n,a=h(s);if(s!=a||a<0||a+e>t[z])throw I(b);for(var u=t[D]._b,l=a+t[k],c=i(+r),f=0;f<e;f++)u[l+f]=c[o?f:e-f-1]},J=function(t,e){c(t,E,y);var n=+e,i=f(n);if(n!=i)throw I(x);return i};if(s.ABV){if(!l(function(){new E})||!l(function(){new E(.5)})){E=function(t){return new T(J(this,t))};for(var $,K=E[_]=T[_],Q=p(T),tt=0;Q.length>tt;)($=Q[tt++])in E||a(E,$,T[$]);o||(K.constructor=E)}var et=new w(new E(2)),nt=w[_].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||u(w[_],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else E=function(t){var e=J(this,t);this._b=g.call(Array(e),0),this[z]=e},w=function(t,e,n){c(this,w,v),c(t,E,v);var i=t[z],r=h(e);if(r<0||r>i)throw I("Wrong offset!");if(n=void 0===n?i-r:f(n),r+n>i)throw I(x);this[D]=t,this[k]=r,this[z]=n},r&&(W(E,O,"_l"),W(w,R,"_b"),W(w,O,"_l"),W(w,F,"_o")),u(w[_],{getInt8:function(t){return H(this,1,t)[0]<<24>>24},getUint8:function(t){return H(this,1,t)[0]},getInt16:function(t){var e=H(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=H(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return V(H(this,4,t,arguments[1]))},getUint32:function(t){return V(H(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return j(H(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return j(H(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){Z(this,1,t,G,e)},setUint8:function(t,e){Z(this,1,t,G,e)},setInt16:function(t,e){Z(this,2,t,U,e,arguments[2])},setUint16:function(t,e){Z(this,2,t,U,e,arguments[2])},setInt32:function(t,e){Z(this,4,t,q,e,arguments[2])},setUint32:function(t,e){Z(this,4,t,q,e,arguments[2])},setFloat32:function(t,e){Z(this,4,t,Y,e,arguments[2])},setFloat64:function(t,e){Z(this,8,t,X,e,arguments[2])}});m(E,y),m(w,v),a(w[_],s.VIEW,!0),e[y]=E,e[v]=w},function(t,e,n){var i=n(311);i(i.G+i.W+i.F*!n(522).ABV,{DataView:n(523).DataView})},function(t,e,n){n(526)("Int8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){"use strict";if(n(309)){var i=n(331),r=n(307),o=n(310),s=n(311),a=n(522),u=n(523),l=n(323),c=n(508),h=n(320),f=n(313),p=n(513),d=n(341),g=n(340),m=n(342),y=n(319),v=n(308),_=n(374),x=n(378),b=n(316),E=n(361),w=n(465),S=n(349),I=n(362),C=n(353).f,T=n(467),N=n(322),L=n(328),M=n(475),P=n(339),A=n(510),R=n(496),O=n(432),F=n(468),D=n(495),z=n(491),k=n(488),B=n(314),j=n(354),V=B.f,G=j.f,U=r.RangeError,q=r.TypeError,X=r.Uint8Array,Y="ArrayBuffer",W="Shared"+Y,H="BYTES_PER_ELEMENT",Z="prototype",J=Array[Z],$=u.ArrayBuffer,K=u.DataView,Q=M(0),tt=M(2),et=M(3),nt=M(4),it=M(5),rt=M(6),ot=P(!0),st=P(!1),at=R.values,ut=R.keys,lt=R.entries,ct=J.lastIndexOf,ht=J.reduce,ft=J.reduceRight,pt=J.join,dt=J.sort,gt=J.slice,mt=J.toString,yt=J.toLocaleString,vt=L("iterator"),_t=L("toStringTag"),xt=N("typed_constructor"),bt=N("def_constructor"),Et=a.CONSTR,wt=a.TYPED,St=a.VIEW,It="Wrong length!",Ct=M(1,function(t,e){return At(A(t,t[bt]),e)}),Tt=o(function(){return 1===new X(new Uint16Array([1]).buffer)[0]}),Nt=!!X&&!!X[Z].set&&o(function(){new X(1).set({})}),Lt=function(t,e){if(void 0===t)throw q(It);var n=+t,i=g(t);if(e&&!_(n,i))throw U(It);return i},Mt=function(t,e){var n=d(t);if(n<0||n%e)throw U("Wrong offset!");return n},Pt=function(t){if(b(t)&&wt in t)return t;throw q(t+" is not a typed array!")},At=function(t,e){if(!(b(t)&&xt in t))throw q("It is not a typed array constructor!");return new t(e)},Rt=function(t,e){return Ot(A(t,t[bt]),e)},Ot=function(t,e){for(var n=0,i=e.length,r=At(t,i);i>n;)r[n]=e[n++];return r},Ft=function(t,e,n){V(t,e,{get:function(){return this._d[n]}})},Dt=function(t){var e,n,i,r,o,s,a=E(t),u=arguments.length,c=u>1?arguments[1]:void 0,h=void 0!==c,f=T(a);if(void 0!=f&&!w(f)){for(s=f.call(a),i=[],e=0;!(o=s.next()).done;e++)i.push(o.value);a=i}for(h&&u>2&&(c=l(c,arguments[2],2)),e=0,n=g(a.length),r=At(this,n);n>e;e++)r[e]=h?c(a[e],e):a[e];return r},zt=function(){for(var t=0,e=arguments.length,n=At(this,e);e>t;)n[t]=arguments[t++];return n},kt=!!X&&o(function(){yt.call(new X(1))}),Bt=function(){return yt.apply(kt?gt.call(Pt(this)):Pt(this),arguments)},jt={copyWithin:function(t,e){return k.call(Pt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Pt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return z.apply(Pt(this),arguments)},filter:function(t){return Rt(this,tt(Pt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return it(Pt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return rt(Pt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Pt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return st(Pt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Pt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return pt.apply(Pt(this),arguments)},lastIndexOf:function(t){return ct.apply(Pt(this),arguments)},map:function(t){return Ct(Pt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return ht.apply(Pt(this),arguments)},reduceRight:function(t){return ft.apply(Pt(this),arguments)},reverse:function(){for(var t,e=this,n=Pt(e).length,i=Math.floor(n/2),r=0;r<i;)t=e[r],e[r++]=e[--n],e[n]=t;return e},some:function(t){return et(Pt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return dt.call(Pt(this),t)},subarray:function(t,e){var n=Pt(this),i=n.length,r=m(t,i);
return new(A(n,n[bt]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,g((void 0===e?i:m(e,i))-r))}},Vt=function(t,e){return Rt(this,gt.call(Pt(this),t,e))},Gt=function(t){Pt(this);var e=Mt(arguments[1],1),n=this.length,i=E(t),r=g(i.length),o=0;if(r+e>n)throw U(It);for(;o<r;)this[e+o]=i[o++]},Ut={entries:function(){return lt.call(Pt(this))},keys:function(){return ut.call(Pt(this))},values:function(){return at.call(Pt(this))}},qt=function(t,e){return b(t)&&t[wt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Xt=function(t,e){return qt(t,e=y(e,!0))?h(2,t[e]):G(t,e)},Yt=function(t,e,n){return!(qt(t,e=y(e,!0))&&b(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?V(t,e,n):(t[e]=n.value,t)};Et||(j.f=Xt,B.f=Yt),s(s.S+s.F*!Et,"Object",{getOwnPropertyDescriptor:Xt,defineProperty:Yt}),o(function(){mt.call({})})&&(mt=yt=function(){return pt.call(this)});var Wt=p({},jt);p(Wt,Ut),f(Wt,vt,Ut.values),p(Wt,{slice:Vt,set:Gt,constructor:function(){},toString:mt,toLocaleString:Bt}),Ft(Wt,"buffer","b"),Ft(Wt,"byteOffset","o"),Ft(Wt,"byteLength","l"),Ft(Wt,"length","e"),V(Wt,_t,{get:function(){return this[wt]}}),t.exports=function(t,e,n,u){u=!!u;var l=t+(u?"Clamped":"")+"Array",h="Uint8Array"!=l,p="get"+t,d="set"+t,m=r[l],y=m||{},v=m&&I(m),_=!m||!a.ABV,E={},w=m&&m[Z],T=function(t,n){var i=t._d;return i.v[p](n*e+i.o,Tt)},N=function(t,n,i){var r=t._d;u&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[d](n*e+r.o,i,Tt)},L=function(t,e){V(t,e,{get:function(){return T(this,e)},set:function(t){return N(this,e,t)},enumerable:!0})};_?(m=n(function(t,n,i,r){c(t,m,l,"_d");var o,s,a,u,h=0,p=0;if(b(n)){if(!(n instanceof $||(u=x(n))==Y||u==W))return wt in n?Ot(m,n):Dt.call(m,n);o=n,p=Mt(i,e);var d=n.byteLength;if(void 0===r){if(d%e)throw U(It);if(s=d-p,s<0)throw U(It)}else if(s=g(r)*e,s+p>d)throw U(It);a=s/e}else a=Lt(n,!0),s=a*e,o=new $(s);for(f(t,"_d",{b:o,o:p,l:s,e:a,v:new K(o)});h<a;)L(t,h++)}),w=m[Z]=S(Wt),f(w,"constructor",m)):F(function(t){new m(null),new m(t)},!0)||(m=n(function(t,n,i,r){c(t,m,l);var o;return b(n)?n instanceof $||(o=x(n))==Y||o==W?void 0!==r?new y(n,Mt(i,e),r):void 0!==i?new y(n,Mt(i,e)):new y(n):wt in n?Ot(m,n):Dt.call(m,n):new y(Lt(n,h))}),Q(v!==Function.prototype?C(y).concat(C(v)):C(y),function(t){t in m||f(m,t,y[t])}),m[Z]=w,i||(w.constructor=m));var M=w[vt],P=!!M&&("values"==M.name||void 0==M.name),A=Ut.values;f(m,xt,!0),f(w,wt,l),f(w,St,!0),f(w,bt,m),(u?new m(1)[_t]==l:_t in w)||V(w,_t,{get:function(){return l}}),E[l]=m,s(s.G+s.W+s.F*(m!=y),E),s(s.S,l,{BYTES_PER_ELEMENT:e,from:Dt,of:zt}),H in w||f(w,H,e),s(s.P,l,jt),D(l),s(s.P+s.F*Nt,l,{set:Gt}),s(s.P+s.F*!P,l,Ut),s(s.P+s.F*(w.toString!=mt),l,{toString:mt}),s(s.P+s.F*o(function(){new m(1).slice()}),l,{slice:Vt}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new m([1,2]).toLocaleString()})||!o(function(){w.toLocaleString.call([1,2])})),l,{toLocaleString:Bt}),O[l]=P?M:A,i||P||f(w,vt,A)}}else t.exports=function(){}},function(t,e,n){n(526)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(526)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}},!0)},function(t,e,n){n(526)("Int16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(526)("Uint16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(526)("Int32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(526)("Uint32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(526)("Float32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(526)("Float64",8,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){var i=n(311),r=n(324),o=n(315),s=(n(307).Reflect||{}).apply,a=Function.apply;i(i.S+i.F*!n(310)(function(){s(function(){})}),"Reflect",{apply:function(t,e,n){var i=r(t),u=o(n);return s?s(i,e,u):a.call(i,e,u)}})},function(t,e,n){var i=n(311),r=n(349),o=n(324),s=n(315),a=n(316),u=n(310),l=n(380),c=(n(307).Reflect||{}).construct,h=u(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),f=!u(function(){c(function(){})});i(i.S+i.F*(h||f),"Reflect",{construct:function(t,e){o(t),s(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!h)return c(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(l.apply(t,i))}var u=n.prototype,p=r(a(u)?u:Object.prototype),d=Function.apply.call(t,p,e);return a(d)?d:p}})},function(t,e,n){var i=n(314),r=n(311),o=n(315),s=n(319);r(r.S+r.F*n(310)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=s(e,!0),o(n);try{return i.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var i=n(311),r=n(354).f,o=n(315);i(i.S,"Reflect",{deleteProperty:function(t,e){var n=r(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var i=n(311),r=n(315),o=function(t){this._t=r(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(433)(o,"Object",function(){var t,e=this,n=e._k;do if(e._i>=n.length)return{value:void 0,done:!0};while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),i(i.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){function i(t,e){var n,a,c=arguments.length<3?t:arguments[2];return l(t)===c?t[e]:(n=r.f(t,e))?s(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:u(a=o(t))?i(a,e,c):void 0}var r=n(354),o=n(362),s=n(308),a=n(311),u=n(316),l=n(315);a(a.S,"Reflect",{get:i})},function(t,e,n){var i=n(354),r=n(311),o=n(315);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return i.f(o(t),e)}})},function(t,e,n){var i=n(311),r=n(362),o=n(315);i(i.S,"Reflect",{getPrototypeOf:function(t){return r(o(t))}})},function(t,e,n){var i=n(311);i(i.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var i=n(311),r=n(315),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(t){return r(t),!o||o(t)}})},function(t,e,n){var i=n(311);i(i.S,"Reflect",{ownKeys:n(546)})},function(t,e,n){var i=n(353),r=n(346),o=n(315),s=n(307).Reflect;t.exports=s&&s.ownKeys||function(t){var e=i.f(o(t)),n=r.f;return n?e.concat(n(t)):e}},function(t,e,n){var i=n(311),r=n(315),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(t){r(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){function i(t,e,n){var u,f,p=arguments.length<4?t:arguments[3],d=o.f(c(t),e);if(!d){if(h(f=s(t)))return i(f,e,n,p);d=l(0)}return a(d,"value")?!(d.writable===!1||!h(p))&&(u=o.f(p,e)||l(0),u.value=n,r.f(p,e,u),!0):void 0!==d.set&&(d.set.call(p,n),!0)}var r=n(314),o=n(354),s=n(362),a=n(308),u=n(311),l=n(320),c=n(315),h=n(316);u(u.S,"Reflect",{set:i})},function(t,e,n){var i=n(311),r=n(376);r&&i(i.S,"Reflect",{setPrototypeOf:function(t,e){r.check(t,e);try{return r.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){"use strict";var i=n(311),r=n(339)(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(489)("includes")},function(t,e,n){"use strict";var i=n(311),r=n(430)(!0);i(i.P,"String",{at:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(311),r=n(553);i(i.P,"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){var i=n(340),r=n(394),o=n(338);t.exports=function(t,e,n,s){var a=String(o(t)),u=a.length,l=void 0===n?" ":String(n),c=i(e);if(c<=u||""==l)return a;var h=c-u,f=r.call(l,Math.ceil(h/l.length));return f.length>h&&(f=f.slice(0,h)),s?f+a:a+f}},function(t,e,n){"use strict";var i=n(311),r=n(553);i(i.P,"String",{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(386)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(386)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";var i=n(311),r=n(338),o=n(340),s=n(437),a=n(499),u=RegExp.prototype,l=function(t,e){this._r=t,this._s=e};n(433)(l,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),i(i.P,"String",{matchAll:function(t){if(r(this),!s(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in u?String(t.flags):a.call(t),i=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return i.lastIndex=o(t.lastIndex),new l(i,e)}})},function(t,e,n){n(330)("asyncIterator")},function(t,e,n){n(330)("observable")},function(t,e,n){var i=n(311),r=n(546),o=n(335),s=n(354),a=n(466);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n=o(t),i=s.f,u=r(n),l={},c=0;u.length>c;)a(l,e=u[c++],i(n,e));return l}})},function(t,e,n){var i=n(311),r=n(562)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){var i=n(333),r=n(335),o=n(347).f;t.exports=function(t){return function(e){for(var n,s=r(e),a=i(s),u=a.length,l=0,c=[];u>l;)o.call(s,n=a[l++])&&c.push(t?[n,s[n]]:s[n]);return c}}},function(t,e,n){var i=n(311),r=n(562)(!0);i(i.S,"Object",{entries:function(t){return r(t)}})},function(t,e,n){"use strict";var i=n(311),r=n(361),o=n(324),s=n(314);n(309)&&i(i.P+n(565),"Object",{__defineGetter__:function(t,e){s.f(r(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){t.exports=n(331)||!n(310)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(307)[t]})},function(t,e,n){"use strict";var i=n(311),r=n(361),o=n(324),s=n(314);n(309)&&i(i.P+n(565),"Object",{__defineSetter__:function(t,e){s.f(r(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var i=n(311),r=n(361),o=n(319),s=n(362),a=n(354).f;n(309)&&i(i.P+n(565),"Object",{__lookupGetter__:function(t){var e,n=r(this),i=o(t,!0);do if(e=a(n,i))return e.get;while(n=s(n))}})},function(t,e,n){"use strict";var i=n(311),r=n(361),o=n(319),s=n(362),a=n(354).f;n(309)&&i(i.P+n(565),"Object",{__lookupSetter__:function(t){var e,n=r(this),i=o(t,!0);do if(e=a(n,i))return e.set;while(n=s(n))}})},function(t,e,n){var i=n(311);i(i.P+i.R,"Map",{toJSON:n(570)("Map")})},function(t,e,n){var i=n(378),r=n(571);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,n){var i=n(509);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){var i=n(311);i(i.P+i.R,"Set",{toJSON:n(570)("Set")})},function(t,e,n){var i=n(311);i(i.S,"System",{global:n(307)})},function(t,e,n){var i=n(311),r=n(337);i(i.S,"Error",{isError:function(t){return"Error"===r(t)}})},function(t,e,n){var i=n(311);i(i.S,"Math",{iaddh:function(t,e,n,i){var r=t>>>0,o=e>>>0,s=n>>>0;return o+(i>>>0)+((r&s|(r|s)&~(r+s>>>0))>>>31)|0}})},function(t,e,n){var i=n(311);i(i.S,"Math",{isubh:function(t,e,n,i){var r=t>>>0,o=e>>>0,s=n>>>0;return o-(i>>>0)-((~r&s|~(r^s)&r-s>>>0)>>>31)|0}})},function(t,e,n){var i=n(311);i(i.S,"Math",{imulh:function(t,e){var n=65535,i=+t,r=+e,o=i&n,s=r&n,a=i>>16,u=r>>16,l=(a*s>>>0)+(o*s>>>16);return a*u+(l>>16)+((o*u>>>0)+(l&n)>>16)}})},function(t,e,n){var i=n(311);i(i.S,"Math",{umulh:function(t,e){var n=65535,i=+t,r=+e,o=i&n,s=r&n,a=i>>>16,u=r>>>16,l=(a*s>>>0)+(o*s>>>16);return a*u+(l>>>16)+((o*u>>>0)+(l&n)>>>16)}})},function(t,e,n){var i=n(580),r=n(315),o=i.key,s=i.set;i.exp({defineMetadata:function(t,e,n,i){s(t,e,r(n),o(i))}})},function(t,e,n){var i=n(514),r=n(311),o=n(326)("metadata"),s=o.store||(o.store=new(n(518))),a=function(t,e,n){var r=s.get(t);if(!r){if(!n)return;s.set(t,r=new i)}var o=r.get(e);if(!o){if(!n)return;r.set(e,o=new i)}return o},u=function(t,e,n){var i=a(e,n,!1);return void 0!==i&&i.has(t)},l=function(t,e,n){var i=a(e,n,!1);return void 0===i?void 0:i.get(t)},c=function(t,e,n,i){a(n,i,!0).set(t,e)},h=function(t,e){var n=a(t,e,!1),i=[];return n&&n.forEach(function(t,e){i.push(e)}),i},f=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},p=function(t){r(r.S,"Reflect",t)};t.exports={store:s,map:a,has:u,get:l,set:c,keys:h,key:f,exp:p}},function(t,e,n){var i=n(580),r=n(315),o=i.key,s=i.map,a=i.store;i.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),i=s(r(e),n,!1);if(void 0===i||!i.delete(t))return!1;if(i.size)return!0;var u=a.get(e);return u.delete(n),!!u.size||a.delete(e)}})},function(t,e,n){var i=n(580),r=n(315),o=n(362),s=i.has,a=i.get,u=i.key,l=function(t,e,n){var i=s(t,e,n);if(i)return a(t,e,n);var r=o(e);return null!==r?l(t,r,n):void 0};i.exp({getMetadata:function(t,e){return l(t,r(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,n){var i=n(517),r=n(571),o=n(580),s=n(315),a=n(362),u=o.keys,l=o.key,c=function(t,e){var n=u(t,e),o=a(t);if(null===o)return n;var s=c(o,e);return s.length?n.length?r(new i(n.concat(s))):s:n};o.exp({getMetadataKeys:function(t){return c(s(t),arguments.length<2?void 0:l(arguments[1]))}})},function(t,e,n){var i=n(580),r=n(315),o=i.get,s=i.key;i.exp({getOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var i=n(580),r=n(315),o=i.keys,s=i.key;i.exp({getOwnMetadataKeys:function(t){return o(r(t),arguments.length<2?void 0:s(arguments[1]))}})},function(t,e,n){var i=n(580),r=n(315),o=n(362),s=i.has,a=i.key,u=function(t,e,n){var i=s(t,e,n);if(i)return!0;var r=o(e);return null!==r&&u(t,r,n)};i.exp({hasMetadata:function(t,e){return u(t,r(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var i=n(580),r=n(315),o=i.has,s=i.key;i.exp({hasOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var i=n(580),r=n(315),o=n(324),s=i.key,a=i.set;i.exp({metadata:function(t,e){return function(n,i){a(t,e,(void 0!==i?r:o)(n),s(i))}}})},function(t,e,n){var i=n(311),r=n(512)(),o=n(307).process,s="process"==n(337)(o);i(i.G,{asap:function(t){var e=s&&o.domain;r(e?e.bind(t):t)}})},function(t,e,n){"use strict";var i=n(311),r=n(307),o=n(312),s=n(512)(),a=n(328)("observable"),u=n(324),l=n(315),c=n(508),h=n(513),f=n(313),p=n(509),d=p.RETURN,g=function(t){return null==t?void 0:u(t)},m=function(t){var e=t._c;e&&(t._c=void 0,e())},y=function(t){return void 0===t._o},v=function(t){y(t)||(t._o=void 0,m(t))},_=function(t,e){l(t),this._c=void 0,this._o=t,t=new x(this);try{var n=e(t),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:u(n),this._c=n)}catch(e){return void t.error(e)}y(this)&&m(this)};_.prototype=h({},{unsubscribe:function(){v(this)}});var x=function(t){this._s=t};x.prototype=h({},{next:function(t){var e=this._s;if(!y(e)){var n=e._o;try{var i=g(n.next);if(i)return i.call(n,t)}catch(t){try{v(e)}finally{throw t}}}},error:function(t){var e=this._s;if(y(e))throw t;var n=e._o;e._o=void 0;try{var i=g(n.error);if(!i)throw t;t=i.call(n,t)}catch(t){try{m(e)}finally{throw t}}return m(e),t},complete:function(t){var e=this._s;if(!y(e)){var n=e._o;e._o=void 0;try{var i=g(n.complete);t=i?i.call(n,t):void 0}catch(t){try{m(e)}finally{throw t}}return m(e),t}}});var b=function(t){c(this,b,"Observable","_f")._f=u(t)};h(b.prototype,{subscribe:function(t){return new _(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||r.Promise)(function(n,i){u(t);var r=e.subscribe({next:function(e){try{return t(e)}catch(t){i(t),r.unsubscribe()}},error:i,complete:n})})}}),h(b,{from:function(t){var e="function"==typeof this?this:b,n=g(l(t)[a]);if(n){var i=l(n.call(t));return i.constructor===e?i:new e(function(t){return i.subscribe(t)})}return new e(function(e){var n=!1;return s(function(){if(!n){try{if(p(t,!1,function(t){if(e.next(t),n)return d})===d)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:b)(function(t){var e=!1;return s(function(){if(!e){for(var i=0;i<n.length;++i)if(t.next(n[i]),e)return;t.complete()}}),function(){e=!0}})}}),f(b.prototype,a,function(){return this}),i(i.G,{Observable:b}),n(495)("Observable")},function(t,e,n){var i=n(307),r=n(311),o=n(381),s=n(592),a=i.navigator,u=!!a&&/MSIE .\./.test(a.userAgent),l=function(t){return u?function(e,n){return t(o(s,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),n)}:t};r(r.G+r.B+r.F*u,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},function(t,e,n){"use strict";var i=n(593),r=n(381),o=n(324);t.exports=function(){for(var t=o(this),e=arguments.length,n=Array(e),s=0,a=i._,u=!1;e>s;)(n[s]=arguments[s++])===a&&(u=!0);return function(){var i,o=this,s=arguments.length,l=0,c=0;if(!u&&!s)return r(t,n,o);if(i=n.slice(),u)for(;e>l;l++)i[l]===a&&(i[l]=arguments[c++]);for(;s>c;)i.push(arguments[c++]);return r(t,i,o)}}},function(t,e,n){t.exports=n(307)},function(t,e,n){var i=n(311),r=n(511);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,n){for(var i=n(496),r=n(321),o=n(307),s=n(313),a=n(432),u=n(328),l=u("iterator"),c=u("toStringTag"),h=a.Array,f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],p=0;p<5;p++){var d,g=f[p],m=o[g],y=m&&m.prototype;if(y){y[l]||s(y,l,h),y[c]||s(y,c,g),a[g]=h;for(d in i)y[d]||r(y,d,i[d],!0)}}},function(t,e,n){(function(e,n){!function(e){"use strict";function i(t,e,n,i){var r=e&&e.prototype instanceof o?e:o,s=Object.create(r.prototype),a=new p(i||[]);return s._invoke=c(t,n,a),s}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function o(){}function s(){}function a(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){function e(n,i,o,s){var a=r(t[n],t,i);if("throw"!==a.type){var u=a.arg,l=u.value;return l&&"object"==typeof l&&v.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,o,s)},function(t){e("throw",t,o,s)}):Promise.resolve(l).then(function(t){u.value=t,o(u)},s)}s(a.arg)}function i(t,n){function i(){return new Promise(function(i,r){e(t,n,i,r)})}return o=o?o.then(i,i):i()}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var o;this._invoke=i}function c(t,e,n){var i=S;return function(o,s){if(i===C)throw new Error("Generator is already running");if(i===T){if("throw"===o)throw s;return g()}for(;;){var a=n.delegate;if(a){if("return"===o||"throw"===o&&a.iterator[o]===m){n.delegate=null;var u=a.iterator.return;if(u){var l=r(u,a.iterator,s);if("throw"===l.type){o="throw",s=l.arg;continue}}if("return"===o)continue}var l=r(a.iterator[o],a.iterator,s);if("throw"===l.type){n.delegate=null,o="throw",s=l.arg;continue}o="next",s=m;var c=l.arg;if(!c.done)return i=I,c;n[a.resultName]=c.value,n.next=a.nextLoc,n.delegate=null}if("next"===o)n.sent=n._sent=s;else if("throw"===o){if(i===S)throw i=T,s;n.dispatchException(s)&&(o="next",s=m)}else"return"===o&&n.abrupt("return",s);i=C;var l=r(t,e,n);if("normal"===l.type){i=n.done?T:I;var c={value:l.arg,done:n.done};if(l.arg!==N)return c;n.delegate&&"next"===o&&(s=m)}else"throw"===l.type&&(i=T,o="throw",s=l.arg)}}}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(v.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=m,e.done=!0,e};return i.next=i}}return{next:g}}function g(){return{value:m,done:!0}}var m,y=Object.prototype,v=y.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},x=_.iterator||"@@iterator",b=_.toStringTag||"@@toStringTag",E="object"==typeof t,w=e.regeneratorRuntime;if(w)return void(E&&(t.exports=w));w=e.regeneratorRuntime=E?t.exports:{},w.wrap=i;var S="suspendedStart",I="suspendedYield",C="executing",T="completed",N={},L={};L[x]=function(){return this};var M=Object.getPrototypeOf,P=M&&M(M(d([])));P&&P!==y&&v.call(P,x)&&(L=P);var A=a.prototype=o.prototype=Object.create(L);s.prototype=A.constructor=a,a.constructor=s,a[b]=s.displayName="GeneratorFunction",w.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===s||"GeneratorFunction"===(e.displayName||e.name))},w.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b in t||(t[b]="GeneratorFunction")),t.prototype=Object.create(A),t},w.awrap=function(t){return{__await:t}},u(l.prototype),w.AsyncIterator=l,w.async=function(t,e,n,r){var o=new l(i(t,e,n,r));return w.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},u(A),A[b]="Generator",A.toString=function(){return"[object Generator]"},w.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},w.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&v.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=m)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return o.type="throw",o.arg=t,n.next=e,!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var s=v.call(r,"catchLoc"),a=v.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&v.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?this.next=r.finallyLoc:this.complete(o),N},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),N}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;f(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},N}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(112))},function(t,e,n){n(598),t.exports=n(312).RegExp.escape},function(t,e,n){var i=n(311),r=n(599)(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(t){return r(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},,,,,,,,,,function(t,e,n){"use strict";var i=n(1),r=n(288),o=n(610),s=n(205)("map"),a=n(614),u=n(616),l=n(172),c=n(174),h=n(193)(c),f=n(617),p=n(618),d=n(612),g=n(270),m=n(272),y=n(614),v=n(626),_=n(627),x=n(643),b=n(647),E=n(649),w=n(650),S=n(656),I=n(657),C=n(662),T=n(673),N={};"undefined"!=typeof window&&(N=n(646));var L=i.createClass({displayName:"Map",mixins:[b,E,I,w,S,h.connect(p,{initWithProps:["baseMap"]}),h.connect(g)],__:function(t){return m.getLocaleString(this.state.locale,t)},propTypes:{className:i.PropTypes.string,id:i.PropTypes.string,maxBounds:i.PropTypes.object,maxZoom:i.PropTypes.number,minZoom:i.PropTypes.number,height:i.PropTypes.string,style:i.PropTypes.object,glStyle:i.PropTypes.object,features:i.PropTypes.array,tileJSONType:i.PropTypes.string,tileJSONUrl:i.PropTypes.string,data:i.PropTypes.object,interactive:i.PropTypes.bool,showPlayButton:i.PropTypes.bool,showLogo:i.PropTypes.bool,showFeatureInfoEditButtons:i.PropTypes.bool,fitBounds:i.PropTypes.array,disableScrollZoom:i.PropTypes.bool,enableRotation:i.PropTypes.bool,navPosition:i.PropTypes.string,baseMap:i.PropTypes.string,onChangeBaseMap:i.PropTypes.func,insetMap:i.PropTypes.bool,hoverInteraction:i.PropTypes.bool,interactionBufferSize:i.PropTypes.number,hash:i.PropTypes.bool,gpxLink:i.PropTypes.string,attributionControl:i.PropTypes.bool,children:i.PropTypes.element},getDefaultProps:function(){return{maxZoom:18,minZoom:5,className:"",interactive:!0,showFeatureInfoEditButtons:!0,showPlayButton:!0,navPosition:"top-right",baseMap:"default",showLogo:!0,insetMap:!0,hoverInteraction:!1,interactionBufferSize:10,hash:!0,attributionControl:!1,style:{}}},getInitialState:function(){var t=null;this.props.fitBounds&&(t=this.props.fitBounds);var e=null,n=[];return this.props.glStyle&&(e=JSON.parse(JSON.stringify(this.props.glStyle)),n=this.getInteractiveLayers(e)),{id:this.props.id?this.props.id:"map",selectedFeatures:null,selected:!1,interactive:this.props.interactive,glStyle:e,interactiveLayers:n,mapLoaded:!1,restoreBounds:t,allowLayersToMoveMap:!t}},componentWillMount:function(){if(this.state.glStyle){var t=this.getInteractiveLayers(this.state.glStyle);this.setState({interactiveLayers:t})}},componentDidMount:function(){this.createMap()},shouldComponentUpdate:function(t,e){return!!(this.state.selected||e.selected||this.state.selectedFeatures||e.selectedFeatures)||(!y(this.props,t)||!y(this.state,e))},addLayers:function(t,e){var n=this;e.layers.forEach(function(i){try{var r=e.sources[i.source];"osm"==i.source||"vector"!==r.type||r.url.startsWith("mapbox://")?C[r.type]&&C[r.type].addLayer?C[r.type].addLayer(i,r,t):"raster"===r.type&&i.metadata&&i.metadata["maphubs:showBehindBaseMapLabels"]?t.addLayer(i,"water"):t.addLayer(i):C["maphubs-vector"].addLayer(i,r,t,n)}catch(t){s("("+n.state.id+") Failed to add layer: "+i.id),s("("+n.state.id+") "+t)}})},removeAllLayers:function(t){var e=this;t&&t.layers&&t.layers.forEach(function(n){try{var i=t.sources[n.source];"osm"==n.source||"vector"!==i.type||i.url.startsWith("mapbox://")?C[i.type]&&C[i.type].removeLayer?C[i.type].removeLayer(n,e.map):e.map.removeLayer(n.id):C["maphubs-vector"].removeLayer(n,e.map)}catch(t){s("("+e.state.id+") Failed to remove layer: "+n.id)}})},removeAllSources:function(t){var e=this;t&&t.sources&&Object.keys(t.sources).forEach(function(n){try{C[t.sources[n].type]&&C[t.sources[n].type].remove?C[t.sources[n].type].remove(n,e.map):e.map.removeSource(n)}catch(t){s("("+e.state.id+") Failed to remove source: "+n)}})},reload:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this;s("("+i.state.id+") reload: start");try{this.clearSelection()}catch(t){s(t)}t||(t=this.props.glStyle),e||(e=t),this.removeAllLayers(t),this.removeAllSources(t),n?(s("("+i.state.id+") reload: base map"),this.map.setStyle(n)):this.addMapData(this.map,e,this.props.data,function(){s("("+i.state.id+") reload: finished adding data")})},addMapData:function(t,e,n,i){var r=this;if(e&&e.sources){var o=[];Object.keys(e.sources).forEach(function(n){var i=e.sources[n],s=i.type,a=i.url;"osm"==n||"vector"!==s||a.startsWith("mapbox://")?C[s]?o.push(C[s].load(n,i,t,r)):"raster"===s?(i.url&&(i.url=i.url.replace("{MAPHUBS_DOMAIN}",d.getBaseUrl())),t.addSource(n,i)):t.addSource(n,i):o.push(C["maphubs-vector"].load(n,i,t,r))}),u.all(o).then(function(){r.addLayers(t,e),i()}).catch(function(n){s("("+r.state.id+") "+n),r.addLayers(t,e),i()})}else n?(r.initGeoJSON(t,n),r.setState({mapLoaded:!0})):r.setState({mapLoaded:!0})},createMap:function(){var t=this;s("("+t.state.id+") Creating MapboxGL Map"),N.accessToken=MAPHUBS_CONFIG.MAPBOX_ACCESS_TOKEN,f.getBaseMapFromName(this.state.baseMap,function(e){N.supported()||alert("Your browser does not support Mapbox GL");var n=new N.Map({container:t.state.id,style:e,zoom:0,interactive:t.state.interactive,dragRotate:!!t.props.enableRotation,touchZoomRotate:!!t.props.enableRotation,center:[0,0],hash:t.props.hash,attributionControl:t.props.attributionControl});n.on("style.load",function(){s("("+t.state.id+") style.load"),t.addMapData(n,t.state.glStyle,t.props.data,function(){if(s("("+t.state.id+") finished adding map data"),!t.props.data&&t.state.restoreBounds){var e=t.state.restoreBounds;if(e.length>2){var i=new N.LngLat(e[0],e[1]),r=new N.LngLat(e[2],e[3]);e=new N.LngLatBounds(i,r)}s("("+t.state.id+") restoring bounds: "+t.state.restoreBounds),n.fitBounds(e,{animate:!1}),t.refs.insetMap&&t.refs.insetMap.fitBounds(e,{maxZoom:1.8,padding:10,animate:!1})}"en"!=t.state.locale&&(t.changeLocale(t.state.locale,t.map),t.refs.insetMap&&t.changeLocale(t.state.locale,t.refs.insetMap.getInsetMap())),t.state.forestAlerts&&t.restoreForestAlerts(),s("("+t.state.id+") MAP LOADED"),t.setState({mapLoaded:!0})}),t.refs.insetMap&&(t.refs.insetMap.getInsetMap()||t.refs.insetMap.createInsetMap(n.getCenter(),n.getBounds(),e))}),n.on("mousemove",t.mousemoveHandler),n.on("moveend",t.moveendHandler),n.on("click",t.clickHandler),t.state.interactive&&n.addControl(new N.NavigationControl,t.props.navPosition),n.addControl(new N.ScaleControl({maxWidth:175,unit:"metric"}),"bottom-right"),t.props.disableScrollZoom&&n.scrollZoom.disable(),t.map=n})},componentDidUpdate:function(t,e){if(this.state.interactive&&!e.interactive){this.map.addControl(new N.Navigation,this.props.navPosition);var n=this.map.interaction;n.enable(),l(this.refs.basemapButton).show(),l(this.refs.editBaseMapButton).show()}this.state.locale&&this.state.locale!=e.locale&&(this.changeLocale(this.state.locale,this.map),this.refs.insetMap&&this.changeLocale(this.state.locale,this.refs.getInsetMap()))},componentWillReceiveProps:function(t){var e=this;if(t.data&&this.map){var n=this.map.getSource("omh-geojson");n?(s("("+this.state.id+") update geoJSON data"),n.setData(t.data),this.zoomToData(t.data)):void 0===n&&this.props.data||(s("("+this.state.id+") init geoJSON data"),this.initGeoJSON(this.map,t.data))}var i=!1,r=null,o=this.state.allowLayersToMoveMap;if(t.fitBounds&&!a(this.props.fitBounds,t.fitBounds)&&this.map){if(s("("+this.state.id+") FIT BOUNDS CHANGING"),i=!0,o=!1,t.fitBounds.length>2){var u=new N.LngLat(t.fitBounds[0],t.fitBounds[1]),l=new N.LngLat(t.fitBounds[2],t.fitBounds[3]);r=new N.LngLatBounds(u,l)}else r=t.fitBounds;s("("+this.state.id+") bounds: "+r)}if(t.glStyle&&t.baseMap)if(a(this.state.glStyle,t.glStyle))a(this.state.baseMap,t.baseMap)?i&&r&&(s("("+this.state.id+") only bounds changing, bounds: "+r),Array.isArray(r)&&r.length>2&&(r=[[r[0],r[1]],[r[2],r[3]]]),s("("+this.state.id+") calling map fitBounds"),this.map.fitBounds(r,{animate:!1}),this.refs.insetMap&&this.refs.insetMap.fitBounds(r,{maxZoom:1.8,padding:10,animate:!1}),this.setState({allowLayersToMoveMap:o})):(s("("+this.state.id+") basemap changing from props"),o=!1,this.setState({allowLayersToMoveMap:o}),f.setBaseMap(t.baseMap),f.getBaseMapFromName(t.baseMap,function(t){e.reload(e.state.glStyle,e.state.glStyle,t)}));else{s("("+this.state.id+") glstyle changing from props"),this.state.mapLoaded&&!i&&null!=this.state.glStyle&&(s("("+this.state.id+") restoring current map position"),o=!1);var c=JSON.parse(JSON.stringify(this.state.glStyle)),h=JSON.parse(JSON.stringify(t.glStyle));this.setState({allowLayersToMoveMap:o,glStyle:h}),f.setBaseMap(t.baseMap),f.getBaseMapFromName(t.baseMap,function(t){e.reload(c,h,t);var n=e.getInteractiveLayers(h);e.setState({interactiveLayers:n})})}else if(t.glStyle&&!a(this.state.glStyle,t.glStyle)){s("("+this.state.id+") glstyle changing from props (default basemap)");var p=JSON.parse(JSON.stringify(t.glStyle));this.reload(this.state.glStyle,p);
var d=this.getInteractiveLayers(p);this.setState({glStyle:p,allowLayersToMoveMap:o,interactiveLayers:d})}else t.baseMap&&!a(this.state.baseMap,t.baseMap)?(s("("+this.state.id+") basemap changing from props (no glstyle)"),this.setState({allowLayersToMoveMap:o}),f.setBaseMap(t.baseMap),f.getBaseMapFromName(t.baseMap,function(t){e.reload(this.state.glStyle,this.state.glStyle,t)})):i&&r&&(s("("+this.state.id+") only bounds changing"),r._ne&&r._sw?this.map.fitBounds(r,{animate:!1}):Array.isArray(r)&&r.length>2?this.map.fitBounds([[r[0],r[1]],[r[2],r[3]]],{animate:!1}):this.map.fitBounds(r,{animate:!1}),this.setState({allowLayersToMoveMap:o}))},componentWillUnmount:function(){this.map.remove()},startInteractive:function(){this.setState({interactive:!0}),this.props.enableRotation||(this.map.dragRotate.disable(),this.map.touchZoomRotate.disableRotation())},getBaseMap:function(){return this.state.baseMap},changeBaseMap:function(t){s("changing basemap to: "+t);var e=this;f.getBaseMapFromName(t,function(n){f.setBaseMap(t),e.setState({allowLayersToMoveMap:!1}),e.reload(e.state.glStyle,e.state.glStyle,n),e.refs.insetMap&&(e.refs.insetMap.reloadInset(n),e.refs.insetMap.fitBounds(e.map.getBounds(),{maxZoom:1.8,padding:10,animate:!1})),e.state.forestAlerts&&e.restoreForestAlerts(),e.props.onChangeBaseMap&&e.props.onChangeBaseMap(t)})},render:function(){var t=r("mode","map","active"),e="";this.state.selectedFeatures&&this.state.selectedFeatures.length>0&&(e=i.createElement(o,{features:this.state.selectedFeatures,selected:this.state.selected,onUnselected:this.handleUnselectFeature,showButtons:this.props.showFeatureInfoEditButtons,style:{}}));var n="";!this.state.interactive&&this.props.showPlayButton&&(n=i.createElement("a",{onClick:this.startInteractive,className:"btn-floating waves-effect waves-light",style:{position:"absolute",left:"50%",bottom:"50%",backgroundColor:"rgba(25,25,25,0.1)",zIndex:"999"}},i.createElement("i",{className:"material-icons"},"play_arrow")));var s="",a="";this.state.mapLoaded&&(this.props.showLogo&&(s=i.createElement("img",{style:{position:"absolute",left:"5px",bottom:"2px",zIndex:"1"},width:MAPHUBS_CONFIG.logoSmallWidth,height:MAPHUBS_CONFIG.logoSmallHeight,src:MAPHUBS_CONFIG.logoSmall,alt:"Logo"})),a=this.props.children);var u="";if(this.props.insetMap){var l="5px";this.props.showLogo&&(l="30px"),u=i.createElement(x,{ref:"insetMap",id:this.state.id,bottom:l})}var c="";return this.state.enableMeasurementTools&&(c=i.createElement("div",null,i.createElement("div",{style:{position:"absolute",top:"46px",right:"10px",backgroundColor:"rgba(0,0,0,0.6)",color:"#FFF",height:"30px",paddingLeft:"5px",paddingRight:"5px",borderRadius:"4px",zIndex:"100",lineHeight:"30px"}},i.createElement("span",null,this.state.measurementMessage)),i.createElement(v,{top:"80px",right:"10px",icon:"close",show:!0,color:"#000",onClick:this.stopMeasurementTool,tooltipText:this.__("Exit Measurement")}))),i.createElement("div",{ref:"mapcontainer",className:this.props.className,style:this.props.style},i.createElement("div",{id:this.state.id,ref:"map",className:t,style:{width:"100%",height:"100%"}},u,i.createElement(_,{show:this.state.interactive&&this.state.mapLoaded,gpxLink:this.props.gpxLink,toggleMeasurementTools:this.toggleMeasurementTools,enableMeasurementTools:this.state.enableMeasurementTools,toggleForestAlerts:this.toggleForestAlerts,calculateForestAlerts:this.calculateForestAlerts,forestAlerts:this.state.forestAlerts,onChangeBaseMap:this.changeBaseMap}),c,e,n,a,s),i.createElement(T,null))}});t.exports=L},function(t,e,n){"use strict";var i=n(1),r=n(611),o=n(288),s=n(174),a=n(193)(s),u=n(270),l=n(272),c=n(200),h=n(209).checkClientError,f=n(612),p=n(613),d=n(172),g=i.createClass({displayName:"FeatureBox",mixins:[a.connect(u)],__:function(t){return l.getLocaleString(this.state.locale,t)},propTypes:{features:i.PropTypes.array.isRequired,selected:i.PropTypes.bool.isRequired,onUnselected:i.PropTypes.func.isRequired,showButtons:i.PropTypes.bool,className:i.PropTypes.string},getDefaultProps:function(){return{showButtons:!0,selected:!1}},getInitialState:function(){return{selectedFeature:1,selected:this.props.selected,currentFeatures:this.props.features?this.props.features:[],maxHeight:"calc(100% - 50px)",layerLoaded:!1}},componentDidMount:function(){if(this.props.selected&&this.props.features){var t=this.props.features[0];t.properties.layer_id&&this.getLayer(t.properties.layer_id,t.properties.maphubs_host)}},componentWillReceiveProps:function(t){if(!this.state.selected)if(t.selected){var e=null;this.state.currentFeatures&&this.state.currentFeatures.length>0?(e=this.state.currentFeatures,this.setState({selected:t.selected,selectedFeature:1})):(e=t.features,this.setState({currentFeatures:t.features,selected:t.selected,selectedFeature:1}));var n=e[0];n.properties.layer_id&&this.getLayer(n.properties.layer_id,n.properties.maphubs_host)}else this.setState({currentFeatures:t.features})},componentDidUpdate:function(t,e){!e.layerLoaded&&this.state.layerLoaded&&d(".feature-box-tooltips").tooltip()},getLayer:function(t,e){var n,i=this;n=e&&"dev.docker"!==e&&e!==window.location.hostname?"https://"+e:f.getBaseUrl(),c.get(n+"/api/layer/info/"+t).type("json").accept("json").end(function(t,e){h(e,t,function(){},function(t){var n=e.body.layer;i.setState({layer:n,layerLoaded:!0}),t()})})},handleCloseSelected:function(){this.setState({selected:!1,currentFeatures:[],selectedFeature:1}),this.props.onUnselected()},handleChangeSelectedFeature:function(t){this.setState({selectedFeature:t}),t.properties.layer_id&&this.getLayer(t.properties.layer_id,t.properties.maphubs_host)},render:function(){var t=this,e="",n="",s="",a="",u=f.getBaseUrl();if(this.state.selected){if(e=i.createElement("a",{style:{position:"absolute",top:0,right:0,cursor:"pointer"}},i.createElement("i",{className:"material-icons selected-feature-close",onClick:this.handleCloseSelected},"close")),1===this.state.currentFeatures.length?n=i.createElement("h6",{style:{position:"absolute",top:0,left:"5px",fontSize:"12px"}},this.__("Selected Feature")):this.state.currentFeatures.length>1&&(n=i.createElement("h6",{style:{position:"absolute",top:0,left:"5px",fontSize:"12px"}},this.__("Selected Features"))),this.props.showButtons){var l=-1,c=null,h=null,d="unknown";if(this.state.currentFeatures.length>0){var g=this.state.currentFeatures[this.state.selectedFeature-1];if(g&&g.properties){l=g.properties.osm_id,c=g.properties.layer_id,h=g.properties.maphubs_host;var m=["name","Name","NAME","nom","Nom","NOM","nombre","Nombre","NOMBRE"];m.forEach(function(t){"unknown"==d&&g.properties[t]&&(d=g.properties[t])})}}var y="";this.state.layer&&(y=i.createElement("div",{style:{textAlign:"left"}},i.createElement("b",null,i.createElement("a",{className:"truncate",target:"_blank",href:u+"/lyr/"+this.state.layer.layer_id},this.state.layer.name)),i.createElement(p,{className:"left",group:this.state.layer.owned_by_group_id,size:15,fontSize:8})));var v;v=h===window.location.hostname||"dev.docker"===h?"/feature/"+c+"/"+l+"/"+d:"https://"+h+"/feature/"+c+"/"+l+"/"+d,s=i.createElement("div",{className:"row",style:{marginTop:"10px",marginBottom:"10px"}},i.createElement("div",{className:"col s10 center"},y),i.createElement("div",{className:"col s2 center no-padding"},i.createElement("a",{href:v,className:"feature-box-tooltips","data-delay":"50","data-position":"bottom","data-tooltip":this.__("More Info")},i.createElement("i",{className:"material-icons omh-accent-color",style:{fontSize:32}},"info_outline"))))}if(this.state.currentFeatures.length>1){var _=this.state.selectedFeature,x=i.createElement("li",{className:"waves-effect"},i.createElement("a",{onClick:function(){var e=_-1;t.handleChangeSelectedFeature(e)}},i.createElement("i",{className:"material-icons"},"chevron_left")));1==_&&(x=i.createElement("li",{className:"disabled"},i.createElement("a",null,i.createElement("i",{className:"material-icons"},"chevron_left"))));var b=i.createElement("li",{className:"waves-effect"},i.createElement("a",{onClick:function(){var e=_+1;t.handleChangeSelectedFeature(e)}},i.createElement("i",{className:"material-icons"},"chevron_right")));_==this.state.currentFeatures.length&&(b=i.createElement("li",{className:"disabled"},i.createElement("a",null,i.createElement("i",{className:"material-icons"},"chevron_right")))),a=i.createElement("ul",{className:"pagination margin-auto"},x,this.state.currentFeatures.map(function(e,n){return n+1==_?i.createElement("li",{key:n,className:"active omh-color"},i.createElement("a",null,n+1)):i.createElement("li",{key:n,className:"waves-effect"},i.createElement("a",{onClick:function(){var e=n+1;t.handleChangeSelectedFeature(e)}},n+1))}),b)}}else s=this.state.currentFeatures.length>1?i.createElement("div",null,this.__("Showing Feature 1 of")," ",this.state.currentFeatures.length,i.createElement("p",null,this.__("Click to View All"))):i.createElement("h6",{className:"center-align",style:{margin:"auto"}},this.__("Click to Select"));var E=!1;this.props.showButtons&&this.state.selected&&this.state.currentFeatures.length>1&&(E=!0);var w="none",S="";if(this.state.currentFeatures.length>0&&this.state.layerLoaded){w="flex";var I=[];g=this.state.currentFeatures[this.state.selectedFeature-1],g&&g.properties&&(I=g.properties);var C;this.state.layer&&(C=this.state.layer.presets),S=i.createElement(r,{attributes:I,selected:this.state.selected,multipleSelected:E,presets:C},i.createElement("div",{style:{position:"absolute",bottom:0,width:"100%",backgroundColor:"#FFF",borderTop:"1px solid #DDD"}},s,a))}var T=o("features","card",this.props.className);return i.createElement("div",{className:T,style:{display:w,maxHeight:this.state.maxHeight}},i.createElement("div",{className:"features-container"},e,n,i.createElement("div",{style:{width:"100%",display:"flex"}},S)))}});t.exports=g},function(t,e,n){"use strict";var i=n(1),r=i.createClass({displayName:"Attributes",propTypes:{attributes:i.PropTypes.object.isRequired,selected:i.PropTypes.bool.isRequired,multipleSelected:i.PropTypes.bool.isRequired,presets:i.PropTypes.array,children:i.PropTypes.element},render:function(){var t=this,e=i.createElement("div",{style:{height:"50px"}});this.props.multipleSelected&&(e=i.createElement("div",{style:{height:"118px"}}));var n="",r="",o=null;if(t.props.attributes.photo_url?o=t.props.attributes.photo_url:t.props.attributes["Photo URL"]&&(o=t.props.attributes["Photo URL"]),o&&(r=i.createElement("img",{src:o,style:{width:"180px",height:"auto"},alt:"feature photo"})),t.props.attributes&&Object.keys(t.props.attributes).length>0)if(this.props.presets){var s=this.props.presets;n=i.createElement("ul",{className:"collection",style:{marginTop:0}},r,s.map(function(e){if("undefined"!=typeof e.showOnMap&&e.showOnMap===!1)return"";var n=t.props.attributes[e.tag];return!n||"string"==typeof n&&"null"===n?"":("string"==typeof n&&n.startsWith("http")&&(n=i.createElement("a",{target:"_blank",href:n},n)),i.createElement("li",{key:e.tag,style:{paddingLeft:"5px",paddingRight:"5px",paddingTop:0,paddingBottom:0},className:"collection-item attribute-collection-item"},i.createElement("p",{style:{color:"rgb(158, 158, 158)",fontSize:"11px"}},e.label),i.createElement("p",{style:{wordWrap:"break-word"}},n)))}))}else n=i.createElement("ul",{className:"collection",style:{marginTop:0}},r,Object.keys(t.props.attributes).map(function(e){if("osm_id"!==e||"layer_id"!==e||"maphubs_host"!==e){var n=t.props.attributes[e];return"string"==typeof n&&n.startsWith("http")&&(n=i.createElement("a",{target:"_blank",href:n},n)),i.createElement("li",{key:e,style:{padding:5},className:"collection-item attribute-collection-item"},i.createElement("p",{style:{color:"rgb(158, 158, 158)",fontSize:"11px"}},e),i.createElement("p",{style:{wordWrap:"break-word"}},n))}}));var a="0px";return this.props.selected&&(a="25px"),i.createElement("div",{style:{marginTop:a,width:"100%",overflowY:"auto",height:"calc(100% - 85px)",borderTop:"1px solid #DDD"}},n,e,this.props.children)}});t.exports=r},function(t,e){"use strict";t.exports={getBaseUrl:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n?(t=MAPHUBS_CONFIG.host_internal,e=MAPHUBS_CONFIG.internal_port):(t=MAPHUBS_CONFIG.host,e=MAPHUBS_CONFIG.port);var i="http://";MAPHUBS_CONFIG.https&&!n&&(i="https://");var r=i+t;return 80!=e&&(r+=":"+e),r},getUrlParameter:function(t){if("undefined"!=typeof window){var e,n,i=decodeURIComponent(window.location.search.substring(1)),r=i.split("&");for(n=0;n<r.length;n++)if(e=r[n].split("="),e[0]===t)return void 0===e[1]||e[1]}}}},function(t,e,n){"use strict";var i=n(1),r=n(612),o=n(172),s=n(614),a=n(288),u=i.createClass({displayName:"GroupTag",propTypes:{group:i.PropTypes.string.isRequired,size:i.PropTypes.number,chipWidth:i.PropTypes.number,fontSize:i.PropTypes.number,showTooltip:i.PropTypes.bool,className:i.PropTypes.string},getDefaultProps:function(){return{size:20,chipWidth:100,fontSize:10,showTooltip:!1}},componentDidMount:function(){this.props.showTooltip&&o(".group-tag-tooltip").tooltip(),o(this.refs.groupimg).error(function(){o(this).attr("src","/assets/missing_group.png")})},shouldComponentUpdate:function(t,e){return!s(this.props,t)||!s(this.state,e)},render:function(){var t=r.getBaseUrl(),e=this.props.size+"px",n=this.props.fontSize+"px",o=this.props.size.toString()+"px",s=this.props.chipWidth.toString()+"px",u=a(["chip","truncate",this.props.className]);return i.createElement("div",{className:u,style:{height:e,width:s,minWidth:"75px",marginBottom:"2px",border:"0.25pt solid #E4E4E4",lineHeight:e,fontSize:n}},i.createElement("a",{target:"_blank",className:"no-padding",href:t+"/group/"+this.props.group,style:{height:"initial"}},i.createElement("div",{className:"valign-wrapper",style:{height:e,width:o,backgroundColor:"white",marginRight:"0px",marginLeft:"-12px",float:"left"}},i.createElement("img",{ref:"groupimg",className:"valign",src:t+"/group/"+this.props.group+"/thumbnail",style:{height:e,width:"auto",marginRight:0,marginLeft:0,borderRadius:0},alt:"Group Photo"}))),i.createElement("a",{target:"_blank",className:"omh-accent-text group-tag-tooltip no-padding",style:{height:e,width:"auto",display:"inherit",lineHeight:e,fontSize:n},"data-position":"top","data-delay":"50","data-tooltip":this.props.group,href:t+"/group/"+this.props.group},this.props.group))}});t.exports=u},,,,function(t,e,n){"use strict";var i=n(174),r=i.createActions({changeBaseMap:{},getBaseMapFromName:{},setBaseMap:{},updateMapPosition:{}});t.exports=r},function(t,e,n){"use strict";var i=n(174),r=n(193)(i),o=n(617),s=n(205)("stores/BaseMapStore"),a=n(200),u=n(619),l=n(621),c=n(623),h=n(624);t.exports=i.createStore({mixins:[r],listenables:o,getInitialState:function(){return{baseMap:"default",attribution:"© Mapbox © OpenStreetMap",bingImagerySet:null,updateWithMapPosition:!1}},setBaseMap:function(t){this.setState({baseMap:t})},debouncedUpdateMapPosition:c(function(t,e){var n=this;if(n.position){var i={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[n.position.lng,n.position.lat]}},r={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t.lng,t.lat]}},o=h(i,r,"kilometers");if(s("map moved: "+o+"km"),o<50&&Math.abs(n.position.zoom-t.zoom)<1)return void(n.position=t)}var c=[e[0][0],e[0][1],e[1][0],e[1][1]],f=t.lat,p=t.lng,d=Math.round(t.zoom),g="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.state.bingImagerySet+"/"+f+","+p+"?zl="+d+"&include=ImageryProviders&key="+MAPHUBS_CONFIG.BING_KEY,m="© Bing Maps";a.get(g).end(function(e,i){if(e)s(e);else{var r=i.body,o=[],a=u(c);if(r.resourceSets&&r.resourceSets.length>0&&r.resourceSets[0].resources&&r.resourceSets[0].resources.length>0&&r.resourceSets[0].resources[0].imageryProviders&&r.resourceSets[0].resources[0].imageryProviders.length>0){var h=r.resourceSets[0].resources[0],f="";h.vintageEnd&&(f='<b class="no-margin no-padding">('+h.vintageEnd+")</b>");var p=h.imageryProviders;p.forEach(function(t){for(var e=0;e<t.coverageAreas.length;e++){var n=u(t.coverageAreas[e].bbox);l(a,n)&&d>=t.coverageAreas[e].zoomMin&&d<=t.coverageAreas[e].zoomMax&&o.push(t.attribution)}}),m=m+": "+f+" "+o.toString()}n.position=t,n.setState({attribution:m})}})}),updateMapPosition:function(t,e){this.state.updateWithMapPosition&&this.debouncedUpdateMapPosition(t,e)},initialize:function(t){},getBingSource:function(t,e){var n="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+t+"?key="+MAPHUBS_CONFIG.BING_KEY+"&include=ImageryProviders";a.get(n).end(function(t,n){if(t)s(t);else{var i=n.body;e(i)}})},getBaseMapFromName:function(t,e){var n,i,r=this,o=!0;if(t||(t="default"),"default"==t?(n="light-v9",o=!0):"dark"==t?(n="dark-v9",o=!0):"outdoors"==t?(n="outdoors-v9",o=!0):"streets"==t?(n="streets-v9",o=!0):"mapbox-satellite"==t?(n="satellite-streets-v9",o=!0):"stamen-toner"==t?(i={version:8,sources:{"stamen-toner-tiles":{type:"raster",tiles:["https://stamen-tiles-a.a.ssl.fastly.net/toner/{z}/{x}/{y}.png","https://stamen-tiles-b.a.ssl.fastly.net/toner/{z}/{x}/{y}.png","https://stamen-tiles-c.a.ssl.fastly.net/toner/{z}/{x}/{y}.png","https://stamen-tiles-d.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"stamen-toner-tiles",type:"raster",source:"stamen-toner-tiles",minzoom:0,maxzoom:22}]},this.setState({attribution:"Stamen Design (CC BY 3.0) Data by OpenStreetMap (ODbL)",updateWithMapPosition:!1}),e(i)):"stamen-terrain"==t?(i={version:8,sources:{"stamen-terrain-tiles":{type:"raster",tiles:["https://stamen-tiles-a.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png","https://stamen-tiles-b.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png","https://stamen-tiles-c.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png","https://stamen-tiles-d.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"stamen-terrain-tiles",type:"raster",source:"stamen-terrain-tiles",minzoom:0,maxzoom:22}]},this.setState({attribution:"Stamen Design (CC BY 3.0) Data by OpenStreetMap (ODbL)",updateWithMapPosition:!1}),e(i)):"stamen-watercolor"==t?(i={version:8,sources:{"stamen-watercolor-tiles":{type:"raster",tiles:["https://stamen-tiles-a.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png","https://stamen-tiles-b.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png","https://stamen-tiles-c.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png","https://stamen-tiles-d.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"stamen-watercolor-tiles",type:"raster",source:"stamen-watercolor-tiles",minzoom:0,maxzoom:22}]},this.setState({attribution:" Stamen Design (CC BY 3.0) Data by OpenStreetMap (CC BY SA)",updateWithMapPosition:!1}),e(i)):"landsat-2014"==t?(i={version:8,sources:{"landsat-2014":{type:"raster",tiles:["https://mapforenvironment.org/raster/congo-landsat-2014/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"landsat-2014",type:"raster",source:"landsat-2014",minzoom:3,maxzoom:12}]},this.setState({attribution:" Landsat 7",updateWithMapPosition:!1}),e(i)):"bing-satellite"==t&&(i={version:8,sources:{"bing-tiles":{type:"raster",tiles:["https://ecn.t0.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=5522&mkt=en-us","https://ecn.t1.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=5522&mkt=en-us","https://ecn.t2.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=5522&mkt=en-us","https://ecn.t3.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=5522&mkt=en-us"],tileSize:256}},layers:[{id:"bing-tiles",type:"raster",source:"bing-tiles",minzoom:0,maxzoom:22}]},this.getBingSource("Aerial",function(){r.setState({attribution:"© Bing Maps",bingImagerySet:"Aerial",updateWithMapPosition:!0}),e(i)})),n){var s="mapbox://styles/mapbox/"+n;o&&(s+="?optimize=true"),this.setState({attribution:"© Mapbox © OpenStreetMap",updateWithMapPosition:!1}),e(s)}}})},function(t,e,n){var i=n(620).polygon;t.exports=function(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]],o=[t[2],t[1]];return i([[e,o,r,n,e]])}},function(t,e){function n(t,e){return{type:"Feature",properties:e||{},geometry:t}}t.exports.feature=n,t.exports.point=function(t,e){if(!Array.isArray(t))throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");return n({type:"Point",coordinates:t.slice()},e)},t.exports.polygon=function(t,e){if(!t)throw new Error("No coordinates passed");for(var i=0;i<t.length;i++){var r=t[i];if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<r[r.length-1].length;o++)if(r[r.length-1][o]!==r[0][o])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e)},t.exports.lineString=function(t,e){if(!t)throw new Error("No coordinates passed");return n({type:"LineString",coordinates:t},e)},t.exports.featureCollection=function(t){return{type:"FeatureCollection",features:t}},t.exports.multiLineString=function(t,e){if(!t)throw new Error("No coordinates passed");return n({type:"MultiLineString",coordinates:t},e)},t.exports.multiPoint=function(t,e){if(!t)throw new Error("No coordinates passed");return n({type:"MultiPoint",coordinates:t},e)},t.exports.multiPolygon=function(t,e){if(!t)throw new Error("No coordinates passed");return n({type:"MultiPolygon",coordinates:t},e)},t.exports.geometryCollection=function(t,e){return n({type:"GeometryCollection",geometries:t},e)};var i={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373,feet:20908792.65};t.exports.radiansToDistance=function(t,e){var n=i[e||"kilometers"];if(void 0===n)throw new Error("Invalid unit");return t*n},t.exports.distanceToRadians=function(t,e){var n=i[e||"kilometers"];if(void 0===n)throw new Error("Invalid unit");return t/n},t.exports.distanceToDegrees=function(t,e){var n=i[e||"kilometers"];if(void 0===n)throw new Error("Invalid unit");return t/n*57.2958}},function(t,e,n){var i=n(622);t.exports=function(t,e){var n,r;n="Feature"===t.type?t.geometry:t,r="Feature"===e.type?e.geometry:e;var o=new i.io.GeoJSONReader,s=o.read(JSON.stringify(n)),a=o.read(JSON.stringify(r)),u=s.intersection(a);if(!u.isEmpty()){var l=new i.io.GeoJSONWriter,c=l.write(u);return{type:"Feature",properties:{},geometry:c}}}},function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function n(){}function i(){}function r(){}function o(){}function s(){}function a(){}function u(){}function l(t){this.name="RuntimeException",this.message=t,this.stack=(new Error).stack,Error.call(this,t)}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function h(){if(0===arguments.length)l.call(this);else if(1===arguments.length){var t=arguments[0];l.call(this,t)}}function f(){}function p(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)p.call(this,0,0);else if(1===arguments.length){var t=arguments[0];p.call(this,t.x,t.y,t.z)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];p.call(this,e,n,p.NULL_ORDINATE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.x=i,this.y=r,this.z=o}}function d(){if(this.dimensionsToTest=2,0===arguments.length)d.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new i("only 2 or 3 dimensions may be specified");this.dimensionsToTest=t}}function g(){}function m(){}function y(t){this.message=t||""}function v(){}function _(t){this.message=t||""}function x(t){this.message=t||""}function b(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function E(){if(b.apply(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}function w(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof p){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof w){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.init(r,o,s,a)}}function S(){}function I(){S.call(this,"Projective point not representable on the Cartesian plane.")}function C(){}function T(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1}function N(){}function L(t){this.str=t}function M(t){this.value=t}function P(){}function A(){if(this.hi=0,this.lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof A){var e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){var n=arguments[0];A.call(this,A.parse(n))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}}function R(){}function O(){}function F(){}function D(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof D&&arguments[1]instanceof D){var i=arguments[0],r=arguments[1];this.x=i.y*r.w-r.y*i.w,this.y=r.x*i.w-i.x*r.w,this.w=i.x*r.y-r.x*i.y}else if(arguments[0]instanceof p&&arguments[1]instanceof p){var o=arguments[0],s=arguments[1];this.x=o.y-s.y,this.y=s.x-o.x,this.w=o.x*s.y-s.x*o.y}}else if(3===arguments.length){var a=arguments[0],u=arguments[1],l=arguments[2];this.x=a,this.y=u,this.w=l}else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],d=arguments[3],g=c.y-h.y,m=h.x-c.x,y=c.x*h.y-h.x*c.y,v=f.y-d.y,_=d.x-f.x,x=f.x*d.y-d.x*f.y;this.x=m*x-_*y,this.y=v*y-g*x,this.w=g*_-v*m}}function z(){}function k(){}function B(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function j(){}function V(){}function G(){}function U(){}function q(){}function X(){}function Y(){}function W(){}function H(){}function Z(){}function J(){}function $(){}function K(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function Q(t){return null==t?ts:t.color}function tt(t){return null==t?null:t.parent}function et(t,e){null!==t&&(t.color=e)}function nt(t){return null==t?null:t.left}function it(t){return null==t?null:t.right}function rt(){this.root_=null,this.size_=0}function ot(){}function st(){}function at(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function ut(){}function lt(){}function ct(){}function ht(){}function ft(){this.geometries=null;var t=arguments[0],e=arguments[1];if(B.call(this,e),null===t&&(t=[]),B.hasNullElements(t))throw new i("geometries must not contain null elements");this.geometries=t}function pt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function dt(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,1===arguments.length){var t=arguments[0];dt.call(this,t,V.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n}}function gt(){this.count=null}function mt(){}function yt(){}function vt(){}function _t(){}function xt(){}function bt(){}function Et(){}function wt(){}function St(){this.points=null;var t=arguments[0],e=arguments[1];B.call(this,e),this.init(t)}function It(){}function Ct(){this.coordinates=null;var t=arguments[0],e=arguments[1];B.call(this,e),this.init(t)}function Tt(){}function Nt(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(B.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),B.hasNullElements(e))throw new i("holes must not contain null elements");if(t.isEmpty()&&B.hasNonEmptyElements(e))throw new i("shell is empty but holes are not");this.shell=t,this.holes=e}function Lt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function Mt(){if(arguments[0]instanceof p&&arguments[1]instanceof ie){var t=arguments[0],e=arguments[1];Mt.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(T(arguments[0],O)&&arguments[1]instanceof ie){var n=arguments[0],i=arguments[1];St.call(this,n,i),this.validateConstruction()}}function Pt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function At(){if(this.factory=null,this.isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.factory=t}}function Rt(){}function Ot(){}function Ft(){}function Dt(){}function zt(){if(this.dimension=3,this.coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];zt.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this.coordinates[n]=new p}else if(T(arguments[0],O)){var i=arguments[0];if(null===i)return this.coordinates=new Array(0).fill(null),null;this.dimension=i.getDimension(),this.coordinates=new Array(i.size()).fill(null);for(var n=0;n<this.coordinates.length;n++)this.coordinates[n]=i.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this.coordinates=r,this.dimension=o,null===r&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this.coordinates=new Array(s).fill(null),this.dimension=a;for(var n=0;n<s;n++)this.coordinates[n]=new p}}function kt(){}function Bt(t,e){return t===e||t!==t&&e!==e}function jt(t,e){function n(t){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(t&&Vt.call(this,t))):new n(t)}return e||rs(t,"size",{get:Kt}),t.constructor=n,n.prototype=t,n}function Vt(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}function Gt(t){return this.has(t)&&(this._keys.splice(is,1),this._values.splice(is,1),this._itp.forEach(function(t){is<t[0]&&t[0]--})),is>-1}function Ut(t){return this.has(t)?this._values[is]:void 0}function qt(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||0===e)for(is=t.length;is--&&!Bt(t[is],e););else is=t.indexOf(e);return is>-1}function Xt(t){return qt.call(this,this._keys,t)}function Yt(t,e){return this.has(t)?this._values[is]=e:this._values[this._keys.push(t)-1]=e,this}function Wt(){(this._keys||0).length=this._values.length=0}function Ht(){return $t(this._itp,this._keys)}function Zt(){return $t(this._itp,this._values)}function Jt(){return $t(this._itp,this._keys,this._values)}function $t(t,e,n){var i=[0],r=!1;return t.push(i),{next:function(){var o,s=i[0];return!r&&s<e.length?(o=n?[e[s],n[s]]:e[s],i[0]++):(r=!0,t.splice(t.indexOf(i),1)),{done:r,value:o}}}}function Kt(){return this._values.length}function Qt(t,e){for(var n=this.entries();;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this)}}function te(){this.map_=new ss}function ee(){if(this.modelType=null,this.scale=null,0===arguments.length)this.modelType=ee.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ne){var t=arguments[0];this.modelType=t,t===ee.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this.modelType=ee.FIXED,this.setScale(e)}else if(arguments[0]instanceof ee){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale}}function ne(){this.name=null;var t=arguments[0];this.name=t,ne.nameToTypeMap.put(t,this)}function ie(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,0===arguments.length)ie.call(this,new ee,0);else if(1===arguments.length){if(T(arguments[0],z)){var t=arguments[0];ie.call(this,new ee,0,t)}else if(arguments[0]instanceof ee){
var e=arguments[0];ie.call(this,e,0,ie.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];ie.call(this,n,i,ie.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.precisionModel=r,this.coordinateSequenceFactory=s,this.SRID=o}}function re(t){this.geometryFactory=t||new ie}function oe(t){this.parser=new re(t)}function se(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new p,this.intPt[1]=new p,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function ae(){se.apply(this)}function ue(){}function le(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function ce(){}function he(){if(this.p0=null,this.p1=null,0===arguments.length)he.call(this,new p,new p);else if(1===arguments.length){var t=arguments[0];he.call(this,t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3];he.call(this,new p(i,r),new p(o,s))}}function fe(){if(this.matrix=null,0===arguments.length)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(lt.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];fe.call(this),this.set(t)}else if(arguments[0]instanceof fe){var e=arguments[0];fe.call(this),this.matrix[C.INTERIOR][C.INTERIOR]=e.matrix[C.INTERIOR][C.INTERIOR],this.matrix[C.INTERIOR][C.BOUNDARY]=e.matrix[C.INTERIOR][C.BOUNDARY],this.matrix[C.INTERIOR][C.EXTERIOR]=e.matrix[C.INTERIOR][C.EXTERIOR],this.matrix[C.BOUNDARY][C.INTERIOR]=e.matrix[C.BOUNDARY][C.INTERIOR],this.matrix[C.BOUNDARY][C.BOUNDARY]=e.matrix[C.BOUNDARY][C.BOUNDARY],this.matrix[C.BOUNDARY][C.EXTERIOR]=e.matrix[C.BOUNDARY][C.EXTERIOR],this.matrix[C.EXTERIOR][C.INTERIOR]=e.matrix[C.EXTERIOR][C.INTERIOR],this.matrix[C.EXTERIOR][C.BOUNDARY]=e.matrix[C.EXTERIOR][C.BOUNDARY],this.matrix[C.EXTERIOR][C.EXTERIOR]=e.matrix[C.EXTERIOR][C.EXTERIOR]}}function pe(){this.areaBasePt=null,this.triangleCent3=new p,this.areasum2=0,this.cg3=new p,this.lineCentSum=new p,this.totalLength=0,this.ptCount=0,this.ptCentSum=new p;var t=arguments[0];this.areaBasePt=null,this.add(t)}function de(t){this.message=t||""}function ge(){this.array_=[]}function me(){this.treeSet=new at,this.list=new b}function ye(){if(this.geomFactory=null,this.inputPts=null,1===arguments.length){var t=arguments[0];ye.call(this,ye.extractCoordinates(t),t.getFactory())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputPts=me.filterCoordinates(e),this.geomFactory=n}}function ve(){this.origin=null;var t=arguments[0];this.origin=t}function _e(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function xe(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new he,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof St&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];xe.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.srcPts=n,this._isClosed=xe.isClosed(n),this.snapTolerance=i}}function be(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function Ee(){if(_e.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.snapTolerance=n,this.snapPts=i,this.isSelfSnap=r}}function we(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function Se(){this.commonCoord=null,this.ccFilter=new Ie}function Ie(){this.commonBitsX=new we,this.commonBitsY=new we}function Ce(){this.trans=null;var t=arguments[0];this.trans=t}function Te(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function Ne(){if(this.boundaryRule=V.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new i("Rule must be non-null");this.boundaryRule=t}}function Le(){}function Me(){}function Pe(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Ae(){}function Re(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function Oe(){this._size=null,this.items=null,this._size=0,this.items=new b,this.items.add(null)}function Fe(){}function De(){}function ze(){if(this.childBoundables=new b,this.bounds=null,this.level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.level=t}}function ke(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function Be(){if(this.root=null,this.built=!1,this.itemBoundables=new b,this.nodeCapacity=null,0===arguments.length)Be.call(this,Be.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];f.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function je(){}function Ve(){}function Ge(){if(0===arguments.length)Ge.call(this,Ge.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];Be.call(this,t)}}function Ue(){var t=arguments[0];ze.call(this,t)}function qe(){}function Xe(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.segString=t,this.coord=new p(e),this.segmentIndex=n,this.segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}function Ye(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function We(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function He(){}function Ze(){this.nodeList=new Ye(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Je(){this.tempEnv1=new w,this.tempEnv2=new w,this.overlapSeg1=new he,this.overlapSeg2=new he}function $e(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=i}function Ke(){}function Qe(){}function tn(){}function en(){if(this.segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}function nn(){if(this.monoChains=new b,this.index=new Ge,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];en.call(this,t)}}function rn(){Je.apply(this),this.si=null;var t=arguments[0];this.si=t}function on(){if(this.pt=null,1===arguments.length){var t=arguments[0];l.call(this,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];l.call(this,on.msgWithCoord(e,n)),this.name="TopologyException",this.pt=new p(n)}}function sn(){}function an(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new b,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function un(){this.li=new ae,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function ln(){this.nv=null;var t=arguments[0];this.nv=new un(ln.toSegmentStrings(t))}function cn(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function hn(){}function fn(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[hn.ON]=e}else if(arguments[0]instanceof fn){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.init(3),this.location[hn.ON]=r,this.location[hn.LEFT]=o,this.location[hn.RIGHT]=s}}function pn(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new fn(t),this.elt[1]=new fn(t)}else if(arguments[0]instanceof pn){var e=arguments[0];this.elt[0]=new fn(e.elt[0]),this.elt[1]=new fn(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new fn(C.NONE),this.elt[1]=new fn(C.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.elt[0]=new fn(r,o,s),this.elt[1]=new fn(r,o,s)}else if(4===arguments.length){var a=arguments[0],u=arguments[1],l=arguments[2],c=arguments[3];this.elt[0]=new fn(C.NONE,C.NONE,C.NONE),this.elt[1]=new fn(C.NONE,C.NONE,C.NONE),this.elt[a].setLocations(u,l,c)}}function dn(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new b,this.pts=new b,this.label=new pn(C.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new b,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function gn(){var t=arguments[0],e=arguments[1];dn.call(this,t,e)}function mn(){var t=arguments[0],e=arguments[1];dn.call(this,t,e)}function yn(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.label=t}}function vn(){yn.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new pn(0,C.NONE)}function _n(){this.nodeMap=new rt,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function xn(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,1===arguments.length){var t=arguments[0];this.edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];xn.call(this,e,n,i,null)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];xn.call(this,r),this.init(o,s),this.label=a}}function bn(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(xn.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function En(){}function wn(){if(this.edges=new b,this.nodes=null,this.edgeEndList=new b,0===arguments.length)this.nodes=new _n(new En);else if(1===arguments.length){var t=arguments[0];this.nodes=new _n(t)}}function Sn(){this.geometryFactory=null,this.shellList=new b;var t=arguments[0];this.geometryFactory=t}function In(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new b,this.resultLineList=new b;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function Cn(){this.op=null,this.geometryFactory=null,this.resultPointList=new b;var t=arguments[0],e=arguments[1];arguments[2],this.op=t,this.geometryFactory=e}function Tn(){}function Nn(){this.geom=null;var t=arguments[0];this.geom=t}function Ln(){this.edgeMap=new rt,this.edgeList=null,this.ptInAreaLocation=[C.NONE,C.NONE]}function Mn(){Ln.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function Pn(){En.apply(this)}function An(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function Rn(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.eventType=Rn.DELETE,this.xValue=t,this.insertEvent=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.eventType=Rn.INSERT,this.label=n,this.xValue=i,this.obj=r}}function On(){}function Fn(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function Dn(){On.apply(this),this.events=new b,this.nOverlaps=null}function zn(){this.min=r.POSITIVE_INFINITY,this.max=r.NEGATIVE_INFINITY}function kn(){}function Bn(){zn.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function jn(){zn.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function Vn(){this.leaves=new b,this.root=null,this.level=0}function Gn(){if(this.lines=null,this.isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this.lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n}}function Un(){this.items=new b}function qn(){this.index=null;var t=arguments[0];if(!T(t,Tt))throw new i("Argument must be Polygonal");this.index=new Yn(t)}function Xn(){this.counter=null;var t=arguments[0];this.counter=t}function Yn(){this.index=new Vn;var t=arguments[0];this.init(t)}function Wn(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new p(t),this.segmentIndex=e,this.dist=n}function Hn(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function Zn(){}function Jn(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new w,this.env2=new w;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Zn;this.startIndex=e.getChainStartIndices(this.pts)}function $n(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this.depth[t][e]=$n.NULL_VALUE}function Kn(){if(yn.apply(this),this.pts=null,this.env=null,this.eiList=new Hn(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new $n,this.depthDelta=0,1===arguments.length){var t=arguments[0];Kn.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n}}function Qn(){if(wn.apply(this),this.parentGeom=null,this.lineEdgeMap=new te,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new Ne,2===arguments.length){var t=arguments[0],e=arguments[1];Qn.call(this,t,e,V.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.argIndex=n,this.parentGeom=i,this.boundaryNodeRule=r,null!==i&&this.add(i)}}function ti(){if(this.li=new ae,this.resultPrecisionModel=null,this.arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new Qn(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];ti.call(this,e,n,V.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];i.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new Qn(0,i,o),this.arg[1]=new Qn(1,r,o)}}function ei(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=ei.orientation(t)}function ni(){this.edges=new b,this.ocaMap=new rt}function ii(){this.ptLocator=new Ne,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new ni,this.resultPolyList=new b,this.resultLineList=new b,this.resultPointList=new b;var t=arguments[0],e=arguments[1];ti.call(this,t,e),this.graph=new wn(new Pn),this.geomFact=t.getFactory()}function ri(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function oi(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function si(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function ai(){this.poly=null,this.centreY=null,this.hiY=r.MAX_VALUE,this.loY=-r.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=si.avg(this.loY,this.hiY)}function ui(){this.centroid=null,this.minDistance=r.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null===this.interiorPoint&&this.addEndpoints(t)}function li(){this.centroid=null,this.minDistance=r.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function ci(){this.tempEnv1=new w,this.selectedSegment=new he}function hi(){this.items=new b,this.subnode=[null,null]}function fi(){if(this.min=null,this.max=null,0===arguments.length)this.min=0,this.max=0;else if(1===arguments.length){var t=arguments[0];this.init(t.min,t.max)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.init(e,n)}}function pi(){}function di(t,e){var n,i,r,o,s={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},a={32:8,64:11}[t];if(o||(n=e<0||1/e<0,isFinite(e)||(o=s[t],n&&(o.d+=1<<t/4-1),i=Math.pow(2,a)-1,r=0)),!o){for(i={32:127,64:1023}[t],r=Math.abs(e);r>=2;)i++,r/=2;for(;r<1&&i>0;)i--,r*=2;i<=0&&(r/=2),32===t&&i>254&&(o={d:n?255:127,c:128,b:0,a:0},i=Math.pow(2,a)-1,r=0)}return i}function gi(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function mi(){hi.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function yi(){}function vi(){hi.apply(this)}function _i(){this.root=null,this.minExtent=1,this.root=new vi}function xi(){}function bi(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new fi;var t=arguments[0];this.ring=t,this.buildIndex()}function Ei(){ci.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function wi(){}function Si(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function Ii(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function Ci(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new he,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,1===arguments.length){var t=arguments[0];Ci.call(this,t,!1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isConvex=n}}function Ti(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function Ni(){_e.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function Li(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function Mi(){this._isMarked=!1;var t=arguments[0];Li.call(this,t)}function Pi(){this.vertexMap=new te}function Ai(){this._isStart=!1;var t=arguments[0];Mi.call(this,t)}function Ri(){Pi.apply(this)}function Oi(){this.result=null,this.factory=null,this.graph=null,this.lines=new b,this.nodeEdgeStack=new ge,this.ringStartEdge=null,this.graph=new Ri}function Fi(){this.items=new b,this.subnode=new Array(4).fill(null)}function Di(){this.pt=new p,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function zi(){Fi.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function ki(){Fi.apply(this)}function Bi(){this.root=null,this.minExtent=1,this.root=new ki}function ji(t){this.geometryFactory=t||new ie}function Vi(t){this.geometryFactory=t||new ie,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new ji(this.geometryFactory)}function Gi(){this.parser=new ji(this.geometryFactory)}function Ui(t){this.geometryFactory=t||new ie,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new re(this.geometryFactory)}function qi(t){return[t.x,t.y]}function Xi(t,e){this.geometryFactory=t||new ie,this.ol=e||"undefined"!=typeof ol&&ol}function Yi(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];Yi.call(this,t,e,0,0)}else if(4===arguments.length){var n=arguments[0],i=arguments[1];arguments[2],arguments[3],this.noder=n,this.scaleFactor=i,this.isScaled=!this.isIntegerPrecision()}}function Wi(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,1===arguments.length){var t=arguments[0];this.inputGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2)}}function Hi(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function Zi(){if(this.quadrantSegments=Zi.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=Zi.CAP_ROUND,this.joinStyle=Zi.JOIN_ROUND,this.mitreLimit=Zi.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=Zi.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(r),this.setJoinStyle(o),this.setMitreLimit(s)}}function Ji(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function $i(){this.array_=[]}function Ki(){this.finder=null,this.dirEdgeList=new b,this.nodes=new b,this.rightMostCoord=null,this.env=null,this.finder=new Ji}function Qi(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=ce.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function tr(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new b}function er(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new he,this.seg1=new he,this.offset0=new he,this.offset1=new he,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new ae,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Zi.JOIN_ROUND&&(this.closingSegLengthFactor=er.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function nr(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function ir(){this.subgraphs=null,this.seg=new he,this.cga=new ce;var t=arguments[0];this.subgraphs=t}function rr(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new he(t),this.leftDepth=e}function or(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new b;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function sr(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function ar(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new ni;var t=arguments[0];this.bufParams=t}function ur(){this.li=new ae,this.segStrings=null;var t=arguments[0];this.segStrings=t}function lr(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,e<=0)throw new i("Scale factor must be non-zero");1!==e&&(this.pt=new p(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new p,this.p1Scaled=new p),this.initCorners(this.pt)}function cr(){this.index=null;var t=arguments[0];this.index=t}function hr(){ci.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function fr(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new b}function pr(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new ae,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function dr(){if(this.argGeom=null,this.distance=null,this.bufParams=new Zi,this.resultGeometry=null,this.saveException=null,1===arguments.length){var t=arguments[0];this.argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n}}function gr(){this.comps=null;var t=arguments[0];this.comps=t}function mr(){if(this.component=null,this.segIndex=null,this.pt=null,2===arguments.length){var t=arguments[0],e=arguments[1];mr.call(this,t,mr.INSIDE_AREA,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.component=n,this.segIndex=i,this.pt=r}}function yr(){this.pts=null;var t=arguments[0];this.pts=t}function vr(){this.locations=null;var t=arguments[0];this.locations=t}function _r(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new Ne,this.minDistanceLocation=null,this.minDistance=r.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];_r.call(this,t,e,0)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=i,this.terminateDistance=o}}function xr(){this.factory=null,this.directedEdges=new b,this.coordinates=null;var t=arguments[0];this.factory=t}function br(){this._isMarked=!1,this._isVisited=!1,this.data=null}function Er(){br.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.from=t,this.to=e,this.edgeDirection=i,this.p0=t.getCoordinate(),this.p1=n;var r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y;this.quadrant=Ke.quadrant(r,o),this.angle=Math.atan2(o,r)}function wr(){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];Er.call(this,t,e,n,i)}function Sr(){if(br.apply(this),this.dirEdge=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}function Ir(){this.outEdges=new b,this.sorted=!1}function Cr(){if(br.apply(this),this.pt=null,this.deStar=null,1===arguments.length){var t=arguments[0];Cr.call(this,t,new Ir)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pt=e,this.deStar=n}}function Tr(){Sr.apply(this),this.line=null;var t=arguments[0];this.line=t}function Nr(){this.nodeMap=new rt}function Lr(){this.edges=new K,this.dirEdges=new K,this.nodeMap=new Nr}function Mr(){Lr.apply(this)}function Pr(){this.graph=new Mr,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function Ar(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];Er.call(this,t,e,n,i)}function Rr(){Sr.apply(this),this.line=null;var t=arguments[0];this.line=t}function Or(){this.geometryFactory=new ie,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function Fr(){}function Dr(){if(this.edgeEnds=new b,1===arguments.length){var t=arguments[0];Dr.call(this,null,t)}else if(2===arguments.length){var e=(arguments[0],arguments[1]);xn.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new pn(e.getLabel())),this.insert(e)}}function zr(){Ln.apply(this)}function kr(){var t=arguments[0],e=arguments[1];vn.call(this,t,e)}function Br(){En.apply(this)}function jr(){this.nodes=new _n(new Br)}function Vr(){this.li=new ae,this.geomGraph=null,this.nodeGraph=new jr,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function Gr(){this.graph=null,this.rings=new b,this.totalEnv=new w,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function Ur(){if(this.errorType=null,this.pt=null,1===arguments.length){var t=arguments[0];Ur.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.errorType=e,null!==n&&(this.pt=n.copy())}}function qr(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function Xr(){this.factory=null,this.deList=new b,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function Yr(){}function Wr(){Lr.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function Hr(){if(this.lineStringAdder=new Zr(this),this.graph=null,this.dangles=new b,this.cutEdges=new b,this.invalidRingLines=new b,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,0===arguments.length)Hr.call(this,!1);else if(1===arguments.length){var t=arguments[0];this.extractOnlyPolygonal=t}}function Zr(){this.p=null;var t=arguments[0];this.p=t}function Jr(){this.li=new ae,this.ptLocator=new Ne,this.arg=null,this.nodes=new _n(new Br),this.im=null,this.isolatedEdges=new b,this.invalidPoint=null;var t=arguments[0];this.arg=t}function $r(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function Kr(){this.li=new ae,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new p(t.getMinX(),t.getMinY()),this.diagUp1=new p(t.getMaxX(),t.getMaxY()),this.diagDown0=new p(t.getMinX(),t.getMaxY()),this.diagDown1=new p(t.getMaxX(),t.getMinY())}function Qr(){this._isDone=!1}function to(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function eo(){Qr.apply(this),this.rectEnv=null,this._intersects=!1;
var t=arguments[0];this.rectEnv=t}function no(){Qr.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function io(){Qr.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new p,this.p1=new p;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new Kr(this.rectEnv)}function ro(){if(this._relate=null,2===arguments.length){var t=arguments[0],e=arguments[1];ti.call(this,t,e),this._relate=new Jr(this.arg)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];ti.call(this,n,i,r),this._relate=new Jr(this.arg)}}function oo(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=oo.extractFactory(t),this.inputGeoms=t}function so(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function ao(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function uo(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,null===this.inputPolys&&(this.inputPolys=new b)}function lo(){if(this.polygons=new b,this.lines=new b,this.points=new b,this.geomFact=null,1===arguments.length){if(T(arguments[0],m)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof B){var e=arguments[0];this.extract(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.geomFact=i,this.extract(n)}}function co(){At.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function ho(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function fo(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new he;var t=arguments[0];this.pts=t}function po(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function go(){_e.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function mo(){if(this.parent=null,this.index=null,2===arguments.length){var t=arguments[0],e=arguments[1];mo.call(this,t,e,null,-1)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];he.call(this,n,i),this.parent=r,this.index=o}}function yo(){if(this.parentLine=null,this.segs=null,this.resultSegs=new b,this.minimumSize=null,1===arguments.length){var t=arguments[0];yo.call(this,t,2)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.parentLine=e,this.minimumSize=n,this.init()}}function vo(){this.index=new Bi}function _o(){this.querySeg=null,this.items=new b;var t=arguments[0];this.querySeg=t}function xo(){this.li=new ae,this.inputIndex=new vo,this.outputIndex=new vo,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function bo(){this.inputIndex=new vo,this.outputIndex=new vo,this.distanceTolerance=0}function Eo(){this.inputGeom=null,this.lineSimplifier=new bo,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function wo(){_e.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function So(){this.tps=null;var t=arguments[0];this.tps=t}function Io(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function Co(){}function To(){}function No(){}function Lo(){if(this.p=null,1===arguments.length){var t=arguments[0];this.p=new p(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p=new p(e,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.p=new p(i,r,o)}}function Mo(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];Lo.call(this,t)}function Po(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function Ao(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0}function Ro(){}function Oo(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function Fo(){if(this.seg=null,1===arguments.length){if("string"==typeof arguments[0]){var t=arguments[0];l.call(this,t)}else if(arguments[0]instanceof he){var e=arguments[0];l.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new he(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];l.call(this,Fo.msgWithSpatial(n,i)),this.seg=new he(i)}}function Do(){}function zo(){this.visitedKey=0,this.quadEdges=new b,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new he,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/zo.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new Oo(this)}function ko(){}function Bo(){this.triList=new b}function jo(){this.triList=new b}function Vo(){this.coordList=new E,this.triCoords=new b}function Go(){if(this.ls=null,this.data=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.ls=new he(t,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.ls=new he(n,i),this.data=r}else if(6===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],l=arguments[4],c=arguments[5];Go.call(this,new p(o,s,a),new p(u,l,c))}else if(7===arguments.length){var h=arguments[0],f=arguments[1],d=arguments[2],g=arguments[3],m=arguments[4],y=arguments[5],v=arguments[6];Go.call(this,new p(h,f,d),new p(g,m,y),v)}}function Uo(){}function qo(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.p=new p(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.p=new p(n,i),this.left=null,this.right=null,this.count=1,this.data=r}}function Xo(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,0===arguments.length)Xo.call(this,0);else if(1===arguments.length){var t=arguments[0];this.tolerance=t}}function Yo(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function Wo(){this.initialVertices=null,this.segVertices=null,this.segments=new b,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new To,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new b(t),this.tolerance=e,this.kdt=new Xo(e)}function Ho(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Zo(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new rt}function Jo(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function $o(){}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments?parseInt(Number(arguments[1]),10)||0:0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)},e(n.prototype,{interfaces_:function(){return[]},getClass:function(){return n}}),n.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},r.isNaN=function(t){return Number.isNaN(t)},r.doubleToLongBits=function(t){return t},r.longBitsToDouble=function(t){return t},r.isInfinite=function(t){return!Number.isFinite(t)},r.MAX_VALUE=Number.MAX_VALUE,l.prototype=Object.create(Error.prototype),l.prototype.constructor=Error,c(h,l),e(h.prototype,{interfaces_:function(){return[]},getClass:function(){return h}}),e(f.prototype,{interfaces_:function(){return[]},getClass:function(){return f}}),f.shouldNeverReachHere=function(){if(0===arguments.length)f.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new h("Should never reach here"+(null!==t?": "+t:""))}},f.isTrue=function(){if(1===arguments.length){var t=arguments[0];f.isTrue(t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!e)throw null===n?new h:new h(n)}},f.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];f.equals(t,e,null)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(!i.equals(n))throw new h("Expected "+n+" but encountered "+i+(null!==r?": "+r:""))}},e(p.prototype,{setOrdinate:function(t,e){switch(t){case p.X:this.x=e;break;case p.Y:this.y=e;break;case p.Z:this.z=e;break;default:throw new i("Invalid ordinate index: "+t)}},equals2D:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!n.equalsWithTolerance(this.x,e.x,i)&&!!n.equalsWithTolerance(this.y,e.y,i)}},getOrdinate:function(t){switch(t){case p.X:return this.x;case p.Y:return this.y;case p.Z:return this.z}throw new i("Invalid ordinate index: "+t)},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||r.isNaN(this.z)&&r.isNaN(t.z))},equals:function(t){return t instanceof p&&this.equals2D(t)},equalInZ:function(t,e){return n.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{var t=null;return t}catch(t){if(t instanceof CloneNotSupportedException)return f.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}finally{}},copy:function(){return new p(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+p.hashCode(this.x),t=37*t+p.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[o,s,u]},getClass:function(){return p}}),p.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=r.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},e(d.prototype,{compare:function(t,e){var n=t,i=e,r=d.compare(n.x,i.x);if(0!==r)return r;var o=d.compare(n.y,i.y);if(0!==o)return o;if(this.dimensionsToTest<=2)return 0;var s=d.compare(n.z,i.z);return s},interfaces_:function(){return[a]},getClass:function(){return d}}),d.compare=function(t,e){return t<e?-1:t>e?1:r.isNaN(t)?r.isNaN(e)?0:-1:r.isNaN(e)?1:0},p.DimensionalComparator=d,p.serialVersionUID=0x5cbf2c235c7e5800,p.NULL_ORDINATE=r.NaN,p.X=0,p.Y=1,p.Z=2,g.prototype.hasNext=function(){},g.prototype.next=function(){},g.prototype.remove=function(){},m.prototype.add=function(){},m.prototype.addAll=function(){},m.prototype.isEmpty=function(){},m.prototype.iterator=function(){},m.prototype.size=function(){},m.prototype.toArray=function(){},m.prototype.remove=function(){},y.prototype=new Error,y.prototype.name="IndexOutOfBoundsException",v.prototype=Object.create(m.prototype),v.prototype.constructor=v,v.prototype.get=function(){},v.prototype.set=function(){},v.prototype.isEmpty=function(){},_.prototype=new Error,_.prototype.name="NoSuchElementException",x.prototype=new Error,x.prototype.name="OperationNotSupported",b.prototype=Object.create(v.prototype),b.prototype.constructor=b,b.prototype.ensureCapacity=function(){},b.prototype.interfaces_=function(){return[v,m]},b.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},b.prototype.clear=function(){this.array_=[]},b.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},b.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},b.prototype.iterator=function(){return new Ko(this)},b.prototype.get=function(t){if(t<0||t>=this.size())throw new y;return this.array_[t]},b.prototype.isEmpty=function(){return 0===this.array_.length},b.prototype.size=function(){return this.array_.length},b.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},b.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var Ko=function(t){this.arrayList_=t,this.position_=0};Ko.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new _;return this.arrayList_.get(this.position_++)},Ko.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Ko.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},Ko.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},c(E,b),e(E.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=!1,i=t.iterator();i.hasNext();)this.add(i.next(),e),n=!0;return n}return b.prototype.addAll.apply(this,arguments)},clone:function t(){for(var t=b.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},toCoordinateArray:function(){return this.toArray(E.coordArrayType)},add:function(){if(1===arguments.length){var t=arguments[0];b.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof p&&"boolean"==typeof arguments[1]){var i=arguments[0],r=arguments[1];if(!r&&this.size()>=1){var o=this.get(this.size()-1);if(o.equals2D(i))return null}b.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];return this.add(s,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1],c=arguments[2];if(c)for(var h=0;h<u.length;h++)this.add(u[h],l);else for(var h=u.length-1;h>=0;h--)this.add(u[h],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof p){var f=arguments[0],d=arguments[1],g=arguments[2];if(!g){var m=this.size();if(m>0){if(f>0){var y=this.get(f-1);if(y.equals2D(d))return null}if(f<m){var v=this.get(f);if(v.equals2D(d))return null}}}b.prototype.add.call(this,f,d)}}else if(4===arguments.length){var _=arguments[0],x=arguments[1],E=arguments[2],w=arguments[3],S=1;E>w&&(S=-1);for(var h=E;h!==w;h+=S)this.add(_[h],x);return!0}},closeRing:function(){this.size()>0&&this.add(new p(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return E}}),E.coordArrayType=new Array(0).fill(null),e(w.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof w))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new w;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny,i=this.maxx<t.maxx?this.maxx:t.maxx,r=this.maxy<t.maxy?this.maxy:t.maxy;return new w(e,i,n,r)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(1===arguments.length){if(arguments[0]instanceof p){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof w){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this.minx&&n<=this.maxx&&i>=this.miny&&i<=this.maxy}},intersects:function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof p){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this.maxx||n<this.minx||i>this.maxy||i<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(1===arguments.length){if(arguments[0]instanceof p){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof w){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=i,this.maxy=i):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),i<this.miny&&(this.miny=i),i>this.maxy&&(this.maxy=i))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof p){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},centre:function(){return this.isNull()?null:new p((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof p){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof w){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r<o?(this.minx=r,this.maxx=o):(this.minx=o,this.maxx=r),s<a?(this.miny=s,this.maxy=a):(this.miny=a,this.maxy=s)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+p.hashCode(this.minx),t=37*t+p.hashCode(this.maxx),t=37*t+p.hashCode(this.miny),t=37*t+p.hashCode(this.maxy)},interfaces_:function(){return[o,u]},getClass:function(){return w}}),w.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(l>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(i.y,r.y),c=Math.max(i.y,r.y),l>u||c<a))}},w.serialVersionUID=0x51845cd552189800,c(I,S),e(I.prototype,{interfaces_:function(){return[]},getClass:function(){return I}}),e(C.prototype,{interfaces_:function(){return[]},getClass:function(){return C}}),C.toLocationSymbol=function(t){switch(t){case C.EXTERIOR:return"e";case C.BOUNDARY:return"b";case C.INTERIOR:return"i";case C.NONE:return"-"}throw new i("Unknown location value: "+t)},C.INTERIOR=0,C.BOUNDARY=1,C.EXTERIOR=2,C.NONE=-1,e(N.prototype,{interfaces_:function(){return[]},getClass:function(){return N}}),N.log10=function(t){var e=Math.log(t);return r.isInfinite(e)?e:r.isNaN(e)?e:e/N.LOG_10},N.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},N.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},N.wrap=function(t,e){return t<0?e- -t%e:t%e},N.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],i=r;return o>i&&(i=o),s>i&&(i=s),a>i&&(i=a),i}},N.average=function(t,e){return(t+e)/2},N.LOG_10=Math.log(10),L.prototype.append=function(t){this.str+=t},L.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},L.prototype.toString=function(t){return this.str},M.prototype.intValue=function(){return this.value},M.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},M.isNaN=function(t){return Number.isNaN(t)},P.isWhitespace=function(t){return t<=32&&t>=0||127==t},P.toUpperCase=function(t){return t.toUpperCase()},e(A.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),i=A.magnitude(n.hi),r=A.TEN.pow(i);n=n.divide(r),n.gt(A.TEN)?(n=n.divide(A.TEN),i+=1):n.lt(A.ONE)&&(n=n.multiply(A.TEN),i-=1);for(var o=i+1,s=new L,a=A.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(n.hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,s.append(h),n=n.subtract(A.valueOf(l)).multiply(A.TEN),c&&n.selfAdd(A.TEN);var f=!0,p=A.magnitude(n.hi);if(p<0&&Math.abs(p)>=a-u&&(f=!1),!f)break}return e[0]=i,s.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof A){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},equals:function(){if(1===arguments.length){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return 0===this.hi&&0===this.lo},selfSubtract:function(){if(arguments[0]instanceof A){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(1===arguments.length){if(arguments[0]instanceof A){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,l=null,c=null,h=null;return u=this.hi/n,l=A.SPLIT*u,r=l-u,h=A.SPLIT*n,r=l-r,o=u-r,s=h-n,c=u*n,s=h-s,a=n-s,h=r*s-c+r*a+o*s+o*a,l=(this.hi-c-h+this.lo-u*i)/n,h=u+l,this.hi=h,this.lo=u-h+l,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof A){var t=arguments[0],e=null,n=null,i=null,o=null,s=null,a=null,u=null,l=null;s=this.hi/t.hi,a=A.SPLIT*s,e=a-s,l=A.SPLIT*t.hi,e=a-e,n=s-e,i=l-t.hi,u=s*t.hi,i=l-i,o=t.hi-i,l=e*i-u+e*o+n*i+n*o,a=(this.hi-u-l+this.lo-s*t.lo)/t.hi,l=s+a;var c=l,h=s-l+a;return new A(c,h)}if("number"==typeof arguments[0]){var f=arguments[0];return r.isNaN(f)?A.createNaN():A.copy(this).selfDivide(f,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(0===t)return A.valueOf(1);var e=new A(this),n=A.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2===1&&n.selfMultiply(e),i/=2,i>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},ceil:function(){if(this.isNaN())return A.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new A(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()},setValue:function(){if(arguments[0]instanceof A){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return A.valueOf(0);if(this.isNegative())return A.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=A.valueOf(e),i=this.subtract(n.sqr()),r=i.hi*(.5*t);return n.add(r)},selfAdd:function(){if(1===arguments.length){if(arguments[0]instanceof A){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null;return r=this.hi+e,s=r-this.hi,o=r-s,o=e-s+(this.hi-o),a=o+this.lo,n=r+a,i=a+(r-n),this.hi=n+i,this.lo=i+(n-this.hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],n=null,i=null,c=null,h=null,r=null,o=null,s=null,a=null;r=this.hi+u,c=this.lo+l,s=r-this.hi,a=c-this.lo,o=r-s,h=c-a,o=u-s+(this.hi-o),h=l-a+(this.lo-h),s=o+c,n=r+s,i=s+(r-n),s=h+i;var f=n+s,p=s+(n-f);return this.hi=f,this.lo=p,this}},selfMultiply:function(){if(1===arguments.length){if(arguments[0]instanceof A){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,l=null;u=A.SPLIT*this.hi,r=u-this.hi,l=A.SPLIT*n,r=u-r,o=this.hi-r,s=l-n,u=this.hi*n,s=l-s,a=n-s,l=r*s-u+r*a+o*s+o*a+(this.hi*i+this.lo*n);var c=u+l;r=u-c;var h=l+r;return this.hi=c,this.lo=h,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return A.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new A(t,e)},negate:function(){return this.isNaN()?this:new A(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}finally{}},multiply:function(){if(arguments[0]instanceof A){var t=arguments[0];return t.isNaN()?A.createNaN():A.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return r.isNaN(e)?A.createNaN():A.copy(this).selfMultiply(e,0)}},isNaN:function(){return r.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=A.magnitude(this.hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+A.stringOfChar("0",-i)+n;else if(n.indexOf(".")===-1){var o=i-n.length,s=A.stringOfChar("0",o);r=n+s+".0"}return this.isNegative()?"-"+r:r},reciprocal:function(){var t=null,e=null,n=null,i=null,r=null,o=null,s=null,a=null;r=1/this.hi,o=A.SPLIT*r,t=o-r,a=A.SPLIT*this.hi,t=o-t,e=r-t,n=a-this.hi,s=r*this.hi,n=a-n,i=this.hi-n,a=t*n-s+t*i+e*n+e*i,o=(1-s-a-r*this.lo)/this.hi;var u=r+o,l=r-u+o;return new A(u,l)},toSciNotation:function(){if(this.isZero())return A.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=A.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},abs:function(){return this.isNaN()?A.NaN:this.isNegative()?this.negate():new A(this)},isPositive:function(){return this.hi>0||0===this.hi&&this.lo>0},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof A){var t=arguments[0];return A.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return A.copy(this).selfAdd(e)}},init:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof A){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.hi=n,this.lo=i}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||0===this.hi&&this.lo<0},trunc:function(){return this.isNaN()?A.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[u,o,s]},getClass:function(){return A}}),A.sqr=function(t){return A.valueOf(t).selfMultiply(t)},A.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return A.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new A(e)}},A.sqrt=function(t){return A.valueOf(t).sqrt()},A.parse=function(t){for(var e=0,n=t.length;P.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new A,s=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,P.isDigit(l)){var c=l-"0";o.selfMultiply(A.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=M.parseInt(h)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+h+" in string "+t):e}finally{}break}throw new NumberFormatException("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var f=o,p=s-a-u;if(0===p)f=o;else if(p>0){var d=A.TEN.pow(p);f=o.divide(d)}else if(p<0){var d=A.TEN.pow(-p);f=o.multiply(d)}return i?f.negate():f},A.createNaN=function(){return new A(r.NaN,r.NaN)},A.copy=function(t){return new A(t)},A.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n)),r=Math.pow(10,i);return 10*r<=e&&(i+=1),i},A.stringOfChar=function(t,e){for(var n=new L,i=0;i<e;i++)n.append(t);return n.toString()},A.PI=new A(3.141592653589793,1.2246467991473532e-16),A.TWO_PI=new A(6.283185307179586,2.4492935982947064e-16),A.PI_2=new A(1.5707963267948966,6.123233995736766e-17),A.E=new A(2.718281828459045,1.4456468917292502e-16),
A.NaN=new A(r.NaN,r.NaN),A.EPS=1.23259516440783e-32,A.SPLIT=134217729,A.MAX_PRINT_DIGITS=32,A.TEN=A.valueOf(10),A.ONE=A.valueOf(1),A.SCI_NOT_EXPONENT_CHAR="E",A.SCI_NOT_ZERO="0.0E0",e(R.prototype,{interfaces_:function(){return[]},getClass:function(){return R}}),R.orientationIndex=function(t,e,n){var i=R.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=A.valueOf(e.x).selfAdd(-t.x),o=A.valueOf(e.y).selfAdd(-t.y),s=A.valueOf(n.x).selfAdd(-e.x),a=A.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},R.signOfDet2x2=function(t,e,n,i){var r=t.multiply(i).selfSubtract(e.multiply(n));return r.signum()},R.intersection=function(t,e,n,i){var r=A.valueOf(i.y).selfSubtract(n.y).selfMultiply(A.valueOf(e.x).selfSubtract(t.x)),o=A.valueOf(i.x).selfSubtract(n.x).selfMultiply(A.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=A.valueOf(i.x).selfSubtract(n.x).selfMultiply(A.valueOf(t.y).selfSubtract(n.y)),u=A.valueOf(i.y).selfSubtract(n.y).selfMultiply(A.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u),c=l.selfDivide(s).doubleValue(),h=A.valueOf(t.x).selfAdd(A.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),f=A.valueOf(e.x).selfSubtract(t.x).selfMultiply(A.valueOf(t.y).selfSubtract(n.y)),d=A.valueOf(e.y).selfSubtract(t.y).selfMultiply(A.valueOf(t.x).selfSubtract(n.x)),g=f.subtract(d),m=g.selfDivide(s).doubleValue(),y=A.valueOf(n.y).selfAdd(A.valueOf(i.y).selfSubtract(n.y).selfMultiply(m)).doubleValue();return new p(h,y)},R.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(r>0){if(o<=0)return R.signum(s);i=r+o}else{if(!(r<0))return R.signum(s);if(o>=0)return R.signum(s);i=-r-o}var a=R.DP_SAFE_EPSILON*i;return s>=a||-s>=a?R.signum(s):2},R.signum=function(t){return t>0?1:t<0?-1:0},R.DP_SAFE_EPSILON=1e-15,e(O.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[s]},getClass:function(){return O}}),O.X=0,O.Y=1,O.Z=2,O.M=3,F.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++},F.getProperty=function(t){return{"line.separator":"\n"}[t]},e(D.prototype,{getY:function(){var t=this.y/this.w;if(r.isNaN(t)||r.isInfinite(t))throw new I;return t},getX:function(){var t=this.x/this.w;if(r.isNaN(t)||r.isInfinite(t))throw new I;return t},getCoordinate:function(){var t=new p;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return D}}),D.intersection=function(t,e,n,i){var o=t.y-e.y,s=e.x-t.x,a=t.x*e.y-e.x*t.y,u=n.y-i.y,l=i.x-n.x,c=n.x*i.y-i.x*n.y,h=s*c-l*a,f=u*a-o*c,d=o*l-u*s,g=h/d,m=f/d;if(r.isNaN(g)||r.isInfinite(g)||r.isNaN(m)||r.isInfinite(m))throw new I;return new p(g,m)},e(z.prototype,{create:function(){1===arguments.length?arguments[0]instanceof Array?arguments[0]:T(arguments[0],O)&&arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return z}}),e(k.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return k}}),e(B.prototype,{isGeometryCollection:function(){return this.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof B))return!1;var n=e;return this.equalsExact(n)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(B.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return null!==t&&this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,i)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION)throw new i("This method does not support GeometryCollection arguments")},equal:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new w(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===B.SORTINDEX_MULTIPOINT||this.getSortIndex()===B.SORTINDEX_MULTILINESTRING||this.getSortIndex()===B.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[s,o,u]},getClass:function(){return B}}),B.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},B.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},B.serialVersionUID=0x799ea46522854c00,B.SORTINDEX_POINT=0,B.SORTINDEX_MULTIPOINT=1,B.SORTINDEX_LINESTRING=2,B.SORTINDEX_LINEARRING=3,B.SORTINDEX_MULTILINESTRING=4,B.SORTINDEX_POLYGON=5,B.SORTINDEX_MULTIPOLYGON=6,B.SORTINDEX_GEOMETRYCOLLECTION=7,B.geometryChangedFilter={interfaces_:function(){return[k]},filter:function(t){t.geometryChangedAction()}},e(j.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return j}}),e(V.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return V}}),e(G.prototype,{isInBoundary:function(t){return t%2===1},interfaces_:function(){return[V]},getClass:function(){return G}}),e(U.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[V]},getClass:function(){return U}}),e(q.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[V]},getClass:function(){return q}}),e(X.prototype,{isInBoundary:function(t){return 1===t},interfaces_:function(){return[V]},getClass:function(){return X}}),V.Mod2BoundaryNodeRule=G,V.EndPointBoundaryNodeRule=U,V.MultiValentEndPointBoundaryNodeRule=q,V.MonoValentEndPointBoundaryNodeRule=X,V.MOD2_BOUNDARY_RULE=new G,V.ENDPOINT_BOUNDARY_RULE=new U,V.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new q,V.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new X,V.OGC_SFS_BOUNDARY_RULE=V.MOD2_BOUNDARY_RULE,e(Y.prototype,{interfaces_:function(){return[]},getClass:function(){return Y}}),Y.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Y.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(Y.indexOf(i,e)<0)return i}return null},Y.scroll=function(t,e){var n=Y.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);F.arraycopy(t,n,i,0,t.length-n),F.arraycopy(t,0,i,t.length-n,n),F.arraycopy(i,0,t,0,t.length)},Y.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var n=0;n<i.length;n++)if(0!==o.compare(i[n],r[n]))return!1;return!0}},Y.intersection=function(t,e){for(var n=new E,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},Y.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Y.removeRepeatedPoints=function(t){if(!Y.hasRepeatedPoints(t))return t;var e=new E(t,!1);return e.toCoordinateArray()},Y.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},Y.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,n=0;n<t.length;n++)null!==t[n]&&(i[r++]=t[n]);return i},Y.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new p(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],n=0;n<a;n++)o[s+n]=new p(i[r+n])},Y.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},Y.envelope=function(t){for(var e=new w,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Y.toCoordinateArray=function(t){return t.toArray(Y.coordArrayType)},Y.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Y.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Y.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},Y.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},Y.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Y.extract=function(t,e,n){e=N.clamp(e,0,t.length),n=N.clamp(n,-1,t.length);var i=n-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r},e(W.prototype,{compare:function(t,e){var n=t,i=e;return Y.compare(n,i)},interfaces_:function(){return[a]},getClass:function(){return W}}),e(H.prototype,{compare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=Y.compare(n,i),o=Y.isEqualReversed(n,i);return o?0:r},OLDcompare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=Y.increasingDirection(n),o=Y.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(i[a]);if(0!==l)return l;s+=r,a+=o}return 0},interfaces_:function(){return[a]},getClass:function(){return H}}),Y.ForwardComparator=W,Y.BidirectionalComparator=H,Y.coordArrayType=new Array(0).fill(null),Z.prototype.get=function(){},Z.prototype.put=function(){},Z.prototype.size=function(){},Z.prototype.values=function(){},Z.prototype.entrySet=function(){},J.prototype=new Z,$.prototype=new m,$.prototype.contains=function(){},K.prototype=new $,K.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){var i=this.array_[e];if(i===t)return!0}return!1},K.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},K.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},K.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},K.prototype.size=function(){return this.array_.length},K.prototype.isEmpty=function(){return 0===this.array_.length},K.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},K.prototype.iterator=function(){return new Qo(this)};var Qo=function(t){this.hashSet_=t,this.position_=0};Qo.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new _;return this.hashSet_.array_[this.position_++]},Qo.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Qo.prototype.remove=function(){throw new x};var ts=0,es=1;rt.prototype=new J,rt.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},rt.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:ts,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do if(n=r,i=t.compareTo(r.key),i<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:ts,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},rt.prototype.fixAfterInsertion=function(t){for(t.color=es;null!=t&&t!=this.root_&&t.parent.color==es;)if(tt(t)==nt(tt(tt(t)))){var e=it(tt(tt(t)));Q(e)==es?(et(tt(t),ts),et(e,ts),et(tt(tt(t)),es),t=tt(tt(t))):(t==it(tt(t))&&(t=tt(t),this.rotateLeft(t)),et(tt(t),ts),et(tt(tt(t)),es),this.rotateRight(tt(tt(t))))}else{var e=nt(tt(tt(t)));Q(e)==es?(et(tt(t),ts),et(e,ts),et(tt(tt(t)),es),t=tt(tt(t))):(t==nt(tt(t))&&(t=tt(t),this.rotateRight(t)),et(tt(t),ts),et(tt(tt(t)),es),this.rotateLeft(tt(tt(t))))}this.root_.color=ts},rt.prototype.values=function(){var t=new b,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=rt.successor(e));)t.add(e.value);return t},rt.prototype.entrySet=function(){var t=new K,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=rt.successor(e));)t.add(e);return t},rt.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},rt.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},rt.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},rt.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var e=t.parent,n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e},rt.prototype.size=function(){return this.size_},e(ot.prototype,{interfaces_:function(){return[]},getClass:function(){return ot}}),st.prototype=new $,at.prototype=new st,at.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){var i=this.array_[e];if(0===i.compareTo(t))return!0}return!1},at.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){var i=this.array_[e];if(1===i.compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},at.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},at.prototype.remove=function(t){throw new x},at.prototype.size=function(){return this.array_.length},at.prototype.isEmpty=function(){return 0===this.array_.length},at.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},at.prototype.iterator=function(){return new ns(this)};var ns=function(t){this.treeSet_=t,this.position_=0};ns.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new _;return this.treeSet_.array_[this.position_++]},ns.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},ns.prototype.remove=function(){throw new x},ut.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)return i=function(t,e){return t.compareTo(e)},void r.sort(i);if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else{if(3===arguments.length){e=r.slice(arguments[1],arguments[2]),e.sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t]);return}if(4===arguments.length){for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t]);return}}},ut.asList=function(t){for(var e=new b,n=0,i=t.length;n<i;n++)e.add(t[n]);return e},e(lt.prototype,{interfaces_:function(){return[]},getClass:function(){return lt}}),lt.toDimensionSymbol=function(t){switch(t){case lt.FALSE:return lt.SYM_FALSE;case lt.TRUE:return lt.SYM_TRUE;case lt.DONTCARE:return lt.SYM_DONTCARE;case lt.P:return lt.SYM_P;case lt.L:return lt.SYM_L;case lt.A:return lt.SYM_A}throw new i("Unknown dimension value: "+t)},lt.toDimensionValue=function(t){switch(P.toUpperCase(t)){case lt.SYM_FALSE:return lt.FALSE;case lt.SYM_TRUE:return lt.TRUE;case lt.SYM_DONTCARE:return lt.DONTCARE;case lt.SYM_P:return lt.P;case lt.SYM_L:return lt.L;case lt.SYM_A:return lt.A}throw new i("Unknown dimension symbol: "+t)},lt.P=0,lt.L=1,lt.A=2,lt.FALSE=-1,lt.TRUE=-2,lt.DONTCARE=-3,lt.SYM_FALSE="F",lt.SYM_TRUE="T",lt.SYM_DONTCARE="*",lt.SYM_P="0",lt.SYM_L="1",lt.SYM_A="2",e(ct.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return ct}}),e(ht.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return ht}}),c(ft,B),e(ft.prototype,{computeEnvelopeInternal:function(){for(var t=new w,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return B.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var i=this.geometries[n].getCoordinates(),r=0;r<i.length;r++)e++,t[e]=i[r];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var i=0;i<this.geometries.length;i++)if(!this.geometries[i].equalsExact(n.geometries[i],e))return!1;return!0}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();ut.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=lt.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=lt.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=new at(ut.asList(this.geometries)),n=new at(ut.asList(t.geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=i,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var l=this.getGeometryN(u),c=o.getGeometryN(u),h=l.compareToSameClass(c,r);if(0!==h)return h;u++}return u<s?1:u<a?-1:0}},apply:function(){if(T(arguments[0],j))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(T(arguments[0],ht)){var n=arguments[0];if(0===this.geometries.length)return null;for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],ct)){var i=arguments[0];i.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(i)}else if(T(arguments[0],k)){var r=arguments[0];r.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}},getBoundary:function(){return this.checkNotGeometryCollection(this),f.shouldNeverReachHere(),null},clone:function(){var t=B.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ft(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ft}}),ft.serialVersionUID=-0x4f07bcb1f857d800,c(pt,ft),e(pt.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?lt.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new dt(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new pt(t,this.factory)},interfaces_:function(){return[ot]},getClass:function(){return pt}}),pt.serialVersionUID=0x7155d2ab4afa8000,e(dt.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof St?this.boundaryLineString(this.geom):this.geom instanceof pt?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this.bnRule.isInBoundary(2);return e?t.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new b;this.endpointMap=new rt;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this.endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue(),a=s.count;this.bnRule.isInBoundary(a)&&e.add(o.getKey())}return Y.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);null===e&&(e=new gt,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return dt}}),dt.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new dt(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=new dt(n,i);return e.getBoundary()}},e(gt.prototype,{interfaces_:function(){return[]},getClass:function(){return gt}}),e(Et.prototype,{interfaces_:function(){return[]},getClass:function(){return Et}}),Et.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return new String(n)},Et.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new _t,n=new mt(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",s=new yt(Et.getStackTrace(i)),a=new bt(s),u=0;u<r;u++)try{o+=a.readLine()+Et.NEWLINE}catch(t){if(!(t instanceof xt))throw t;f.shouldNeverReachHere()}finally{}return o}},Et.split=function(t,e){for(var n=e.length,i=new b,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);i.add(s),r=r.substring(o+n),o=r.indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),u=0;u<a.length;u++)a[u]=i.get(u);return a},Et.toString=function(){if(1===arguments.length){var t=arguments[0];return Et.SIMPLE_ORDINATE_FORMAT.format(t)}},Et.spaces=function(t){return Et.chars(" ",t)},Et.NEWLINE=F.getProperty("line.separator"),Et.SIMPLE_ORDINATE_FORMAT=new vt("0.#"),e(wt.prototype,{interfaces_:function(){return[]},getClass:function(){return wt}}),wt.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},wt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,O.X)===t.getOrdinate(e-1,O.X)&&t.getOrdinate(0,O.Y)===t.getOrdinate(e-1,O.Y)},wt.isEqual=function(t,e){var n=t.size(),i=e.size();if(n!==i)return!1;for(var o=Math.min(t.getDimension(),e.getDimension()),s=0;s<n;s++)for(var a=0;a<o;a++){var u=t.getOrdinate(s,a),l=e.getOrdinate(s,a);if(!(t.getOrdinate(s,a)===e.getOrdinate(s,a)||r.isNaN(u)&&r.isNaN(l)))return!1}return!0},wt.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(wt.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)wt.copy(e,r-1,i,o,1);return i},wt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)wt.swap(t,i,e-i)},wt.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},wt.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)wt.copyCoord(t,e+o,n,i+o)},wt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new L;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(Et.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},wt.ensureValidRing=function(t,e){var n=e.size();if(0===n)return e;if(n<=3)return wt.createClosedRing(t,e,4);var i=e.getOrdinate(0,O.X)===e.getOrdinate(n-1,O.X)&&e.getOrdinate(0,O.Y)===e.getOrdinate(n-1,O.Y);return i?e:wt.createClosedRing(t,e,n+1)},wt.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();wt.copy(e,0,i,0,r);for(var o=r;o<n;o++)wt.copy(e,0,i,o,1);return i},c(St,B),e(St.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new w:this.points.expandEnvelope(new w)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return B.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var i=0;i<this.points.size();i++)if(!this.equal(this.points.getCoordinate(i),n.points.getCoordinate(i),e))return!1;return!0}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&wt.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?lt.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return ce.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();wt.reverse(t);var e=this.getFactory().createLineString(t);return e},compareToSameClass:function(){if(1===arguments.length){for(var t=arguments[0],e=t,n=0,i=0;n<this.points.size()&&i<e.points.size();){var r=this.points.getCoordinate(n).compareTo(e.points.getCoordinate(i));if(0!==r)return r;n++,i++}return n<this.points.size()?1:i<e.points.size()?-1:0}if(2===arguments.length){var o=arguments[0],s=arguments[1],e=o;return s.compare(this.points,e.points)}},apply:function(){if(T(arguments[0],j))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(T(arguments[0],ht)){var n=arguments[0];if(0===this.points.size())return null;for(var e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],ct)){var i=arguments[0];i.filter(this)}else if(T(arguments[0],k)){var r=arguments[0];r.filter(this)}},getBoundary:function(){return new dt(this).getBoundary()},isEquivalentClass:function(t){return t instanceof St},clone:function(){var t=B.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new St(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return 0===this.points.size()},init:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new i("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[ot]},getClass:function(){return St}}),St.serialVersionUID=0x2b2b51ba435c8e00,e(It.prototype,{interfaces_:function(){return[]},getClass:function(){return It}}),c(Ct,B),e(Ct.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new w;var t=new w;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return B.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return lt.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=n;
return i.compare(this.coordinates,e.coordinates)}},apply:function(){if(T(arguments[0],j)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(T(arguments[0],ht)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],ct)){var n=arguments[0];n.filter(this)}else if(T(arguments[0],k)){var i=arguments[0];i.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=B.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new Ct(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return 0===this.coordinates.size()},init:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),f.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[It]},getClass:function(){return Ct}}),Ct.serialVersionUID=0x44077bad161cbc00,e(Tt.prototype,{interfaces_:function(){return[]},getClass:function(){return Tt}}),c(Nt,B),e(Nt.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return B.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),i=0;i<n.length;i++)e++,t[e]=n[i];for(var r=0;r<this.holes.length;r++)for(var o=this.holes[r].getCoordinates(),s=0;s<o.length;s++)e++,t[e]=o[s];return t},getArea:function(){var t=0;t+=Math.abs(ce.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(ce.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),n=1;n<=4;n++){var i=t.getX(n),r=t.getY(n),a=i!==o,u=r!==s;if(a===u)return!1;o=i,s=r}return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,i=this.shell,r=n.shell;if(!i.equalsExact(r,e))return!1;if(this.holes.length!==n.holes.length)return!1;for(var o=0;o<this.holes.length;o++)if(!this.holes[o].equalsExact(n.holes[o],e))return!1;return!0}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(0===arguments.length){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);ut.sort(this.holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);F.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=Y.minCoordinate(e.getCoordinates());Y.scroll(i,r),F.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],ce.isCCW(e.getCoordinates())===n&&Y.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],o=i,e=this.shell,n=o.shell,s=e.compareToSameClass(n,r);if(0!==s)return s;for(var a=this.getNumInteriorRing(),u=o.getNumInteriorRing(),l=0;l<a&&l<u;){var c=this.getInteriorRingN(l),h=o.getInteriorRingN(l),f=c.compareToSameClass(h,r);if(0!==f)return f;l++}return l<a?1:l<u?-1:0}},apply:function(){if(T(arguments[0],j)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(T(arguments[0],ht)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],ct)){var i=arguments[0];i.filter(this)}else if(T(arguments[0],k)){var r=arguments[0];r.filter(this),this.shell.apply(r);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(r)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=B.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new Nt(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[Tt]},getClass:function(){return Nt}}),Nt.serialVersionUID=-0x307ffefd8dc97200,c(Lt,ft),e(Lt.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.geometries[t].getCoordinate()}return ft.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return lt.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Lt(t,this.factory)},interfaces_:function(){return[It]},getClass:function(){return Lt}}),Lt.serialVersionUID=-0x6fb1ed4162e0fc00,c(Mt,St),e(Mt.prototype,{getSortIndex:function(){return B.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return lt.FALSE},isClosed:function(){return!!this.isEmpty()||St.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();wt.reverse(t);var e=this.getFactory().createLinearRing(t);return e},validateConstruction:function(){if(!this.isEmpty()&&!St.prototype.isClosed.call(this))throw new i("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<Mt.MINIMUM_VALID_SIZE)throw new i("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new Mt(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return Mt}}),Mt.MINIMUM_VALID_SIZE=4,Mt.serialVersionUID=-0x3b229e262367a600,c(Pt,ft),e(Pt.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new b,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e],i=n.getBoundary(),r=0;r<i.getNumGeometries();r++)t.add(i.getGeometryN(r));var o=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(o))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Pt(t,this.factory)},interfaces_:function(){return[Tt]},getClass:function(){return Pt}}),Pt.serialVersionUID=-0x7a5aa1369171980,e(At.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return null===this.factory&&(this.factory=t.getFactory()),t instanceof ft?this.editGeometryCollection(t,e):t instanceof Nt?this.editPolygon(t,e):t instanceof Ct?e.edit(t,this.factory):t instanceof St?e.edit(t,this.factory):(f.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),i=new b,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===Lt?this.factory.createMultiPoint(i.toArray([])):n.getClass()===pt?this.factory.createMultiLineString(i.toArray([])):n.getClass()===Pt?this.factory.createMultiPolygon(i.toArray([])):this.factory.createGeometryCollection(i.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this.factory.createPolygon();for(var r=new b,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this.factory.createPolygon(i,r.toArray([]))},interfaces_:function(){return[]},getClass:function(){return At}}),At.GeometryEditorOperation=Rt,e(Ot.prototype,{edit:function(t,e){return t},interfaces_:function(){return[Rt]},getClass:function(){return Ot}}),e(Ft.prototype,{edit:function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof Mt?e.createLinearRing(n):t instanceof St?e.createLineString(n):t instanceof Ct?n.length>0?e.createPoint(n[0]):e.createPoint():t},interfaces_:function(){return[Rt]},getClass:function(){return Ft}}),e(Dt.prototype,{edit:function(t,e){return t instanceof Mt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof St?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Ct?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[Rt]},getClass:function(){return Dt}}),At.NoOpGeometryOperation=Ot,At.CoordinateOperation=Ft,At.CoordinateSequenceOperation=Dt,e(zt.prototype,{setOrdinate:function(t,e,n){switch(e){case O.X:this.coordinates[t].x=n;break;case O.Y:this.coordinates[t].y=n;break;case O.Z:this.coordinates[t].z=n;break;default:throw new i("invalid ordinateIndex")}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case O.X:return this.coordinates[t].x;case O.Y:return this.coordinates[t].y;case O.Z:return this.coordinates[t].z}return r.NaN},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new p(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new zt(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new zt(t,this.dimension)},toString:function(){if(this.coordinates.length>0){var t=new L(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[O,u]},getClass:function(){return zt}}),zt.serialVersionUID=-0xcb44a778db18e00,e(kt.prototype,{readResolve:function(){return kt.instance()},create:function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new zt(t)}if(T(arguments[0],O)){var e=arguments[0];return new zt(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new zt(n):new zt(n,i)}},interfaces_:function(){return[z,u]},getClass:function(){return kt}}),kt.instance=function(){return kt.instanceObject},kt.serialVersionUID=-0x38e49fa6cf6f2e00,kt.instanceObject=new kt;var is,rs=Object.defineProperty,os=jt({delete:Gt,has:Xt,get:Ut,set:Yt,keys:Ht,values:Zt,entries:Jt,forEach:Qt,clear:Wt}),ss="undefined"!=typeof Map&&Map.prototype.values?Map:os;te.prototype=new Z,te.prototype.get=function(t){return this.map_.get(t)||null},te.prototype.put=function(t,e){return this.map_.set(t,e),e},te.prototype.values=function(){for(var t=new b,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},te.prototype.entrySet=function(){var t=new K;return this.map_.entries().forEach(function(e){return t.add(e)}),t},te.prototype.size=function(){return this.map_.size()},e(ee.prototype,{equals:function(t){if(!(t instanceof ee))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new M(n).compareTo(new M(i))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===ee.FLOATING||this.modelType===ee.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===ee.FLOATING?t="Floating":this.modelType===ee.FLOATING_SINGLE?t="Floating-Single":this.modelType===ee.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if("number"==typeof arguments[0]){var t=arguments[0];if(r.isNaN(t))return t;if(this.modelType===ee.FLOATING_SINGLE){var e=t;return e}return this.modelType===ee.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof p){var n=arguments[0];if(this.modelType===ee.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===ee.FLOATING?t=16:this.modelType===ee.FLOATING_SINGLE?t=6:this.modelType===ee.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[u,o]},getClass:function(){return ee}}),ee.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},e(ne.prototype,{readResolve:function(){return ne.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[u]},getClass:function(){return ne}}),ne.serialVersionUID=-552860263173159e4,ne.nameToTypeMap=new te,ee.Type=ne,ee.serialVersionUID=0x6bee6404e9a25c00,ee.FIXED=new ne("FIXED"),ee.FLOATING=new ne("FLOATING"),ee.FLOATING_SINGLE=new ne("FLOATING SINGLE"),ee.maximumPreciseValue=9007199254740992,e(ie.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new p(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new p(t.getMinX(),t.getMinY()),new p(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new p(t.getMinX(),t.getMinY()),new p(t.getMinX(),t.getMaxY()),new p(t.getMaxX(),t.getMaxY()),new p(t.getMaxX(),t.getMinY()),new p(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(T(arguments[0],O)){var e=arguments[0];return new St(e,this)}}},createMultiLineString:function(){if(0===arguments.length)return new pt(null,this);if(1===arguments.length){var t=arguments[0];return new pt(t,this)}},buildGeometry:function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(ie.toGeometryArray(t));var a=t.iterator().next(),u=t.size()>1;if(u){if(a instanceof Nt)return this.createMultiPolygon(ie.toPolygonArray(t));if(a instanceof St)return this.createMultiLineString(ie.toLineStringArray(t));if(a instanceof Ct)return this.createMultiPoint(ie.toPointArray(t));f.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},createMultiPointFromCoords:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof p){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(T(arguments[0],O)){var e=arguments[0];return new Ct(e,this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(0===arguments.length)return new Nt(null,null,this);if(1===arguments.length){if(T(arguments[0],O)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Mt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new Nt(i,r,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(0===arguments.length)return new ft(null,this);if(1===arguments.length){var t=arguments[0];return new ft(t,this)}},createGeometry:function(t){var e=new At(this);return e.edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return arguments[1],this.coordinateSequenceFactory.create(t)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(T(arguments[0],O)){var e=arguments[0];return new Mt(e,this)}}},createMultiPolygon:function(){if(0===arguments.length)return new Pt(null,this);if(1===arguments.length){var t=arguments[0];return new Pt(t,this)}},createMultiPoint:function(){if(0===arguments.length)return new Lt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Lt(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(T(arguments[0],O)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),r=0;r<n.size();r++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());wt.copy(n,r,o,0,1),i[r]=this.createPoint(o)}return this.createMultiPoint(i)}}},interfaces_:function(){return[u]},getClass:function(){return ie}}),ie.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.getDefaultCoordinateSequenceFactory=function(){return kt.instance()},ie.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ie.serialVersionUID=-0x5ea75f2051eeb400;var as={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};e(re.prototype,{read:function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=as.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(r=as.emptyTypeStr.exec(t),r[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],ls[n]&&(e=ls[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!us[e])return null;var n,i=e.toUpperCase();return n=t.isEmpty()?i+" EMPTY":i+"("+us[e].apply(this,[t])+")"}});var us={coordinate:function(t){return t.x+" "+t.y},point:function(t){return us.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+us.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;n<i;++n)e.push(us.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;n<i;++n)e.push(us.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+us.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+us.linestring.apply(this,[t.shell])+")");for(var n=0,i=t.holes.length;n<i;++n)e.push("("+us.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+us.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},ls={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(as.spaces);return this.geometryFactory.createPoint(new p(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(as.trimParens,"$1"),i.push(ls.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(as.spaces),i.push(new p(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(as.spaces),i.push(new p(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(as.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(as.trimParens,"$1"),i.push(ls.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(as.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(as.trimParens,"$1"),n=ls.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n.points),0===a?r=i:s.push(i);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(as.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(as.trimParens,"$1"),i.push(ls.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}};e(oe.prototype,{write:function(t){return this.parser.write(t)}}),e(oe,{toLineString:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),e(se.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new L;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,i){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=i,this.result=this.computeIntersect(t,e,n,i)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(0===arguments.length)null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==se.NO_INTERSECTION},getEdgeDistance:function(t,e){var n=se.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1]);return n},isCollinear:function(){return this.result===se.COLLINEAR_INTERSECTION},toString:function(){return oe.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+oe.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return se}}),se.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);o=i>r?s:a,0!==o||t.equals(e)||(o=Math.max(s,a))}return f.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},se.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return f.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},se.DONT_INTERSECT=0,se.DO_INTERSECT=1,se.COLLINEAR=2,se.NO_INTERSECTION=0,se.POINT_INTERSECTION=1,se.COLLINEAR_INTERSECTION=2,c(ae,se),e(ae.prototype,{isInSegmentEnvelopes:function(t){var e=new w(this.inputLines[0][0],this.inputLines[0][1]),n=new w(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(3!==arguments.length)return se.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,w.intersects(e,n,t)&&0===ce.orientationIndex(e,n,t)&&0===ce.orientationIndex(n,e,t)?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=se.POINT_INTERSECTION,null):void(this.result=se.NO_INTERSECTION)},normalizeToMinimum:function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},safeHCoordinateIntersection:function(t,e,n,i){var r=null;try{r=D.intersection(t,e,n,i)}catch(o){if(!(o instanceof I))throw o;r=ae.nearestEndpoint(t,e,n,i)}finally{}return r},intersection:function(t,e,n,i){var r=this.intersectionWithNormalization(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new p(ae.nearestEndpoint(t,e,n,i))),null!==this.precisionModel&&this.precisionModel.makePrecise(r),r},smallestInAbsValue:function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},checkDD:function(t,e,n,i,r){var o=R.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);F.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&F.out.println("Distance = "+r.distance(o))},intersectionWithNormalization:function(t,e,n,i){var r=new p(t),o=new p(e),s=new p(n),a=new p(i),u=new p;this.normalizeToEnvCentre(r,o,s,a,u);var l=this.safeHCoordinateIntersection(r,o,s,a);return l.x+=u.x,l.y+=u.y,l},computeCollinearIntersection:function(t,e,n,i){var r=w.intersects(t,e,n),o=w.intersects(t,e,i),s=w.intersects(n,i,t),a=w.intersects(n,i,e);return r&&o?(this.intPt[0]=n,this.intPt[1]=i,se.COLLINEAR_INTERSECTION):s&&a?(this.intPt[0]=t,this.intPt[1]=e,se.COLLINEAR_INTERSECTION):r&&s?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||o||a?se.COLLINEAR_INTERSECTION:se.POINT_INTERSECTION):r&&a?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||o||s?se.COLLINEAR_INTERSECTION:se.POINT_INTERSECTION):o&&s?(this.intPt[0]=i,this.intPt[1]=t,!i.equals(t)||r||a?se.COLLINEAR_INTERSECTION:se.POINT_INTERSECTION):o&&a?(this.intPt[0]=i,this.intPt[1]=e,!i.equals(e)||r||s?se.COLLINEAR_INTERSECTION:se.POINT_INTERSECTION):se.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,f=n.y>i.y?n.y:i.y,p=o>l?o:l,d=a<h?a:h,g=s>c?s:c,m=u<f?u:f,y=(p+d)/2,v=(g+m)/2;r.x=y,r.y=v,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},computeIntersect:function(t,e,n,i){if(this._isProper=!1,!w.intersects(t,e,n,i))return se.NO_INTERSECTION;var r=ce.orientationIndex(t,e,n),o=ce.orientationIndex(t,e,i);if(r>0&&o>0||r<0&&o<0)return se.NO_INTERSECTION;
var s=ce.orientationIndex(n,i,t),a=ce.orientationIndex(n,i,e);if(s>0&&a>0||s<0&&a<0)return se.NO_INTERSECTION;var u=0===r&&0===o&&0===s&&0===a;return u?this.computeCollinearIntersection(t,e,n,i):(0===r||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this.intPt[0]=e:0===r?this.intPt[0]=new p(n):0===o?this.intPt[0]=new p(i):0===s?this.intPt[0]=new p(t):0===a&&(this.intPt[0]=new p(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,i)),se.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return ae}}),ae.nearestEndpoint=function(t,e,n,i){var r=t,o=ce.distancePointLine(t,n,i),s=ce.distancePointLine(e,n,i);return s<o&&(o=s,r=e),s=ce.distancePointLine(n,t,e),s<o&&(o=s,r=n),s=ce.distancePointLine(i,t,e),s<o&&(o=s,r=i),r},e(ue.prototype,{interfaces_:function(){return[]},getClass:function(){return ue}}),ue.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ue.signOfDet2x2(i,r,o,s)},ue.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null,a=0;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(0<e?0<i?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):0<i?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),0<t){if(!(0<n))return r;if(!(t<=n))return r}else{if(0<n)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if(a+=1,s=Math.floor(n/t),n-=s*t,i-=s*e,i<0)return-r;if(i>e)return r;if(t>n+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if(s=Math.floor(t/n),t-=s*n,e-=s*i,e<0)return r;if(e>i)return-r;if(n>t+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}},e(le.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this.p.x>=n&&this.p.x<=i&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var r=t.x-this.p.x,o=t.y-this.p.y,s=e.x-this.p.x,a=e.y-this.p.y,u=ue.signOfDet2x2(r,o,s,a);if(0===u)return this.isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==C.EXTERIOR},getLocation:function(){return this.isPointOnSegment?C.BOUNDARY:this.crossingCount%2===1?C.INTERIOR:C.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return le}}),le.locatePointInRing=function(){if(arguments[0]instanceof p&&T(arguments[1],O)){for(var t=arguments[0],e=arguments[1],n=new le(t),i=new p,r=new p,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof p&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],n=new le(s),o=1;o<a.length;o++){var i=a[o],r=a[o-1];if(n.countSegment(i,r),n.isOnSegment())return n.getLocation()}return n.getLocation()}},e(ce.prototype,{interfaces_:function(){return[]},getClass:function(){return ce}}),ce.orientationIndex=function(t,e,n){return R.orientationIndex(t,e,n)},ce.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y,s=t[i-1].y;e+=r*(s-o)}return e/2}if(T(arguments[0],O)){var a=arguments[0],u=a.size();if(u<3)return 0;var l=new p,c=new p,h=new p;a.getCoordinate(0,c),a.getCoordinate(1,h);var n=c.x;h.x-=n;for(var e=0,i=1;i<u-1;i++)l.y=c.y,c.x=h.x,c.y=h.y,a.getCoordinate(i+1,h),h.x-=n,e+=c.x*(l.y-h.y);return e/2}},ce.distanceLineLine=function(t,e,n,i){if(t.equals(e))return ce.distancePointLine(t,n,i);if(n.equals(i))return ce.distancePointLine(i,t,e);var r=!1;if(w.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var s=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),u=a/o,l=s/o;(l<0||l>1||u<0||u>1)&&(r=!0)}}else r=!0;return r?N.min(ce.distancePointLine(t,n,i),ce.distancePointLine(e,n,i),ce.distancePointLine(n,t,e),ce.distancePointLine(i,t,e)):0},ce.isPointInRing=function(t,e){return ce.locatePointInRing(t,e)!==C.EXTERIOR},ce.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new p;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,u=i.y,l=a-r,c=u-o;n+=Math.sqrt(l*l+c*c),r=a,o=u}return n},ce.isCCW=function(t){var e=t.length-1;if(e<3)throw new i("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,o=1;o<=e;o++){var s=t[o];s.y>n.y&&(n=s,r=o)}var a=r;do a-=1,a<0&&(a=e);while(t[a].equals2D(n)&&a!==r);var u=r;do u=(u+1)%e;while(t[u].equals2D(n)&&u!==r);var l=t[a],c=t[u];if(l.equals2D(n)||c.equals2D(n)||l.equals2D(c))return!1;var h=ce.computeOrientation(l,n,c),f=!1;return f=0===h?l.x>c.x:h>0},ce.locatePointInRing=function(t,e){return le.locatePointInRing(t,e)},ce.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},ce.computeOrientation=function(t,e,n){return ce.orientationIndex(t,e,n)},ce.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new i("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var o=ce.distancePointLine(t,e[r],e[r+1]);o<n&&(n=o)}return n}if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];if(a.x===u.x&&a.y===u.y)return s.distance(a);var l=(u.x-a.x)*(u.x-a.x)+(u.y-a.y)*(u.y-a.y),c=((s.x-a.x)*(u.x-a.x)+(s.y-a.y)*(u.y-a.y))/l;if(c<=0)return s.distance(a);if(c>=1)return s.distance(u);var h=((a.y-s.y)*(u.x-a.x)-(a.x-s.x)*(u.y-a.y))/l;return Math.abs(h)*Math.sqrt(l)}},ce.isOnLine=function(t,e){for(var n=new ae,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},ce.CLOCKWISE=-1,ce.RIGHT=ce.CLOCKWISE,ce.COUNTERCLOCKWISE=1,ce.LEFT=ce.COUNTERCLOCKWISE,ce.COLLINEAR=0,ce.STRAIGHT=ce.COLLINEAR,e(he.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof he){var t=arguments[0],e=ce.orientationIndex(this.p0,this.p1,t.p0),n=ce.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof p){var i=arguments[0];return ce.orientationIndex(this.p0,this.p1,i)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof he))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new ae;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof p){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new p(t);var e=this.projectionFactor(t),n=new p;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof he){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var s=this.project(i.p0);r<0&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(i.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new he(s,a)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return 0===t?this.p0:this.p1},distancePerpendicular:function(t){return ce.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return he.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;if(i<=0)return r.NaN;var o=((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i;return o},closestPoints:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=r.MAX_VALUE,o=null,s=this.closestPoint(t.p0);i=s.distance(t.p0),n[0]=s,n[1]=t.p0;var a=this.closestPoint(t.p1);o=a.distance(t.p1),o<i&&(i=o,n[0]=a,n[1]=t.p1);var u=t.closestPoint(this.p0);o=u.distance(this.p0),o<i&&(i=o,n[0]=this.p0,n[1]=u);var l=t.closestPoint(this.p1);return o=l.distance(this.p1),o<i&&(i=o,n[0]=this.p1,n[1]=l),n},closestPoint:function(t){var e=this.projectionFactor(t);if(e>0&&e<1)return this.project(t);var n=this.p0.distance(t),i=this.p1.distance(t);return n<i?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{var e=D.intersection(this.p0,this.p1,t.p0,t.p1);return e}catch(t){if(!(t instanceof I))throw t}finally{}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/s,u=e*o/s}var l=n-u,c=i+a,h=new p(l,c);return h},setCoordinates:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||r.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof he){var t=arguments[0];return ce.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof p){var e=arguments[0];return ce.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new p;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var i=Math.trunc(n)^Math.trunc(n>>32);return e^i},interfaces_:function(){return[o,u]},getClass:function(){return he}}),he.midPoint=function(t,e){return new p((t.x+e.x)/2,(t.y+e.y)/2)},he.serialVersionUID=0x2d2172135f411c00,e(fe.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){var t=fe.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])||fe.isTrue(this.matrix[C.INTERIOR][C.BOUNDARY])||fe.isTrue(this.matrix[C.BOUNDARY][C.INTERIOR])||fe.isTrue(this.matrix[C.BOUNDARY][C.BOUNDARY]);return t&&this.matrix[C.EXTERIOR][C.INTERIOR]===lt.FALSE&&this.matrix[C.EXTERIOR][C.BOUNDARY]===lt.FALSE},isCoveredBy:function(){var t=fe.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])||fe.isTrue(this.matrix[C.INTERIOR][C.BOUNDARY])||fe.isTrue(this.matrix[C.BOUNDARY][C.INTERIOR])||fe.isTrue(this.matrix[C.BOUNDARY][C.BOUNDARY]);return t&&this.matrix[C.INTERIOR][C.EXTERIOR]===lt.FALSE&&this.matrix[C.BOUNDARY][C.EXTERIOR]===lt.FALSE},set:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.matrix[n][i]=lt.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.matrix[r][o]=s}},isContains:function(){return fe.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])&&this.matrix[C.EXTERIOR][C.INTERIOR]===lt.FALSE&&this.matrix[C.EXTERIOR][C.BOUNDARY]===lt.FALSE},setAtLeast:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,lt.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.matrix[r][o]<s&&(this.matrix[r][o]=s)}},setAtLeastIfValid:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},isWithin:function(){return fe.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])&&this.matrix[C.INTERIOR][C.EXTERIOR]===lt.FALSE&&this.matrix[C.BOUNDARY][C.EXTERIOR]===lt.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):(t===lt.A&&e===lt.A||t===lt.L&&e===lt.L||t===lt.L&&e===lt.A||t===lt.P&&e===lt.A||t===lt.P&&e===lt.L)&&this.matrix[C.INTERIOR][C.INTERIOR]===lt.FALSE&&(fe.isTrue(this.matrix[C.INTERIOR][C.BOUNDARY])||fe.isTrue(this.matrix[C.BOUNDARY][C.INTERIOR])||fe.isTrue(this.matrix[C.BOUNDARY][C.BOUNDARY]))},isOverlaps:function(t,e){return t===lt.P&&e===lt.P||t===lt.A&&e===lt.A?fe.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])&&fe.isTrue(this.matrix[C.INTERIOR][C.EXTERIOR])&&fe.isTrue(this.matrix[C.EXTERIOR][C.INTERIOR]):t===lt.L&&e===lt.L&&1===this.matrix[C.INTERIOR][C.INTERIOR]&&fe.isTrue(this.matrix[C.INTERIOR][C.EXTERIOR])&&fe.isTrue(this.matrix[C.EXTERIOR][C.INTERIOR])},isEquals:function(t,e){return t===e&&fe.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])&&this.matrix[C.INTERIOR][C.EXTERIOR]===lt.FALSE&&this.matrix[C.BOUNDARY][C.EXTERIOR]===lt.FALSE&&this.matrix[C.EXTERIOR][C.INTERIOR]===lt.FALSE&&this.matrix[C.EXTERIOR][C.BOUNDARY]===lt.FALSE},toString:function(){for(var t=new L("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,lt.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(9!==t.length)throw new i("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!fe.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[C.INTERIOR][C.INTERIOR]===lt.FALSE&&this.matrix[C.INTERIOR][C.BOUNDARY]===lt.FALSE&&this.matrix[C.BOUNDARY][C.INTERIOR]===lt.FALSE&&this.matrix[C.BOUNDARY][C.BOUNDARY]===lt.FALSE},isCrosses:function(t,e){return t===lt.P&&e===lt.L||t===lt.P&&e===lt.A||t===lt.L&&e===lt.A?fe.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])&&fe.isTrue(this.matrix[C.INTERIOR][C.EXTERIOR]):t===lt.L&&e===lt.P||t===lt.A&&e===lt.P||t===lt.A&&e===lt.L?fe.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])&&fe.isTrue(this.matrix[C.EXTERIOR][C.INTERIOR]):t===lt.L&&e===lt.L&&0===this.matrix[C.INTERIOR][C.INTERIOR]},interfaces_:function(){return[s]},getClass:function(){return fe}}),fe.matches=function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===lt.SYM_DONTCARE||e===lt.SYM_TRUE&&(t>=0||t===lt.TRUE)||e===lt.SYM_FALSE&&t===lt.FALSE||e===lt.SYM_P&&t===lt.P||e===lt.SYM_L&&t===lt.L||e===lt.SYM_A&&t===lt.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=new fe(n);return r.matches(i)}},fe.isTrue=function(t){return t>=0||t===lt.TRUE};var cs=Object.freeze({Coordinate:p,CoordinateList:E,Envelope:w,LineSegment:he,GeometryFactory:ie,Geometry:B,Point:Ct,LineString:St,LinearRing:Mt,Polygon:Nt,GeometryCollection:ft,MultiPoint:Lt,MultiLineString:pt,MultiPolygon:Pt,Dimension:lt,IntersectionMatrix:fe,PrecisionModel:ee});e(pe.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){null===this.areaBasePt&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);if(0!==i){e+=i;var r=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=i*r;var o=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=i*o}}this.totalLength+=e,0===e&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=ce.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new p;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!ce.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,i){var r=i?1:-1;pe.centroid3(t,e,n,this.triangleCent3);var o=pe.area2(t,e,n);this.cg3.x+=r*o*this.triangleCent3.x,this.cg3.y+=r*o*this.triangleCent3.y,this.areasum2+=r*o},add:function(){if(arguments[0]instanceof Nt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof B){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof Ct)this.addPoint(n.getCoordinate());else if(n instanceof St)this.addLineSegments(n.getCoordinates());else if(n instanceof Nt){var i=n;this.add(i)}else if(n instanceof ft)for(var r=n,e=0;e<r.getNumGeometries();e++)this.add(r.getGeometryN(e))}},interfaces_:function(){return[]},getClass:function(){return pe}}),pe.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},pe.centroid3=function(t,e,n,i){return i.x=t.x+e.x+n.x,i.y=t.y+e.y+n.y,null},pe.getCentroid=function(t){var e=new pe(t);return e.getCentroid()},de.prototype=new Error,de.prototype.name="EmptyStackException",ge.prototype=new v,ge.prototype.add=function(t){return this.array_.push(t),!0},ge.prototype.get=function(t){if(t<0||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},ge.prototype.push=function(t){return this.array_.push(t),t},ge.prototype.pop=function(t){if(0===this.array_.length)throw new de;return this.array_.pop()},ge.prototype.peek=function(){if(0===this.array_.length)throw new de;return this.array_[this.array_.length-1]},ge.prototype.empty=function(){return 0===this.array_.length},ge.prototype.isEmpty=function(){return this.empty()},ge.prototype.search=function(t){return this.array_.indexOf(t)},ge.prototype.size=function(){return this.array_.length},ge.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e(me.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[j]},getClass:function(){return me}}),me.filterCoordinates=function(t){for(var e=new me,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},e(ye.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return ut.sort(t,1,t.length,new ve(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new E;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(t=this.cleanRing(t),3===t.length)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){f.equals(t[0],t[t.length-1]);for(var e=new b,n=null,i=0;i<=t.length-2;i++){var r=t[i],o=t[i+1];r.equals(o)||null!==n&&this.isBetween(n,r,o)||(e.add(r),n=r)}e.add(t[t.length-1]);var s=new Array(e.size()).fill(null);return e.toArray(s)},isBetween:function(t,e,n){if(0!==ce.computeOrientation(t,e,n))return!1;if(t.x!==n.x){if(t.x<=e.x&&e.x<=n.x)return!0;if(n.x<=e.x&&e.x<=t.x)return!0}if(t.y!==n.y){if(t.y<=e.y&&e.y<=n.y)return!0;if(n.y<=e.y&&e.y<=t.y)return!0}return!1},reduce:function(t){var e=this.computeOctRing(t);if(null===e)return t;for(var n=new at,i=0;i<e.length;i++)n.add(e[i]);for(var i=0;i<t.length;i++)ce.isPointInRing(t[i],e)||n.add(t[i]);var r=Y.toCoordinateArray(n);return r.length<3?this.padArray3(r):r},getConvexHull:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),i=this.toCoordinateArray(n);return this.lineOrPolygon(i)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var i=1;i<t.length;i++)t[i].x<e[0].x&&(e[0]=t[i]),t[i].x-t[i].y<e[1].x-e[1].y&&(e[1]=t[i]),t[i].y>e[2].y&&(e[2]=t[i]),t[i].x+t[i].y>e[3].x+e[3].y&&(e[3]=t[i]),t[i].x>e[4].x&&(e[4]=t[i]),t[i].x-t[i].y>e[5].x-e[5].y&&(e[5]=t[i]),t[i].y<e[6].y&&(e[6]=t[i]),t[i].x+t[i].y<e[7].x+e[7].y&&(e[7]=t[i]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=t.get(n);e[n]=i}return e},grahamScan:function(t){var e=null,n=new ge;e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var i=3;i<t.length;i++){for(e=n.pop();!n.empty()&&ce.computeOrientation(n.peek(),e,t[i])>0;)e=n.pop();e=n.push(e),e=n.push(t[i])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return ye}}),ye.extractCoordinates=function(t){var e=new me;return t.apply(e),e.getCoordinates()},e(ve.prototype,{compare:function(t,e){var n=t,i=e;return ve.polarCompare(this.origin,n,i)},interfaces_:function(){return[a]},getClass:function(){return ve}}),ve.polarCompare=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-t.x,s=n.y-t.y,a=ce.computeOrientation(t,e,n);if(a===ce.COUNTERCLOCKWISE)return 1;if(a===ce.CLOCKWISE)return-1;var u=i*i+r*r,l=o*o+s*s;return u<l?-1:u>l?1:0},ye.RadialComparator=ve,e(_e.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof Mt&&!i.isEmpty()||(n=!1);for(var r=new b,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof Mt||(n=!1),r.add(s))}if(n)return this.factory.createPolygon(i,r.toArray([]));var a=new b;return null!==i&&a.add(i),a.addAll(r),this.factory.buildGeometry(a)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new b,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new b,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new b,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new b,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this.pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(ie.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof Ct)return this.transformPoint(t,null);if(t instanceof Lt)return this.transformMultiPoint(t,null);if(t instanceof Mt)return this.transformLinearRing(t,null);if(t instanceof St)return this.transformLineString(t,null);if(t instanceof pt)return this.transformMultiLineString(t,null);if(t instanceof Nt)return this.transformPolygon(t,null);if(t instanceof Pt)return this.transformMultiPolygon(t,null);if(t instanceof ft)return this.transformGeometryCollection(t,null);throw new i("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this.factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return _e}}),e(xe.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new p(o)),0===i&&this._isClosed&&t.set(t.size()-1,new p(o)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new E(this.srcPts);this.snapVertices(e,t),this.snapSegments(e,t);var n=e.toCoordinateArray();return n},snapSegments:function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new p(r),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=r.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(this.seg.p0=e.get(o),this.seg.p1=e.get(o+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var s=this.seg.distance(t);s<this.snapTolerance&&s<n&&(n=s,i=o)}return i},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return xe}}),xe.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])},e(be.prototype,{snapTo:function(t,e){var n=this.extractTargetCoordinates(t),i=new Ee(e,n);return i.transform(this.srcGeom)},snapToSelf:function(t,e){var n=this.extractTargetCoordinates(this.srcGeom),i=new Ee(t,n,!0),r=i.transform(this.srcGeom),o=r;return e&&T(o,Tt)&&(o=r.buffer(0)),o},computeSnapTolerance:function(t){var e=this.computeMinimumSegmentLength(t),n=e/10;return n},extractTargetCoordinates:function(t){for(var e=new at,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=r.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},interfaces_:function(){return[]},getClass:function(){return be}}),be.snap=function(t,e,n){var i=new Array(2).fill(null),r=new be(t);i[0]=r.snapTo(e,n);var o=new be(e);return i[1]=o.snapTo(i[0],n),i},be.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=be.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===ee.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(be.computeOverlaySnapTolerance(r),be.computeOverlaySnapTolerance(o))}},be.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),n=Math.min(e.getHeight(),e.getWidth()),i=n*be.SNAP_PRECISION_FACTOR;return i},be.snapToSelf=function(t,e,n){var i=new be(t);return i.snapToSelf(e,n)},be.SNAP_PRECISION_FACTOR=1e-9,c(Ee,_e),e(Ee.prototype,{snapLine:function(t,e){var n=new xe(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(i)},interfaces_:function(){return[]},getClass:function(){return Ee}}),e(we.prototype,{getCommon:function(){return r.longBitsToDouble(this.commonBits)},add:function(t){var e=r.doubleToLongBits(t);if(this.isFirst)return this.commonBits=e,this.commonSignExp=we.signExpBits(this.commonBits),this.isFirst=!1,null;var n=we.signExpBits(e);return n!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=we.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=we.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(1===arguments.length){var t=arguments[0],e=r.longBitsToDouble(t),n=Long.toBinaryString(t),i="0000000000000000000000000000000000000000000000000000000000000000"+n,o=i.substring(i.length-64),s=o.substring(0,1)+"  "+o.substring(1,12)+"(exp) "+o.substring(12)+" [ "+e+" ]";return s}},interfaces_:function(){return[]},getClass:function(){return we}}),we.getBit=function(t,e){var n=1<<e;return 0!==(t&n)?1:0},we.signExpBits=function(t){return t>>52},we.zeroLowerBits=function(t,e){var n=(1<<e)-1,i=~n,r=t&i;return r},we.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(we.getBit(t,i)!==we.getBit(e,i))return n;n++}return 52},e(Se.prototype,{addCommonBits:function(t){var e=new Ce(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(0===this.commonCoord.x&&0===this.commonCoord.y)return t;var e=new p(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new Ce(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return Se}}),e(Ie.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new p(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[j]},getClass:function(){return Ie}}),e(Ce.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[ht]},getClass:function(){return Ce}}),Se.CommonCoordinateFilter=Ie,Se.Translater=Ce,e(Te.prototype,{next:function(){if(this.atStart)return this.atStart=!1,Te.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new _;var t=this.parent.getGeometryN(this.index++);return t instanceof ft?(this.subcollectionIterator=new Te(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[g]},getClass:function(){return Te}}),Te.isAtomic=function(t){return!(t instanceof ft)},e(Ne.prototype,{locateInternal:function(){if(arguments[0]instanceof p&&arguments[1]instanceof Nt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return C.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===C.EXTERIOR)return C.EXTERIOR;if(i===C.BOUNDARY)return C.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);
if(s===C.INTERIOR)return C.EXTERIOR;if(s===C.BOUNDARY)return C.BOUNDARY}return C.INTERIOR}if(arguments[0]instanceof p&&arguments[1]instanceof St){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return C.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?ce.isOnLine(a,l)?C.INTERIOR:C.EXTERIOR:C.BOUNDARY}if(arguments[0]instanceof p&&arguments[1]instanceof Ct){var c=arguments[0],h=arguments[1],f=h.getCoordinate();return f.equals2D(c)?C.INTERIOR:C.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?ce.locatePointInRing(t,e.getCoordinates()):C.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==C.EXTERIOR},updateLocationInfo:function(t){t===C.INTERIOR&&(this.isIn=!0),t===C.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof Ct&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof St)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Nt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof pt)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof Pt)for(var o=e,i=0;i<o.getNumGeometries();i++){var s=o.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof ft)for(var a=new Te(e);a.hasNext();){var u=a.next();u!==e&&this.computeLocation(t,u)}},locate:function(t,e){return e.isEmpty()?C.EXTERIOR:e instanceof St?this.locateInternal(t,e):e instanceof Nt?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?C.BOUNDARY:this.numBoundaries>0||this.isIn?C.INTERIOR:C.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return Ne}}),e(Le.prototype,{interfaces_:function(){return[]},getClass:function(){return Le}}),Le.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof p&&arguments[1]instanceof p){var o=arguments[0],s=arguments[1],a=s.x-o.x,u=s.y-o.y;if(0===a&&0===u)throw new i("Cannot compute the octant for two identical points "+o);return Le.octant(a,u)}},e(Me.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return Me}}),e(Pe.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:Le.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return oe.toLineString(new zt(this.pts))},interfaces_:function(){return[Me]},getClass:function(){return Pe}}),e(Ae.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return Ae}}),e(Re.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[Ae,u]},getClass:function(){return Re}}),e(Oe.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&(e=2*t,e!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return 0===this._size},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return Oe}}),e(Fe.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return Fe}}),e(De.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return De}}),e(ze.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){f.isTrue(null===this.bounds),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[Ae,u]},getClass:function(){return ze}}),ze.serialVersionUID=0x5a1e55ec41369800;var hs={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return hs.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?ut.sort(n,e):ut.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new b;return e.add(t),e}};e(ke.prototype,{expandToQueue:function(t,e){var n=ke.isComposite(this.boundable1),r=ke.isComposite(this.boundable2);if(n&&r)return ke.area(this.boundable1)>ke.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(r)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new i("neither boundable is composite")},isLeaves:function(){return!(ke.isComposite(this.boundable1)||ke.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,i){for(var r=t.getChildBoundables(),o=r.iterator();o.hasNext();){var s=o.next(),a=new ke(s,e,this.itemDistance);a.getDistance()<i&&n.add(a)}},getBoundable:function(t){return 0===t?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[o]},getClass:function(){return ke}}),ke.area=function(t){return t.getBounds().getArea()},ke.isComposite=function(t){return t instanceof ze},e(Be.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function t(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===arguments.length){for(var e=arguments[0],t=0,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof ze?t+=this.size(i):i instanceof Re&&(t+=1)}return t}},removeItem:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof Re&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},itemsTree:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this.root);return null===t?new b:t}if(1===arguments.length){for(var e=arguments[0],n=new b,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof ze){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof Re?n.add(r.getItem()):f.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){f.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new Re(t,e))},boundablesAtLevel:function(){if(1===arguments.length){var t=arguments[0],e=new b;return this.boundablesAtLevel(t,this.root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(f.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof ze?this.boundablesAtLevel(n,s,r):(f.isTrue(s instanceof Re),n===-1&&r.add(s))}return null}},query:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new b;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,i)}else if(3===arguments.length)if(T(arguments[2],Fe)&&arguments[0]instanceof Object&&arguments[1]instanceof ze)for(var r=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof ze?this.query(r,l,s):l instanceof Re?s.visitItem(l.getItem()):f.shouldNeverReachHere())}else if(T(arguments[2],v)&&arguments[0]instanceof Object&&arguments[1]instanceof ze)for(var c=arguments[0],h=arguments[1],p=arguments[2],a=h.getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),c)&&(l instanceof ze?this.query(c,l,p):l instanceof Re?p.add(l.getItem()):f.shouldNeverReachHere())}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove(t,this.root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof ze&&(o=this.remove(n,u,r))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}},createHigherLevels:function(t,e){f.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===arguments.length){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof ze){var r=this.depth(i);r>e&&(e=r)}}return e+1}},createParentBoundables:function(t,e){f.isTrue(!t.isEmpty());var n=new b;n.add(this.createNode(e));var i=new b(t);hs.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[u]},getClass:function(){return Be}}),Be.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Be.IntersectsOp=je,Be.serialVersionUID=-0x35ef64c82d4c5400,Be.DEFAULT_NODE_CAPACITY=10,e(Ve.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Ve}}),c(Ge,Be),e(Ge.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){f.isTrue(t.length>0);for(var n=new b,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},createNode:function(t){return new Ue(t)},size:function(){return 0===arguments.length?Be.prototype.size.call(this):Be.prototype.size.apply(this,arguments)},insert:function(){if(2!==arguments.length)return Be.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void Be.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return Ge.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new b;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i},query:function(){if(1===arguments.length){var t=arguments[0];return Be.prototype.query.call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];Be.prototype.query.call(this,e,n)}else if(3===arguments.length)if(T(arguments[2],Fe)&&arguments[0]instanceof Object&&arguments[1]instanceof ze){var i=arguments[0],r=arguments[1],o=arguments[2];Be.prototype.query.call(this,i,r,o)}else if(T(arguments[2],v)&&arguments[0]instanceof Object&&arguments[1]instanceof ze){var s=arguments[0],a=arguments[1],u=arguments[2];Be.prototype.query.call(this,s,a,u)}},getComparator:function(){return Ge.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return Be.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return Be.prototype.remove.call(this,t,e)}return Be.prototype.remove.apply(this,arguments)},depth:function(){return 0===arguments.length?Be.prototype.depth.call(this):Be.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){f.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new b(t);hs.sort(i,Ge.xComparator);var r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)},nearestNeighbour:function(){if(1===arguments.length){if(T(arguments[0],Ve)){var t=arguments[0],e=new ke(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof ke){var n=arguments[0];return this.nearestNeighbour(n,r.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof Ge&&T(arguments[1],Ve)){var i=arguments[0],o=arguments[1],e=new ke(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(e)}if(arguments[0]instanceof ke&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=a,l=null,c=new Oe;for(c.add(s);!c.isEmpty()&&u>0;){var h=c.poll(),f=h.getDistance();if(f>=u)break;h.isLeaves()?(u=f,l=h):h.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[0],d=arguments[1],g=arguments[2],m=new Re(p,d),e=new ke(this.getRoot(),m,g);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[De,u]},getClass:function(){return Ge}}),Ge.centreX=function(t){return Ge.avg(t.getMinX(),t.getMaxX())},Ge.avg=function(t,e){return(t+e)/2},Ge.centreY=function(t){return Ge.avg(t.getMinY(),t.getMaxY())},c(Ue,ze),e(Ue.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new w(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Ue}}),Ge.STRtreeNode=Ue,Ge.serialVersionUID=0x39920f7d5f261e0,Ge.xComparator={interfaces_:function(){return[a]},compare:function(t,e){return Be.compareDoubles(Ge.centreX(t.getBounds()),Ge.centreX(e.getBounds()))}},Ge.yComparator={interfaces_:function(){return[a]},compare:function(t,e){return Be.compareDoubles(Ge.centreY(t.getBounds()),Ge.centreY(e.getBounds()))}},Ge.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},Ge.DEFAULT_NODE_CAPACITY=10,e(qe.prototype,{interfaces_:function(){return[]},getClass:function(){return qe}}),qe.relativeSign=function(t,e){return t<e?-1:t>e?1:0},qe.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=qe.relativeSign(e.x,n.x),r=qe.relativeSign(e.y,n.y);switch(t){case 0:return qe.compareValue(i,r);case 1:return qe.compareValue(r,i);case 2:return qe.compareValue(r,-i);case 3:return qe.compareValue(-i,r);case 4:return qe.compareValue(-i,-r);case 5:return qe.compareValue(-r,-i);case 6:return qe.compareValue(-r,i);case 7:return qe.compareValue(i,-r)}return f.shouldNeverReachHere("invalid octant value"),0},qe.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0},e(Xe.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:qe.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},isInterior:function(){return this._isInterior},interfaces_:function(){return[o]},getClass:function(){return Xe}}),e(Ye.prototype,{getSplitCoordinates:function(){var t=new E;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new b;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),i=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(i)&&t.add(new M(e+1))}},addEdgeCoordinates:function(t,e,n){var i=e.segmentIndex-t.segmentIndex+2,r=this.edge.getCoordinate(e.segmentIndex),o=e.isInterior()||!e.coord.equals2D(r);o||i--,n.add(new p(t.coord),!1);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)n.add(this.edge.getCoordinate(s));o&&n.add(new p(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next(),o=this.findCollapseIndex(i,r,e);o&&t.add(new M(e[0])),i=r}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new p(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.getCoordinate(a);return r&&(o[s]=new p(e.coord)),new Ze(o,this.edge.getData())},add:function(t,e){var n=new Xe(this.edge,t,e,this.edge.getSegmentOctant(e)),i=this.nodeMap.get(n);return null!==i?(f.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0),i=n.getCoordinate(0);if(!i.equals2D(e[0]))throw new l("bad split edge start point at "+i);var r=t.get(t.size()-1),o=r.getCoordinates(),s=o[o.length-1];if(!s.equals2D(e[e.length-1]))throw new l("bad split edge end point at "+s)},interfaces_:function(){return[]},getClass:function(){return Ye}}),e(We.prototype,{next:function(){return null===this.currNode?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):null===this.nextNode?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex>this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return null!==this.nextNode},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[g]},getClass:function(){return We}}),e(He.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[Me]},getClass:function(){return He}}),e(Ze.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:Le.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=(arguments[2],arguments[3]),o=new p(n.getIntersection(r));this.addIntersection(o,i)}},toString:function(){return oe.toLineString(new zt(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,i=n+1;if(i<this.pts.length){var r=this.pts[i];t.equals2D(r)&&(n=i)}var o=this.nodeList.add(t,n);return o},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[He]},getClass:function(){return Ze}}),Ze.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new b;return Ze.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var o=r.next();o.getNodeList().addSplitEdges(i)}},e(Je.prototype,{overlap:function(){if(2===arguments.length)arguments[0],arguments[1];else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(i,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}},interfaces_:function(){return[]},getClass:function(){return Je}}),e($e.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,i){var r=this.pts[e],o=this.pts[n];if(i.tempEnv1.init(r,o),n-e===1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,i),s<n&&this.computeSelect(t,s,n,i)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(null===this.env){var t=this.pts[this.start],e=this.pts[this.end];this.env=new w(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,i,r,o){var s=this.pts[t],a=this.pts[e],u=n.pts[i],l=n.pts[r];if(e-t===1&&r-i===1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((i+r)/2);t<c&&(i<h&&this.computeOverlapsInternal(t,c,n,i,h,o),h<r&&this.computeOverlapsInternal(t,c,n,h,r,o)),c<e&&(i<h&&this.computeOverlapsInternal(c,e,n,i,h,o),h<r&&this.computeOverlapsInternal(c,e,n,h,r,o))},interfaces_:function(){return[]},getClass:function(){return $e}}),e(Ke.prototype,{interfaces_:function(){return[]},getClass:function(){return Ke}}),Ke.isNorthern=function(t){return t===Ke.NE||t===Ke.NW},Ke.isOpposite=function(t,e){if(t===e)return!1;var n=(t-e+4)%4;return 2===n},Ke.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(2===n)return-1;var i=t<e?t:e,r=t>e?t:e;return 0===i&&3===r?3:i},Ke.isInHalfPlane=function(t,e){return e===Ke.SE?t===Ke.SE||t===Ke.SW:t===e||t===e+1},Ke.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Ke.NE:Ke.SE:e>=0?Ke.NW:Ke.SW}if(arguments[0]instanceof p&&arguments[1]instanceof p){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new i("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Ke.NE:Ke.SE:r.y>=n.y?Ke.NW:Ke.SW}},Ke.NE=0,Ke.NW=1,Ke.SW=2,Ke.SE=3,e(Qe.prototype,{interfaces_:function(){return[]},getClass:function(){return Qe}}),Qe.getChainStartIndices=function(t){var e=0,n=new b;n.add(new M(e));do{var i=Qe.findChainEnd(t,e);n.add(new M(i)),e=i}while(e<t.length-1);var r=Qe.toIntArray(n);return r},Qe.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Ke.quadrant(t[n],t[n+1]),r=e+1;r<t.length;){if(!t[r-1].equals2D(t[r])){var o=Ke.quadrant(t[r-1],t[r]);if(o!==i)break}r++}return r-1},Qe.getChains=function(){if(1===arguments.length){var t=arguments[0];return Qe.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new b,r=Qe.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new $e(e,r[o],r[o+1],n);i.add(s)}return i}},Qe.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(tn.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return tn}}),e(en.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[tn]},getClass:function(){return en}}),c(nn,en),e(nn.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Ze.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=Qe.getChains(t.getCoordinates(),t),n=e.iterator();n.hasNext();){var i=n.next();i.setId(this.idCounter++),this.index.insert(i.getEnvelope(),i),this.monoChains.add(i)}},computeNodes:function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new rn(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this.index.query(n.getEnvelope()),r=i.iterator();r.hasNext();){var o=r.next();if(o.getId()>n.getId()&&(n.computeOverlaps(o,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return nn}}),c(rn,Je),e(rn.prototype,{overlap:function(){if(4!==arguments.length)return Je.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=t.getContext(),o=n.getContext();this.si.processIntersections(r,e,o,i)},interfaces_:function(){return[]},getClass:function(){return rn}}),nn.SegmentOverlapAction=rn,c(on,l),e(on.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return on}}),on.msgWithCoord=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(sn.prototype,{processIntersections:function(t,e,n,i){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return sn}}),e(an.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,i){if(!this.findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this.isCheckEndSegmentsOnly){var r=this.isEndSegment(t,e)||this.isEndSegment(n,i);if(!r)return null}var o=t.getCoordinates()[e],s=t.getCoordinates()[e+1],a=n.getCoordinates()[i],u=n.getCoordinates()[i+1];this.li.computeIntersection(o,s,a,u),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=o,this.intSegments[1]=s,this.intSegments[2]=a,this.intSegments[3]=u,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return 0===e||e>=t.size()-2},hasIntersection:function(){return null!==this.interiorIntersection},isDone:function(){return!this.findAllIntersections&&null!==this.interiorIntersection},interfaces_:function(){return[sn]},getClass:function(){return an}}),an.createAllIntersectionsFinder=function(t){var e=new an(t);return e.setFindAllIntersections(!0),e},an.createAnyIntersectionFinder=function(t){return new an(t)},an.createIntersectionCounter=function(t){var e=new an(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},e(un.prototype,{execute:function(){return null!==this.segInt?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new an(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new nn;if(t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection())return this._isValid=!1,null},checkValid:function(){if(this.execute(),!this._isValid)throw new on(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+oe.toLineString(t[0],t[1])+" and "+oe.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return un}}),un.computeIntersections=function(t){var e=new un(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},e(ln.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return ln}}),ln.toSegmentStrings=function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Pe(i.getCoordinates(),i))}return e},ln.checkValid=function(t){var e=new ln(t);e.checkValid()},e(cn.prototype,{map:function(t){for(var e=new b,n=0;n<t.getNumGeometries();n++){var i=this.mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(ie.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return cn}}),cn.map=function(t,e){var n=new cn(e);return n.map(t)},e(hn.prototype,{interfaces_:function(){return[]},getClass:function(){return hn}}),hn.opposite=function(t){return t===hn.LEFT?hn.RIGHT:t===hn.RIGHT?hn.LEFT:t},hn.ON=0,hn.LEFT=1,hn.RIGHT=2,e(fn.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==C.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===C.NONE&&(this.location[e]=t)},isLine:function(){return 1===this.location.length},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[hn.ON]=this.location[hn.ON],e[hn.LEFT]=C.NONE,e[hn.RIGHT]=C.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===C.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[hn.LEFT];this.location[hn.LEFT]=this.location[hn.RIGHT],this.location[hn.RIGHT]=t},toString:function(){var t=new L;return this.location.length>1&&t.append(C.toLocationSymbol(this.location[hn.LEFT])),
t.append(C.toLocationSymbol(this.location[hn.ON])),this.location.length>1&&t.append(C.toLocationSymbol(this.location[hn.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[hn.ON]=t,this.location[hn.LEFT]=e,this.location[hn.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:C.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===C.NONE)return!0;return!1},setLocation:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(hn.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(C.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return fn}}),e(pn.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new fn(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(hn.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new L;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(hn.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new fn(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return pn}}),pn.toLineLabel=function(t){for(var e=new pn(C.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e},e(dn.prototype,{computeRing:function(){if(null!==this.ring)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=ce.isCCW(this.ring.getCoordinates())},isIsolated:function(){return 1===this.label.getGeometryCount()},computePoints:function(t){this.startDe=t;var e=t,n=!0;do{if(null===e)throw new on("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new on("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var i=e.getLabel();f.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),n=e.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this.pts.add(i[o])}else{var r=i.length-2;n&&(r=i.length-1);for(var o=r;o>=0;o--)this.pts.add(i[o])}},isHole:function(){return this._isHole},setInResult:function(){var t=this.startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this.startDe)},containsPoint:function(t){var e=this.getLinearRing(),n=e.getEnvelopeInternal();if(!n.contains(t))return!1;if(!ce.isPointInRing(t,e.getCoordinates()))return!1;for(var i=this.holes.iterator();i.hasNext();){var r=i.next();if(r.containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return null===this.shell},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,hn.RIGHT);if(i===C.NONE)return null;if(this.label.getLocation(n)===C.NONE)return this.label.setLocation(n,i),null}},setShell:function(t){this.shell=t,null!==t&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();var i=t.createPolygon(this.getLinearRing(),e);return i},interfaces_:function(){return[]},getClass:function(){return dn}}),c(gn,dn),e(gn.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return gn}}),c(mn,dn),e(mn.prototype,{buildMinimalRings:function(){var t=new b,e=this.startDe;do{if(null===e.getMinEdgeRing()){var n=new gn(e,this.geometryFactory);t.add(n)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{var e=t.getNode();e.getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return mn}}),e(yn.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){f.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return yn}}),c(vn,yn),e(vn.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){var e=t.next();if(e.getEdge().isInResult())return!0}return!1},isIsolated:function(){return 1===this.label.getGeometryCount()},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=C.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==C.BOUNDARY&&(n=i)}return n},setLabel:function(){if(2!==arguments.length)return yn.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this.label?this.label=new pn(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof vn){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof pn)for(var e=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(e,n),r=this.label.getLocation(n);r===C.NONE&&this.label.setLocation(n,i)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(null===this.label)return null;var e=C.NONE;null!==this.label&&(e=this.label.getLocation(t));var n=null;switch(e){case C.BOUNDARY:n=C.INTERIOR;break;case C.INTERIOR:n=C.BOUNDARY;break;default:n=C.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return vn}}),e(_n.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof p){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof vn){var n=arguments[0],e=this.nodeMap.get(n.getCoordinate());return null===e?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new b,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===C.BOUNDARY&&e.add(i)}return e},add:function(t){var e=t.getCoordinate(),n=this.addNode(e);n.add(t)},interfaces_:function(){return[]},getClass:function(){return _n}}),e(xn.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:ce.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf("."),i=e.substring(n+1);return"  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=Ke.quadrant(this.dx,this.dy),f.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[o]},getClass:function(){return xn}}),c(bn,xn),e(bn.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new pn(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(this.depth[t]!==-999&&this.depth[t]!==e)throw new on("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function t(){for(var t=!0,e=0;e<2;e++)this.label.isArea(e)&&this.label.getLocation(e,hn.LEFT)===C.INTERIOR&&this.label.getLocation(e,hn.RIGHT)===C.INTERIOR||(t=!1);return t},setNextMin:function(t){this.nextMin=t},print:function(t){xn.prototype.print.call(this,t),t.print(" "+this.depth[hn.LEFT]+"/"+this.depth[hn.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,C.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,C.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===hn.LEFT&&(i=-1);var r=hn.opposite(t),o=n*i,s=e+o;this.setDepth(t,e),this.setDepth(r,s)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return bn}}),bn.depthFactor=function(t,e){return t===C.EXTERIOR&&e===C.INTERIOR?1:t===C.INTERIOR&&e===C.EXTERIOR?-1:0},e(En.prototype,{createNode:function(t){return new vn(t,null)},interfaces_:function(){return[]},getClass:function(){return En}}),e(wn.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof vn){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof p){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){F.out.println(t)},isBoundaryNode:function(t,e){var n=this.nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===C.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,i){return!!t.equals(n)&&ce.computeOrientation(t,e,i)===ce.COLLINEAR&&Ke.quadrant(t,e)===Ke.quadrant(n,i)},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){F.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var i=new bn(n,!0),r=new bn(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},interfaces_:function(){return[]},getClass:function(){return wn}}),wn.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}},e(Sn.prototype,{sortShellsAndHoles:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},computePolygons:function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next(),r=i.toPolygon(this.geometryFactory);e.add(r)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new on("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},buildMinimalEdgeRings:function(t,e,n){for(var i=new b,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){var n=e.next();if(n.containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new mn(i,this.geometryFactory);e.add(r),r.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},getPolygons:function(){var t=this.computePolygons(this.shellList);return t},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(i)&&ce.isPointInRing(r,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u)}return o},findShell:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return f.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},add:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];wn.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new b,o=this.buildMinimalEdgeRings(i,this.shellList,r);this.sortShellsAndHoles(o,this.shellList,r),this.placeFreeHoles(this.shellList,r)}},interfaces_:function(){return[]},getClass:function(){return Sn}}),e(In.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!ii.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getEdge();if(i.isLineEdge()&&!r.isCoveredSet()){var o=this.op.isCoveredByA(i.getCoordinate());r.setCovered(o)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(i),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var i=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(f.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(ii.isResultOfOp(i,e)&&e===ii.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return In}}),e(Cn.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==ii.INTERSECTION)){var i=n.getLabel();ii.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return Cn}}),e(Tn.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return Tn}}),e(Nn.prototype,{locate:function(t){return Nn.locate(t,this.geom)},interfaces_:function(){return[Tn]},getClass:function(){return Nn}}),Nn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&ce.isPointInRing(t,e.getCoordinates())},Nn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Nn.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(Nn.isPointInRing(t,r))return!1}return!0},Nn.containsPoint=function(t,e){if(e instanceof Nt)return Nn.containsPointInPolygon(t,e);if(e instanceof ft)for(var n=new Te(e);n.hasNext();){var i=n.next();if(i!==e&&Nn.containsPoint(t,i))return!0}return!1},Nn.locate=function(t,e){return e.isEmpty()?C.EXTERIOR:Nn.containsPoint(t,e)?C.INTERIOR:C.EXTERIOR},e(Ln.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return 0===e&&(n=this.edgeList.size()-1),this.edgeList.get(n)},propagateSideLabels:function(t){for(var e=C.NONE,n=this.iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea(t)&&r.getLocation(t,hn.LEFT)!==C.NONE&&(e=r.getLocation(t,hn.LEFT))}if(e===C.NONE)return null;for(var o=e,n=this.iterator();n.hasNext();){var i=n.next(),r=i.getLabel();if(r.getLocation(t,hn.ON)===C.NONE&&r.setLocation(t,hn.ON,o),r.isArea(t)){var s=r.getLocation(t,hn.LEFT),a=r.getLocation(t,hn.RIGHT);if(a!==C.NONE){if(a!==o)throw new on("side location conflict",i.getCoordinate());s===C.NONE&&f.shouldNeverReachHere("found single null side (at "+i.getCoordinate()+")"),o=s}else f.isTrue(r.getLocation(t,hn.LEFT)===C.NONE,"found single null side"),r.setLocation(t,hn.RIGHT,o),r.setLocation(t,hn.LEFT,o)}}},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},print:function(t){F.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel(),r=i.getLocation(t,hn.LEFT);f.isTrue(r!==C.NONE,"Found unlabelled area edge");for(var o=r,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();f.isTrue(u.isArea(t),"Found non-area edge");var l=u.getLocation(t,hn.LEFT),c=u.getLocation(t,hn.RIGHT);if(l===c)return!1;if(c!==o)return!1;o=l}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){var n=this.edgeList.get(e);if(n===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return null===this.edgeList&&(this.edgeList=new b(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===C.NONE&&(this.ptInAreaLocation[t]=Nn.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new L;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next(),r=i.getLabel(),o=0;o<2;o++)r.isLine(o)&&r.getLocation(o)===C.BOUNDARY&&(e[o]=!0);for(var n=this.iterator();n.hasNext();)for(var i=n.next(),r=i.getLabel(),o=0;o<2;o++)if(r.isAnyNull(o)){var s=C.NONE;if(e[o])s=C.EXTERIOR;else{var a=i.getCoordinate();s=this.getLocation(o,a,t)}r.setAllLocationsIfNull(o,s)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return Ln}}),c(Mn,Ln),e(Mn.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,i=0;i<this.resultAreaEdgeList.size();i++){var r=this.resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this.SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===t)throw new on("no outgoing dirEdge found",this.getCoordinate());f.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Ke.isNorthern(r)&&Ke.isNorthern(o)?n:Ke.isNorthern(r)||Ke.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(f.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},print:function(t){F.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new b;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var i=this.edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},computeDepths:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth(hn.LEFT)),i=t.getDepth(hn.RIGHT),r=this.computeDepths(e+1,this.edgeList.size(),n),o=this.computeDepths(0,e,r);if(o!==i)throw new on("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=u,c=s;c<a;c++){var h=this.edgeList.get(c);h.getLabel(),h.setEdgeDepths(hn.RIGHT,l),l=h.getDepth(hn.LEFT)}return l}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();n.merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,i=this.SCANNING_FOR_INCOMING,r=this.resultAreaEdgeList.size()-1;r>=0;r--){var o=this.resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this.SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this.SCANNING_FOR_INCOMING}}i===this.LINKING_TO_OUTGOING&&(f.isTrue(null!==e,"found null for first outgoing dirEdge"),f.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var i=arguments[0],t=0,e=this.iterator();e.hasNext();){var n=e.next();n.getEdgeRing()===i&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=C.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=C.INTERIOR;break}if(i.isInResult()){t=C.EXTERIOR;break}}}if(t===C.NONE)return null;for(var r=t,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();n.isLineEdge()?n.getEdge().setCovered(r===C.INTERIOR):(n.isInResult()&&(r=C.EXTERIOR),i.isInResult()&&(r=C.INTERIOR))}},computeLabelling:function(t){Ln.prototype.computeLabelling.call(this,t),this.label=new pn(C.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next(),i=n.getEdge(),r=i.getLabel(),o=0;o<2;o++){var s=r.getLocation(o);s!==C.INTERIOR&&s!==C.BOUNDARY||this.label.setLocation(o,C.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Mn}}),c(Pn,En),e(Pn.prototype,{createNode:function(t){return new vn(t,new Mn)},interfaces_:function(){return[]},getClass:function(){return Pn}}),e(An.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return An}}),e(Rn.prototype,{isDelete:function(){return this.eventType===Rn.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===Rn.INSERT},isSameLabel:function(t){return null!==this.label&&this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[o]},getClass:function(){return Rn}}),Rn.INSERT=1,Rn.DELETE=2,e(On.prototype,{interfaces_:function(){return[]},getClass:function(){return On}}),e(Fn.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(Fn.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next(),r=i.getCoordinate();if(t.isIntersection(r))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return Fn}}),Fn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},c(Dn,On),e(Dn.prototype,{prepareEvents:function(){hs.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Fn&&T(arguments[0],v)&&T(arguments[1],v)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&T(arguments[0],v)&&arguments[1]instanceof Fn){var s=arguments[0],a=arguments[1],u=arguments[2];u?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a);
}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new An(n,r),s=new Rn(e,n.getMinX(r),o);this.events.add(s),this.events.add(new Rn(n.getMaxX(r),s))}},processOverlaps:function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},addEdges:function(){if(1===arguments.length)for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.addEdge(n,n)}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1],e=i.iterator();e.hasNext();){var n=e.next();this.addEdge(n,r)}},interfaces_:function(){return[]},getClass:function(){return Dn}}),e(zn.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return oe.toLineString(new p(this.min,0),new p(this.max,0))},interfaces_:function(){return[]},getClass:function(){return zn}}),e(kn.prototype,{compare:function(t,e){var n=t,i=e,r=(n.min+n.max)/2,o=(i.min+i.max)/2;return r<o?-1:r>o?1:0},interfaces_:function(){return[a]},getClass:function(){return kn}}),zn.NodeComparator=kn,c(Bn,zn),e(Bn.prototype,{query:function(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return Bn}}),c(jn,zn),e(jn.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){return this.intersects(t,e)?(null!==this.node1&&this.node1.query(t,e,n),void(null!==this.node2&&this.node2.query(t,e,n))):null},interfaces_:function(){return[]},getClass:function(){return jn}}),e(Vn.prototype,{buildTree:function(){hs.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,n=new b;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new Bn(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){return null!==this.root?null:void(this.root=this.buildTree())},printNode:function(t){F.out.println(oe.toLineString(new p(t.min,this.level),new p(t.max,this.level)))},init:function(){return null!==this.root?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n),r=n+1<t.size()?t.get(n):null;if(null===r)e.add(i);else{var o=new jn(t.get(n),t.get(n+1));e.add(o)}}},interfaces_:function(){return[]},getClass:function(){return Vn}}),e(Gn.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof Mt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof St&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[k]},getClass:function(){return Gn}}),Gn.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Gn.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Gn.getLines(e,n))}},Gn.getLines=function(){if(1===arguments.length){var t=arguments[0];return Gn.getLines(t,!1)}if(2===arguments.length){if(T(arguments[0],m)&&T(arguments[1],m)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();Gn.getLines(r,n)}return n}if(arguments[0]instanceof B&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new b;return o.apply(new Gn(a,s)),a}if(arguments[0]instanceof B&&T(arguments[1],m)){var u=arguments[0],l=arguments[1];return u instanceof St?l.add(u):u.apply(new Gn(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&T(arguments[0],m)&&T(arguments[1],m)){for(var c=arguments[0],h=arguments[1],f=arguments[2],i=c.iterator();i.hasNext();){var r=i.next();Gn.getLines(r,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof B&&T(arguments[1],m)){var p=arguments[0],d=arguments[1],g=arguments[2];return p.apply(new Gn(d,g)),d}}},e(Un.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Fe]},getClass:function(){return Un}}),e(qn.prototype,{locate:function(t){var e=new le(t),n=new Xn(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[Tn]},getClass:function(){return qn}}),e(Xn.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[Fe]},getClass:function(){return Xn}}),e(Yn.prototype,{init:function(t){for(var e=Gn.getLines(t),n=e.iterator();n.hasNext();){var i=n.next(),r=i.getCoordinates();this.addLine(r)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new he(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this.index.insert(i,r,n)}},query:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Un;return this.index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.index.query(i,r,o)}},interfaces_:function(){return[]},getClass:function(){return Yn}}),qn.SegmentVisitor=Xn,qn.IntervalIndexedGeometry=Yn,e(Wn.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[o]},getClass:function(){return Wn}}),e(Hn.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new p(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new Kn(o,new pn(this.edge.label))},add:function(t,e,n){var i=new Wn(t,e,n),r=this.nodeMap.get(i);return null!==r?r:(this.nodeMap.put(i,i),i)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return Hn}}),e(Zn.prototype,{getChainStartIndices:function(t){var e=0,n=new b;n.add(new M(e));do{var i=this.findChainEnd(t,e);n.add(new M(i)),e=i}while(e<t.length-1);var r=Zn.toIntArray(n);return r},findChainEnd:function(t,e){for(var n=Ke.quadrant(t[e],t[e+1]),i=e+1;i<t.length;){var r=Ke.quadrant(t[i-1],t[i]);if(r!==n)break;i++}return i-1},interfaces_:function(){return[]},getClass:function(){return Zn}}),Zn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(Jn.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},computeIntersectsForChain:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[r],h=this.pts[o],f=s.pts[a],p=s.pts[u];if(o-r===1&&u-a===1)return l.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),g=Math.trunc((a+u)/2);r<d&&(a<g&&this.computeIntersectsForChain(r,d,s,a,g,l),g<u&&this.computeIntersectsForChain(r,d,s,g,u,l)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,l),g<u&&this.computeIntersectsForChain(d,o,s,g,u,l))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},interfaces_:function(){return[]},getClass:function(){return Jn}}),e($n.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this.depth[t][e]!==$n.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this.depth[n][1]===$n.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.depth[i][r]===$n.NULL_VALUE}},normalize:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this.depth[t][n]>e&&(i=1),this.depth[t][n]=i}}},getDelta:function(t){return this.depth[t][hn.RIGHT]-this.depth[t][hn.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?C.EXTERIOR:C.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==C.EXTERIOR&&i!==C.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=$n.depthAtLocation(i):this.depth[e][n]+=$n.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];s===C.INTERIOR&&this.depth[r][o]++}},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.depthAtLocation=function(t){return t===C.EXTERIOR?0:t===C.INTERIOR?1:$n.NULL_VALUE},$n.NULL_VALUE=-1,c(Kn,yn),e(Kn.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];var e=new Kn(t,pn.toLineLabel(this.label));return e},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof Kn))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,r=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0},getCoordinate:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){Kn.updateIM(this.label,t)},isCollapsed:function(){return!!this.label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return null===this.mce&&(this.mce=new Jn(this)),this.mce},getEnvelope:function(){if(null===this.env){this.env=new w;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,i){var r=new p(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;if(a<this.pts.length){var u=this.pts[a];r.equals2D(u)&&(o=a,s=0)}this.eiList.add(r,o,s)},toString:function(){var t=new L;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[]},getClass:function(){return Kn}}),Kn.updateIM=function(){if(2!==arguments.length)return yn.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,hn.ON),t.getLocation(1,hn.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,hn.LEFT),t.getLocation(1,hn.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,hn.RIGHT),t.getLocation(1,hn.RIGHT),2))},c(Qn,wn),e(Qn.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e),i=n.getLabel(),r=1,o=C.NONE;o=i.getLocation(t,hn.ON),o===C.BOUNDARY&&r++;var s=Qn.determineBoundary(this.boundaryNodeRule,r);i.setLocation(t,s)},computeSelfNodes:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new Fn(n,!0,!1);o.setIsDoneIfProperInt(r);var s=this.createEdgeSetIntersector(),a=this.parentGeom instanceof Mt||this.parentGeom instanceof Nt||this.parentGeom instanceof Pt,u=i||!a;return s.computeIntersections(this.edges,o,u),this.addSelfIntersectionNodes(this.argIndex),o}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){var n=e.next();n.eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){var i=new Fn(e,n,!0);i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());var r=this.createEdgeSetIntersector();return r.computeIntersections(this.edges,t.edges,i),i},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof Ct){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this.argIndex,e,C.INTERIOR)}else if(arguments[0]instanceof p){var n=arguments[0];this.insertPoint(this.argIndex,n,C.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),C.EXTERIOR,C.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,C.INTERIOR,C.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],C.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],C.BOUNDARY)},addLineString:function(t){var e=Y.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new Kn(e,new pn(this.argIndex,C.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),f.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},getBoundaryNodes:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===C.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var i=Y.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=i[0],null;var r=e,o=n;ce.isCCW(i)&&(r=n,o=e);var s=new Kn(i,new pn(this.argIndex,C.BOUNDARY,r,o));this.lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this.argIndex,i[0],C.BOUNDARY)},insertPoint:function(t,e,n){var i=this.nodes.addNode(e),r=i.getLabel();null===r?i.label=new pn(t,n):r.setLocation(t,n)},createEdgeSetIntersector:function(){return new Dn},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},add:function(){if(1!==arguments.length)return wn.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Pt&&(this.useBoundaryDeterminationRule=!1),t instanceof Nt)this.addPolygon(t);else if(t instanceof St)this.addLineString(t);else if(t instanceof Ct)this.addPoint(t);else if(t instanceof Lt)this.addCollection(t);else if(t instanceof pt)this.addCollection(t);else if(t instanceof Pt)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return T(this.parentGeom,Tt)&&this.parentGeom.getNumGeometries()>50?(null===this.areaPtLocator&&(this.areaPtLocator=new qn(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(1===arguments.length){var t=arguments[0];return this.lineEdgeMap.get(t)}return wn.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return Qn}}),Qn.determineBoundary=function(t,e){return t.isInBoundary(e)?C.BOUNDARY:C.INTERIOR},e(ti.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return ti}}),e(ei.prototype,{compareTo:function(t){var e=t,n=ei.compareOriented(this.pts,this._orientation,e.pts,e._orientation);return n},interfaces_:function(){return[o]},getClass:function(){return ei}}),ei.orientation=function(t){return 1===Y.increasingDirection(t)},ei.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;u+=r,l+=o;var h=u===s,f=l===a;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}},e(ni.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new ei(t.getCoordinates()),n=this.ocaMap.get(e);return n},add:function(t){this.edges.add(t);var e=new ei(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return ni}}),c(ii,ti),e(ii.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new pn(t.getLabel()),i.flip());var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,i){var r=new b;return r.addAll(t),r.addAll(e),r.addAll(n),r.isEmpty()?ii.createEmptyResult(i,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(r)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next(),r=this.ptLocator.locate(t,i);if(r!==C.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new b,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new b;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ln.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Sn(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var i=new In(this,this.geomFact,this.ptLocator);this.resultLineList=i.build(t);var r=new Cn(this,this.geomFact,this.ptLocator);this.resultPointList=r.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),i=this.graph.addNode(n.getCoordinate());i.setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&ii.isResultOfOp(i.getLocation(0,hn.RIGHT),i.getLocation(1,hn.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(f.isTrue(!i.isNull(r,hn.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,hn.LEFT,i.getLocation(r,hn.LEFT)),f.isTrue(!i.isNull(r,hn.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,hn.RIGHT,i.getLocation(r,hn.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(t++,i.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(i)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return ii}}),ii.overlayOp=function(t,e,n){var i=new ii(t,e),r=i.getResultGeometry(n);return r},ii.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return ii.createEmptyResult(ii.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return cn.map(t,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ii.INTERSECTION)},ii.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ii.createEmptyResult(ii.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ii.SYMDIFFERENCE)},ii.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case ii.INTERSECTION:o=Math.min(i,r);break;case ii.UNION:o=Math.max(i,r);break;case ii.DIFFERENCE:o=i;break;case ii.SYMDIFFERENCE:o=Math.max(i,r)}return o},ii.createEmptyResult=function(t,e,n,i){var r=null;switch(ii.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},ii.difference=function(t,e){return t.isEmpty()?ii.createEmptyResult(ii.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ii.DIFFERENCE))},ii.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return ii.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===C.BOUNDARY&&(r=C.INTERIOR),o===C.BOUNDARY&&(o=C.INTERIOR),s){case ii.INTERSECTION:return r===C.INTERIOR&&o===C.INTERIOR;case ii.UNION:return r===C.INTERIOR||o===C.INTERIOR;case ii.DIFFERENCE:return r===C.INTERIOR&&o!==C.INTERIOR;case ii.SYMDIFFERENCE:return r===C.INTERIOR&&o!==C.INTERIOR||r!==C.INTERIOR&&o===C.INTERIOR}return!1}},ii.INTERSECTION=1,ii.UNION=2,ii.DIFFERENCE=3,ii.SYMDIFFERENCE=4,e(ri.prototype,{selfSnap:function(t){var e=new be(t),n=e.snapTo(t,this.snapTolerance);return n},removeCommonBits:function(t){this.cbr=new Se,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),n=ii.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||F.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=be.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t),n=be.snap(e[0],e[1],this.snapTolerance);return n},interfaces_:function(){return[]},getClass:function(){return ri}}),ri.overlayOp=function(t,e,n){var i=new ri(t,e);return i.getResultGeometry(n)},ri.union=function(t,e){return ri.overlayOp(t,e,ii.UNION)},ri.intersection=function(t,e){return ri.overlayOp(t,e,ii.INTERSECTION)},ri.symDifference=function(t,e){return ri.overlayOp(t,e,ii.SYMDIFFERENCE)},ri.difference=function(t,e){return ri.overlayOp(t,e,ii.DIFFERENCE)},e(oi.prototype,{getResultGeometry:function(t){var e=null,n=!1,i=null;try{e=ii.overlayOp(this.geom[0],this.geom[1],t);var r=!0;r&&(n=!0)}catch(t){if(!(t instanceof l))throw t;i=t}finally{}if(!n)try{e=ri.overlayOp(this.geom[0],this.geom[1],t)}catch(t){throw t instanceof l?i:t}finally{}return e},interfaces_:function(){return[]},getClass:function(){return oi}}),oi.overlayOp=function(t,e,n){var i=new oi(t,e);return i.getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,ii.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,ii.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,ii.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,ii.DIFFERENCE)},e(si.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,i=this.horizontalBisector(t);if(0===i.getLength())n=0,e=i.getCoordinate();else{var r=oi.overlayOp(i,t,ii.INTERSECTION),o=this.widestGeometry(r);n=o.getEnvelopeInternal().getWidth(),e=si.centre(o.getEnvelopeInternal())}(null===this.interiorPoint||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function t(){if(arguments[0]instanceof ft){var e=arguments[0];if(e.isEmpty())return e;for(var t=e.getGeometryN(0),n=1;n<e.getNumGeometries();n++)e.getGeometryN(n).getEnvelopeInternal().getWidth()>t.getEnvelopeInternal().getWidth()&&(t=e.getGeometryN(n));return t}if(arguments[0]instanceof B){var i=arguments[0];return i instanceof ft?this.widestGeometry(i):i}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=ai.getBisectorY(t);return this.factory.createLineString([new p(e.getMinX(),n),new p(e.getMaxX(),n)])},add:function(t){if(t instanceof Nt)this.addPolygon(t);else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return si}}),si.centre=function(t){return new p(si.avg(t.getMinX(),t.getMaxX()),si.avg(t.getMinY(),t.getMaxY()))},si.avg=function(t,e){return(t+e)/2},e(ai.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var e=si.avg(this.hiY,this.loY);return e},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var i=e.getY(n);this.updateInterval(i)}},interfaces_:function(){return[]},getClass:function(){return ai}}),ai.getBisectorY=function(t){var e=new ai(t);return e.getBisectorY()},si.SafeBisectorFinder=ai,e(ui.prototype,{addEndpoints:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof St)this.addEndpoints(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var i=arguments[0];this.add(i[0]),this.add(i[i.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof St)this.addInterior(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array)for(var i=arguments[0],n=1;n<i.length-1;n++)this.add(i[n])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new p(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return ui}}),e(li.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof Ct)this.add(t.getCoordinate());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof p){var i=arguments[0],r=i.distance(this.centroid);r<this.minDistance&&(this.interiorPoint=new p(i),this.minDistance=r)}},interfaces_:function(){return[]},getClass:function(){return li}}),e(ci.prototype,{select:function(){if(1===arguments.length)arguments[0];else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},interfaces_:function(){return[]},getClass:function(){return ci}}),e(hi.prototype,{hasChildren:function(){for(var t=0;t<2;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<2;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);
return t},size:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return null===t||this.isSearchMatch(t)?(e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<2;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n?n:n=this.items.remove(e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<2;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return hi}}),hi.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},e(fi.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(1===arguments.length){var t=arguments[0];return this.overlaps(t.min,t.max)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(1===arguments.length){if(arguments[0]instanceof fi){var t=arguments[0];return this.contains(t.min,t.max)}if("number"==typeof arguments[0]){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return n>=this.min&&i<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return fi}}),pi.exponent=function(t){return di(64,t)-1023},pi.powerOf2=function(t){return Math.pow(2,t)},e(gi.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=gi.computeLevel(t),this.interval=new fi,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var n=pi.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return gi}}),gi.computeLevel=function(t){var e=t.getWidth(),n=pi.exponent(e)+1;return n},c(mi,hi),e(mi.prototype,{getInterval:function(){return this.interval},find:function(t){var e=hi.getSubnodeIndex(t,this.centre);if(e===-1)return this;if(null!==this.subnode[e]){var n=this.subnode[e];return n.find(t)}return this},insert:function(t){f.isTrue(null===this.interval||this.interval.contains(t.interval));var e=hi.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=hi.getSubnodeIndex(t,this.centre);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}var i=new fi(e,n),r=new mi(i,this.level-1);return r},interfaces_:function(){return[]},getClass:function(){return mi}}),mi.createNode=function(t){var e=new gi(t),n=new mi(e.getInterval(),e.getLevel());return n},mi.createExpanded=function(t,e){var n=new fi(e);null!==t&&n.expandToInclude(t.interval);var i=mi.createNode(n);return null!==t&&i.insert(t),i},e(yi.prototype,{interfaces_:function(){return[]},getClass:function(){return yi}});yi.isZeroWidth=function(t,e){var n=e-t;if(0===n)return!0;var i=Math.max(Math.abs(t),Math.abs(e)),r=n/i,o=pi.exponent(r);return o<=yi.MIN_BINARY_EXPONENT};yi.MIN_BINARY_EXPONENT=-50,c(vi,hi),e(vi.prototype,{insert:function(t,e){var n=hi.getSubnodeIndex(t,vi.origin);if(n===-1)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getInterval().contains(t)){var r=mi.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){f.isTrue(t.getInterval().contains(e));var i=yi.isZeroWidth(e.getMin(),e.getMax()),r=null;r=i?t.find(e):t.getNode(e),r.add(n)},interfaces_:function(){return[]},getClass:function(){return vi}}),vi.origin=0,e(_i.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=_i.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];return this.query(new fi(t,t))}if(arguments[0]instanceof fi){var e=arguments[0],n=new b;return this.query(e,n),n}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.root.addAllItemsFromOverlapping(i,r)}},iterator:function(){var t=new b;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var n=_i.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},depth:function(){return null!==this.root?this.root.depth():0},nodeSize:function(){return null!==this.root?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return _i}}),_i.ensureExtent=function(t,e){var n=t.getMin(),i=t.getMax();return n!==i?t:(n===i&&(n-=e/2,i=n+e/2),new fi(n,i))},e(xi.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return xi}}),e(bi.prototype,{testLineSegment:function(t,e){var n=null,i=null,r=null,o=null,s=null,a=e.p0,u=e.p1;i=a.x-t.x,r=a.y-t.y,o=u.x-t.x,s=u.y-t.y,(r>0&&s<=0||s>0&&r<=0)&&(n=ue.signOfDet2x2(i,r,o,s)/(s-r),0<n&&this.crossings++)},buildIndex:function(){this.tree=new _i;for(var t=Y.removeRepeatedPoints(this.ring.getCoordinates()),e=Qe.getChains(t),n=0;n<e.size();n++){var i=e.get(n),r=i.getEnvelope();this.interval.min=r.getMinY(),this.interval.max=r.getMaxY(),this.tree.insert(this.interval,i)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new w(r.NEGATIVE_INFINITY,r.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),i=new Ei(this,t),o=n.iterator();o.hasNext();){var s=o.next();this.testMonotoneChain(e,i,s)}return this.crossings%2===1},interfaces_:function(){return[xi]},getClass:function(){return bi}}),c(Ei,ci),e(Ei.prototype,{select:function(){if(1!==arguments.length)return ci.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return Ei}}),bi.MCSelecter=Ei,e(wi.prototype,{interfaces_:function(){return[]},getClass:function(){return wi}}),wi.toDegrees=function(t){return 180*t/Math.PI},wi.normalize=function(t){for(;t>Math.PI;)t-=wi.PI_TIMES_2;for(;t<=-Math.PI;)t+=wi.PI_TIMES_2;return t},wi.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},wi.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=n.x-e.x,s=n.y-e.y,a=i*o+r*s;return a>0},wi.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=n.x-e.x,s=n.y-e.y,a=i*o+r*s;return a<0},wi.interiorAngle=function(t,e,n){var i=wi.angle(e,t),r=wi.angle(e,n);return Math.abs(r-i)},wi.normalizePositive=function(t){if(t<0){for(;t<0;)t+=wi.PI_TIMES_2;t>=wi.PI_TIMES_2&&(t=0)}else{for(;t>=wi.PI_TIMES_2;)t-=wi.PI_TIMES_2;t<0&&(t=0)}return t},wi.angleBetween=function(t,e,n){var i=wi.angle(e,t),r=wi.angle(e,n);return wi.diff(i,r)},wi.diff=function(t,e){var n=null;return n=t<e?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n},wi.toRadians=function(t){return t*Math.PI/180},wi.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?wi.COUNTERCLOCKWISE:n<0?wi.CLOCKWISE:wi.NONE},wi.angleBetweenOriented=function(t,e,n){var i=wi.angle(e,t),r=wi.angle(e,n),o=r-i;return o<=-Math.PI?o+wi.PI_TIMES_2:o>Math.PI?o-wi.PI_TIMES_2:o},wi.PI_TIMES_2=2*Math.PI,wi.PI_OVER_2=Math.PI/2,wi.PI_OVER_4=Math.PI/4,wi.COUNTERCLOCKWISE=ce.COUNTERCLOCKWISE,wi.CLOCKWISE=ce.CLOCKWISE,wi.NONE=ce.COLLINEAR,e(Si.prototype,{area:function(){return Si.area(this.p0,this.p1,this.p2)},signedArea:function(){return Si.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(null===t)throw new i("Supplied point is null.");return Si.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return Si.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return Si.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return Si.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return Si.area3D(this.p0,this.p1,this.p2)},centroid:function(){return Si.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return Si.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return Si}}),Si.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Si.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Si.det=function(t,e,n,i){return t*i-e*n},Si.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,u=n.y-o,l=i.y-o,c=s*l-a*u,h=t.x-r,f=t.y-o,p=(l*h-a*f)/c,d=(-u*h+s*f)/c,g=e.z+p*(n.z-e.z)+d*(i.z-e.z);return g},Si.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s},Si.isAcute=function(t,e,n){return!!wi.isAcute(t,e,n)&&!!wi.isAcute(e,n,t)&&!!wi.isAcute(n,t,e)},Si.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,u=e.y-r,l=2*Si.det(o,s,a,u),c=Si.det(s,o*o+s*s,u,a*a+u*u),h=Si.det(o,o*o+s*s,a,a*a+u*u),f=i-c/l,d=r+h/l;return new p(f,d)},Si.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new D(t.x+n/2,t.y+i/2,1),o=new D(t.x-i+n/2,t.y+n+i/2,1);return new D(r,o)},Si.angleBisector=function(t,e,n){var i=e.distance(t),r=e.distance(n),o=i/(i+r),s=n.x-t.x,a=n.y-t.y,u=new p(t.x+o*s,t.y+o*a);return u},Si.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=r*u-o*a,c=o*s-i*u,h=i*a-r*s,f=l*l+c*c+h*h,p=Math.sqrt(f)/2;return p},Si.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new p(i,r)},Si.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o,a=(i*t.x+r*e.x+o*n.x)/s,u=(i*t.y+r*e.y+o*n.y)/s;return new p(a,u)},e(Ii.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(1===this.input.getNumPoints()){var t=this.input.getCoordinates();return this.extremalPts=[new p(t[0])],null}var e=this.input.convexHull(),n=e.getCoordinates(),t=n;if(n[0].equals2D(n[n.length-1])&&(t=new Array(n.length-1).fill(null),Y.copyDeep(n,0,t,0,n.length-1)),t.length<=2)return this.extremalPts=Y.copyDeep(t),null;for(var i=Ii.lowestPoint(t),r=Ii.pointWitMinAngleWithX(t,i),o=0;o<t.length;o++){var s=Ii.pointWithMinAngleWithSegment(t,i,r);if(wi.isObtuse(i,s,r))return this.extremalPts=[new p(i),new p(r)],null;if(wi.isObtuse(s,i,r))i=s;else{if(!wi.isObtuse(s,r,i))return this.extremalPts=[new p(i),new p(r),new p(s)],null;r=s}}f.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return null!==this.extremalPts?null:(this.computeCirclePoints(),this.computeCentre(),void(null!==this.centre&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),null===this.centre)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return 0===this.radius?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new p((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=Si.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return Ii}}),Ii.pointWitMinAngleWithX=function(t,e){for(var n=r.MAX_VALUE,i=null,o=0;o<t.length;o++){var s=t[o];if(s!==e){var a=s.x-e.x,u=s.y-e.y;u<0&&(u=-u);var l=Math.sqrt(a*a+u*u),c=u/l;c<n&&(n=c,i=s)}}return i},Ii.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},Ii.pointWithMinAngleWithSegment=function(t,e,n){for(var i=r.MAX_VALUE,o=null,s=0;s<t.length;s++){var a=t[s];if(a!==e&&a!==n){var u=wi.angleBetween(e,a,n);u<i&&(i=u,o=a)}}return o},e(Ci.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),null===this.minWidthPt)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){t instanceof Nt?this.convexHullPts=t.getExteriorRing().getCoordinates():this.convexHullPts=t.getCoordinates(),0===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):1===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):2===this.convexHullPts.length||3===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=r.MAX_VALUE;for(var e=1,n=new he,i=0;i<t.length-1;i++)n.p0=t[i],n.p1=t[i+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(null!==this.minWidthPt)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new ye(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var i=e.distancePerpendicular(t[n]),r=i,o=n,s=o;r>=i;)i=r,o=s,s=Ci.nextIndex(t,o),r=e.distancePerpendicular(t[s]);return i<this.minWidth&&(this.minPtIndex=o,this.minWidth=i,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new he(e)),o},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),0===this.minWidth)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=r.MAX_VALUE,i=-r.MAX_VALUE,o=r.MAX_VALUE,s=-r.MAX_VALUE,a=0;a<this.convexHullPts.length;a++){var u=Ci.computeC(t,e,this.convexHullPts[a]);u>i&&(i=u),u<n&&(n=u);var l=Ci.computeC(-e,t,this.convexHullPts[a]);l>s&&(s=l),l<o&&(o=l)}var c=Ci.computeSegmentForLine(-t,-e,s),h=Ci.computeSegmentForLine(-t,-e,o),f=Ci.computeSegmentForLine(-e,t,i),p=Ci.computeSegmentForLine(-e,t,n),d=f.lineIntersection(c),g=p.lineIntersection(c),m=p.lineIntersection(h),y=f.lineIntersection(h),v=this.inputGeom.getFactory().createLinearRing([d,g,m,y,d]);return this.inputGeom.getFactory().createPolygon(v,null)},interfaces_:function(){return[]},getClass:function(){return Ci}}),Ci.nextIndex=function(t,e){return e++,e>=t.length&&(e=0),e},Ci.computeC=function(t,e,n){return t*n.y-e*n.x},Ci.getMinimumDiameter=function(t){return new Ci(t).getDiameter()},Ci.getMinimumRectangle=function(t){return new Ci(t).getMinimumRectangle()},Ci.computeSegmentForLine=function(t,e,n){var i=null,r=null;return Math.abs(e)>Math.abs(t)?(i=new p(0,n/e),r=new p(1,n/e-t/e)):(i=new p(n/t,0),r=new p(n/t-e/t,1)),new he(i,r)};var fs=Object.freeze({Centroid:pe,CGAlgorithms:ce,ConvexHull:ye,InteriorPointArea:si,InteriorPointLine:ui,InteriorPointPoint:li,RobustLineIntersector:ae,MCPointInRing:bi,MinimumBoundingCircle:Ii,MinimumDiameter:Ci});e(Ti.prototype,{getResultGeometry:function(){return new Ni(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<=0)throw new i("Tolerance must be positive");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Ti}}),Ti.densifyPoints=function(t,e,n){for(var i=new he,r=new E,o=0;o<t.length-1;o++){i.p0=t[o],i.p1=t[o+1],r.add(i.p0,!1);var s=i.getLength(),a=Math.trunc(s/e)+1;if(a>1)for(var u=s/a,l=1;l<a;l++){var c=l*u/s,h=i.pointAlong(c);n.makePrecise(h),r.add(h,!1)}}return r.add(t[t.length-1],!1),r.toCoordinateArray()},Ti.densify=function(t,e){var n=new Ti(t);return n.setDistanceTolerance(e),n.getResultGeometry()},c(Ni,_e),e(Ni.prototype,{transformMultiPolygon:function(t,e){var n=_e.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=_e.prototype.transformPolygon.call(this,t,e);return e instanceof Pt?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=Ti.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof St&&1===i.length&&(i=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(i)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return Ni}}),Ti.DensifyTransformer=Ni;var ps=Object.freeze({Densifier:Ti});e(Li.prototype,{find:function(t){var e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var i=n.oNext(),r=i.compareTo(t);if(r!==e||i===this)return n.insertAfter(t),null;n=i}while(n!==this);f.shouldNeverReachHere()},insertAfter:function(t){f.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function t(){var t=0,e=this;do t++,e=e.oNext();while(e!==this);return t},equals:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),i=t.deltaX(),r=t.deltaY();if(e===i&&n===r)return 0;var o=Ke.quadrant(e,n),s=Ke.quadrant(i,r);return o>s?1:o<s?-1:ce.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;2===t.degree();)if(t=t.prev(),t===this)return null;return t},compareTo:function(t){var e=t,n=this.compareAngularDirection(e);return n},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return Li}}),Li.init=function(t,e){if(null!==t._sym||null!==e._sym||null!==t._next||null!==e._next)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},Li.create=function(t,e){var n=new Li(t),i=new Li(e);return n.init(i),n},c(Mi,Li),e(Mi.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return Mi}}),Mi.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},Mi.isMarked=function(t){return t.isMarked()},Mi.setMark=function(t,e){t.setMark(e)},Mi.markBoth=function(t){t.mark(),t.sym().mark()},Mi.mark=function(t){t.mark()},e(Pi.prototype,{insert:function(t,e,n){var i=this.create(t,e);null!==n?n.insert(i):this.vertexMap.put(t,i);var r=this.vertexMap.get(e);return null!==r?r.insert(i.sym()):this.vertexMap.put(e,i.sym()),i},create:function(t,e){var n=this.createEdge(t),i=this.createEdge(e);return Li.init(n,i),n},createEdge:function(t){return new Li(t)},addEdge:function(t,e){if(!Pi.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),i=null;if(null!==n&&(i=n.find(e)),null!==i)return i;var r=this.insert(t,e,n);return r},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var n=this.vertexMap.get(t);return null===n?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return Pi}}),Pi.isValidEdge=function(t,e){var n=e.compareTo(t);return 0!==n},c(Ai,Mi),e(Ai.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return Ai}}),c(Ri,Pi),e(Ri.prototype,{createEdge:function(t){return new Ai(t)},interfaces_:function(){return[]},getClass:function(){return Ri}}),e(Oi.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym(),t.isStart())?null===this.ringStartEdge?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return null===this.result&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new E,n=t;for(e.add(n.orig().copy(),!1);2===n.sym().degree();){var i=n.next();if(i===t)break;e.add(i.orig().copy(),!1),n=i}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new E,n=t;for(this.ringStartEdge=null,Mi.markBoth(n),e.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);var i=n.next();if(i===t)return this.buildRing(this.ringStartEdge),null;e.add(i.orig().copy(),!1),n=i,Mi.markBoth(n)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do Mi.isMarked(e)||this.nodeEdgeStack.add(e),e=e.oNext();while(e!==t)},computeResult:function(){for(var t=this.graph.getVertexEdges(),e=t.iterator();e.hasNext();){var n=e.next();Mi.isMarked(n)||this.process(n)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();Mi.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof B){var t=arguments[0];t.apply({interfaces_:function(){return[k]},filter:function(t){t instanceof St&&this.add(t)}})}else if(T(arguments[0],m))for(var e=arguments[0],n=e.iterator();n.hasNext();){var i=n.next();this.add(i)}else if(arguments[0]instanceof St){var r=arguments[0];null===this.factory&&(this.factory=r.getFactory());for(var o=r.getCoordinateSequence(),s=!1,n=1;n<o.size();n++){var a=this.graph.addEdge(o.getCoordinate(n-1),o.getCoordinate(n));null!==a&&(s||(a.setStart(),s=!0))}}},interfaces_:function(){return[]},getClass:function(){return Oi}}),Oi.dissolve=function(t){var e=new Oi;return e.add(t),e.getResult()};var ds=Object.freeze({LineDissolver:Oi}),gs=Object.freeze({GeometryGraph:Qn});e(Fi.prototype,{hasChildren:function(){for(var t=0;t<4;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<4;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;n<4;n++)null!==this.subnode[n]&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<4;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n?n:n=this.items.remove(e)},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;n<4;n++)null!==this.subnode[n]&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<4;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},isEmpty:function t(){var t=!0;this.items.isEmpty()||(t=!1);for(var e=0;e<4;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t},add:function(t){this.items.add(t)},interfaces_:function(){return[u]},getClass:function(){return Fi}}),Fi.getSubnodeIndex=function(t,e,n){var i=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(i=3),t.getMaxY()<=n&&(i=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(i=2),t.getMaxY()<=n&&(i=0)),i},e(Di.prototype,{getLevel:function(){return this.level},computeKey:function(){if(1===arguments.length){var t=arguments[0];for(this.level=Di.computeQuadLevel(t),this.env=new w,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=pi.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/i)*i,this.pt.y=Math.floor(n.getMinY()/i)*i,this.env.init(this.pt.x,this.pt.x+i,this.pt.y,this.pt.y+i)}},getEnvelope:function(){return this.env},getCentre:function(){return new p((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Di}}),Di.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),i=e>n?e:n,r=pi.exponent(i)+1;return r},c(zi,Fi),e(zi.prototype,{find:function(t){var e=Fi.getSubnodeIndex(t,this.centrex,this.centrey);if(e===-1)return this;if(null!==this.subnode[e]){var n=this.subnode[e];return n.find(t)}return this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=Fi.getSubnodeIndex(t,this.centrex,this.centrey);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0,i=0,r=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,i=this.env.getMinY(),r=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),i=this.env.getMinY(),r=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,i=this.centrey,r=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),i=this.centrey,r=this.env.getMaxY()}var o=new w(e,n,i,r),s=new zi(o,this.level-1);return s},insertNode:function(t){f.isTrue(null===this.env||this.env.contains(t.env));var e=Fi.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return zi}}),zi.createNode=function(t){var e=new Di(t),n=new zi(e.getEnvelope(),e.getLevel());return n},zi.createExpanded=function(t,e){var n=new w(e);null!==t&&n.expandToInclude(t.env);var i=zi.createNode(n);return null!==t&&i.insertNode(t),i},c(ki,Fi),e(ki.prototype,{insert:function(t,e){var n=Fi.getSubnodeIndex(t,ki.origin.x,ki.origin.y);if(n===-1)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getEnvelope().contains(t)){var r=zi.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){f.isTrue(t.getEnvelope().contains(e));var i=yi.isZeroWidth(e.getMinX(),e.getMaxX()),r=yi.isZeroWidth(e.getMinY(),e.getMaxY()),o=null;o=i||r?t.find(e):t.getNode(e),o.add(n)},interfaces_:function(){return[]},getClass:function(){return ki}}),ki.origin=new p(0,0),e(Bi.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=Bi.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){var t=arguments[0],e=new Un;return this.query(t,e),e.getItems()}if(2===arguments.length){var n=arguments[0],i=arguments[1];this.root.visit(n,i)}},queryAll:function(){var t=new b;return this.root.addAllItems(t),t},remove:function(t,e){var n=Bi.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},depth:function(){return null!==this.root?this.root.depth():0},isEmpty:function(){return null===this.root},interfaces_:function(){return[De,u]},getClass:function(){return Bi}}),Bi.ensureExtent=function(t,e){var n=t.getMinX(),i=t.getMaxX(),r=t.getMinY(),o=t.getMaxY();return n!==i&&r!==o?t:(n===i&&(n-=e/2,i=n+e/2),r===o&&(r-=e/2,o=r+e/2),new w(n,i,r,o))},Bi.serialVersionUID=-0x678b60c967a25400;var ms=Object.freeze({Quadtree:Bi}),ys=Object.freeze({STRtree:Ge}),vs=Object.freeze({quadtree:ms,strtree:ys}),_s=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];e(ji.prototype,{read:function(t){var e=void 0;e="string"==typeof t?JSON.parse(t):t;var n=e.type;if(!xs[n])throw new Error("Unknown GeoJSON type: "+e.type);return _s.indexOf(n)!==-1?xs[n].apply(this,[e.coordinates]):"GeometryCollection"===n?xs[n].apply(this,[e.geometries]):xs[n].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!bs[e])throw new Error("Geometry is not supported");return bs[e].apply(this,[t])}});var xs={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!xs[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xs.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function t(e){for(var t=[],n=0;n<e.length;++n){var i=e[n];t.push(new p(i[0],i[1]))}return t},bbox:function(t){return this.geometryFactory.createLinearRing([new p(t[0],t[1]),new p(t[2],t[1]),new p(t[2],t[3]),new p(t[0],t[3]),new p(t[0],t[1])])},Point:function(t){var e=new p(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xs.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xs.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e);
},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xs.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xs.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=xs.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(xs.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},bs={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=bs.coordinate.apply(this,[t.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=bs.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(bs.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=bs.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=bs.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var i=0;i<t.holes.length;++i){var r=t.holes[i],o=bs.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=bs.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=i.getGeometryType();e.push(bs[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}};e(Vi.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===ee.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])}}),e(Gi.prototype,{write:function(t){return this.parser.write(t)}}),e(Ui.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===ee.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;e<n;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var i=0,r=t.geometries.length;i<r;i++)this.reducePrecision(t.geometries[i])}}),e(Xi.prototype,{read:function(t){var e=this.ol;return t instanceof e.geom.Point?this.convertFromPoint(t):t instanceof e.geom.LineString?this.convertFromLineString(t):t instanceof e.geom.LinearRing?this.convertFromLinearRing(t):t instanceof e.geom.Polygon?this.convertFromPolygon(t):t instanceof e.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof e.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof e.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof e.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new p(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new p(t[0],t[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new p(t[0],t[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,i=[],r=0;r<e.length;r++){var o=this.convertFromLinearRing(e[r]);0===r?n=o:i.push(o)}return this.geometryFactory.createPolygon(n,i)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0},convertToPoint:function(t){return new this.ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(qi);return new this.ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(qi);return new this.ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(qi)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(qi));return new this.ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(qi))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new this.ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new this.ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var i=t.geometries[n];e.push(this.write(i))}return new this.ol.geom.GeometryCollection(e)}});var Es=Object.freeze({GeoJSONReader:Vi,GeoJSONWriter:Gi,OL3Parser:Xi,WKTReader:Ui,WKTWriter:oe});e(Yi.prototype,{rescale:function(){if(T(arguments[0],m))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){var i=arguments[0],r=null,o=null;2===i.length&&(r=new p(i[0]),o=new p(i[1]));for(var e=0;e<i.length;e++)i[e].x=i[e].x/this.scaleFactor+this.offsetX,i[e].y=i[e].y/this.scaleFactor+this.offsetY;2===i.length&&i[0].equals2D(i[1])&&F.out.println(i)}},scale:function(){if(T(arguments[0],m)){for(var t=arguments[0],e=new b,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Ze(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),n=0;n<r.length;n++)o[n]=new p(Math.round((r[n].x-this.offsetX)*this.scaleFactor),Math.round((r[n].y-this.offsetY)*this.scaleFactor),r[n].z);var s=Y.removeRepeatedPoints(o);return s}},isIntegerPrecision:function(){return 1===this.scaleFactor},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[tn]},getClass:function(){return Yi}});var ws=Object.freeze({MCIndexNoder:nn,ScaledNoder:Yi,SegmentString:Me});e(Wi.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new at,n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n),r=i.getCoordinate();if(e.contains(r))return this.nonSimpleLocation=r,!1;e.add(r)}return!0},isSimplePolygonal:function(t){for(var e=Gn.getLines(t),n=e.iterator();n.hasNext();){var i=n.next();if(!this.isSimpleLinearGeometry(i))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new rt,n=t.getEdgeIterator();n.hasNext();){var i=n.next(),r=(i.getMaximumSegmentIndex(),i.isClosed()),o=i.getCoordinate(0);this.addEndpoint(e,o,r);var s=i.getCoordinate(i.getNumPoints()-1);this.addEndpoint(e,s,r)}for(var n=e.values().iterator();n.hasNext();){var a=n.next();if(a.isClosed&&2!==a.degree)return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new Qn(0,t),n=new ae,i=e.computeSelfNodes(n,!0);return!(i.hasIntersection()&&(i.hasProperIntersection()?(this.nonSimpleLocation=i.getProperIntersectionPoint(),1):this.hasNonEndpointIntersection(e)||this.isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(e)))},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getMaximumSegmentIndex(),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next();if(!o.isEndPoint(i))return this.nonSimpleLocation=o.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var i=t.get(e);null===i&&(i=new Hi(e),t.put(e,i)),i.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,!!t.isEmpty()||(t instanceof St?this.isSimpleLinearGeometry(t):t instanceof pt?this.isSimpleLinearGeometry(t):t instanceof Lt?this.isSimpleMultiPoint(t):T(t,Tt)?this.isSimplePolygonal(t):!(t instanceof ft)||this.isSimpleGeometryCollection(t))},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return Wi}}),e(Hi.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Hi}}),Wi.EndpointInfo=Hi,e(Zi.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=Zi.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=Zi.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),t<=0&&(this.quadrantSegments=1),this.joinStyle!==Zi.JOIN_ROUND&&(this.quadrantSegments=Zi.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=t<0?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return Zi}}),Zi.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Zi.CAP_ROUND=1,Zi.CAP_FLAT=2,Zi.CAP_SQUARE=3,Zi.JOIN_ROUND=1,Zi.JOIN_MITRE=2,Zi.JOIN_BEVEL=3,Zi.DEFAULT_QUADRANT_SEGMENTS=8,Zi.DEFAULT_MITRE_LIMIT=5,Zi.DEFAULT_SIMPLIFY_FACTOR=.01,e(Ji.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();f.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],i=ce.computeOrientation(this.minCoord,n,e),r=!1;e.y<this.minCoord.y&&n.y<this.minCoord.y&&i===ce.COUNTERCLOCKWISE?r=!0:e.y>this.minCoord.y&&n.y>this.minCoord.y&&i===ce.CLOCKWISE&&(r=!0),r&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge(),i=n.getCoordinates();if(e<0||e+1>=i.length)return-1;if(i[e].y===i[e+1].y)return-1;var r=hn.LEFT;return i[e].y<i[e+1].y&&(r=hn.RIGHT),r},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this.minCoord||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}f.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var i=this.getRightmostSide(this.minDe,this.minIndex);i===hn.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Ji}}),$i.prototype.addLast=function(t){this.array_.push(t)},$i.prototype.removeFirst=function(){return this.array_.shift()},$i.prototype.isEmpty=function(){return 0===this.array_.length},e(Ki.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new on("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();i.setVisited(!0),this.copySymDepths(i)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(hn.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(hn.RIGHT)>=1&&e.getDepth(hn.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new K,n=new $i,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next(),a=s.getSym();if(!a.isVisited()){var u=a.getNode();e.contains(u)||(n.addLast(u),e.add(u))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(null===this.env){for(var t=new w,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),i=n.getEdge().getCoordinates(),r=0;r<i.length-1;r++)t.expandToInclude(i[r]);this.env=t}return this.env},addReachable:function(t){var e=new ge;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(hn.LEFT,t.getDepth(hn.RIGHT)),e.setDepth(hn.RIGHT,t.getDepth(hn.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this.dirEdgeList.add(i);var r=i.getSym(),o=r.getNode();o.isVisited()||e.push(o)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[o]},getClass:function(){return Ki}}),e(Qi.prototype,{isDeletable:function(t,e,n,i){var r=this.inputLine[t],o=this.inputLine[e],s=this.inputLine[n];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i)},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),i=!1;n<this.inputLine.length;){var r=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=Qi.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},isShallowConcavity:function(t,e,n,i){var r=ce.computeOrientation(t,e,n),o=r===this.angleOrientation;if(!o)return!1;var s=ce.distancePointLine(e,t,n);return s<i},isShallowSampled:function(t,e,n,i,r){var o=Math.trunc((i-n)/Qi.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<i;s+=o)if(!this.isShallow(t,e,this.inputLine[s],r))return!1;return!0},isConcave:function t(e,n,i){var r=ce.computeOrientation(e,n,i),t=r===this.angleOrientation;return t},simplify:function(t){this.distanceTol=Math.abs(t),t<0&&(this.angleOrientation=ce.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===Qi.DELETE;)e++;return e},isShallow:function(t,e,n,i){var r=ce.distancePointLine(e,t,n);return r<i},collapseLine:function(){for(var t=new E,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==Qi.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Qi}}),Qi.simplify=function(t,e){var n=new Qi(t);return n.simplify(e)},Qi.INIT=0,Qi.DELETE=1,Qi.KEEP=1,Qi.NUM_PTS_TO_CHECK=10,e(tr.prototype,{getCoordinates:function(){var t=this.ptList.toArray(tr.COORDINATE_ARRAY_TYPE);return t},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new p(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1),n=t.distance(e);return n<this.minimimVertexDistance},toString:function(){var t=new ie,e=t.createLineString(this.getCoordinates());return e.toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new p(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1),n=null;return this.ptList.size()>=2&&(n=this.ptList.get(this.ptList.size()-2)),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return tr}}),tr.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),e(er.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=ce.computeOrientation(this.s0,this.s1,this.s2),i=n===ce.CLOCKWISE&&this.side===hn.LEFT||n===ce.COUNTERCLOCKWISE&&this.side===hn.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new he(t,e),i=new he;this.computeOffsetSegment(n,hn.LEFT,this.distance,i);var r=new he;this.computeOffsetSegment(n,hn.RIGHT,this.distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this.bufParams.getEndCapStyle()){case Zi.CAP_ROUND:this.segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,ce.CLOCKWISE,this.distance),this.segList.addPt(r.p1);break;case Zi.CAP_FLAT:this.segList.addPt(i.p1),this.segList.addPt(r.p1);break;case Zi.CAP_SQUARE:var u=new p;u.x=Math.abs(this.distance)*Math.cos(a),u.y=Math.abs(this.distance)*Math.sin(a);var l=new p(i.p1.x+u.x,i.p1.y+u.y),c=new p(r.p1.x+u.x,r.p1.y+u.y);this.segList.addPt(l),this.segList.addPt(c)}},getCoordinates:function(){var t=this.segList.getCoordinates();return t},addMitreJoin:function(t,e,n,i){var r=!0,o=null;try{o=D.intersection(e.p0,e.p1,n.p0,n.p1);var s=i<=0?1:o.distance(t)/Math.abs(i);s>this.bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof I))throw t;o=new p(0,0),r=!1}finally{}r?this.segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,i,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);i===ce.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,a,c,i,r),this.segList.addPt(n)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*er.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===Zi.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===Zi.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new p(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new p(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new p(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new p(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,i){var r=this.seg0.p1,o=wi.angle(r,this.seg0.p0),s=(wi.angle(r,this.seg1.p1),wi.angleBetweenOriented(this.seg0.p0,r,this.seg1.p1)),a=s/2,u=wi.normalize(o+a),l=wi.normalize(u+Math.PI),c=i*n,h=c*Math.abs(Math.sin(a)),f=n-h,d=r.x+c*Math.cos(l),g=r.y+c*Math.sin(l),m=new p(d,g),y=new he(r,m),v=y.pointAlongOffset(1,f),_=y.pointAlongOffset(1,-f);this.side===hn.LEFT?(this.segList.addPt(v),this.segList.addPt(_)):(this.segList.addPt(_),this.segList.addPt(v))},computeOffsetSegment:function(t,e,n,i){var r=e===hn.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=r*n*o/a,l=r*n*s/a;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u},addFilletArc:function(t,e,n,i,r){var o=i===ce.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this.filletAngleQuantum+.5);if(a<1)return null;var u=null,l=null;u=0,l=s/a;for(var c=u,h=new p;c<s;){var f=e+o*c;h.x=t.x+r*Math.cos(f),h.y=t.y+r*Math.sin(f),this.segList.addPt(h),c+=l}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*er.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var n=new p((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var i=new p((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(i)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new p(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new tr,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*er.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var e=this.li.getIntersectionNum();e>=2&&(this.bufParams.getJoinStyle()===Zi.JOIN_BEVEL||this.bufParams.getJoinStyle()===Zi.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,ce.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return er}}),er.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,er.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,er.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,er.MAX_CLOSING_SEG_LEN_FACTOR=80,e(nr.prototype,{getOffsetCurve:function(t,e){if(this.distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&Y.reverse(o),o},computeSingleSidedBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var r=Qi.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],hn.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=Qi.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],hn.LEFT),n.addFirstSegment();for(var s=2;s<=u;s++)n.addNextSegment(a[s],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);e===hn.RIGHT&&(i=-i);var r=Qi.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(r[s],a)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),i=Qi.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],hn.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=Qi.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],hn.LEFT);for(var o=a-2;o>=0;o--)e.addNextSegment(s[o],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case Zi.CAP_ROUND:e.createCircle(t);break;case Zi.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this.distance=e,e<0&&!this.bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this.bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);var o=i.getCoordinates();return o},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return nr.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},computeOffsetCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){var r=Qi.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],hn.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=Qi.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],hn.LEFT),n.addFirstSegment();for(var s=2;s<=u;s++)n.addNextSegment(a[s],!0)}n.addLastSegment()},getSegGen:function(t){return new er(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return nr}}),nr.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new p(t[n]);return e},e(ir.prototype,{findStabbedSegments:function(){if(1===arguments.length){for(var t=arguments[0],e=new b,n=this.subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(T(arguments[2],v)&&arguments[0]instanceof p&&arguments[1]instanceof bn)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),n=0;n<u.length-1;n++){this.seg.p0=u[n],this.seg.p1=u[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var l=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(l<o.x||this.seg.isHorizontal()||o.y<this.seg.p0.y||o.y>this.seg.p1.y||ce.computeOrientation(this.seg.p0,this.seg.p1,o)===ce.RIGHT)){var c=s.getDepth(hn.LEFT);this.seg.p0.equals(u[n])||(c=s.getDepth(hn.RIGHT));var h=new rr(this.seg,c);a.add(h)}}else if(T(arguments[2],v)&&arguments[0]instanceof p&&T(arguments[1],v))for(var f=arguments[0],d=arguments[1],g=arguments[2],n=d.iterator();n.hasNext();){var m=n.next();m.isForward()&&this.findStabbedSegments(f,m,g)}},getDepth:function(t){var e=this.findStabbedSegments(t);if(0===e.size())return 0;var n=hs.min(e);return n.leftDepth},interfaces_:function(){return[]},getClass:function(){return ir}}),e(rr.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return 0!==n?n:(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg),0!==n?n:this.upwardSeg.compareTo(e.upwardSeg))},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[o]},getClass:function(){return rr}}),ir.DepthSegment=rr,e(or.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,C.EXTERIOR,C.INTERIOR)},addPolygon:function(t){var e=this.distance,n=hn.LEFT;this.distance<0&&(e=-this.distance,n=hn.RIGHT);var i=t.getExteriorRing(),r=Y.removeRepeatedPoints(i.getCoordinates());if(this.distance<0&&this.isErodedCompletely(i,this.distance))return null;if(this.distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,C.EXTERIOR,C.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Y.removeRepeatedPoints(s.getCoordinates());this.distance>0&&this.isErodedCompletely(s,-this.distance)||this.addPolygonRing(a,e,hn.opposite(n),C.INTERIOR,C.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new Si(t[0],t[1],t[2]),i=n.inCentre(),r=ce.distancePointLine(i,n.p0,n.p1);return r<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=Y.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,C.EXTERIOR,C.INTERIOR)},addCurve:function(t,e,n){if(null===t||t.length<2)return null;var i=new Ze(t,new pn(0,C.BOUNDARY,e,n));this.curveList.add(i)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,i,r){if(0===e&&t.length<Mt.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=Mt.MINIMUM_VALID_SIZE&&ce.isCCW(t)&&(o=r,s=i,n=hn.opposite(n));var a=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},add:function(t){if(t.isEmpty())return null;if(t instanceof Nt)this.addPolygon(t);else if(t instanceof St)this.addLineString(t);else if(t instanceof Ct)this.addPoint(t);else if(t instanceof Lt)this.addCollection(t);else if(t instanceof pt)this.addCollection(t);else if(t instanceof Pt)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){
var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return or}}),e(sr.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(sr.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[sn]},getClass:function(){return sr}}),sr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},e(ar.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new pn(t.getLabel()),i.flip()),n.merge(i);var r=ar.depthDelta(i),o=e.getDepthDelta(),s=o+r;e.setDepthDelta(s)}else this.edgeList.add(t),t.setDepthDelta(ar.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new b,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new ir(n),a=s.getDepth(o);r.computeDepth(a),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},createSubgraphs:function(t){for(var e=new b,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Ki;r.create(i),e.add(r)}}return hs.sort(e,hs.reverseOrder()),e},createEmptyResultGeometry:function(){var t=this.geomFact.createPolygon();return t},getNoder:function(t){if(null!==this.workingNoder)return this.workingNoder;var e=new nn,n=new ae;return n.setPrecisionModel(t),e.setSegmentIntersector(new sr(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var i=new nr(n,this.bufParams),r=new or(t,e,i),o=r.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this.graph=new wn(new Pn),this.graph.addEdges(this.edgeList.getEdges());var s=this.createSubgraphs(this.graph),a=new Sn(this.geomFact);this.buildSubgraphs(s,a);var u=a.getPolygons();if(u.size()<=0)return this.createEmptyResultGeometry();var l=this.geomFact.buildGeometry(u);return l},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings(),r=i.iterator();r.hasNext();){var o=r.next(),s=o.getCoordinates();if(2!==s.length||!s[0].equals2D(s[1])){var a=o.getData(),u=new Kn(o.getCoordinates(),new pn(a));this.insertUniqueEdge(u)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return ar}}),ar.depthDelta=function(t){var e=t.getLocation(0,hn.LEFT),n=t.getLocation(0,hn.RIGHT);return e===C.INTERIOR&&n===C.EXTERIOR?1:e===C.EXTERIOR&&n===C.INTERIOR?-1:0},ar.convertSegStrings=function(t){for(var e=new ie,n=new b;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)},e(ur.prototype,{checkEndPtVertexIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next(),n=e.getCoordinates();this.checkEndPtVertexIntersections(n[0],this.segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this.segStrings)}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1],t=r.iterator();t.hasNext();)for(var e=t.next(),n=e.getCoordinates(),o=1;o<n.length-1;o++)if(n[o].equals(i))throw new l("found endpt/interior pt intersection at index "+o+" :pt "+i)},checkInteriorIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var c=0;c<a.length-1;c++)this.checkInteriorIntersections(r,u,o,c);else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3];if(h===p&&f===d)return null;var g=h.getCoordinates()[f],m=h.getCoordinates()[f+1],y=p.getCoordinates()[d],v=p.getCoordinates()[d+1];if(this.li.computeIntersection(g,m,y,v),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,g,m)||this.hasInteriorIntersection(this.li,y,v)))throw new l("found non-noded intersection at "+g+"-"+m+" and "+y+"-"+v)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0],i=n.getCoordinates(),t=0;t<i.length-2;t++)this.checkCollapse(i[t],i[t+1],i[t+2])},hasInteriorIntersection:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new l("found non-noded collapse at "+ur.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return ur}}),ur.fact=new ie,e(lr.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this.maxx<n||this.minx>i||this.maxy<r||this.miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return f.isTrue(!(s&&a),"Found bad envelope test"),a},initCorners:function(t){var e=.5;this.minx=t.x-e,this.maxx=t.x+e,this.miny=t.y-e,this.maxy=t.y+e,this.corner[0]=new p(this.maxx,this.maxy),this.corner[1]=new p(this.minx,this.maxy),this.corner[2]=new p(this.minx,this.miny),this.corner[3]=new p(this.maxx,this.miny)},intersects:function(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(null===this.safeEnv){var t=lr.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new w(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.hasIntersection()))))},intersectsToleranceSquare:function(t,e){var n=!1,i=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.isProper()||(this.li.hasIntersection()&&(i=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.isProper()||n&&i||t.equals(this.pt)||e.equals(this.pt)))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},interfaces_:function(){return[]},getClass:function(){return lr}}),lr.SAFE_ENV_EXPANSION_FACTOR=.75,e(cr.prototype,{snap:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new hr(e,n,i);return this.index.query(r,{interfaces_:function(){return[Fe]},visitItem:function(t){var e=t;e.select(r,o)}}),o.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return cr}}),c(hr,ci),e(hr.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(2!==arguments.length)return ci.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();return null!==this.parentEdge&&n===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},interfaces_:function(){return[]},getClass:function(){return hr}}),cr.HotPixelSnapAction=hr,e(fr.prototype,{processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var u=0;u<this.li.getIntersectionNum();u++)this.interiorIntersections.add(this.li.getIntersection(u));t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[sn]},getClass:function(){return fr}}),e(pr.prototype,{checkCorrectness:function(t){var e=Ze.getNodedSubstrings(t),n=new ur(e);try{n.checkValid()}catch(t){if(!(t instanceof S))throw t;t.printStackTrace()}finally{}},getNodedSubstrings:function(){return Ze.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new fr(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(T(arguments[0],m))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof Ze)for(var i=arguments[0],r=i.getCoordinates(),o=0;o<r.length;o++){var s=new lr(r[o],this.scaleFactor,this.li),a=this.pointSnapper.snap(s,i,o);a&&i.addIntersection(r[o],o)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new nn,this.pointSnapper=new cr(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new lr(n,this.scaleFactor,this.li);this.pointSnapper.snap(i)}},interfaces_:function(){return[tn]},getClass:function(){return pr}}),e(dr.prototype,{bufferFixedPrecision:function(t){var e=new Yi(new pr(new ee(1)),t.getScale()),n=new ar(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(0===arguments.length){for(var t=dr.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof on))throw t;this.saveException=t}finally{}if(null!==this.resultGeometry)return null}throw this.saveException}if(1===arguments.length){var e=arguments[0],n=dr.precisionScaleFactor(this.argGeom,this.distance,e),i=new ee(n);this.bufferFixedPrecision(i)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===ee.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new ar(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(t){if(!(t instanceof l))throw t;this.saveException=t}finally{}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return dr}}),dr.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new dr(t),i=n.getResultGeometry(e);return i}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof B&&"number"==typeof arguments[1]){var r=arguments[0],o=arguments[1],s=arguments[2],a=new dr(r);a.setQuadrantSegments(s);var i=a.getResultGeometry(o);return i}if(arguments[2]instanceof Zi&&arguments[0]instanceof B&&"number"==typeof arguments[1]){var u=arguments[0],l=arguments[1],c=arguments[2],a=new dr(u,c),i=a.getResultGeometry(l);return i}}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],a=new dr(h);a.setQuadrantSegments(p),a.setEndCapStyle(d);var i=a.getResultGeometry(f);return i}},dr.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=N.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY())),o=e>0?e:0,s=r+2*o,a=Math.trunc(Math.log(s)/Math.log(10)+1),u=n-a,l=Math.pow(10,u);return l},dr.CAP_ROUND=Zi.CAP_ROUND,dr.CAP_BUTT=Zi.CAP_FLAT,dr.CAP_FLAT=Zi.CAP_FLAT,dr.CAP_SQUARE=Zi.CAP_SQUARE,dr.MAX_PRECISION_DIGITS=12;var Ss=Object.freeze({BufferOp:dr,BufferParameters:Zi});e(gr.prototype,{filter:function(t){t instanceof Nt&&this.comps.add(t)},interfaces_:function(){return[ct]},getClass:function(){return gr}}),gr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return gr.getPolygons(t,new b)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Nt?n.add(e):e instanceof ft&&e.apply(new gr(n)),n}},e(mr.prototype,{isInsideArea:function(){return this.segIndex===mr.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return mr}}),mr.INSIDE_AREA=-1,e(yr.prototype,{filter:function(t){t instanceof Ct&&this.pts.add(t)},interfaces_:function(){return[ct]},getClass:function(){return yr}}),yr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Ct?hs.singletonList(t):yr.getPoints(t,new b)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Ct?n.add(e):e instanceof ft&&e.apply(new yr(n)),n}},e(vr.prototype,{filter:function(t){(t instanceof Ct||t instanceof St||t instanceof Nt)&&this.locations.add(new mr(t,0,t.getCoordinate()))},interfaces_:function(){return[ct]},getClass:function(){return vr}}),vr.getLocations=function(t){var e=new b;return t.apply(new vr(e)),e},e(_r.prototype,{computeContainmentDistance:function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=gr.getPolygons(this.geom[e]);if(r.size()>0){var o=vr.getLocations(this.geom[i]);if(this.computeContainmentDistance(o,r,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[i]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&T(arguments[0],v)&&T(arguments[1],v)){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=0;l<s.size();l++)for(var c=s.get(l),h=0;h<a.size();h++)if(this.computeContainmentDistance(c,a.get(h),u),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof mr&&arguments[1]instanceof Nt){var f=arguments[0],p=arguments[1],d=arguments[2],g=f.getCoordinate();if(C.EXTERIOR!==this.ptLocator.locate(g,p))return this.minDistance=0,d[0]=f,d[1]=new mr(p,g),null}},computeMinDistanceLinesPoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=Gn.getLines(this.geom[0]),n=Gn.getLines(this.geom[1]),i=yr.getPoints(this.geom[0]),r=yr.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return null===t[0]?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){this.computeMinDistance();var t=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return t},computeMinDistance:function(){if(0===arguments.length){if(null!==this.minDistanceLocation)return null;if(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof St&&arguments[1]instanceof Ct){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var s=ce.distancePointLine(r,i[o],i[o+1]);if(s<this.minDistance){this.minDistance=s;var a=new he(i[o],i[o+1]),u=a.closestPoint(r);n[0]=new mr(t,o,u),n[1]=new mr(e,0,r)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof St&&arguments[1]instanceof St){var l=arguments[0],c=arguments[1],h=arguments[2];if(l.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this.minDistance)return null;for(var i=l.getCoordinates(),f=c.getCoordinates(),o=0;o<i.length-1;o++)for(var p=0;p<f.length-1;p++){var s=ce.distanceLineLine(i[o],i[o+1],f[p],f[p+1]);if(s<this.minDistance){this.minDistance=s;var d=new he(i[o],i[o+1]),g=new he(f[p],f[p+1]),m=d.closestPoints(g);h[0]=new mr(l,o,m[0]),h[1]=new mr(c,p,m[1])}if(this.minDistance<=this.terminateDistance)return null}}},computeMinDistancePoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate());if(a<this.minDistance&&(this.minDistance=a,n[0]=new mr(r,0,r.getCoordinate()),n[1]=new mr(s,0,s.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(null===this.geom[0]||null===this.geom[1])throw new i("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return _r}}),_r.distance=function(t,e){var n=new _r(t,e);return n.distance()},_r.isWithinDistance=function(t,e,n){var i=new _r(t,e,n);return i.distance()<=n},_r.nearestPoints=function(t,e){var n=new _r(t,e);return n.nearestPoints()};var Is=Object.freeze({DistanceOp:_r});e(xr.prototype,{getCoordinates:function(){if(null===this.coordinates){for(var t=0,e=0,n=new E,i=this.directedEdges.iterator();i.hasNext();){var r=i.next();r.getEdgeDirection()?t++:e++,n.add(r.getEdge().getLine().getCoordinates(),!1,r.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),e>t&&Y.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return xr}}),e(br.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return br}}),br.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},br.setVisited=function(t,e){for(;t.hasNext();){var n=t.next();n.setVisited(e)}},br.setMarked=function(t,e){for(;t.hasNext();){var n=t.next();n.setMarked(e)}},c(Er,br),e(Er.prototype,{isRemoved:function(){return null===this.parentEdge},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:ce.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),i=e.substring(n+1);t.print("  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[o]},getClass:function(){return Er}}),Er.toEdges=function(t){for(var e=new b,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},c(wr,Er),e(wr.prototype,{getNext:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(f.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return wr}}),c(Sr,br),e(Sr.prototype,{isRemoved:function(){return null===this.dirEdge},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof Cr){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return Sr}}),e(Ir.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(hs.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof Sr){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n.getEdge()===t)return e}return-1}if(arguments[0]instanceof Er){var i=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n===i)return e}return-1}if(Number.isInteger(arguments[0])){var r=arguments[0],o=r%this.outEdges.size();return o<0&&(o+=this.outEdges.size()),o}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return Ir}}),c(Cr,br),e(Cr.prototype,{isRemoved:function(){return null===this.pt},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(0===arguments.length)this.pt=null;else if(1===arguments.length){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return Cr}}),Cr.getEdgesBetween=function(t,e){var n=Er.toEdges(t.getOutEdges().getEdges()),i=new K(n),r=Er.toEdges(e.getOutEdges().getEdges());return i.retainAll(r),i},c(Tr,Sr),e(Tr.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return Tr}}),e(Nr.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return Nr}}),e(Lr.prototype,{findNodesOfDegree:function(t){for(var e=new b,n=this.nodeIterator();n.hasNext();){var i=n.next();i.getDegree()===t&&e.add(i)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof Sr){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof Er){var e=arguments[0],n=e.getSym();null!==n&&n.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof Cr){for(var i=arguments[0],r=i.getOutEdges().getEdges(),o=r.iterator();o.hasNext();){var s=o.next(),n=s.getSym();null!==n&&this.remove(n),this.dirEdges.remove(s);var a=s.getEdge();null!==a&&this.edges.remove(a)}this.nodeMap.remove(i.getCoordinate()),i.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof Sr){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof Er){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof Cr){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof Sr){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof Er){var n=arguments[0];this.dirEdges.add(n)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return Lr}}),c(Mr,Lr),e(Mr.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=Y.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),o=this.getNode(i),s=new wr(r,o,e[1],!0),a=new wr(o,r,e[e.length-2],!1),u=new Tr(t);u.setDirectedEdges(s,a),this.add(u)},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new Cr(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return Mr}}),e(Pr.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(f.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(null!==this.mergedLineStrings)return null;br.setMarked(this.graph.nodeIterator(),!1),br.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new b,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new b;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new xr(this.factory),n=t;do e.add(n),n.getEdge().setMarked(!0),n=n.getNext();while(null!==n&&n!==t);return e},add:function(){if(arguments[0]instanceof B){var t=arguments[0];t.apply({interfaces_:function(){return[k]},filter:function(t){t instanceof St&&this.add(t)}})}else if(T(arguments[0],m)){var e=arguments[0];this.mergedLineStrings=null;for(var n=e.iterator();n.hasNext();){var i=n.next();this.add(i)}}else if(arguments[0]instanceof St){var r=arguments[0];null===this.factory&&(this.factory=r.getFactory()),this.graph.addEdge(r)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return Pr}});var Cs=Object.freeze({LineMerger:Pr}),Ts=Object.freeze({OverlayOp:ii});c(Ar,Er),e(Ar.prototype,{getNext:function(){return this.next},isInRing:function(){return null!==this.edgeRing},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return Ar}}),c(Rr,Sr),e(Rr.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return Rr}}),e(Or.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),i=n[0],r=Or.findDifferentPoint(n,i),o=e.findEdgeInSameDirection(i,r),s=e.findEdgeEnd(o),a=null;s.getLabel().getLocation(0,hn.RIGHT)===C.INTERIOR?a=s:s.getSym().getLabel().getLocation(0,hn.RIGHT)===C.INTERIOR&&(a=s.getSym()),f.isTrue(null!==a,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(a)},visitShellInteriors:function(t,e){if(t instanceof Nt){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof Pt)for(var i=t,r=0;r<i.getNumGeometries();r++){var n=i.getGeometryN(r);this.visitInteriorRing(n.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,hn.RIGHT)===C.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,n=t;do f.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext();while(n!==e)},buildEdgeRings:function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&null===i.getEdgeRing()){var r=new mn(i,this.geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();var o=r.buildMinimalRings();e.addAll(o)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var i=n.getEdges(),r=i.get(0);if(r.getLabel().getLocation(0,hn.RIGHT)===C.INTERIOR)for(var o=0;o<i.size();o++)if(r=i.get(o),!r.isVisited())return this.disconnectedRingcoord=r.getCoordinate(),!0}}return!1},isInteriorsConnected:function(){var t=new b;this.geomGraph.computeSplitEdges(t);var e=new wn(new Pn);
e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return Or}}),Or.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},e(Fr.prototype,{createEdgeEndForNext:function(t,e,n,i){var r=n.segmentIndex+1;if(r>=t.getNumPoints()&&null===i)return null;var o=t.getCoordinate(r);null!==i&&i.segmentIndex===n.segmentIndex&&(o=i.coord);var s=new xn(t,n.coord,o,new pn(t.getLabel()));e.add(s)},createEdgeEndForPrev:function(t,e,n,i){var r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--}var o=t.getCoordinate(r);null!==i&&i.segmentIndex>=r&&(o=i.coord);var s=new pn(t.getLabel());s.flip();var a=new xn(t,n.coord,o,s);e.add(a)},computeEdgeEnds:function(){if(1===arguments.length){for(var t=arguments[0],e=new b,n=t;n.hasNext();){var i=n.next();this.computeEdgeEnds(i,e)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1],s=r.getEdgeIntersectionList();s.addEndpoints();var a=s.iterator(),u=null,l=null;if(!a.hasNext())return null;var c=a.next();do u=l,l=c,c=null,a.hasNext()&&(c=a.next()),null!==l&&(this.createEdgeEndForPrev(r,o,l,u),this.createEdgeEndForNext(r,o,l,c));while(null!==l)}},interfaces_:function(){return[]},getClass:function(){return Fr}}),c(Dr,xn),e(Dr.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--> Label: "+this.label);for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,i=!1,r=this.iterator();r.hasNext();){var o=r.next(),s=o.getLabel().getLocation(t);s===C.BOUNDARY&&n++,s===C.INTERIOR&&(i=!0)}var s=C.NONE;i&&(s=C.INTERIOR),n>0&&(s=Qn.determineBoundary(e,n)),this.label.setLocation(t,s)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.getLabel().isArea()){var r=i.getLabel().getLocation(t,e);if(r===C.INTERIOR)return this.label.setLocation(t,e,C.INTERIOR),null;r===C.EXTERIOR&&this.label.setLocation(t,e,C.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,hn.LEFT),this.computeLabelSide(t,hn.RIGHT)},updateIM:function(t){Kn.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().isArea()&&(e=!0)}e?this.label=new pn(C.NONE,C.NONE,C.NONE):this.label=new pn(C.NONE);for(var r=0;r<2;r++)this.computeLabelOn(r,t),e&&this.computeLabelSides(r)},interfaces_:function(){return[]},getClass:function(){return Dr}}),c(zr,Ln),e(zr.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);null===e?(e=new Dr(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return zr}}),c(kr,vn),e(kr.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return kr}}),c(Br,En),e(Br.prototype,{createNode:function(t){return new kr(t,new zr)},interfaces_:function(){return[]},getClass:function(){return Br}}),e(jr.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var i=n.next(),r=this.nodes.addNode(i.getCoordinate());r.setLabel(e,i.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new Fr,n=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(n)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var i=n.next(),r=i.getLabel().getLocation(e),o=i.getEdgeIntersectionList().iterator();o.hasNext();){var s=o.next(),a=this.nodes.addNode(s.coord);r===C.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,C.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return jr}}),e(Vr.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){var i=n.next();if(i.getEdgeEnds().size()>1)return this.invalidPoint=i.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return Vr}}),e(Gr.prototype,{buildIndex:function(){this.index=new Ge;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),i=this.index.query(e.getEnvelopeInternal()),r=0;r<i.size();r++){var o=i.get(r),s=o.getCoordinates();if(e!==o&&e.getEnvelopeInternal().intersects(o.getEnvelopeInternal())){var a=qr.findPtNotNode(n,o,this.graph);if(null!==a){var u=ce.isPointInRing(a,s);if(u)return this.nestedPt=a,!1}}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return Gr}}),e(Ur.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return Ur.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return null!==this.pt&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return Ur}}),Ur.ERROR=0,Ur.REPEATED_POINT=1,Ur.HOLE_OUTSIDE_SHELL=2,Ur.NESTED_HOLES=3,Ur.DISCONNECTED_INTERIOR=4,Ur.SELF_INTERSECTION=5,Ur.RING_SELF_INTERSECTION=6,Ur.NESTED_SHELLS=7,Ur.DUPLICATE_RINGS=8,Ur.TOO_FEW_POINTS=9,Ur.INVALID_COORDINATE=10,Ur.RING_NOT_CLOSED=11,Ur.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],e(qr.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!qr.isValid(t[e]))return this.validErr=new Ur(Ur.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof Nt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(var e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),null!==this.validErr)return null}},checkHolesNotNested:function(t,e){for(var n=new Gr(e),i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i);n.add(r)}var o=n.isNonNested();o||(this.validErr=new Ur(Ur.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new Vr(t),n=e.isNodeConsistentArea();return n?void(e.hasDuplicateRings()&&(this.validErr=new Ur(Ur.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new Ur(Ur.SELF_INTERSECTION,e.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),null===this.validErr},checkShellInsideHole:function(t,e,n){var i=t.getCoordinates(),r=e.getCoordinates(),o=qr.findPtNotNode(i,e,n);if(null!==o){var s=ce.isPointInRing(o,r);if(!s)return o}var a=qr.findPtNotNode(r,t,n);if(null!==a){var u=ce.isPointInRing(a,i);return u?a:null}return f.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null}},checkConnectedInteriors:function(t){var e=new Or(t);e.isInteriorsConnected()||(this.validErr=new Ur(Ur.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new at,n=!0,i=t.iterator();i.hasNext();){var r=i.next();if(n)n=!1;else{if(e.contains(r.coord))return this.validErr=new Ur(Ur.RING_SELF_INTERSECTION,r.coord),null;e.add(r.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),i=new bi(n),r=0;r<t.getNumInteriorRing();r++){var o=t.getInteriorRingN(r),s=qr.findPtNotNode(o.getCoordinates(),n,e);if(null===s)return null;var a=!i.isInside(s);if(a)return this.validErr=new Ur(Ur.HOLE_OUTSIDE_SHELL,s),null}},checkTooFewPoints:function(t){if(t.hasTooFewPoints())return this.validErr=new Ur(Ur.TOO_FEW_POINTS,t.getInvalidPoint()),null},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof Ct){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Lt){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof Mt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(n),null!==this.validErr)return null;var i=new Qn(0,n);if(this.checkTooFewPoints(i),null!==this.validErr)return null;var r=new ae;i.computeSelfNodes(r,!0,!0),this.checkNoSelfIntersectingRings(i)}else if(arguments[0]instanceof St){var o=arguments[0];if(this.checkInvalidCoordinates(o.getCoordinates()),null!==this.validErr)return null;var i=new Qn(0,o);this.checkTooFewPoints(i)}else if(arguments[0]instanceof Nt){var s=arguments[0];if(this.checkInvalidCoordinates(s),null!==this.validErr)return null;if(this.checkClosedRings(s),null!==this.validErr)return null;var i=new Qn(0,s);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;if(this.checkHolesInShell(s,i),null!==this.validErr)return null;if(this.checkHolesNotNested(s,i),null!==this.validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof Pt){for(var a=arguments[0],u=0;u<a.getNumGeometries();u++){var l=a.getGeometryN(u);if(this.checkInvalidCoordinates(l),null!==this.validErr)return null;if(this.checkClosedRings(l),null!==this.validErr)return null}var i=new Qn(0,a);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;for(var u=0;u<a.getNumGeometries();u++){var l=a.getGeometryN(u);if(this.checkHolesInShell(l,i),null!==this.validErr)return null}for(var u=0;u<a.getNumGeometries();u++){var l=a.getGeometryN(u);if(this.checkHolesNotNested(l,i),null!==this.validErr)return null}if(this.checkShellsNotNested(a,i),null!==this.validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof ft)for(var c=arguments[0],u=0;u<c.getNumGeometries();u++){var h=c.getGeometryN(u);if(this.checkValid(h),null!==this.validErr)return null}else if(arguments[0]instanceof B){var f=arguments[0];if(this.validErr=null,f.isEmpty())return null;if(f instanceof Ct)this.checkValid(f);else if(f instanceof Lt)this.checkValid(f);else if(f instanceof Mt)this.checkValid(f);else if(f instanceof St)this.checkValid(f);else if(f instanceof Nt)this.checkValid(f);else if(f instanceof Pt)this.checkValid(f);else{if(!(f instanceof ft))throw new UnsupportedOperationException(f.getClass().getName());this.checkValid(f)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var i=t.getCoordinates(),r=e.getExteriorRing(),o=r.getCoordinates(),s=qr.findPtNotNode(i,r,n);if(null===s)return null;var a=ce.isPointInRing(s,o);if(!a)return null;if(e.getNumInteriorRing()<=0)return this.validErr=new Ur(Ur.NESTED_SHELLS,s),null;for(var u=null,l=0;l<e.getNumInteriorRing();l++){var c=e.getInteriorRingN(l);if(u=this.checkShellInsideHole(t,c,n),null===u)return null}this.validErr=new Ur(Ur.NESTED_SHELLS,u)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this.validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this.validErr)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new Ur(Ur.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var i=t.getGeometryN(n),r=i.getExteriorRing(),o=0;o<t.getNumGeometries();o++)if(n!==o){var s=t.getGeometryN(o);if(this.checkShellNotNested(r,s,e),null!==this.validErr)return null}},interfaces_:function(){return[]},getClass:function(){return qr}}),qr.findPtNotNode=function(t,e,n){for(var i=n.findEdge(e),r=i.getEdgeIntersectionList(),o=0;o<t.length;o++){var s=t[o];if(!r.isIntersection(s))return s}return null},qr.isValid=function(){if(arguments[0]instanceof B){var t=arguments[0],e=new qr(t);return e.isValid()}if(arguments[0]instanceof p){var n=arguments[0];return!(r.isNaN(n.x)||r.isInfinite(n.x)||r.isNaN(n.y)||r.isInfinite(n.y))}},e(Xr.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(null===this.ringPts){for(var t=new E,e=this.deList.iterator();e.hasNext();){var n=e.next(),i=n.getEdge();Xr.addEdge(i.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),qr.isValid(this.ring))},build:function(t){var e=t;do this.add(e),e.setRing(this),e=e.getNext(),f.isTrue(null!==e,"found null DE in ring"),f.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t)},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var t=null;if(null!==this.holes){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}var n=this.factory.createPolygon(this.ring,t);return n},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof Mt){var t=arguments[0];null===this.holes&&(this.holes=new b),this.holes.add(t)}else if(arguments[0]instanceof Xr){var e=arguments[0];e.setShell(this);var n=e.getRing();null===this.holes&&(this.holes=new b),this.holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing();if(n.isOuterHole())return n}return null},computeHole:function(){var t=this.getRing();this._isHole=ce.isCCW(t.getCoordinates())},hasShell:function(){return null!==this.shell},isOuterShell:function(){return null!==this.getOuterHole()},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return oe.toLineString(new zt(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(null!==this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&F.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof S))throw t;F.out.println(this.ringPts)}finally{}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing().getShell();if(null!==n&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return Xr}}),Xr.findDirEdgesInRing=function(t){var e=t,n=new b;do n.add(e),e=e.getNext(),f.isTrue(null!==e,"found null DE in ring"),f.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t);return n},Xr.addEdge=function(t,e,n){if(e)for(var i=0;i<t.length;i++)n.add(t[i],!1);else for(var i=t.length-1;i>=0;i--)n.add(t[i],!1)},Xr.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getRing(),c=l.getEnvelopeInternal();if(!c.equals(i)&&c.contains(i)){r=Y.ptNotInList(n.getCoordinates(),l.getCoordinates());var h=!1;ce.isPointInRing(r,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u,s=o.getRing().getEnvelopeInternal())}}return o},e(Yr.prototype,{compare:function(t,e){var n=t,i=e;return n.getRing().getEnvelope().compareTo(i.getRing().getEnvelope())},interfaces_:function(){return[a]},getClass:function(){return Yr}}),Xr.EnvelopeComparator=Yr,c(Wr,Lr),e(Wr.prototype,{findEdgeRing:function(t){var e=new Xr(this.factory);return e.build(t),e},computeDepthParity:function(){if(0===arguments.length)for(;;){var t=null;if(null===t)return null;this.computeDepthParity(t)}else 1===arguments.length&&arguments[0]},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();Wr.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=Y.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),o=this.getNode(i),s=new Ar(r,o,e[1],!0),a=new Ar(o,r,e[e.length-2],!1),u=new Rr(t);u.setDirectedEdges(s,a),this.add(u)},deleteCutEdges:function(){this.computeNextCWEdges(),Wr.findLabeledEdgeRings(this.dirEdges);for(var t=new b,e=this.dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var i=n.getSym();if(n.getLabel()===i.getLabel()){n.setMarked(!0),i.setMarked(!0);var r=n.getEdge();t.add(r.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),Wr.label(this.dirEdges,-1);var t=Wr.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new b,n=this.dirEdges.iterator();n.hasNext();){var i=n.next();if(!i.isMarked()&&!i.isInRing()){var r=this.findEdgeRing(i);e.add(r)}}return e},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new Cr(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel(),r=Wr.findIntersectionNodes(n,i);if(null!==r)for(var o=r.iterator();o.hasNext();){var s=o.next();Wr.computeNextCCWEdges(s,i)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new K,n=new ge,i=t.iterator();i.hasNext();)n.push(i.next());for(;!n.isEmpty();){var r=n.pop();Wr.deleteAllEdges(r);for(var o=r.getOutEdges().getEdges(),i=o.iterator();i.hasNext();){var s=i.next();s.setMarked(!0);var a=s.getSym();null!==a&&a.setMarked(!0);var u=s.getEdge();e.add(u.getLine());var l=s.getToNode();1===Wr.getDegreeNonDeleted(l)&&n.push(l)}}return e},interfaces_:function(){return[]},getClass:function(){return Wr}}),Wr.findLabeledEdgeRings=function(t){for(var e=new b,n=1,i=t.iterator();i.hasNext();){var r=i.next();if(!(r.isMarked()||r.getLabel()>=0)){e.add(r);var o=Xr.findDirEdgesInRing(r);Wr.label(o,n),n++}}return e},Wr.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),n=0,i=e.iterator();i.hasNext();){var r=i.next();r.isMarked()||n++}return n},Wr.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var i=n.next();i.setMarked(!0);var r=i.getSym();null!==r&&r.setMarked(!0)}},Wr.label=function(t,e){for(var n=t.iterator();n.hasNext();){var i=n.next();i.setLabel(e)}},Wr.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),n=null,i=null,r=e.getEdges().iterator();r.hasNext();){var o=r.next();if(!o.isMarked()){if(null===n&&(n=o),null!==i){var s=i.getSym();s.setNext(o)}i=o}}if(null!==i){var s=i.getSym();s.setNext(n)}},Wr.computeNextCCWEdges=function(t,e){for(var n=t.getOutEdges(),i=null,r=null,o=n.getEdges(),s=o.size()-1;s>=0;s--){var a=o.get(s),u=a.getSym(),l=null;a.getLabel()===e&&(l=a);var c=null;u.getLabel()===e&&(c=u),null===l&&null===c||(null!==c&&(r=c),null!==l&&(null!==r&&(r.setNext(l),r=null),null===i&&(i=l)))}null!==r&&(f.isTrue(null!==i),r.setNext(i))},Wr.getDegree=function(t,e){for(var n=t.getOutEdges().getEdges(),i=0,r=n.iterator();r.hasNext();){var o=r.next();o.getLabel()===e&&i++}return i},Wr.findIntersectionNodes=function(t,e){var n=t,i=null;do{var r=n.getFromNode();Wr.getDegree(r,e)>1&&(null===i&&(i=new b),i.add(r)),n=n.getNext(),f.isTrue(null!==n,"found null DE in ring"),f.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return i},e(Hr.prototype,{getGeometry:function(){return null===this.geomFactory&&(this.geomFactory=new ie),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(ie.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isValid()?e.add(r):n.add(r.getLineString())}},polygonize:function(){if(null!==this.polyList)return null;if(this.polyList=new b,null===this.graph)return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new b;this.invalidRingLines=new b,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),Hr.assignHolesToShells(this.holeList,this.shellList),hs.sort(this.shellList,new Xr.EnvelopeComparator);var n=!0;this.extractOnlyPolygonal&&(Hr.findDisjointShells(this.shellList),n=!1),this.polyList=Hr.extractPolygons(this.shellList,n)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(T(arguments[0],m))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}else if(arguments[0]instanceof St){var i=arguments[0];this.geomFactory=i.getFactory(),null===this.graph&&(this.graph=new Wr(this.geomFactory)),this.graph.addEdge(i)}else if(arguments[0]instanceof B){var r=arguments[0];r.apply(this.lineStringAdder)}},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new b,this.shellList=new b;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return Hr}}),Hr.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getOuterHole();null===i||i.isProcessed()||(n.setIncluded(!0),i.setProcessed(!0))}},Hr.extractPolygons=function(t,e){for(var n=new b,i=t.iterator();i.hasNext();){var r=i.next();(e||r.isIncluded())&&n.add(r.getPolygon())}return n},Hr.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var i=n.next();Hr.assignHoleToShell(i,e)}},Hr.assignHoleToShell=function(t,e){var n=Xr.findEdgeRingContaining(t,e);null!==n&&n.addHole(t)},Hr.findDisjointShells=function(t){Hr.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var i=n.next();i.isIncludedSet()||(i.updateIncluded(),i.isIncludedSet()||(e=!0))}}while(e)},e(Zr.prototype,{filter:function(t){t instanceof St&&this.p.add(t)},interfaces_:function(){return[k]},getClass:function(){return Zr}}),Hr.LineStringAdder=Zr;var Ns=Object.freeze({Polygonizer:Hr});e(Jr.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),i=this.arg[1].getGeometry().getDimension(),r=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===n&&2===i?r&&e.setAtLeast("212101212"):2===n&&1===i?(r&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):1===n&&2===i?(r&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):1===n&&1===i&&o&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var i=n.next();i.isIsolated()&&(this.labelIsolatedEdge(i,e,this.arg[e].getGeometry()),this.isolatedEdges.add(i))}},labelIsolatedEdge:function(t,e,n){if(n.getDimension()>0){var i=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,i)}else t.getLabel().setAllLocations(e,C.EXTERIOR)},computeIM:function(){var t=new fe;if(t.set(C.EXTERIOR,C.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new Fr,i=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(i);var r=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),i=this.nodes.addNode(n.getCoordinate());i.setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),s=this.nodes.find(o.coord);s.getLabel().isNull(t)&&(i===C.BOUNDARY?s.setLabelBoundary(t):s.setLabel(t,C.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),s=this.nodes.addNode(o.coord);i===C.BOUNDARY?s.setLabelBoundary(t):s.getLabel().isNull(t)&&s.setLabel(t,C.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();f.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}for(var i=this.nodes.iterator();i.hasNext();){var r=i.next();r.updateIM(t),r.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(C.INTERIOR,C.EXTERIOR,e.getDimension()),t.set(C.BOUNDARY,C.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(C.EXTERIOR,C.INTERIOR,n.getDimension()),t.set(C.EXTERIOR,C.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return Jr}}),e($r.prototype,{isContainedInBoundary:function(t){if(t instanceof Nt)return!1;if(t instanceof Ct)return this.isPointContainedInBoundary(t);if(t instanceof St)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new p,i=new p,r=0;r<e.size()-1;r++)if(e.getCoordinate(r,n),e.getCoordinate(r+1,i),!this.isLineSegmentContainedInBoundary(n,i))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof Ct){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof p){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return!!this.rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)},interfaces_:function(){return[]},getClass:function(){return $r}}),$r.contains=function(t,e){var n=new $r(t);return n.contains(e)},e(Kr.prototype,{intersects:function(t,e){var n=new w(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t))return!0;if(this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var i=t;t=e,e=i}var r=!1;return e.y>t.y&&(r=!0),r?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return Kr}}),e(Qr.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof ft)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return Qr}}),e(to.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new eo(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new no(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var i=new io(this.rectangle);return i.applyTo(t),!!i.intersects()},interfaces_:function(){return[]},getClass:function(){return to}}),to.intersects=function(t,e){var n=new to(t);return n.intersects(e)},c(eo,Qr),e(eo.prototype,{isDone:function(){return this._intersects===!0},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return eo}}),c(no,Qr),e(no.prototype,{isDone:function(){return this._containsPoint===!0},visit:function(t){if(!(t instanceof Nt))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new p,i=0;i<4;i++)if(this.rectSeq.getCoordinate(i,n),e.contains(n)&&Nn.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return no}}),c(io,Qr),e(io.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return this.hasIntersection===!0},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=Gn.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),
e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return io}}),c(ro,ti),e(ro.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return ro}}),ro.covers=function(t,e){return!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||ro.relate(t,e).isCovers())},ro.intersects=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&(t.isRectangle()?to.intersects(t,e):e.isRectangle()?to.intersects(e,t):ro.relate(t,e).isIntersects())},ro.touches=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&ro.relate(t,e).isTouches(t.getDimension(),e.getDimension())},ro.within=function(t,e){return e.contains(t)},ro.coveredBy=function(t,e){return ro.covers(e,t)},ro.relate=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new ro(t,e),i=n.getIntersectionMatrix();return i}if(3===arguments.length){if("string"==typeof arguments[2]&&arguments[0]instanceof B&&arguments[1]instanceof B){var r=arguments[0],o=arguments[1],s=arguments[2];return ro.relateWithCheck(r,o).matches(s)}if(T(arguments[2],V)&&arguments[0]instanceof B&&arguments[1]instanceof B){var a=arguments[0],u=arguments[1],l=arguments[2],n=new ro(a,u,l),i=n.getIntersectionMatrix();return i}}},ro.overlaps=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&ro.relate(t,e).isOverlaps(t.getDimension(),e.getDimension())},ro.disjoint=function(t,e){return!t.intersects(e)},ro.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ro.relate(t,e)},ro.crosses=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&ro.relate(t,e).isCrosses(t.getDimension(),e.getDimension())},ro.contains=function(t,e){return!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?$r.contains(t,e):ro.relate(t,e).isContains())};var Ls=Object.freeze({RelateOp:ro});e(oo.prototype,{extractElements:function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this.skipEmpty&&i.isEmpty()||e.add(i)}},combine:function(){for(var t=new b,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return oo}}),oo.combine=function(){if(1===arguments.length){var t=arguments[0],e=new oo(t);return e.combine()}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=new oo(oo.createList(n,i));return e.combine()}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],e=new oo(oo.createList(r,o,s));return e.combine()}},oo.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},oo.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new b;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],n=new b;return n.add(i),n.add(r),n.add(o),n}},e(so.prototype,{union:function(){for(var t=new Ne,e=new at,n=0;n<this.pointGeom.getNumGeometries();n++){var i=this.pointGeom.getGeometryN(n),r=i.getCoordinate(),o=t.locate(r,this.otherGeom);o===C.EXTERIOR&&e.add(r)}if(0===e.size())return this.otherGeom;var s=null,a=Y.toCoordinateArray(e);return s=1===a.length?this.geomFact.createPoint(a[0]):this.geomFact.createMultiPointFromCoords(a),oo.combine(s,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return so}}),so.union=function(t,e){var n=new so(t,e);return n.union()},e(ao.prototype,{filter:function(t){this.sortIndex!==-1&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[ct]},getClass:function(){return ao}}),ao.extract=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return ao.extract(t,e,new b)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return n.getSortIndex()===i?r.add(n):n instanceof ft&&n.apply(new ao(i,r)),r}},e(uo.prototype,{reduceToGeometries:function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next(),r=null;T(i,v)?r=this.unionTree(i):i instanceof B&&(r=i),e.add(r)}return e},extractByEnvelope:function(t,e,n){for(var i=new b,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this.geomFactory.buildGeometry(i)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i)){var r=oo.combine(t,e);return r}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var o=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,o)},union:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new Ge(uo.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var i=t.itemsTree(),r=this.unionTree(i);return r},binaryUnion:function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=uo.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n===2)return this.unionSafe(uo.getGeometry(e,n),uo.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),r=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,i);return this.unionSafe(r,s)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},unionSafe:function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return uo.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t),n=this.binaryUnion(e);return n},unionUsingEnvelopeIntersection:function(t,e,n){var i=new b,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o);i.add(s);var a=oo.combine(i);return a},bufferUnion:function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),i=n.buffer(0);return i}if(2===arguments.length){var r=arguments[0],o=arguments[1],e=r.getFactory(),n=e.createGeometryCollection([r,o]),i=n.buffer(0);return i}},interfaces_:function(){return[]},getClass:function(){return uo}}),uo.restrictToPolygons=function(t){if(T(t,Tt))return t;var e=gr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ie.toPolygonArray(e))},uo.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},uo.union=function(t){var e=new uo(t);return e.union()},uo.STRTREE_NODE_CAPACITY=4,e(lo.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return oi.overlayOp(t,e,ii.UNION)},unionWithNull:function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},extract:function(){if(T(arguments[0],m))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.extract(n)}else if(arguments[0]instanceof B){var i=arguments[0];null===this.geomFact&&(this.geomFact=i.getFactory()),ao.extract(i,B.SORTINDEX_POLYGON,this.polygons),ao.extract(i,B.SORTINDEX_LINESTRING,this.lines),ao.extract(i,B.SORTINDEX_POINT,this.points)}},union:function t(){if(null===this.geomFact)return null;var e=null;if(this.points.size()>0){var n=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(n)}var i=null;if(this.lines.size()>0){var r=this.geomFact.buildGeometry(this.lines);i=this.unionNoOpt(r)}var o=null;this.polygons.size()>0&&(o=uo.union(this.polygons));var s=this.unionWithNull(i,o),t=null;return t=null===e?s:null===s?e:so.union(e,s),null===t?this.geomFact.createGeometryCollection():t},interfaces_:function(){return[]},getClass:function(){return lo}}),lo.union=function(){if(1===arguments.length){if(T(arguments[0],m)){var t=arguments[0],e=new lo(t);return e.union()}if(arguments[0]instanceof B){var n=arguments[0],e=new lo(n);return e.union()}}else if(2===arguments.length){var i=arguments[0],r=arguments[1],e=new lo(i,r);return e.union()}};var Ms=Object.freeze({UnaryUnionOp:lo}),Ps=Object.freeze({IsValidOp:qr,ConsistentAreaTester:Vr}),As=Object.freeze({BoundaryOp:dt,IsSimpleOp:Wi,buffer:Ss,distance:Is,linemerge:Cs,overlay:Ts,polygonize:Ns,relate:Ls,union:Ms,valid:Ps});c(co,At.CoordinateOperation),e(co.prototype,{editCoordinates:function(t,e){if(0===t.length)return null;for(var n=new Array(t.length).fill(null),i=0;i<t.length;i++){var r=new p(t[i]);this.targetPM.makePrecise(r),n[i]=r}var o=new E(n,!1),s=o.toCoordinateArray(),a=0;e instanceof St&&(a=2),e instanceof Mt&&(a=4);var u=n;return this.removeCollapsed&&(u=null),s.length<a?u:s},interfaces_:function(){return[]},getClass:function(){return co}}),e(ho.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),i=n;return this.changePrecisionModel||(i=this.changePM(n,t.getPrecisionModel())),i},reducePointwise:function(t){var e=null;if(this.changePrecisionModel){var n=this.createFactory(t.getFactory(),this.targetPM);e=new At(n)}else e=new At;var i=this.removeCollapsed;t.getDimension()>=2&&(i=!0);var r=e.edit(t,new co(this.targetPM,i));return r},changePM:function(t,e){var n=this.createEditor(t.getFactory(),e);return n.edit(t,new At.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){var n=new ie(e,t.getSRID(),t.getCoordinateSequenceFactory());return n},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:T(e,Tt)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){if(t.getPrecisionModel()===e)return new At;var n=this.createFactory(t,e),i=new At(n);return i},interfaces_:function(){return[]},getClass:function(){return ho}}),ho.reduce=function(t,e){var n=new ho(e);return n.reduce(t)},ho.reducePointwise=function(t,e){var n=new ho(e);return n.setPointwise(!0),n.reduce(t)};var Rs=Object.freeze({GeometryPrecisionReducer:ho});e(fo.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,i=t,r=t+1;r<e;r++){var o=this.seg.distance(this.pts[r]);o>n&&(n=o,i=r)}if(n<=this.distanceTolerance)for(var r=t+1;r<e;r++)this.usePt[r]=!1;else this.simplifySection(t,i),this.simplifySection(i,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);for(var e=new E,t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new p(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return fo}}),fo.simplify=function(t,e){var n=new fo(t);return n.setDistanceTolerance(e),n.simplify()},e(po.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new go(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<0)throw new i("Tolerance must be non-negative");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return po}}),po.simplify=function(t,e){var n=new po(t);return n.setDistanceTolerance(e),n.getResultGeometry()},c(go,_e),e(go.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=_e.prototype.transformPolygon.call(this,t,e);return e instanceof Pt?n:this.createValidArea(n)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=null;return i=0===n.length?new Array(0).fill(null):fo.simplify(n,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(i)},transformMultiPolygon:function(t,e){var n=_e.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof Nt,i=_e.prototype.transformLinearRing.call(this,t,e);return!n||i instanceof Mt?i:null},interfaces_:function(){return[]},getClass:function(){return go}}),po.DPTransformer=go,c(mo,he),e(mo.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return mo}}),e(yo.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(yo.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return 0===t?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(yo.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new mo(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return yo.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return yo}}),yo.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,i=0;i<t.size();i++)n=t.get(i),e[i]=n.p0;return e[e.length-1]=n.p1,e},e(vo.prototype,{remove:function(t){this.index.remove(new w(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof yo)for(var t=arguments[0],e=t.getSegments(),n=0;n<e.length;n++){var i=e[n];this.add(i)}else if(arguments[0]instanceof he){var r=arguments[0];this.index.insert(new w(r.p0,r.p1),r)}},query:function(t){var e=new w(t.p0,t.p1),n=new _o(t);this.index.query(e,n);var i=n.getItems();return i},interfaces_:function(){return[]},getClass:function(){return vo}}),e(_o.prototype,{visitItem:function(t){var e=t;w.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Fe]},getClass:function(){return _o}}),e(xo.prototype,{flatten:function(t,e){var n=this.linePts[t],i=this.linePts[e],r=new he(n,i);return this.remove(this.line,t,e),this.outputIndex.add(r),r},hasBadIntersection:function(t,e,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var i=new Array(2).fill(null);if(t+1===e){var r=this.line.getSegment(t);return this.line.addToResult(r),null}var o=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var s=n+1;s<this.line.getMinimumSize()&&(o=!1)}var a=new Array(1).fill(null),u=this.findFurthestPoint(this.linePts,t,e,a);a[0]>this.distanceTolerance&&(o=!1);var l=new he;if(l.p0=this.linePts[t],l.p1=this.linePts[e],i[0]=t,i[1]=e,this.hasBadIntersection(this.line,i,l)&&(o=!1),o){var r=this.flatten(t,e);return this.line.addToResult(r),null}this.simplifySection(t,u,n),this.simplifySection(u,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t),n=e.iterator();n.hasNext();){var i=n.next();if(this.hasInteriorIntersection(i,t))return!0}return!1},findFurthestPoint:function(t,e,n,i){var r=new he;r.p0=t[e],r.p1=t[n];for(var o=-1,s=e,a=e+1;a<n;a++){var u=t[a],l=r.distance(u);l>o&&(o=l,s=a)}return i[0]=o,s},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var i=e;i<n;i++){var r=t.getSegment(i);this.inputIndex.remove(r)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var i=this.inputIndex.query(n),r=i.iterator();r.hasNext();){var o=r.next();if(this.hasInteriorIntersection(o,n)){if(xo.isInLineSection(t,e,o))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return xo}}),xo.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var i=n.getIndex();return i>=e[0]&&i<e[1]},e(bo.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(var e=t.iterator();e.hasNext();){var n=new xo(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return bo}}),e(Eo.prototype,{getResultGeometry:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new te,this.inputGeom.apply(new So(this)),this.lineSimplifier.simplify(this.linestringMap.values());var t=new wo(this.linestringMap).transform(this.inputGeom);return t},setDistanceTolerance:function(t){if(t<0)throw new i("Tolerance must be non-negative");this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return Eo}}),Eo.simplify=function(t,e){var n=new Eo(t);return n.setDistanceTolerance(e),n.getResultGeometry()},c(wo,_e),e(wo.prototype,{transformCoordinates:function(t,e){if(0===t.size())return null;if(e instanceof St){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return _e.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return wo}}),e(So.prototype,{filter:function(t){if(t instanceof St){var e=t;if(e.isEmpty())return null;var n=e.isClosed()?4:2,i=new yo(e,n);this.tps.linestringMap.put(e,i)}},interfaces_:function(){return[k]},getClass:function(){return So}}),Eo.LineStringTransformer=wo,Eo.LineStringMapBuilderFilter=So;var Os=Object.freeze({DouglasPeuckerSimplifier:po,TopologyPreservingSimplifier:Eo});e(Io.prototype,{splitAt:function(){if(1===arguments.length){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=Io.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.getConstrainedLength(n),o=r/this.segLen;i.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(o):this.splitPt=Io.pointAlongReverse(this.seg,o)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return Io}}),Io.pointAlongReverse=function(t,e){var n=new p;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},e(Co.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Co}}),e(To.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),i=n.getLength(),r=i/2,o=new Io(n),s=To.projectedSplitPoint(t,e),a=2*s.distance(e)*.8,u=a;return u>r&&(u=r),o.setMinimumLength(u),o.splitAt(s),o.getSplitPoint()},interfaces_:function(){return[Co]},getClass:function(){return To}}),To.projectedSplitPoint=function(t,e){var n=t.getLineSegment(),i=n.project(e);return i},e(No.prototype,{interfaces_:function(){return[]},getClass:function(){return No}}),No.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},No.isInCircleDDNormalized=function(t,e,n,i){var r=A.valueOf(t.x).selfSubtract(i.x),o=A.valueOf(t.y).selfSubtract(i.y),s=A.valueOf(e.x).selfSubtract(i.x),a=A.valueOf(e.y).selfSubtract(i.y),u=A.valueOf(n.x).selfSubtract(i.x),l=A.valueOf(n.y).selfSubtract(i.y),c=r.multiply(a).selfSubtract(s.multiply(o)),h=s.multiply(l).selfSubtract(u.multiply(a)),f=u.multiply(o).selfSubtract(r.multiply(l)),p=r.multiply(r).selfAdd(o.multiply(o)),d=s.multiply(s).selfAdd(a.multiply(a)),g=u.multiply(u).selfAdd(l.multiply(l)),m=p.selfMultiply(h).selfAdd(d.selfMultiply(f)).selfAdd(g.selfMultiply(c)),y=m.doubleValue()>0;return y},No.checkRobustInCircle=function(t,e,n,i){var r=No.isInCircleNonRobust(t,e,n,i),o=No.isInCircleDDSlow(t,e,n,i),s=No.isInCircleCC(t,e,n,i),a=Si.circumcentre(t,e,n);F.out.println("p radius diff a = "+Math.abs(i.distance(a)-t.distance(a))/t.distance(a)),r===o&&r===s||(F.out.println("inCircle robustness failure (double result = "+r+", DD result = "+o+", CC result = "+s+")"),F.out.println(oe.toLineString(new zt([t,e,n,i]))),F.out.println("Circumcentre = "+oe.toPoint(a)+" radius = "+t.distance(a)),F.out.println("p radius diff a = "+Math.abs(i.distance(a)/t.distance(a)-1)),F.out.println("p radius diff b = "+Math.abs(i.distance(a)/e.distance(a)-1)),F.out.println("p radius diff c = "+Math.abs(i.distance(a)/n.distance(a)-1)),F.out.println())},No.isInCircleDDFast=function(t,e,n,i){var r=A.sqr(t.x).selfAdd(A.sqr(t.y)).selfMultiply(No.triAreaDDFast(e,n,i)),o=A.sqr(e.x).selfAdd(A.sqr(e.y)).selfMultiply(No.triAreaDDFast(t,n,i)),s=A.sqr(n.x).selfAdd(A.sqr(n.y)).selfMultiply(No.triAreaDDFast(t,e,i)),a=A.sqr(i.x).selfAdd(A.sqr(i.y)).selfMultiply(No.triAreaDDFast(t,e,n)),u=r.selfSubtract(o).selfAdd(s).selfSubtract(a),l=u.doubleValue()>0;return l},No.isInCircleCC=function(t,e,n,i){var r=Si.circumcentre(t,e,n),o=t.distance(r),s=i.distance(r)-o;return s<=0},No.isInCircleNormalized=function(t,e,n,i){var r=t.x-i.x,o=t.y-i.y,s=e.x-i.x,a=e.y-i.y,u=n.x-i.x,l=n.y-i.y,c=r*a-s*o,h=s*l-u*a,f=u*o-r*l,p=r*r+o*o,d=s*s+a*a,g=u*u+l*l,m=p*h+d*f+g*c;return m>0},No.isInCircleDDSlow=function(t,e,n,i){var r=A.valueOf(i.x),o=A.valueOf(i.y),s=A.valueOf(t.x),a=A.valueOf(t.y),u=A.valueOf(e.x),l=A.valueOf(e.y),c=A.valueOf(n.x),h=A.valueOf(n.y),f=s.multiply(s).add(a.multiply(a)).multiply(No.triAreaDDSlow(u,l,c,h,r,o)),p=u.multiply(u).add(l.multiply(l)).multiply(No.triAreaDDSlow(s,a,c,h,r,o)),d=c.multiply(c).add(h.multiply(h)).multiply(No.triAreaDDSlow(s,a,u,l,r,o)),g=r.multiply(r).add(o.multiply(o)).multiply(No.triAreaDDSlow(s,a,u,l,c,h)),m=f.subtract(p).add(d).subtract(g),y=m.doubleValue()>0;return y},No.isInCircleNonRobust=function(t,e,n,i){var r=(t.x*t.x+t.y*t.y)*No.triArea(e,n,i)-(e.x*e.x+e.y*e.y)*No.triArea(t,n,i)+(n.x*n.x+n.y*n.y)*No.triArea(t,e,i)-(i.x*i.x+i.y*i.y)*No.triArea(t,e,n)>0;return r},No.isInCircleRobust=function(t,e,n,i){return No.isInCircleNormalized(t,e,n,i)},No.triAreaDDSlow=function(t,e,n,i,r,o){return n.subtract(t).multiply(o.subtract(e)).subtract(i.subtract(e).multiply(r.subtract(t)))},No.triAreaDDFast=function(t,e,n){var i=A.valueOf(e.x).selfSubtract(t.x).selfMultiply(A.valueOf(n.y).selfSubtract(t.y)),r=A.valueOf(e.y).selfSubtract(t.y).selfMultiply(A.valueOf(n.x).selfSubtract(t.x));return i.selfSubtract(r)},e(Lo.prototype,{circleCenter:function(t,e){var n=new Lo(this.getX(),this.getY()),i=this.bisector(n,t),r=this.bisector(t,e),o=new D(i,r),s=null;try{s=new Lo(o.getX(),o.getY())}catch(i){if(!(i instanceof I))throw i;F.err.println("a: "+n+"  b: "+t+"  c: "+e),F.err.println(i)}finally{}return s},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),i=e.getY()-t.getY(),r=new D(t.getX()+n/2,t.getY()+i/2,1),o=new D(t.getX()-i+n/2,t.getY()+n+i/2,1);return new D(r,o)},equals:function(){if(1===arguments.length){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return No.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var i=t.getX(),r=t.getY(),o=e.getX()-i,s=n.getX()-i,a=e.getY()-r,u=n.getY()-r,l=o*u-s*a,c=this.getX()-i,h=this.getY()-r,f=(u*c-s*h)/l,p=(-a*c+o*h)/l,d=t.getZ()+f*(e.getZ()-t.getZ())+p*(n.getZ()-t.getZ());return d},midPoint:function(t){var e=(this.p.x+t.getX())/2,n=(this.p.y+t.getY())/2,i=(this.p.z+t.getZ())/2;return new Lo(e,n,i)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new Lo(t*this.p.x,t*this.p.y)},cross:function(){return new Lo(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new Lo(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=this,i=e.sub(t),r=n.sub(t),o=i.crossProduct(r);return o>0?Lo.LEFT:o<0?Lo.RIGHT:i.getX()*r.getX()<0||i.getY()*r.getY()<0?Lo.BEHIND:i.magn()<r.magn()?Lo.BEYOND:t.equals(n)?Lo.ORIGIN:e.equals(n)?Lo.DESTINATION:Lo.BETWEEN},sum:function(t){return new Lo(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),i=this.distance(n,t),r=this.distance(this,t),o=this.distance(t,e);return o<r&&(r=o),o=this.distance(e,this),o<r&&(r=o),i/r},interfaces_:function(){return[]},getClass:function(){return Lo}}),Lo.interpolateZ=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=e.distance(n),r=t.distance(e),o=n.z-e.z,s=e.z+o*(r/i);return s}if(4===arguments.length){var a=arguments[0],u=arguments[1],l=arguments[2],c=arguments[3],h=u.x,f=u.y,p=l.x-h,d=c.x-h,g=l.y-f,m=c.y-f,y=p*m-d*g,v=a.x-h,_=a.y-f,x=(m*v-d*_)/y,b=(-g*v+p*_)/y,E=u.z+x*(l.z-u.z)+b*(c.z-u.z);return E}},Lo.LEFT=0,Lo.RIGHT=1,Lo.BEYOND=2,Lo.BEHIND=3,Lo.BETWEEN=4,Lo.ORIGIN=5,Lo.DESTINATION=6,c(Mo,Lo),e(Mo.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return Mo}}),e(Po.prototype,{equalsNonOriented:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},toLineSegment:function(){return new he(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return oe.toLineString(t,e)},isLive:function(){return null!==this._rot},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return Po}}),Po.makeEdge=function(t,e){var n=new Po,i=new Po,r=new Po,o=new Po;n._rot=i,i._rot=r,r._rot=o,o._rot=n,n.setNext(n),i.setNext(o),r.setNext(r),o.setNext(i);var s=n;return s.setOrig(t),s.setDest(e),s},Po.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();Po.splice(t,e),Po.splice(t.sym(),n),Po.splice(t,e.lNext()),Po.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},Po.splice=function(t,e){var n=t.oNext().rot(),i=e.oNext().rot(),r=e.oNext(),o=t.oNext(),s=i.oNext(),a=n.oNext();t.setNext(r),e.setNext(o),n.setNext(s),i.setNext(a)},Po.connect=function(t,e){var n=Po.makeEdge(t.dest(),e.orig());return Po.splice(n,t.lNext()),Po.splice(n.sym(),e),n},e(Ao.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);Po.splice(n,e);var i=n;do n=this.subdiv.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==i);for(;;){var r=e.oPrev();if(r.dest().rightOf(e)&&t.isInCircle(e.orig(),r.dest(),e.dest()))Po.swap(e),e=e.oPrev();else{if(e.oNext()===i)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return Ao}}),e(Ro.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return Ro}}),e(Oo.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},findEdge:function(){var t=this.subdiv.getEdges();return t.iterator().next()},interfaces_:function(){return[Ro]},getClass:function(){return Oo}}),c(Fo,l),e(Fo.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return Fo}}),Fo.msgWithSpatial=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(Do.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Do}}),e(zo.prototype,{getTriangleVertices:function(t){var e=new jo;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return!!t.equals(this.frameVertex[0])||!!t.equals(this.frameVertex[1])||!!t.equals(this.frameVertex[2])},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var n=Po.connect(t,e);return this.quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new b,i=t;do{var r=t.rot().orig().getCoordinate();n.add(r),t=t.oPrev()}while(t!==i);var o=new E;o.addAll(n,!1),o.closeRing(),o.size()<4&&(F.out.println(o),o.add(o.get(o.size()-1),!0));var s=o.toCoordinateArray(),a=e.createPolygon(e.createLinearRing(s),null),u=i.orig();return a.setUserData(u.getCoordinate()),a},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);Po.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return Po.splice(e.sym(),n),Po.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);zo.getTriangleEdges(t,e);var n=new Array(3).fill(null);zo.getTriangleEdges(t.sym(),n);var i=t.lNext().dest();if(this.isFrameVertex(i))return!0;var r=t.sym().lNext().dest();return!!this.isFrameVertex(r)},makeEdge:function(t,e){var n=Po.makeEdge(t,e);return this.quadEdges.add(n),n},visitTriangles:function(t,e){this.visitedKey++;var n=new ge;n.push(this.startingEdge);for(var i=new K;!n.empty();){var r=n.pop();if(!i.contains(r)){var o=this.fetchTriangleToVisit(r,n,e,i);null!==o&&t.visit(o)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate());
var n=this.seg.distance(e);return n<this.edgeCoincidenceTolerance},getEnvelope:function(){return new w(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),n=t.getHeight(),i=0;i=e>n?10*e:10*n,this.frameVertex[0]=new Lo((t.getMaxX()+t.getMinX())/2,t.getMaxY()+i),this.frameVertex[1]=new Lo(t.getMinX()-i,t.getMinY()-i),this.frameVertex[2]=new Lo(t.getMaxX()+i,t.getMinY()-i),this.frameEnv=new w(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new Vo;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new K,n=this.quadEdges.iterator();n.hasNext();){var i=n.next(),r=i.orig();!t&&this.isFrameVertex(r)||e.add(r);var o=i.dest();!t&&this.isFrameVertex(o)||e.add(o)}return e},fetchTriangleToVisit:function(t,e,n,i){var r=t,o=0,s=!1;do{this.triEdges[o]=r,this.isFrameEdge(r)&&(s=!0);var a=r.sym();i.contains(a)||e.push(a),i.add(r),o++,r=r.lNext()}while(r!==t);return s&&!n?null:this.triEdges},getEdges:function(){if(0===arguments.length)return this.quadEdges;if(1===arguments.length){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var o=r.next();n[i++]=t.createLineString([o.orig().getCoordinate(),o.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new b,n=new K,i=this.quadEdges.iterator();i.hasNext();){var r=i.next(),o=r.orig();n.contains(o)||(n.add(o),!t&&this.isFrameVertex(o)||e.add(r));var s=r.sym(),a=s.orig();n.contains(a)||(n.add(a),!t&&this.isFrameVertex(a)||e.add(s))}return e},getTriangleEdges:function(t){var e=new Bo;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new b,n=new ge;n.push(this.startingEdge);for(var i=new K;!n.empty();){var r=n.pop();if(!i.contains(r)){var o=r.getPrimary();!t&&this.isFrameEdge(o)||e.add(o),n.push(r.oNext()),n.push(r.sym().oNext()),i.add(r),i.add(r.sym())}}return e},delete:function(t){Po.splice(t,t.oPrev()),Po.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),i=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(i),t.delete(),e.delete(),n.delete(),i.delete()},locateFromEdge:function(t,e){for(var n=0,i=this.quadEdges.size(),r=e;;){if(n++,n>i)throw new Fo(r.toLineSegment());if(t.equals(r.orig())||t.equals(r.dest()))break;if(t.rightOf(r))r=r.sym();else if(t.rightOf(r.oNext())){if(t.rightOf(r.dPrev()))break;r=r.dPrev()}else r=r.oNext()}return r},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new ko,!0);for(var e=new b,n=this.getVertexUniqueEdges(!1),i=n.iterator();i.hasNext();){var r=i.next();e.add(this.getVoronoiCellPolygon(r,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(ie.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var o=r.next();n[i++]=t.createPolygon(t.createLinearRing(o),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);Po.splice(n,e);var i=n;do n=this.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==i);return i},locate:function(){if(1===arguments.length){if(arguments[0]instanceof Lo){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof p){var e=arguments[0];return this.locator.locate(new Lo(e))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.locator.locate(new Lo(n));if(null===r)return null;var o=r;r.dest().getCoordinate().equals2D(n)&&(o=r.sym());var s=o;do{if(s.dest().getCoordinate().equals2D(i))return s;s=s.oNext()}while(s!==o);return null}},interfaces_:function(){return[]},getClass:function(){return zo}}),zo.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new i("Edges do not form a triangle")},e(ko.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),i=t[2].orig().getCoordinate(),r=Si.circumcentre(e,n,i),o=new Lo(r),s=0;s<3;s++)t[s].rot().setOrig(o)},interfaces_:function(){return[Do]},getClass:function(){return ko}}),e(Bo.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[Do]},getClass:function(){return Bo}}),e(jo.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[Do]},getClass:function(){return jo}}),e(Vo.prototype,{checkTriangleSize:function(t){var e="";t.length>=2?e=oe.toLineString(t[0],t[1]):t.length>=1&&(e=oe.toPoint(t[0]))},visit:function(t){this.coordList.clear();for(var e=0;e<3;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var i=this.coordList.toCoordinateArray();if(4!==i.length)return null;this.triCoords.add(i)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[Do]},getClass:function(){return Vo}}),zo.TriangleCircumcentreVisitor=ko,zo.TriangleEdgesListVisitor=Bo,zo.TriangleVertexListVisitor=jo,zo.TriangleCoordinatesVisitor=Vo,zo.EDGE_COINCIDENCE_TOL_FACTOR=1e3,e(Go.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){var t=this.ls.getCoordinate(1);return t.z},getStartZ:function(){var t=this.ls.getCoordinate(0);return t.z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){var t=this.ls.getCoordinate(1);return t.y},getStartX:function(){var t=this.ls.getCoordinate(0);return t.x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){var t=this.ls.getCoordinate(0);return t.y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){var t=this.ls.getCoordinate(1);return t.x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return Go}}),e(Uo.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Uo}}),e(qo.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return qo}}),e(Xo.prototype,{insert:function(){if(1===arguments.length){var t=arguments[0];return this.insert(t,null)}if(2===arguments.length){var e=arguments[0],n=arguments[1];if(null===this.root)return this.root=new qo(e,n),this.root;if(this.tolerance>0){var i=this.findBestMatchNode(e);if(null!==i)return i.increment(),i}return this.insertExact(e,n)}},query:function(){var t=arguments,e=this;if(1===arguments.length){var n=arguments[0],i=new b;return this.query(n,i),i}if(2===arguments.length)if(arguments[0]instanceof w&&T(arguments[1],v))!function(){var n=t[0],i=t[1];e.queryNode(e.root,n,!0,{interfaces_:function(){return[Uo]},visit:function(t){i.add(t)}})}();else if(arguments[0]instanceof w&&T(arguments[1],Uo)){var r=arguments[0],o=arguments[1];this.queryNode(this.root,r,!0,o)}},queryNode:function(t,e,n,i){if(null===t)return null;var r=null,o=null,s=null;n?(r=e.getMinX(),o=e.getMaxX(),s=t.getX()):(r=e.getMinY(),o=e.getMaxY(),s=t.getY());var a=r<s,u=s<=o;a&&this.queryNode(t.getLeft(),e,!n,i),e.contains(t.getCoordinate())&&i.visit(t),u&&this.queryNode(t.getRight(),e,!n,i)},findBestMatchNode:function(t){var e=new Yo(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return null===this.root},insertExact:function(t,e){for(var n=this.root,i=this.root,r=!0,o=!0;null!==n;){if(null!==n){var s=t.distance(n.getCoordinate())<=this.tolerance;if(s)return n.increment(),n}o=r?t.x<n.getX():t.y<n.getY(),i=n,n=o?n.getLeft():n.getRight(),r=!r}this.numberOfNodes=this.numberOfNodes+1;var a=new qo(t,e);return o?i.setLeft(a):i.setRight(a),a},interfaces_:function(){return[]},getClass:function(){return Xo}}),Xo.toCoordinates=function(){if(1===arguments.length){var t=arguments[0];return Xo.toCoordinates(t,!1)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new E,r=e.iterator();r.hasNext();)for(var o=r.next(),s=n?o.getCount():1,a=0;a<s;a++)i.add(o.getCoordinate(),!0);return i.toCoordinateArray()}},e(Yo.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate()),n=e<=this.tolerance;if(!n)return null;var i=!1;(null===this.matchNode||e<this.matchDist||null!==this.matchNode&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(i=!0),i&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new w(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[Uo]},getClass:function(){return Yo}}),Xo.BestMatchVisitor=Yo,e(Wo.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do e=this.enforceGabriel(this.segments),t++;while(e>0&&t<Wo.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){var i=n.next();t[e++]=i.getCoordinate()}for(var r=this.segVertices.iterator();r.hasNext();){var i=r.next();t[e++]=i.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new ie,e=this.getPointArray(),n=new ye(e,t);this.convexHull=n.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),i=new p((e.x+n.x)/2,(e.y+n.y)/2),o=e.distance(i),s=new w(i);s.expandBy(o);for(var a=this.kdt.query(s),u=null,l=r.MAX_VALUE,c=a.iterator();c.hasNext();){var h=c.next(),f=h.getCoordinate();if(!f.equals2D(e)&&!f.equals2D(n)){var d=i.distance(f);if(d<o){var g=d;(null===u||g<l)&&(u=f,l=g)}}}return u},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new b,n=0,i=new b,r=t.iterator();r.hasNext();){var o=r.next(),s=this.findNonGabrielPoint(o);if(null!==s){this.splitPt=this.splitFinder.findSplitPoint(o,s);var a=this.createVertex(this.splitPt,o),u=(this.insertSite(a),new Go(o.getStartX(),o.getStartY(),o.getStartZ(),a.getX(),a.getY(),a.getZ(),o.getData())),l=new Go(a.getX(),a.getY(),a.getZ(),o.getEndX(),o.getEndY(),o.getEndZ(),o.getData());e.add(u),e.add(l),i.add(o),n+=1}}return t.removeAll(i),t.addAll(e),n},createVertex:function(){if(1===arguments.length){var t=arguments[0],e=null;return e=null!==this.vertexFactory?this.vertexFactory.createVertex(t,null):new Mo(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=null;return e=null!==this.vertexFactory?this.vertexFactory.createVertex(n,i):new Mo(n),e.setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=Wo.computeVertexEnvelope(this.initialVertices),e=Wo.computeVertexEnvelope(this.segVertices),n=new w(t);n.expandToInclude(e);var i=.2*n.getWidth(),r=.2*n.getHeight(),o=Math.max(i,r);this.computeAreaEnv=new w(n),this.computeAreaEnv.expandBy(o)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new zo(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new Oo(this.subdiv)),this.incDel=new Ao(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof Mo){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this.incDel.insertSite(t),t}if(arguments[0]instanceof p){var i=arguments[0];this.insertSite(this.createVertex(i))}},interfaces_:function(){return[]},getClass:function(){return Wo}}),Wo.computeVertexEnvelope=function(t){for(var e=new w,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i.getCoordinate())}return e},Wo.MAX_SPLIT_ITER=99,e(Ho.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Ho.envelope(this.siteCoords),e=Ho.toVertices(this.siteCoords);this.subdiv=new zo(t,this.tolerance);var n=new Ao(this.subdiv);n.insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof B){var t=arguments[0];this.siteCoords=Ho.extractUniqueCoordinates(t)}else if(T(arguments[0],m)){var e=arguments[0];this.siteCoords=Ho.unique(Y.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return Ho}}),Ho.extractUniqueCoordinates=function(t){if(null===t)return new E;var e=t.getCoordinates();return Ho.unique(e)},Ho.envelope=function(t){for(var e=new w,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i)}return e},Ho.unique=function(t){var e=Y.copyDeep(t);ut.sort(e);var n=new E(e,!1);return n},Ho.toVertices=function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Lo(i))}return e},e(Zo.prototype,{createSiteVertices:function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next();this.constraintVertexMap.containsKey(i)||e.add(new Mo(i))}return e},create:function(){if(null!==this.subdiv)return null;var t=Ho.envelope(this.siteCoords),e=new b;null!==this.constraintLines&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=Zo.createConstraintSegments(this.constraintLines));var n=this.createSiteVertices(this.siteCoords),i=new Wo(n,this.tolerance);i.setConstraints(e,new b(this.constraintVertexMap.values())),i.formInitialDelaunay(),i.enforceConstraints(),this.subdiv=i.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=Ho.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var i=new Mo(e[n]);this.constraintVertexMap.put(e[n],i)}},interfaces_:function(){return[]},getClass:function(){return Zo}}),Zo.createConstraintSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=Gn.getLines(t),n=new b,i=e.iterator();i.hasNext();){var r=i.next();Zo.createConstraintSegments(r,n)}return n}if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),i=1;i<a.length;i++)s.add(new Go(a[i-1],a[i]))},e(Jo.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Ho.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv);var n=Ho.toVertices(this.siteCoords);this.subdiv=new zo(t,this.tolerance);var i=new Ao(this.subdiv);i.insertSites(n)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return Jo.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof B){var t=arguments[0];this.siteCoords=Ho.extractUniqueCoordinates(t)}else if(T(arguments[0],m)){var e=arguments[0];this.siteCoords=Ho.unique(Y.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Jo}}),Jo.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),i=new b,r=0;r<t.getNumGeometries();r++){var o=t.getGeometryN(r),s=null;e.contains(o.getEnvelopeInternal())?s=o:e.intersects(o.getEnvelopeInternal())&&(s=n.intersection(o),s.setUserData(o.getUserData())),null===s||s.isEmpty()||i.add(s)}return t.getFactory().createGeometryCollection(ie.toGeometryArray(i))};var Fs=Object.freeze({Vertex:Lo}),Ds=Object.freeze({ConformingDelaunayTriangulationBuilder:Zo,DelaunayTriangulationBuilder:Ho,VoronoiDiagramBuilder:Jo,quadedge:Fs});e($o.prototype,{interfaces_:function(){return[]},getClass:function(){return $o}}),$o.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ii.createEmptyResult(ii.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ii.UNION)},e(B.prototype,{equalsTopo:function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&ro.relate(this,t).isEquals(this.getDimension(),t.getDimension())},union:function(){if(0===arguments.length)return lo.union(this);if(1===arguments.length){var t=arguments[0];return $o.union(this,t)}},isValid:function(){return qr.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return ii.createEmptyResult(ii.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return cn.map(this,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),oi.overlayOp(this,t,ii.INTERSECTION)},covers:function(t){return ro.covers(this,t)},coveredBy:function(t){return ro.coveredBy(this,t)},touches:function(t){return ro.touches(this,t)},intersects:function(t){return ro.intersects(this,t)},within:function(t){return ro.within(this,t)},overlaps:function(t){return ro.overlaps(this,t)},disjoint:function(t){return ro.disjoint(this,t)},crosses:function(t){return ro.crosses(this,t)},buffer:function(){if(1===arguments.length){var t=arguments[0];return dr.bufferOp(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return dr.bufferOp(this,e,n)}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];return dr.bufferOp(this,i,r,o)}},convexHull:function(){return new ye(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return ro.relate.apply(ro,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=pe.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(0===e){var n=new li(this);t=n.getInteriorPoint()}else if(1===e){var n=new ui(this);t=n.getInteriorPoint()}else{var n=new si(this);t=n.getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return ii.createEmptyResult(ii.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),oi.overlayOp(this,t,ii.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){var t=new oe;return t.write(this)},toString:function(){this.toText()},contains:function(t){return ro.contains(this,t)},difference:function(t){return this.isEmpty()?ii.createEmptyResult(ii.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),oi.overlayOp(this,t,ii.DIFFERENCE))},isSimple:function(){var t=new Wi(this);return t.isSimple()},isWithinDistance:function(t,e){var n=this.getEnvelopeInternal().distance(t.getEnvelopeInternal());return!(n>e)&&_r.isWithinDistance(this,t,e)},distance:function(t){return _r.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});var zs="1.3.0 (6e65adb)";t.version=zs,t.algorithm=fs,t.densify=ps,t.dissolve=ds,t.geom=cs,t.geomgraph=gs,t.index=vs,t.io=Es,t.noding=ws,t.operation=As,t.precision=Rs,t.simplify=Os,t.triangulate=Ds,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e){(function(e){function n(t,e,n){function r(e){var n=g,i=m;return g=m=void 0,S=e,v=t.apply(i,n)}function o(t){return S=t,_=setTimeout(c,e),I?r(t):v}function u(t){var n=t-w,i=t-S,r=e-n;return C?b(r,y-i):r}function l(t){var n=t-w,i=t-S;return void 0===w||n>=e||n<0||C&&i>=y}function c(){var t=E();return l(t)?h(t):void(_=setTimeout(c,u(t)))}function h(t){return _=void 0,T&&g?r(t):(g=m=void 0,v)}function f(){void 0!==_&&clearTimeout(_),S=0,g=w=m=_=void 0}function p(){return void 0===_?v:h(E())}function d(){var t=E(),n=l(t);if(g=arguments,m=this,w=t,n){if(void 0===_)return o(w);if(C)return _=setTimeout(c,e),r(w)}return void 0===_&&(_=setTimeout(c,e)),v}var g,m,y,v,_,w,S=0,I=!1,C=!1,T=!0;if("function"!=typeof t)throw new TypeError(a);return e=s(e)||0,i(n)&&(I=!!n.leading,C="maxWait"in n,y=C?x(s(n.maxWait)||0,e):y,T="trailing"in n?!!n.trailing:T),d.cancel=f,d.flush=p,d}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function r(t){return!!t&&"object"==typeof t}function o(t){return"symbol"==typeof t||r(t)&&_.call(t)==l}function s(t){if("number"==typeof t)return t;if(o(t))return u;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(c,"");var n=f.test(t);return n||p.test(t)?d(t.slice(2),n?2:8):h.test(t)?u:+t}var a="Expected a function",u=NaN,l="[object Symbol]",c=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,p=/^0o[0-7]+$/i,d=parseInt,g="object"==typeof e&&e&&e.Object===Object&&e,m="object"==typeof self&&self&&self.Object===Object&&self,y=g||m||Function("return this")(),v=Object.prototype,_=v.toString,x=Math.max,b=Math.min,E=function(){return y.Date.now()};t.exports=n}).call(e,function(){return this}())},function(t,e,n){var i=n(625).getCoord,r=n(620).radiansToDistance;t.exports=function(t,e,n){var o=Math.PI/180,s=i(t),a=i(e),u=o*(a[1]-s[1]),l=o*(a[0]-s[0]),c=o*s[1],h=o*a[1],f=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(c)*Math.cos(h);return r(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n)}},function(t,e){function n(t){if(Array.isArray(t)&&"number"==typeof t[0]&&"number"==typeof t[1])return t;if(t){if("Feature"===t.type&&t.geometry&&"Point"===t.geometry.type&&Array.isArray(t.geometry.coordinates))return t.geometry.coordinates;if("Point"===t.type&&Array.isArray(t.coordinates))return t.coordinates}throw new Error("A coordinate, feature, or point geometry is required")}function i(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function r(t,e,n){if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function o(t,e,n){if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0;i<t.features.length;i++){var r=t.features[i];if(!r||"Feature"!==r.type||!r.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+r.geometry.type)}}t.exports.geojsonType=i,t.exports.collectionOf=o,t.exports.featureOf=r,t.exports.getCoord=n},function(t,e,n){"use strict";var i=n(1),r=n(172),o=i.createClass({displayName:"MapToolButton",propTypes:{icon:i.PropTypes.string,top:i.PropTypes.string,right:i.PropTypes.string,bottom:i.PropTypes.string,left:i.PropTypes.string,tooltipText:i.PropTypes.string,color:i.PropTypes.string,onClick:i.PropTypes.func.isRequired,show:i.PropTypes.bool},getDefaultProps:function(){return{icon:"edit",top:"10px",color:MAPHUBS_CONFIG.primaryColor,right:"10px",bottom:"auto",left:"auto",tooltipText:"",show:!0}},componentDidMount:function(){this.props.tooltipText&&""!=this.props.tooltipText&&r(this.refs.mapToolButton).tooltip()},onClick:function(t){r(this.refs.mapToolButton).tooltip("remove"),r(this.refs.mapToolButton).tooltip(),this.props.onClick(t)},render:function(){return this.props.show?i.createElement("a",{ref:"mapToolButton",onClick:this.onClick,style:{position:"absolute",top:this.props.top,right:this.props.right,bottom:this.props.bottom,left:this.props.left,height:"30px",zIndex:"100",lineHeight:"30px",borderRadius:"4px",textAlign:"center",boxShadow:"0 2px 5px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)",width:"30px"},"data-position":"bottom","data-delay":"50","data-tooltip":this.props.tooltipText},i.createElement("i",{className:"material-icons",style:{height:"30px",lineHeight:"30px",width:"30px",color:this.props.color,borderRadius:"4px",cursor:"pointer",backgroundColor:"white",borderColor:"#ddd",borderStyle:"solid",borderWidth:"1px",textAlign:"center",fontSize:"18px"}},this.props.icon)):null}});t.exports=o},function(t,e,n){"use strict";var i=n(1),r=n(172),o=n(628),s=n(629),a=n(631),u=n(642),l=n(174),c=n(193)(l),h=n(270),f=n(272),p=i.createClass({displayName:"MapToolPanel",mixins:[c.connect(h)],__:function(t){return f.getLocaleString(this.state.locale,t)},propTypes:{show:i.PropTypes.bool,gpxLink:i.PropTypes.string,onChangeBaseMap:i.PropTypes.func.isRequired,toggleMeasurementTools:i.PropTypes.func.isRequired,toggleForestAlerts:i.PropTypes.func.isRequired,calculateForestAlerts:i.PropTypes.func.isRequired,enableMeasurementTools:i.PropTypes.bool,forestAlerts:i.PropTypes.object},getDefaultProps:function(){return{show:!1,buttonTooltipText:"",enableMeasurementTools:!1,forestAlerts:{enableGLAD2017:!1,result:null}}},componentDidMount:function(){r(this.refs.mapToolButton).tooltip(),r(this.refs.mapToolButton).sideNav({menuWidth:240,edge:"right",closeOnClick:!1,draggable:!1}),r(this.refs.mapToolPanel).collapsible()},closePanel:function(){r(this.refs.mapToolButton).sideNav("hide")},onChangeBaseMap:function(t){this.closePanel(),this.props.onChangeBaseMap(t)},toggleMeasurementTools:function(t){t.enableMeasurementTools&&this.closePanel(),this.props.toggleMeasurementTools(t.enableMeasurementTools)},toggleForestAlerts:function(t){this.props.toggleForestAlerts(t)},render:function(){var t="";return this.props.forestAlerts.result&&(t=i.createElement("div",null,i.createElement("div",{className:"row no-margin"},i.createElement("div",{className:"col s12",style:{height:"50px",border:"1px solid #ddd"}},i.createElement("span",null,i.createElement("b",null,this.__("Alert Count: ")),this.props.forestAlerts.result.alertCount))),i.createElement("div",{className:"row no-margin"},i.createElement("div",{className:"col s12",style:{height:"50px",border:"1px solid #ddd"}},i.createElement("span",null,i.createElement("b",null,this.__("Total Area: ")),this.props.forestAlerts.result.areaMessage))))),i.createElement("div",null,i.createElement("a",{ref:"mapToolButton",href:"#","data-activates":"map-tool-panel",style:{display:this.props.show?"inherit":"none",position:"absolute",top:"10px",right:"10px",height:"30px",zIndex:"100",borderRadius:"4px",lineHeight:"30px",textAlign:"center",boxShadow:"0 2px 5px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)",width:"30px"},"data-position":"bottom","data-delay":"50","data-tooltip":this.__("Tools")},i.createElement("i",{className:"material-icons",style:{height:"30px",lineHeight:"30px",width:"30px",color:"#000",borderRadius:"4px",cursor:"pointer",backgroundColor:"white",borderColor:"#ddd",borderStyle:"none",borderWidth:"1px",textAlign:"center",fontSize:"18px"}},"build")),i.createElement("div",{className:"side-nav",id:"map-tool-panel",style:{backgroundColor:"#FFF",height:"calc(100% - 100px)",overflow:"hidden",padding:0,marginTop:"50px",border:"none",boxShadow:"none"}},i.createElement("ul",{ref:"mapToolPanel",className:"collapsible no-margin","data-collapsible":"accordion",style:{height:"100%"}},i.createElement("li",null,i.createElement("div",{className:"collapsible-header",style:{borderBottom:"1px solid #ddd"}},i.createElement("i",{className:"material-icons"},"layers"),this.__("Change Base Map")),i.createElement("div",{className:"collapsible-body"},i.createElement("div",{style:{height:"calc(100vh - 250px)",overflow:"auto"}},i.createElement(s,{onChange:this.onChangeBaseMap})))),i.createElement("li",null,i.createElement("div",{className:"collapsible-header",style:{borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd"}},i.createElement("i",{className:"material-icons"},"straighten"),this.__("Measurement Tools")),i.createElement("div",{className:"collapsible-body center"},i.createElement("div",{style:{height:"calc(100vh - 250px)",overflow:"auto"}},i.createElement(a.Form,{onChange:this.toggleMeasurementTools},i.createElement("b",null,this.__("Show Measurement Tools")),i.createElement(u,{name:"enableMeasurementTools",labelOff:this.__("Off"),labelOn:this.__("On"),className:"col s12",checked:this.props.enableMeasurementTools}))))),i.createElement("li",null,i.createElement("div",{className:"collapsible-header",style:{borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd"}},i.createElement("i",{className:"material-icons"},"warning"),this.__("Forest Alerts")),i.createElement("div",{className:"collapsible-body center"},i.createElement("div",{style:{height:"calc(100vh - 250px)",overflow:"auto"}},i.createElement(a.Form,{onChange:this.toggleForestAlerts},i.createElement("b",null,this.__("2017 GLAD Alerts")),i.createElement(u,{name:"enableGLAD2017",labelOff:this.__("Off"),labelOn:this.__("On"),className:"col s12",checked:this.props.forestAlerts.enableGLAD2017})),i.createElement("button",{className:"btn",onClick:this.props.calculateForestAlerts},this.__("Calculate")),t))),i.createElement("li",null,i.createElement("div",{className:"collapsible-header",style:{borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd"}},i.createElement("i",{className:"material-icons"},"edit"),this.__("Edit OpenStreetMap")),i.createElement("div",{className:"collapsible-body"},i.createElement("div",{style:{height:"calc(100vh - 250px)",overflow:"auto"}},i.createElement(o,{gpxLink:this.props.gpxLink})))))))}});t.exports=p},function(t,e,n){"use strict";var i=n(1),r=n(617),o=n(174),s=n(193)(o),a=n(270),u=n(272),l=i.createClass({displayName:"EditBaseMapBox",mixins:[s.connect(a)],__:function(t){return u.getLocaleString(this.state.locale,t)},propTypes:{gpxLink:i.PropTypes.string},render:function(){if("undefined"==typeof window)return null;var t=window.location.hash.replace("#",""),e=t.split("/"),n=Math.round(e[0]),o=e[1],s=e[2],a="https://www.openstreetmap.org/edit#map="+n+"/"+o+"/"+s,u="http://id.loggingroads.org/#map="+n+"/"+s+"/"+o;return this.props.gpxLink&&(a+="&gpx="+this.props.gpxLink,u+="&gpx="+this.props.gpxLink),i.createElement("div",{style:{width:"100%",textAlign:"center"}},i.createElement("p",{style:{padding:"5px"}},"Edit OpenStreetMap at this location"),i.createElement("ul",{className:"collection with-header custom-scroll-bar",
style:{margin:0,width:"100%",overflow:"auto"}},i.createElement("li",{className:"collection-item",style:{paddingLeft:0}},i.createElement("a",{className:"btn",target:"_blank",href:a,onClick:r.toggleEditBaseMap},this.__("OpenStreetMap"))),i.createElement("li",{className:"collection-item",style:{paddingLeft:0}},i.createElement("a",{className:"btn",target:"_blank",href:u,onClick:r.toggleEditBaseMap},this.__("LoggingRoads")))))}});t.exports=l},function(t,e,n){"use strict";var i=n(1),r=n(630),o=n(631),s=n(174),a=n(193)(s),u=n(618),l=n(270),c=n(272),h=i.createClass({displayName:"BaseMapSelection",mixins:[a.connect(u),a.connect(l)],__:function(t){return c.getLocaleString(this.state.locale,t)},propTypes:{onChange:i.PropTypes.func.isRequired},onChange:function(t){this.props.onChange(t)},render:function(){var t=[{value:"default",label:this.__("Default (Light)")},{value:"dark",label:this.__("Dark")},{value:"streets",label:this.__("Streets")},{value:"outdoors",label:this.__("Outdoors")},{value:"bing-satellite",label:this.__("Bing Aerial")},{value:"mapbox-satellite",label:this.__("Mapbox Satellite")},{value:"landsat-2014",label:this.__("Landsat - 2014")},{value:"stamen-toner",label:this.__("Stamen - Toner")},{value:"stamen-terrain",label:this.__("Stamen - Terrain")},{value:"stamen-watercolor",label:this.__("Stamen - Watercolor")}];return i.createElement("div",{style:{width:"100%",marginRight:"10px",backgroundColor:"white",textAlign:"left"}},i.createElement(o.Form,null,i.createElement("h6",null,this.__("Choose a Base Map")),i.createElement(r,{name:"baseMap",label:"",className:"base-map-selection",defaultValue:this.state.baseMap,options:t,onChange:this.onChange})))}});t.exports=h},function(t,e,n){"use strict";var i=n(1),r=n(631),o=n(288),s=n(638),a=i.createClass({displayName:"Radio",mixins:[s,r.Mixin],propTypes:{className:i.PropTypes.string,dataTooltip:i.PropTypes.string,dataDelay:i.PropTypes.number,dataPosition:i.PropTypes.string,defaultValue:i.PropTypes.string,label:i.PropTypes.string,name:i.PropTypes.string,onChange:i.PropTypes.func,options:i.PropTypes.array},getDefaultProps:function(){return{options:{},defaultValue:void 0,dataDelay:100}},changeValue:function(t){this.setValue(t.target.id),this.props.onChange&&this.props.onChange(t.target.id)},componentWillMount:function(){this.setValue(this.props.defaultValue)},render:function(){var t=o(this.props.className,{tooltipped:!!this.props.dataTooltip}),e=this.getValue(),n=this.props.name,r=this;return i.createElement("div",{className:t,"data-delay":this.props.dataDelay,"data-position":this.props.dataPosition,"data-tooltip":this.props.dataTooltip},i.createElement("label",null,this.props.label),this.props.options.map(function(t){var o=!1;return t.value==e&&(o=!0),i.createElement("p",{key:t.value},i.createElement("input",{name:n,type:"radio",id:t.value,onChange:r.changeValue,checked:o}),i.createElement("label",{htmlFor:t.value},t.label))}))}});t.exports=a},function(t,e,n){(function(e){"use strict";function i(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=e.React||n(1),a={},u=n(632),l=n(633),c=n(634),h=n(635),f=n(636),p=n(637),d={},g=[];a.Mixin=h,a.HOC=f,a.Decorator=p,a.defaults=function(t){d=t},a.addValidationRule=function(t,e){u[t]=e},a.Form=s.createClass({displayName:"Formsy",getInitialState:function(){return{isValid:!0,isSubmitting:!1,canChange:!1}},getDefaultProps:function(){return{onSuccess:function(){},onError:function(){},onSubmit:function(){},onValidSubmit:function(){},onInvalidSubmit:function(){},onValid:function(){},onInvalid:function(){},onChange:function(){},validationErrors:null,preventExternalInvalidation:!1}},childContextTypes:{formsy:s.PropTypes.object},getChildContext:function(){var t=this;return{formsy:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,validate:this.validate,isFormDisabled:this.isFormDisabled,isValidValue:function(e,n){return t.runValidation(e,n).isValid}}}},componentWillMount:function(){this.inputs=[]},componentDidMount:function(){this.validateForm()},componentWillUpdate:function(){this.prevInputNames=this.inputs.map(function(t){return t.props.name})},componentDidUpdate:function(){this.props.validationErrors&&"object"===o(this.props.validationErrors)&&Object.keys(this.props.validationErrors).length>0&&this.setInputValidationErrors(this.props.validationErrors);var t=this.inputs.map(function(t){return t.props.name});c.arraysDiffer(this.prevInputNames,t)&&this.validateForm()},reset:function(t){this.setFormPristine(!0),this.resetModel(t)},submit:function(t){t&&t.preventDefault(),this.setFormPristine(!1);var e=this.getModel();this.props.onSubmit(e,this.resetModel,this.updateInputsWithError),this.state.isValid?this.props.onValidSubmit(e,this.resetModel,this.updateInputsWithError):this.props.onInvalidSubmit(e,this.resetModel,this.updateInputsWithError)},mapModel:function(t){return this.props.mapping?this.props.mapping(t):l.toObj(Object.keys(t).reduce(function(e,n){for(var i=n.split("."),r=e;i.length;){var o=i.shift();r=r[o]=i.length?r[o]||{}:t[n]}return e},{}))},getModel:function(){var t=this.getCurrentValues();return this.mapModel(t)},resetModel:function(t){this.inputs.forEach(function(e){var n=e.props.name;t&&t.hasOwnProperty(n)?e.setValue(t[n]):e.resetValue()}),this.validateForm()},setInputValidationErrors:function(t){this.inputs.forEach(function(e){var n=e.props.name,i=[{_isValid:!(n in t),_validationError:"string"==typeof t[n]?[t[n]]:t[n]}];e.setState.apply(e,i)})},isChanged:function(){return!c.isSame(this.getPristineValues(),this.getCurrentValues())},getPristineValues:function(){return this.inputs.reduce(function(t,e){var n=e.props.name;return t[n]=e.props.value,t},{})},updateInputsWithError:function(t){var e=this;Object.keys(t).forEach(function(n,i){var r=c.find(e.inputs,function(t){return t.props.name===n});if(!r)throw new Error("You are trying to update an input that does not exist. Verify errors object with input names. "+JSON.stringify(t));var o=[{_isValid:e.props.preventExternalInvalidation||!1,_externalError:"string"==typeof t[n]?[t[n]]:t[n]}];r.setState.apply(r,o)})},isFormDisabled:function(){return this.props.disabled},getCurrentValues:function(){return this.inputs.reduce(function(t,e){var n=e.props.name;return t[n]=e.state._value,t},{})},setFormPristine:function(t){this.setState({_formSubmitted:!t}),this.inputs.forEach(function(e,n){e.setState({_formSubmitted:!t,_isPristine:t})})},validate:function(t){this.state.canChange&&this.props.onChange(this.getCurrentValues(),this.isChanged());var e=this.runValidation(t);t.setState({_isValid:e.isValid,_isRequired:e.isRequired,_validationError:e.error,_externalError:null},this.validateForm)},runValidation:function(t,e){var n=this.getCurrentValues(),i=t.props.validationErrors,r=t.props.validationError;e=2===arguments.length?e:t.state._value;var o=this.runRules(e,n,t._validations),s=this.runRules(e,n,t._requiredValidations);"function"==typeof t.validate&&(o.failed=t.validate()?[]:["failed"]);var a=!!Object.keys(t._requiredValidations).length&&!!s.success.length,u=!(o.failed.length||this.props.validationErrors&&this.props.validationErrors[t.props.name]);return{isRequired:a,isValid:!a&&u,error:function(){if(u&&!a)return g;if(o.errors.length)return o.errors;if(this.props.validationErrors&&this.props.validationErrors[t.props.name])return"string"==typeof this.props.validationErrors[t.props.name]?[this.props.validationErrors[t.props.name]]:this.props.validationErrors[t.props.name];if(a){var e=i[s.success[0]];return e?[e]:null}return o.failed.length?o.failed.map(function(t){return i[t]?i[t]:r}).filter(function(t,e,n){return n.indexOf(t)===e}):void 0}.call(this)}},runRules:function(t,e,n){var i={errors:[],failed:[],success:[]};return Object.keys(n).length&&Object.keys(n).forEach(function(r){if(u[r]&&"function"==typeof n[r])throw new Error("Formsy does not allow you to override default validations: "+r);if(!u[r]&&"function"!=typeof n[r])throw new Error("Formsy does not have the validation rule: "+r);if("function"==typeof n[r]){var o=n[r](e,t);return void("string"==typeof o?(i.errors.push(o),i.failed.push(r)):o||i.failed.push(r))}if("function"!=typeof n[r]){var o=u[r](e,t,n[r]);return void("string"==typeof o?(i.errors.push(o),i.failed.push(r)):o?i.success.push(r):i.failed.push(r))}return i.success.push(r)}),i},validateForm:function(){var t=this,e=function(){var t=this.inputs.every(function(t){return t.state._isValid});this.setState({isValid:t}),t?this.props.onValid():this.props.onInvalid(),this.setState({canChange:!0})}.bind(this);this.inputs.forEach(function(n,i){var r=t.runValidation(n);r.isValid&&n.state._externalError&&(r.isValid=!1),n.setState({_isValid:r.isValid,_isRequired:r.isRequired,_validationError:r.error,_externalError:!r.isValid&&n.state._externalError?n.state._externalError:null},i===t.inputs.length-1?e:null)}),!this.inputs.length&&this.isMounted()&&this.setState({canChange:!0})},attachToForm:function(t){this.inputs.indexOf(t)===-1&&this.inputs.push(t),this.validate(t)},detachFromForm:function(t){var e=this.inputs.indexOf(t);e!==-1&&(this.inputs=this.inputs.slice(0,e).concat(this.inputs.slice(e+1))),this.validateForm()},render:function(){var t=this.props,e=(t.mapping,t.validationErrors,t.onSubmit,t.onValid,t.onValidSubmit,t.onInvalid,t.onInvalidSubmit,t.onChange,t.reset,t.preventExternalInvalidation,t.onSuccess,t.onError,i(t,["mapping","validationErrors","onSubmit","onValid","onValidSubmit","onInvalid","onInvalidSubmit","onChange","reset","preventExternalInvalidation","onSuccess","onError"]));return s.createElement("form",r({},e,{onSubmit:this.submit}),this.props.children)}}),e.exports||e.module||e.define&&e.define.amd||(e.Formsy=a),t.exports=a}).call(e,function(){return this}())},function(t,e){"use strict";var n=function(t){return null!==t&&void 0!==t},i=function(t){return""===t},r={isDefaultRequiredValue:function(t,e){return void 0===e||""===e},isExisty:function(t,e){return n(e)},matchRegexp:function(t,e,r){return!n(e)||i(e)||r.test(e)},isUndefined:function(t,e){return void 0===e},isEmptyString:function(t,e){return i(e)},isEmail:function(t,e){return r.matchRegexp(t,e,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},isUrl:function(t,e){return r.matchRegexp(t,e,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i)},isTrue:function(t,e){return e===!0},isFalse:function(t,e){return e===!1},isNumeric:function(t,e){return"number"==typeof e||r.matchRegexp(t,e,/^[-+]?(?:\d*[.])?\d+$/)},isAlpha:function(t,e){return r.matchRegexp(t,e,/^[A-Z]+$/i)},isAlphanumeric:function(t,e){return r.matchRegexp(t,e,/^[0-9A-Z]+$/i)},isInt:function(t,e){return r.matchRegexp(t,e,/^(?:[-+]?(?:0|[1-9]\d*))$/)},isFloat:function(t,e){return r.matchRegexp(t,e,/^(?:[-+]?(?:\d+))?(?:\.\d*)?(?:[eE][\+\-]?(?:\d+))?$/)},isWords:function(t,e){return r.matchRegexp(t,e,/^[A-Z\s]+$/i)},isSpecialWords:function(t,e){return r.matchRegexp(t,e,/^[A-Z\s\u00C0-\u017F]+$/i)},isLength:function(t,e,r){return!n(e)||i(e)||e.length===r},equals:function(t,e,r){return!n(e)||i(e)||e==r},equalsField:function(t,e,n){return e==t[n]},maxLength:function(t,e,i){return!n(e)||e.length<=i},minLength:function(t,e,r){return!n(e)||i(e)||e.length>=r}};t.exports=r},function(t,e){function n(t){return Object.keys(t).reduce(function(e,n){var i=n.match(/[^\[]*/i),r=n.match(/\[.*?\]/g)||[];r=[i[0]].concat(r).map(function(t){return t.replace(/\[|\]/g,"")});for(var o=e;r.length;){var s=r.shift();s in o?o=o[s]:(o[s]=r.length?isNaN(r[0])?{}:[]:t[n],o=o[s])}return e},{})}function i(t){function e(t,n,i){return Array.isArray(i)||"[object Object]"===Object.prototype.toString.call(i)?(Object.keys(i).forEach(function(r){e(t,n+"["+r+"]",i[r])}),t):(t[n]=i,t)}var n=Object.keys(t);return n.reduce(function(n,i){return e(n,i,t[i])},{})}t.exports={fromObj:i,toObj:n}},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={arraysDiffer:function(t,e){var n=!1;return t.length!==e.length?n=!0:t.forEach(function(t,i){this.isSame(t,e[i])||(n=!0)},this),n},objectsDiffer:function(t,e){var n=!1;return Object.keys(t).length!==Object.keys(e).length?n=!0:Object.keys(t).forEach(function(i){this.isSame(t[i],e[i])||(n=!0)},this),n},isSame:function(t,e){return("undefined"==typeof t?"undefined":n(t))===("undefined"==typeof e?"undefined":n(e))&&(Array.isArray(t)&&Array.isArray(e)?!this.arraysDiffer(t,e):"function"==typeof t?t.toString()===e.toString():"object"===("undefined"==typeof t?"undefined":n(t))&&null!==t&&null!==e?!this.objectsDiffer(t,e):t===e)},find:function(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n];if(e(r))return r}return null}}},function(t,e,n){(function(e){"use strict";var i=n(634),r=e.React||n(1),o=function(t){return"string"==typeof t?t.split(/\,(?![^{\[]*[}\]])/g).reduce(function(t,e){var n=e.split(":"),i=n.shift();if(n=n.map(function(t){try{return JSON.parse(t)}catch(e){return t}}),n.length>1)throw new Error("Formsy does not support multiple args on string validations. Use object format of validations instead.");return t[i]=!n.length||n[0],t},{}):t||{}};t.exports={getInitialState:function(){return{_value:this.props.value,_isRequired:!1,_isValid:!0,_isPristine:!0,_pristineValue:this.props.value,_validationError:[],_externalError:null,_formSubmitted:!1}},contextTypes:{formsy:r.PropTypes.object},getDefaultProps:function(){return{validationError:"",validationErrors:{}}},componentWillMount:function(){var t=function(){this.setValidations(this.props.validations,this.props.required),this.context.formsy.attachToForm(this)}.bind(this);if(!this.props.name)throw new Error("Form Input requires a name property when used");t()},componentWillReceiveProps:function(t){this.setValidations(t.validations,t.required)},componentDidUpdate:function(t){i.isSame(this.props.value,t.value)||this.setValue(this.props.value),i.isSame(this.props.validations,t.validations)&&i.isSame(this.props.required,t.required)||this.context.formsy.validate(this)},componentWillUnmount:function(){this.context.formsy.detachFromForm(this)},setValidations:function(t,e){this._validations=o(t)||{},this._requiredValidations=e===!0?{isDefaultRequiredValue:!0}:o(e)},setValue:function(t){this.setState({_value:t,_isPristine:!1},function(){this.context.formsy.validate(this)}.bind(this))},resetValue:function(){this.setState({_value:this.state._pristineValue,_isPristine:!0},function(){this.context.formsy.validate(this)})},getValue:function(){return this.state._value},hasValue:function(){return""!==this.state._value},getErrorMessage:function(){var t=this.getErrorMessages();return t.length?t[0]:null},getErrorMessages:function(){return!this.isValid()||this.showRequired()?this.state._externalError||this.state._validationError||[]:[]},isFormDisabled:function(){return this.context.formsy.isFormDisabled()},isValid:function(){return this.state._isValid},isPristine:function(){return this.state._isPristine},isFormSubmitted:function(){return this.state._formSubmitted},isRequired:function(){return!!this.props.required},showRequired:function(){return this.state._isRequired},showError:function(){return!this.showRequired()&&!this.isValid()},isValidValue:function(t){return this.context.formsy.isValidValue.call(null,this,t)}}}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";function i(t){return t.displayName||t.name||("string"==typeof t?t:"Component")}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o=e.React||n(1),s=n(635);t.exports=function(t){return o.createClass({displayName:"Formsy("+i(t)+")",mixins:[s],render:function(){var e=this.props.innerRef,n=r({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props);return e&&(n.ref=e),o.createElement(t,n)}})}}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=e.React||n(1),o=n(635);t.exports=function(){return function(t){return r.createClass({mixins:[o],render:function(){return r.createElement(t,i({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props))}})}}}).call(e,function(){return this}())},function(t,e,n){t.exports=n(639)},function(t,e,n){"use strict";var i=n(640),r={shouldComponentUpdate:function(t,e){return i(this,t,e)}};t.exports=r},function(t,e,n){"use strict";function i(t,e,n){return!r(t.props,e)||!r(t.state,n)}var r=n(641);t.exports=i},function(t,e){"use strict";function n(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function i(t,e){if(n(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(var s=0;s<i.length;s++)if(!r.call(e,i[s])||!n(t[i[s]],e[i[s]]))return!1;return!0}var r=Object.prototype.hasOwnProperty;t.exports=i},function(t,e,n){"use strict";var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=n(1),o=n(631),s=n(288),a=n(172),u=n(638),l=n(205)("Toggle"),c=r.createClass({displayName:"Toggle",mixins:[u,o.Mixin],propTypes:{className:r.PropTypes.string,dataTooltip:r.PropTypes.string,dataDelay:r.PropTypes.number,dataPosition:r.PropTypes.string,labelOn:r.PropTypes.string.isRequired,labelOff:r.PropTypes.string.isRequired,name:r.PropTypes.string.isRequired,style:r.PropTypes.object,disabled:r.PropTypes.bool,onChange:r.PropTypes.func,defaultChecked:r.PropTypes.bool,checked:r.PropTypes.bool},getDefaultProps:function(){return{style:{},defaultChecked:!1,dataDelay:100,disabled:!1}},changeValue:function(t){t.stopPropagation();var e=t.currentTarget.checked;l("change value: "+e),e!==this.getValue()&&this.setValue(e),this.props.onChange&&this.props.onChange(t.currentTarget.checked)},componentWillMount:function(){"checked"in this.props?this.setValue(this.props.checked):this.setValue(this.props.defaultChecked)},componentDidMount:function(){this.props.dataTooltip&&a(this.refs.toggle).tooltip()},componentWillReceiveProps:function(t){var e=this.props.checked;"checked"in t&&t.checked!==e&&this.setValue(t.checked)},componentDidUpdate:function(t){!t.dataTooltip&&this.props.dataTooltip&&a(this.refs.toggle).tooltip()},render:function(){var t=i({},this.props);delete t.defaultChecked;var e=s("switch",this.props.className,{tooltipped:!!this.props.dataTooltip}),n=this.getValue();return"boolean"==typeof n&&(n=n?1:0),r.createElement("div",{ref:"toggle",className:e,disabled:t.disabled,"data-delay":t.dataDelay,"data-position":t.dataPosition,style:t.style,"data-tooltip":t.dataTooltip},r.createElement("label",null,t.labelOff,r.createElement("input",{type:"checkbox",id:t.name,checked:!!n,disabled:t.disabled,onChange:this.changeValue}),r.createElement("span",{className:"lever"}),t.labelOn))}});t.exports=c},function(t,e,n){"use strict";var i=n(1),r=n(205)("map"),o=n(172),s=n(644),a=n(626),u={};"undefined"!=typeof window&&(u=n(646));var l=i.createClass({displayName:"InsetMap",propTypes:{id:i.PropTypes.string,bottom:i.PropTypes.string,attributionControl:i.PropTypes.bool,collapsed:i.PropTypes.bool},getDefaultProps:function(){return{id:"map",bottom:"30px",attributionControl:!1,collapsed:!1}},getInitialState:function(){return{collapsed:this.props.collapsed}},componentDidMount:function(){this.refs.insetMap&&o(this.refs.insetMap).show()},createInsetMap:function(t,e,n){var i=this,r=new u.Map({container:this.props.id+"_inset",style:n,zoom:0,interactive:!1,center:t,attributionControl:this.props.attributionControl});r.on("style.load",function(){r.fitBounds(e,{maxZoom:1.8,padding:10});var t=i.getGeoJSONFromBounds(e);t.features[0].properties={v:1};var n=s(t);n.properties={v:1},r.addSource("inset-bounds",{type:"geojson",data:t}),r.addSource("inset-centroid",{type:"geojson",data:n}),r.addLayer({id:"bounds",type:"line",source:"inset-bounds",paint:{"line-color":"rgb(244, 118, 144)","line-opacity":.75,"line-width":5}}),r.addLayer({id:"center",type:"circle",source:"inset-centroid",paint:{"circle-color":"rgb(244, 118, 144)","circle-opacity":.75}}),i.showInsetAsPoint()?(r.setFilter("center",["==","v",1]),r.setFilter("bounds",["==","v",2])):(r.setFilter("center",["==","v",2]),r.setFilter("bounds",["==","v",1]))}),i.insetMap=r},reloadInset:function(t){this.insetMap&&this.insetMap.setStyle(t)},fitBounds:function(t,e){this.insetMap&&this.insetMap.fitBounds(t,e)},toggleCollapsed:function(){this.state.collapsed?this.setState({collapsed:!1}):(this.setState({collapsed:!0}),o(this.refs.insetMap).show())},getInsetMap:function(){return this.insetMap},getGeoJSONFromBounds:function(t){var e=t.getNorthWest().toArray(),n=t.getNorthEast().toArray(),i=t.getSouthEast().toArray(),r=t.getSouthWest().toArray(),o=e;return{type:"FeatureCollection",features:[{type:"Feature",properties:{name:"bounds"},geometry:{type:"Polygon",coordinates:[[e,n,i,r,o]]}}]}},showInsetAsPoint:function(t){return!!(t&&t>9)},updateInsetGeomFromBounds:function(t,e){if(this.insetMap){var n=this.insetMap.getSource("inset-bounds"),i=this.insetMap.getSource("inset-centroid");if(n)try{var o=this.getGeoJSONFromBounds(t);o.features[0].properties={v:1},n.setData(o);var a=s(o);a.properties={v:1},i.setData(a),this.setState({insetGeoJSONData:n,insetGeoJSONCentroidData:i}),e<2.3?(this.insetMap.setFilter("center",["==","v",2]),this.insetMap.setFilter("bounds",["==","v",2])):this.showInsetAsPoint(e)?(this.insetMap.setFilter("center",["==","v",1]),this.insetMap.setFilter("bounds",["==","v",2])):(this.insetMap.setFilter("center",["==","v",2]),this.insetMap.setFilter("bounds",["==","v",1])),this.insetMap.fitBounds(t,{maxZoom:1.8,padding:10,animate:!1})}catch(t){r(t)}}},render:function(){return this.state.collapsed?i.createElement("div",{style:{position:"absolute",bottom:this.props.bottom,left:"5px",minHeight:"100px",maxHeight:"145px",minWidth:"100px",maxWidth:"145px",height:"25vw",width:"25vw"}},i.createElement("div",{id:this.props.id+"_inset",ref:"insetMap",style:{display:"none"}},i.createElement(a,{onClick:this.toggleCollapsed,color:"#212121",top:"auto",right:"auto",bottom:"5px",left:"5px",icon:"near_me"}))):i.createElement("div",{style:{position:"absolute",bottom:this.props.bottom,left:"5px",minHeight:"100px",maxHeight:"145px",minWidth:"100px",maxWidth:"145px",height:"25vw",width:"25vw"}},i.createElement("div",{id:this.props.id+"_inset",ref:"insetMap",className:"map z-depth-1",style:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"none",border:"0.5px solid rgba(222,222,222,50)",zIndex:1}}),i.createElement("i",{className:"material-icons",onClick:this.toggleCollapsed,style:{position:"absolute",top:"-5px",right:"-5px",height:"30px",lineHeight:"30px",width:"30px",color:"#212121",cursor:"pointer",textAlign:"center",zIndex:2,transform:"rotate(45deg)",fontSize:"18px"}},"arrow_downward"))}});t.exports=l},function(t,e,n){var i=n(645).coordEach,r=n(620).point;t.exports=function(t){var e=0,n=0,o=0;return i(t,function(t){e+=t[0],n+=t[1],o++},!0),r([e/o,n/o])}},,function(t,e){!function(n){if("object"==typeof e&&"undefined"!=typeof t)t.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.mapboxgl=n()}}(function(){var t;return function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t){var r=t[i].paintVertexArray;if(0!==r.length){var o=r.serialize(e),s=r.constructor.serialize();n[i]={array:o,type:s}}}return n}var r=t("./program_configuration"),o=function(t,e){this.vertexOffset=t,this.primitiveOffset=e,this.vertexLength=0,this.primitiveLength=0},s=function(t,e,n){var i=this;this.globalProperties={zoom:n};var o=t.layoutVertexArrayType;this.layoutVertexArray=new o;var s=t.elementArrayType;s&&(this.elementArray=new s);var a=t.elementArrayType2;a&&(this.elementArray2=new a),this.layerData={};for(var u=0,l=e;u<l.length;u+=1){var c=l[u],h=r.createDynamic(t.paintAttributes||[],c,n);i.layerData[c.id]={layer:c,programConfiguration:h,paintVertexArray:new h.PaintVertexArray}}this.segments=[],this.segments2=[]};s.prototype.prepareSegment=function(t){var e=this.segments[this.segments.length-1];return(!e||e.vertexLength+t>s.MAX_VERTEX_ARRAY_LENGTH)&&(e=new o(this.layoutVertexArray.length,this.elementArray.length),this.segments.push(e)),e},s.prototype.prepareSegment2=function(t){var e=this.segments2[this.segments2.length-1];return(!e||e.vertexLength+t>s.MAX_VERTEX_ARRAY_LENGTH)&&(e=new o(this.layoutVertexArray.length,this.elementArray2.length),this.segments2.push(e)),e},s.prototype.populatePaintArrays=function(t){var e=this;for(var n in this.layerData){var i=e.layerData[n];0!==i.paintVertexArray.bytesPerElement&&i.programConfiguration.populatePaintArray(i.layer,i.paintVertexArray,e.layoutVertexArray.length,e.globalProperties,t)}},s.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},s.prototype.serialize=function(t){return{layoutVertexArray:this.layoutVertexArray.serialize(t),elementArray:this.elementArray&&this.elementArray.serialize(t),elementArray2:this.elementArray2&&this.elementArray2.serialize(t),paintVertexArrays:i(this.layerData,t),segments:this.segments,segments2:this.segments2}},s.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,e.exports=s},{"./program_configuration":15}],2:[function(t,e,n){"use strict";var i=t("./array_group"),r=t("./buffer_group"),o=t("../util/util"),s=function(t,e){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,t.arrays?this.buffers=new r(e,t.layers,t.zoom,t.arrays):this.arrays=new i(e,t.layers,t.zoom)};s.prototype.populate=function(t,e){for(var n=this,i=0,r=t;i<r.length;i+=1){var o=r[i];n.layers[0].filter(o)&&(n.addFeature(o),e.featureIndex.insert(o,n.index))}},s.prototype.isEmpty=function(){return this.arrays.isEmpty()},s.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map(function(t){return t.id}),arrays:this.arrays.serialize(t)}},s.prototype.destroy=function(){this.buffers&&(this.buffers.destroy(),this.buffers=null)},e.exports=s,s.deserialize=function(t,e){if(e){for(var n={},i=0,r=t;i<r.length;i+=1){var s=r[i],a=s.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==a.length)for(var u=a[0].createBucket(o.extend({layers:a},s)),l=0,c=a;l<c.length;l+=1){var h=c[l];n[h.id]=u}}return n}}},{"../util/util":131,"./array_group":1,"./buffer_group":9}],3:[function(t,e,n){"use strict";function i(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}var r=t("../bucket"),o=t("../vertex_array_type"),s=t("../element_array_type"),a=t("../load_geometry"),u=t("../extent"),l={layoutVertexArrayType:o([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:s(),paintAttributes:[{property:"circle-color",type:"Uint8"},{property:"circle-radius",type:"Uint16",multiplier:10},{property:"circle-blur",type:"Uint16",multiplier:10},{property:"circle-opacity",type:"Uint8",multiplier:255},{property:"circle-stroke-color",type:"Uint8"},{property:"circle-stroke-width",type:"Uint16",multiplier:10},{property:"circle-stroke-opacity",type:"Uint8",multiplier:255}]},c=function(t){function e(e){t.call(this,e,l)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this.arrays,n=0,r=a(t);n<r.length;n+=1)for(var o=r[n],s=0,l=o;s<l.length;s+=1){var c=l[s],h=c.x,f=c.y;if(!(h<0||h>=u||f<0||f>=u)){var p=e.prepareSegment(4),d=p.vertexLength;i(e.layoutVertexArray,h,f,-1,-1),i(e.layoutVertexArray,h,f,1,-1),i(e.layoutVertexArray,h,f,1,1),i(e.layoutVertexArray,h,f,-1,1),e.elementArray.emplaceBack(d,d+1,d+2),e.elementArray.emplaceBack(d,d+3,d+2),p.vertexLength+=4,p.primitiveLength+=2}}e.populatePaintArrays(t.properties)},e}(r);e.exports=c},{"../bucket":2,"../element_array_type":10,"../extent":11,"../load_geometry":13,"../vertex_array_type":17}],4:[function(t,e,n){"use strict";var i=t("../bucket"),r=t("../vertex_array_type"),o=t("../element_array_type"),s=t("../load_geometry"),a=t("earcut"),u=t("../../util/classify_rings"),l=500,c={layoutVertexArrayType:r([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:o(3),elementArrayType2:o(2),
paintAttributes:[{property:"fill-color",type:"Uint8"},{property:"fill-outline-color",type:"Uint8"},{property:"fill-opacity",type:"Uint8",multiplier:255}]},h=function(t){function e(e){t.call(this,e,c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this.arrays,n=0,i=u(s(t),l);n<i.length;n+=1){for(var r=i[n],o=0,c=0,h=r;c<h.length;c+=1){var f=h[c];o+=f.length}for(var p=e.prepareSegment(o),d=p.vertexLength,g=[],m=[],y=0,v=r;y<v.length;y+=1){var _=v[y];if(0!==_.length){_!==r[0]&&m.push(g.length/2);var x=e.prepareSegment2(_.length),b=x.vertexLength;e.layoutVertexArray.emplaceBack(_[0].x,_[0].y),e.elementArray2.emplaceBack(b+_.length-1,b),g.push(_[0].x),g.push(_[0].y);for(var E=1;E<_.length;E++)e.layoutVertexArray.emplaceBack(_[E].x,_[E].y),e.elementArray2.emplaceBack(b+E-1,b+E),g.push(_[E].x),g.push(_[E].y);x.vertexLength+=_.length,x.primitiveLength+=_.length}}for(var w=a(g,m),S=0;S<w.length;S+=3)e.elementArray.emplaceBack(d+w[S],d+w[S+1],d+w[S+2]);p.vertexLength+=o,p.primitiveLength+=w.length/3}e.populatePaintArrays(t.properties)},e}(i);e.exports=h},{"../../util/classify_rings":115,"../bucket":2,"../element_array_type":10,"../load_geometry":13,"../vertex_array_type":17,earcut:143}],5:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,s,a){t.emplaceBack(e,n,2*Math.floor(i*d)+s,r*d*2,o*d*2,Math.round(a))}function r(t,e){return t.x===e.x&&(t.x<0||t.x>l)||t.y===e.y&&(t.y<0||t.y>l)}var o=t("../bucket"),s=t("../vertex_array_type"),a=t("../element_array_type"),u=t("../load_geometry"),l=t("../extent"),c=t("earcut"),h=t("../../util/classify_rings"),f=500,p={layoutVertexArrayType:s([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal",components:3,type:"Int16"},{name:"a_edgedistance",components:1,type:"Int16"}]),elementArrayType:a(3),paintAttributes:[{property:"fill-extrusion-base",type:"Uint16"},{property:"fill-extrusion-height",type:"Uint16"},{property:"fill-extrusion-color",type:"Uint8"}]},d=Math.pow(2,13),g=function(t){function e(e){t.call(this,e,p)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this.arrays,n=0,o=h(u(t),f);n<o.length;n+=1){for(var s=o[n],a=0,l=0,p=s;l<p.length;l+=1){var d=p[l];a+=d.length}for(var g=e.prepareSegment(5*a),m=[],y=[],v=[],_=0,x=s;_<x.length;_+=1){var b=x[_];if(0!==b.length){b!==s[0]&&y.push(m.length/2);for(var E=0,w=0;w<b.length;w++){var S=b[w];if(i(e.layoutVertexArray,S.x,S.y,0,0,1,1,0),v.push(g.vertexLength++),w>=1){var I=b[w-1];if(!r(S,I)){var C=S.sub(I)._perp()._unit();i(e.layoutVertexArray,S.x,S.y,C.x,C.y,0,0,E),i(e.layoutVertexArray,S.x,S.y,C.x,C.y,0,1,E),E+=I.dist(S),i(e.layoutVertexArray,I.x,I.y,C.x,C.y,0,0,E),i(e.layoutVertexArray,I.x,I.y,C.x,C.y,0,1,E);var T=g.vertexLength;e.elementArray.emplaceBack(T,T+1,T+2),e.elementArray.emplaceBack(T+1,T+2,T+3),g.vertexLength+=4,g.primitiveLength+=2}}m.push(S.x),m.push(S.y)}}}for(var N=c(m,y),L=0;L<N.length;L+=3)e.elementArray.emplaceBack(v[N[L]],v[N[L+1]],v[N[L+2]]);g.primitiveLength+=N.length/3}e.populatePaintArrays(t.properties)},e}(o);e.exports=g},{"../../util/classify_rings":115,"../bucket":2,"../element_array_type":10,"../extent":11,"../load_geometry":13,"../vertex_array_type":17,earcut:143}],6:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,s){t.emplaceBack(e.x<<1|i,e.y<<1|r,Math.round(l*n.x)+128,Math.round(l*n.y)+128,(0===o?0:o<0?-1:1)+1|(s*p&63)<<2,s*p>>6)}var r=t("../bucket"),o=t("../vertex_array_type"),s=t("../element_array_type"),a=t("../load_geometry"),u=t("../extent"),l=63,c=Math.cos(37.5*(Math.PI/180)),h=15,f=15,p=.5,d=Math.pow(2,f-1)/p,g={layoutVertexArrayType:o([{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}]),paintAttributes:[{property:"line-color",type:"Uint8"},{property:"line-blur",multiplier:10,type:"Uint8"},{property:"line-opacity",multiplier:10,type:"Uint8"},{property:"line-gap-width",multiplier:10,type:"Uint8",name:"a_gapwidth"},{property:"line-offset",multiplier:1,type:"Int8"}],elementArrayType:s()},m=function(t){function e(e){t.call(this,e,g)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this,n=this.layers[0].layout,i=n["line-join"],r=n["line-cap"],o=n["line-miter-limit"],s=n["line-round-limit"],u=0,l=a(t,f);u<l.length;u+=1){var c=l[u];e.addLine(c,t.properties,i,r,o,s)}},e.prototype.addLine=function(t,e,n,i,r,o){for(var s=this,a=t.length;a>2&&t[a-1].equals(t[a-2]);)a--;if(!(t.length<2)){"bevel"===n&&(r=1.05);var l=h*(u/(512*this.overscaling)),f=t[0],p=t[a-1],d=f.equals(p),g=this.arrays,m=g.prepareSegment(10*a);if(2!==a||!d){this.distance=0;var y,v,_,x,b,E,w,S=i,I=d?"butt":i,C=!0;this.e1=this.e2=this.e3=-1,d&&(y=t[a-2],b=f.sub(y)._unit()._perp());for(var T=0;T<a;T++)if(_=d&&T===a-1?t[1]:t[T+1],!_||!t[T].equals(_)){b&&(x=b),y&&(v=y),y=t[T],b=_?_.sub(y)._unit()._perp():x,x=x||b;var N=x.add(b);0===N.x&&0===N.y||N._unit();var L=N.x*b.x+N.y*b.y,M=0!==L?1/L:1/0,P=L<c&&v&&_;if(P&&T>0){var A=y.dist(v);if(A>2*l){var R=y.sub(y.sub(v)._mult(l/A)._round());s.distance+=R.dist(v),s.addCurrentVertex(R,s.distance,x.mult(1),0,0,!1,m),v=R}}var O=v&&_,F=O?n:_?S:I;if(O&&"round"===F&&(M<o?F="miter":M<=2&&(F="fakeround")),"miter"===F&&M>r&&(F="bevel"),"bevel"===F&&(M>2&&(F="flipbevel"),M<r&&(F="miter")),v&&(s.distance+=y.dist(v)),"miter"===F)N._mult(M),s.addCurrentVertex(y,s.distance,N,0,0,!1,m);else if("flipbevel"===F){if(M>100)N=b.clone().mult(-1);else{var D=x.x*b.y-x.y*b.x>0?-1:1,z=M*x.add(b).mag()/x.sub(b).mag();N._perp()._mult(z*D)}s.addCurrentVertex(y,s.distance,N,0,0,!1,m),s.addCurrentVertex(y,s.distance,N.mult(-1),0,0,!1,m)}else if("bevel"===F||"fakeround"===F){var k=x.x*b.y-x.y*b.x>0,B=-Math.sqrt(M*M-1);if(k?(w=0,E=B):(E=0,w=B),C||s.addCurrentVertex(y,s.distance,x,E,w,!1,m),"fakeround"===F){for(var j,V=Math.floor(8*(.5-(L-.5))),G=0;G<V;G++)j=b.mult((G+1)/(V+1))._add(x)._unit(),s.addPieSliceVertex(y,s.distance,j,k,m);s.addPieSliceVertex(y,s.distance,N,k,m);for(var U=V-1;U>=0;U--)j=x.mult((U+1)/(V+1))._add(b)._unit(),s.addPieSliceVertex(y,s.distance,j,k,m)}_&&s.addCurrentVertex(y,s.distance,b,-E,-w,!1,m)}else"butt"===F?(C||s.addCurrentVertex(y,s.distance,x,0,0,!1,m),_&&s.addCurrentVertex(y,s.distance,b,0,0,!1,m)):"square"===F?(C||(s.addCurrentVertex(y,s.distance,x,1,1,!1,m),s.e1=s.e2=-1),_&&s.addCurrentVertex(y,s.distance,b,-1,-1,!1,m)):"round"===F&&(C||(s.addCurrentVertex(y,s.distance,x,0,0,!1,m),s.addCurrentVertex(y,s.distance,x,1,1,!0,m),s.e1=s.e2=-1),_&&(s.addCurrentVertex(y,s.distance,b,-1,-1,!0,m),s.addCurrentVertex(y,s.distance,b,0,0,!1,m)));if(P&&T<a-1){var q=y.dist(_);if(q>2*l){var X=y.add(_.sub(y)._mult(l/q)._round());s.distance+=X.dist(y),s.addCurrentVertex(X,s.distance,b.mult(1),0,0,!1,m),y=X}}C=!1}g.populatePaintArrays(e)}}},e.prototype.addCurrentVertex=function(t,e,n,r,o,s,a){var u,l=s?1:0,c=this.arrays,h=c.layoutVertexArray,f=c.elementArray;u=n.clone(),r&&u._sub(n.perp()._mult(r)),i(h,t,u,l,0,r,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(f.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),o&&u._sub(n.perp()._mult(o)),i(h,t,u,l,1,-o,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(f.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>d/2&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,r,o,s,a))},e.prototype.addPieSliceVertex=function(t,e,n,r,o){var s=r?1:0;n=n.mult(r?-1:1);var a=this.arrays,u=a.layoutVertexArray,l=a.elementArray;i(u,t,n,0,s,0,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(l.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},e}(r);e.exports=m},{"../bucket":2,"../element_array_type":10,"../extent":11,"../load_geometry":13,"../vertex_array_type":17}],7:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,s,a,u,l,c){t.emplaceBack(e,n,Math.round(64*i),Math.round(64*r),o/4,s/4,10*(l||0),c,10*(a||0),10*Math.min(u||25,25))}function r(t,e,n,i,r){return t.emplaceBack(e.x,e.y,Math.round(n.x),Math.round(n.y),10*i,10*r)}var o=t("point-geometry"),s=t("../array_group"),a=t("../buffer_group"),u=t("../vertex_array_type"),l=t("../element_array_type"),c=t("../extent"),h=t("../../symbol/anchor"),f=t("../../symbol/get_anchors"),p=t("../../util/token"),d=t("../../symbol/quads"),g=t("../../symbol/shaping"),m=t("../../symbol/resolve_text"),y=t("../../symbol/mergelines"),v=t("../../symbol/clip_line"),_=t("../../util/util"),x=t("../../util/script_detection"),b=t("../load_geometry"),E=t("../../symbol/collision_feature"),w=t("../../util/find_pole_of_inaccessibility"),S=t("../../util/classify_rings"),I=t("vector-tile").VectorTileFeature,C=t("../../source/rtl_text_plugin"),T=g.shapeText,N=g.shapeIcon,L=g.WritingMode,M=d.getGlyphQuads,P=d.getIconQuads,A=l(),R=u([{name:"a_pos",components:2,type:"Int16"},{name:"a_offset",components:2,type:"Int16"},{name:"a_texture_pos",components:2,type:"Uint16"},{name:"a_data",components:4,type:"Uint8"}]),O={glyph:{layoutVertexArrayType:R,elementArrayType:A},icon:{layoutVertexArrayType:R,elementArrayType:A},collisionBox:{layoutVertexArrayType:u([{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}]),elementArrayType:l(2)}},F=function(t){var e=this;if(this.collisionBoxArray=t.collisionBoxArray,this.symbolQuadsArray=t.symbolQuadsArray,this.symbolInstancesArray=t.symbolInstancesArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.sdfIcons=t.sdfIcons,this.iconsNeedLinear=t.iconsNeedLinear,this.adjustedTextSize=t.adjustedTextSize,this.adjustedIconSize=t.adjustedIconSize,this.fontstack=t.fontstack,t.arrays){this.buffers={};for(var n in t.arrays)t.arrays[n]&&(e.buffers[n]=new a(O[n],t.layers,t.zoom,t.arrays[n]))}};F.prototype.populate=function(t,e){var n=this,i=this.layers[0].layout,r=i["text-field"],o=i["text-font"],s=i["icon-image"],a=r&&o,u=s;if(this.features=[],a||u){for(var l=e.iconDependencies,c=e.glyphDependencies,h=c[o]=c[o]||{},f=0;f<t.length;f++){var d=t[f];if(n.layers[0].filter(d)){var g;a&&(g=C.applyArabicShaping?C.applyArabicShaping(m(d,i)):m(d,i));var v;if(u&&(v=p(d.properties,s)),(g||v)&&(n.features.push({text:g,icon:v,index:f,sourceLayerIndex:d.sourceLayerIndex,geometry:b(d),properties:d.properties,type:I.types[d.type]}),v&&(l[v]=!0),g))for(var _=0;_<g.length;_++)h[g.charCodeAt(_)]=!0}}"line"===i["symbol-placement"]&&(this.features=y(this.features))}},F.prototype.isEmpty=function(){return this.arrays.icon.isEmpty()&&this.arrays.glyph.isEmpty()&&this.arrays.collisionBox.isEmpty()},F.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map(function(t){return t.id}),sdfIcons:this.sdfIcons,iconsNeedLinear:this.iconsNeedLinear,adjustedTextSize:this.adjustedTextSize,adjustedIconSize:this.adjustedIconSize,fontstack:this.fontstack,arrays:_.mapObject(this.arrays,function(e){return e.isEmpty()?null:e.serialize(t)})}},F.prototype.destroy=function(){this.buffers&&(this.buffers.icon&&this.buffers.icon.destroy(),this.buffers.glyph&&this.buffers.glyph.destroy(),this.buffers.collisionBox&&this.buffers.collisionBox.destroy(),this.buffers=null)},F.prototype.createArrays=function(){var t=this;this.arrays=_.mapObject(O,function(e){return new s(e,t.layers,t.zoom)})},F.prototype.prepare=function(t,e){var n=this;this.createArrays(),this.adjustedTextMaxSize=this.layers[0].getLayoutValue("text-size",{zoom:18}),this.adjustedTextSize=this.layers[0].getLayoutValue("text-size",{zoom:this.zoom+1}),this.adjustedIconMaxSize=this.layers[0].getLayoutValue("icon-size",{zoom:18}),this.adjustedIconSize=this.layers[0].getLayoutValue("icon-size",{zoom:this.zoom+1});var i=512*this.overscaling;this.tilePixelRatio=c/i,this.compareText={},this.iconsNeedLinear=!1,this.symbolInstancesStartIndex=this.symbolInstancesArray.length;var r=this.layers[0].layout,o=.5,s=.5;switch(r["text-anchor"]){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(r["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}for(var a="right"===r["text-justify"]?1:"left"===r["text-justify"]?0:.5,u=24,l=r["text-line-height"]*u,h="line"!==r["symbol-placement"]?r["text-max-width"]*u:0,f=r["text-letter-spacing"]*u,p=[r["text-offset"][0]*u,r["text-offset"][1]*u],d=this.fontstack=r["text-font"].join(","),g="map"===r["text-rotation-alignment"]&&"line"===r["symbol-placement"],m=0,y=this.features;m<y.length;m+=1){var v,b=y[m];if(b.text){var E=x.allowsVerticalWritingMode(b.text);v={},v[L.horizontal]=T(b.text,t[d],h,l,o,s,a,f,p,u,L.horizontal),v[L.vertical]=E&&g&&T(b.text,t[d],h,l,o,s,a,f,p,u,L.vertical)}else v={};var w;if(b.icon){var S=e[b.icon],I=n.layers[0].getLayoutValue("icon-offset",{zoom:n.zoom},b.properties);w=N(S,I),S&&(void 0===n.sdfIcons?n.sdfIcons=S.sdf:n.sdfIcons!==S.sdf&&_.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==S.pixelRatio?n.iconsNeedLinear=!0:0===r["icon-rotate"]&&n.layers[0].isLayoutValueFeatureConstant("icon-rotate")||(n.iconsNeedLinear=!0))}(v[L.horizontal]||w)&&n.addFeature(b,v,w)}this.symbolInstancesEndIndex=this.symbolInstancesArray.length},F.prototype.addFeature=function(t,e,n){var i=this,r=this.layers[0].layout,o=24,s=this.adjustedTextSize/o,a=void 0!==this.adjustedTextMaxSize?this.adjustedTextMaxSize:this.adjustedTextSize,u=this.tilePixelRatio*s,l=this.tilePixelRatio*a/o,p=this.tilePixelRatio*this.adjustedIconSize,d=this.tilePixelRatio*r["symbol-spacing"],g=r["symbol-avoid-edges"],m=r["text-padding"]*this.tilePixelRatio,y=r["icon-padding"]*this.tilePixelRatio,_=r["text-max-angle"]/180*Math.PI,x="map"===r["text-rotation-alignment"]&&"line"===r["symbol-placement"],b="map"===r["icon-rotation-alignment"]&&"line"===r["symbol-placement"],E=r["text-allow-overlap"]||r["icon-allow-overlap"]||r["text-ignore-placement"]||r["icon-ignore-placement"],I=r["symbol-placement"],C=d/2,T=function(r,o){var s=!(o.x<0||o.x>c||o.y<0||o.y>c);if(!g||s){var a=s||E;i.addSymbolInstance(o,r,e,n,i.layers[0],a,i.symbolInstancesArray.length,i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,u,m,x,p,y,b,{zoom:i.zoom},t.properties)}};if("line"===I)for(var N=0,M=v(t.geometry,0,0,c,c);N<M.length;N+=1)for(var P=M[N],A=f(P,d,_,e[L.vertical]||e[L.horizontal],n,o,l,i.overscaling,c),R=0,O=A;R<O.length;R+=1){var F=O[R],D=e[L.horizontal];D&&i.anchorIsTooClose(D.text,C,F)||T(P,F)}else if("Polygon"===t.type)for(var z=0,k=S(t.geometry,0);z<k.length;z+=1){var B=k[z],j=w(B,16);T(B[0],new h(j.x,j.y,0))}else if("LineString"===t.type)for(var V=0,G=t.geometry;V<G.length;V+=1){var U=G[V];T(U,new h(U[0].x,U[0].y,0))}else if("Point"===t.type)for(var q=0,X=t.geometry;q<X.length;q+=1)for(var Y=X[q],W=0,H=Y;W<H.length;W+=1){var Z=H[W];T([Z],new h(Z.x,Z.y,0))}},F.prototype.anchorIsTooClose=function(t,e,n){var i=this.compareText;if(t in i){for(var r=i[t],o=r.length-1;o>=0;o--)if(n.dist(r[o])<e)return!0}else i[t]=[];return i[t].push(n),!1},F.prototype.place=function(t,e){var n=this;this.createArrays();var i=this.layers[0].layout,r=t.maxScale,o="map"===i["text-rotation-alignment"]&&"line"===i["symbol-placement"],s="map"===i["icon-rotation-alignment"]&&"line"===i["symbol-placement"],a=i["text-allow-overlap"]||i["icon-allow-overlap"]||i["text-ignore-placement"]||i["icon-ignore-placement"];if(a){var u=this.symbolInstancesArray.toArray(this.symbolInstancesStartIndex,this.symbolInstancesEndIndex),l=t.angle,c=Math.sin(l),h=Math.cos(l);this.sortedSymbolInstances=u.sort(function(t,e){var n=c*t.anchorPointX+h*t.anchorPointY|0,i=c*e.anchorPointX+h*e.anchorPointY|0;return n-i||e.index-t.index})}for(var f=this.symbolInstancesStartIndex;f<this.symbolInstancesEndIndex;f++){var p=n.sortedSymbolInstances?n.sortedSymbolInstances[f-n.symbolInstancesStartIndex]:n.symbolInstancesArray.get(f),d={boxStartIndex:p.textBoxStartIndex,boxEndIndex:p.textBoxEndIndex},g={boxStartIndex:p.iconBoxStartIndex,boxEndIndex:p.iconBoxEndIndex},m=!(p.textBoxStartIndex===p.textBoxEndIndex),y=!(p.iconBoxStartIndex===p.iconBoxEndIndex),v=i["text-optional"]||!m,_=i["icon-optional"]||!y,x=m?t.placeCollisionFeature(d,i["text-allow-overlap"],i["symbol-avoid-edges"]):t.minScale,b=y?t.placeCollisionFeature(g,i["icon-allow-overlap"],i["symbol-avoid-edges"]):t.minScale;v||_?!_&&x?x=Math.max(b,x):!v&&b&&(b=Math.max(b,x)):b=x=Math.max(b,x),m&&(t.insertCollisionFeature(d,x,i["text-ignore-placement"]),x<=r&&n.addSymbols(n.arrays.glyph,p.glyphQuadStartIndex,p.glyphQuadEndIndex,x,i["text-keep-upright"],o,t.angle,p.writingModes)),y&&(t.insertCollisionFeature(g,b,i["icon-ignore-placement"]),b<=r&&n.addSymbols(n.arrays.icon,p.iconQuadStartIndex,p.iconQuadEndIndex,b,i["icon-keep-upright"],s,t.angle))}e&&this.addToDebugBuffers(t)},F.prototype.addSymbols=function(t,e,n,r,o,s,a,u){for(var l=this,c=t.elementArray,h=t.layoutVertexArray,f=this.zoom,p=Math.max(Math.log(r)/Math.LN2+f,0),d=e;d<n;d++){var g=l.symbolQuadsArray.get(d).SymbolQuad,m=(g.anchorAngle+a+Math.PI)%(2*Math.PI);if(u&L.vertical){if(s&&g.writingMode===L.vertical){if(o&&s&&m<=5*Math.PI/4||m>7*Math.PI/4)continue}else if(o&&s&&m<=3*Math.PI/4||m>5*Math.PI/4)continue}else if(o&&s&&(m<=Math.PI/2||m>3*Math.PI/2))continue;var y=g.tl,v=g.tr,_=g.bl,x=g.br,b=g.tex,E=g.anchorPoint,w=Math.max(f+Math.log(g.minScale)/Math.LN2,p),S=Math.min(f+Math.log(g.maxScale)/Math.LN2,25);if(!(S<=w)){w===p&&(w=0);var I=Math.round(g.glyphAngle/(2*Math.PI)*256),C=t.prepareSegment(4),T=C.vertexLength;i(h,E.x,E.y,y.x,y.y,b.x,b.y,w,S,p,I),i(h,E.x,E.y,v.x,v.y,b.x+b.w,b.y,w,S,p,I),i(h,E.x,E.y,_.x,_.y,b.x,b.y+b.h,w,S,p,I),i(h,E.x,E.y,x.x,x.y,b.x+b.w,b.y+b.h,w,S,p,I),c.emplaceBack(T,T+1,T+2),c.emplaceBack(T+1,T+2,T+3),C.vertexLength+=4,C.primitiveLength+=2}}},F.prototype.addToDebugBuffers=function(t){for(var e=this,n=this.arrays.collisionBox,i=n.layoutVertexArray,s=n.elementArray,a=-t.angle,u=t.yStretch,l=this.symbolInstancesStartIndex;l<this.symbolInstancesEndIndex;l++){var c=e.symbolInstancesArray.get(l);c.textCollisionFeature={boxStartIndex:c.textBoxStartIndex,boxEndIndex:c.textBoxEndIndex},c.iconCollisionFeature={boxStartIndex:c.iconBoxStartIndex,boxEndIndex:c.iconBoxEndIndex};for(var h=0;h<2;h++){var f=c[0===h?"textCollisionFeature":"iconCollisionFeature"];if(f)for(var p=f.boxStartIndex;p<f.boxEndIndex;p++){var d=e.collisionBoxArray.get(p),g=d.anchorPoint,m=new o(d.x1,d.y1*u)._rotate(a),y=new o(d.x2,d.y1*u)._rotate(a),v=new o(d.x1,d.y2*u)._rotate(a),_=new o(d.x2,d.y2*u)._rotate(a),x=Math.max(0,Math.min(25,e.zoom+Math.log(d.maxScale)/Math.LN2)),b=Math.max(0,Math.min(25,e.zoom+Math.log(d.placementScale)/Math.LN2)),E=n.prepareSegment(4),w=E.vertexLength;r(i,g,m,x,b),r(i,g,y,x,b),r(i,g,_,x,b),r(i,g,v,x,b),s.emplaceBack(w,w+1),s.emplaceBack(w+1,w+2),s.emplaceBack(w+2,w+3),s.emplaceBack(w+3,w),E.vertexLength+=4,E.primitiveLength+=4}}}},F.prototype.addSymbolInstance=function(t,e,n,i,r,o,s,a,u,l,c,h,f,p,d,g,m,y,v){var x,b,w,S=this,I=[];for(var C in n){var T=parseInt(C,10);n[T]&&(I=I.concat(o?M(t,n[T],h,e,r,p,T):[]),x=new E(a,e,t,u,l,c,n[T],h,f,p,!1))}var N=this.symbolQuadsArray.length;if(I&&I.length)for(var A=0;A<I.length;A++)S.addSymbolQuad(I[A]);var R=this.symbolQuadsArray.length,O=x?x.boxStartIndex:this.collisionBoxArray.length,D=x?x.boxEndIndex:this.collisionBoxArray.length;i&&(w=o?P(t,i,d,e,r,m,n[L.horizontal],y,v):[],b=new E(a,e,t,u,l,c,i,d,g,m,!0));var z=this.symbolQuadsArray.length;w&&1===w.length&&this.addSymbolQuad(w[0]);var k=this.symbolQuadsArray.length,B=b?b.boxStartIndex:this.collisionBoxArray.length,j=b?b.boxEndIndex:this.collisionBoxArray.length;k>F.MAX_QUADS&&_.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),R>F.MAX_QUADS&&_.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");var V=(n[L.vertical]?L.vertical:0)|(n[L.horizontal]?L.horizontal:0);return this.symbolInstancesArray.emplaceBack(O,D,B,j,N,R,z,k,t.x,t.y,s,V)},F.prototype.addSymbolQuad=function(t){return this.symbolQuadsArray.emplaceBack(t.anchorPoint.x,t.anchorPoint.y,t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y,t.tex.h,t.tex.w,t.tex.x,t.tex.y,t.anchorAngle,t.glyphAngle,t.maxScale,t.minScale,t.writingMode)},F.MAX_QUADS=65535,e.exports=F},{"../../source/rtl_text_plugin":51,"../../symbol/anchor":77,"../../symbol/clip_line":79,"../../symbol/collision_feature":81,"../../symbol/get_anchors":83,"../../symbol/mergelines":86,"../../symbol/quads":87,"../../symbol/resolve_text":88,"../../symbol/shaping":89,"../../util/classify_rings":115,"../../util/find_pole_of_inaccessibility":121,"../../util/script_detection":128,"../../util/token":130,"../../util/util":131,"../array_group":1,"../buffer_group":9,"../element_array_type":10,"../extent":11,"../load_geometry":13,"../vertex_array_type":17,"point-geometry":200,"vector-tile":209}],8:[function(t,e,n){"use strict";var i={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT"},r=function(t,e,n){this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.attributes=e.members,this.itemSize=e.bytesPerElement,this.type=n,this.arrayType=e};r.fromStructArray=function(t,e){return new r(t.serialize(),t.constructor.serialize(),e)},r.prototype.bind=function(t){var e=t[this.type];this.buffer?t.bindBuffer(e,this.buffer):(this.gl=t,this.buffer=t.createBuffer(),t.bindBuffer(e,this.buffer),t.bufferData(e,this.arrayBuffer,t.STATIC_DRAW),this.arrayBuffer=null)},r.prototype.setVertexAttribPointers=function(t,e,n){for(var r=this,o=0;o<this.attributes.length;o++){var s=r.attributes[o],a=e[s.name];void 0!==a&&t.vertexAttribPointer(a,s.components,t[i[s.type]],!1,r.arrayType.bytesPerElement,s.offset+(r.arrayType.bytesPerElement*n||0))}},r.prototype.destroy=function(){this.buffer&&this.gl.deleteBuffer(this.buffer)},r.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"},e.exports=r},{}],9:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("./buffer"),o=t("./program_configuration"),s=t("../render/vertex_array_object"),a=function(t,e,n,a){var u=this;this.layoutVertexBuffer=new r(a.layoutVertexArray,t.layoutVertexArrayType.serialize(),r.BufferType.VERTEX),a.elementArray&&(this.elementBuffer=new r(a.elementArray,t.elementArrayType.serialize(),r.BufferType.ELEMENT)),a.elementArray2&&(this.elementBuffer2=new r(a.elementArray2,t.elementArrayType2.serialize(),r.BufferType.ELEMENT)),this.layerData={};for(var l=0,c=e;l<c.length;l+=1){var h=c[l],f=a.paintVertexArrays&&a.paintVertexArrays[h.id],p=o.createDynamic(t.paintAttributes||[],h,n),d=f?new r(f.array,f.type,r.BufferType.VERTEX):null;u.layerData[h.id]={programConfiguration:p,paintVertexBuffer:d}}this.segments=a.segments,this.segments2=a.segments2;for(var g=0,m=[this.segments,this.segments2];g<m.length;g+=1)for(var y=m[g],v=0,_=y||[];v<_.length;v+=1){var x=_[v];x.vaos=i.mapObject(u.layerData,function(){return new s})}};a.prototype.destroy=function(){var t=this;this.layoutVertexBuffer.destroy(),this.elementBuffer&&this.elementBuffer.destroy(),this.elementBuffer2&&this.elementBuffer2.destroy();for(var e in this.layerData){var n=t.layerData[e].paintVertexBuffer;n&&n.destroy()}for(var i=0,r=[this.segments,this.segments2];i<r.length;i+=1)for(var o=r[i],s=0,a=o||[];s<a.length;s+=1){var u=a[s];for(var l in u.vaos)u.vaos[l].destroy()}},e.exports=a},{"../render/vertex_array_object":39,"../util/util":131,"./buffer":8,"./program_configuration":15}],10:[function(t,e,n){"use strict";function i(t){return r({members:[{type:"Uint16",name:"vertices",components:t||3}]})}var r=t("../util/struct_array");e.exports=i},{"../util/struct_array":129}],11:[function(t,e,n){"use strict";e.exports=8192},{}],12:[function(t,e,n){"use strict";function i(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function r(t,e){return e-t}function o(t){return t["line-gap-width"]>0?t["line-gap-width"]+2*t["line-width"]:t["line-width"]}function s(t,e,n,i,r){if(!e[0]&&!e[1])return t;e=u.convert(e),"viewport"===n&&e._rotate(-i);for(var o=[],s=0;s<t.length;s++){for(var a=t[s],l=[],c=0;c<a.length;c++)l.push(a[c].sub(e._mult(r)));o.push(l)}return o}function a(t,e){for(var n=[],i=new u(0,0),r=0;r<t.length;r++){for(var o=t[r],s=[],a=0;a<o.length;a++){var l=o[a-1],c=o[a],h=o[a+1],f=0===a?i:c.sub(l)._unit()._perp(),p=a===o.length-1?i:h.sub(c)._unit()._perp(),d=f._add(p)._unit(),g=d.x*p.x+d.y*p.y;d._mult(1/g),s.push(d._mult(e)._add(c))}n.push(s)}return n}var u=t("point-geometry"),l=t("./load_geometry"),c=t("./extent"),h=t("feature-filter"),f=t("../util/struct_array"),p=t("grid-index"),d=t("../util/dictionary_coder"),g=t("vector-tile"),m=t("pbf"),y=t("../util/vectortile_to_geojson"),v=t("../util/util").arraysIntersect,_=t("../util/intersection_tests"),x=_.multiPolygonIntersectsBufferedMultiPoint,b=_.multiPolygonIntersectsMultiPolygon,E=_.multiPolygonIntersectsBufferedMultiLine,w=f({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]}),S=function(t,e,n){if(t.grid){var i=t,r=e;t=i.coord,e=i.overscaling,this.grid=new p(i.grid),this.featureIndexArray=new w(i.featureIndexArray),this.rawTileData=r,this.bucketLayerIDs=i.bucketLayerIDs}else this.grid=new p(c,16,0),this.featureIndexArray=new w;this.coord=t,this.overscaling=e,this.x=t.x,this.y=t.y,this.z=t.z-Math.log(e)/Math.LN2,this.setCollisionTile(n)};S.prototype.insert=function(t,e){var n=this,i=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(t.index,t.sourceLayerIndex,e);for(var r=l(t),o=0;o<r.length;o++){for(var s=r[o],a=[1/0,1/0,-(1/0),-(1/0)],u=0;u<s.length;u++){var c=s[u];a[0]=Math.min(a[0],c.x),a[1]=Math.min(a[1],c.y),a[2]=Math.max(a[2],c.x),a[3]=Math.max(a[3],c.y)}n.grid.insert(i,a[0],a[1],a[2],a[3])}},S.prototype.setCollisionTile=function(t){this.collisionTile=t},S.prototype.serialize=function(t){var e=this.grid.toArrayBuffer();return t&&t.push(e),{coord:this.coord,overscaling:this.overscaling,grid:e,featureIndexArray:this.featureIndexArray.serialize(t),bucketLayerIDs:this.bucketLayerIDs}},S.prototype.query=function(t,e){this.vtLayers||(this.vtLayers=new g.VectorTile(new m(this.rawTileData)).layers,this.sourceLayerCoder=new d(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));var n={},s=t.params||{},a=c/t.tileSize/t.scale,l=h(s.filter),f=0;for(var p in e){var y=e[p],v=y.paint,_=0;"line"===y.type?_=o(v)/2+Math.abs(v["line-offset"])+i(v["line-translate"]):"fill"===y.type?_=i(v["fill-translate"]):"fill-extrusion"===y.type?_=i(v["fill-extrusion-translate"]):"circle"===y.type&&(_=v["circle-radius"]+i(v["circle-translate"])),f=Math.max(f,_*a)}for(var x=t.queryGeometry.map(function(t){return t.map(function(t){return new u(t.x,t.y)})}),b=1/0,E=1/0,w=-(1/0),S=-(1/0),I=0;I<x.length;I++)for(var C=x[I],T=0;T<C.length;T++){var N=C[T];b=Math.min(b,N.x),E=Math.min(E,N.y),w=Math.max(w,N.x),S=Math.max(S,N.y)}var L=this.grid.query(b-f,E-f,w+f,S+f);L.sort(r),this.filterMatching(n,L,this.featureIndexArray,x,l,s.layers,e,t.bearing,a);var M=this.collisionTile.queryRenderedSymbols(x,t.scale);return M.sort(),this.filterMatching(n,M,this.collisionTile.collisionBoxArray,x,l,s.layers,e,t.bearing,a),n},S.prototype.filterMatching=function(t,e,n,i,r,u,c,h,f){for(var p,d=this,g=0;g<e.length;g++){var m=e[g];if(m!==p){p=m;var _=n.get(m),w=d.bucketLayerIDs[_.bucketIndex];if(!u||v(u,w)){var S=d.sourceLayerCoder.decode(_.sourceLayerIndex),I=d.vtLayers[S],C=I.feature(_.featureIndex);if(r(C))for(var T=null,N=0;N<w.length;N++){var L=w[N];if(!(u&&u.indexOf(L)<0)){var M=c[L];if(M){var P;if("symbol"!==M.type){T||(T=l(C));var A=M.paint;if("line"===M.type){P=s(i,A["line-translate"],A["line-translate-anchor"],h,f);var R=o(A)/2*f;if(A["line-offset"]&&(T=a(T,A["line-offset"]*f)),!E(P,T,R))continue}else if("fill"===M.type||"fill-extrusion"===M.type){var O=M.type;if(P=s(i,A[O+"-translate"],A[O+"-translate-anchor"],h,f),!b(P,T))continue}else if("circle"===M.type){P=s(i,A["circle-translate"],A["circle-translate-anchor"],h,f);var F=A["circle-radius"]*f;if(!x(P,T,F))continue}}var D=new y(C,d.z,d.x,d.y);D.layer=M.serialize();var z=t[L];void 0===z&&(z=t[L]=[]),z.push(D)}}}}}}},e.exports=S},{"../util/dictionary_coder":117,"../util/intersection_tests":124,"../util/struct_array":129,"../util/util":131,"../util/vectortile_to_geojson":132,"./extent":11,"./load_geometry":13,"feature-filter":145,"grid-index":157,pbf:198,"point-geometry":200,"vector-tile":209}],13:[function(t,e,n){"use strict";function i(t){return{min:-1*Math.pow(2,t-1),max:Math.pow(2,t-1)-1}}var r=t("../util/util"),o=t("./extent"),s={15:i(15),16:i(16)};e.exports=function(t,e){for(var n=s[e||16],i=o/t.extent,a=t.loadGeometry(),u=0;u<a.length;u++)for(var l=a[u],c=0;c<l.length;c++){var h=l[c];h.x=Math.round(h.x*i),h.y=Math.round(h.y*i),(h.x<n.min||h.x>n.max||h.y<n.min||h.y>n.max)&&r.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return a}},{"../util/util":131,"./extent":11}],14:[function(t,e,n){"use strict";var i=t("../util/struct_array"),r=i({members:[{name:"a_pos",type:"Int16",components:2}]});e.exports=r},{"../util/struct_array":129}],15:[function(t,e,n){"use strict";function i(t,e,n,i){if(!t.zoomStops)return e.getPaintValue(t.property,n,i);var r=t.zoomStops.map(function(r){return e.getPaintValue(t.property,s.extend({},n,{zoom:r}),i)});return 1===r.length?r[0]:r}function r(t,e){var n=t.property.replace(e.type+"-","").replace(/-/g,"_"),i="color"===e._paintSpecifications[t.property].type;return s.extend({name:"a_"+n,components:i?4:1,multiplier:i?255:1},t)}var o=t("./vertex_array_type"),s=t("../util/util"),a=function(){this.attributes=[],this.uniforms=[],this.interpolationUniforms=[],this.pragmas={vertex:{},fragment:{}},this.cacheKey=""};a.createDynamic=function(t,e,n){for(var i=new a,s=0,u=t;s<u.length;s+=1){var l=u[s],c=r(l,e),h=c.name.slice(2);e.isPaintValueFeatureConstant(c.property)?i.addZoomAttribute(h,c):e.isPaintValueZoomConstant(c.property)?i.addPropertyAttribute(h,c):i.addZoomAndPropertyAttribute(h,c,e,n)}return i.PaintVertexArray=o(i.attributes),i},a.createStatic=function(t){for(var e=new a,n=0,i=t;n<i.length;n+=1){var r=i[n];e.addUniform(r,"u_"+r)}return e},a.prototype.addUniform=function(t,e){var n=this.getPragmas(t);n.define.push("uniform {precision} {type} "+e+";"),n.initialize.push("{precision} {type} "+t+" = "+e+";"),this.cacheKey+="/u_"+t},a.prototype.addZoomAttribute=function(t,e){this.uniforms.push(e),this.addUniform(t,e.name)},a.prototype.addPropertyAttribute=function(t,e){var n=this.getPragmas(t);this.attributes.push(e),n.define.push("varying {precision} {type} "+t+";"),n.vertex.define.push("attribute {precision} {type} "+e.name+";"),n.vertex.initialize.push(t+" = "+e.name+" / "+e.multiplier+".0;"),this.cacheKey+="/a_"+t},a.prototype.addZoomAndPropertyAttribute=function(t,e,n,i){var r=this,o=this.getPragmas(t);o.define.push("varying {precision} {type} "+t+";");for(var a=0,u=n.getPaintValueStopZoomLevels(e.property);a<u.length&&u[a]<i;)a++;var l=Math.max(0,Math.min(u.length-4,a-2)),c="u_"+t+"_t";o.vertex.define.push("uniform lowp float "+c+";"),this.interpolationUniforms.push({name:c,property:e.property,stopOffset:l});for(var h=[],f=0;f<4;f++)h.push(u[Math.min(l+f,u.length-1)]);var p=[];if(1===e.components)this.attributes.push(s.extend({},e,{components:4,zoomStops:h})),o.vertex.define.push("attribute {precision} vec4 "+e.name+";"),p.push(e.name);else for(var d=0;d<4;d++){var g=e.name+d;p.push(g),r.attributes.push(s.extend({},e,{name:g,zoomStops:[h[d]]})),o.vertex.define.push("attribute {precision} {type} "+g+";")}o.vertex.initialize.push(t+" = evaluate_zoom_function_"+e.components+"(            "+p.join(", ")+", "+c+") / "+e.multiplier+".0;"),this.cacheKey+="/z_"+t},a.prototype.getPragmas=function(t){return this.pragmas[t]||(this.pragmas[t]={define:[],initialize:[]},this.pragmas[t].fragment={define:[],initialize:[]},this.pragmas[t].vertex={define:[],initialize:[]}),this.pragmas[t]},a.prototype.applyPragmas=function(t,e){
var n=this;return t.replace(/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,function(t,i,r,o,s){return n.pragmas[s][i].concat(n.pragmas[s][e][i]).join("\n").replace(/{type}/g,o).replace(/{precision}/g,r)})},a.prototype.populatePaintArray=function(t,e,n,r,o){var s=e.length;e.resize(n);for(var a=0,u=this.attributes;a<u.length;a+=1)for(var l=u[a],c=i(l,t,r,o),h=s;h<n;h++){var f=e.get(h);if(4===l.components)for(var p=0;p<4;p++)f[l.name+p]=c[p]*l.multiplier;else f[l.name]=c*l.multiplier}},a.prototype.setUniforms=function(t,e,n,i){for(var r=0,o=this.uniforms;r<o.length;r+=1){var s=o[r],a=n.getPaintValue(s.property,i);4===s.components?t.uniform4fv(e[s.name],a):t.uniform1f(e[s.name],a)}for(var u=0,l=this.interpolationUniforms;u<l.length;u+=1){var c=l[u],h=n.getPaintInterpolationT(c.property,i);t.uniform1f(e[c.name],Math.max(0,Math.min(4,h-c.stopOffset)))}},e.exports=a},{"../util/util":131,"./vertex_array_type":17}],16:[function(t,e,n){"use strict";var i=t("../util/struct_array"),r=i({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]});e.exports=r},{"../util/struct_array":129}],17:[function(t,e,n){"use strict";function i(t){return r({members:t,alignment:4})}var r=t("../util/struct_array");e.exports=i},{"../util/struct_array":129}],18:[function(t,e,n){"use strict";var i=function(t,e,n){this.column=t,this.row=e,this.zoom=n};i.prototype.clone=function(){return new i(this.column,this.row,this.zoom)},i.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},i.prototype.sub=function(t){return this.clone()._sub(t)},i.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},i.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this},e.exports=i},{}],19:[function(t,e,n){"use strict";var i=t("../util/util").wrap,r=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};r.prototype.wrap=function(){return new r(i(this.lng,-180,180),this.lat)},r.prototype.toArray=function(){return[this.lng,this.lat]},r.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},r.convert=function(t){if(t instanceof r)return t;if(t&&t.hasOwnProperty("lng")&&t.hasOwnProperty("lat"))return new r(t.lng,t.lat);if(Array.isArray(t)&&2===t.length)return new r(t[0],t[1]);throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},e.exports=r},{"../util/util":131}],20:[function(t,e,n){"use strict";var i=t("./lng_lat"),r=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};r.prototype.setNorthEast=function(t){return this._ne=i.convert(t),this},r.prototype.setSouthWest=function(t){return this._sw=i.convert(t),this},r.prototype.extend=function(t){var e,n,o=this._sw,s=this._ne;if(t instanceof i)e=t,n=t;else{if(!(t instanceof r))return Array.isArray(t)?t.every(Array.isArray)?this.extend(r.convert(t)):this.extend(i.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return o||s?(o.lng=Math.min(e.lng,o.lng),o.lat=Math.min(e.lat,o.lat),s.lng=Math.max(n.lng,s.lng),s.lat=Math.max(n.lat,s.lat)):(this._sw=new i(e.lng,e.lat),this._ne=new i(n.lng,n.lat)),this},r.prototype.getCenter=function(){return new i((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},r.prototype.getSouthWest=function(){return this._sw},r.prototype.getNorthEast=function(){return this._ne},r.prototype.getNorthWest=function(){return new i(this.getWest(),this.getNorth())},r.prototype.getSouthEast=function(){return new i(this.getEast(),this.getSouth())},r.prototype.getWest=function(){return this._sw.lng},r.prototype.getSouth=function(){return this._sw.lat},r.prototype.getEast=function(){return this._ne.lng},r.prototype.getNorth=function(){return this._ne.lat},r.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},r.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},r.convert=function(t){return!t||t instanceof r?t:new r(t)},e.exports=r},{"./lng_lat":19}],21:[function(t,e,n){"use strict";var i=t("./lng_lat"),r=t("point-geometry"),o=t("./coordinate"),s=t("../util/util"),a=t("../util/interpolate"),u=t("../source/tile_coord"),l=t("../data/extent"),c=t("@mapbox/gl-matrix"),h=c.vec4,f=c.mat4,p=c.mat2,d=function(t,e,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new i(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0},g={minZoom:{},maxZoom:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};g.minZoom.get=function(){return this._minZoom},g.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},g.maxZoom.get=function(){return this._maxZoom},g.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},g.worldSize.get=function(){return this.tileSize*this.scale},g.centerPoint.get=function(){return this.size._div(2)},g.size.get=function(){return new r(this.width,this.height)},g.bearing.get=function(){return-this.angle/Math.PI*180},g.bearing.set=function(t){var e=-s.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=p.create(),p.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},g.pitch.get=function(){return this._pitch/Math.PI*180},g.pitch.set=function(t){var e=s.clamp(t,0,60)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},g.fov.get=function(){return this._fov/Math.PI*180},g.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},g.zoom.get=function(){return this._zoom},g.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},g.center.get=function(){return this._center},g.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},d.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},d.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),n=e;if(e<t.minzoom)return[];e>t.maxzoom&&(e=t.maxzoom);var i=this.pointCoordinate(this.centerPoint,e),o=new r(i.column-.5,i.row-.5),s=[this.pointCoordinate(new r(0,0),e),this.pointCoordinate(new r(this.width,0),e),this.pointCoordinate(new r(this.width,this.height),e),this.pointCoordinate(new r(0,this.height),e)];return u.cover(e,s,t.reparseOverscaled?n:e,this._renderWorldCopies).sort(function(t,e){return o.dist(t)-o.dist(e)})},d.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},g.unmodified.get=function(){return this._unmodified},d.prototype.zoomScale=function(t){return Math.pow(2,t)},d.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},d.prototype.project=function(t){return new r(this.lngX(t.lng),this.latY(t.lat))},d.prototype.unproject=function(t){return new i(this.xLng(t.x),this.yLat(t.y))},g.x.get=function(){return this.lngX(this.center.lng)},g.y.get=function(){return this.latY(this.center.lat)},g.point.get=function(){return new r(this.x,this.y)},d.prototype.lngX=function(t){return(180+t)*this.worldSize/360},d.prototype.latY=function(t){var e=180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360));return(180-e)*this.worldSize/360},d.prototype.xLng=function(t){return 360*t/this.worldSize-180},d.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},d.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n))},d.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},d.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},d.prototype.locationCoordinate=function(t){return new o(this.lngX(t.lng)/this.tileSize,this.latY(t.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},d.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new i(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},d.prototype.pointCoordinate=function(t,e){void 0===e&&(e=this.tileZoom);var n=0,i=[t.x,t.y,0,1],r=[t.x,t.y,1,1];h.transformMat4(i,i,this.pixelMatrixInverse),h.transformMat4(r,r,this.pixelMatrixInverse);var s=i[3],u=r[3],l=i[0]/s,c=r[0]/u,f=i[1]/s,p=r[1]/u,d=i[2]/s,g=r[2]/u,m=d===g?0:(n-d)/(g-d);return new o(a(l,c,m)/this.tileSize,a(f,p,m)/this.tileSize,this.zoom)._zoomTo(e)},d.prototype.coordinatePoint=function(t){var e=t.zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return h.transformMat4(n,n,this.pixelMatrix),new r(n[0]/n[3],n[1]/n[3])},d.prototype.calculatePosMatrix=function(t,e){var n=t.toCoordinate(e),i=this.worldSize/this.zoomScale(n.zoom),r=f.identity(new Float64Array(16));return f.translate(r,r,[n.column*i,n.row*i,0]),f.scale(r,r,[i/l,i/l,1]),f.multiply(r,this.projMatrix,r),new Float32Array(r)},d.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,n,i,o,s,a,u,l=this.size,c=this._unmodified;this.latRange&&(t=this.latY(this.latRange[1]),e=this.latY(this.latRange[0]),o=e-t<l.y?l.y/(e-t):0),this.lngRange&&(n=this.lngX(this.lngRange[0]),i=this.lngX(this.lngRange[1]),s=i-n<l.x?l.x/(i-n):0);var h=Math.max(s||0,o||0);if(h)return this.center=this.unproject(new r(s?(i+n)/2:this.x,o?(e+t)/2:this.y)),this.zoom+=this.scaleZoom(h),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var f=this.y,p=l.y/2;f-p<t&&(u=t+p),f+p>e&&(u=e-p)}if(this.lngRange){var d=this.x,g=l.x/2;d-g<n&&(a=n+g),d+g>i&&(a=i-g)}void 0===a&&void 0===u||(this.center=this.unproject(new r(void 0!==a?a:this.x,void 0!==u?u:this.y))),this._unmodified=c,this._constraining=!1}},d.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,n=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),i=Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance,r=1.01*i,o=new Float64Array(16);f.perspective(o,this._fov,this.width/this.height,1,r),f.scale(o,o,[1,-1,1]),f.translate(o,o,[0,0,-this.cameraToCenterDistance]),f.rotateX(o,o,this._pitch),f.rotateZ(o,o,this.angle),f.translate(o,o,[-this.x,-this.y,0]);var s=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));if(f.scale(o,o,[1,1,s,1]),this.projMatrix=o,o=f.create(),f.scale(o,o,[this.width/2,-this.height/2,1]),f.translate(o,o,[1,-1,0]),this.pixelMatrix=f.multiply(new Float64Array(16),o,this.projMatrix),o=f.invert(new Float64Array(16),this.pixelMatrix),!o)throw new Error("failed to invert matrix");this.pixelMatrixInverse=o}},Object.defineProperties(d.prototype,g),e.exports=d},{"../data/extent":11,"../source/tile_coord":55,"../util/interpolate":123,"../util/util":131,"./coordinate":18,"./lng_lat":19,"@mapbox/gl-matrix":135,"point-geometry":200}],22:[function(t,e,n){"use strict";var i,r=t("./util/worker_pool");e.exports=function(){return i||(i=new r),i}},{"./util/worker_pool":134}],23:[function(t,e,n){"use strict";var i={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};e.exports=function(t,e,n,r){r=r||1;var o,s,a,u,l,c,h,f,p=[];for(o=0,s=t.length;o<s;o++)if(l=i[t[o]]){for(f=null,a=0,u=l[1].length;a<u;a+=2)l[1][a]===-1&&l[1][a+1]===-1?f=null:(c=e+l[1][a]*r,h=n-l[1][a+1]*r,f&&p.push(f.x,f.y,c,h),f={x:c,y:h});e+=l[0]*r}return p}},{}],24:[function(t,e,n){"use strict";var i=t("./util/browser"),r=e.exports={};r.version=t("../package.json").version,r.workerCount=Math.max(Math.floor(i.hardwareConcurrency/2),1),r.Map=t("./ui/map"),r.NavigationControl=t("./ui/control/navigation_control"),r.GeolocateControl=t("./ui/control/geolocate_control"),r.AttributionControl=t("./ui/control/attribution_control"),r.ScaleControl=t("./ui/control/scale_control"),r.Popup=t("./ui/popup"),r.Marker=t("./ui/marker"),r.Style=t("./style/style"),r.LngLat=t("./geo/lng_lat"),r.LngLatBounds=t("./geo/lng_lat_bounds"),r.Point=t("point-geometry"),r.Evented=t("./util/evented"),r.util=t("./util/util"),r.supported=t("./util/browser").supported;var o=t("./util/ajax");r.util.getJSON=o.getJSON,r.util.getArrayBuffer=o.getArrayBuffer;var s=t("./util/config");r.config=s;var a=t("./source/rtl_text_plugin");r.setRTLTextPlugin=a.setRTLTextPlugin,Object.defineProperty(r,"accessToken",{get:function(){return s.ACCESS_TOKEN},set:function(t){s.ACCESS_TOKEN=t}})},{"../package.json":218,"./geo/lng_lat":19,"./geo/lng_lat_bounds":20,"./source/rtl_text_plugin":51,"./style/style":65,"./ui/control/attribution_control":95,"./ui/control/geolocate_control":96,"./ui/control/navigation_control":97,"./ui/control/scale_control":98,"./ui/map":107,"./ui/marker":108,"./ui/popup":109,"./util/ajax":111,"./util/browser":112,"./util/config":116,"./util/evented":120,"./util/util":131,"point-geometry":200}],25:[function(t,e,n){"use strict";function i(t,e,n){var i=t.gl,o=t.transform,s=o.tileSize,a=n.paint["background-color"],u=n.paint["background-pattern"],l=n.paint["background-opacity"],c=!u&&1===a[3]&&1===l;if(t.isOpaquePass===c){i.disable(i.STENCIL_TEST),t.setDepthSublayer(0);var h;u?(h=t.useProgram("fillPattern",t.basicFillProgramConfiguration),r.prepare(u,t,h),t.tileExtentPatternVAO.bind(i,h,t.tileExtentBuffer)):(h=t.useProgram("fill",t.basicFillProgramConfiguration),i.uniform4fv(h.u_color,a),t.tileExtentVAO.bind(i,h,t.tileExtentBuffer)),i.uniform1f(h.u_opacity,l);for(var f=o.coveringTiles({tileSize:s}),p=0,d=f;p<d.length;p+=1){var g=d[p];u&&r.setTile({coord:g,tileSize:s},t,h),i.uniformMatrix4fv(h.u_matrix,!1,t.transform.calculatePosMatrix(g)),i.drawArrays(i.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}var r=t("./pattern");e.exports=i},{"./pattern":37}],26:[function(t,e,n){"use strict";function i(t,e,n,i){if(!t.isOpaquePass){var o=t.gl;t.setDepthSublayer(0),t.depthMask(!1),o.disable(o.STENCIL_TEST);for(var s=0;s<i.length;s++){var a=i[s],u=e.getTile(a),l=u.getBucket(n);if(l){var c=l.buffers,h=c.layerData[n.id],f=h.programConfiguration,p=t.useProgram("circle",f);f.setUniforms(o,p,n,{zoom:t.transform.zoom}),"map"===n.paint["circle-pitch-scale"]?(o.uniform1i(p.u_scale_with_map,!0),o.uniform2f(p.u_extrude_scale,t.transform.pixelsToGLUnits[0]*t.transform.cameraToCenterDistance,t.transform.pixelsToGLUnits[1]*t.transform.cameraToCenterDistance)):(o.uniform1i(p.u_scale_with_map,!1),o.uniform2fv(p.u_extrude_scale,t.transform.pixelsToGLUnits)),o.uniform1f(p.u_devicepixelratio,r.devicePixelRatio),o.uniformMatrix4fv(p.u_matrix,!1,t.translatePosMatrix(a.posMatrix,u,n.paint["circle-translate"],n.paint["circle-translate-anchor"]));for(var d=0,g=c.segments;d<g.length;d+=1){var m=g[d];m.vaos[n.id].bind(o,p,c.layoutVertexBuffer,c.elementBuffer,h.paintVertexBuffer,m.vertexOffset),o.drawElements(o.TRIANGLES,3*m.primitiveLength,o.UNSIGNED_SHORT,3*m.primitiveOffset*2)}}}}}var r=t("../util/browser");e.exports=i},{"../util/browser":112}],27:[function(t,e,n){"use strict";function i(t,e,n,i){var r=t.gl;r.enable(r.STENCIL_TEST);for(var o=t.useProgram("collisionBox"),s=0;s<i.length;s++){var a=i[s],u=e.getTile(a),l=u.getBucket(n);if(l){var c=l.buffers.collisionBox;if(c){r.uniformMatrix4fv(o.u_matrix,!1,a.posMatrix),t.enableTileClippingMask(a),t.lineWidth(1),r.uniform1f(o.u_scale,Math.pow(2,t.transform.zoom-u.coord.z)),r.uniform1f(o.u_zoom,10*t.transform.zoom),r.uniform1f(o.u_maxzoom,10*(u.coord.z+1));for(var h=0,f=c.segments;h<f.length;h+=1){var p=f[h];p.vaos[n.id].bind(r,o,c.layoutVertexBuffer,c.elementBuffer,null,p.vertexOffset),r.drawElements(r.LINES,2*p.primitiveLength,r.UNSIGNED_SHORT,2*p.primitiveOffset*2)}}}}}e.exports=i},{}],28:[function(t,e,n){"use strict";function i(t,e,n){for(var i=0;i<n.length;i++)r(t,e,n[i])}function r(t,e,n){var i=t.gl;i.disable(i.STENCIL_TEST),t.lineWidth(1*s.devicePixelRatio);var r=n.posMatrix,f=t.useProgram("debug");i.uniformMatrix4fv(f.u_matrix,!1,r),i.uniform4f(f.u_color,1,0,0,1),t.debugVAO.bind(i,f,t.debugBuffer),i.drawArrays(i.LINE_STRIP,0,t.debugBuffer.length);for(var p=o(n.toString(),50,200,5),d=new h,g=0;g<p.length;g+=2)d.emplaceBack(p[g],p[g+1]);var m=l.fromStructArray(d,l.BufferType.VERTEX),y=new c;y.bind(i,f,m),i.uniform4f(f.u_color,1,1,1,1);for(var v=e.getTile(n).tileSize,_=u/(Math.pow(2,t.transform.zoom-n.z)*v),x=[[-1,-1],[-1,1],[1,-1],[1,1]],b=0;b<x.length;b++){var E=x[b];i.uniformMatrix4fv(f.u_matrix,!1,a.translate([],r,[_*E[0],_*E[1],0])),i.drawArrays(i.LINES,0,m.length)}i.uniform4f(f.u_color,0,0,0,1),i.uniformMatrix4fv(f.u_matrix,!1,r),i.drawArrays(i.LINES,0,m.length)}var o=t("../lib/debugtext"),s=t("../util/browser"),a=t("@mapbox/gl-matrix").mat4,u=t("../data/extent"),l=t("../data/buffer"),c=t("./vertex_array_object"),h=t("../data/pos_array");e.exports=i},{"../data/buffer":8,"../data/extent":11,"../data/pos_array":14,"../lib/debugtext":23,"../util/browser":112,"./vertex_array_object":39,"@mapbox/gl-matrix":135}],29:[function(t,e,n){"use strict";function i(t,e,n,i){var a=t.gl;a.enable(a.STENCIL_TEST);var u=!n.paint["fill-pattern"]&&n.isPaintValueFeatureConstant("fill-color")&&n.isPaintValueFeatureConstant("fill-opacity")&&1===n.paint["fill-color"][3]&&1===n.paint["fill-opacity"];t.isOpaquePass===u&&(t.setDepthSublayer(1),r(t,e,n,i,o)),!t.isOpaquePass&&n.paint["fill-antialias"]&&(t.lineWidth(2),t.depthMask(!1),t.setDepthSublayer(n.getPaintProperty("fill-outline-color")?2:0),r(t,e,n,i,s))}function r(t,e,n,i,r){for(var o=!0,s=0,a=i;s<a.length;s+=1){var u=a[s],l=e.getTile(u),c=l.getBucket(n);c&&(t.enableTileClippingMask(u),r(t,e,n,l,u,c.buffers,o),o=!1)}}function o(t,e,n,i,r,o,s){for(var u=t.gl,l=o.layerData[n.id],c=a("fill",n.paint["fill-pattern"],t,l,n,i,r,s),h=0,f=o.segments;h<f.length;h+=1){var p=f[h];p.vaos[n.id].bind(u,c,o.layoutVertexBuffer,o.elementBuffer,l.paintVertexBuffer,p.vertexOffset),u.drawElements(u.TRIANGLES,3*p.primitiveLength,u.UNSIGNED_SHORT,3*p.primitiveOffset*2)}}function s(t,e,n,i,r,o,s){var u=t.gl,l=o.layerData[n.id],c=n.paint["fill-pattern"]&&!n.getPaintProperty("fill-outline-color"),h=a("fillOutline",c,t,l,n,i,r,s);u.uniform2f(h.u_world,u.drawingBufferWidth,u.drawingBufferHeight);for(var f=0,p=o.segments2;f<p.length;f+=1){var d=p[f];d.vaos[n.id].bind(u,h,o.layoutVertexBuffer,o.elementBuffer2,l.paintVertexBuffer,d.vertexOffset),u.drawElements(u.LINES,2*d.primitiveLength,u.UNSIGNED_SHORT,2*d.primitiveOffset*2)}}function a(t,e,n,i,r,o,s,a){var l,c=n.currentProgram;return e?(l=n.useProgram(t+"Pattern",i.programConfiguration),(a||l!==c)&&(i.programConfiguration.setUniforms(n.gl,l,r,{zoom:n.transform.zoom}),u.prepare(r.paint["fill-pattern"],n,l)),u.setTile(o,n,l)):(l=n.useProgram(t,i.programConfiguration),(a||l!==c)&&i.programConfiguration.setUniforms(n.gl,l,r,{zoom:n.transform.zoom})),n.gl.uniformMatrix4fv(l.u_matrix,!1,n.translatePosMatrix(s.posMatrix,o,r.paint["fill-translate"],r.paint["fill-translate-anchor"])),l}var u=t("./pattern");e.exports=i},{"./pattern":37}],30:[function(t,e,n){"use strict";function i(t,e,n,i){if(0!==n.paint["fill-extrusion-opacity"]){var s=t.gl;s.disable(s.STENCIL_TEST),s.enable(s.DEPTH_TEST),t.depthMask(!0);var a=new r(s,t,n);a.bindFramebuffer(),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT);for(var u=0;u<i.length;u++)o(t,e,n,i[u]);a.unbindFramebuffer(),a.renderToMap()}}function r(t,e,n){this.gl=t,this.width=e.width,this.height=e.height,this.painter=e,this.layer=n,this.texture=null,this.fbo=null,this.fbos=this.painter.preFbos[this.width]&&this.painter.preFbos[this.width][this.height]}function o(t,e,n,i){if(!t.isOpaquePass){var r=e.getTile(i),o=r.getBucket(n);if(o){var a=o.buffers,u=t.gl,l=n.paint["fill-extrusion-pattern"],c=a.layerData[n.id],f=c.programConfiguration,p=t.useProgram(l?"fillExtrusionPattern":"fillExtrusion",f);f.setUniforms(u,p,n,{zoom:t.transform.zoom}),l&&(h.prepare(l,t,p),h.setTile(r,t,p),u.uniform1f(p.u_height_factor,-Math.pow(2,i.z)/r.tileSize/8)),t.gl.uniformMatrix4fv(p.u_matrix,!1,t.translatePosMatrix(i.posMatrix,r,n.paint["fill-extrusion-translate"],n.paint["fill-extrusion-translate-anchor"])),s(p,t);for(var d=0,g=a.segments;d<g.length;d+=1){var m=g[d];m.vaos[n.id].bind(u,p,a.layoutVertexBuffer,a.elementBuffer,c.paintVertexBuffer,m.vertexOffset),u.drawElements(u.TRIANGLES,3*m.primitiveLength,u.UNSIGNED_SHORT,3*m.primitiveOffset*2)}}}}function s(t,e){var n=e.gl,i=e.style.light,r=i.calculated.position,o=[r.x,r.y,r.z],s=f.create();"viewport"===i.calculated.anchor&&f.fromRotation(s,-e.transform.angle),d.transformMat3(o,o,s),n.uniform3fv(t.u_lightpos,o),n.uniform1f(t.u_lightintensity,i.calculated.intensity),n.uniform3fv(t.u_lightcolor,i.calculated.color.slice(0,3))}var a=t("@mapbox/gl-matrix"),u=t("../data/buffer"),l=t("./vertex_array_object"),c=t("../data/pos_array"),h=t("./pattern"),f=a.mat3,p=a.mat4,d=a.vec3;e.exports=i,r.prototype.bindFramebuffer=function(){var t=this.gl;if(this.texture=this.painter.getViewportTexture(this.width,this.height),t.activeTexture(t.TEXTURE1),this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),this.texture.width=this.width,this.texture.height=this.height),this.fbos)this.fbo=this.fbos.pop(),t.bindFramebuffer(t.FRAMEBUFFER,this.fbo),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0);else{this.fbo=t.createFramebuffer();var e=t.createRenderbuffer(),n=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,e),t.bindRenderbuffer(t.RENDERBUFFER,n),t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,this.width,this.height),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,this.fbo),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,e),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}},r.prototype.unbindFramebuffer=function(){this.painter.bindDefaultFramebuffer(),this.fbos?this.fbos.push(this.fbo):(this.painter.preFbos[this.width]||(this.painter.preFbos[this.width]={}),this.painter.preFbos[this.width][this.height]=[this.fbo]),this.painter.saveViewportTexture(this.texture)},r.prototype.renderToMap=function(){var t=this.gl,e=this.painter,n=e.useProgram("extrusionTexture");t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.texture),t.uniform1f(n.u_opacity,this.layer.paint["fill-extrusion-opacity"]),t.uniform1i(n.u_texture,1),t.uniformMatrix4fv(n.u_matrix,!1,p.ortho(p.create(),0,e.width,e.height,0,0,1)),t.disable(t.DEPTH_TEST),t.uniform1i(n.u_xdim,e.width),t.uniform1i(n.u_ydim,e.height);var i=new c;i.emplaceBack(0,0),i.emplaceBack(e.width,0),i.emplaceBack(0,e.height),i.emplaceBack(e.width,e.height);var r=u.fromStructArray(i,u.BufferType.VERTEX),o=new l;o.bind(t,n,r),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.enable(t.DEPTH_TEST)}},{"../data/buffer":8,"../data/pos_array":14,"./pattern":37,"./vertex_array_object":39,"@mapbox/gl-matrix":135}],31:[function(t,e,n){"use strict";function i(t,e,n,i,s,a,u,l,c){var h,f,p,d,g=e.gl,m=s.paint["line-dasharray"],y=s.paint["line-pattern"];if(l||c){var v=1/o(n,1,e.transform.tileZoom);if(m){h=e.lineAtlas.getDash(m.from,"round"===s.layout["line-cap"]),f=e.lineAtlas.getDash(m.to,"round"===s.layout["line-cap"]);var _=h.width*m.fromScale,x=f.width*m.toScale;g.uniform2f(t.u_patternscale_a,v/_,-h.height/2),g.uniform2f(t.u_patternscale_b,v/x,-f.height/2),g.uniform1f(t.u_sdfgamma,e.lineAtlas.width/(256*Math.min(_,x)*r.devicePixelRatio)/2)}else if(y){if(p=e.spriteAtlas.getPosition(y.from,!0),d=e.spriteAtlas.getPosition(y.to,!0),!p||!d)return;g.uniform2f(t.u_pattern_size_a,p.size[0]*y.fromScale/v,d.size[1]),g.uniform2f(t.u_pattern_size_b,d.size[0]*y.toScale/v,d.size[1])}g.uniform2f(t.u_gl_units_to_pixels,1/e.transform.pixelsToGLUnits[0],1/e.transform.pixelsToGLUnits[1])}l&&(m?(g.uniform1i(t.u_image,0),g.activeTexture(g.TEXTURE0),e.lineAtlas.bind(g),
g.uniform1f(t.u_tex_y_a,h.y),g.uniform1f(t.u_tex_y_b,f.y),g.uniform1f(t.u_mix,m.t)):y&&(g.uniform1i(t.u_image,0),g.activeTexture(g.TEXTURE0),e.spriteAtlas.bind(g,!0),g.uniform2fv(t.u_pattern_tl_a,p.tl),g.uniform2fv(t.u_pattern_br_a,p.br),g.uniform2fv(t.u_pattern_tl_b,d.tl),g.uniform2fv(t.u_pattern_br_b,d.br),g.uniform1f(t.u_fade,y.t)),g.uniform1f(t.u_width,s.paint["line-width"])),e.enableTileClippingMask(a);var b=e.translatePosMatrix(a.posMatrix,n,s.paint["line-translate"],s.paint["line-translate-anchor"]);g.uniformMatrix4fv(t.u_matrix,!1,b),g.uniform1f(t.u_ratio,1/o(n,1,e.transform.zoom));for(var E=0,w=i.segments;E<w.length;E+=1){var S=w[E];S.vaos[s.id].bind(g,t,i.layoutVertexBuffer,i.elementBuffer,u.paintVertexBuffer,S.vertexOffset),g.drawElements(g.TRIANGLES,3*S.primitiveLength,g.UNSIGNED_SHORT,3*S.primitiveOffset*2)}}var r=t("../util/browser"),o=t("../source/pixels_to_tile_units");e.exports=function(t,e,n,r){if(!t.isOpaquePass){t.setDepthSublayer(0),t.depthMask(!1);var o=t.gl;if(o.enable(o.STENCIL_TEST),!(n.paint["line-width"]<=0))for(var s,a=n.paint["line-dasharray"]?"lineSDF":n.paint["line-pattern"]?"linePattern":"line",u=!0,l=0,c=r;l<c.length;l+=1){var h=c[l],f=e.getTile(h),p=f.getBucket(n);if(p){var d=p.buffers.layerData[n.id],g=t.currentProgram,m=t.useProgram(a,d.programConfiguration),y=u||m!==g,v=s!==f.coord.z;y&&d.programConfiguration.setUniforms(t.gl,m,n,{zoom:t.transform.zoom}),i(m,t,f,p.buffers,n,h,d,y,v),s=f.coord.z,u=!1}}}}},{"../source/pixels_to_tile_units":48,"../util/browser":112}],32:[function(t,e,n){"use strict";function i(t,e,n,i){if(!t.isOpaquePass){var o=t.gl;o.enable(o.DEPTH_TEST),t.depthMask(!0),o.depthFunc(o.LESS);for(var s=i.length&&i[0].z,a=0;a<i.length;a++){var u=i[a];t.setDepthSublayer(u.z-s),r(t,e,n,u)}o.depthFunc(o.LEQUAL)}}function r(t,e,n,i){var r=t.gl;r.disable(r.STENCIL_TEST);var l=e.getTile(i),c=t.transform.calculatePosMatrix(i,e.getSource().maxzoom);l.registerFadeDuration(t.style.animationLoop,n.paint["raster-fade-duration"]);var h=t.useProgram("raster");r.uniformMatrix4fv(h.u_matrix,!1,c),r.uniform1f(h.u_brightness_low,n.paint["raster-brightness-min"]),r.uniform1f(h.u_brightness_high,n.paint["raster-brightness-max"]),r.uniform1f(h.u_saturation_factor,a(n.paint["raster-saturation"])),r.uniform1f(h.u_contrast_factor,s(n.paint["raster-contrast"])),r.uniform3fv(h.u_spin_weights,o(n.paint["raster-hue-rotate"]));var f,p,d=l.sourceCache&&l.sourceCache.findLoadedParent(i,0,{}),g=u(l,d,n,t.transform);r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,l.texture),r.activeTexture(r.TEXTURE1),d?(r.bindTexture(r.TEXTURE_2D,d.texture),f=Math.pow(2,d.coord.z-l.coord.z),p=[l.coord.x*f%1,l.coord.y*f%1]):r.bindTexture(r.TEXTURE_2D,l.texture),r.uniform2fv(h.u_tl_parent,p||[0,0]),r.uniform1f(h.u_scale_parent,f||1),r.uniform1f(h.u_buffer_scale,1),r.uniform1f(h.u_fade_t,g.mix),r.uniform1f(h.u_opacity,g.opacity*n.paint["raster-opacity"]),r.uniform1i(h.u_image0,0),r.uniform1i(h.u_image1,1);var m=l.boundsBuffer||t.rasterBoundsBuffer,y=l.boundsVAO||t.rasterBoundsVAO;y.bind(r,h,m),r.drawArrays(r.TRIANGLE_STRIP,0,m.length)}function o(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}function s(t){return t>0?1/(1-t):1+t}function a(t){return t>0?1-1/(1.001-t):-t}function u(t,e,n,i){var r=n.paint["raster-fade-duration"];if(t.sourceCache&&r>0){var o=Date.now(),s=(o-t.timeAdded)/r,a=e?(o-e.timeAdded)/r:-1,u=t.sourceCache.getSource(),c=i.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!e||Math.abs(e.coord.z-c)>Math.abs(t.coord.z-c),f=l.clamp(h?s:1-a,0,1);return e?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var l=t("../util/util");e.exports=i},{"../util/util":131}],33:[function(t,e,n){"use strict";function i(t,e,n,i){if(!t.isOpaquePass){var o=!(n.layout["text-allow-overlap"]||n.layout["icon-allow-overlap"]||n.layout["text-ignore-placement"]||n.layout["icon-ignore-placement"]),s=t.gl;o?s.disable(s.STENCIL_TEST):s.enable(s.STENCIL_TEST),t.setDepthSublayer(0),t.depthMask(!1),r(t,e,n,i,!1,n.paint["icon-translate"],n.paint["icon-translate-anchor"],n.layout["icon-rotation-alignment"],n.layout["icon-rotation-alignment"],n.layout["icon-size"],n.paint["icon-halo-width"],n.paint["icon-halo-color"],n.paint["icon-halo-blur"],n.paint["icon-opacity"],n.paint["icon-color"]),r(t,e,n,i,!0,n.paint["text-translate"],n.paint["text-translate-anchor"],n.layout["text-rotation-alignment"],n.layout["text-pitch-alignment"],n.layout["text-size"],n.paint["text-halo-width"],n.paint["text-halo-color"],n.paint["text-halo-blur"],n.paint["text-opacity"],n.paint["text-color"]),e.map.showCollisionBoxes&&l(t,e,n,i)}}function r(t,e,n,i,r,a,u,l,c,h,f,p,d,g,m){if(r||!t.style.sprite||t.style.sprite.loaded()){var y=t.gl,v="map"===l,_="map"===c,x=_;x?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST);for(var b,E,w=0,S=i;w<S.length;w+=1){var I=S[w],C=e.getTile(I),T=C.getBucket(n);if(T){var N=r?T.buffers.glyph:T.buffers.icon;if(N&&N.segments.length){var L=r||T.sdfIcons;b&&T.fontstack===E||(b=t.useProgram(L?"symbolSDF":"symbolIcon"),o(b,t,r,L,v,_,T.fontstack,h,T.iconsNeedLinear,r?T.adjustedTextSize:T.adjustedIconSize,g)),t.enableTileClippingMask(I),y.uniformMatrix4fv(b.u_matrix,!1,t.translatePosMatrix(I.posMatrix,C,a,u)),s(b,t,n,C,N,r,L,_,h,f,p,d,m),E=T.fontstack}}}x||y.enable(y.DEPTH_TEST)}}function o(t,e,n,i,r,o,s,a,l,c,h){var f=e.gl,p=e.transform;if(f.uniform1i(t.u_rotate_with_map,r),f.uniform1i(t.u_pitch_with_map,o),f.activeTexture(f.TEXTURE0),f.uniform1i(t.u_texture,0),n){var d=s&&e.glyphSource.getGlyphAtlas(s);if(!d)return;d.updateTexture(f),f.uniform2f(t.u_texsize,d.width/4,d.height/4)}else{var g=e.options.rotating||e.options.zooming,m=1!==a||u.devicePixelRatio!==e.spriteAtlas.pixelRatio||l,y=o||p.pitch;e.spriteAtlas.bind(f,i||g||m||y),f.uniform2f(t.u_texsize,e.spriteAtlas.width/4,e.spriteAtlas.height/4)}f.activeTexture(f.TEXTURE1),e.frameHistory.bind(f),f.uniform1i(t.u_fadetexture,1);var v=Math.log(a/c)/Math.LN2||0;f.uniform1f(t.u_zoom,10*(p.zoom-v)),f.uniform1f(t.u_pitch,p.pitch/360*2*Math.PI),f.uniform1f(t.u_bearing,p.bearing/360*2*Math.PI),f.uniform1f(t.u_aspect_ratio,p.width/p.height),f.uniform1f(t.u_opacity,h)}function s(t,e,n,i,r,o,s,u,l,g,m,y,v){var _=e.gl,x=e.transform,b=l/(o?24:1);if(u){var E=c(i,b,x.zoom);_.uniform2f(t.u_extrude_scale,E,E)}else{var w=x.cameraToCenterDistance*b;_.uniform2f(t.u_extrude_scale,x.pixelsToGLUnits[0]*w,x.pixelsToGLUnits[1]*w)}if(s){var S=b*(u?Math.cos(x._pitch):1)*x.cameraToCenterDistance;g&&(_.uniform1f(t.u_gamma,(y*f/h+d)/S),_.uniform4fv(t.u_color,m),_.uniform1f(t.u_buffer,(p-g/b)/h),a(r,n,_,t)),_.uniform1f(t.u_gamma,d/S),_.uniform4fv(t.u_color,v),_.uniform1f(t.u_buffer,.75)}a(r,n,_,t)}function a(t,e,n,i){for(var r=0,o=t.segments;r<o.length;r+=1){var s=o[r];s.vaos[e.id].bind(n,i,t.layoutVertexBuffer,t.elementBuffer,null,s.vertexOffset),n.drawElements(n.TRIANGLES,3*s.primitiveLength,n.UNSIGNED_SHORT,3*s.primitiveOffset*2)}}var u=t("../util/browser"),l=t("./draw_collision_debug"),c=t("../source/pixels_to_tile_units");e.exports=i;var h=8,f=1.19,p=6,d=.105/u.devicePixelRatio},{"../source/pixels_to_tile_units":48,"../util/browser":112,"./draw_collision_debug":27}],34:[function(t,e,n){"use strict";var i=function(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.previousZoom=0,this.firstFrame=!0};i.prototype.record=function(t,e,n){var i=this;this.firstFrame&&(t=0,this.firstFrame=!1),e=Math.floor(10*e);var r;if(e<this.previousZoom)for(r=e+1;r<=this.previousZoom;r++)i.changeTimes[r]=t,i.changeOpacities[r]=i.opacities[r];else for(r=e;r>this.previousZoom;r--)i.changeTimes[r]=t,i.changeOpacities[r]=i.opacities[r];for(r=0;r<256;r++){var o=t-i.changeTimes[r],s=255*(n?o/n:1);r<=e?i.opacities[r]=i.changeOpacities[r]+s:i.opacities[r]=i.changeOpacities[r]-s}this.changed=!0,this.previousZoom=e},i.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.changed&&(t.texSubImage2D(t.TEXTURE_2D,0,0,0,256,1,t.ALPHA,t.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,256,1,0,t.ALPHA,t.UNSIGNED_BYTE,this.array))},e.exports=i},{}],35:[function(t,e,n){"use strict";var i=t("../util/util"),r=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};r.prototype.setSprite=function(t){this.sprite=t},r.prototype.getDash=function(t,e){var n=t.join(",")+e;return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},r.prototype.addDash=function(t,e){var n=this,r=e?7:0,o=2*r+1,s=128;if(this.nextRow+o>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var a=0,u=0;u<t.length;u++)a+=t[u];for(var l=this.width/a,c=l/2,h=t.length%2===1,f=-r;f<=r;f++)for(var p=n.nextRow+r+f,d=n.width*p,g=h?-t[t.length-1]:0,m=t[0],y=1,v=0;v<this.width;v++){for(;m<v/l;)g=m,m+=t[y],h&&y===t.length-1&&(m+=t[0]),y++;var _,x=Math.abs(v-g*l),b=Math.abs(v-m*l),E=Math.min(x,b),w=y%2===1;if(e){var S=r?f/r*(c+1):0;if(w){var I=c-Math.abs(S);_=Math.sqrt(E*E+I*I)}else _=c-Math.sqrt(E*E+S*S)}else _=(w?1:-1)*E;n.data[3+4*(d+v)]=Math.max(0,Math.min(255,_+s))}var C={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:a};return this.nextRow+=o,this.dirty=!0,C},r.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))},e.exports=r},{"../util/util":131}],36:[function(t,e,n){"use strict";var i=t("../util/browser"),r=t("@mapbox/gl-matrix").mat4,o=t("./frame_history"),s=t("../source/source_cache"),a=t("../data/extent"),u=t("../source/pixels_to_tile_units"),l=t("../util/util"),c=t("../data/buffer"),h=t("./vertex_array_object"),f=t("../data/raster_bounds_array"),p=t("../data/pos_array"),d=t("../data/program_configuration"),g=t("./shaders"),m={symbol:t("./draw_symbol"),circle:t("./draw_circle"),line:t("./draw_line"),fill:t("./draw_fill"),"fill-extrusion":t("./draw_fill_extrusion"),raster:t("./draw_raster"),background:t("./draw_background"),debug:t("./draw_debug")},y=function(t,e){this.gl=t,this.transform=e,this.reusableTextures={tiles:{},viewport:null},this.preFbos={},this.frameHistory=new o,this.setup(),this.numSublayers=s.maxUnderzooming+s.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE),this.basicFillProgramConfiguration=d.createStatic(["color","opacity"]),this.emptyProgramConfiguration=new d};y.prototype.resize=function(t,e){var n=this.gl;this.width=t*i.devicePixelRatio,this.height=e*i.devicePixelRatio,n.viewport(0,0,this.width,this.height)},y.prototype.setup=function(){var t=this.gl;t.verbose=!0,t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.STENCIL_TEST),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),this._depthMask=!1,t.depthMask(!1);var e=new p;e.emplaceBack(0,0),e.emplaceBack(a,0),e.emplaceBack(0,a),e.emplaceBack(a,a),this.tileExtentBuffer=c.fromStructArray(e,c.BufferType.VERTEX),this.tileExtentVAO=new h,this.tileExtentPatternVAO=new h;var n=new p;n.emplaceBack(0,0),n.emplaceBack(a,0),n.emplaceBack(a,a),n.emplaceBack(0,a),n.emplaceBack(0,0),this.debugBuffer=c.fromStructArray(n,c.BufferType.VERTEX),this.debugVAO=new h;var i=new f;i.emplaceBack(0,0,0,0),i.emplaceBack(a,0,32767,0),i.emplaceBack(0,a,0,32767),i.emplaceBack(a,a,32767,32767),this.rasterBoundsBuffer=c.fromStructArray(i,c.BufferType.VERTEX),this.rasterBoundsVAO=new h},y.prototype.clearColor=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},y.prototype.clearStencil=function(){var t=this.gl;t.clearStencil(0),t.stencilMask(255),t.clear(t.STENCIL_BUFFER_BIT)},y.prototype.clearDepth=function(){var t=this.gl;t.clearDepth(1),this.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT)},y.prototype._renderTileClippingMasks=function(t){var e=this,n=this.gl;n.colorMask(!1,!1,!1,!1),this.depthMask(!1),n.disable(n.DEPTH_TEST),n.enable(n.STENCIL_TEST),n.stencilMask(248),n.stencilOp(n.KEEP,n.KEEP,n.REPLACE);var i=1;this._tileClippingMaskIDs={};for(var r=0,o=t;r<o.length;r+=1){var s=o[r],a=e._tileClippingMaskIDs[s.id]=i++<<3;n.stencilFunc(n.ALWAYS,a,248);var u=e.useProgram("fill",e.basicFillProgramConfiguration);n.uniformMatrix4fv(u.u_matrix,!1,s.posMatrix),e.tileExtentVAO.bind(n,u,e.tileExtentBuffer),n.drawArrays(n.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}n.stencilMask(0),n.colorMask(!0,!0,!0,!0),this.depthMask(!0),n.enable(n.DEPTH_TEST)},y.prototype.enableTileClippingMask=function(t){var e=this.gl;e.stencilFunc(e.EQUAL,this._tileClippingMaskIDs[t.id],248)},y.prototype.prepareBuffers=function(){},y.prototype.bindDefaultFramebuffer=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},y.prototype.render=function(t,e){if(this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.spriteAtlas=t.spriteAtlas,this.spriteAtlas.setSprite(t.sprite),this.glyphSource=t.glyphSource,this.frameHistory.record(Date.now(),this.transform.zoom,t.getTransition().duration),this.prepareBuffers(),this.clearColor(),this.clearDepth(),this.showOverdrawInspector(e.showOverdrawInspector),this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.isOpaquePass=!0,this.renderPass(),this.isOpaquePass=!1,this.renderPass(),this.options.showTileBoundaries){var n=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];n&&m.debug(this,n,n.getVisibleCoordinates())}},y.prototype.renderPass=function(){var t,e,n=this,i=this.style._order;this.currentLayer=this.isOpaquePass?i.length-1:0,this.isOpaquePass?this._showOverdrawInspector||this.gl.disable(this.gl.BLEND):this.gl.enable(this.gl.BLEND);for(var r=0;r<i.length;r++){var o=n.style._layers[i[n.currentLayer]];o.source!==(t&&t.id)&&(t=n.style.sourceCaches[o.source],e=[],t&&(t.prepare&&t.prepare(),n.clearStencil(),e=t.getVisibleCoordinates(),t.getSource().isTileClipped&&n._renderTileClippingMasks(e)),n.isOpaquePass||e.reverse()),n.renderLayer(n,t,o,e),n.currentLayer+=n.isOpaquePass?-1:1}},y.prototype.depthMask=function(t){t!==this._depthMask&&(this._depthMask=t,this.gl.depthMask(t))},y.prototype.renderLayer=function(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||i.length)&&(this.id=n.id,m[n.type](t,e,n,i))},y.prototype.setDepthSublayer=function(t){var e=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,n=e-1+this.depthRange;this.gl.depthRange(n,e)},y.prototype.translatePosMatrix=function(t,e,n,i){if(!n[0]&&!n[1])return t;if("viewport"===i){var o=Math.sin(-this.transform.angle),s=Math.cos(-this.transform.angle);n=[n[0]*s-n[1]*o,n[0]*o+n[1]*s]}var a=[u(e,n[0],this.transform.zoom),u(e,n[1],this.transform.zoom),0],l=new Float32Array(16);return r.translate(l,t,a),l},y.prototype.saveTileTexture=function(t){var e=this.reusableTextures.tiles[t.size];e?e.push(t):this.reusableTextures.tiles[t.size]=[t]},y.prototype.saveViewportTexture=function(t){this.reusableTextures.viewport=t},y.prototype.getTileTexture=function(t){var e=this.reusableTextures.tiles[t];return e&&e.length>0?e.pop():null},y.prototype.getViewportTexture=function(t,e){var n=this.reusableTextures.viewport;if(n)return n.width===t&&n.height===e?n:(this.gl.deleteTexture(n),void(this.reusableTextures.viewport=null))},y.prototype.lineWidth=function(t){this.gl.lineWidth(l.clamp(t,this.lineWidthRange[0],this.lineWidthRange[1]))},y.prototype.showOverdrawInspector=function(t){if(t||this._showOverdrawInspector){this._showOverdrawInspector=t;var e=this.gl;if(t){e.blendFunc(e.CONSTANT_COLOR,e.ONE);var n=8,i=1/n;e.blendColor(i,i,i,0),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)}else e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}},y.prototype.createProgram=function(t,e){var n=this.gl,r=n.createProgram(),o=g[t],s="#define MAPBOX_GL_JS\n#define DEVICE_PIXEL_RATIO "+i.devicePixelRatio.toFixed(1)+"\n";this._showOverdrawInspector&&(s+="#define OVERDRAW_INSPECTOR;\n");var a=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(a,e.applyPragmas(s+g.prelude.fragmentSource+o.fragmentSource,"fragment")),n.compileShader(a),n.attachShader(r,a);var u=n.createShader(n.VERTEX_SHADER);n.shaderSource(u,e.applyPragmas(s+g.prelude.vertexSource+o.vertexSource,"vertex")),n.compileShader(u),n.attachShader(r,u),n.linkProgram(r);for(var l=n.getProgramParameter(r,n.ACTIVE_ATTRIBUTES),c={program:r,numAttributes:l},h=0;h<l;h++){var f=n.getActiveAttrib(r,h);c[f.name]=n.getAttribLocation(r,f.name)}for(var p=n.getProgramParameter(r,n.ACTIVE_UNIFORMS),d=0;d<p;d++){var m=n.getActiveUniform(r,d);c[m.name]=n.getUniformLocation(r,m.name)}return c},y.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=this.createProgram(t,e)),this.cache[n]},y.prototype.useProgram=function(t,e){var n=this.gl,i=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.currentProgram!==i&&(n.useProgram(i.program),this.currentProgram=i),i},e.exports=y},{"../data/buffer":8,"../data/extent":11,"../data/pos_array":14,"../data/program_configuration":15,"../data/raster_bounds_array":16,"../source/pixels_to_tile_units":48,"../source/source_cache":53,"../util/browser":112,"../util/util":131,"./draw_background":25,"./draw_circle":26,"./draw_debug":28,"./draw_fill":29,"./draw_fill_extrusion":30,"./draw_line":31,"./draw_raster":32,"./draw_symbol":33,"./frame_history":34,"./shaders":38,"./vertex_array_object":39,"@mapbox/gl-matrix":135}],37:[function(t,e,n){"use strict";var i=t("../source/pixels_to_tile_units");n.prepare=function(t,e,n){var i=e.gl,r=e.spriteAtlas.getPosition(t.from,!0),o=e.spriteAtlas.getPosition(t.to,!0);r&&o&&(i.uniform1i(n.u_image,0),i.uniform2fv(n.u_pattern_tl_a,r.tl),i.uniform2fv(n.u_pattern_br_a,r.br),i.uniform2fv(n.u_pattern_tl_b,o.tl),i.uniform2fv(n.u_pattern_br_b,o.br),i.uniform1f(n.u_mix,t.t),i.uniform2fv(n.u_pattern_size_a,r.size),i.uniform2fv(n.u_pattern_size_b,o.size),i.uniform1f(n.u_scale_a,t.fromScale),i.uniform1f(n.u_scale_b,t.toScale),i.activeTexture(i.TEXTURE0),e.spriteAtlas.bind(i,!0))},n.setTile=function(t,e,n){var r=e.gl;r.uniform1f(n.u_tile_units_to_pixels,1/i(t,1,e.transform.tileZoom));var o=Math.pow(2,t.coord.z),s=t.tileSize*Math.pow(2,e.transform.tileZoom)/o,a=s*(t.coord.x+t.coord.w*o),u=s*t.coord.y;r.uniform2f(n.u_pixel_coord_upper,a>>16,u>>16),r.uniform2f(n.u_pixel_coord_lower,65535&a,65535&u)}},{"../source/pixels_to_tile_units":48}],38:[function(t,e,n){"use strict";t("path");e.exports={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\nfloat evaluate_zoom_function_1(const vec4 values, const float t) {\n    if (t < 1.0) {\n        return mix(values[0], values[1], t);\n    } else if (t < 2.0) {\n        return mix(values[1], values[2], t - 1.0);\n    } else {\n        return mix(values[2], values[3], t - 2.0);\n    }\n}\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\n    if (t < 1.0) {\n        return mix(value0, value1, t);\n    } else if (t < 2.0) {\n        return mix(value1, value2, t - 1.0);\n    } else {\n        return mix(value2, value3, t - 2.0);\n    }\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},circle:{fragmentSource:"#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    float extrude_length = length(v_extrude);\n    float antialiased_blur = -max(blur, v_antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform vec2 u_extrude_scale;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main(void) {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * (radius + stroke_width) * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    if (u_scale_with_map) {\n        gl_Position.xy += extrude;\n    } else {\n        gl_Position.xy += extrude * gl_Position.w;\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n}\n"},collisionBox:{fragmentSource:"uniform float u_zoom;\nuniform float u_maxzoom;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    if (v_placement_zoom > u_zoom) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    if (u_zoom >= v_max_zoom) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos + a_extrude / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n}\n"},debug:{fragmentSource:"uniform lowp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize lowp vec4 color\n\n    gl_FragColor = v_color;\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\nuniform lowp vec4 u_outline_color;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize lowp vec4 color\n\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\n    float t = mod(a_normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n#ifdef OUTLINE\n    color = u_outline_color;\n#endif\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"
},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    float t = mod(a_normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(a_edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_texture;\nuniform float u_opacity;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_texture, v_pos) * u_opacity;\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform int u_xdim;\nuniform int u_ydim;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos.x = a_pos.x / float(u_xdim);\n    v_pos.y = 1.0 - a_pos.y / float(u_ydim);\n}\n"},line:{fragmentSource:"#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a, u_pattern_br_a, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b, u_pattern_br_b, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\nuniform mediump float u_width;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset;\n \n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp float u_opacity;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * u_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n    if (u_rotate_with_map) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},symbolSDF:{fragmentSource:"uniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform lowp float u_buffer;\nuniform lowp float u_gamma;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    lowp float dist = texture2D(u_texture, v_tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\n    lowp float gamma = u_gamma * v_gamma_scale;\n    lowp float alpha = smoothstep(u_buffer - gamma, u_buffer + gamma, dist) * fade_alpha;\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform bool u_pitch_with_map;\nuniform mediump float u_pitch;\nuniform mediump float u_bearing;\nuniform mediump float u_aspect_ratio;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    // pitch-alignment: map\n    // rotation-alignment: map | viewport\n    if (u_pitch_with_map) {\n        lowp float angle = u_rotate_with_map ? (a_data[1] / 256.0 * 2.0 * PI) : u_bearing;\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, asin, -1.0 * asin, acos);\n        vec2 offset = RotationMatrix * a_offset;\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: map\n    } else if (u_rotate_with_map) {\n        // foreshortening factor to apply on pitched maps\n        // as a label goes from horizontal <=> vertical in angle\n        // it goes from 0% foreshortening to up to around 70% foreshortening\n        lowp float pitchfactor = 1.0 - cos(u_pitch * sin(u_pitch * 0.75));\n\n        lowp float lineangle = a_data[1] / 256.0 * 2.0 * PI;\n\n        // use the lineangle to position points a,b along the line\n        // project the points and calculate the label angle in projected space\n        // this calculation allows labels to be rendered unskewed on pitched maps\n        vec4 a = u_matrix * vec4(a_pos, 0, 1);\n        vec4 b = u_matrix * vec4(a_pos + vec2(cos(lineangle),sin(lineangle)), 0, 1);\n        lowp float angle = atan((b[1]/b[3] - a[1]/a[3])/u_aspect_ratio, b[0]/b[3] - a[0]/a[3]);\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, -1.0 * asin, asin, acos);\n\n        vec2 offset = RotationMatrix * (vec2((1.0-pitchfactor)+(pitchfactor*cos(angle*2.0)), 1.0) * a_offset);\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: viewport\n    } else {\n        vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_gamma_scale = gl_Position.w;\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"}}},{path:137}],39:[function(t,e,n){"use strict";var i=function(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundElementBuffer=null,this.boundVertexOffset=null,this.vao=null};i.prototype.bind=function(t,e,n,i,r,o){void 0===t.extVertexArrayObject&&(t.extVertexArrayObject=t.getExtension("OES_vertex_array_object"));var s=!this.vao||this.boundProgram!==e||this.boundVertexBuffer!==n||this.boundVertexBuffer2!==r||this.boundElementBuffer!==i||this.boundVertexOffset!==o;!t.extVertexArrayObject||s?(this.freshBind(t,e,n,i,r,o),this.gl=t):t.extVertexArrayObject.bindVertexArrayOES(this.vao)},i.prototype.freshBind=function(t,e,n,i,r,o){var s,a=e.numAttributes;if(t.extVertexArrayObject)this.vao&&this.destroy(),this.vao=t.extVertexArrayObject.createVertexArrayOES(),t.extVertexArrayObject.bindVertexArrayOES(this.vao),s=0,this.boundProgram=e,this.boundVertexBuffer=n,this.boundVertexBuffer2=r,this.boundElementBuffer=i,this.boundVertexOffset=o;else{s=t.currentNumAttributes||0;for(var u=a;u<s;u++)t.disableVertexAttribArray(u)}for(var l=s;l<a;l++)t.enableVertexAttribArray(l);n.bind(t),n.setVertexAttribPointers(t,e,o),r&&(r.bind(t),r.setVertexAttribPointers(t,e,o)),i&&i.bind(t),t.currentNumAttributes=a},i.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},e.exports=i},{}],40:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/ajax"),o=t("../util/evented"),s=t("./load_arcgis_mapserver"),a=/\{ *([\w_]+) *\}/g,u=function(t,e){return t.replace(a,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})},l=function(t,e){if(e){var n=Math.abs(t.x+t.y)%e.length;return e[n]}return null},c=function(t){function e(e,n,r,o){var a=this;t.call(this),this.id=e,this.dispatcher=r,this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.tileSize=512,this._loaded=!1,this.dispatcher=r,i.extend(this,i.pick(n,["url","scheme","tileSize"])),this.setEventedParent(o),this.fire("dataloading",{dataType:"source"}),s(n,function(t,e){return t?a.fire("error",t):(i.extend(a,e),a.fire("data",{dataType:"source"}),void a.fire("source.load"))})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){this.map=t;var e=this.url.split("?")[0];this.tileUrl=e+" /tile/{z}/{y}/{x}";var n=new RegExp(/tiles.arcgis(online)?\.com/g);n.test(this.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),this.subdomains=["1","2","3","4"]),this.token&&(this.tileUrl+="?token="+this.token)},e.prototype.serialize=function(){return{type:"arcgisraster",url:this.url,tileSize:this.tileSize,tiles:this.tiles}},e.prototype.loadTile=function(t,e){function n(n,i){if(delete t.request,t.aborted)return this.state="unloaded",e(null);if(n)return this.state="errored",e(n);var r=this.map.painter.gl;t.texture=this.map.painter.getTileTexture(i.width),t.texture?(r.bindTexture(r.TEXTURE_2D,t.texture),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,i)):(t.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,t.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,i),t.texture.size=i.width),r.generateMipmap(r.TEXTURE_2D),t.state="loaded",e(null)}var o=t.coord,s=u(this.tileUrl,i.extend({s:l(o,this.subdomains),z:this._lodMap&&this._lodMap[o.z]?this._lodMap[o.z]:o.z,x:o.x,y:o.y},this.options));t.request=r.getImage(s,n.bind(this))},e.prototype.abortTile=function(t){t.request&&(t.request.abort(),delete t.request)},e.prototype.unloadTile=function(t){t.texture&&this.map.painter.saveTileTexture(t.texture)},e}(o);e.exports=c},{"../util/ajax":111,"../util/evented":120,"../util/util":131,"./load_arcgis_mapserver":46}],41:[function(t,e,n){"use strict";var i=t("./image_source"),r=t("../util/window"),o=function(t){function e(e,n,i,r){t.call(this,e,n,i,r),this.options=n,this.animate=!n.hasOwnProperty("animate")||n.animate}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){if(this.canvas=this.canvas||r.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions(this.canvas))return this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero."));var t;this.play=function(){t=this.map.style.animationLoop.set(1/0),this.map._rerender()},this.pause=function(){this.map.style.animationLoop.cancel(t)},this._finishLoading()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.canvas&&(this.animate&&this.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){var t=!1;this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||this.tile&&this._prepareImage(this.map.painter.gl,this.canvas,t)},e.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},e.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},e}(i);e.exports=o},{"../util/window":114,"./image_source":45}],42:[function(t,e,n){"use strict";function i(t){var e=s.document.createElement("a");return e.href=t,e.href}var r=t("../util/evented"),o=t("../util/util"),s=t("../util/window"),a=t("../data/extent"),u=function(t){function e(e,n,i,r){t.call(this),n=n||{},this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=i,this.setEventedParent(r),this._data=n.data,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type);var s=a/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*s,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*s,
extent:a,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:Math.min(n.clusterMaxZoom,this.maxzoom-1)||this.maxzoom-1,extent:a,radius:(n.clusterRadius||50)*s,log:!1}},n.workerOptions)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){return e?void t.fire("error",{error:e}):(t.fire("data",{dataType:"source"}),void t.fire("source.load"))})},e.prototype.onAdd=function(t){this.load(),this.map=t},e.prototype.setData=function(t){var e=this;return this._data=t,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){return t?e.fire("error",{error:t}):void e.fire("data",{dataType:"source"})}),this},e.prototype._updateWorkerData=function(t){var e=this,n=o.extend({},this.workerOptions),r=this._data;"string"==typeof r?n.url=i(r):n.data=JSON.stringify(r),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n){e._loaded=!0,t(n)})},e.prototype.loadTile=function(t,e){var n=this,i=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,r={type:this.type,uid:t.uid,coord:t.coord,zoom:t.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,overscaling:i,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};t.workerID=this.dispatcher.send("loadTile",r,function(i,r){if(t.unloadVectorData(),!t.aborted)return i?e(i):(t.loadVectorData(r,n.map.painter),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(n)),e(null))},this.workerID)},e.prototype.abortTile=function(t){t.aborted=!0},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},function(){},t.workerID)},e.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id},function(){})},e.prototype.serialize=function(){return{type:this.type,data:this._data}},e}(r);e.exports=u},{"../data/extent":11,"../util/evented":120,"../util/util":131,"../util/window":114}],43:[function(t,e,n){"use strict";var i=t("../util/ajax"),r=t("geojson-rewind"),o=t("./geojson_wrapper"),s=t("vt-pbf"),a=t("supercluster"),u=t("geojson-vt"),l=t("./vector_tile_worker_source"),c=function(t){function e(e,n,i){t.call(this,e,n),i&&(this.loadGeoJSON=i),this._geoJSONIndexes={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadVectorData=function(t,e){var n=t.source,i=t.coord;if(!this._geoJSONIndexes[n])return e(null,null);var r=this._geoJSONIndexes[n].getTile(Math.min(i.z,t.maxZoom),i.x,i.y);if(!r)return e(null,null);var a=new o(r.features);a.name="_geojsonTileLayer";var u=s({layers:{_geojsonTileLayer:a}});0===u.byteOffset&&u.byteLength===u.buffer.byteLength||(u=new Uint8Array(u)),a.rawData=u.buffer,e(null,a)},e.prototype.loadData=function(t,e){var n=function(n,i){var o=this;return n?e(n):"object"!=typeof i?e(new Error("Input data is not a valid GeoJSON object.")):(r(i,!0),void this._indexData(i,t,function(n,i){return n?e(n):(o._geoJSONIndexes[t.source]=i,void e(null))}))}.bind(this);this.loadGeoJSON(t,n)},e.prototype.loadGeoJSON=function(t,e){if(t.url)i.getJSON(t.url,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}},e.prototype.removeSource=function(t){this._geoJSONIndexes[t.source]&&delete this._geoJSONIndexes[t.source]},e.prototype._indexData=function(t,e,n){try{e.cluster?n(null,a(e.superclusterOptions).load(t.features)):n(null,u(t,e.geojsonVtOptions))}catch(t){return n(t)}},e}(l);e.exports=c},{"../util/ajax":111,"./geojson_wrapper":44,"./vector_tile_worker_source":57,"geojson-rewind":146,"geojson-vt":152,supercluster:203,"vt-pbf":213}],44:[function(t,e,n){"use strict";var i=t("point-geometry"),r=t("vector-tile").VectorTileFeature,o=t("../data/extent"),s=function(t){var e=this;if(this.type=t.type,1===t.type){this.rawGeometry=[];for(var n=0;n<t.geometry.length;n++)e.rawGeometry.push([t.geometry[n]])}else this.rawGeometry=t.geometry;this.properties=t.tags,this.extent=o};s.prototype.loadGeometry=function(){var t=this,e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],o=[],s=0;s<r.length;s++)o.push(new i(r[s][0],r[s][1]));t.geometry.push(o)}return this.geometry},s.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-(1/0),i=1/0,r=-(1/0),o=0;o<t.length;o++)for(var s=t[o],a=0;a<s.length;a++){var u=s[a];e=Math.min(e,u.x),n=Math.max(n,u.x),i=Math.min(i,u.y),r=Math.max(r,u.y)}return[e,i,n,r]},s.prototype.toGeoJSON=function(){r.prototype.toGeoJSON.call(this)};var a=function(t){this.features=t,this.length=t.length,this.extent=o};a.prototype.feature=function(t){return new s(this.features[t])},e.exports=a},{"../data/extent":11,"point-geometry":200,"vector-tile":209}],45:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/window"),o=t("./tile_coord"),s=t("../geo/lng_lat"),a=t("point-geometry"),u=t("../util/evented"),l=t("../util/ajax"),c=t("../data/extent"),h=t("../data/raster_bounds_array"),f=t("../data/buffer"),p=t("../render/vertex_array_object"),d=function(t){function e(e,n,i,r){t.call(this),this.id=e,this.dispatcher=i,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.setEventedParent(r),this.options=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,l.getImage(this.options.url,function(e,n){return e?t.fire("error",{error:e}):(t.image=n,void t._finishLoading())})},e.prototype._finishLoading=function(){this.fire("source.load"),this.map&&this.setCoordinates(this.coordinates)},e.prototype.onAdd=function(t){this.load(),this.map=t,this.image&&this.setCoordinates(this.coordinates)},e.prototype.setCoordinates=function(t){this.coordinates=t;var e=this.map,n=t.map(function(t){return e.transform.locationCoordinate(s.convert(t)).zoomTo(0)}),r=this.centerCoord=i.getCoordinatesCenter(n);return r.column=Math.round(r.column),r.row=Math.round(r.row),this.minzoom=this.maxzoom=r.zoom,this.coord=new o(r.zoom,r.column,r.row),this._tileCoords=n.map(function(t){var e=t.zoomTo(r.zoom);return new a(Math.round((e.column-r.column)*c),Math.round((e.row-r.row)*c))}),this.fire("data",{dataType:"source"}),this},e.prototype._setTile=function(t){this.tile=t;var e=32767,n=new h;n.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),n.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,e,0),n.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,e),n.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,e,e),this.tile.buckets={},this.tile.boundsBuffer=f.fromStructArray(n,f.BufferType.VERTEX),this.tile.boundsVAO=new p},e.prototype.prepare=function(){this.tile&&this.image&&this._prepareImage(this.map.painter.gl,this.image)},e.prototype._prepareImage=function(t,e,n){"loaded"!==this.tile.state?(this.tile.state="loaded",this.tile.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.tile.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)):n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e):(e instanceof r.HTMLVideoElement||e instanceof r.ImageData||e instanceof r.HTMLCanvasElement)&&(t.bindTexture(t.TEXTURE_2D,this.tile.texture),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e))},e.prototype.loadTile=function(t,e){this.coord&&this.coord.toString()===t.coord.toString()?(this._setTile(t),e(null)):(t.state="errored",e(null))},e.prototype.serialize=function(){return{type:"image",urls:this.url,coordinates:this.coordinates}},e}(u);e.exports=d},{"../data/buffer":8,"../data/extent":11,"../data/raster_bounds_array":16,"../geo/lng_lat":19,"../render/vertex_array_object":39,"../util/ajax":111,"../util/evented":120,"../util/util":131,"../util/window":114,"./tile_coord":55,"point-geometry":200}],46:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/ajax"),o=t("../util/browser"),s={0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763},a=function(t,e,n){var i=Math.abs(t/e-1);return i<n};e.exports=function(t,e){var n=function(t,n){if(t)return e(t);var r=i.pick(n,["tileInfo","initialExtent","spatialReference","tileServers","documentInfo"]);r._lodMap={};var o=.1,u=n.spatialReference.latestWkid||n.spatialReference.wkid;if(102100===u||3857===u){var l=n.tileInfo.lods,c=s;r.minzoom=l[0].level,r.maxzoom=l[l.length-1].level;for(var h=0;h<l.length;h++){var f=l[h];for(var p in c){var d=c[p];if(a(f.resolution,d,o)){r._lodMap[p]=f.level;break}}}}else e(new Error("non-mercator spatial reference"));e(null,r)};t.url?r.getJSON(t.url,n):o.frame(n.bind(null,null,t))}},{"../util/ajax":111,"../util/browser":112,"../util/util":131}],47:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/ajax"),o=t("../util/browser"),s=t("../util/mapbox").normalizeSourceURL;e.exports=function(t,e){var n=function(t,n){if(t)return e(t);var r=i.pick(n,["tiles","minzoom","maxzoom","attribution"]);n.vector_layers&&(r.vectorLayers=n.vector_layers,r.vectorLayerIds=r.vectorLayers.map(function(t){return t.id})),e(null,r)};t.url?r.getJSON(s(t.url),n):o.frame(n.bind(null,null,t))}},{"../util/ajax":111,"../util/browser":112,"../util/mapbox":127,"../util/util":131}],48:[function(t,e,n){"use strict";var i=t("../data/extent");e.exports=function(t,e,n){return e*(i/(t.tileSize*Math.pow(2,n-t.coord.z)))}},{"../data/extent":11}],49:[function(t,e,n){"use strict";function i(t,e){var n=t.coord,i=e.coord;return n.z-i.z||n.y-i.y||n.w-i.w||n.x-i.x}function r(t){for(var e=t[0]||{},n=1;n<t.length;n++){var i=t[n];for(var r in i){var o=i[r],s=e[r];if(void 0===s)s=e[r]=o;else for(var a=0;a<o.length;a++)s.push(o[a])}}return e}var o=t("./tile_coord");n.rendered=function(t,e,n,o,s,a){var u=t.tilesIn(n);u.sort(i);for(var l=[],c=0;c<u.length;c++){var h=u[c];h.tile.featureIndex&&l.push(h.tile.featureIndex.query({queryGeometry:h.queryGeometry,scale:h.scale,tileSize:h.tile.tileSize,bearing:a,params:o},e))}return r(l)},n.source=function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),i=[],r={},s=0;s<n.length;s++){var a=n[s],u=new o(Math.min(a.sourceMaxZoom,a.coord.z),a.coord.x,a.coord.y,0).id;r[u]||(r[u]=!0,a.querySourceFeatures(i,e))}return i}},{"./tile_coord":55}],50:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/ajax"),o=t("../util/evented"),s=t("./load_tilejson"),a=t("../util/mapbox").normalizeTileURL,u=function(t){function e(e,n,r,o){t.call(this),this.id=e,this.dispatcher=r,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this.options=n,i.extend(this,i.pick(n,["url","scheme","tileSize"]))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),s(this.options,function(e,n){return e?t.fire("error",e):(i.extend(t,n),t.fire("data",{dataType:"source"}),void t.fire("source.load"))})},e.prototype.onAdd=function(t){this.load(),this.map=t},e.prototype.serialize=function(){return{type:"raster",url:this.url,tileSize:this.tileSize,tiles:this.tiles}},e.prototype.loadTile=function(t,e){function n(n,i){if(delete t.request,t.aborted)return this.state="unloaded",e(null);if(n)return this.state="errored",e(n);t.setExpiryData(i),delete i.cacheControl,delete i.expires;var r=this.map.painter.gl;t.texture=this.map.painter.getTileTexture(i.width),t.texture?(r.bindTexture(r.TEXTURE_2D,t.texture),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,i)):(t.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,t.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,i),t.texture.size=i.width),r.generateMipmap(r.TEXTURE_2D),t.state="loaded",e(null)}var i=a(t.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);t.request=r.getImage(i,n.bind(this))},e.prototype.abortTile=function(t){t.request&&(t.request.abort(),delete t.request)},e.prototype.unloadTile=function(t){t.texture&&this.map.painter.saveTileTexture(t.texture)},e}(o);e.exports=u},{"../util/ajax":111,"../util/evented":120,"../util/mapbox":127,"../util/util":131,"./load_tilejson":47}],51:[function(t,e,n){"use strict";var i=t("../util/ajax"),r=t("../util/window"),o=[],s=!1,a=null;e.exports.registerForPluginAvailability=function(t){a?t(a):o.push(t)},e.exports.errorCallback=null,e.exports.setRTLTextPlugin=function(t,n){if(s)throw new Error("setRTLTextPlugin cannot be called multiple times.");s=!0,e.exports.errorCallback=n,i.getArrayBuffer(t,function(t,e){if(t)n(t);else{a=r.URL.createObjectURL(new r.Blob([e.data]),{type:"text/javascript"});for(var i=0,s=o;i<s.length;i+=1){var u=s[i];u(a)}}})}},{"../util/ajax":111,"../util/window":114}],52:[function(t,e,n){"use strict";var i=t("../util/util"),r={vector:t("../source/vector_tile_source"),raster:t("../source/raster_tile_source"),arcgisraster:t("../source/arcgis_raster_tile_source"),geojson:t("../source/geojson_source"),video:t("../source/video_source"),image:t("../source/image_source"),canvas:t("../source/canvas_source")};n.create=function(t,e,n,o){if(e=new r[e.type](t,e,n,o),e.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+e.id);return i.bindAll(["load","abort","unload","serialize","prepare"],e),e},n.getType=function(t){return r[t]},n.setType=function(t,e){r[t]=e}},{"../source/arcgis_raster_tile_source":40,"../source/canvas_source":41,"../source/geojson_source":42,"../source/image_source":45,"../source/raster_tile_source":50,"../source/vector_tile_source":56,"../source/video_source":58,"../util/util":131}],53:[function(t,e,n){"use strict";function i(t,e,n){var i=n.zoomTo(Math.min(t.z,e));return{x:(i.column-(t.x+t.w*Math.pow(2,t.z)))*p,y:(i.row-t.y)*p}}function r(t,e){return t%32-e%32}function o(t){return"raster"===t||"image"===t||"video"===t}var s=t("./source"),a=t("./tile"),u=t("../util/evented"),l=t("./tile_coord"),c=t("../util/lru_cache"),h=t("../geo/coordinate"),f=t("../util/util"),p=t("../data/extent"),d=function(t){function e(e,n,i){t.call(this),this.id=e,this.dispatcher=i,this.on("source.load",function(){this._sourceLoaded=!0}),this.on("error",function(){this._sourceErrored=!0}),this.on("data",function(t){this._sourceLoaded&&"source"===t.dataType&&(this.reload(),this.transform&&this.update(this.transform))}),this._source=s.create(e,n,i,this),this._tiles={},this._cache=new c(0,this.unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._isIdRenderable=this._isIdRenderable.bind(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){this.map=t,this._source&&this._source.onAdd&&this._source.onAdd(t)},e.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},e.prototype.loaded=function(){var t=this;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in this._tiles){var n=t._tiles[e];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0},e.prototype.getSource=function(){return this._source},e.prototype.loadTile=function(t,e){return this._source.loadTile(t,e)},e.prototype.unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t)},e.prototype.abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t)},e.prototype.serialize=function(){return this._source.serialize()},e.prototype.prepare=function(){if(this._sourceLoaded&&this._source.prepare)return this._source.prepare()},e.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(r)},e.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},e.prototype._isIdRenderable=function(t){return this._tiles[t].hasData()&&!this._coveredTiles[t]},e.prototype.reload=function(){var t=this;this._cache.reset();for(var e in this._tiles)t.reloadTile(e,"reloading")},e.prototype.reloadTile=function(t,e){var n=this._tiles[t];"loading"!==n.state&&(n.state=e),this.loadTile(n,this._tileLoaded.bind(this,n,t))},e.prototype._tileLoaded=function(t,e,n){return n?(t.state="errored",void this._source.fire("error",{tile:t,error:n})):(t.sourceCache=this,t.timeAdded=(new Date).getTime(),this._setTileReloadTimer(e,t),this._source.fire("data",{tile:t,coord:t.coord,dataType:"tile"}),void(this.map&&(this.map.painter.tileExtentVAO.vao=null)))},e.prototype.getTile=function(t){return this.getTileByID(t.id)},e.prototype.getTileByID=function(t){return this._tiles[t]},e.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},e.prototype.findLoadedChildren=function(t,e,n){var i=this,r=!1;for(var o in this._tiles){var s=i._tiles[o];if(!(n[o]||!s.hasData()||s.coord.z<=t.z||s.coord.z>e)){var a=Math.pow(2,Math.min(s.coord.z,i._source.maxzoom)-Math.min(t.z,i._source.maxzoom));if(Math.floor(s.coord.x/a)===t.x&&Math.floor(s.coord.y/a)===t.y)for(n[o]=!0,r=!0;s&&s.coord.z-1>t.z;){var u=s.coord.parent(i._source.maxzoom).id;s=i._tiles[u],s&&s.hasData()&&(delete n[o],n[u]=!0)}}}return r},e.prototype.findLoadedParent=function(t,e,n){for(var i=this,r=t.z-1;r>=e;r--){t=t.parent(i._source.maxzoom);var o=i._tiles[t.id];if(o&&o.hasData())return n[t.id]=!0,o;if(i._cache.has(t.id))return n[t.id]=!0,i._cache.get(t.id)}},e.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/t.tileSize)+1,n=Math.ceil(t.height/t.tileSize)+1,i=e*n,r=5;this._cache.setMaxSize(Math.floor(i*r))},e.prototype.update=function(t){var n=this;if(this._sourceLoaded){var i,r,s,a;this.updateCacheSize(t);var u=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),c=Math.max(u-e.maxOverzooming,this._source.minzoom),h=Math.max(u+e.maxUnderzooming,this._source.minzoom),p={};this._coveredTiles={};var d;for(d=this.used?this._source.coord?[this._source.coord]:t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}):[],i=0;i<d.length;i++)r=d[i],s=n.addTile(r),p[r.id]=!0,s.hasData()||n.findLoadedChildren(r,h,p)||(a=n.findLoadedParent(r,c,p),a&&n.addTile(a.coord));var g={};if(o(this._source.type))for(var m=Object.keys(p),y=0;y<m.length;y++){var v=m[y];r=l.fromID(v),s=n._tiles[v],s&&("undefined"==typeof s.fadeEndTime||s.fadeEndTime>=Date.now())&&(n.findLoadedChildren(r,h,p)&&(p[v]=!0),a=n.findLoadedParent(r,c,g),a&&n.addTile(a.coord))}var _;for(_ in g)p[_]||(n._coveredTiles[_]=!0);for(_ in g)p[_]=!0;var x=f.keysDifference(this._tiles,p);for(i=0;i<x.length;i++)n.removeTile(+x[i]);this.transform=t}},e.prototype.addTile=function(t){var e=this._tiles[t.id];if(e)return e;var n=t.wrapped();if(e=this._tiles[n.id],e||(e=this._cache.get(n.id),e&&(e.redoPlacement(this._source),this._cacheTimers[n.id]&&(clearTimeout(this._cacheTimers[n.id]),this._cacheTimers[n.id]=void 0,this._setTileReloadTimer(n.id,e)))),!e){var i=t.z,r=i>this._source.maxzoom?Math.pow(2,i-this._source.maxzoom):1;e=new a(n,this._source.tileSize*r,this._source.maxzoom),this.loadTile(e,this._tileLoaded.bind(this,e,t.id))}return e.uses++,this._tiles[t.id]=e,this._source.fire("dataloading",{tile:e,coord:e.coord,dataType:"tile"}),e},e.prototype._setTileReloadTimer=function(t,e){var n=this,i=e.getExpiry();i&&(this._timers[t]=setTimeout(function(){n.reloadTile(t,"expired"),n._timers[t]=void 0},i-(new Date).getTime()))},e.prototype._setCacheInvalidationTimer=function(t,e){var n=this,i=e.getExpiry();i&&(this._cacheTimers[t]=setTimeout(function(){n._cache.remove(t),n._cacheTimers[t]=void 0},i-(new Date).getTime()))},e.prototype.removeTile=function(t){var e=this._tiles[t];if(e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),this._timers[t]=void 0),this._source.fire("data",{tile:e,coord:e.coord,dataType:"tile"}),!(e.uses>0)))if(e.hasData()){var n=e.coord.wrapped().id;this._cache.add(n,e),this._setCacheInvalidationTimer(n,e)}else e.aborted=!0,this.abortTile(e),this.unloadTile(e)},e.prototype.clearTiles=function(){var t=this;for(var e in this._tiles)t.removeTile(e);this._cache.reset()},e.prototype.tilesIn=function(t){for(var e=this,n={},r=this.getIds(),o=1/0,s=1/0,a=-(1/0),u=-(1/0),c=t[0].zoom,f=0;f<t.length;f++){var d=t[f];o=Math.min(o,d.column),s=Math.min(s,d.row),a=Math.max(a,d.column),u=Math.max(u,d.row)}for(var g=0;g<r.length;g++){var m=e._tiles[r[g]],y=l.fromID(r[g]),v=[i(y,m.sourceMaxZoom,new h(o,s,c)),i(y,m.sourceMaxZoom,new h(a,u,c))];if(v[0].x<p&&v[0].y<p&&v[1].x>=0&&v[1].y>=0){for(var _=[],x=0;x<t.length;x++)_.push(i(y,m.sourceMaxZoom,t[x]));var b=n[m.coord.id];void 0===b&&(b=n[m.coord.id]={tile:m,coord:y,queryGeometry:[],scale:Math.pow(2,e.transform.zoom-m.coord.z)}),b.queryGeometry.push(_)}}var E=[];for(var w in n)E.push(n[w]);return E},e.prototype.redoPlacement=function(){for(var t=this,e=this.getIds(),n=0;n<e.length;n++){var i=t.getTileByID(e[n]);i.redoPlacement(t._source)}},e.prototype.getVisibleCoordinates=function(){for(var t=this,e=this.getRenderableIds().map(l.fromID),n=0,i=e;n<i.length;n+=1){var r=i[n];r.posMatrix=t.transform.calculatePosMatrix(r,t._source.maxzoom)}return e},e}(u);d.maxOverzooming=10,d.maxUnderzooming=3,e.exports=d},{"../data/extent":11,"../geo/coordinate":18,"../util/evented":120,"../util/lru_cache":126,"../util/util":131,"./source":52,"./tile":54,"./tile_coord":55}],54:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../data/bucket"),o=t("../data/feature_index"),s=t("vector-tile"),a=t("pbf"),u=t("../util/vectortile_to_geojson"),l=t("feature-filter"),c=t("../symbol/collision_tile"),h=t("../symbol/collision_box"),f=t("../symbol/symbol_instances"),p=t("../symbol/symbol_quads"),d=function(t,e,n){this.coord=t,this.uid=i.uniqueId(),this.uses=0,this.tileSize=e,this.sourceMaxZoom=n,this.buckets={},this.expires=null,this.cacheControl=null,this.state="loading"};d.prototype.registerFadeDuration=function(t,e){var n=e+this.timeAdded;n<Date.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n,t.set(this.fadeEndTime-Date.now()))},d.prototype.loadVectorData=function(t,e){this.hasData()&&this.unloadVectorData(e),this.state="loaded",t&&(t.rawTileData&&(this.rawTileData=t.rawTileData),this.collisionBoxArray=new h(t.collisionBoxArray),this.collisionTile=new c(t.collisionTile,this.collisionBoxArray),this.symbolInstancesArray=new f(t.symbolInstancesArray),this.symbolQuadsArray=new p(t.symbolQuadsArray),this.featureIndex=new o(t.featureIndex,this.rawTileData,this.collisionTile),this.buckets=r.deserialize(t.buckets,e.style))},d.prototype.reloadSymbolData=function(t,e){var n=this;if("unloaded"!==this.state){this.collisionTile=new c(t.collisionTile,this.collisionBoxArray),this.featureIndex.setCollisionTile(this.collisionTile);for(var o in this.buckets){var s=n.buckets[o];"symbol"===s.layers[0].type&&(s.destroy(),delete n.buckets[o])}i.extend(this.buckets,r.deserialize(t.buckets,e))}},d.prototype.unloadVectorData=function(){var t=this;for(var e in this.buckets)t.buckets[e].destroy();this.buckets={},this.collisionBoxArray=null,this.symbolQuadsArray=null,this.symbolInstancesArray=null,this.collisionTile=null,this.featureIndex=null,this.state="unloaded"},d.prototype.redoPlacement=function(t){var e=this;if("vector"===t.type||"geojson"===t.type)return"loaded"!==this.state?void(this.redoWhenDone=!0):void(this.collisionTile&&(this.state="reloading",t.dispatcher.send("redoPlacement",{type:t.type,uid:this.uid,source:t.id,angle:t.map.transform.angle,pitch:t.map.transform.pitch,showCollisionBoxes:t.map.showCollisionBoxes},function(n,i){e.reloadSymbolData(i,t.map.style),t.fire("data",{tile:e,coord:e.coord,dataType:"tile"}),t.map&&(t.map.painter.tileExtentVAO.vao=null),e.state="loaded",e.redoWhenDone&&(e.redoWhenDone=!1,e.redoPlacement(t))},this.workerID)))},d.prototype.getBucket=function(t){return this.buckets[t.id]},d.prototype.querySourceFeatures=function(t,e){var n=this;if(this.rawTileData){this.vtLayers||(this.vtLayers=new s.VectorTile(new a(this.rawTileData)).layers);var i=this.vtLayers._geojsonTileLayer||this.vtLayers[e.sourceLayer];if(i)for(var r=l(e&&e.filter),o={z:this.coord.z,x:this.coord.x,y:this.coord.y},c=0;c<i.length;c++){var h=i.feature(c);if(r(h)){var f=new u(h,n.coord.z,n.coord.x,n.coord.y);f.tile=o,t.push(f)}}}},d.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},d.prototype.setExpiryData=function(t){t.cacheControl&&(this.cacheControl=t.cacheControl),t.expires&&(this.expires=t.expires)},d.prototype.getExpiry=function(){if(this.cacheControl){var t=i.parseCacheControl(this.cacheControl);if(t["max-age"])return this.timeAdded+1e3*t["max-age"]}else if(this.expires)return new Date(this.expires).getTime()},e.exports=d},{"../data/bucket":2,"../data/feature_index":12,"../symbol/collision_box":80,"../symbol/collision_tile":82,"../symbol/symbol_instances":91,"../symbol/symbol_quads":92,"../util/util":131,"../util/vectortile_to_geojson":132,"feature-filter":145,pbf:198,"vector-tile":209}],55:[function(t,e,n){"use strict";function i(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function r(t,e,n,i,r){var o=Math.max(n,Math.floor(e.y0)),s=Math.min(i,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var a=t;t=e,e=a}for(var u=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,h=e.dx<0,f=o;f<s;f++){var p=u*Math.max(0,Math.min(t.dy,f+c-t.y0))+t.x0,d=l*Math.max(0,Math.min(e.dy,f+h-e.y0))+e.x0;r(Math.floor(d),Math.ceil(p),f)}}function o(t,e,n,o,s,a){var u,l=i(t,e),c=i(e,n),h=i(n,t);l.dy>c.dy&&(u=l,l=c,c=u),l.dy>h.dy&&(u=l,l=h,h=u),c.dy>h.dy&&(u=c,c=h,h=u),l.dy&&r(h,l,o,s,a),c.dy&&r(h,c,o,s,a)}function s(t,e,n){for(var i,r="",o=t;o>0;o--)i=1<<o-1,r+=(e&i?1:0)+(n&i?2:0);return r}var a=t("whoots-js"),u=t("../geo/coordinate"),l=function(t,e,n,i){isNaN(i)&&(i=0),this.z=+t,this.x=+e,this.y=+n,this.w=+i,i*=2,i<0&&(i=i*-1-1);var r=1<<this.z;this.id=32*(r*r*i+r*this.y+this.x)+this.z,this.posMatrix=null};l.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},l.prototype.toCoordinate=function(t){var e=Math.min(this.z,void 0===t?this.z:t),n=Math.pow(2,e),i=this.y,r=this.x+n*this.w;return new u(r,i,e)},l.prototype.url=function(t,e,n){var i=a.getTileBBox(this.x,this.y,this.z),r=s(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,e||this.z)).replace("{x}",this.x).replace("{y}","tms"===n?Math.pow(2,this.z)-this.y-1:this.y).replace("{quadkey}",r).replace("{bbox-epsg-3857}",i)},l.prototype.parent=function(t){return 0===this.z?null:this.z>t?new l(this.z-1,this.x,this.y,this.w):new l(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},l.prototype.wrapped=function(){return new l(this.z,this.x,this.y,0)},l.prototype.children=function(t){if(this.z>=t)return[new l(this.z+1,this.x,this.y,this.w)];var e=this.z+1,n=2*this.x,i=2*this.y;return[new l(e,n,i,this.w),new l(e,n+1,i,this.w),new l(e,n,i+1,this.w),new l(e,n+1,i+1,this.w)]},l.cover=function(t,e,n,i){function r(t,e,r){var o,u,c,h;if(r>=0&&r<=s)for(o=t;o<e;o++)u=Math.floor(o/s),c=(o%s+s)%s,0!==u&&i!==!0||(h=new l(n,c,r,u),a[h.id]=h)}void 0===i&&(i=!0);var s=1<<t,a={};return o(e[0],e[1],e[2],0,s,r),o(e[2],e[3],e[0],0,s,r),Object.keys(a).map(function(t){return a[t]})},l.fromID=function(t){var e=t%32,n=1<<e,i=(t-e)/32,r=i%n,o=(i-r)/n%n,s=Math.floor(i/(n*n));return s%2!==0&&(s=s*-1-1),s/=2,new l(e,r,o,s)},e.exports=l},{"../geo/coordinate":18,"whoots-js":217}],56:[function(t,e,n){"use strict";var i=t("../util/evented"),r=t("../util/util"),o=t("./load_tilejson"),s=t("../util/mapbox").normalizeTileURL,a=function(t){function e(e,n,i,o){if(t.call(this),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,r.extend(this,r.pick(n,["url","scheme","tileSize"])),this._options=r.extend({type:"vector"},n),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),o(this._options,function(e,n){return e?void t.fire("error",e):(r.extend(t,n),t.fire("data",{dataType:"source"}),void t.fire("source.load"))})},e.prototype.onAdd=function(t){this.load(),this.map=t},e.prototype.serialize=function(){return r.extend({},this._options)},e.prototype.loadTile=function(t,e){function n(n,i){if(!t.aborted){if(n)return e(n);t.setExpiryData(i),t.loadVectorData(i,this.map.painter),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(this)),e(null),t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)}}var i=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,r={url:s(t.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),uid:t.uid,coord:t.coord,zoom:t.coord.z,tileSize:this.tileSize*i,type:this.type,source:this.id,overscaling:i,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};t.workerID&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=e:this.dispatcher.send("reloadTile",r,n.bind(this),t.workerID):t.workerID=this.dispatcher.send("loadTile",r,n.bind(this))},e.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},e}(i);e.exports=a},{"../util/evented":120,"../util/mapbox":127,"../util/util":131,"./load_tilejson":47}],57:[function(t,e,n){"use strict";var i=t("../util/ajax"),r=t("vector-tile"),o=t("pbf"),s=t("./worker_tile"),a=t("../util/util"),u=function(t,e,n){this.actor=t,this.layerIndex=e,n&&(this.loadVectorData=n),this.loading={},this.loaded={}};u.prototype.loadTile=function(t,e){function n(t,n){return delete this.loading[i][r],t?e(t):n?(o.vectorTile=n,o.parse(n,this.layerIndex,this.actor,function(t,i,r){if(t)return e(t);var o={};n.expires&&(o.expires=n.expires),n.cacheControl&&(o.cacheControl=n.cacheControl),e(null,a.extend({rawTileData:n.rawData},i,o),r)}),this.loaded[i]=this.loaded[i]||{},void(this.loaded[i][r]=o)):e(null,null)}var i=t.source,r=t.uid;this.loading[i]||(this.loading[i]={});var o=this.loading[i][r]=new s(t);o.abort=this.loadVectorData(t,n.bind(this))},u.prototype.reloadTile=function(t,e){function n(t,n){if(this.reloadCallback){var i=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,o.layerIndex,o.actor,i)}e(t,n)}var i=this.loaded[t.source],r=t.uid,o=this;if(i&&i[r]){var s=i[r];"parsing"===s.status?s.reloadCallback=e:"done"===s.status&&s.parse(s.vectorTile,this.layerIndex,this.actor,n.bind(s));
}},u.prototype.abortTile=function(t){var e=this.loading[t.source],n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort(),delete e[n])},u.prototype.removeTile=function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n]},u.prototype.loadVectorData=function(t,e){function n(t,n){if(t)return e(t);var i=new r.VectorTile(new o(n.data));i.rawData=n.data,i.cacheControl=n.cacheControl,i.expires=n.expires,e(t,i)}var s=i.getArrayBuffer(t.url,n.bind(this));return function(){s.abort()}},u.prototype.redoPlacement=function(t,e){var n=this.loaded[t.source],i=this.loading[t.source],r=t.uid;if(n&&n[r]){var o=n[r],s=o.redoPlacement(t.angle,t.pitch,t.showCollisionBoxes);s.result&&e(null,s.result,s.transferables)}else i&&i[r]&&(i[r].angle=t.angle)},e.exports=u},{"../util/ajax":111,"../util/util":131,"./worker_tile":60,pbf:198,"vector-tile":209}],58:[function(t,e,n){"use strict";var i=t("../util/ajax"),r=t("./image_source"),o=function(t){function e(e,n,i,r){t.call(this,e,n,i,r),this.roundZoom=!0,this.type="video",this.options=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this,e=this.options;this.urls=e.urls,i.getVideo(e.urls,function(e,n){if(e)return t.fire("error",{error:e});t.video=n,t.video.loop=!0;var i;t.video.addEventListener("playing",function(){i=t.map.style.animationLoop.set(1/0),t.map._rerender()}),t.video.addEventListener("pause",function(){t.map.style.animationLoop.cancel(i)}),t.map&&t.video.play(),t._finishLoading()})},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(t){this.map||(this.load(),this.map=t,this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){!this.tile||this.video.readyState<2||this._prepareImage(this.map.painter.gl,this.video)},e.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},e}(r);e.exports=o},{"../util/ajax":111,"./image_source":45}],59:[function(t,e,n){"use strict";var i=t("../util/actor"),r=t("../style/style_layer_index"),o=t("./vector_tile_worker_source"),s=t("./geojson_worker_source"),a=t("./rtl_text_plugin"),u=function(t){var e=this;this.self=t,this.actor=new i(t,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:s},this.workerSources={},this.self.registerWorkerSource=function(t,n){if(e.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');e.workerSourceTypes[t]=n},this.self.registerRTLTextPlugin=function(t){if(a.applyArabicShaping||a.processBidirectionalText)throw new Error("RTL text plugin already registered.");a.applyArabicShaping=t.applyArabicShaping,a.processBidirectionalText=t.processBidirectionalText}};u.prototype.setLayers=function(t,e){this.getLayerIndex(t).replace(e)},u.prototype.updateLayers=function(t,e){this.getLayerIndex(t).update(e.layers,e.removedIds,e.symbolOrder)},u.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type).loadTile(e,n)},u.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type).reloadTile(e,n)},u.prototype.abortTile=function(t,e){this.getWorkerSource(t,e.type).abortTile(e)},u.prototype.removeTile=function(t,e){this.getWorkerSource(t,e.type).removeTile(e)},u.prototype.removeSource=function(t,e){var n=this.getWorkerSource(t,e.type);void 0!==n.removeSource&&n.removeSource(e)},u.prototype.redoPlacement=function(t,e,n){this.getWorkerSource(t,e.type).redoPlacement(e,n)},u.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t)}},u.prototype.loadRTLTextPlugin=function(t,e,n){try{a.applyArabicShaping||a.processBidirectionalText||this.self.importScripts(e)}catch(t){n(t)}},u.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e},u.prototype.getWorkerSource=function(t,e){var n=this;if(this.workerSources[t]||(this.workerSources[t]={}),!this.workerSources[t][e]){var i={send:function(e,i,r,o){n.actor.send(e,i,r,o,t)}};this.workerSources[t][e]=new this.workerSourceTypes[e](i,this.getLayerIndex(t))}return this.workerSources[t][e]},e.exports=function(t){return new u(t)}},{"../style/style_layer_index":73,"../util/actor":110,"./geojson_worker_source":43,"./rtl_text_plugin":51,"./vector_tile_worker_source":57}],60:[function(t,e,n){"use strict";function i(t,e){for(var n=0,i=t.layers;n<i.length;n+=1){var r=i[n];r.recalculate(e)}}function r(t,e){return t.filter(function(t){return!t.isEmpty()}).map(function(t){return t.serialize(e)})}var o=t("../data/feature_index"),s=t("../symbol/collision_tile"),a=t("../symbol/collision_box"),u=t("../util/dictionary_coder"),l=t("../util/util"),c=t("../symbol/symbol_instances"),h=t("../symbol/symbol_quads"),f=function(t){this.coord=t.coord,this.uid=t.uid,this.zoom=t.zoom,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=t.overscaling,this.angle=t.angle,this.pitch=t.pitch,this.showCollisionBoxes=t.showCollisionBoxes};f.prototype.parse=function(t,e,n,f){var p=this;t.layers||(t={layers:{_geojsonTileLayer:t}}),this.status="parsing",this.data=t,this.collisionBoxArray=new a,this.symbolInstancesArray=new c,this.symbolQuadsArray=new h;var d=new u(Object.keys(t.layers).sort()),g=new o(this.coord,this.overscaling);g.bucketLayerIDs={};var m={},y=0,v={featureIndex:g,iconDependencies:{},glyphDependencies:{}},_=e.familiesBySource[this.source];for(var x in _){var b=t.layers[x];if(b){1===b.version&&l.warnOnce('Vector tile source "'+p.source+'" layer "'+x+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var E=d.encode(x),w=[],S=0;S<b.length;S++){var I=b.feature(S);I.index=S,I.sourceLayerIndex=E,w.push(I)}for(var C=0,T=_[x];C<T.length;C+=1){var N=T[C],L=N[0];if(!(L.minzoom&&p.zoom<L.minzoom||L.maxzoom&&p.zoom>=L.maxzoom||L.layout&&"none"===L.layout.visibility)){for(var M=0,P=N;M<P.length;M+=1){var A=P[M];A.recalculate(p.zoom)}var R=m[L.id]=L.createBucket({index:y,layers:N,zoom:p.zoom,overscaling:p.overscaling,collisionBoxArray:p.collisionBoxArray,symbolQuadsArray:p.symbolQuadsArray,symbolInstancesArray:p.symbolInstancesArray});R.populate(w,v),g.bucketLayerIDs[y]=N.map(function(t){return t.id}),y++}}}}var O=function(t){p.status="done";var e=[];f(null,{buckets:r(l.values(m),e),featureIndex:g.serialize(e),collisionTile:t.serialize(e),collisionBoxArray:p.collisionBoxArray.serialize(),symbolInstancesArray:p.symbolInstancesArray.serialize(),symbolQuadsArray:p.symbolQuadsArray.serialize()},e)};this.symbolBuckets=[];for(var F=e.symbolOrder.length-1;F>=0;F--){var D=m[e.symbolOrder[F]];D&&p.symbolBuckets.push(D)}if(0===this.symbolBuckets.length)return O(new s(this.angle,this.pitch,this.collisionBoxArray));var z=0,k=Object.keys(v.iconDependencies),B=l.mapObject(v.glyphDependencies,function(t){return Object.keys(t).map(Number)}),j=function(t){if(t)return f(t);if(z++,2===z){for(var e=new s(p.angle,p.pitch,p.collisionBoxArray),n=0,r=p.symbolBuckets;n<r.length;n+=1){var o=r[n];i(o,p.zoom),o.prepare(B,k),o.place(e,p.showCollisionBoxes)}O(e)}};Object.keys(B).length?n.send("getGlyphs",{uid:this.uid,stacks:B},function(t,e){B=e,j(t)}):j(),k.length?n.send("getIcons",{icons:k},function(t,e){k=e,j(t)}):j()},f.prototype.redoPlacement=function(t,e,n){var o=this;if(this.angle=t,this.pitch=e,"done"!==this.status)return{};for(var a=new s(this.angle,this.pitch,this.collisionBoxArray),u=0,l=this.symbolBuckets;u<l.length;u+=1){var c=l[u];i(c,o.zoom),c.place(a,n)}var h=[];return{result:{buckets:r(this.symbolBuckets,h),collisionTile:a.serialize(h)},transferables:h}},e.exports=f},{"../data/feature_index":12,"../symbol/collision_box":80,"../symbol/collision_tile":82,"../symbol/symbol_instances":91,"../symbol/symbol_quads":92,"../util/dictionary_coder":117,"../util/util":131}],61:[function(t,e,n){"use strict";var i=function(){this.n=0,this.times=[]};i.prototype.stopped=function(){return this.times=this.times.filter(function(t){return t.time>=(new Date).getTime()}),!this.times.length},i.prototype.set=function(t){return this.times.push({id:this.n,time:t+(new Date).getTime()}),this.n++},i.prototype.cancel=function(t){this.times=this.times.filter(function(e){return e.id!==t})},e.exports=i},{}],62:[function(t,e,n){"use strict";var i=t("../util/evented"),r=t("../util/ajax"),o=t("../util/browser"),s=t("../util/mapbox").normalizeSpriteURL,a=function(){this.x=0,this.y=0,this.width=0,this.height=0,this.pixelRatio=1,this.sdf=!1},u=function(t){function e(e,n){var i=this;t.call(this),this.base=e,this.retina=o.devicePixelRatio>1,this.setEventedParent(n);var a=this.retina?"@2x":"";r.getJSON(s(e,a,".json"),function(t,e){return t?void i.fire("error",{error:t}):(i.data=e,void(i.imgData&&i.fire("data",{dataType:"style"})))}),r.getImage(s(e,a,".png"),function(t,e){if(t)return void i.fire("error",{error:t});i.imgData=o.getImageData(e);for(var n=0;n<i.imgData.length;n+=4){var r=i.imgData[n+3]/255;i.imgData[n+0]*=r,i.imgData[n+1]*=r,i.imgData[n+2]*=r}i.width=e.width,i.data&&i.fire("data",{dataType:"style"})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toJSON=function(){return this.base},e.prototype.loaded=function(){return!(!this.data||!this.imgData)},e.prototype.resize=function(){var t=this;if(o.devicePixelRatio>1!==this.retina){var n=new e(this.base);n.on("data",function(){t.data=n.data,t.imgData=n.imgData,t.width=n.width,t.retina=n.retina})}},e.prototype.getSpritePosition=function(t){if(!this.loaded())return new a;var e=this.data&&this.data[t];return e&&this.imgData?e:new a},e}(i);e.exports=u},{"../util/ajax":111,"../util/browser":112,"../util/evented":120,"../util/mapbox":127}],63:[function(t,e,n){"use strict";var i=t("./style_spec"),r=t("../util/util"),o=t("../util/evented"),s=t("./validate_style"),a=t("./style_declaration"),u=t("./style_transition"),l="-transition",c=function(t){function e(e){t.call(this),this.properties=["anchor","color","position","intensity"],this._specifications=i.light,this.set(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){var e=this;if(!this._validate(s.light,t)){this._declarations={},this._transitions={},this._transitionOptions={},this.calculated={},t=r.extend({anchor:this._specifications.anchor.default,color:this._specifications.color.default,position:this._specifications.position.default,intensity:this._specifications.intensity.default},t);for(var n=0,i=this.properties;n<i.length;n+=1){var o=i[n];e._declarations[o]=new a(e._specifications[o],t[o])}return this}},e.prototype.getLight=function(){return{anchor:this.getLightProperty("anchor"),color:this.getLightProperty("color"),position:this.getLightProperty("position"),intensity:this.getLightProperty("intensity")}},e.prototype.getLightProperty=function(t){return r.endsWith(t,l)?this._transitionOptions[t]:this._declarations[t]&&this._declarations[t].value},e.prototype.getLightValue=function(t,e){if("position"===t){var n=this._transitions[t].calculate(e),i=r.sphericalToCartesian(n);return{x:i[0],y:i[1],z:i[2]}}return this._transitions[t].calculate(e)},e.prototype.setLight=function(t){var e=this;if(!this._validate(s.light,t))for(var n in t){var i=t[n];r.endsWith(n,l)?e._transitionOptions[n]=i:null===i||void 0===i?delete e._declarations[n]:e._declarations[n]=new a(e._specifications[n],i)}},e.prototype.recalculate=function(t){var e=this;for(var n in this._declarations)e.calculated[n]=e.getLightValue(n,{zoom:t})},e.prototype._applyLightDeclaration=function(t,e,n,i,o){var s=n.transition?this._transitions[t]:void 0,c=this._specifications[t];if(null!==e&&void 0!==e||(e=new a(c,c.default)),!s||s.declaration.json!==e.json){var h=r.extend({duration:300,delay:0},i,this.getLightProperty(t+l)),f=this._transitions[t]=new u(c,e,s,h);f.instant()||(f.loopID=o.set(f.endTime-Date.now())),s&&o.cancel(s.loopID)}},e.prototype.updateLightTransitions=function(t,e,n){var i,r=this;for(i in this._declarations)r._applyLightDeclaration(i,r._declarations[i],t,e,n)},e.prototype._validate=function(t,e){return s.emitErrors(this,t.call(s,r.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:i})))},e}(o);e.exports=c},{"../util/evented":120,"../util/util":131,"./style_declaration":66,"./style_spec":74,"./style_transition":75,"./validate_style":76}],64:[function(t,e,n){"use strict";var i=t("csscolorparser").parseCSSColor,r=t("../util/util"),o=t("mapbox-gl-function"),s={};e.exports=function t(e){if(e&&o.isFunctionDefinition(e))return e.stops?r.extend({},e,{stops:e.stops.map(function(e){return[e[0],t(e[1])]})}):e;if("string"==typeof e){if(!s[e]){var n=i(e);if(!n)throw new Error("Invalid color "+e);s[e]=[n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]]}return s[e]}if(Array.isArray(e))return e;throw new Error("Invalid color "+e)}},{"../util/util":131,csscolorparser:142,"mapbox-gl-function":167}],65:[function(t,e,n){"use strict";var i=t("../util/evented"),r=t("./style_layer"),o=t("./image_sprite"),s=t("./light"),a=t("../symbol/glyph_source"),u=t("../symbol/sprite_atlas"),l=t("../render/line_atlas"),c=t("../util/util"),h=t("../util/ajax"),f=t("../util/mapbox"),p=t("../util/browser"),d=t("../util/dispatcher"),g=t("./animation_loop"),m=t("./validate_style"),y=t("../source/source"),v=t("../source/query_features"),_=t("../source/source_cache"),x=t("./style_spec"),b=t("mapbox-gl-function"),E=t("../global_worker_pool"),w=t("mapbox-gl-style-spec/lib/deref"),S=t("mapbox-gl-style-spec/lib/diff"),I=t("../source/rtl_text_plugin"),C=c.pick(S.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition"]),T=c.pick(S.operations,["setCenter","setZoom","setBearing","setPitch"]),N=function(t){function e(e,n,i){var r=this;t.call(this),this.map=n,this.animationLoop=n&&n.animationLoop||new g,this.dispatcher=new d(E(),this),this.spriteAtlas=new u(1024,1024),this.lineAtlas=new l(256,512),this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory={},this._loaded=!1,c.bindAll(["_redoPlacement"],this),this._resetUpdates(),i=c.extend({validate:"string"!=typeof e||!f.isMapboxURL(e)},i),this.setEventedParent(n),this.fire("dataloading",{dataType:"style"});var s=this;I.registerForPluginAvailability(function(t){s.dispatcher.broadcast("loadRTLTextPlugin",t,I.errorCallback);for(var e in s.sourceCaches)s.sourceCaches[e].reload()});var y=function(t,e){if(t)return void r.fire("error",{error:t});if(!i.validate||!m.emitErrors(r,m(e))){r._loaded=!0,r.stylesheet=e,r.updateClasses();for(var n in e.sources)r.addSource(n,e.sources[n],i);e.sprite&&(r.sprite=new o(e.sprite,r)),r.glyphSource=new a(e.glyphs),r._resolve(),r.fire("data",{dataType:"style"}),r.fire("style.load")}};"string"==typeof e?h.getJSON(f.normalizeStyleURL(e),y):p.frame(y.bind(this,null,e)),this.on("source.load",function(t){var e=r.sourceCaches[t.sourceId].getSource();if(e&&e.vectorLayerIds)for(var n in r._layers){var i=r._layers[n];i.source===e.id&&r._validateLayer(i)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(t.sourceLayer&&e){var n=e.getSource();("geojson"===n.type||n.vectorLayerIds&&n.vectorLayerIds.indexOf(t.sourceLayer)===-1)&&this.fire("error",{error:new Error('Source layer "'+t.sourceLayer+'" does not exist on source "'+n.id+'" as specified by style layer "'+t.id+'"')})}},e.prototype.loaded=function(){var t=this;if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!t.sourceCaches[e].loaded())return!1;return!(this.sprite&&!this.sprite.loaded())},e.prototype._resolve=function(){var t=this,e=w(this.stylesheet.layers);this._order=e.map(function(t){return t.id}),this._layers={};for(var n=0,i=e;n<i.length;n+=1){var o=i[n];o=r.create(o),o.setEventedParent(t,{layer:{id:o.id}}),t._layers[o.id]=o}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new s(this.stylesheet.light)},e.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},e.prototype._applyClasses=function(t,e){var n=this;if(this._loaded){t=t||[],e=e||{transition:!0};var i=this.stylesheet.transition||{},r=this._updatedAllPaintProps?this._layers:this._updatedPaintProps;for(var o in r){var s=n._layers[o],a=n._updatedPaintProps[o];if(n._updatedAllPaintProps||a.all)s.updatePaintTransitions(t,e,i,n.animationLoop,n.zoomHistory);else for(var u in a)n._layers[o].updatePaintTransition(u,t,e,i,n.animationLoop,n.zoomHistory)}this.light.updateLightTransitions(e,i,this.animationLoop)}},e.prototype._recalculate=function(t){var e=this;if(this._loaded){for(var n in this.sourceCaches)e.sourceCaches[n].used=!1;this._updateZoomHistory(t);for(var i=0,r=this._order;i<r.length;i+=1){var o=r[i],s=e._layers[o];s.recalculate(t),!s.isHidden(t)&&s.source&&(e.sourceCaches[s.source].used=!0)}this.light.recalculate(t);var a=300;Math.floor(this.z)!==Math.floor(t)&&this.animationLoop.set(a),this.z=t}},e.prototype._updateZoomHistory=function(t){var e=this.zoomHistory;void 0===e.lastIntegerZoom&&(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=0,e.lastZoom=t),Math.floor(e.lastZoom)<Math.floor(t)?(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=Date.now()):Math.floor(e.lastZoom)>Math.floor(t)&&(e.lastIntegerZoom=Math.floor(t+1),e.lastIntegerZoomTime=Date.now()),e.lastZoom=t},e.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},e.prototype.update=function(t,e){var n=this;if(this._changed){var i=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(i.length||r.length||this._updatedSymbolOrder)&&this._updateWorkerLayers(i,r);for(var o in this._updatedSources){var s=n._updatedSources[o];"reload"===s?n._reloadSource(o):"clear"===s&&n._clearSource(o)}this._applyClasses(t,e),this._resetUpdates(),this.fire("data",{dataType:"style"})}},e.prototype._updateWorkerLayers=function(t,e){var n=this,i=this._updatedSymbolOrder?this._order.filter(function(t){return"symbol"===n._layers[t].type}):null;this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e,symbolOrder:i})},e.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSymbolOrder=!1,this._updatedSources={},this._updatedPaintProps={},this._updatedAllPaintProps=!1},e.prototype.setState=function(t){var e=this;if(this._checkLoaded(),m.emitErrors(this,m(t)))return!1;t=c.extend({},t),t.layers=w(t.layers);var n=S(this.serialize(),t).filter(function(t){return!(t.command in T)});if(0===n.length)return!1;var i=n.filter(function(t){return!(t.command in C)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return n.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},e.prototype.addSource=function(t,e,n){if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e)+".");var i=["vector","raster","geojson","video","image","canvas"],r=i.indexOf(e.type)>=0;if(!r||!this._validate(m.source,"sources."+t,e,null,n)){var o=this.sourceCaches[t]=new _(t,e,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:o.loaded(),source:o.serialize(),sourceId:t}}),o.onAdd(this.map),this._changed=!0}},e.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");var e=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],e.setEventedParent(null),e.clearTiles(),e.onRemove&&e.onRemove(this.map),this._changed=!0},e.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},e.prototype.addLayer=function(t,e,n){this._checkLoaded();var i=t.id;if("object"==typeof t.source&&(this.addSource(i,t.source),t=c.extend(t,{source:i})),!this._validate(m.layer,"layers."+i,t,{arrayIndex:-1},n)){var o=r.create(t);this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}});var s=e?this._order.indexOf(e):this._order.length;if(this._order.splice(s,0,i),this._layers[i]=o,this._removedLayers[i]&&o.source){var a=this._removedLayers[i];delete this._removedLayers[i],this._updatedSources[o.source]=a.type!==o.type?"clear":"reload"}this._updateLayer(o),"symbol"===o.type&&(this._updatedSymbolOrder=!0),this.updateClasses(i)}},e.prototype.moveLayer=function(t,e){this._checkLoaded(),this._changed=!0;var n=this._layers[t];if(!n)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")});var i=this._order.indexOf(t);this._order.splice(i,1);var r=e?this._order.indexOf(e):this._order.length;this._order.splice(r,0,t),"symbol"===n.type&&(this._updatedSymbolOrder=!0,n.source&&!this._updatedSources[n.source]&&(this._updatedSources[n.source]="reload"))},e.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(!e)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")});e.setEventedParent(null);var n=this._order.indexOf(t);this._order.splice(n,1),"symbol"===e.type&&(this._updatedSymbolOrder=!0),this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t]},e.prototype.getLayer=function(t){return this._layers[t]},e.prototype.setLayerZoomRange=function(t,e,n){this._checkLoaded();var i=this.getLayer(t);return i?void(i.minzoom===e&&i.maxzoom===n||(null!=e&&(i.minzoom=e),null!=n&&(i.maxzoom=n),this._updateLayer(i))):void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")})},e.prototype.setFilter=function(t,e){this._checkLoaded();var n=this.getLayer(t);return n?void(null!==e&&void 0!==e&&this._validate(m.filter,"layers."+n.id+".filter",e)||c.deepEqual(n.filter,e)||(n.filter=c.clone(e),this._updateLayer(n))):void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")})},e.prototype.getFilter=function(t){return c.clone(this.getLayer(t).filter)},e.prototype.setLayoutProperty=function(t,e,n){this._checkLoaded();var i=this.getLayer(t);return i?void(c.deepEqual(i.getLayoutProperty(e),n)||(i.setLayoutProperty(e,n),this._updateLayer(i))):void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")})},e.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},e.prototype.setPaintProperty=function(t,e,n,i){this._checkLoaded();var r=this.getLayer(t);if(!r)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")});if(!c.deepEqual(r.getPaintProperty(e,i),n)){var o=r.isPaintValueFeatureConstant(e);r.setPaintProperty(e,n,i);var s=!(n&&b.isFunctionDefinition(n)&&"$zoom"!==n.property&&void 0!==n.property);s&&o||this._updateLayer(r),this.updateClasses(t,e)}},e.prototype.getPaintProperty=function(t,e,n){return this.getLayer(t).getPaintProperty(e,n)},e.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},e.prototype.updateClasses=function(t,e){if(this._changed=!0,t){var n=this._updatedPaintProps;n[t]||(n[t]={}),n[t][e||"all"]=!0}else this._updatedAllPaintProps=!0},e.prototype.serialize=function(){var t=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(e){return t._layers[e].serialize()})},function(t){return void 0!==t})},e.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload"),this._changed=!0},e.prototype._flattenRenderedFeatures=function(t){for(var e=this,n=[],i=this._order.length-1;i>=0;i--)for(var r=e._order[i],o=0,s=t;o<s.length;o+=1){var a=s[o],u=a[r];if(u)for(var l=0,c=u;l<c.length;l+=1){var h=c[l];n.push(h)}}return n},e.prototype.queryRenderedFeatures=function(t,e,n,i){var r=this;e&&e.filter&&this._validate(m.filter,"queryRenderedFeatures.filter",e.filter);var o={};if(e&&e.layers)for(var s=0,a=e.layers;s<a.length;s+=1){var u=a[s],l=r._layers[u];if(!l)return void r.fire("error",{error:"The layer '"+u+"' does not exist in the map's style and cannot be queried for features."});o[l.source]=!0}var c=[];for(var h in this.sourceCaches)if(!e.layers||o[h]){var f=v.rendered(r.sourceCaches[h],r._layers,t,e,n,i);c.push(f)}return this._flattenRenderedFeatures(c)},e.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(m.filter,"querySourceFeatures.filter",e.filter);var n=this.sourceCaches[t];return n?v.source(n,e):[]},e.prototype.addSourceType=function(t,e,n){return y.getType(t)?n(new Error('A source type called "'+t+'" already exists.')):(y.setType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},e.prototype.getLight=function(){return this.light.getLight()},e.prototype.setLight=function(t,e){this._checkLoaded();var n=this.light.getLight(),i=!1;for(var r in t)if(!c.deepEqual(t[r],n[r])){i=!0;break}if(i){var o=this.stylesheet.transition||{};this.light.setLight(t),this.light.updateLightTransitions(e||{transition:!0},o,this.animationLoop)}},e.prototype._validate=function(t,e,n,i,r){return(!r||r.validate!==!1)&&m.emitErrors(this,t.call(m,c.extend({key:e,style:this.serialize(),value:n,styleSpec:x},i)))},e.prototype._remove=function(){var t=this;for(var e in this.sourceCaches)t.sourceCaches[e].clearTiles();this.dispatcher.remove()},e.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},e.prototype._reloadSource=function(t){this.sourceCaches[t].reload()},e.prototype._updateSources=function(t){var e=this;for(var n in this.sourceCaches)e.sourceCaches[n].update(t)},e.prototype._redoPlacement=function(){var t=this;for(var e in this.sourceCaches)t.sourceCaches[e].redoPlacement()},e.prototype.getIcons=function(t,e,n){var i=this,r=function(){i.spriteAtlas.setSprite(i.sprite),i.spriteAtlas.addIcons(e.icons,n)};this.sprite.loaded()?r():this.sprite.on("data",r)},e.prototype.getGlyphs=function(t,e,n){function i(t,e,i){t&&console.error(t),a[i]=e,s--,0===s&&n(null,a)}var r=this,o=e.stacks,s=Object.keys(o).length,a={};for(var u in o)r.glyphSource.getSimpleGlyphs(u,o[u],e.uid,i)},e}(i);e.exports=N},{"../global_worker_pool":22,"../render/line_atlas":35,"../source/query_features":49,"../source/rtl_text_plugin":51,"../source/source":52,"../source/source_cache":53,"../symbol/glyph_source":85,"../symbol/sprite_atlas":90,"../util/ajax":111,"../util/browser":112,"../util/dispatcher":118,"../util/evented":120,"../util/mapbox":127,"../util/util":131,"./animation_loop":61,"./image_sprite":62,"./light":63,"./style_layer":67,"./style_spec":74,"./validate_style":76,"mapbox-gl-function":167,"mapbox-gl-style-spec/lib/deref":168,"mapbox-gl-style-spec/lib/diff":169}],66:[function(t,e,n){"use strict";var i=t("mapbox-gl-function"),r=t("./parse_color"),o=t("../util/util"),s=function(t,e){var n=this;this.value=o.clone(e),this.isFunction=i.isFunctionDefinition(e),this.json=JSON.stringify(this.value),this.minimum=t.minimum,this.isColor="color"===t.type;var s=this.isColor&&this.value?r(this.value):e,a=t.default;if(a&&"color"===t.type&&(a=r(a)),this.function=i[t.function||"piecewise-constant"](s,a),this.isFeatureConstant=this.function.isFeatureConstant,this.isZoomConstant=this.function.isZoomConstant,!this.isFeatureConstant&&!this.isZoomConstant){this.stopZoomLevels=[];for(var u=[],l=0,c=this.value.stops;l<c.length;l+=1){var h=c[l],f=h[0].zoom;n.stopZoomLevels.indexOf(f)<0&&(n.stopZoomLevels.push(f),u.push([f,u.length]))}this.functionInterpolationT=i.interpolated({stops:u,base:e.base,colorSpace:e.colorSpace})}};s.prototype.calculate=function(t,e){var n=this.function(t&&t.zoom,e||{});return this.isColor&&n?r(n):void 0!==this.minimum&&n<this.minimum?this.minimum:n},s.prototype.calculateInterpolationT=function(t,e){return this.functionInterpolationT(t&&t.zoom,e||{})},e.exports=s},{"../util/util":131,"./parse_color":64,"mapbox-gl-function":167}],67:[function(t,e,n){"use strict";function i(t){return t.value}var r=t("../util/util"),o=t("./style_transition"),s=t("./style_declaration"),a=t("./style_spec"),u=t("./validate_style"),l=t("./parse_color"),c=t("../util/evented"),h="-transition",f=function(t){function e(e){var n=this;t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.source=e.source,this.sourceLayer=e["source-layer"],this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.filter=e.filter,this.paint={},this.layout={},this._paintSpecifications=a["paint_"+this.type],this._layoutSpecifications=a["layout_"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var i,r,o={validate:!1};for(var s in e){var u=s.match(/^paint(?:\.(.*))?$/);if(u){var l=u[1]||"";for(i in e[s])n.setPaintProperty(i,e[s][i],l,o)}}for(r in e.layout)n.setLayoutProperty(r,e.layout[r],o);for(i in this._paintSpecifications)n.paint[i]=n.getPaintValue(i);for(r in this._layoutSpecifications)n._updateLayoutValue(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setLayoutProperty=function(t,e,n){if(null==e)delete this._layoutDeclarations[t];else{var i="layers."+this.id+".layout."+t;if(this._validate(u.layoutProperty,i,t,e,n))return;this._layoutDeclarations[t]=new s(this._layoutSpecifications[t],e)}this._updateLayoutValue(t)},e.prototype.getLayoutProperty=function(t){return this._layoutDeclarations[t]&&this._layoutDeclarations[t].value},e.prototype.getLayoutValue=function(t,e,n){var i=this._layoutSpecifications[t],r=this._layoutDeclarations[t];return r?r.calculate(e,n):i.default},e.prototype.setPaintProperty=function(t,e,n,i){var o="layers."+this.id+(n?'["paint.'+n+'"].':".paint.")+t;if(r.endsWith(t,h))if(this._paintTransitionOptions[n||""]||(this._paintTransitionOptions[n||""]={}),null===e||void 0===e)delete this._paintTransitionOptions[n||""][t];else{if(this._validate(u.paintProperty,o,t,e,i))return;this._paintTransitionOptions[n||""][t]=e}else if(this._paintDeclarations[n||""]||(this._paintDeclarations[n||""]={}),null===e||void 0===e)delete this._paintDeclarations[n||""][t];else{if(this._validate(u.paintProperty,o,t,e,i))return;this._paintDeclarations[n||""][t]=new s(this._paintSpecifications[t],e)}},e.prototype.getPaintProperty=function(t,e){return e=e||"",r.endsWith(t,h)?this._paintTransitionOptions[e]&&this._paintTransitionOptions[e][t]:this._paintDeclarations[e]&&this._paintDeclarations[e][t]&&this._paintDeclarations[e][t].value},e.prototype.getPaintValue=function(t,e,n){var i=this._paintSpecifications[t],r=this._paintTransitions[t];return r?r.calculate(e,n):"color"===i.type&&i.default?l(i.default):i.default},e.prototype.getPaintValueStopZoomLevels=function(t){var e=this._paintTransitions[t];return e?e.declaration.stopZoomLevels:[]},e.prototype.getPaintInterpolationT=function(t,e){var n=this._paintTransitions[t];return n.declaration.calculateInterpolationT(e)},e.prototype.isPaintValueFeatureConstant=function(t){var e=this._paintTransitions[t];return!e||e.declaration.isFeatureConstant},e.prototype.isLayoutValueFeatureConstant=function(t){var e=this._layoutDeclarations[t];return!e||e.isFeatureConstant;
},e.prototype.isPaintValueZoomConstant=function(t){var e=this._paintTransitions[t];return!e||e.declaration.isZoomConstant},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.layout.visibility},e.prototype.updatePaintTransitions=function(t,e,n,i,o){for(var s=this,a=r.extend({},this._paintDeclarations[""]),u=0;u<t.length;u++)r.extend(a,s._paintDeclarations[t[u]]);var l;for(l in a)s._applyPaintDeclaration(l,a[l],e,n,i,o);for(l in this._paintTransitions)l in a||s._applyPaintDeclaration(l,null,e,n,i,o)},e.prototype.updatePaintTransition=function(t,e,n,i,r,o){for(var s=this,a=this._paintDeclarations[""][t],u=0;u<e.length;u++){var l=s._paintDeclarations[e[u]];l&&l[t]&&(a=l[t])}this._applyPaintDeclaration(t,a,n,i,r,o)},e.prototype.recalculate=function(t){var e=this;for(var n in this._paintTransitions)e.paint[n]=e.getPaintValue(n,{zoom:t});for(var i in this._layoutFunctions)e.layout[i]=e.getLayoutValue(i,{zoom:t})},e.prototype.serialize=function(){var t=this,e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:r.mapObject(this._layoutDeclarations,i)};for(var n in this._paintDeclarations){var o=""===n?"paint":"paint."+n;e[o]=r.mapObject(t._paintDeclarations[n],i)}return r.filterObject(e,function(t,e){return void 0!==t&&!("layout"===e&&!Object.keys(t).length)})},e.prototype._applyPaintDeclaration=function(t,e,n,i,a,u){var l=n.transition?this._paintTransitions[t]:void 0,c=this._paintSpecifications[t];if(null!==e&&void 0!==e||(e=new s(c,c.default)),!l||l.declaration.json!==e.json){var f=r.extend({duration:300,delay:0},i,this.getPaintProperty(t+h)),p=this._paintTransitions[t]=new o(c,e,l,f,u);p.instant()||(p.loopID=a.set(p.endTime-Date.now())),l&&a.cancel(l.loopID)}},e.prototype._updateLayoutValue=function(t){var e=this._layoutDeclarations[t];e&&e.isFunction?this._layoutFunctions[t]=!0:(delete this._layoutFunctions[t],this.layout[t]=this.getLayoutValue(t))},e.prototype._validate=function(t,e,n,i,r){return(!r||r.validate!==!1)&&u.emitErrors(this,t.call(u,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:a,style:{glyphs:!0,sprite:!0}}))},e}(c);e.exports=f;var p={circle:t("./style_layer/circle_style_layer"),fill:t("./style_layer/fill_style_layer"),"fill-extrusion":t("./style_layer/fill_extrusion_style_layer"),line:t("./style_layer/line_style_layer"),symbol:t("./style_layer/symbol_style_layer")};f.create=function(t){var e=p[t.type]||f;return new e(t)}},{"../util/evented":120,"../util/util":131,"./parse_color":64,"./style_declaration":66,"./style_layer/circle_style_layer":68,"./style_layer/fill_extrusion_style_layer":69,"./style_layer/fill_style_layer":70,"./style_layer/line_style_layer":71,"./style_layer/symbol_style_layer":72,"./style_spec":74,"./style_transition":75,"./validate_style":76}],68:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/circle_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new r(t)},e}(i);e.exports=o},{"../../data/bucket/circle_bucket":3,"../style_layer":67}],69:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/fill_extrusion_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,n,i){var r=t.prototype.getPaintValue.call(this,e,n,i);return"fill-extrusion-color"===e&&r&&(r[3]=1),r},e.prototype.createBucket=function(t){return new r(t)},e}(i);e.exports=o},{"../../data/bucket/fill_extrusion_bucket":5,"../style_layer":67}],70:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/fill_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,n,i){var r=this;if("fill-outline-color"===e){if(void 0===this.getPaintProperty("fill-outline-color"))return t.prototype.getPaintValue.call(this,"fill-color",n,i);for(var o=this._paintTransitions["fill-outline-color"];o;){var s=o&&o.declaration&&o.declaration.value;if(!s)return t.prototype.getPaintValue.call(r,"fill-color",n,i);o=o.oldTransition}}return t.prototype.getPaintValue.call(this,e,n,i)},e.prototype.getPaintValueStopZoomLevels=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):t.prototype.getPaintValueStopZoomLevels.call(this,e)},e.prototype.getPaintInterpolationT=function(e,n){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.getPaintInterpolationT.call(this,"fill-color",n):t.prototype.getPaintInterpolationT.call(this,e,n)},e.prototype.isPaintValueFeatureConstant=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):t.prototype.isPaintValueFeatureConstant.call(this,e)},e.prototype.isPaintValueZoomConstant=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.isPaintValueZoomConstant.call(this,"fill-color"):t.prototype.isPaintValueZoomConstant.call(this,e)},e.prototype.createBucket=function(t){return new r(t)},e}(i);e.exports=o},{"../../data/bucket/fill_bucket":4,"../style_layer":67}],71:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/line_bucket"),o=t("../../util/util"),s=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,n,i){var r=t.prototype.getPaintValue.call(this,e,n,i);if(r&&"line-dasharray"===e){var s=this.getPaintValue("line-width",o.extend({},n,{zoom:Math.floor(n.zoom)}),i);r.fromScale*=s,r.toScale*=s}return r},e.prototype.createBucket=function(t){return new r(t)},e}(i);e.exports=s},{"../../data/bucket/line_bucket":6,"../../util/util":131,"../style_layer":67}],72:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/symbol_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayoutValue=function(e,n,i){var r=t.prototype.getLayoutValue.call(this,e,n,i);if("auto"!==r)return r;switch(e){case"text-rotation-alignment":case"icon-rotation-alignment":return"line"===this.getLayoutValue("symbol-placement",n,i)?"map":"viewport";case"text-pitch-alignment":return this.getLayoutValue("text-rotation-alignment",n,i);default:return r}},e.prototype.createBucket=function(t){return new r(t)},e}(i);e.exports=o},{"../../data/bucket/symbol_bucket":7,"../style_layer":67}],73:[function(t,e,n){"use strict";var i=t("./style_layer"),r=t("../util/util"),o=t("feature-filter"),s=t("mapbox-gl-style-spec/lib/group_by_layout"),a=function(t){t&&this.replace(t)};a.prototype.replace=function(t){var e=this;this.symbolOrder=[];for(var n=0,i=t;n<i.length;n+=1){var r=i[n];"symbol"===r.type&&e.symbolOrder.push(r.id)}this._layerConfigs={},this._layers={},this.update(t,[])},a.prototype.update=function(t,e,n){for(var a=this,u=0,l=t;u<l.length;u+=1){var c=l[u];a._layerConfigs[c.id]=c;var h=a._layers[c.id]=i.create(c);h.updatePaintTransitions({},{transition:!1}),h.filter=o(h.filter)}for(var f=0,p=e;f<p.length;f+=1){var d=p[f];delete a._layerConfigs[d],delete a._layers[d]}n&&(this.symbolOrder=n),this.familiesBySource={};for(var g=s(r.values(this._layerConfigs)),m=0,y=g;m<y.length;m+=1){var v=y[m],_=v.map(function(t){return a._layers[t.id]}),x=_[0];if(!x.layout||"none"!==x.layout.visibility){var b=x.source||"",E=a.familiesBySource[b];E||(E=a.familiesBySource[b]={});var w=x.sourceLayer||"_geojsonTileLayer",S=E[w];S||(S=E[w]=[]),S.push(_)}}},e.exports=a},{"../util/util":131,"./style_layer":67,"feature-filter":145,"mapbox-gl-style-spec/lib/group_by_layout":171}],74:[function(t,e,n){"use strict";e.exports=t("mapbox-gl-style-spec/reference/latest.min")},{"mapbox-gl-style-spec/reference/latest.min":194}],75:[function(t,e,n){"use strict";function i(t,e,n){if(void 0!==t&&void 0!==e)return{from:t.to,fromScale:t.toScale,to:e.to,toScale:e.toScale,t:n}}var r=t("../util/util"),o=t("../util/interpolate"),s={lastIntegerZoom:0,lastIntegerZoomTime:0,lastZoom:0},a=function(t,e,n,r,a){this.declaration=e,this.startTime=this.endTime=(new Date).getTime(),this.oldTransition=n,this.duration=r.duration||0,this.delay=r.delay||0,this.zoomTransitioned="piecewise-constant"===t.function&&t.transition,this.interp=this.zoomTransitioned?i:o[t.type],this.zoomHistory=a||s,this.instant()||(this.endTime=this.startTime+this.duration+this.delay),n&&n.endTime<=this.startTime&&delete n.oldTransition};a.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},a.prototype.calculate=function(t,e,n){var i=this._calculateTargetValue(t,e);if(this.instant())return i;if(n=n||Date.now(),n>=this.endTime)return i;var o=this.oldTransition.calculate(t,e,this.startTime),s=r.easeCubicInOut((n-this.startTime-this.delay)/this.duration);return this.interp(o,i,s)},a.prototype._calculateTargetValue=function(t,e){if(!this.zoomTransitioned)return this.declaration.calculate(t,e);var n=t.zoom,i=this.zoomHistory.lastIntegerZoom,r=n>i?2:.5,s=this.declaration.calculate({zoom:n>i?n-1:n+1},e),a=this.declaration.calculate({zoom:n},e),u=Math.min((Date.now()-this.zoomHistory.lastIntegerZoomTime)/this.duration,1),l=Math.abs(n-i),c=o(u,1,l);return void 0!==s&&void 0!==a?{from:s,fromScale:r,to:a,toScale:1,t:c}:void 0},e.exports=a},{"../util/interpolate":123,"../util/util":131}],76:[function(t,e,n){"use strict";e.exports=t("mapbox-gl-style-spec/lib/validate_style.min"),e.exports.emitErrors=function(t,e){if(e&&e.length){for(var n=0;n<e.length;n++)t.fire("error",{error:new Error(e[n].message)});return!0}return!1}},{"mapbox-gl-style-spec/lib/validate_style.min":193}],77:[function(t,e,n){"use strict";var i=t("point-geometry"),r=function(t){function e(e,n,i,r){t.call(this,e,n),this.angle=i,void 0!==r&&(this.segment=r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);e.exports=r},{"point-geometry":200}],78:[function(t,e,n){"use strict";function i(t,e,n,i,r){if(void 0===e.segment)return!0;for(var o=e,s=e.segment+1,a=0;a>-n/2;){if(s--,s<0)return!1;a-=t[s].dist(o),o=t[s]}a+=t[s].dist(t[s+1]),s++;for(var u=[],l=0;a<n/2;){var c=t[s-1],h=t[s],f=t[s+1];if(!f)return!1;var p=c.angleTo(h)-h.angleTo(f);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:a,angleDelta:p}),l+=p;a-u[0].distance>i;)l-=u.shift().angleDelta;if(l>r)return!1;s++,a+=h.dist(f)}return!0}e.exports=i},{}],79:[function(t,e,n){"use strict";function i(t,e,n,i,o){for(var s=[],a=0;a<t.length;a++)for(var u,l=t[a],c=0;c<l.length-1;c++){var h=l[c],f=l[c+1];h.x<e&&f.x<e||(h.x<e?h=new r(e,h.y+(f.y-h.y)*((e-h.x)/(f.x-h.x)))._round():f.x<e&&(f=new r(e,h.y+(f.y-h.y)*((e-h.x)/(f.x-h.x)))._round()),h.y<n&&f.y<n||(h.y<n?h=new r(h.x+(f.x-h.x)*((n-h.y)/(f.y-h.y)),n)._round():f.y<n&&(f=new r(h.x+(f.x-h.x)*((n-h.y)/(f.y-h.y)),n)._round()),h.x>=i&&f.x>=i||(h.x>=i?h=new r(i,h.y+(f.y-h.y)*((i-h.x)/(f.x-h.x)))._round():f.x>=i&&(f=new r(i,h.y+(f.y-h.y)*((i-h.x)/(f.x-h.x)))._round()),h.y>=o&&f.y>=o||(h.y>=o?h=new r(h.x+(f.x-h.x)*((o-h.y)/(f.y-h.y)),o)._round():f.y>=o&&(f=new r(h.x+(f.x-h.x)*((o-h.y)/(f.y-h.y)),o)._round()),u&&h.equals(u[u.length-1])||(u=[h],s.push(u)),u.push(f)))))}return s}var r=t("point-geometry");e.exports=i},{"point-geometry":200}],80:[function(t,e,n){"use strict";var i=t("../util/struct_array"),r=t("point-geometry"),o=i({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});Object.defineProperty(o.prototype.StructType.prototype,"anchorPoint",{get:function(){return new r(this.anchorPointX,this.anchorPointY)}}),e.exports=o},{"../util/struct_array":129,"point-geometry":200}],81:[function(t,e,n){"use strict";var i=function(t,e,n,i,r,o,s,a,u,l,c){var h=s.top*a-u,f=s.bottom*a+u,p=s.left*a-u,d=s.right*a+u;if(this.boxStartIndex=t.length,l){var g=f-h,m=d-p;if(g>0)if(g=Math.max(10*a,g),c){var y=e[n.segment+1].sub(e[n.segment])._unit()._mult(m),v=[n.sub(y),n.add(y)];this._addLineCollisionBoxes(t,v,n,0,m,g,i,r,o)}else this._addLineCollisionBoxes(t,e,n,n.segment,m,g,i,r,o)}else t.emplaceBack(n.x,n.y,p,h,d,f,1/0,i,r,o,0,0,0,0,0);this.boxEndIndex=t.length};i.prototype._addLineCollisionBoxes=function(t,e,n,i,r,o,s,a,u){var l=o/2,c=Math.floor(r/l),h=-o/2,f=this.boxes,p=n,d=i+1,g=h;do{if(d--,d<0)return f;g-=e[d].dist(p),p=e[d]}while(g>-r/2);for(var m=e[d].dist(e[d+1]),y=0;y<c;y++){for(var v=-r/2+y*l;g+m<v;){if(g+=m,d++,d+1>=e.length)return f;m=e[d].dist(e[d+1])}var _=v-g,x=e[d],b=e[d+1],E=b.sub(x)._unit()._mult(_)._add(x)._round(),w=Math.max(Math.abs(v-h)-l/2,0),S=r/2/w;t.emplaceBack(E.x,E.y,-o/2,-o/2,o/2,o/2,S,s,a,u,0,0,0,0,0)}return f},e.exports=i},{}],82:[function(t,e,n){"use strict";var i=t("point-geometry"),r=t("../data/extent"),o=t("grid-index"),s=t("../util/intersection_tests"),a=function(t,e,n){if("object"==typeof t){var i=t;n=e,t=i.angle,e=i.pitch,this.grid=new o(i.grid),this.ignoredGrid=new o(i.ignoredGrid)}else this.grid=new o(r,12,6),this.ignoredGrid=new o(r,12,0);this.minScale=.5,this.maxScale=2,this.angle=t,this.pitch=e;var s=Math.sin(t),a=Math.cos(t);if(this.rotationMatrix=[a,-s,s,a],this.reverseRotationMatrix=[a,s,-s,a],this.yStretch=1/Math.cos(e/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3),this.collisionBoxArray=n,0===n.length){n.emplaceBack();var u=32767;n.emplaceBack(0,0,0,-u,0,u,u,0,0,0,0,0,0,0,0,0),n.emplaceBack(r,0,0,-u,0,u,u,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,0,-u,0,u,0,u,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,r,-u,0,u,0,u,0,0,0,0,0,0,0,0,0)}this.tempCollisionBox=n.get(0),this.edges=[n.get(1),n.get(2),n.get(3),n.get(4)]};a.prototype.serialize=function(t){var e=this.grid.toArrayBuffer(),n=this.ignoredGrid.toArrayBuffer();return t&&(t.push(e),t.push(n)),{angle:this.angle,pitch:this.pitch,grid:e,ignoredGrid:n}},a.prototype.placeCollisionFeature=function(t,e,n){for(var r=this,o=this.collisionBoxArray,s=this.minScale,a=this.rotationMatrix,u=this.yStretch,l=t.boxStartIndex;l<t.boxEndIndex;l++){var c=o.get(l),h=c.anchorPoint._matMult(a),f=h.x,p=h.y,d=f+c.x1,g=p+c.y1*u,m=f+c.x2,y=p+c.y2*u;if(c.bbox0=d,c.bbox1=g,c.bbox2=m,c.bbox3=y,!e)for(var v=r.grid.query(d,g,m,y),_=0;_<v.length;_++){var x=o.get(v[_]),b=x.anchorPoint._matMult(a);if(s=r.getPlacementScale(s,h,c,b,x),s>=r.maxScale)return s}if(n){var E;if(r.angle){var w=r.reverseRotationMatrix,S=new i(c.x1,c.y1).matMult(w),I=new i(c.x2,c.y1).matMult(w),C=new i(c.x1,c.y2).matMult(w),T=new i(c.x2,c.y2).matMult(w);E=r.tempCollisionBox,E.anchorPointX=c.anchorPoint.x,E.anchorPointY=c.anchorPoint.y,E.x1=Math.min(S.x,I.x,C.x,T.x),E.y1=Math.min(S.y,I.x,C.x,T.x),E.x2=Math.max(S.x,I.x,C.x,T.x),E.y2=Math.max(S.y,I.x,C.x,T.x),E.maxScale=c.maxScale}else E=c;for(var N=0;N<this.edges.length;N++){var L=r.edges[N];if(s=r.getPlacementScale(s,c.anchorPoint,E,L.anchorPoint,L),s>=r.maxScale)return s}}}return s},a.prototype.queryRenderedSymbols=function(t,e){var n={},r=[];if(0===t.length||0===this.grid.length&&0===this.ignoredGrid.length)return r;for(var o=this.collisionBoxArray,a=this.rotationMatrix,u=this.yStretch,l=[],c=1/0,h=1/0,f=-(1/0),p=-(1/0),d=0;d<t.length;d++)for(var g=t[d],m=0;m<g.length;m++){var y=g[m].matMult(a);c=Math.min(c,y.x),h=Math.min(h,y.y),f=Math.max(f,y.x),p=Math.max(p,y.y),l.push(y)}for(var v=this.grid.query(c,h,f,p),_=this.ignoredGrid.query(c,h,f,p),x=0;x<_.length;x++)v.push(_[x]);for(var b=Math.pow(2,Math.ceil(Math.log(e)/Math.LN2*10)/10),E=0;E<v.length;E++){var w=o.get(v[E]),S=w.sourceLayerIndex,I=w.featureIndex;if(void 0===n[S]&&(n[S]={}),!n[S][I]&&!(b<w.placementScale||b>w.maxScale)){var C=w.anchorPoint.matMult(a),T=C.x+w.x1/e,N=C.y+w.y1/e*u,L=C.x+w.x2/e,M=C.y+w.y2/e*u,P=[new i(T,N),new i(L,N),new i(L,M),new i(T,M)];s.polygonIntersectsPolygon(l,P)&&(n[S][I]=!0,r.push(v[E]))}}return r},a.prototype.getPlacementScale=function(t,e,n,i,r){var o=e.x-i.x,s=e.y-i.y,a=(r.x1-n.x2)/o,u=(r.x2-n.x1)/o,l=(r.y1-n.y2)*this.yStretch/s,c=(r.y2-n.y1)*this.yStretch/s;(isNaN(a)||isNaN(u))&&(a=u=1),(isNaN(l)||isNaN(c))&&(l=c=1);var h=Math.min(Math.max(a,u),Math.max(l,c)),f=r.maxScale,p=n.maxScale;return h>f&&(h=f),h>p&&(h=p),h>t&&h>=r.placementScale&&(t=h),t},a.prototype.insertCollisionFeature=function(t,e,n){for(var i=this,r=n?this.ignoredGrid:this.grid,o=this.collisionBoxArray,s=t.boxStartIndex;s<t.boxEndIndex;s++){var a=o.get(s);a.placementScale=e,e<i.maxScale&&r.insert(s,a.bbox0,a.bbox1,a.bbox2,a.bbox3)}},e.exports=a},{"../data/extent":11,"../util/intersection_tests":124,"grid-index":157,"point-geometry":200}],83:[function(t,e,n){"use strict";function i(t,e,n,i,o,s,a,u,l){var c=i?.6*s*a:0,h=Math.max(i?i.right-i.left:0,o?o.right-o.left:0),f=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;e-h*a<e/4&&(e=h*a+e/4);var p=2*s,d=f?e/2*u%e:(h/2+p)*a*u%e;return r(t,d,e,c,n,h*a,f,!1,l)}function r(t,e,n,i,u,l,c,h,f){for(var p=l/2,d=0,g=0;g<t.length-1;g++)d+=t[g].dist(t[g+1]);for(var m=0,y=e-n,v=[],_=0;_<t.length-1;_++){for(var x=t[_],b=t[_+1],E=x.dist(b),w=b.angleTo(x);y+n<m+E;){y+=n;var S=(y-m)/E,I=o(x.x,b.x,S),C=o(x.y,b.y,S);if(I>=0&&I<f&&C>=0&&C<f&&y-p>=0&&y+p<=d){var T=new s(I,C,w,_)._round();i&&!a(t,T,l,i,u)||v.push(T)}}m+=E}return h||v.length||c||(v=r(t,m/2,n,i,u,l,c,!0,f)),v}var o=t("../util/interpolate"),s=t("../symbol/anchor"),a=t("./check_max_angle");e.exports=i},{"../symbol/anchor":77,"../util/interpolate":123,"./check_max_angle":78}],84:[function(t,e,n){"use strict";var i=t("shelf-pack"),r=t("../util/util"),o=4,s=128,a=2048,u=function(){this.width=s,this.height=s,this.bin=new i(this.width,this.height),this.index={},this.ids={},this.data=new Uint8Array(this.width*this.height)};u.prototype.getGlyphs=function(){var t,e,n,i={};for(var r in this.ids)t=r.split("#"),e=t[0],n=t[1],i[e]||(i[e]=[]),i[e].push(n);return i},u.prototype.getRects=function(){var t,e,n,i=this,r={};for(var o in this.ids)t=o.split("#"),e=t[0],n=t[1],r[e]||(r[e]={}),r[e][n]=i.index[o];return r},u.prototype.addGlyph=function(t,e,n,i){var o=this;if(!n)return null;var s=e+"#"+n.id;if(this.index[s])return this.ids[s].indexOf(t)<0&&this.ids[s].push(t),this.index[s];if(!n.bitmap)return null;var a=n.width+2*i,u=n.height+2*i,l=1,c=a+2*l,h=u+2*l;c+=4-c%4,h+=4-h%4;var f=this.bin.packOne(c,h);if(f||(this.resize(),f=this.bin.packOne(c,h)),!f)return r.warnOnce("glyph bitmap overflow"),null;this.index[s]=f,this.ids[s]=[t];for(var p=this.data,d=n.bitmap,g=0;g<u;g++)for(var m=o.width*(f.y+g+l)+f.x+l,y=a*g,v=0;v<a;v++)p[m+v]=d[y+v];return this.dirty=!0,f},u.prototype.resize=function(){var t=this,e=this.width,n=this.height;if(!(e>=a||n>=a)){this.texture&&(this.gl&&this.gl.deleteTexture(this.texture),this.texture=null),this.width*=o,this.height*=o,this.bin.resize(this.width,this.height);for(var i=new ArrayBuffer(this.width*this.height),r=0;r<n;r++){var s=new Uint8Array(t.data.buffer,n*r,e),u=new Uint8Array(i,n*r*o,e);u.set(s)}this.data=new Uint8Array(i)}},u.prototype.bind=function(t){this.gl=t,this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,null))},u.prototype.updateTexture=function(t){this.bind(t),this.dirty&&(t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data),this.dirty=!1)},e.exports=u},{"../util/util":131,"shelf-pack":202}],85:[function(t,e,n){"use strict";function i(t,e,n,i){return i=i||"abc",n.replace("{s}",i[t.length%i.length]).replace("{fontstack}",t).replace("{range}",e)}var r=t("../util/mapbox").normalizeGlyphsURL,o=t("../util/ajax"),s=t("../util/verticalize_punctuation"),a=t("../util/glyphs"),u=t("../symbol/glyph_atlas"),l=t("pbf"),c=function(t,e,n){var i=1;this.advance=t.advance,this.left=t.left-n-i,this.top=t.top+n+i,this.rect=e},h=function(t){this.url=t&&r(t),this.atlases={},this.stacks={},this.loading={}};h.prototype.getSimpleGlyphs=function(t,e,n,i){var r=this;void 0===this.stacks[t]&&(this.stacks[t]={}),void 0===this.atlases[t]&&(this.atlases[t]=new u);for(var o={},a=this.stacks[t],l=this.atlases[t],h=3,f={},p=0,d=function(e){var i=Math.floor(e/256);if(a[i]){var r=a[i].glyphs[e],s=l.addGlyph(n,t,r,h);r&&(o[e]=new c(r,s,h))}else void 0===f[i]&&(f[i]=[],p++),f[i].push(e)},g=0;g<e.length;g++){var m=e[g],y=String.fromCharCode(m);d(m),s.lookup[y]&&d(s.lookup[y].charCodeAt(0))}p||i(void 0,o,t);var v=function(e,s,a){if(!e)for(var u=r.stacks[t][s]=a.stacks[0],d=0;d<f[s].length;d++){var g=f[s][d],m=u.glyphs[g],y=l.addGlyph(n,t,m,h);m&&(o[g]=new c(m,y,h))}p--,p||i(void 0,o,t)};for(var _ in f)r.loadRange(t,_,v)},h.prototype.loadRange=function(t,e,n){if(256*e>65535)return n("glyphs > 65535 not supported");void 0===this.loading[t]&&(this.loading[t]={});var r=this.loading[t];if(r[e])r[e].push(n);else{r[e]=[n];var s=256*e+"-"+(256*e+255),u=i(t,s,this.url);o.getArrayBuffer(u,function(t,n){for(var i=!t&&new a(new l(n.data)),o=0;o<r[e].length;o++)r[e][o](t,e,i);delete r[e]})}},h.prototype.getGlyphAtlas=function(t){return this.atlases[t]},e.exports=h},{"../symbol/glyph_atlas":84,"../util/ajax":111,"../util/glyphs":122,"../util/mapbox":127,"../util/verticalize_punctuation":133,pbf:198}],86:[function(t,e,n){"use strict";e.exports=function(t){function e(e){a.push(t[e]),u++}function n(t,e,n){var i=s[t];return delete s[t],s[e]=i,a[i].geometry[0].pop(),a[i].geometry[0]=a[i].geometry[0].concat(n[0]),i}function i(t,e,n){var i=o[e];return delete o[e],o[t]=i,a[i].geometry[0].shift(),a[i].geometry[0]=n[0].concat(a[i].geometry[0]),i}function r(t,e,n){var i=n?e[0][e[0].length-1]:e[0][0];return t+":"+i.x+":"+i.y}for(var o={},s={},a=[],u=0,l=0;l<t.length;l++){var c=t[l],h=c.geometry,f=c.text;if(f){var p=r(f,h),d=r(f,h,!0);if(p in s&&d in o&&s[p]!==o[d]){var g=i(p,d,h),m=n(p,d,a[g].geometry);delete o[p],delete s[d],s[r(f,a[m].geometry,!0)]=m,a[g].geometry=null}else p in s?n(p,d,h):d in o?i(p,d,h):(e(l),o[p]=u-1,s[d]=u-1)}else e(l)}return a.filter(function(t){return t.geometry})}},{}],87:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,s,a,u,l,c){this.anchorPoint=t,this.tl=e,this.tr=n,this.bl=i,this.br=r,this.tex=o,this.anchorAngle=s,this.glyphAngle=a,this.minScale=u,this.maxScale=l,this.writingMode=c}function r(t,e,n,r,o,s,l,c,h){var f,p,d,g,m=e.image.rect,y=o.layout,v=1,_=e.left-v,x=_+m.w/e.image.pixelRatio,b=e.top-v,E=b+m.h/e.image.pixelRatio;if("none"!==y["icon-text-fit"]&&l){var w=x-_,S=E-b,I=y["text-size"]/24,C=l.left*I,T=l.right*I,N=l.top*I,L=l.bottom*I,M=T-C,P=L-N,A=y["icon-text-fit-padding"][0],R=y["icon-text-fit-padding"][1],O=y["icon-text-fit-padding"][2],F=y["icon-text-fit-padding"][3],D="width"===y["icon-text-fit"]?.5*(P-S):0,z="height"===y["icon-text-fit"]?.5*(M-w):0,k="width"===y["icon-text-fit"]||"both"===y["icon-text-fit"]?M:w,B="height"===y["icon-text-fit"]||"both"===y["icon-text-fit"]?P:S;f=new a(C+z-F,N+D-A),p=new a(C+z+R+k,N+D-A),d=new a(C+z+R+k,N+D+O+B),g=new a(C+z-F,N+D+O+B)}else f=new a(_,b),p=new a(x,b),d=new a(x,E),g=new a(_,E);var j=o.getLayoutValue("icon-rotate",c,h)*Math.PI/180;if(s){var V=r[t.segment];if(t.y===V.y&&t.x===V.x&&t.segment+1<r.length){var G=r[t.segment+1];j+=Math.atan2(t.y-G.y,t.x-G.x)+Math.PI}else j+=Math.atan2(t.y-V.y,t.x-V.x)}if(j){var U=Math.sin(j),q=Math.cos(j),X=[q,-U,U,q];f=f.matMult(X),p=p.matMult(X),g=g.matMult(X),d=d.matMult(X)}return[new i(new a(t.x,t.y),f,p,g,d,e.image.rect,0,0,u,1/0)]}function o(t,e,n,r,o,l){for(var c=o.layout["text-rotate"]*Math.PI/180,h=o.layout["text-keep-upright"],f=e.positionedGlyphs,p=[],d=0;d<f.length;d++){var g=f[d],m=g.glyph;if(m){var y=m.rect;if(y){var v,_=(g.x+m.advance/2)*n,x=u;l?(v=[],x=s(v,t,_,r,t.segment,!0),h&&(x=Math.min(x,s(v,t,_,r,t.segment,!1)))):v=[{anchorPoint:new a(t.x,t.y),offset:0,angle:0,maxScale:1/0,minScale:u}];var b=g.x+m.left,E=g.y-m.top,w=b+y.w,S=E+y.h,I=new a(g.x,m.advance/2),C=new a(b,E),T=new a(w,E),N=new a(b,S),L=new a(w,S);0!==g.angle&&(C._sub(I)._rotate(g.angle)._add(I),T._sub(I)._rotate(g.angle)._add(I),N._sub(I)._rotate(g.angle)._add(I),L._sub(I)._rotate(g.angle)._add(I));for(var M=0;M<v.length;M++){var P=v[M],A=C,R=T,O=N,F=L;if(c){var D=Math.sin(c),z=Math.cos(c),k=[z,-D,D,z];A=A.matMult(k),R=R.matMult(k),O=O.matMult(k),F=F.matMult(k)}var B=Math.max(P.minScale,x),j=(t.angle+P.offset+2*Math.PI)%(2*Math.PI),V=(P.angle+P.offset+2*Math.PI)%(2*Math.PI);p.push(new i(P.anchorPoint,A,R,O,F,y,j,V,B,P.maxScale,e.writingMode))}}}}return p}function s(t,e,n,i,r,o){var s=!o;n<0&&(o=!o),o&&r++;var l=new a(e.x,e.y),c=i[r],h=1/0;n=Math.abs(n);for(var f=u;;){var p=l.dist(c),d=n/p,g=Math.atan2(c.y-l.y,c.x-l.x);if(o||(g+=Math.PI),t.push({anchorPoint:l,offset:s?Math.PI:0,minScale:d,maxScale:h,angle:(g+2*Math.PI)%(2*Math.PI)}),d<=f)break;for(l=c;l.equals(c);)if(r+=o?1:-1,c=i[r],!c)return d;var m=c.sub(l)._unit();l=l.sub(m._mult(p)),h=d}return f}var a=t("point-geometry");e.exports={getIconQuads:r,getGlyphQuads:o,SymbolQuad:i};var u=.5},{"point-geometry":200}],88:[function(t,e,n){"use strict";var i=t("../util/token");e.exports=function(t,e){var n=i(t.properties,e["text-field"]);if(n){n=n.toString();var r=e["text-transform"];return"uppercase"===r?n=n.toLocaleUpperCase():"lowercase"===r&&(n=n.toLocaleLowerCase()),n}}},{"../util/token":130}],89:[function(t,e,n){"use strict";function i(t,e,n,i,r){this.codePoint=t,this.x=e,this.y=n,this.glyph=i||null,this.angle=r}function r(t,e,n,i,r,o,s){this.positionedGlyphs=t,this.text=e,this.top=n,this.bottom=i,this.left=r,this.right=o,this.writingMode=s}function o(t,e){for(var n=[],i=0,r=0,o=e;r<o.length;r+=1){var s=o[r];n.push(t.substring(i,s)),i=s}return i<t.length&&n.push(t.substring(i,t.length)),n}function s(t,e,n,i,s,a,u,l,c,h,d){var g=t.trim();d===b.vertical&&(g=_(g));var m,y=[],v=new r(y,g,c[1],c[1],c[0],c[0],d);return m=x.processBidirectionalText?x.processBidirectionalText(g,f(g,l,n,e)):o(g,f(g,l,n,e)),p(v,e,m,i,s,a,u,c,d,l,h),!!y.length&&v}function a(t,e,n,i){var r=0;for(var o in t){var s=i[t.charCodeAt(o)];s&&(r+=s.advance+e)}var a=Math.max(1,Math.ceil(r/n));return r/a}function u(t,e,n,i){var r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function l(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function c(t,e,n,i,r,o){for(var s=null,a=u(e,n,r,o),l=0,c=i;l<c.length;l+=1){var h=c[l],f=e-h.x,p=u(f,n,r,o)+h.badness;p<=a&&(s=h,a=p)}return{index:t,x:e,priorBreak:s,badness:a}}function h(t){return t?h(t.priorBreak).concat(t.index):[]}function f(t,e,n,i){if(!n)return[];if(!t)return[];for(var r=[],o=a(t,e,n,i),s=0,u=0;u<t.length;u++){var f=t.charCodeAt(u),p=i[f];p&&!E[f]&&(s+=p.advance+e),u<t.length-1&&(w[f]||v.charAllowsIdeographicBreaking(f))&&r.push(c(u+1,s,o,r,l(f,t.charCodeAt(u+1)),!1))}return h(c(t.length,s,o,r,0,!0))}function p(t,e,n,r,o,s,a,u,l,c,h){var f=-17,p=0,m=f,y=0,_=t.positionedGlyphs;for(var x in n){var E=n[x].trim();if(E.length){for(var w=_.length,S=0;S<E.length;S++){var I=E.charCodeAt(S),C=e[I];C&&(v.charHasUprightVerticalOrientation(I)&&l!==b.horizontal?(_.push(new i(I,p,0,C,-Math.PI/2)),p+=h+c):(_.push(new i(I,p,m,C,0)),p+=C.advance+c))}if(_.length!==w){var T=p-c;y=Math.max(T,y),d(_,e,w,_.length-1,a)}p=0,m+=r}else m+=r}g(_,a,o,s,y,r,n.length,u);var N=n.length*r;t.top+=-s*N,t.bottom=t.top+N,t.left+=-o*y,t.right=t.left+y}function d(t,e,n,i,r){if(r)for(var o=e[t[i].codePoint].advance,s=(t[i].x+o)*r,a=n;a<=i;a++)t[a].x-=s}function g(t,e,n,i,r,o,s,a){for(var u=(e-n)*r+a[0],l=(-i*s+.5)*o+a[1],c=0;c<t.length;c++)t[c].x+=u,t[c].y+=l}function m(t,e){if(!t||!t.rect)return null;var n=e[0],i=e[1],r=n-t.width/2,o=r+t.width,s=i-t.height/2,a=s+t.height;return new y(t,s,a,r,o)}function y(t,e,n,i,r){this.image=t,this.top=e,this.bottom=n,this.left=i,this.right=r}var v=t("../util/script_detection"),_=t("../util/verticalize_punctuation"),x=t("../source/rtl_text_plugin"),b={horizontal:1,vertical:2};e.exports={shapeText:s,shapeIcon:m,WritingMode:b};var E={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},w={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0}},{"../source/rtl_text_plugin":51,"../util/script_detection":128,"../util/verticalize_punctuation":133}],90:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,s,a,u,l,c){var h,f,p=i*e+n,d=a*o+s;if(c)for(d-=o,f=-1;f<=l;f++,p=((f+l)%l+i)*e+n,d+=o)for(h=-1;h<=u;h++)r[d+h]=t[p+(h+u)%u];else for(f=0;f<l;f++,p+=e,d+=o)for(h=0;h<u;h++)r[d+h]=t[p+h]}var r=t("shelf-pack"),o=t("../util/browser"),s=t("../util/util"),a=function(t,e,n,i,r){this.rect=t,this.width=e,this.height=n,this.sdf=i,this.pixelRatio=r},u=function(t,e){this.width=t,this.height=e,this.bin=new r(t,e),this.images={},this.data=!1,this.texture=0,this.filter=0,this.pixelRatio=1,this.dirty=!0};u.prototype.allocateImage=function(t,e){t/=this.pixelRatio,e/=this.pixelRatio;var n=2,i=t+n+(4-(t+n)%4),r=e+n+(4-(e+n)%4),o=this.bin.packOne(i,r);return o?o:(s.warnOnce("SpriteAtlas out of space."),null)},u.prototype.getImage=function(t,e){if(this.images[t])return this.images[t];if(!this.sprite)return null;var n=this.sprite.getSpritePosition(t);if(!n.width||!n.height)return null;var i=this.allocateImage(n.width,n.height);if(!i)return null;var r=new a(i,n.width/n.pixelRatio,n.height/n.pixelRatio,n.sdf,n.pixelRatio/this.pixelRatio);return this.images[t]=r,this.copy(i,n,e),r},u.prototype.getPosition=function(t,e){var n=this.getImage(t,e),i=n&&n.rect;if(!i)return null;var r=n.width*n.pixelRatio,o=n.height*n.pixelRatio,s=1;return{size:[n.width,n.height],tl:[(i.x+s)/this.width,(i.y+s)/this.height],br:[(i.x+s+r)/this.width,(i.y+s+o)/this.height]}},u.prototype.allocate=function(){var t=this;if(!this.data){var e=Math.floor(this.width*this.pixelRatio),n=Math.floor(this.height*this.pixelRatio);this.data=new Uint32Array(e*n);for(var i=0;i<this.data.length;i++)t.data[i]=0}},u.prototype.copy=function(t,e,n){if(this.sprite.imgData){var r=new Uint32Array(this.sprite.imgData.buffer);this.allocate();var o=this.data,s=1;i(r,this.sprite.width,e.x,e.y,o,this.width*this.pixelRatio,(t.x+s)*this.pixelRatio,(t.y+s)*this.pixelRatio,e.width,e.height,n),this.dirty=!0}},u.prototype.setSprite=function(t){t&&(this.pixelRatio=o.devicePixelRatio>1?2:1,this.canvas&&(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio)),this.sprite=t},u.prototype.addIcons=function(t,e){for(var n=this,i=0;i<t.length;i++)n.getImage(t[i]);e(null,this.images)},u.prototype.bind=function(t,e){var n=!1;this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n=!0);var i=e?t.LINEAR:t.NEAREST;i!==this.filter&&(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i),this.filter=i),this.dirty&&(this.allocate(),n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),
this.dirty=!1)},e.exports=u},{"../util/browser":112,"../util/util":131,"shelf-pack":202}],91:[function(t,e,n){"use strict";var i=t("../util/struct_array"),r=t("point-geometry"),o=i({members:[{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"glyphQuadStartIndex"},{type:"Uint16",name:"glyphQuadEndIndex"},{type:"Uint16",name:"iconQuadStartIndex"},{type:"Uint16",name:"iconQuadEndIndex"},{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int8",name:"index"},{type:"Uint8",name:"writingModes"}]});Object.defineProperty(o.prototype.StructType.prototype,"anchorPoint",{get:function(){return new r(this.anchorPointX,this.anchorPointY)}}),e.exports=o},{"../util/struct_array":129,"point-geometry":200}],92:[function(t,e,n){"use strict";var i=t("../util/struct_array"),r=t("point-geometry"),o=t("./quads").SymbolQuad,s=i({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"tlX"},{type:"Float32",name:"tlY"},{type:"Float32",name:"trX"},{type:"Float32",name:"trY"},{type:"Float32",name:"blX"},{type:"Float32",name:"blY"},{type:"Float32",name:"brX"},{type:"Float32",name:"brY"},{type:"Int16",name:"texH"},{type:"Int16",name:"texW"},{type:"Int16",name:"texX"},{type:"Int16",name:"texY"},{type:"Float32",name:"anchorAngle"},{type:"Float32",name:"glyphAngle"},{type:"Float32",name:"maxScale"},{type:"Float32",name:"minScale"},{type:"Uint8",name:"writingMode"}]});Object.defineProperty(s.prototype.StructType.prototype,"anchorPoint",{get:function(){return new r(this.anchorPointX,this.anchorPointY)}}),Object.defineProperty(s.prototype.StructType.prototype,"SymbolQuad",{get:function(){return new o(this.anchorPoint,new r(this.tlX,this.tlY),new r(this.trX,this.trY),new r(this.blX,this.blY),new r(this.brX,this.brY),{x:this.texX,y:this.texY,h:this.texH,w:this.texW,height:this.texH,width:this.texW},this.anchorAngle,this.glyphAngle,this.minScale,this.maxScale,this.writingMode)}}),e.exports=s},{"../util/struct_array":129,"./quads":87,"point-geometry":200}],93:[function(t,e,n){"use strict";var i=t("../util/dom"),r=t("point-geometry"),o={scrollZoom:t("./handler/scroll_zoom"),boxZoom:t("./handler/box_zoom"),dragRotate:t("./handler/drag_rotate"),dragPan:t("./handler/drag_pan"),keyboard:t("./handler/keyboard"),doubleClickZoom:t("./handler/dblclick_zoom"),touchZoomRotate:t("./handler/touch_zoom_rotate")};e.exports=function(t,e){function n(t){y("mouseout",t)}function s(e){t.stop(),E=i.mousePos(_,e),y("mousedown",e),b=!0}function a(e){var n=t.dragRotate&&t.dragRotate.isActive();x&&!n&&y("contextmenu",x),x=null,b=!1,y("mouseup",e)}function u(e){if(!(t.dragPan&&t.dragPan.isActive()||t.dragRotate&&t.dragRotate.isActive())){for(var n=e.toElement||e.target;n&&n!==_;)n=n.parentNode;n===_&&y("mousemove",e)}}function l(e){t.stop(),v("touchstart",e),!e.touches||e.touches.length>1||(w?(clearTimeout(w),w=null,y("dblclick",e)):w=setTimeout(p,300))}function c(t){v("touchmove",t)}function h(t){v("touchend",t)}function f(t){v("touchcancel",t)}function p(){w=null}function d(t){var e=i.mousePos(_,t);e.equals(E)&&y("click",t)}function g(t){y("dblclick",t),t.preventDefault()}function m(e){var n=t.dragRotate&&t.dragRotate.isActive();b||n?b&&(x=e):y("contextmenu",e),e.preventDefault()}function y(e,n){var r=i.mousePos(_,n);return t.fire(e,{lngLat:t.unproject(r),point:r,originalEvent:n})}function v(e,n){var o=i.touchPos(_,n),s=o.reduce(function(t,e,n,i){return t.add(e.div(i.length))},new r(0,0));return t.fire(e,{lngLat:t.unproject(s),point:s,lngLats:o.map(function(e){return t.unproject(e)},this),points:o,originalEvent:n})}var _=t.getCanvasContainer(),x=null,b=!1,E=null,w=null;for(var S in o)t[S]=new o[S](t,e),e.interactive&&e[S]&&t[S].enable(e[S]);_.addEventListener("mouseout",n,!1),_.addEventListener("mousedown",s,!1),_.addEventListener("mouseup",a,!1),_.addEventListener("mousemove",u,!1),_.addEventListener("touchstart",l,!1),_.addEventListener("touchend",h,!1),_.addEventListener("touchmove",c,!1),_.addEventListener("touchcancel",f,!1),_.addEventListener("click",d,!1),_.addEventListener("dblclick",g,!1),_.addEventListener("contextmenu",m,!1)}},{"../util/dom":119,"./handler/box_zoom":99,"./handler/dblclick_zoom":100,"./handler/drag_pan":101,"./handler/drag_rotate":102,"./handler/keyboard":103,"./handler/scroll_zoom":104,"./handler/touch_zoom_rotate":105,"point-geometry":200}],94:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/interpolate"),o=t("../util/browser"),s=t("../geo/lng_lat"),a=t("../geo/lng_lat_bounds"),u=t("point-geometry"),l=t("../util/evented"),c=function(t){function e(e,n){t.call(this),this.moving=!1,this.transform=e,this._bearingSnap=n.bearingSnap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCenter=function(){return this.transform.center},e.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e),this},e.prototype.panBy=function(t,e,n){return this.panTo(this.transform.center,i.extend({offset:u.convert(t).mult(-1)},e),n),this},e.prototype.panTo=function(t,e,n){return this.easeTo(i.extend({center:t},e),n)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},e.prototype.zoomTo=function(t,e,n){return this.easeTo(i.extend({zoom:t},e),n)},e.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},e.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},e.prototype.rotateTo=function(t,e,n){return this.easeTo(i.extend({bearing:t},e),n)},e.prototype.resetNorth=function(t,e){return this.rotateTo(0,i.extend({duration:1e3},t),e),this},e.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},e.prototype.fitBounds=function(t,e,n){e=i.extend({padding:0,offset:[0,0],maxZoom:this.getMaxZoom()},e),t=a.convert(t);var r=u.convert(e.offset),o=this.transform,s=o.project(t.getNorthWest()),l=o.project(t.getSouthEast()),c=l.sub(s),h=(o.width-2*e.padding-2*Math.abs(r.x))/c.x,f=(o.height-2*e.padding-2*Math.abs(r.y))/c.y;return e.center=o.unproject(s.add(l).div(2)),e.zoom=Math.min(o.scaleZoom(o.scale*Math.min(h,f)),e.maxZoom),e.bearing=0,e.linear?this.easeTo(e,n):this.flyTo(e,n)},e.prototype.jumpTo=function(t,e){this.stop();var n=this.transform,i=!1,r=!1,o=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(i=!0,n.zoom=+t.zoom),"center"in t&&(n.center=s.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(r=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),this.fire("movestart",e).fire("move",e),i&&this.fire("zoomstart",e).fire("zoom",e).fire("zoomend",e),r&&this.fire("rotate",e),o&&this.fire("pitch",e),this.fire("moveend",e)},e.prototype.easeTo=function(t,e){var n=this;this.stop(),t=i.extend({offset:[0,0],duration:500,easing:i.ease},t);var o,a,l=this.transform,c=u.convert(t.offset),h=this.getZoom(),f=this.getBearing(),p=this.getPitch(),d="zoom"in t?+t.zoom:h,g="bearing"in t?this._normalizeBearing(t.bearing,f):f,m="pitch"in t?+t.pitch:p;"center"in t?(o=s.convert(t.center),a=l.centerPoint.add(c)):"around"in t?(o=s.convert(t.around),a=l.locationPoint(o)):(a=l.centerPoint.add(c),o=l.pointLocation(a));var y=l.locationPoint(o);return t.animate===!1&&(t.duration=0),this.zooming=d!==h,this.rotating=f!==g,this.pitching=m!==p,t.smoothEasing&&0!==t.duration&&(t.easing=this._smoothOutEasing(t.duration)),t.noMoveStart||(this.moving=!0,this.fire("movestart",e)),this.zooming&&this.fire("zoomstart",e),clearTimeout(this._onEaseEnd),this._ease(function(t){this.zooming&&(l.zoom=r(h,d,t)),this.rotating&&(l.bearing=r(f,g,t)),this.pitching&&(l.pitch=r(p,m,t)),l.setLocationAtPoint(o,y.add(a.sub(y)._mult(t))),this.fire("move",e),this.zooming&&this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},function(){t.delayEndEvents?n._onEaseEnd=setTimeout(n._easeToEnd.bind(n,e),t.delayEndEvents):n._easeToEnd(e)},t),this},e.prototype._easeToEnd=function(t){var e=this.zooming;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,e&&this.fire("zoomend",t),this.fire("moveend",t)},e.prototype.flyTo=function(t,e){function n(t){var e=(S*S-w*w+(t?-1:1)*N*N*I*I)/(2*(t?S:w)*N*I);return Math.log(Math.sqrt(e*e+1)-e)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function a(t){return(Math.exp(t)+Math.exp(-t))/2}function l(t){return o(t)/a(t)}this.stop(),t=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},t);var c=this.transform,h=u.convert(t.offset),f=this.getZoom(),p=this.getBearing(),d=this.getPitch(),g="center"in t?s.convert(t.center):this.getCenter(),m="zoom"in t?+t.zoom:f,y="bearing"in t?this._normalizeBearing(t.bearing,p):p,v="pitch"in t?+t.pitch:d;Math.abs(c.center.lng)+Math.abs(g.lng)>180&&(c.center.lng>0&&g.lng<0?g.lng+=360:c.center.lng<0&&g.lng>0&&(g.lng-=360));var _=c.zoomScale(m-f),x=c.point,b="center"in t?c.project(g).sub(h.div(_)):x,E=t.curve,w=Math.max(c.width,c.height),S=w/_,I=b.sub(x).mag();if("minZoom"in t){var C=i.clamp(Math.min(t.minZoom,f,m),c.minZoom,c.maxZoom),T=w/c.zoomScale(C-f);E=Math.sqrt(T/I*2)}var N=E*E,L=n(0),M=function(t){return a(L)/a(L+E*t)},P=function(t){return w*((a(L)*l(L+E*t)-o(L))/N)/I},A=(n(1)-L)/E;if(Math.abs(I)<1e-6){if(Math.abs(w-S)<1e-6)return this.easeTo(t);var R=S<w?-1:1;A=Math.abs(Math.log(S/w))/E,P=function(){return 0},M=function(t){return Math.exp(R*E*t)}}if("duration"in t)t.duration=+t.duration;else{var O="screenSpeed"in t?+t.screenSpeed/E:+t.speed;t.duration=1e3*A/O}return this.moving=!0,this.zooming=!0,p!==y&&(this.rotating=!0),d!==v&&(this.pitching=!0),this.fire("movestart",e),this.fire("zoomstart",e),this._ease(function(t){var n=t*A,i=P(n),o=1/M(n);c.zoom=f+c.scaleZoom(o),c.center=c.unproject(x.add(b.sub(x).mult(i)).mult(o)),this.rotating&&(c.bearing=r(p,y,t)),this.pitching&&(c.pitch=r(d,v,t)),this.fire("move",e),this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},function(){this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.fire("zoomend",e),this.fire("moveend",e)},t),this},e.prototype.isEasing=function(){return!!this._abortFn},e.prototype.isMoving=function(){return this.moving},e.prototype.stop=function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},e.prototype._ease=function(t,e,n){this._finishFn=e,this._abortFn=o.timed(function(e){t.call(this,n.easing(e)),1===e&&this._finishEase()},n.animate===!1?0:n.duration,this)},e.prototype._finishEase=function(){delete this._abortFn;var t=this._finishFn;delete this._finishFn,t.call(this)},e.prototype._normalizeBearing=function(t,e){t=i.wrap(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t},e.prototype._smoothOutEasing=function(t){var e=i.ease;if(this._prevEase){var n=this._prevEase,r=(Date.now()-n.start)/n.duration,o=n.easing(r+.01)-n.easing(r),s=.27/Math.sqrt(o*o+1e-4)*.01,a=Math.sqrt(.0729-s*s);e=i.bezier(s,a,.25,1)}return this._prevEase={start:(new Date).getTime(),duration:t,easing:e},e},e}(l);e.exports=c},{"../geo/lng_lat":19,"../geo/lng_lat_bounds":20,"../util/browser":112,"../util/evented":120,"../util/interpolate":123,"../util/util":131,"point-geometry":200}],95:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=function(t){this.options=t,r.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};o.prototype.getDefaultPosition=function(){return"bottom-right"},o.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("data",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},o.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("data",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},o.prototype._updateEditLink=function(){if(this._editLink||(this._editLink=this._container.querySelector(".mapbox-improve-map")),this._editLink){var t=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+t.lng+"/"+t.lat+"/"+Math.round(this._map.getZoom()+1)}},o.prototype._updateData=function(t){"source"===t.dataType&&(this._updateAttributions(),this._updateEditLink())},o.prototype._updateAttributions=function(){if(this._map.style){var t=[],e=this._map.style.sourceCaches;for(var n in e){var i=e[n].getSource();i.attribution&&t.indexOf(i.attribution)<0&&t.push(i.attribution)}t.sort(function(t,e){return t.length-e.length}),t=t.filter(function(e,n){for(var i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0}),this._container.innerHTML=t.join(" | "),this._editLink=null}},o.prototype._updateCompact=function(){var t=this._map.getCanvasContainer().offsetWidth<=640;this._container.classList[t?"add":"remove"]("compact")},e.exports=o},{"../../util/dom":119,"../../util/util":131}],96:[function(t,e,n){"use strict";function i(t){void 0!==r?t(r):void 0!==a.navigator.permissions?a.navigator.permissions.query({name:"geolocation"}).then(function(e){r="denied"!==e.state,t(r)}):(r=!!a.navigator.geolocation,t(r))}var r,o=t("../../util/evented"),s=t("../../util/dom"),a=t("../../util/window"),u=t("../../util/util"),l={enableHighAccuracy:!1,timeout:6e3},c="mapboxgl-ctrl",h=function(t){function e(e){t.call(this),this.options=e||{},u.bindAll(["_onSuccess","_onError","_finish","_setupUI"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){return this._map=t,this._container=s.create("div",c+" "+c+"-group"),i(this._setupUI),this._container},e.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=void 0},e.prototype._onSuccess=function(t){this._map.jumpTo({center:[t.coords.longitude,t.coords.latitude],zoom:17,bearing:0,pitch:0}),this.fire("geolocate",t),this._finish()},e.prototype._onError=function(t){this.fire("error",t),this._finish()},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(t){t!==!1&&(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=s.create("button",c+"-icon "+c+"-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.watchPosition&&this._geolocateButton.setAttribute("aria-pressed",!1),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)))},e.prototype._onClickGeolocate=function(){var t=u.extend(l,this.options&&this.options.positionOptions||{});this.options.watchPosition?void 0!==this._geolocationWatchID?(this._geolocateButton.classList.remove("watching"),this._geolocateButton.setAttribute("aria-pressed",!1),a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0):(this._geolocateButton.classList.add("watching"),this._geolocateButton.setAttribute("aria-pressed",!0),this._geolocationWatchID=a.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)):(a.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,t),this._timeoutId=setTimeout(this._finish,1e4))},e}(o);e.exports=h},{"../../util/dom":119,"../../util/evented":120,"../../util/util":131,"../../util/window":114}],97:[function(t,e,n){"use strict";function i(t){return new o.MouseEvent(t.type,{button:2,buttons:2,bubbles:!0,cancelable:!0,detail:t.detail,view:t.view,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,movementX:t.movementX,movementY:t.movementY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey})}var r=t("../../util/dom"),o=t("../../util/window"),s=t("../../util/util"),a="mapboxgl-ctrl",u=function(){s.bindAll(["_rotateCompassArrow"],this)};u.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},u.prototype.onAdd=function(t){return this._map=t,this._container=r.create("div",a+" "+a+"-group",t.getContainer()),this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._zoomInButton=this._createButton(a+"-icon "+a+"-zoom-in","Zoom In",t.zoomIn.bind(t)),this._zoomOutButton=this._createButton(a+"-icon "+a+"-zoom-out","Zoom Out",t.zoomOut.bind(t)),this._compass=this._createButton(a+"-icon "+a+"-compass","Reset North",t.resetNorth.bind(t)),this._compassArrow=r.create("span","arrow",this._compass),this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._container},u.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("rotate",this._rotateCompassArrow),this._map=void 0},u.prototype._onContextMenu=function(t){t.preventDefault()},u.prototype._onCompassDown=function(t){0===t.button&&(r.disableDrag(),o.document.addEventListener("mousemove",this._onCompassMove),o.document.addEventListener("mouseup",this._onCompassUp),this._map.getCanvasContainer().dispatchEvent(i(t)),t.stopPropagation())},u.prototype._onCompassMove=function(t){0===t.button&&(this._map.getCanvasContainer().dispatchEvent(i(t)),t.stopPropagation())},u.prototype._onCompassUp=function(t){0===t.button&&(o.document.removeEventListener("mousemove",this._onCompassMove),o.document.removeEventListener("mouseup",this._onCompassUp),r.enableDrag(),this._map.getCanvasContainer().dispatchEvent(i(t)),t.stopPropagation())},u.prototype._createButton=function(t,e,n){var i=r.create("button",t,this._container);return i.type="button",i.setAttribute("aria-label",e),i.addEventListener("click",function(){n()}),i},e.exports=u},{"../../util/dom":119,"../../util/util":131,"../../util/window":114}],98:[function(t,e,n){"use strict";function i(t,e,n){var i=n&&n.maxWidth||100,s=t._container.clientHeight/2,a=o(t.unproject([0,s]),t.unproject([i,s]));if(n&&"imperial"===n.unit){var u=3.2808*a;if(u>5280){var l=u/5280;r(e,i,l,"mi")}else r(e,i,u,"ft")}else r(e,i,a,"m")}function r(t,e,n,i){var r=s(n),o=r/n;"m"===i&&r>=1e3&&(r/=1e3,i="km"),t.style.width=e*o+"px",t.innerHTML=r+i}function o(t,e){var n=6371e3,i=Math.PI/180,r=t.lat*i,o=e.lat*i,s=Math.sin(r)*Math.sin(o)+Math.cos(r)*Math.cos(o)*Math.cos((e.lng-t.lng)*i),a=n*Math.acos(Math.min(s,1));return a}function s(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}var a=t("../../util/dom"),u=t("../../util/util"),l=function(t){this.options=t,u.bindAll(["_onMove"],this)};l.prototype.getDefaultPosition=function(){return"bottom-left"},l.prototype._onMove=function(){i(this._map,this._container,this.options)},l.prototype.onAdd=function(t){return this._map=t,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},l.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("move",this._onMove),this._map=void 0},e.exports=l},{"../../util/dom":119,"../../util/util":131}],99:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../geo/lng_lat_bounds"),o=t("../../util/util"),s=t("../../util/window"),a=function(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),o.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};a.prototype.isEnabled=function(){return!!this._enabled},a.prototype.isActive=function(){return!!this._active},a.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onMouseDown,!1),this._enabled=!0)},a.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},a.prototype._onMouseDown=function(t){t.shiftKey&&0===t.button&&(s.document.addEventListener("mousemove",this._onMouseMove,!1),s.document.addEventListener("keydown",this._onKeyDown,!1),s.document.addEventListener("mouseup",this._onMouseUp,!1),i.disableDrag(),this._startPos=i.mousePos(this._el,t),this._active=!0)},a.prototype._onMouseMove=function(t){var e=this._startPos,n=i.mousePos(this._el,t);this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(e.x,n.x),o=Math.max(e.x,n.x),s=Math.min(e.y,n.y),a=Math.max(e.y,n.y);i.setTransform(this._box,"translate("+r+"px,"+s+"px)"),this._box.style.width=o-r+"px",this._box.style.height=a-s+"px"},a.prototype._onMouseUp=function(t){if(0===t.button){var e=this._startPos,n=i.mousePos(this._el,t),o=(new r).extend(this._map.unproject(e)).extend(this._map.unproject(n));this._finish(),e.x===n.x&&e.y===n.y?this._fireEvent("boxzoomcancel",t):this._map.fitBounds(o,{linear:!0}).fire("boxzoomend",{originalEvent:t,boxZoomBounds:o})}},a.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},a.prototype._finish=function(){this._active=!1,s.document.removeEventListener("mousemove",this._onMouseMove,!1),s.document.removeEventListener("keydown",this._onKeyDown,!1),s.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.parentNode.removeChild(this._box),this._box=null),i.enableDrag()},a.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},e.exports=a},{"../../geo/lng_lat_bounds":20,"../../util/dom":119,"../../util/util":131,"../../util/window":114}],100:[function(t,e,n){"use strict";var i=function(t){this._map=t,this._onDblClick=this._onDblClick.bind(this)};i.prototype.isEnabled=function(){return!!this._enabled},i.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},i.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},i.prototype._onDblClick=function(t){this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},e.exports=i},{}],101:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/window"),s=.3,a=r.bezier(0,0,s,1),u=1400,l=2500,c=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.isActive=function(){return!!this._active},c.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},c.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(t.touches?(o.document.addEventListener("touchmove",this._onMove),o.document.addEventListener("touchend",this._onTouchEnd)):(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onMouseUp)),this._active=!1,this._startPos=this._pos=i.mousePos(this._el,t),this._inertia=[[Date.now(),this._pos]])},c.prototype._onMove=function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0,this._fireEvent("dragstart",t),this._fireEvent("movestart",t));var e=i.mousePos(this._el,t),n=this._map;n.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),e]),n.transform.setLocationAtPoint(n.transform.pointLocation(this._pos),e),this._fireEvent("drag",t),this._fireEvent("move",t),this._pos=e,t.preventDefault()}},c.prototype._onUp=function(t){var e=this;if(this.isActive()){this._active=!1,this._fireEvent("dragend",t),this._drainInertiaBuffer();var n=function(){return e._fireEvent("moveend",t)},i=this._inertia;if(i.length<2)return void n();var r=i[i.length-1],o=i[0],c=r[1].sub(o[1]),h=(r[0]-o[0])/1e3;if(0===h||r[1].equals(o[1]))return void n();var f=c.mult(s/h),p=f.mag();p>u&&(p=u,f._unit()._mult(p));var d=p/(l*s),g=f.mult(-d/2);this._map.panBy(g,{duration:1e3*d,easing:a,noMoveStart:!0},{originalEvent:t})}},c.prototype._onMouseUp=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onMouseUp))},c.prototype._onTouchEnd=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onTouchEnd))},c.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},c.prototype._ignoreEvent=function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragRotate&&e.dragRotate.isActive())return!0;if(t.touches)return t.touches.length>1;if(t.ctrlKey)return!0;var n=1,i=0;return"mousemove"===t.type?t.buttons&0===n:t.button!==i},c.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now(),n=160;t.length>0&&e-t[0][0]>n;)t.shift()},e.exports=c},{"../../util/dom":119,"../../util/util":131,"../../util/window":114}],102:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/window"),s=.25,a=r.bezier(0,0,s,1),u=180,l=720,c=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._bearingSnap=e.bearingSnap,this._pitchWithRotate=e.pitchWithRotate!==!1,r.bindAll(["_onDown","_onMove","_onUp"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.isActive=function(){return!!this._active},c.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},c.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=i.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault())},c.prototype._onMove=function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0,this._fireEvent("rotatestart",t),this._fireEvent("movestart",t));var e=this._map;e.stop();var n=this._pos,r=i.mousePos(this._el,t),o=.8*(n.x-r.x),s=(n.y-r.y)*-.5,a=e.getBearing()-o,u=e.getPitch()-s,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([Date.now(),e._normalizeBearing(a,c[1])]),e.transform.bearing=a,this._pitchWithRotate&&(e.transform.pitch=u),this._fireEvent("rotate",t),this._fireEvent("move",t),this._pos=r}},c.prototype._onUp=function(t){var e=this;if(!this._ignoreEvent(t)&&(o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onUp),this.isActive())){this._active=!1,this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,i=n.getBearing(),r=this._inertia,c=function(){Math.abs(i)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t)};if(r.length<2)return void c();var h=r[0],f=r[r.length-1],p=r[r.length-2],d=n._normalizeBearing(i,p[1]),g=f[1]-h[1],m=g<0?-1:1,y=(f[0]-h[0])/1e3;if(0===g||0===y)return void c();var v=Math.abs(g*(s/y));v>u&&(v=u);var _=v/(l*s),x=m*v*(_/2);d+=x,Math.abs(n._normalizeBearing(d,0))<this._bearingSnap&&(d=n._normalizeBearing(0,d)),n.rotateTo(d,{duration:1e3*_,easing:a,noMoveStart:!0},{originalEvent:t})}},c.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},c.prototype._ignoreEvent=function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragPan&&e.dragPan.isActive())return!0;if(t.touches)return t.touches.length>1;var n=t.ctrlKey?1:2,i=t.ctrlKey?0:2,r=t.button;return"undefined"!=typeof InstallTrigger&&2===t.button&&t.ctrlKey&&o.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(r=0),"mousemove"===t.type?t.buttons&0===n:r!==i},c.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now(),n=160;t.length>0&&e-t[0][0]>n;)t.shift()},e.exports=c},{"../../util/dom":119,"../../util/util":131,"../../util/window":114}],103:[function(t,e,n){"use strict";function i(t){return t*(2-t)}var r=100,o=15,s=10,a=function(t){this._map=t,this._el=t.getCanvasContainer(),this._onKeyDown=this._onKeyDown.bind(this)};a.prototype.isEnabled=function(){return!!this._enabled},a.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},a.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},a.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,a=0,u=0,l=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),u=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),u=1);break;case 38:t.shiftKey?a=1:(t.preventDefault(),l=-1);break;case 40:t.shiftKey?a=-1:(l=1,t.preventDefault())}var c=this._map,h=c.getZoom(),f={duration:300,delayEndEvents:500,easing:i,zoom:e?Math.round(h)+e*(t.shiftKey?2:1):h,bearing:c.getBearing()+n*o,pitch:c.getPitch()+a*s,offset:[-u*r,-l*r],center:c.getCenter()};c.easeTo(f,{originalEvent:t})}},e.exports=a},{}],104:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/browser"),s=t("../../util/window"),a=s.navigator.userAgent.toLowerCase(),u=a.indexOf("firefox")!==-1,l=a.indexOf("safari")!==-1&&a.indexOf("chrom")===-1,c=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll(["_onWheel","_onTimeout"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.enable=function(t){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},c.prototype._onWheel=function(t){var e;"wheel"===t.type?(e=t.deltaY,u&&t.deltaMode===s.WheelEvent.DOM_DELTA_PIXEL&&(e/=o.devicePixelRatio),t.deltaMode===s.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,l&&(e/=3));var n=o.now(),r=n-(this._time||0);this._pos=i.mousePos(this._el,t),this._time=n,0!==e&&e%4.000244140625===0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(r*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&this._zoom(-e,t),t.preventDefault()},c.prototype._onTimeout=function(){this._type="wheel",this._zoom(-this._lastValue)},c.prototype._zoom=function(t,e){if(0!==t){var n=this._map,i=2/(1+Math.exp(-Math.abs(t/100)));t<0&&0!==i&&(i=1/i);var r=n.ease?n.ease.to:n.transform.scale,o=n.transform.scaleZoom(r*i);n.zoomTo(o,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?n.getCenter():n.unproject(this._pos),
delayEndEvents:200,smoothEasing:!0},{originalEvent:e})}},e.exports=c},{"../../util/browser":112,"../../util/dom":119,"../../util/util":131,"../../util/window":114}],105:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/window"),s=.15,a=r.bezier(0,0,s,1),u=12,l=2.5,c=.15,h=4,f=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll(["_onStart","_onMove","_onEnd"],this)};f.prototype.isEnabled=function(){return!!this._enabled},f.prototype.enable=function(t){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},f.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},f.prototype.disableRotation=function(){this._rotationDisabled=!0},f.prototype.enableRotation=function(){this._rotationDisabled=!1},f.prototype._onStart=function(t){if(2===t.touches.length){var e=i.mousePos(this._el,t.touches[0]),n=i.mousePos(this._el,t.touches[1]);this._startVec=e.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],o.document.addEventListener("touchmove",this._onMove,!1),o.document.addEventListener("touchend",this._onEnd,!1)}},f.prototype._onMove=function(t){if(2===t.touches.length){var e=i.mousePos(this._el,t.touches[0]),n=i.mousePos(this._el,t.touches[1]),r=e.add(n).div(2),o=e.sub(n),s=o.mag()/this._startVec.mag(),a=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,u=this._map;if(this._gestureIntent){var l={duration:0,around:u.unproject(r)};"rotate"===this._gestureIntent&&(l.bearing=this._startBearing+a),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(l.zoom=u.transform.scaleZoom(this._startScale*s)),u.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),s,r]),u.easeTo(l,{originalEvent:t})}else{var f=Math.abs(1-s)>c,p=Math.abs(a)>h;p?this._gestureIntent="rotate":f&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=o,this._startScale=u.transform.scale,this._startBearing=u.transform.bearing)}t.preventDefault()}},f.prototype._onEnd=function(t){o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var e=this._inertia,n=this._map;if(e.length<2)return void n.snapToNorth({},{originalEvent:t});var i=e[e.length-1],r=e[0],c=n.transform.scaleZoom(this._startScale*i[1]),h=n.transform.scaleZoom(this._startScale*r[1]),f=c-h,p=(i[0]-r[0])/1e3,d=i[2];if(0===p||c===h)return void n.snapToNorth({},{originalEvent:t});var g=f*s/p;Math.abs(g)>l&&(g=g>0?l:-l);var m=1e3*Math.abs(g/(u*s)),y=c+g*m/2e3;y<0&&(y=0),n.easeTo({zoom:y,duration:m,easing:a,around:this._aroundCenter?n.getCenter():n.unproject(d)},{originalEvent:t})},f.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now(),n=160;t.length>2&&e-t[0][0]>n;)t.shift()},e.exports=f},{"../../util/dom":119,"../../util/util":131,"../../util/window":114}],106:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/window"),o=function(){i.bindAll(["_onHashChange","_updateHash"],this)};o.prototype.addTo=function(t){return this._map=t,r.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},o.prototype.remove=function(){return r.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},o.prototype._onHashChange=function(){var t=r.location.hash.replace("#","").split("/");return t.length>=3&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},o.prototype._updateHash=function(){var t=this._map.getCenter(),e=this._map.getZoom(),n=this._map.getBearing(),i=this._map.getPitch(),o=Math.max(0,Math.ceil(Math.log(e)/Math.LN2)),s="#"+Math.round(100*e)/100+"/"+t.lat.toFixed(o)+"/"+t.lng.toFixed(o);(n||i)&&(s+="/"+Math.round(10*n)/10),i&&(s+="/"+Math.round(i)),r.history.replaceState("","",s)},e.exports=o},{"../util/util":131,"../util/window":114}],107:[function(t,e,n){"use strict";function i(t){t.parentNode&&t.parentNode.removeChild(t)}var r=t("../util/util"),o=t("../util/browser"),s=t("../util/window"),a=t("../util/dom"),u=t("../style/style"),l=t("../style/animation_loop"),c=t("../render/painter"),h=t("../geo/transform"),f=t("./hash"),p=t("./bind_handlers"),d=t("./camera"),g=t("../geo/lng_lat"),m=t("../geo/lng_lat_bounds"),y=t("point-geometry"),v=t("./control/attribution_control"),_=t("mapbox-gl-supported"),x=0,b=20,E={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:x,maxZoom:b,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0},w=function(t){function e(e){var n=this;e=r.extend({},E,e);var i=new h(e.minZoom,e.maxZoom,e.renderWorldCopies);if(t.call(this,i,e),this._interactive=e.interactive,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,"string"==typeof e.container){if(this._container=s.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else this._container=e.container;this.animationLoop=new l,e.maxBounds&&this.setMaxBounds(e.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("moveend",function(){n.animationLoop.set(300),n._rerender()}),"undefined"!=typeof s&&(s.addEventListener("online",this._onWindowOnline,!1),s.addEventListener("resize",this._onWindowResize,!1)),p(this,e),this._hash=e.hash&&(new f).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),this._classes=[],this.resize(),e.classes&&this.setClasses(e.classes),e.style&&this.setStyle(e.style),e.attributionControl&&this.addControl(new v),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update(this._classes,{transition:!1})}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return e.prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var n=t.onAdd(this),i=this._controlPositions[e];return e.indexOf("bottom")!==-1?i.insertBefore(n,i.firstChild):i.appendChild(n),this},e.prototype.removeControl=function(t){return t.onRemove(this),this},e.prototype.addClass=function(t,e){return r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(t)>=0||""===t?this:(this._classes.push(t),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},e.prototype.removeClass=function(t,e){r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");var n=this._classes.indexOf(t);return n<0||""===t?this:(this._classes.splice(n,1),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},e.prototype.setClasses=function(t,e){r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");for(var n={},i=0;i<t.length;i++)""!==t[i]&&(n[t[i]]=!0);return this._classes=Object.keys(n),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0)},e.prototype.hasClass=function(t){return r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(t)>=0},e.prototype.getClasses=function(){return r.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes},e.prototype.resize=function(){var t=this._containerDimensions(),e=t[0],n=t[1];this._resizeCanvas(e,n),this.transform.resize(e,n),this.painter.resize(e,n);var i=this.painter.gl,o=i.getParameter(i.MAX_RENDERBUFFER_SIZE)/2;return(this._canvas.width>o||this._canvas.height>o)&&r.warnOnce("Map is larger than maximum size supported by this system ("+o+"px by "+o+"px)."),this.fire("movestart").fire("move").fire("resize").fire("moveend")},e.prototype.getBounds=function(){var t=new m(this.transform.pointLocation(new y(0,this.transform.height)),this.transform.pointLocation(new y(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(t.extend(this.transform.pointLocation(new y(this.transform.size.x,0))),t.extend(this.transform.pointLocation(new y(0,this.transform.size.y)))),t},e.prototype.setMaxBounds=function(t){if(t){var e=m.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null!==t&&void 0!==t||(this.transform.lngRange=[],this.transform.latRange=[],this._update());return this},e.prototype.setMinZoom=function(t){if(t=null===t||void 0===t?x:t,t>=x&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between "+x+" and the current maxZoom, inclusive")},e.prototype.getMinZoom=function(){return this.transform.minZoom},e.prototype.setMaxZoom=function(t){if(t=null===t||void 0===t?b:t,t>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},e.prototype.getMaxZoom=function(){return this.transform.maxZoom},e.prototype.project=function(t){return this.transform.locationPoint(g.convert(t))},e.prototype.unproject=function(t){return this.transform.pointLocation(y.convert(t))},e.prototype.queryRenderedFeatures=function(){function t(t){return t instanceof y||Array.isArray(t)}var e,n={};return 2===arguments.length?(e=arguments[0],n=arguments[1]):1===arguments.length&&t(arguments[0])?e=arguments[0]:1===arguments.length&&(n=arguments[0]),this.style.queryRenderedFeatures(this._makeQueryGeometry(e),n,this.transform.zoom,this.transform.angle)},e.prototype._makeQueryGeometry=function(t){var e=this;void 0===t&&(t=[y.convert([0,0]),y.convert([this.transform.width,this.transform.height])]);var n,i=t instanceof y||"number"==typeof t[0];if(i){var r=y.convert(t);n=[r]}else{var o=[y.convert(t[0]),y.convert(t[1])];n=[o[0],new y(o[1].x,o[0].y),o[1],new y(o[0].x,o[1].y),o[0]]}return n=n.map(function(t){return e.transform.pointCoordinate(t)})},e.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},e.prototype.setStyle=function(t,e){var n=(!e||e.diff!==!1)&&this.style&&t&&!(t instanceof u)&&"string"!=typeof t;if(n)try{return this.style.setState(t)&&this._update(!0),this}catch(t){r.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),t?(t instanceof u?this.style=t:this.style=new u(t,this),this.style.setEventedParent(this,{style:this.style}),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},e.prototype.getStyle=function(){if(this.style)return this.style.serialize()},e.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},e.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];return void 0===e?void this.fire("error",{error:new Error("There is no source with ID '"+t+"'")}):e.loaded()},e.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},e.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},e.prototype.getSource=function(t){return this.style.getSource(t)},e.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},e.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},e.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},e.prototype.getLayer=function(t){return this.style.getLayer(t)},e.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},e.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0),this},e.prototype.getFilter=function(t){return this.style.getFilter(t)},e.prototype.setPaintProperty=function(t,e,n,i){return this.style.setPaintProperty(t,e,n,i),this._update(!0),this},e.prototype.getPaintProperty=function(t,e,n){return this.style.getPaintProperty(t,e,n)},e.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0),this},e.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},e.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},e.prototype.getLight=function(){return this.style.getLight()},e.prototype.getContainer=function(){return this._container},e.prototype.getCanvasContainer=function(){return this._canvasContainer},e.prototype.getCanvas=function(){return this._canvas},e.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},e.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map");var e=this._canvasContainer=a.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=a.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",0),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var i=this._controlContainer=a.create("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){r[t]=a.create("div","mapboxgl-ctrl-"+t,i)})},e.prototype._resizeCanvas=function(t,e){var n=s.devicePixelRatio||1;this._canvas.width=n*t,this._canvas.height=n*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},e.prototype._setupPainter=function(){var t=r.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},_.webGLContextAttributes),e=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);return e?void(this.painter=new c(e,this.transform)):void this.fire("error",{error:new Error("Failed to initialize WebGL")})},e.prototype._contextLost=function(t){t.preventDefault(),this._frameId&&o.cancelFrame(this._frameId),this.fire("webglcontextlost",{originalEvent:t})},e.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:t})},e.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},e.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender(),this):this},e.prototype._render=function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender(),this},e.prototype.remove=function(){this._hash&&this._hash.remove(),o.cancelFrame(this._frameId),this.setStyle(null),"undefined"!=typeof s&&s.removeEventListener("resize",this._onWindowResize,!1);var t=this.painter.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),i(this._canvasContainer),i(this._controlContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},e.prototype._rerender=function(){this.style&&!this._frameId&&(this._frameId=o.frame(this._render))},e.prototype._onWindowOnline=function(){this._update()},e.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,this.style._redoPlacement())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(t){this._repaint=t,this._update()},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(t){this._vertices=t,this._update()},e.prototype._onData=function(t){this._update("style"===t.dataType),this.fire(t.dataType+"data",t)},e.prototype._onDataLoading=function(t){this.fire(t.dataType+"dataloading",t)},Object.defineProperties(e.prototype,n),e}(d);e.exports=w},{"../geo/lng_lat":19,"../geo/lng_lat_bounds":20,"../geo/transform":21,"../render/painter":36,"../style/animation_loop":61,"../style/style":65,"../util/browser":112,"../util/dom":119,"../util/util":131,"../util/window":114,"./bind_handlers":93,"./camera":94,"./control/attribution_control":95,"./hash":106,"mapbox-gl-supported":196,"point-geometry":200}],108:[function(t,e,n){"use strict";var i=t("../util/dom"),r=t("../geo/lng_lat"),o=t("point-geometry"),s=function(t,e){this._offset=o.convert(e&&e.offset||[0,0]),this._update=this._update.bind(this),this._onMapClick=this._onMapClick.bind(this),t||(t=i.create("div")),t.classList.add("mapboxgl-marker"),this._element=t,this._popup=null};s.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map=null),i.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(t){return this._lngLat=r.convert(t),this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(t){return this._popup&&(this._popup.remove(),this._popup=null),t&&(this._popup=t,this._popup.setLngLat(this._lngLat)),this},s.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var t=this._popup;t&&(t.isOpen()?t.remove():t.addTo(this._map))},s.prototype._update=function(t){if(this._map){var e=this._map.project(this._lngLat)._add(this._offset);t&&"moveend"!==t.type||(e=e.round()),i.setTransform(this._element,"translate("+e.x+"px, "+e.y+"px)")}},e.exports=s},{"../geo/lng_lat":19,"../util/dom":119,"point-geometry":200}],109:[function(t,e,n){"use strict";function i(t){if(t){if("number"==typeof t){var e=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{top:new l(0,t),"top-left":new l(e,e),"top-right":new l(-e,e),bottom:new l(0,-t),"bottom-left":new l(e,-e),"bottom-right":new l(-e,-e),left:new l(t,0),right:new l(-t,0)}}if(r(t)){var n=l.convert(t);return{top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{top:l.convert(t.top||[0,0]),"top-left":l.convert(t["top-left"]||[0,0]),"top-right":l.convert(t["top-right"]||[0,0]),bottom:l.convert(t.bottom||[0,0]),"bottom-left":l.convert(t["bottom-left"]||[0,0]),"bottom-right":l.convert(t["bottom-right"]||[0,0]),left:l.convert(t.left||[0,0]),right:l.convert(t.right||[0,0])}}return i(new l(0,0))}function r(t){return t instanceof l||Array.isArray(t)}var o=t("../util/util"),s=t("../util/evented"),a=t("../util/dom"),u=t("../geo/lng_lat"),l=t("point-geometry"),c=t("../util/window"),h={closeButton:!0,closeOnClick:!0},f=function(t){function e(e){t.call(this),this.options=o.extend(Object.create(h),e),o.bindAll(["_update","_onClickClose"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._container&&(this._container.parentNode.removeChild(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=u.convert(t),this._update(),this},e.prototype.setText=function(t){return this.setDOMContent(c.document.createTextNode(t))},e.prototype.setHTML=function(t){var e,n=c.document.createDocumentFragment(),i=c.document.createElement("body");for(i.innerHTML=t;e=i.firstChild,e;)n.appendChild(e);return this.setDOMContent(n)},e.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},e.prototype._createContent=function(){this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},e.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content));var t=this.options.anchor,e=i(this.options.offset),n=this._map.project(this._lngLat).round();if(!t){var r=this._container.offsetWidth,o=this._container.offsetHeight;t=n.y+e.bottom.y<o?["top"]:n.y>this._map.transform.height-o?["bottom"]:[],n.x<r/2?t.push("left"):n.x>this._map.transform.width-r/2&&t.push("right"),t=0===t.length?"bottom":t.join("-")}var s=n.add(e[t]),u={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},l=this._container.classList;for(var c in u)l.remove("mapboxgl-popup-anchor-"+c);l.add("mapboxgl-popup-anchor-"+t),a.setTransform(this._container,u[t]+" translate("+s.x+"px,"+s.y+"px)")}},e.prototype._onClickClose=function(){this.remove()},e}(s);e.exports=f},{"../geo/lng_lat":19,"../util/dom":119,"../util/evented":120,"../util/util":131,"../util/window":114,"point-geometry":200}],110:[function(t,e,n){"use strict";var i=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.target.addEventListener("message",this.receive,!1)};i.prototype.send=function(t,e,n,i,r){var o=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[o]=n),this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(o),data:e},i)},i.prototype.receive=function(t){var e,n=this,i=t.data,r=i.id;if(!i.targetMapId||this.mapId===i.targetMapId){var o=function(t,e,i){n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(r),error:t?String(t):null,data:e},i)};if("<response>"===i.type)e=this.callbacks[i.id],delete this.callbacks[i.id],e&&e(i.error||null,i.data);else if("undefined"!=typeof i.id&&this.parent[i.type])this.parent[i.type](i.sourceMapId,i.data,o);else if("undefined"!=typeof i.id&&this.parent.getWorkerSource){var s=i.type.split("."),a=this.parent.getWorkerSource(i.sourceMapId,s[0]);a[s[1]](i.data,o)}else this.parent[i.type](i.data)}},i.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},e.exports=i},{}],111:[function(t,e,n){"use strict";function i(t){var e=r.document.createElement("a");return e.href=t,e.protocol===r.document.location.protocol&&e.host===r.document.location.host}var r=t("./window");n.getJSON=function(t,e){var n=new r.XMLHttpRequest;return n.open("GET",t,!0),n.setRequestHeader("Accept","application/json"),n.onerror=function(t){e(t)},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var t;try{t=JSON.parse(n.response)}catch(t){return e(t)}e(null,t)}else e(new Error(n.statusText))},n.send(),n},n.getArrayBuffer=function(t,e){var n=new r.XMLHttpRequest;return n.open("GET",t,!0),n.responseType="arraybuffer",n.onerror=function(t){e(t)},n.onload=function(){return 0===n.response.byteLength&&200===n.status?e(new Error("http status 200 returned without content.")):void(n.status>=200&&n.status<300&&n.response?e(null,{data:n.response,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new Error(n.statusText)))},n.send(),n};var o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";n.getImage=function(t,e){return n.getArrayBuffer(t,function(t,n){if(t)return e(t);var i=new r.Image,s=r.URL||r.webkitURL;i.onload=function(){e(null,i),s.revokeObjectURL(i.src)};var a=new r.Blob([new Uint8Array(n.data)],{type:"image/png"});i.cacheControl=n.cacheControl,i.expires=n.expires,i.src=n.data.byteLength?s.createObjectURL(a):o})},n.getVideo=function(t,e){var n=r.document.createElement("video");n.onloadstart=function(){e(null,n)};for(var o=0;o<t.length;o++){var s=r.document.createElement("source");i(t[o])||(n.crossOrigin="Anonymous"),s.src=t[o],n.appendChild(s)}return n}},{"./window":114}],112:[function(t,e,n){"use strict";var i=t("./window");e.exports.now=function(){return i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now.bind(Date)}();var r=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||i.msRequestAnimationFrame;n.frame=function(t){return r(t)};var o=i.cancelAnimationFrame||i.mozCancelAnimationFrame||i.webkitCancelAnimationFrame||i.msCancelAnimationFrame;n.cancelFrame=function(t){o(t)},n.timed=function(t,i,r){function o(u){s||(u=e.exports.now(),u>=a+i?t.call(r,1):(t.call(r,(u-a)/i),n.frame(o)))}if(!i)return t.call(r,1),null;var s=!1,a=e.exports.now();return n.frame(o),function(){s=!0}},n.getImageData=function(t){var e=i.document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height).data},n.supported=t("mapbox-gl-supported"),n.hardwareConcurrency=i.navigator.hardwareConcurrency||4,Object.defineProperty(n,"devicePixelRatio",{get:function(){return i.devicePixelRatio}}),n.supportsWebp=!1;var s=i.document.createElement("img");s.onload=function(){n.supportsWebp=!0},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":114,"mapbox-gl-supported":196}],113:[function(t,e,n){"use strict";var i=t("webworkify"),r=t("../window"),o=r.URL.createObjectURL(new i(t("../../source/worker"),{bare:!0}));e.exports=function(){return new r.Worker(o)}},{"../../source/worker":59,"../window":114,webworkify:216}],114:[function(t,e,n){"use strict";e.exports=self},{}],115:[function(t,e,n){"use strict";function i(t,e){return e.area-t.area}var r=t("quickselect"),o=t("./util").calculateSignedArea;e.exports=function(t,e){var n=t.length;if(n<=1)return[t];for(var s,a,u=[],l=0;l<n;l++){var c=o(t[l]);0!==c&&(t[l].area=Math.abs(c),void 0===a&&(a=c<0),a===c<0?(s&&u.push(s),s=[t[l]]):s.push(t[l]))}if(s&&u.push(s),e>1)for(var h=0;h<u.length;h++)u[h].length<=e||(r(u[h],e,1,u[h].length-1,i),u[h]=u[h].slice(0,e));return u}},{"./util":131,quickselect:201}],116:[function(t,e,n){"use strict";var i={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null};e.exports=i},{}],117:[function(t,e,n){"use strict";var i=function(t){var e=this;this._stringToNumber={},this._numberToString=[];for(var n=0;n<t.length;n++){var i=t[n];e._stringToNumber[i]=n,e._numberToString[n]=i}};i.prototype.encode=function(t){return this._stringToNumber[t]},i.prototype.decode=function(t){return this._numberToString[t]},e.exports=i},{}],118:[function(t,e,n){"use strict";var i=t("./util"),r=t("./actor"),o=function(t,e){var n=this;this.workerPool=t,this.actors=[],this.currentActor=0,this.id=i.uniqueId();for(var o=this.workerPool.acquire(this.id),s=0;s<o.length;s++){var a=o[s],u=new r(a,e,n.id);u.name="Worker "+s,n.actors.push(u)}};o.prototype.broadcast=function(t,e,n){n=n||function(){},i.asyncAll(this.actors,function(n,i){n.send(t,e,i)},n)},o.prototype.send=function(t,e,n,i,r){return("number"!=typeof i||isNaN(i))&&(i=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[i].send(t,e,n,r),i},o.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},e.exports=o},{"./actor":110,"./util":131}],119:[function(t,e,n){"use strict";function i(t){for(var e=0;e<t.length;e++)if(t[e]in u)return t[e];return t[0]}function r(t){t.preventDefault(),t.stopPropagation(),s.removeEventListener("click",r,!0)}var o=t("point-geometry"),s=t("./window");n.create=function(t,e,n){var i=s.document.createElement(t);return e&&(i.className=e),n&&n.appendChild(i),i};var a,u=s.document.documentElement.style,l=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){l&&(a=u[l],u[l]="none")},n.enableDrag=function(){l&&(u[l]=a)};var c=i(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[c]=e},n.suppressClick=function(){s.addEventListener("click",r,!0),s.setTimeout(function(){s.removeEventListener("click",r,!0)},0)},n.mousePos=function(t,e){var n=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,new o(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},n.touchPos=function(t,e){for(var n=t.getBoundingClientRect(),i=[],r="touchend"===e.type?e.changedTouches:e.touches,s=0;s<r.length;s++)i.push(new o(r[s].clientX-n.left-t.clientLeft,r[s].clientY-n.top-t.clientTop));return i},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)}},{"./window":114,"point-geometry":200}],120:[function(t,e,n){"use strict";var i=t("./util"),r=function(){};r.prototype.on=function(t,e){return this._listeners=this._listeners||{},this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e),this},r.prototype.off=function(t,e){
if(this._listeners&&this._listeners[t]){var n=this._listeners[t].indexOf(e);n!==-1&&this._listeners[t].splice(n,1)}return this},r.prototype.once=function(t,e){var n=this,i=function(r){n.off(t,i),e.call(n,r)};return this.on(t,i),this},r.prototype.fire=function(t,e){var n=this;if(this.listens(t)){e=i.extend({},e,{type:t,target:this});for(var r=this._listeners&&this._listeners[t]?this._listeners[t].slice():[],o=0;o<r.length;o++)r[o].call(n,e);this._eventedParent&&this._eventedParent.fire(t,i.extend({},e,this._eventedParentData))}else i.endsWith(t,"error")&&console.error(e&&e.error||e||"Empty error event");return this},r.prototype.listens=function(t){return this._listeners&&this._listeners[t]||this._eventedParent&&this._eventedParent.listens(t)},r.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData="function"==typeof e?e():e,this},e.exports=r},{"./util":131}],121:[function(t,e,n){"use strict";function i(t,e){return e.max-t.max}function r(t,e,n,i){this.p=new u(t,e),this.h=n,this.d=o(this.p,i),this.max=this.d+this.h*Math.SQRT2}function o(t,e){for(var n=!1,i=1/0,r=0;r<e.length;r++)for(var o=e[r],s=0,a=o.length,u=a-1;s<a;u=s++){var c=o[s],h=o[u];c.y>t.y!=h.y>t.y&&t.x<(h.x-c.x)*(t.y-c.y)/(h.y-c.y)+c.x&&(n=!n),i=Math.min(i,l(t,c,h))}return(n?1:-1)*Math.sqrt(i)}function s(t){for(var e=0,n=0,i=0,o=t[0],s=0,a=o.length,u=a-1;s<a;u=s++){var l=o[s],c=o[u],h=l.x*c.y-c.x*l.y;n+=(l.x+c.x)*h,i+=(l.y+c.y)*h,e+=3*h}return new r(n/e,i/e,0,t)}var a=t("tinyqueue"),u=t("point-geometry"),l=t("./intersection_tests").distToSegmentSquared;e.exports=function(t,e,n){e=e||1;for(var o,u,l,c,h=t[0],f=0;f<h.length;f++){var p=h[f];(!f||p.x<o)&&(o=p.x),(!f||p.y<u)&&(u=p.y),(!f||p.x>l)&&(l=p.x),(!f||p.y>c)&&(c=p.y)}for(var d=l-o,g=c-u,m=Math.min(d,g),y=m/2,v=new a(null,i),_=o;_<l;_+=m)for(var x=u;x<c;x+=m)v.push(new r(_+y,x+y,y,t));for(var b=s(t),E=v.length;v.length;){var w=v.pop();w.d>b.d&&(b=w,n&&console.log("found best %d after %d probes",Math.round(1e4*w.d)/1e4,E)),w.max-b.d<=e||(y=w.h/2,v.push(new r(w.p.x-y,w.p.y-y,y,t)),v.push(new r(w.p.x+y,w.p.y-y,y,t)),v.push(new r(w.p.x-y,w.p.y+y,y,t)),v.push(new r(w.p.x+y,w.p.y+y,y,t)),E+=4)}return n&&(console.log("num probes: "+E),console.log("best distance: "+b.d)),b.p}},{"./intersection_tests":124,"point-geometry":200,tinyqueue:208}],122:[function(t,e,n){"use strict";function i(t,e){this.stacks=t.readFields(r,[],e)}function r(t,e,n){if(1===t){var i=n.readMessage(o,{glyphs:{}});e.push(i)}}function o(t,e,n){if(1===t)e.name=n.readString();else if(2===t)e.range=n.readString();else if(3===t){var i=n.readMessage(s,{});e.glyphs[i.id]=i}}function s(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}e.exports=i},{}],123:[function(t,e,n){"use strict";function i(t,e,n){return t*(1-n)+e*n}e.exports=i,i.number=i,i.vec2=function(t,e,n){return[i(t[0],e[0],n),i(t[1],e[1],n)]},i.color=function(t,e,n){return[i(t[0],e[0],n),i(t[1],e[1],n),i(t[2],e[2],n),i(t[3],e[3],n)]},i.array=function(t,e,n){return t.map(function(t,r){return i(t,e[r],n)})}},{}],124:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<t.length;n++)if(p(e,t[n]))return!0;for(var i=0;i<e.length;i++)if(p(t,e[i]))return!0;return!!u(t,e)}function r(t,e,n){for(var i=0;i<t.length;i++)for(var r=t[i],o=0;o<e.length;o++)for(var s=e[o],a=0;a<s.length;a++){var u=s[a];if(p(r,u))return!0;if(c(u,r,n))return!0}return!1}function o(t,e){if(1===t.length&&1===t[0].length)return f(e,t[0][0]);for(var n=0;n<e.length;n++)for(var i=e[n],r=0;r<i.length;r++)if(f(t,i[r]))return!0;for(var o=0;o<t.length;o++){for(var s=t[o],a=0;a<s.length;a++)if(f(e,s[a]))return!0;for(var l=0;l<e.length;l++)if(u(s,e[l]))return!0}return!1}function s(t,e,n){for(var i=0;i<e.length;i++)for(var r=e[i],o=0;o<t.length;o++){var s=t[o];if(s.length>=3)for(var u=0;u<r.length;u++)if(p(s,r[u]))return!0;if(a(s,r,n))return!0}return!1}function a(t,e,n){if(t.length>1){if(u(t,e))return!0;for(var i=0;i<e.length;i++)if(c(e[i],t,n))return!0}for(var r=0;r<t.length;r++)if(c(t[r],e,n))return!0;return!1}function u(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var i=t[n],r=t[n+1],o=0;o<e.length-1;o++){var s=e[o],a=e[o+1];if(l(i,r,s,a))return!0}return!1}function l(t,e,n,i){return d(t,n,i)!==d(e,n,i)&&d(t,e,n)!==d(t,e,i)}function c(t,e,n){var i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(var r=1;r<e.length;r++){var o=e[r-1],s=e[r];if(h(t,o,s)<i)return!0}return!1}function h(t,e,n){var i=e.distSqr(n);if(0===i)return t.distSqr(e);var r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return r<0?t.distSqr(e):r>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(r)._add(e))}function f(t,e){for(var n,i,r,o=!1,s=0;s<t.length;s++){n=t[s];for(var a=0,u=n.length-1;a<n.length;u=a++)i=n[a],r=n[u],i.y>e.y!=r.y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(o=!o)}return o}function p(t,e){for(var n=!1,i=0,r=t.length-1;i<t.length;r=i++){var o=t[i],s=t[r];o.y>e.y!=s.y>e.y&&e.x<(s.x-o.x)*(e.y-o.y)/(s.y-o.y)+o.x&&(n=!n)}return n}var d=t("./util").isCounterClockwise;e.exports={multiPolygonIntersectsBufferedMultiPoint:r,multiPolygonIntersectsMultiPolygon:o,multiPolygonIntersectsBufferedMultiLine:s,polygonIntersectsPolygon:i,distToSegmentSquared:h}},{"./util":131}],125:[function(t,e,n){"use strict";var i={"Latin-1 Supplement":function(t){return t>=128&&t<=255},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};e.exports=i},{}],126:[function(t,e,n){"use strict";var i=function(t,e){this.max=t,this.onRemove=e,this.reset()};i.prototype.reset=function(){var t=this;for(var e in this.data)t.onRemove(t.data[e]);return this.data={},this.order=[],this},i.prototype.add=function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var n=this.get(this.order[0]);n&&this.onRemove(n)}return this},i.prototype.has=function(t){return t in this.data},i.prototype.keys=function(){return this.order},i.prototype.get=function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e},i.prototype.remove=function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this},i.prototype.setMaxSize=function(t){var e=this;for(this.max=t;this.order.length>this.max;){var n=e.get(e.order[0]);n&&e.onRemove(n)}return this},e.exports=i},{}],127:[function(t,e,n){"use strict";function i(t,e){var n=s(u.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,!u.REQUIRE_ACCESS_TOKEN)return a(t);if(e=e||u.ACCESS_TOKEN,!e)throw new Error("An API access token is required to use Mapbox GL. "+c);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+c);return t.params.push("access_token="+e),a(t)}function r(t){return 0===t.indexOf("mapbox:")}function o(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(u.ACCESS_TOKEN||""))}function s(t){var e=t.match(f);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function a(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}var u=t("./config"),l=t("./browser"),c="See https://www.mapbox.com/developers/api/#access-tokens";n.isMapboxURL=r,n.normalizeStyleURL=function(t,e){if(!r(t))return t;var n=s(t);return n.path="/styles/v1"+n.path,i(n,e)},n.normalizeGlyphsURL=function(t,e){if(!r(t))return t;var n=s(t);return n.path="/fonts/v1"+n.path,i(n,e)},n.normalizeSourceURL=function(t,e){if(!r(t))return t;var n=s(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),i(n,e)},n.normalizeSpriteURL=function(t,e,n,o){var u=s(t);return r(t)?(u.path="/styles/v1"+u.path+"/sprite"+e+n,i(u,o)):(u.path+=""+e+n,a(u))};var h=/(\.(png|jpg)\d*)(?=$)/;n.normalizeTileURL=function(t,e,n){if(!e||!r(e))return t;var i=s(t),u=l.devicePixelRatio>=2||512===n?"@2x":"",c=l.supportsWebp?".webp":"$1";return i.path=i.path.replace(h,""+u+c),o(i.params),a(i)};var f=/^(\w+):\/\/([^\/?]+)(\/[^?]+)?\??(.+)?/},{"./browser":112,"./config":116}],128:[function(t,e,n){"use strict";var i=t("./is_char_in_unicode_block");e.exports.allowsIdeographicBreaking=function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e];if(!n.charAllowsIdeographicBreaking(r.charCodeAt(0)))return!1}return!0},e.exports.allowsVerticalWritingMode=function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e];if(n.charHasUprightVerticalOrientation(r.charCodeAt(0)))return!0}return!1},e.exports.charAllowsIdeographicBreaking=function(t){return!!(!(t<11904)&&(i["Bopomofo Extended"](t)||i.Bopomofo(t)||i["CJK Compatibility Forms"](t)||i["CJK Compatibility Ideographs"](t)||i["CJK Compatibility"](t)||i["CJK Radicals Supplement"](t)||i["CJK Strokes"](t)||i["CJK Symbols and Punctuation"](t)||i["CJK Unified Ideographs Extension A"](t)||i["CJK Unified Ideographs"](t)||i["Enclosed CJK Letters and Months"](t)||i["Halfwidth and Fullwidth Forms"](t)||i.Hiragana(t)||i["Ideographic Description Characters"](t)||i["Kangxi Radicals"](t)||i["Katakana Phonetic Extensions"](t)||i.Katakana(t)||i["Vertical Forms"](t)||i["Yi Radicals"](t)||i["Yi Syllables"](t)))},n.charHasUprightVerticalOrientation=function(t){return!!(746===t||747===t||!(t<4352)&&(i["Bopomofo Extended"](t)||i.Bopomofo(t)||i["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||i["CJK Compatibility Ideographs"](t)||i["CJK Compatibility"](t)||i["CJK Radicals Supplement"](t)||i["CJK Strokes"](t)||!(!i["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||i["CJK Unified Ideographs Extension A"](t)||i["CJK Unified Ideographs"](t)||i["Enclosed CJK Letters and Months"](t)||i["Hangul Compatibility Jamo"](t)||i["Hangul Jamo Extended-A"](t)||i["Hangul Jamo Extended-B"](t)||i["Hangul Jamo"](t)||i["Hangul Syllables"](t)||i.Hiragana(t)||i["Ideographic Description Characters"](t)||i.Kanbun(t)||i["Kangxi Radicals"](t)||i["Katakana Phonetic Extensions"](t)||i.Katakana(t)&&12540!==t||!(!i["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!i["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||i["Unified Canadian Aboriginal Syllabics"](t)||i["Unified Canadian Aboriginal Syllabics Extended"](t)||i["Vertical Forms"](t)||i["Yijing Hexagram Symbols"](t)||i["Yi Syllables"](t)||i["Yi Radicals"](t)))},n.charHasNeutralVerticalOrientation=function(t){return!!(i["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||i["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||i["Letterlike Symbols"](t)||i["Number Forms"](t)||i["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||i["Control Pictures"](t)&&9251!==t||i["Optical Character Recognition"](t)||i["Enclosed Alphanumerics"](t)||i["Geometric Shapes"](t)||i["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||i["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||i["CJK Symbols and Punctuation"](t)||i.Katakana(t)||i["Private Use Area"](t)||i["CJK Compatibility Forms"](t)||i["Small Form Variants"](t)||i["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)},n.charHasRotatedVerticalOrientation=function(t){return!(n.charHasUprightVerticalOrientation(t)||n.charHasNeutralVerticalOrientation(t))}},{"./is_char_in_unicode_block":125}],129:[function(t,e,n){"use strict";function i(t){var e=JSON.stringify(t);if(m[e])return m[e];var n=void 0===t.alignment?1:t.alignment,i=0,s=0,u=["Uint8"],h=t.members.map(function(t){u.indexOf(t.type)<0&&u.push(t.type);var e=o(t.type),a=i=r(i,Math.max(n,e)),l=t.components||1;return s=Math.max(s,e),i+=e*l,{name:t.name,type:t.type,components:l,offset:a}}),p=r(i,Math.max(s,n)),d=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(f);d.prototype.alignment=n,d.prototype.size=p;for(var y=0,v=h;y<v.length;y+=1)for(var _=v[y],x=0;x<_.components;x++){var b=_.name+(1===_.components?"":x);Object.defineProperty(d.prototype,b,{get:l(_,x),set:c(_,x)})}var E=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(g);return E.prototype.members=h,E.prototype.StructType=d,E.prototype.bytesPerElement=p,E.prototype.emplaceBack=a(h,p),E.prototype._usedTypes=u,m[e]=E,E}function r(t,e){return Math.ceil(t/e)*e}function o(t){return h[t].BYTES_PER_ELEMENT}function s(t){return t.toLowerCase()}function a(t,e){for(var n=[],i=[],r="var i = this.length;\nthis.resize(this.length + 1);\n",a=0,u=t;a<u.length;a+=1){var l=u[a],c=o(l.type);n.indexOf(c)<0&&(n.push(c),r+="var o"+c.toFixed(0)+" = i * "+(e/c).toFixed(0)+";\n");for(var h=0;h<l.components;h++){var f="v"+i.length,p="o"+c.toFixed(0)+" + "+(l.offset/c+h).toFixed(0);r+="this."+s(l.type)+"["+p+"] = "+f+";\n",i.push(f)}}return r+="return i;",new Function(i.toString(),r)}function u(t,e){var n="this._pos"+o(t.type).toFixed(0),i=(t.offset/o(t.type)+e).toFixed(0),r=n+" + "+i;return"this._structArray."+s(t.type)+"["+r+"]"}function l(t,e){return new Function("return "+u(t,e)+";")}function c(t,e){return new Function("x",u(t,e)+" = x;")}e.exports=i;var h={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},f=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},p=128,d=5,g=function(t){this.isTransferred=!1,void 0!==t?(this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))};g.serialize=function(){return{members:this.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}},g.prototype.serialize=function(t){return this._trim(),t&&(this.isTransferred=!0,t.push(this.arrayBuffer)),{length:this.length,arrayBuffer:this.arrayBuffer}},g.prototype.get=function(t){return new this.StructType(this,t)},g.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},g.prototype.resize=function(t){if(this.length=t,t>this.capacity){this.capacity=Math.max(t,Math.floor(this.capacity*d),p),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},g.prototype._refreshViews=function(){for(var t=this,e=0,n=this._usedTypes;e<n.length;e+=1){var i=n[e];t[s(i)]=new h[i](t.arrayBuffer)}},g.prototype.toArray=function(t,e){for(var n=this,i=[],r=t;r<e;r++){var o=n.get(r);i.push(o)}return i};var m={}},{}],130:[function(t,e,n){"use strict";function i(t,e){return e.replace(/{([^{}]+)}/g,function(e,n){return n in t?t[n]:""})}e.exports=i},{}],131:[function(t,e,n){"use strict";var i=t("@mapbox/unitbezier"),r=t("../geo/coordinate");t("point-geometry");n.easeCubicInOut=function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},n.bezier=function(t,e,n,r){var o=new i(t,e,n,r);return function(t){return o.solve(t)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},n.wrap=function(t,e,n){var i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r},n.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var i=t.length,r=new Array(t.length),o=null;t.forEach(function(t,s){e(t,function(t,e){t&&(o=t),r[s]=e,0===--i&&n(o,r)})})},n.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},n.keysDifference=function(t,e){var n=[];for(var i in t)i in e||n.push(i);return n},n.extend=function(t,e,n,i){for(var r=arguments,o=1;o<arguments.length;o++){var s=r[o];for(var a in s)t[a]=s[a]}return t},n.pick=function(t,e){for(var n={},i=0;i<e.length;i++){var r=e[i];r in t&&(n[r]=t[r])}return n};var o=1;n.uniqueId=function(){return o++},n.bindAll=function(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})},n.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,i=-(1/0),o=-(1/0),s=0;s<t.length;s++)e=Math.min(e,t[s].column),n=Math.min(n,t[s].row),i=Math.max(i,t[s].column),o=Math.max(o,t[s].row);var a=i-e,u=o-n,l=Math.max(a,u);return new r((e+i)/2,(n+o)/2,0).zoomTo(Math.floor(-Math.log(l)/Math.LN2))},n.endsWith=function(t,e){return t.indexOf(e,t.length-e.length)!==-1},n.mapObject=function(t,e,n){var i=this,r={};for(var o in t)r[o]=e.call(n||i,t[o],o,t);return r},n.filterObject=function(t,e,n){var i=this,r={};for(var o in t)e.call(n||i,t[o],o,t)&&(r[o]=t[o]);return r},n.deepEqual=function(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!n.deepEqual(t[i],e[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;var r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(var o in t)if(!n.deepEqual(t[o],e[o]))return!1;return!0}return t===e},n.clone=function(t){return Array.isArray(t)?t.map(n.clone):"object"==typeof t&&t?n.mapObject(t,n.clone):t},n.arraysIntersect=function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1};var s={};n.warnOnce=function(t){s[t]||("undefined"!=typeof console&&console.warn(t),s[t]=!0)},n.isCounterClockwise=function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)},n.calculateSignedArea=function(t){for(var e,n,i=0,r=0,o=t.length,s=o-1;r<o;s=r++)e=t[r],n=t[s],i+=(n.x-e.x)*(e.y+n.y);return i},n.isClosedPolygon=function(t){if(t.length<4)return!1;var e=t[0],i=t[t.length-1];return!(Math.abs(e.x-i.x)>0||Math.abs(e.y-i.y)>0)&&Math.abs(n.calculateSignedArea(t))>.01},n.sphericalToCartesian=function(t){var e=t[0],n=t[1],i=t[2];return n+=90,n*=Math.PI/180,i*=Math.PI/180,[e*Math.cos(n)*Math.sin(i),e*Math.sin(n)*Math.sin(i),e*Math.cos(i)]},n.parseCacheControl=function(t){var e=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,n={};if(t.replace(e,function(t,e,i,r){var o=i||r;return n[e]=!o||o.toLowerCase(),""}),n["max-age"]){var i=parseInt(n["max-age"],10);isNaN(i)?delete n["max-age"]:n["max-age"]=i}return n}},{"../geo/coordinate":18,"@mapbox/unitbezier":136,"point-geometry":200}],132:[function(t,e,n){"use strict";var i=function(t,e,n,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=i,this.properties=t.properties,null!=t.id&&(this.id=t.id)},r={geometry:{}};r.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},r.geometry.set=function(t){this._geometry=t},i.prototype.toJSON=function(){var t=this,e={geometry:this.geometry};for(var n in this)"_geometry"!==n&&"_vectorTileFeature"!==n&&(e[n]=t[n]);return e},Object.defineProperties(i.prototype,r),e.exports=i},{}],133:[function(t,e,n){"use strict";var i=t("./script_detection");e.exports=function(t){for(var n="",r=0;r<t.length;r++){var o=t.charCodeAt(r+1)||null,s=t.charCodeAt(r-1)||null,a=(!o||!i.charHasRotatedVerticalOrientation(o)||e.exports.lookup[t[r+1]])&&(!s||!i.charHasRotatedVerticalOrientation(s)||e.exports.lookup[t[r-1]]);n+=a&&e.exports.lookup[t[r]]?e.exports.lookup[t[r]]:t[r]}return n},e.exports.lookup={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"}},{"./script_detection":128}],134:[function(t,e,n){"use strict";var i=t("./web_worker"),r=function(){this.active={}};r.prototype.acquire=function(e){var n=this;if(!this.workers){var r=t("../mapbox-gl").workerCount;for(this.workers=[];this.workers.length<r;)n.workers.push(new i)}return this.active[e]=!0,this.workers.slice()},r.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},e.exports=r},{"../mapbox-gl":24,"./web_worker":113}],135:[function(e,n,i){!function(e,r){"object"==typeof i&&"undefined"!=typeof n?n.exports=r():"function"==typeof t&&t.amd?t(r):e.glMatrix=r()}(this,function(){"use strict";function t(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}function e(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}function n(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function i(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t}function r(){var t=new Float32Array(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function o(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u+o*a,t[1]=r*u+s*a,t[2]=i*-a+o*u,t[3]=r*-a+s*u,t}function s(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],u=n[1];return t[0]=i*a,t[1]=r*a,t[2]=o*u,t[3]=s*u,t}function a(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function u(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function l(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function h(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],g=e[13],m=e[14],y=e[15],v=n*a-i*s,_=n*u-r*s,x=n*l-o*s,b=i*u-r*a,E=i*l-o*a,w=r*l-o*u,S=c*g-h*d,I=c*m-f*d,C=c*y-p*d,T=h*m-f*g,N=h*y-p*g,L=f*y-p*m,M=v*L-_*N+x*T+b*C-E*I+w*S;return M?(M=1/M,t[0]=(a*L-u*N+l*T)*M,t[1]=(r*N-i*L-o*T)*M,t[2]=(g*w-m*E+y*b)*M,t[3]=(f*E-h*w-p*b)*M,t[4]=(u*C-s*L-l*I)*M,t[5]=(n*L-r*C+o*I)*M,t[6]=(m*x-d*w-y*_)*M,t[7]=(c*w-f*x+p*_)*M,t[8]=(s*N-a*C+l*S)*M,t[9]=(i*C-n*N-o*S)*M,t[10]=(d*E-g*x+y*v)*M,t[11]=(h*x-c*E-p*v)*M,t[12]=(a*I-s*T-u*S)*M,t[13]=(n*T-i*I+r*S)*M,t[14]=(g*_-d*b-m*v)*M,t[15]=(c*b-h*_+f*v)*M,t):null}function f(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],g=e[12],m=e[13],y=e[14],v=e[15],_=n[0],x=n[1],b=n[2],E=n[3];return t[0]=_*i+x*a+b*h+E*g,t[1]=_*r+x*u+b*f+E*m,t[2]=_*o+x*l+b*p+E*y,t[3]=_*s+x*c+b*d+E*v,_=n[4],x=n[5],b=n[6],E=n[7],t[4]=_*i+x*a+b*h+E*g,t[5]=_*r+x*u+b*f+E*m,t[6]=_*o+x*l+b*p+E*y,t[7]=_*s+x*c+b*d+E*v,_=n[8],x=n[9],b=n[10],E=n[11],t[8]=_*i+x*a+b*h+E*g,t[9]=_*r+x*u+b*f+E*m,t[10]=_*o+x*l+b*p+E*y,t[11]=_*s+x*c+b*d+E*v,_=n[12],x=n[13],b=n[14],E=n[15],t[12]=_*i+x*a+b*h+E*g,t[13]=_*r+x*u+b*f+E*m,t[14]=_*o+x*l+b*p+E*y,t[15]=_*s+x*c+b*d+E*v,t}function p(t,e,n){var i,r,o,s,a,u,l,c,h,f,p,d,g=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*y+e[12],t[13]=e[1]*g+e[5]*m+e[9]*y+e[13],t[14]=e[2]*g+e[6]*m+e[10]*y+e[14],t[15]=e[3]*g+e[7]*m+e[11]*y+e[15]):(i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=f,t[10]=p,t[11]=d,t[12]=i*g+a*m+h*y+e[12],t[13]=r*g+u*m+f*y+e[13],t[14]=o*g+l*m+p*y+e[14],t[15]=s*g+c*m+d*y+e[15]),t}function d(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function g(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=s*r+c*i,t[6]=a*r+h*i,t[7]=u*r+f*i,t[8]=l*r-o*i,t[9]=c*r-s*i,t[10]=h*r-a*i,t[11]=f*r-u*i,t}function m(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],l=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=s*r+c*i,t[2]=a*r+h*i,t[3]=u*r+f*i,t[4]=l*r-o*i,t[5]=c*r-s*i,t[6]=h*r-a*i,t[7]=f*r-u*i,t}function y(t,e,n,i,r){var o=1/Math.tan(e/2),s=1/(i-r);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*s,t[15]=0,t}function v(t,e,n,i,r,o,s){var a=1/(e-n),u=1/(i-r),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*u,t[14]=(s+o)*l,t[15]=1,t}var _=(t(),n(),{vec3:{transformMat3:e},vec4:{transformMat4:i},mat2:{create:r,rotate:o,scale:s},mat3:{create:a,fromRotation:u},mat4:{create:l,identity:c,translate:p,scale:d,multiply:f,perspective:y,rotateX:g,rotateZ:m,invert:h,ortho:v}});return _})},{}],136:[function(t,e,n){function i(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}e.exports=i,i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){"undefined"==typeof e&&(e=1e-6);var n,i,r,o,s;for(r=t,s=0;s<8;s++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r-=o/a}if(n=0,i=1,r=t,r<n)return n;if(r>i)return i;for(;n<i;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?n=r:i=r,r=.5*(i-n)+n}return r},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},{}],137:[function(t,e,n){(function(t){function e(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};n.resolve=function(){for(var n="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,r="/"===s.charAt(0))}return n=e(i(n.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+n||"."},n.normalize=function(t){var r=n.isAbsolute(t),o="/"===s(t,-1);return t=e(i(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var r=i(t.split("/")),o=i(e.split("/")),s=Math.min(r.length,o.length),a=s,u=0;u<s;u++)if(r[u]!==o[u]){a=u;break}for(var l=[],u=a;u<r.length;u++)l.push("..");return l=l.concat(o.slice(a)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:138}],138:[function(t,e,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function s(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{
return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){m&&d&&(m=!1,d.length?g=d.concat(g):y=-1,g.length&&u())}function u(){if(!m){var t=o(a);m=!0;for(var e=g.length;e;){for(d=g,g=[];++y<e;)d&&d[y].run();y=-1,e=g.length}d=null,m=!1,s(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var h,f,p=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(t){h=i}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var d,g=[],m=!1,y=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];g.push(new l(t,e)),1!==g.length||m||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],139:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],140:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],141:[function(t,e,n){(function(e,i){function r(t,e){var i={seen:[],stylize:s};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(e)?i.showHidden=e:e&&n._extend(i,e),b(i.showHidden)&&(i.showHidden=!1),b(i.depth)&&(i.depth=2),b(i.colors)&&(i.colors=!1),b(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),u(i,t,i.depth)}function o(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,e,i){if(t.customInspect&&e&&C(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(i,t);return _(r)||(r=u(t,r,i)),r}var o=l(t,e);if(o)return o;var s=Object.keys(e),g=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),I(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(e);if(0===s.length){if(C(e)){var m=e.name?": "+e.name:"";return t.stylize("[Function"+m+"]","special")}if(E(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(S(e))return t.stylize(Date.prototype.toString.call(e),"date");if(I(e))return c(e)}var y="",v=!1,x=["{","}"];if(d(e)&&(v=!0,x=["[","]"]),C(e)){var b=e.name?": "+e.name:"";y=" [Function"+b+"]"}if(E(e)&&(y=" "+RegExp.prototype.toString.call(e)),S(e)&&(y=" "+Date.prototype.toUTCString.call(e)),I(e)&&(y=" "+c(e)),0===s.length&&(!v||0==e.length))return x[0]+y+x[1];if(i<0)return E(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var w;return w=v?h(t,e,i,g,s):s.map(function(n){return f(t,e,i,g,n,v)}),t.seen.pop(),p(w,y,x)}function l(t,e){if(b(e))return t.stylize("undefined","undefined");if(_(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return v(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,i,r){for(var o=[],s=0,a=e.length;s<a;++s)P(e,String(s))?o.push(f(t,e,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(t,e,n,i,r,!0))}),o}function f(t,e,n,i,r,o){var s,a,l;if(l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},l.get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),P(i,r)||(s="["+r+"]"),a||(t.seen.indexOf(l.value)<0?(a=m(n)?u(t,l.value,null):u(t,l.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),b(s)){if(o&&r.match(/^\d+$/))return a;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,n){var i=0,r=t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function m(t){return null===t}function y(t){return null==t}function v(t){return"number"==typeof t}function _(t){return"string"==typeof t}function x(t){return"symbol"==typeof t}function b(t){return void 0===t}function E(t){return w(t)&&"[object RegExp]"===N(t)}function w(t){return"object"==typeof t&&null!==t}function S(t){return w(t)&&"[object Date]"===N(t)}function I(t){return w(t)&&("[object Error]"===N(t)||t instanceof Error)}function C(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function N(t){return Object.prototype.toString.call(t)}function L(t){return t<10?"0"+t.toString(10):t.toString(10)}function M(){var t=new Date,e=[L(t.getHours()),L(t.getMinutes()),L(t.getSeconds())].join(":");return[t.getDate(),F[t.getMonth()],e].join(" ")}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var A=/%[sdj%]/g;n.format=function(t){if(!_(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,s=String(t).replace(A,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),a=i[n];n<o;a=i[++n])s+=m(a)||!w(a)?" "+a:" "+r(a);return s},n.deprecate=function(t,r){function o(){if(!s){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),s=!0}return t.apply(this,arguments)}if(b(i.process))return function(){return n.deprecate(t,r).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return o};var R,O={};n.debuglog=function(t){if(b(R)&&(R=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!O[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var i=e.pid;O[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,i,e)}}else O[t]=function(){};return O[t]},n.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=g,n.isNull=m,n.isNullOrUndefined=y,n.isNumber=v,n.isString=_,n.isSymbol=x,n.isUndefined=b,n.isRegExp=E,n.isObject=w,n.isDate=S,n.isError=I,n.isFunction=C,n.isPrimitive=T,n.isBuffer=t("./support/isBuffer");var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",M(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":140,_process:138,inherits:139}],142:[function(t,e,n){function i(t){return t=Math.round(t),t<0?0:t>255?255:t}function r(t){return t<0?0:t>1?1:t}function o(t){return i("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function s(t){return r("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function u(t){var e=t.replace(/ /g,"").toLowerCase();if(e in l)return l[e].slice();if("#"===e[0]){if(4===e.length){var n=parseInt(e.substr(1),16);return n>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null}if(7===e.length){var n=parseInt(e.substr(1),16);return n>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null}return null}var r=e.indexOf("("),u=e.indexOf(")");if(r!==-1&&u+1===e.length){var c=e.substr(0,r),h=e.substr(r+1,u-(r+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=s(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),f];case"hsla":if(4!==h.length)return null;f=s(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,d=s(h[1]),g=s(h[2]),m=g<=.5?g*(d+1):g+d-g*d,y=2*g-m;return[i(255*a(y,m,p+1/3)),i(255*a(y,m,p)),i(255*a(y,m,p-1/3)),f];default:return null}}return null}var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=u}catch(t){}},{}],143:[function(t,e,n){"use strict";function i(t,e,n){n=n||2;var i=e&&e.length,o=i?e[0]*n:t.length,a=r(t,0,o,n,!0),u=[];if(!a)return u;var l,c,f,p,d,g,m;if(i&&(a=h(t,e,a,n)),t.length>80*n){l=f=t[0],c=p=t[1];for(var y=n;y<o;y+=n)d=t[y],g=t[y+1],d<l&&(l=d),g<c&&(c=g),d>f&&(f=d),g>p&&(p=g);m=Math.max(f-l,p-c)}return s(a,u,n,l,c,m),u}function r(t,e,n,i,r){var o,s;if(r===P(t,e,n,i)>0)for(o=e;o<n;o+=i)s=N(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=N(o,t[o],t[o+1],s);return s&&E(s,s.next)&&(L(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var n,i=t;do if(n=!1,i.steiner||!E(i,i.next)&&0!==b(i.prev,i,i.next))i=i.next;else{if(L(i),i=e=i.prev,i===i.next)return null;n=!0}while(n||i!==e);return e}function s(t,e,n,i,r,h,f){if(t){!f&&h&&g(t,i,r,h);for(var p,d,m=t;t.prev!==t.next;)if(p=t.prev,d=t.next,h?u(t,i,r,h):a(t))e.push(p.i/n),e.push(t.i/n),e.push(d.i/n),L(t),t=d.next,m=d.next;else if(t=d,t===m){f?1===f?(t=l(t,e,n),s(t,e,n,i,r,h,2)):2===f&&c(t,e,n,i,r,h):s(o(t),e,n,i,r,h,1);break}}}function a(t){var e=t.prev,n=t,i=t.next;if(b(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(_(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&b(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function u(t,e,n,i){var r=t.prev,o=t,s=t.next;if(b(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,u=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,l=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,c=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,h=y(a,u,e,n,i),f=y(l,c,e,n,i),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&_(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&_(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function l(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!E(r,o)&&w(r,i,i.next,o)&&I(r,o)&&I(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),L(i),L(i.next),i=t=o),i=i.next}while(i!==t);return i}function c(t,e,n,i,r,a){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&x(u,l)){var c=T(u,l);return u=o(u,u.next),c=o(c,c.next),s(u,e,n,i,r,a),void s(c,e,n,i,r,a)}l=l.next}u=u.next}while(u!==t)}function h(t,e,n,i){var s,a,u,l,c,h=[];for(s=0,a=e.length;s<a;s++)u=e[s]*i,l=s<a-1?e[s+1]*i:t.length,c=r(t,u,l,i,!1),c===c.next&&(c.steiner=!0),h.push(v(c));for(h.sort(f),s=0;s<h.length;s++)p(h[s],n),n=o(n,n.next);return n}function f(t,e){return t.x-e.x}function p(t,e){if(e=d(t,e)){var n=T(e,t);o(n,n.next)}}function d(t,e){var n,i=e,r=t.x,o=t.y,s=-(1/0);do{if(o<=i.y&&o>=i.next.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;for(i=n.next;i!==l;)r>=i.x&&i.x>=c&&_(o<h?r:s,o,c,h,o<h?s:r,o,i.x,i.y)&&(u=Math.abs(o-i.y)/(r-i.x),(u<f||u===f&&i.x>n.x)&&I(i,t)&&(n=i,f=u)),i=i.next;return n}function g(t,e,n,i){var r=t;do null===r.z&&(r.z=y(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,m(r)}function m(t){var e,n,i,r,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<l&&(a++,i=i.nextZ);e++);for(u=l;a>0||u>0&&i;)0===a?(r=i,i=i.nextZ,u--):0!==u&&i?n.z<=i.z?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,u--):(r=n,n=n.nextZ,a--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(s>1);return t}function y(t,e,n,i,r){return t=32767*(t-n)/r,e=32767*(e-i)/r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function v(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}function _(t,e,n,i,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!S(t,e)&&I(t,e)&&I(e,t)&&C(t,e)}function b(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function E(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,n,i){return!!(E(t,e)&&E(n,i)||E(t,i)&&E(n,e))||b(t,e,n)>0!=b(t,e,i)>0&&b(n,i,t)>0!=b(n,i,e)>0}function S(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&w(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function I(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function C(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function T(t,e){var n=new M(t.i,t.x,t.y),i=new M(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function N(t,e,n,i){var r=new M(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function L(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function M(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}e.exports=i,i.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(P(t,0,o,n));if(r)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,c=a<u-1?e[a+1]*n:t.length;s-=Math.abs(P(t,l,c,n))}var h=0;for(a=0;a<i.length;a+=3){var f=i[a]*n,p=i[a+1]*n,d=i[a+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},{}],144:[function(t,e,n){function i(t){var e,n,r,l,c,h;switch(typeof t){case"object":if(null===t)return null;if(o(t)){for(r="[",n=t.length-1,e=0;e<n;e++)r+=i(t[e])+",";return n>-1&&(r+=i(t[e])),r+"]"}for(l=s(t).sort(),n=l.length,r="{",c=l[e=0],h=n>0&&void 0!==t[c];e<n;)h?(r+='"'+c.replace(a,u)+'":'+i(t[c]),c=l[++e],h=e<n&&void 0!==t[c],h&&(r+=",")):(c=l[++e],h=e<n&&void 0!==t[c]);return r+"}";case"undefined":return null;case"string":return'"'+t.replace(a,u)+'"';default:return t}}var r={}.toString,o=Array.isArray||function(t){return"[object Array]"===r.call(t)},s=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},a=/[\u0000-\u001f"\\]/g,u=function(t){var e=t.charCodeAt(0);switch(e){case 34:return'\\"';case 92:return"\\\\";case 12:return"\\f";case 10:return"\\n";case 13:return"\\r";case 9:return"\\t";case 8:return"\\b";default:return e>15?"\\u00"+e.toString(16):"\\u000"+e.toString(16)}};e.exports=function(t){if(void 0!==t)return""+i(t)},e.exports.stringSearch=a,e.exports.stringReplace=u},{}],145:[function(t,e,n){"use strict";function i(t){return new Function("f","var p = (f && f.properties || {}); return "+r(t))}function r(t){if(!t)return"true";var e=t[0];if(t.length<=1)return"any"===e?"false":"true";var n="=="===e?s(t[1],t[2],"===",!1):"!="===e?s(t[1],t[2],"!==",!1):"<"===e||">"===e||"<="===e||">="===e?s(t[1],t[2],e,!0):"any"===e?a(t.slice(1),"||"):"all"===e?a(t.slice(1),"&&"):"none"===e?c(a(t.slice(1),"||")):"in"===e?u(t[1],t.slice(2)):"!in"===e?c(u(t[1],t.slice(2))):"has"===e?l(t[1]):"!has"===e?c(l([t[1]])):"true";return"("+n+")"}function o(t){return"$type"===t?"f.type":"$id"===t?"f.id":"p["+JSON.stringify(t)+"]"}function s(t,e,n,i){var r=o(t),s="$type"===t?f.indexOf(e):JSON.stringify(e);return(i?"typeof "+r+"=== typeof "+s+"&&":"")+r+n+s}function a(t,e){return t.map(r).join(e)}function u(t,e){"$type"===t&&(e=e.map(function(t){return f.indexOf(t)}));var n=JSON.stringify(e.sort(h)),i=o(t);return e.length<=200?n+".indexOf("+i+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+i+", "+n+",0,"+(e.length-1)+")"}function l(t){return JSON.stringify(t)+" in p"}function c(t){return"!("+t+")"}function h(t,e){return t<e?-1:t>e?1:0}e.exports=i;var f=["Unknown","Point","LineString","Polygon"]},{}],146:[function(t,e,n){function i(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(r(i,e)),t;case"Feature":return t.geometry=i(t.geometry,e),t;case"Polygon":case"MultiPolygon":return o(t,e);default:return t}}function r(t,e){return function(n){return t(n,e)}}function o(t,e){return"Polygon"===t.type?t.coordinates=s(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(r(s,e))),t}function s(t,e){e=!!e,t[0]=a(t[0],!e);for(var n=1;n<t.length;n++)t[n]=a(t[n],e);return t}function a(t,e){return u(t)===e?t:t.reverse()}function u(t){return l.ring(t)>=0}var l=t("geojson-area");e.exports=i},{"geojson-area":147}],147:[function(t,e,n){function i(t){if("Polygon"===t.type)return r(t.coordinates);if("MultiPolygon"===t.type){for(var e=0,n=0;n<t.coordinates.length;n++)e+=r(t.coordinates[n]);return e}return null}function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(o(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(o(t[n]))}return e}function o(t){var e=0;if(t.length>2){for(var n,i,r=0;r<t.length-1;r++)n=t[r],i=t[r+1],e+=s(i[0]-n[0])*(2+Math.sin(s(n[1]))+Math.sin(s(i[1])));e=e*a.RADIUS*a.RADIUS/2}return e}function s(t){return t*Math.PI/180}var a=t("wgs84");e.exports.geometry=i,e.exports.ring=o},{wgs84:148}],148:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],149:[function(t,e,n){"use strict";function i(t,e,n,i,s,u,l,c){if(n/=e,i/=e,l>=n&&c<=i)return t;if(l>i||c<n)return null;for(var h=[],f=0;f<t.length;f++){var p,d,g=t[f],m=g.geometry,y=g.type;if(p=g.min[s],d=g.max[s],p>=n&&d<=i)h.push(g);else if(!(p>i||d<n)){var v=1===y?r(m,n,i,s):o(m,n,i,s,u,3===y);v.length&&h.push(a(g.tags,y,v,g.id))}}return h.length?h:null}function r(t,e,n,i){for(var r=[],o=0;o<t.length;o++){var s=t[o],a=s[i];a>=e&&a<=n&&r.push(s)}return r}function o(t,e,n,i,r,o){for(var a=[],u=0;u<t.length;u++){var l,c,h,f=0,p=0,d=null,g=t[u],m=g.area,y=g.dist,v=g.outer,_=g.length,x=[];for(c=0;c<_-1;c++)l=d||g[c],d=g[c+1],f=p||l[i],p=d[i],f<e?p>n?(x.push(r(l,d,e),r(l,d,n)),o||(x=s(a,x,m,y,v))):p>=e&&x.push(r(l,d,e)):f>n?p<e?(x.push(r(l,d,n),r(l,d,e)),o||(x=s(a,x,m,y,v))):p<=n&&x.push(r(l,d,n)):(x.push(l),p<e?(x.push(r(l,d,e)),o||(x=s(a,x,m,y,v))):p>n&&(x.push(r(l,d,n)),o||(x=s(a,x,m,y,v))));l=g[_-1],f=l[i],f>=e&&f<=n&&x.push(l),h=x[x.length-1],o&&h&&(x[0][0]!==h[0]||x[0][1]!==h[1])&&x.push(x[0]),s(a,x,m,y,v)}return a}function s(t,e,n,i,r){return e.length&&(e.area=n,e.dist=i,void 0!==r&&(e.outer=r),t.push(e)),[]}e.exports=i;var a=t("./feature")},{"./feature":151}],150:[function(t,e,n){"use strict";function i(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)r(n,t.features[i],e);else"Feature"===t.type?r(n,t,e):r(n,{geometry:t},e);return n}function r(t,e,n){if(null!==e.geometry){var i,a,u,c,h=e.geometry,f=h.type,p=h.coordinates,d=e.properties,g=e.id;if("Point"===f)t.push(l(d,1,[s(p)],g));else if("MultiPoint"===f)t.push(l(d,1,o(p),g));else if("LineString"===f)t.push(l(d,2,[o(p,n)],g));else if("MultiLineString"===f||"Polygon"===f){for(u=[],i=0;i<p.length;i++)c=o(p[i],n),"Polygon"===f&&(c.outer=0===i),u.push(c);t.push(l(d,"Polygon"===f?3:2,u,g))}else if("MultiPolygon"===f){for(u=[],i=0;i<p.length;i++)for(a=0;a<p[i].length;a++)c=o(p[i][a],n),c.outer=0===a,u.push(c);t.push(l(d,3,u,g))}else{if("GeometryCollection"!==f)throw new Error("Input data is not a valid GeoJSON object.");for(i=0;i<h.geometries.length;i++)r(t,{geometry:h.geometries[i],properties:d},n)}}}function o(t,e){for(var n=[],i=0;i<t.length;i++)n.push(s(t[i]));return e&&(u(n,e),a(n)),n}function s(t){var e=Math.sin(t[1]*Math.PI/180),n=t[0]/360+.5,i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i=i<0?0:i>1?1:i,[n,i,0]}function a(t){for(var e,n,i=0,r=0,o=0;o<t.length-1;o++)e=n||t[o],n=t[o+1],i+=e[0]*n[1]-n[0]*e[1],r+=Math.abs(n[0]-e[0])+Math.abs(n[1]-e[1]);t.area=Math.abs(i/2),t.dist=r}e.exports=i;var u=t("./simplify"),l=t("./feature")},{"./feature":151,"./simplify":153}],151:[function(t,e,n){"use strict";function i(t,e,n,i){var o={id:i||null,type:e,geometry:n,tags:t||null,min:[1/0,1/0],max:[-(1/0),-(1/0)]};return r(o),o}function r(t){var e=t.geometry,n=t.min,i=t.max;if(1===t.type)o(n,i,e);else for(var r=0;r<e.length;r++)o(n,i,e[r]);return t}function o(t,e,n){for(var i,r=0;r<n.length;r++)i=n[r],t[0]=Math.min(i[0],t[0]),e[0]=Math.max(i[0],e[0]),t[1]=Math.min(i[1],t[1]),e[1]=Math.max(i[1],e[1])}e.exports=i},{}],152:[function(t,e,n){"use strict";function i(t,e){return new r(t,e)}function r(t,e){e=this.options=u(Object.create(this.options),e);var n=e.debug;n&&console.time("preprocess data");var i=1<<e.maxZoom,r=c(t,e.tolerance/(i*e.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=p(r,e.buffer/e.extent,s),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function o(t,e,n){return 32*((1<<t)*n+e)+t}function s(t,e,n){return[n,(n-t[0])*(e[1]-t[1])/(e[0]-t[0])+t[1],1]}function a(t,e,n){return[(n-t[1])*(e[0]-t[0])/(e[1]-t[1])+t[0],n,1]}function u(t,e){for(var n in e)t[n]=e[n];return t}function l(t,e,n){var i=t.source;if(1!==i.length)return!1;var r=i[0];if(3!==r.type||r.geometry.length>1)return!1;var o=r.geometry[0].length;if(5!==o)return!1;for(var s=0;s<o;s++){var a=h.point(r.geometry[0][s],e,t.z2,t.x,t.y);if(a[0]!==-n&&a[0]!==e+n||a[1]!==-n&&a[1]!==e+n)return!1}return!0}e.exports=i;var c=t("./convert"),h=t("./transform"),f=t("./clip"),p=t("./wrap"),d=t("./tile");r.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},r.prototype.splitTile=function(t,e,n,i,r,u,c){for(var h=[t,e,n,i],p=this.options,g=p.debug,m=null;h.length;){i=h.pop(),n=h.pop(),e=h.pop(),t=h.pop();var y=1<<e,v=o(e,n,i),_=this.tiles[v],x=e===p.maxZoom?0:p.tolerance/(y*p.extent);if(!_&&(g>1&&console.time("creation"),_=this.tiles[v]=d(t,y,n,i,x,e===p.maxZoom),this.tileCoords.push({z:e,x:n,y:i}),g)){g>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,_.numFeatures,_.numPoints,_.numSimplified),console.timeEnd("creation"));var b="z"+e;this.stats[b]=(this.stats[b]||0)+1,this.total++}if(_.source=t,r){if(e===p.maxZoom||e===r)continue;var E=1<<r-e;if(n!==Math.floor(u/E)||i!==Math.floor(c/E))continue}else if(e===p.indexMaxZoom||_.numPoints<=p.indexMaxPoints)continue;if(p.solidChildren||!l(_,p.extent,p.buffer)){_.source=null,g>1&&console.time("clipping");var w,S,I,C,T,N,L=.5*p.buffer/p.extent,M=.5-L,P=.5+L,A=1+L;w=S=I=C=null,T=f(t,y,n-L,n+P,0,s,_.min[0],_.max[0]),N=f(t,y,n+M,n+A,0,s,_.min[0],_.max[0]),T&&(w=f(T,y,i-L,i+P,1,a,_.min[1],_.max[1]),S=f(T,y,i+M,i+A,1,a,_.min[1],_.max[1])),N&&(I=f(N,y,i-L,i+P,1,a,_.min[1],_.max[1]),C=f(N,y,i+M,i+A,1,a,_.min[1],_.max[1])),g>1&&console.timeEnd("clipping"),t.length&&(h.push(w||[],e+1,2*n,2*i),h.push(S||[],e+1,2*n,2*i+1),h.push(I||[],e+1,2*n+1,2*i),h.push(C||[],e+1,2*n+1,2*i+1))}else r&&(m=e)}return m},r.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,s=i.debug,a=1<<t;e=(e%a+a)%a;var u=o(t,e,n);if(this.tiles[u])return h.tile(this.tiles[u],r);s>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var c,f=t,p=e,d=n;!c&&f>0;)f--,p=Math.floor(p/2),d=Math.floor(d/2),c=this.tiles[o(f,p,d)];if(!c||!c.source)return null;if(s>1&&console.log("found parent tile z%d-%d-%d",f,p,d),l(c,r,i.buffer))return h.tile(c,r);s>1&&console.time("drilling down");var g=this.splitTile(c.source,f,p,d,t,e,n);if(s>1&&console.timeEnd("drilling down"),null!==g){var m=1<<t-g;u=o(g,Math.floor(e/m),Math.floor(n/m))}return this.tiles[u]?h.tile(this.tiles[u],r):null}},{"./clip":149,"./convert":150,"./tile":154,"./transform":155,"./wrap":156}],153:[function(t,e,n){"use strict";function i(t,e){var n,i,o,s,a=e*e,u=t.length,l=0,c=u-1,h=[];for(t[l][2]=1,t[c][2]=1;c;){for(i=0,n=l+1;n<c;n++)o=r(t[n],t[l],t[c]),o>i&&(s=n,i=o);i>a?(t[s][2]=i,h.push(l),h.push(s),l=s):(c=h.pop(),l=h.pop())}}function r(t,e,n){var i=e[0],r=e[1],o=n[0],s=n[1],a=t[0],u=t[1],l=o-i,c=s-r;if(0!==l||0!==c){var h=((a-i)*l+(u-r)*c)/(l*l+c*c);h>1?(i=o,r=s):h>0&&(i+=l*h,r+=c*h)}return l=a-i,c=u-r,l*l+c*c}e.exports=i},{}],154:[function(t,e,n){"use strict";function i(t,e,n,i,o,s){for(var a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z2:e,transformed:!1,min:[2,1],max:[-1,0]},u=0;u<t.length;u++){a.numFeatures++,r(a,t[u],o,s);var l=t[u].min,c=t[u].max;l[0]<a.min[0]&&(a.min[0]=l[0]),l[1]<a.min[1]&&(a.min[1]=l[1]),c[0]>a.max[0]&&(a.max[0]=c[0]),c[1]>a.max[1]&&(a.max[1]=c[1])}return a}function r(t,e,n,i){var r,s,a,u,l=e.geometry,c=e.type,h=[],f=n*n;if(1===c)for(r=0;r<l.length;r++)h.push(l[r]),t.numPoints++,t.numSimplified++;else for(r=0;r<l.length;r++)if(a=l[r],i||!(2===c&&a.dist<n||3===c&&a.area<f)){var p=[];for(s=0;s<a.length;s++)u=a[s],(i||u[2]>f)&&(p.push(u),t.numSimplified++),t.numPoints++;3===c&&o(p,a.outer),h.push(p)}else t.numPoints+=a.length;if(h.length){var d={geometry:h,type:c,tags:e.tags||null};null!==e.id&&(d.id=e.id),t.features.push(d)}}function o(t,e){var n=s(t);n<0===e&&t.reverse()}function s(t){for(var e,n,i=0,r=0,o=t.length,s=o-1;r<o;s=r++)e=t[r],n=t[s],i+=(n[0]-e[0])*(e[1]+n[1]);return i}e.exports=i},{}],155:[function(t,e,n){"use strict";function i(t,e){if(t.transformed)return t;var n,i,o,s=t.z2,a=t.x,u=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry,h=l.type;if(1===h)for(i=0;i<c.length;i++)c[i]=r(c[i],e,s,a,u);else for(i=0;i<c.length;i++){var f=c[i];for(o=0;o<f.length;o++)f[o]=r(f[o],e,s,a,u)}}return t.transformed=!0,t}function r(t,e,n,i,r){var o=Math.round(e*(t[0]*n-i)),s=Math.round(e*(t[1]*n-r));return[o,s]}n.tile=i,n.point=r},{}],156:[function(t,e,n){"use strict";function i(t,e,n){var i=t,o=s(t,1,-1-e,e,0,n,-1,2),a=s(t,1,1-e,2+e,0,n,-1,2);return(o||a)&&(i=s(t,1,-e,1+e,0,n,-1,2)||[],o&&(i=r(o,1).concat(i)),a&&(i=i.concat(r(a,-1)))),i}function r(t,e){for(var n=[],i=0;i<t.length;i++){var r,s=t[i],u=s.type;if(1===u)r=o(s.geometry,e);else{r=[];for(var l=0;l<s.geometry.length;l++)r.push(o(s.geometry[l],e))}n.push(a(s.tags,u,r,s.id))}return n}function o(t,e){var n=[];n.area=t.area,n.dist=t.dist;for(var i=0;i<t.length;i++)n.push([t[i][0]+e,t[i][1],t[i][2]]);return n}var s=t("./clip"),a=t("./feature");e.exports=i},{"./clip":149,"./feature":151}],157:[function(t,e,n){"use strict";function i(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var o=new Int32Array(this.arrayBuffer);t=o[0],e=o[1],n=o[2],this.d=e+2*n;for(var s=0;s<this.d*this.d;s++){var a=o[r+s],u=o[r+s+1];i.push(a===u?null:o.subarray(a,u))}var l=o[r+i.length],c=o[r+i.length+1];this.keys=o.subarray(l,c),this.bboxes=o.subarray(c),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var h=0;h<this.d*this.d;h++)i.push([]);
this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var f=n/e*t;this.min=-f,this.max=t+f}e.exports=i;var r=3;i.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},i.prototype._insertCell=function(t,e,n,i,r,o){this.cells[r].push(o)},i.prototype.query=function(t,e,n,i){var r=this.min,o=this.max;if(t<=r&&e<=r&&o<=n&&o<=i)return Array.prototype.slice.call(this.keys);var s=[],a={};return this._forEachCell(t,e,n,i,this._queryCell,s,a),s},i.prototype._queryCell=function(t,e,n,i,r,o,s){var a=this.cells[r];if(null!==a)for(var u=this.keys,l=this.bboxes,c=0;c<a.length;c++){var h=a[c];if(void 0===s[h]){var f=4*h;t<=l[f+2]&&e<=l[f+3]&&n>=l[f+0]&&i>=l[f+1]?(s[h]=!0,o.push(u[h])):s[h]=!1}}},i.prototype._forEachCell=function(t,e,n,i,r,o,s){for(var a=this._convertToCellCoord(t),u=this._convertToCellCoord(e),l=this._convertToCellCoord(n),c=this._convertToCellCoord(i),h=a;h<=l;h++)for(var f=u;f<=c;f++){var p=this.d*f+h;if(r.call(this,t,e,n,i,p,o,s))return}},i.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=r+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var o=new Int32Array(e+n+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var s=e,a=0;a<t.length;a++){var u=t[a];o[r+a]=s,o.set(u,s),s+=u.length}return o[r+t.length]=s,o.set(this.keys,s),s+=this.keys.length,o[r+t.length+1]=s,o.set(this.bboxes,s),s+=this.bboxes.length,o.buffer}},{}],158:[function(t,e,n){function i(t){return!!t&&"object"==typeof t}function r(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function o(t,e,n,r,a,u){return t===e||(null==t||null==e||!c(t)&&!i(e)?t!==t&&e!==e:s(t,e,o,n,r,a,u))}function s(t,e,n,i,r,o,s){var c=h(t),p=h(e),m=g,y=g;c||(m=I.call(t),m==d?m=x:m!=x&&(c=f(t))),p||(y=I.call(e),y==d?y=x:y!=x&&(p=f(e)));var v=m==x,_=y==x,b=m==y;if(b&&!c&&!v)return u(t,e,m);if(!r){var E=v&&S.call(t,"__wrapped__"),w=_&&S.call(e,"__wrapped__");if(E||w)return n(E?t.value():t,w?e.value():e,i,r,o,s)}if(!b)return!1;o||(o=[]),s||(s=[]);for(var C=o.length;C--;)if(o[C]==t)return s[C]==e;o.push(t),s.push(e);var T=(c?a:l)(t,e,n,i,r,o,s);return o.pop(),s.pop(),T}function a(t,e,n,i,o,s,a){var u=-1,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;for(;++u<l;){var h=t[u],f=e[u],p=i?i(o?f:h,o?h:f,u):void 0;if(void 0!==p){if(p)continue;return!1}if(o){if(!r(e,function(t){return h===t||n(h,t,i,o,s,a)}))return!1}else if(h!==f&&!n(h,f,i,o,s,a))return!1}return!0}function u(t,e,n){switch(n){case m:case y:return+t==+e;case v:return t.name==e.name&&t.message==e.message;case _:return t!=+t?e!=+e:t==+e;case b:case E:return t==e+""}return!1}function l(t,e,n,i,r,o,s){var a=p(t),u=a.length,l=p(e),c=l.length;if(u!=c&&!r)return!1;for(var h=u;h--;){var f=a[h];if(!(r?f in e:S.call(e,f)))return!1}for(var d=r;++h<u;){f=a[h];var g=t[f],m=e[f],y=i?i(r?m:g,r?g:m,f):void 0;if(!(void 0===y?n(g,m,i,r,o,s):y))return!1;d||(d="constructor"==f)}if(!d){var v=t.constructor,_=e.constructor;if(v!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _))return!1}return!0}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var h=t("lodash.isarray"),f=t("lodash.istypedarray"),p=t("lodash.keys"),d="[object Arguments]",g="[object Array]",m="[object Boolean]",y="[object Date]",v="[object Error]",_="[object Number]",x="[object Object]",b="[object RegExp]",E="[object String]",w=Object.prototype,S=w.hasOwnProperty,I=w.toString;e.exports=o},{"lodash.isarray":162,"lodash.istypedarray":164,"lodash.keys":165}],159:[function(t,e,n){function i(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)};case 5:return function(n,i,r,o,s){return t.call(e,n,i,r,o,s)}}return function(){return t.apply(e,arguments)}}function r(t){return t}e.exports=i},{}],160:[function(t,e,n){function i(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return a(n)?n:void 0}function o(t){return s(t)&&p.call(t)==u}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null!=t&&(o(t)?d.test(h.call(t)):i(t)&&l.test(t))}var u="[object Function]",l=/^\[object .+?Constructor\]$/,c=Object.prototype,h=Function.prototype.toString,f=c.hasOwnProperty,p=c.toString,d=RegExp("^"+h.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},{}],161:[function(t,e,n){function i(t){return o(t)&&g.call(t,"callee")&&(!y.call(t,"callee")||m.call(t)==h)}function r(t){return null!=t&&a(t.length)&&!s(t)}function o(t){return l(t)&&r(t)}function s(t){var e=u(t)?m.call(t):"";return e==f||e==p}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){return!!t&&"object"==typeof t}var c=9007199254740991,h="[object Arguments]",f="[object Function]",p="[object GeneratorFunction]",d=Object.prototype,g=d.hasOwnProperty,m=d.toString,y=d.propertyIsEnumerable;e.exports=i},{}],162:[function(t,e,n){function i(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return u(n)?n:void 0}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=v}function s(t){return a(t)&&g.call(t)==c}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return null!=t&&(s(t)?m.test(p.call(t)):i(t)&&h.test(t))}var l="[object Array]",c="[object Function]",h=/^\[object .+?Constructor\]$/,f=Object.prototype,p=Function.prototype.toString,d=f.hasOwnProperty,g=f.toString,m=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=r(Array,"isArray"),v=9007199254740991,_=y||function(t){return i(t)&&o(t.length)&&g.call(t)==l};e.exports=_},{}],163:[function(t,e,n){function i(t,e,n,i){n="function"==typeof n?o(n,i,3):void 0;var s=n?n(t,e):void 0;return void 0===s?r(t,e,n):!!s}var r=t("lodash._baseisequal"),o=t("lodash._bindcallback");e.exports=i},{"lodash._baseisequal":158,"lodash._bindcallback":159}],164:[function(t,e,n){function i(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}function r(t){return!!t&&"object"==typeof t}function o(t){return r(t)&&i(t.length)&&!!P[R.call(t)]}var s=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object Boolean]",c="[object Date]",h="[object Error]",f="[object Function]",p="[object Map]",d="[object Number]",g="[object Object]",m="[object RegExp]",y="[object Set]",v="[object String]",_="[object WeakMap]",x="[object ArrayBuffer]",b="[object DataView]",E="[object Float32Array]",w="[object Float64Array]",S="[object Int8Array]",I="[object Int16Array]",C="[object Int32Array]",T="[object Uint8Array]",N="[object Uint8ClampedArray]",L="[object Uint16Array]",M="[object Uint32Array]",P={};P[E]=P[w]=P[S]=P[I]=P[C]=P[T]=P[N]=P[L]=P[M]=!0,P[a]=P[u]=P[x]=P[l]=P[b]=P[c]=P[h]=P[f]=P[p]=P[d]=P[g]=P[m]=P[y]=P[v]=P[_]=!1;var A=Object.prototype,R=A.toString;e.exports=o},{}],165:[function(t,e,n){function i(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&s(v(t))}function o(t,e){return t="number"==typeof t||p.test(t)?+t:-1,e=null==e?y:e,t>-1&&t%1==0&&t<e}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=y}function a(t){for(var e=l(t),n=e.length,i=n&&t.length,r=!!i&&s(i)&&(f(t)||h(t)),a=-1,u=[];++a<n;){var c=e[a];(r&&o(c,i)||g.call(t,c))&&u.push(c)}return u}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&s(e)&&(f(t)||h(t))&&e||0;for(var n=t.constructor,i=-1,r="function"==typeof n&&n.prototype===t,a=Array(e),l=e>0;++i<e;)a[i]=i+"";for(var c in t)l&&o(c,e)||"constructor"==c&&(r||!g.call(t,c))||a.push(c);return a}var c=t("lodash._getnative"),h=t("lodash.isarguments"),f=t("lodash.isarray"),p=/^\d+$/,d=Object.prototype,g=d.hasOwnProperty,m=c(Object,"keys"),y=9007199254740991,v=i("length"),_=m?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&r(t)?a(t):u(t)?m(t):[]}:a;e.exports=_},{"lodash._getnative":160,"lodash.isarguments":161,"lodash.isarray":162}],166:[function(t,e,n){function i(t){return t>y?Math.pow(t,1/3):t/m+d}function r(t){return t>g?t*t*t:m*(t-d)}function o(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function s(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function a(t){var e=s(t[0]),n=s(t[1]),r=s(t[2]),o=i((.4124564*e+.3575761*n+.1804375*r)/h),a=i((.2126729*e+.7151522*n+.072175*r)/f),u=i((.0193339*e+.119192*n+.9503041*r)/p);return[116*a-16,500*(o-a),200*(a-u),t[3]]}function u(t){var e=(t[0]+16)/116,n=isNaN(t[1])?e:e+t[1]/500,i=isNaN(t[2])?e:e-t[2]/200;return e=f*r(e),n=h*r(n),i=p*r(i),[o(3.2404542*n-1.5371385*e-.4985314*i),o(-.969266*n+1.8760108*e+.041556*i),o(.0556434*n-.2040259*e+1.0572252*i),t[3]]}function l(t){var e=a(t),n=e[0],i=e[1],r=e[2],o=Math.atan2(r,i)*_;return[o<0?o+360:o,Math.sqrt(i*i+r*r),n,t[3]]}function c(t){var e=t[0]*v,n=t[1],i=t[2];return u([i,Math.cos(e)*n,Math.sin(e)*n,t[3]])}var h=.95047,f=1,p=1.08883,d=4/29,g=6/29,m=3*g*g,y=g*g*g,v=Math.PI/180,_=180/Math.PI;e.exports={lab:{forward:a,reverse:u},hcl:{forward:l,reverse:c}}},{}],167:[function(t,e,n){"use strict";function i(t){return t}function r(t,e){var n;if(f(t)){var l,c=t.stops&&"object"==typeof t.stops[0][0],h=c||void 0!==t.property,d=c||!h,g=t.stops&&typeof(c?t.stops[0][0].property:t.stops[0][0]),m=t.type||e||("string"===g?"categorical":"exponential");if("exponential"===m)l=a;else if("interval"===m)l=s;else if("categorical"===m)l=o;else{if("identity"!==m)throw new Error('Unknown function type "'+m+'"');l=u}var y;if(t.colorSpace&&"rgb"!==t.colorSpace){if(!p[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);var v=p[t.colorSpace];t=JSON.parse(JSON.stringify(t));for(var _=0;_<t.stops.length;_++)t.stops[_]=[t.stops[_][0],v.forward(t.stops[_][1])];y=v.reverse}else y=i;if(c){var x={},b=[];for(_=0;_<t.stops.length;_++){var E=t.stops[_];void 0===x[E[0].zoom]&&(x[E[0].zoom]={zoom:E[0].zoom,type:t.type,property:t.property,stops:[]}),x[E[0].zoom].stops.push([E[0].value,E[1]])}for(var w in x)b.push([x[w].zoom,r(x[w])]);n=function(e,n){return y(a({stops:b,base:t.base},e)(e,n))},n.isFeatureConstant=!1,n.isZoomConstant=!1}else d?(n=function(e){return y(l(t,e))},n.isFeatureConstant=!0,n.isZoomConstant=!1):(n=function(e,n){return y(l(t,n[t.property]))},n.isFeatureConstant=!1,n.isZoomConstant=!0)}else n=function(){return t},n.isFeatureConstant=!0,n.isZoomConstant=!0;return n}function o(t,e){for(var n=0;n<t.stops.length;n++)if(e===t.stops[n][0])return t.stops[n][1];return t.stops[0][1]}function s(t,e){for(var n=0;n<t.stops.length&&!(e<t.stops[n][0]);n++);return t.stops[Math.max(n-1,0)][1]}function a(t,e){for(var n=void 0!==t.base?t.base:1,i=0;!(i>=t.stops.length)&&!(e<=t.stops[i][0]);)i++;return 0===i?t.stops[i][1]:i===t.stops.length?t.stops[i-1][1]:l(e,n,t.stops[i-1][0],t.stops[i][0],t.stops[i-1][1],t.stops[i][1])}function u(t,e){return e}function l(t,e,n,i,r,o){return"function"==typeof r?function(){var s=r.apply(void 0,arguments),a=o.apply(void 0,arguments);return l(t,e,n,i,s,a)}:r.length?h(t,e,n,i,r,o):c(t,e,n,i,r,o)}function c(t,e,n,i,r,o){var s,a=i-n,u=t-n;return s=1===e?u/a:(Math.pow(e,u)-1)/(Math.pow(e,a)-1),r*(1-s)+o*s}function h(t,e,n,i,r,o){for(var s=[],a=0;a<r.length;a++)s[a]=c(t,e,n,i,r[a],o[a]);return s}function f(t){return"object"==typeof t&&(t.stops||"identity"===t.type)}var p=t("./color_spaces");e.exports.isFunctionDefinition=f,e.exports.interpolated=function(t){return r(t,"exponential")},e.exports["piecewise-constant"]=function(t){return r(t,"interval")}},{"./color_spaces":166}],168:[function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)"ref"!==i&&(n[i]=t[i]);return o.forEach(function(t){t in e&&(n[t]=e[t])}),n}function r(t){t=t.slice();var e,n=Object.create(null);for(e=0;e<t.length;e++)n[t[e].id]=t[e];for(e=0;e<t.length;e++)"ref"in t[e]&&(t[e]=i(t[e],n[t[e].ref]));return t}var o=t("./util/ref_properties");e.exports=r},{"./util/ref_properties":174}],169:[function(t,e,n){"use strict";function i(t,e,n,i){t=t||{},e=e||{};var r;for(r in t)t.hasOwnProperty(r)&&(e.hasOwnProperty(r)||(n.push({command:c.removeSource,args:[r]}),i[r]=!0));for(r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)?l(t[r],e[r])||(n.push({command:c.removeSource,args:[r]}),n.push({command:c.addSource,args:[r,e[r]]}),i[r]=!0):n.push({command:c.addSource,args:[r,e[r]]}))}function r(t,e,n,i,r,o){t=t||{},e=e||{};var s;for(s in t)t.hasOwnProperty(s)&&(l(t[s],e[s])||n.push({command:o,args:[i,s,e[s],r]}));for(s in e)e.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(l(t[s],e[s])||n.push({command:o,args:[i,s,e[s],r]}))}function o(t){return t.id}function s(t,e){return t[e.id]=e,t}function a(t,e,n){t=t||[],e=e||[];var i,a,u,h,f,p,d,g=t.map(o),m=e.map(o),y=t.reduce(s,{}),v=e.reduce(s,{}),_=g.slice(),x=Object.create(null);for(i=0,a=0;i<g.length;i++)u=g[i],v.hasOwnProperty(u)?a++:(n.push({command:c.removeLayer,args:[u]}),_.splice(_.indexOf(u,a),1));for(i=0,a=0;i<m.length;i++)u=m[m.length-1-i],_[_.length-1-i]!==u&&(y.hasOwnProperty(u)?(n.push({command:c.removeLayer,args:[u]}),_.splice(_.lastIndexOf(u,_.length-a),1)):a++,p=_[_.length-i],n.push({command:c.addLayer,args:[v[u],p]}),_.splice(_.length-i,0,u),x[u]=!0);for(i=0;i<m.length;i++)if(u=m[i],h=y[u],f=v[u],!x[u]&&!l(h,f))if(l(h.source,f.source)&&l(h["source-layer"],f["source-layer"])&&l(h.type,f.type)){r(h.layout,f.layout,n,u,null,c.setLayoutProperty),r(h.paint,f.paint,n,u,null,c.setPaintProperty),l(h.filter,f.filter)||n.push({command:c.setFilter,args:[u,f.filter]}),l(h.minzoom,f.minzoom)&&l(h.maxzoom,f.maxzoom)||n.push({command:c.setLayerZoomRange,args:[u,f.minzoom,f.maxzoom]});for(d in h)h.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?r(h[d],f[d],n,u,d.slice(6),c.setPaintProperty):l(h[d],f[d])||n.push({command:c.setLayerProperty,args:[u,d,f[d]]}));for(d in f)f.hasOwnProperty(d)&&!h.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?r(h[d],f[d],n,u,d.slice(6),c.setPaintProperty):l(h[d],f[d])||n.push({command:c.setLayerProperty,args:[u,d,f[d]]}))}else n.push({command:c.removeLayer,args:[u]}),p=_[_.lastIndexOf(u)+1],n.push({command:c.addLayer,args:[f,p]})}function u(t,e){if(!t)return[{command:c.setStyle,args:[e]}];var n=[];try{if(!l(t.version,e.version))return[{command:c.setStyle,args:[e]}];l(t.center,e.center)||n.push({command:c.setCenter,args:[e.center]}),l(t.zoom,e.zoom)||n.push({command:c.setZoom,args:[e.zoom]}),l(t.bearing,e.bearing)||n.push({command:c.setBearing,args:[e.bearing]}),l(t.pitch,e.pitch)||n.push({command:c.setPitch,args:[e.pitch]}),l(t.sprite,e.sprite)||n.push({command:c.setSprite,args:[e.sprite]}),l(t.glyphs,e.glyphs)||n.push({command:c.setGlyphs,args:[e.glyphs]}),l(t.transition,e.transition)||n.push({command:c.setTransition,args:[e.transition]}),l(t.light,e.light)||n.push({command:c.setLight,args:[e.light]});var r={},o=[];i(t.sources,e.sources,o,r);var s=[];t.layers&&t.layers.forEach(function(t){r[t.source]?n.push({command:c.removeLayer,args:[t.id]}):s.push(t)}),n=n.concat(o),a(s,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:c.setStyle,args:[e]}]}return n}var l=t("lodash.isequal"),c={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};e.exports=u,e.exports.operations=c},{"lodash.isequal":163}],170:[function(t,e,n){"use strict";function i(t,e){this.message=(t?t+": ":"")+r.apply(r,Array.prototype.slice.call(arguments,2)),null!==e&&void 0!==e&&e.__line__&&(this.line=e.__line__)}var r=t("util").format;e.exports=i},{util:141}],171:[function(t,e,n){"use strict";function i(t){return s(o.map(function(e){return t[e]}))}function r(t){var e,n,r={};for(e=0;e<t.length;e++){n=i(t[e]);var o=r[n];o||(o=r[n]=[]),o.push(t[e])}var s=[];for(n in r)s.push(r[n]);return s}var o=t("./util/ref_properties"),s=t("fast-stable-stringify");e.exports=r},{"./util/ref_properties":174,"fast-stable-stringify":144}],172:[function(t,e,n){"use strict";e.exports=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}},{}],173:[function(t,e,n){"use strict";e.exports=function(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}},{}],174:[function(t,e,n){"use strict";e.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],175:[function(t,e,n){"use strict";e.exports=function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}},{}],176:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("../util/extend");e.exports=function(e){var n=t("./validate_function"),s=t("./validate_object"),a={"*":function(){return[]},array:t("./validate_array"),boolean:t("./validate_boolean"),number:t("./validate_number"),color:t("./validate_color"),constants:t("./validate_constants"),enum:t("./validate_enum"),filter:t("./validate_filter"),function:t("./validate_function"),layer:t("./validate_layer"),object:t("./validate_object"),source:t("./validate_source"),light:t("./validate_light"),string:t("./validate_string")},u=e.value,l=e.valueSpec,c=e.key,h=e.styleSpec,f=e.style;if("string"===r(u)&&"@"===u[0]){if(h.$version>7)return[new i(c,u,"constants have been deprecated as of v8")];if(!(u in f.constants))return[new i(c,u,'constant "%s" not found',u)];e=o({},e,{value:f.constants[u]})}return l.function&&"object"===r(u)?n(e):l.type&&a[l.type]?a[l.type](e):s(o({},e,{valueSpec:l.type?h[l.type]:l}))}},{"../error/validation_error":170,"../util/extend":172,"../util/get_type":173,"./validate_array":177,"./validate_boolean":178,"./validate_color":179,"./validate_constants":180,"./validate_enum":181,"./validate_filter":182,"./validate_function":183,"./validate_layer":185,"./validate_light":187,"./validate_number":188,"./validate_object":189,"./validate_source":191,"./validate_string":192}],177:[function(t,e,n){"use strict";var i=t("../util/get_type"),r=t("./validate"),o=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.valueSpec,s=t.style,a=t.styleSpec,u=t.key,l=t.arrayElementValidator||r;if("array"!==i(e))return[new o(u,e,"array expected, %s found",i(e))];if(n.length&&e.length!==n.length)return[new o(u,e,"array length %d expected, length %d found",n.length,e.length)];if(n["min-length"]&&e.length<n["min-length"])return[new o(u,e,"array length at least %d expected, length %d found",n["min-length"],e.length)];var c={type:n.value};a.$version<7&&(c.function=n.function),"object"===i(n.value)&&(c=n.value);for(var h=[],f=0;f<e.length;f++)h=h.concat(l({array:e,arrayIndex:f,value:e[f],valueSpec:c,style:s,styleSpec:a,key:u+"["+f+"]"}));return h}},{"../error/validation_error":170,"../util/get_type":173,"./validate":176}],178:[function(t,e,n){"use strict";var i=t("../util/get_type"),r=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=i(e);return"boolean"!==o?[new r(n,e,"boolean expected, %s found",o)]:[]}},{"../error/validation_error":170,"../util/get_type":173}],179:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("csscolorparser").parseCSSColor;e.exports=function(t){var e=t.key,n=t.value,s=r(n);return"string"!==s?[new i(e,n,"color expected, %s found",s)]:null===o(n)?[new i(e,n,'color expected, "%s" found',n)]:[]}},{"../error/validation_error":170,"../util/get_type":173,csscolorparser:142}],180:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type");e.exports=function(t){var e=t.key,n=t.value,o=t.styleSpec;if(o.$version>7)return n?[new i(e,n,"constants have been deprecated as of v8")]:[];var s=r(n);if("object"!==s)return[new i(e,n,"object expected, %s found",s)];var a=[];for(var u in n)"@"!==u[0]&&a.push(new i(e+"."+u,n[u],'constants must start with "@"'));return a}},{"../error/validation_error":170,"../util/get_type":173}],181:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/unbundle_jsonlint");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,s=[];return Array.isArray(o.values)?o.values.indexOf(r(n))===-1&&s.push(new i(e,n,"expected one of [%s], %s found",o.values.join(", "),n)):Object.keys(o.values).indexOf(r(n))===-1&&s.push(new i(e,n,"expected one of [%s], %s found",Object.keys(o.values).join(", "),n)),s}},{"../error/validation_error":170,"../util/unbundle_jsonlint":175}],182:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("./validate_enum"),o=t("../util/get_type"),s=t("../util/unbundle_jsonlint");e.exports=function t(e){var n,a=e.value,u=e.key,l=e.styleSpec,c=[];if("array"!==o(a))return[new i(u,a,"array expected, %s found",o(a))];if(a.length<1)return[new i(u,a,"filter array must have at least 1 element")];switch(c=c.concat(r({key:u+"[0]",value:a[0],valueSpec:l.filter_operator,style:e.style,styleSpec:e.styleSpec})),s(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&"$type"==a[1]&&c.push(new i(u,a,'"$type" cannot be use with operator "%s"',a[0]));case"==":case"!=":3!=a.length&&c.push(new i(u,a,'filter array for operator "%s" must have 3 elements',a[0]));case"in":case"!in":a.length>=2&&(n=o(a[1]),"string"!==n?c.push(new i(u+"[1]",a[1],"string expected, %s found",n)):"@"===a[1][0]&&c.push(new i(u+"[1]",a[1],"filter key cannot be a constant")));for(var h=2;h<a.length;h++)n=o(a[h]),"$type"==a[1]?c=c.concat(r({key:u+"["+h+"]",value:a[h],valueSpec:l.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"===n&&"@"===a[h][0]?c.push(new i(u+"["+h+"]",a[h],"filter value cannot be a constant")):"string"!==n&&"number"!==n&&"boolean"!==n&&c.push(new i(u+"["+h+"]",a[h],"string, number, or boolean expected, %s found",n));break;case"any":case"all":case"none":for(h=1;h<a.length;h++)c=c.concat(t({key:u+"["+h+"]",value:a[h],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=o(a[1]),2!==a.length?c.push(new i(u,a,'filter array for "%s" operator must have 2 elements',a[0])):"string"!==n?c.push(new i(u+"[1]",a[1],"string expected, %s found",n)):"@"===a[1][0]&&c.push(new i(u+"[1]",a[1],"filter key cannot be a constant"))}return c}},{"../error/validation_error":170,"../util/get_type":173,"../util/unbundle_jsonlint":175,"./validate_enum":181}],183:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("./validate"),s=t("./validate_object"),a=t("./validate_array"),u=t("./validate_number"),l=t("../util/unbundle_jsonlint");e.exports=function(t){function e(t){if("identity"===g)return[new i(t.key,t.value,'identity function may not have a "stops" property')];var e=[],o=t.value;return e=e.concat(a({key:t.key,value:o,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:n})),"array"===r(o)&&0===o.length&&e.push(new i(t.key,o,"array must have at least one stop")),e}function n(t){var e=[],n=t.value,a=t.key;if("array"!==r(n))return[new i(a,n,"array expected, %s found",r(n))];if(2!==n.length)return[new i(a,n,"array length %d expected, length %d found",2,n.length)];if(_){if("object"!==r(n[0]))return[new i(a,n,"object expected, %s found",r(n[0]))];if(void 0===n[0].zoom)return[new i(a,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new i(a,n,"object stop key must have value")];if(p&&p>l(n[0].zoom))return[new i(a,n[0].zoom,"stop zoom values must appear in ascending order")];l(n[0].zoom)!==p&&(p=l(n[0].zoom),f=void 0),e=e.concat(s({key:a+"[0]",value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:u,value:c}}))}else e=e.concat(c({key:a+"[0]",value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec}));return e=e.concat(o({key:a+"[1]",value:n[1],valueSpec:d,style:t.style,styleSpec:t.styleSpec})),"number"===r(n[0])&&"piecewise-constant"===d.function&&n[0]%1!==0&&e.push(new i(a+"[0]",n[0],"zoom level for piecewise-constant functions must be an integer")),e}function c(t){var e=r(t.value),n=l(t.value);if(h){if(e!==h)return[new i(t.key,t.value,"%s stop domain type must match previous stop domain type %s",e,h)]}else h=e,g||"string"!==e||(g="categorical");return"number"!==e&&"string"!==e?[new i(t.key,t.value,"property value must be a number or string")]:"number"!==e&&"categorical"!==g?[new i(t.key,t.value,"number expected, %s found",e)]:"categorical"!==g||"number"!==e||isFinite(n)&&Math.floor(n)===n?"number"===e&&void 0!==f&&n<f?[new i(t.key,t.value,"stop domain values must appear in ascending order")]:(f=n,"categorical"===g&&n in m?[new i(t.key,t.value,"stop domain values must be unique")]:(m[n]=!0,[])):[new i(t.key,t.value,"integer expected, found %s",n)]}var h,f,p,d=t.valueSpec,g=l(t.value.type),m={},y="categorical"!==g&&void 0===t.value.property,v=!y,_="array"===r(t.value.stops)&&"array"===r(t.value.stops[0])&&"object"===r(t.value.stops[0][0]),x=s({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:e}});return"identity"===g||t.value.stops||x.push(new i(t.key,t.value,'missing required property "stops"')),"exponential"===g&&"piecewise-constant"===t.valueSpec.function&&x.push(new i(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(v&&!t.valueSpec["property-function"]?x.push(new i(t.key,t.value,"property functions not supported")):y&&!t.valueSpec["zoom-function"]&&x.push(new i(t.key,t.value,"zoom functions not supported"))),"categorical"!==g&&!_||void 0!==t.value.property||x.push(new i(t.key,t.value,'"property" property is required')),x}},{"../error/validation_error":170,"../util/get_type":173,"../util/unbundle_jsonlint":175,"./validate":176,"./validate_array":177,"./validate_number":188,"./validate_object":189}],184:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("./validate_string");e.exports=function(t){var e=t.value,n=t.key,o=r(t);return o.length?o:(e.indexOf("{fontstack}")===-1&&o.push(new i(n,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&o.push(new i(n,e,'"glyphs" url must include a "{range}" token')),o)}},{"../error/validation_error":170,"./validate_string":192}],185:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/unbundle_jsonlint"),o=t("./validate_object"),s=t("./validate_filter"),a=t("./validate_paint_property"),u=t("./validate_layout_property"),l=t("../util/extend");e.exports=function(t){var e=[],n=t.value,c=t.key,h=t.style,f=t.styleSpec;n.type||n.ref||e.push(new i(c,n,'either "type" or "ref" is required'));var p=r(n.type),d=r(n.ref);if(n.id)for(var g=0;g<t.arrayIndex;g++){var m=h.layers[g];r(m.id)===r(n.id)&&e.push(new i(c,n.id,'duplicate layer id "%s", previously used at line %d',n.id,m.id.__line__))}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new i(c,n[t],'"%s" is prohibited for ref layers',t))});var y;h.layers.forEach(function(t){t.id==d&&(y=t)}),y?y.ref?e.push(new i(c,n.ref,"ref cannot reference another ref layer")):p=r(y.type):e.push(new i(c,n.ref,'ref layer "%s" not found',d))}else if("background"!==p)if(n.source){var v=h.sources&&h.sources[n.source];v?"vector"!=v.type||"raster"!=p&&"arcgisraster"!=p?"raster"==v.type&&"raster"!=p&&"arcgisraster"!=p?e.push(new i(c,n.source,'layer "%s" requires a vector source',n.id)):"vector"!=v.type||n["source-layer"]||e.push(new i(c,n,'layer "%s" must specify a "source-layer"',n.id)):e.push(new i(c,n.source,'layer "%s" requires a raster source',n.id)):e.push(new i(c,n.source,'source "%s" not found',n.source))}else e.push(new i(c,n,'missing required property "source"'));return e=e.concat(o({key:c,value:n,valueSpec:f.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},filter:s,layout:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return u(l({layerType:p},t))}}})},paint:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return a(l({layerType:p},t))}}})}}}))}},{"../error/validation_error":170,"../util/extend":172,"../util/unbundle_jsonlint":175,"./validate_filter":182,"./validate_layout_property":186,"./validate_object":189,"./validate_paint_property":190}],186:[function(t,e,n){"use strict";var i=t("./validate"),r=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.style,o=t.styleSpec,s=t.value,a=t.objectKey,u=o["layout_"+t.layerType];if(!u)return[];if(t.valueSpec||u[a]){var l=[];return"symbol"===t.layerType&&("icon-image"===a&&n&&!n.sprite?l.push(new r(e,s,'use of "icon-image" requires a style "sprite" property')):"text-field"===a&&n&&!n.glyphs&&l.push(new r(e,s,'use of "text-field" requires a style "glyphs" property'))),l.concat(i({key:t.key,value:s,valueSpec:t.valueSpec||u[a],style:n,styleSpec:o}))}return[new r(e,s,'unknown property "%s"',a)]}},{"../error/validation_error":170,"./validate":176}],187:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.value,n=t.styleSpec,s=n.light,a=t.style,u=[],l=r(e);if(void 0===e)return u;if("object"!==l)return u=u.concat([new i("light",e,"object expected, %s found",l)]);for(var c in e){var h=c.match(/^(.*)-transition$/);u=h&&s[h[1]]&&s[h[1]].transition?u.concat(o({key:c,value:e[c],valueSpec:n.transition,style:a,styleSpec:n})):s[c]?u.concat(o({key:c,value:e[c],valueSpec:s[c],style:a,styleSpec:n})):u.concat([new i(c,e[c],'unknown property "%s"',c)])}return u}},{"../error/validation_error":170,"../util/get_type":173,"./validate":176}],188:[function(t,e,n){"use strict";var i=t("../util/get_type"),r=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,s=i(n);return"number"!==s?[new r(e,n,"number expected, %s found",s)]:"minimum"in o&&n<o.minimum?[new r(e,n,"%s is less than the minimum value %s",n,o.minimum)]:"maximum"in o&&n>o.maximum?[new r(e,n,"%s is greater than the maximum value %s",n,o.maximum)]:[]}},{"../error/validation_error":170,"../util/get_type":173}],189:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.key,n=t.value,s=t.valueSpec||{},a=t.objectElementValidators||{},u=t.style,l=t.styleSpec,c=[],h=r(n);if("object"!==h)return[new i(e,n,"object expected, %s found",h)];for(var f in n){var p,d=f.split(".")[0],g=s[d]||s["*"];if(a[d])p=a[d];else if(s[d])p=o;else if(a["*"])p=a["*"];else{if(!s["*"]){c.push(new i(e,n[f],'unknown property "%s"',f));continue}p=o}c=c.concat(p({key:(e?e+".":e)+f,value:n[f],valueSpec:g,style:u,styleSpec:l,object:n,objectKey:f}))}for(d in s)s[d].required&&void 0===s[d].default&&void 0===n[d]&&c.push(new i(e,n,'missing required property "%s"',d));return c;
}},{"../error/validation_error":170,"../util/get_type":173,"./validate":176}],190:[function(t,e,n){"use strict";var i=t("./validate"),r=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.style,o=t.styleSpec,s=t.value,a=t.objectKey,u=o["paint_"+t.layerType];if(!u)return[];var l=a.match(/^(.*)-transition$/);return l&&u[l[1]]&&u[l[1]].transition?i({key:e,value:s,valueSpec:o.transition,style:n,styleSpec:o}):t.valueSpec||u[a]?i({key:t.key,value:s,valueSpec:t.valueSpec||u[a],style:n,styleSpec:o}):[new r(e,s,'unknown property "%s"',a)]}},{"../error/validation_error":170,"./validate":176}],191:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/unbundle_jsonlint"),o=t("./validate_object"),s=t("./validate_enum");e.exports=function(t){var e=t.value,n=t.key,a=t.styleSpec,u=t.style;if(!e.type)return[new i(n,e,'"type" is required')];var l=r(e.type);switch(l){case"vector":case"raster":case"arcgisraster":var c=[];if(c=c.concat(o({key:n,value:e,valueSpec:a.source_tile,style:t.style,styleSpec:a})),"url"in e)for(var h in e)["type","url","tileSize"].indexOf(h)<0&&c.push(new i(n+"."+h,e[h],'a source with a "url" property may not include a "%s" property',h));return c;case"geojson":return o({key:n,value:e,valueSpec:a.source_geojson,style:u,styleSpec:a});case"video":return o({key:n,value:e,valueSpec:a.source_video,style:u,styleSpec:a});case"image":return o({key:n,value:e,valueSpec:a.source_image,style:u,styleSpec:a});case"canvas":return o({key:n,value:e,valueSpec:a.source_canvas,style:u,styleSpec:a});default:return s({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","arcgisraster","geojson","video","image"]},style:u,styleSpec:a})}}},{"../error/validation_error":170,"../util/unbundle_jsonlint":175,"./validate_enum":181,"./validate_object":189}],192:[function(t,e,n){"use strict";var i=t("../util/get_type"),r=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=i(e);return"string"!==o?[new r(n,e,"string expected, %s found",o)]:[]}},{"../error/validation_error":170,"../util/get_type":173}],193:[function(t,e,n){"use strict";function i(t,e){e=e||u;var n=[];return n=n.concat(a({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:l,"*":function(){return[]}}})),e.$version>7&&t.constants&&(n=n.concat(s({key:"constants",value:t.constants,style:t,styleSpec:e}))),r(n)}function r(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function o(t){return function(){return r(t.apply(this,arguments))}}var s=t("./validate/validate_constants"),a=t("./validate/validate"),u=t("../reference/latest.min"),l=t("./validate/validate_glyphs_url");i.source=o(t("./validate/validate_source")),i.light=o(t("./validate/validate_light")),i.layer=o(t("./validate/validate_layer")),i.filter=o(t("./validate/validate_filter")),i.paintProperty=o(t("./validate/validate_paint_property")),i.layoutProperty=o(t("./validate/validate_layout_property")),e.exports=i},{"../reference/latest.min":194,"./validate/validate":176,"./validate/validate_constants":180,"./validate/validate_filter":182,"./validate/validate_glyphs_url":184,"./validate/validate_layer":185,"./validate/validate_layout_property":186,"./validate/validate_light":187,"./validate/validate_paint_property":190,"./validate/validate_source":191}],194:[function(t,e,n){e.exports=t("./v8.min.json")},{"./v8.min.json":195}],195:[function(t,e,n){e.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image","source_canvas"],source_tile:{type:{required:!0,type:"enum",values:{vector:{},raster:{},arcgisraster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},"fill-extrusion":{},raster:{},arcgisraster:{},background:{}}},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_fill-extrusion","layout_symbol","layout_raster","layout_arcgisraster","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_arcgisraster:{visibility:{type:"enum",function:"piecewise-constant",values:["visible","none"],default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_fill-extrusion","paint_symbol","paint_raster","paint_arcgisraster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_arcgisraster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],196:[function(t,e,n){"use strict";function i(t){return!!(r()&&o()&&s()&&a()&&u()&&l()&&c()&&h(t&&t.failIfMajorPerformanceCaveat))}function r(){return"undefined"!=typeof window&&"undefined"!=typeof document}function o(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function s(){return Function.prototype&&Function.prototype.bind}function a(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function u(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function l(){return"Worker"in window}function c(){return"Uint8ClampedArray"in window}function h(t){return void 0===p[t]&&(p[t]=f(t)),p[t]}function f(t){var e=document.createElement("canvas"),n=Object.create(i.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.probablySupportsContext?e.probablySupportsContext("webgl",n)||e.probablySupportsContext("experimental-webgl",n):e.supportsContext?e.supportsContext("webgl",n)||e.supportsContext("experimental-webgl",n):e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}"undefined"!=typeof e&&e.exports?e.exports=i:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=i);var p={};i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],197:[function(t,e,n){"use strict";function i(t){var e;t&&t.length&&(e=t,t=e.length);var n=new Uint8Array(t||0);return e&&n.set(e),n.readUInt32LE=o.readUInt32LE,n.writeUInt32LE=o.writeUInt32LE,n.readInt32LE=o.readInt32LE,n.writeInt32LE=o.writeInt32LE,n.readFloatLE=o.readFloatLE,n.writeFloatLE=o.writeFloatLE,n.readDoubleLE=o.readDoubleLE,n.writeDoubleLE=o.writeDoubleLE,n.toString=o.toString,n.write=o.write,n.slice=o.slice,n.copy=o.copy,n._isBuffer=!0,n}function r(t){for(var e,n,i=t.length,r=[],o=0;o<i;o++){if(e=t.charCodeAt(o),e>55295&&e<57344){if(!n){e>56319||o+1===i?r.push(239,191,189):n=e;continue}if(e<56320){r.push(239,191,189),n=e;continue}e=n-55296<<10|e-56320|65536,n=null}else n&&(r.push(239,191,189),n=null);e<128?r.push(e):e<2048?r.push(e>>6|192,63&e|128):e<65536?r.push(e>>12|224,e>>6&63|128,63&e|128):r.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}return r}e.exports=i;var o,s,a,u=t("ieee754");o={readUInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},writeUInt32LE:function(t,e){this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24},readInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+(this[t+3]<<24)},readFloatLE:function(t){return u.read(this,t,!0,23,4)},readDoubleLE:function(t){return u.read(this,t,!0,52,8)},writeFloatLE:function(t,e){return u.write(this,t,e,!0,23,4)},writeDoubleLE:function(t,e){return u.write(this,t,e,!0,52,8)},toString:function(t,e,n){var i="",r="";e=e||0,n=Math.min(this.length,n||this.length);for(var o=e;o<n;o++){var s=this[o];s<=127?(i+=decodeURIComponent(r)+String.fromCharCode(s),r=""):r+="%"+s.toString(16)}return i+=decodeURIComponent(r)},write:function(t,e){for(var n=t===s?a:r(t),i=0;i<n.length;i++)this[e+i]=n[i]},slice:function(t,e){return this.subarray(t,e)},copy:function(t,e){e=e||0;for(var n=0;n<this.length;n++)t[e+n]=this[n]}},o.writeInt32LE=o.writeUInt32LE,i.byteLength=function(t){return s=t,a=r(t),a.length},i.isBuffer=function(t){return!(!t||!t._isBuffer)}},{ieee754:199}],198:[function(t,e,n){(function(n){"use strict";function i(t){this.buf=m.isBuffer(t)?t:new m(t||0),this.pos=0,this.length=this.buf.length}function r(t,e){var n,i=e.buf;if(n=i[e.pos++],t+=268435456*(127&n),n<128)return t;if(n=i[e.pos++],t+=34359738368*(127&n),n<128)return t;if(n=i[e.pos++],t+=4398046511104*(127&n),n<128)return t;if(n=i[e.pos++],t+=562949953421312*(127&n),n<128)return t;if(n=i[e.pos++],t+=72057594037927940*(127&n),n<128)return t;if(n=i[e.pos++],t+=0x8000000000000000*(127&n),n<128)return t;throw new Error("Expected varint not more than 10 bytes")}function o(t,e){e.realloc(10);for(var n=e.pos+10;t>=1;){if(e.pos>=n)throw new Error("Given varint doesn't fit into 10 bytes");var i=255&t;e.buf[e.pos++]=i|(t>=128?128:0),t/=128}}function s(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function a(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function u(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function l(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function c(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}e.exports=i;var m=n.Buffer||t("./buffer");i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var y=4294967296,v=1/y,_=Math.pow(2,63);i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;t(r,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=this.buf.readUInt32LE(this.pos);return this.pos+=4,t},readSFixed32:function(){var t=this.buf.readInt32LE(this.pos);return this.pos+=4,t},readFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*y;return this.pos+=8,t},readSFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*y;return this.pos+=8,t},readFloat:function(){var t=this.buf.readFloatLE(this.pos);return this.pos+=4,t},readDouble:function(){var t=this.buf.readDoubleLE(this.pos);return this.pos+=8,t},readVarint:function(){var t,e,n=this.buf;return e=n[this.pos++],t=127&e,e<128?t:(e=n[this.pos++],t|=(127&e)<<7,e<128?t:(e=n[this.pos++],t|=(127&e)<<14,e<128?t:(e=n[this.pos++],t|=(127&e)<<21,e<128?t:r(t,this))))},readVarint64:function(){var t=this.pos,e=this.readVarint();if(e<_)return e;for(var n=this.pos-2;255===this.buf[n];)n--;n<t&&(n=t),e=0;for(var i=0;i<n-t+1;i++){var r=127&~this.buf[t+i];e+=i<4?r<<7*i:r*Math.pow(2,7*i)}return-e-1},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.buf.toString("utf8",this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.slice(this.pos,t);return this.pos=t,e},readPackedVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readVarint());return e},readPackedSVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new m(e);this.buf.copy(n),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(t){this.realloc(4),this.buf.writeUInt32LE(t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),this.buf.writeInt32LE(t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(t&-1,this.pos),this.buf.writeUInt32LE(Math.floor(t*v),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(t&-1,this.pos),this.buf.writeInt32LE(Math.floor(t*v),this.pos+4),this.pos+=8},writeVarint:function(t){return t=+t,t>268435455?void o(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),void(t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t));
},writeString:function(t){t=String(t);var e=m.byteLength(t);this.writeVarint(e),this.realloc(e),this.buf.write(t,this.pos),this.pos+=e},writeFloat:function(t){this.realloc(4),this.buf.writeFloatLE(t,this.pos),this.pos+=4},writeDouble:function(t){this.realloc(8),this.buf.writeDoubleLE(t,this.pos),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&s(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,a,e)},writePackedSVarint:function(t,e){this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){this.writeMessage(t,h,e)},writePackedFloat:function(t,e){this.writeMessage(t,l,e)},writePackedDouble:function(t,e){this.writeMessage(t,c,e)},writePackedFixed32:function(t,e){this.writeMessage(t,f,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,p,e)},writePackedFixed64:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,g,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":197}],199:[function(t,e,n){n.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,l=u>>1,c=-7,h=n?r-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,i),o-=l}return(p?-1:1)*s*Math.pow(2,o-i)},n.write=function(t,e,n,i,r,o){var s,a,u,l=8*o-r-1,c=(1<<l)-1,h=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+p]=255&a,p+=d,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;t[n+p]=255&s,p+=d,s/=256,l-=8);t[n+p-d]|=128*g}},{}],200:[function(t,e,n){"use strict";function i(t,e){this.x=t,this.y=e}e.exports=i,i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=i,this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t}},{}],201:[function(t,e,n){"use strict";function i(t,e,n,s,a){for(n=n||0,s=s||t.length-1,a=a||o;s>n;){if(s-n>600){var u=s-n+1,l=e-n+1,c=Math.log(u),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(u-h)/u)*(l-u/2<0?-1:1),p=Math.max(n,Math.floor(e-l*h/u+f)),d=Math.min(s,Math.floor(e+(u-l)*h/u+f));i(t,e,p,d,a)}var g=t[e],m=n,y=s;for(r(t,n,e),a(t[s],g)>0&&r(t,n,s);m<y;){for(r(t,m,y),m++,y--;a(t[m],g)<0;)m++;for(;a(t[y],g)>0;)y--}0===a(t[n],g)?r(t,n,y):(y++,r(t,y,s)),y<=e&&(n=y+1),e<=y&&(s=y-1)}}function r(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function o(t,e){return t<e?-1:t>e?1:0}e.exports=i},{}],202:[function(e,n,i){!function(e,r){"object"==typeof i&&"undefined"!=typeof n?n.exports=r():"function"==typeof t&&t.amd?t(r):e.ShelfPack=r()}(this,function(){function t(t,e,n){n=n||{},this.w=t||64,this.h=e||64,this.autoResize=!!n.autoResize,this.shelves=[],this.stats={},this.count=function(t){this.stats[t]=(0|this.stats[t])+1}}function e(t,e,n){this.x=0,this.y=t,this.w=this.free=e,this.h=n}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var n,i,r,o=[],s=0;s<t.length;s++)if(n=t[s].w||t[s].width,i=t[s].h||t[s].height,n&&i){if(r=this.packOne(n,i),!r)continue;e.inPlace&&(t[s].x=r.x,t[s].y=r.y),o.push(r)}if(this.shelves.length>0){for(var a=0,u=0,l=0;l<this.shelves.length;l++){var c=this.shelves[l];u+=c.h,a=Math.max(c.w-c.free,a)}this.resize(a,u)}return o},t.prototype.packOne=function(t,n){for(var i,r,o=0,s={shelf:-1,waste:1/0},a=0;a<this.shelves.length;a++){if(i=this.shelves[a],o+=i.h,n===i.h&&t<=i.free)return this.count(n),i.alloc(t,n);n>i.h||t>i.free||n<i.h&&t<=i.free&&(r=i.h-n,r<s.waste&&(s.waste=r,s.shelf=a))}if(s.shelf!==-1)return i=this.shelves[s.shelf],this.count(n),i.alloc(t,n);if(n<=this.h-o&&t<=this.w)return i=new e(o,this.w,n),this.shelves.push(i),this.count(n),i.alloc(t,n);if(this.autoResize){var u,l,c,h;return u=l=this.h,c=h=this.w,(c<=u||t>c)&&(h=2*Math.max(t,c)),(u<c||n>u)&&(l=2*Math.max(n,u)),this.resize(h,l),this.packOne(t,n)}return null},t.prototype.clear=function(){this.shelves=[],this.stats={}},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(t);return!0},e.prototype.alloc=function(t,e){if(t>this.free||e>this.h)return null;var n=this.x;return this.x+=t,this.free-=t,{x:n,y:this.y,w:t,h:e,width:t,height:e}},e.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t})},{}],203:[function(t,e,n){"use strict";function i(t){return new r(t)}function r(t){this.options=p(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function o(t,e,n,i){return{x:t,y:e,zoom:1/0,id:i,numPoints:n}}function s(t,e){var n=t.geometry.coordinates;return o(l(n[0]),c(n[1]),1,e)}function a(t){return{type:"Feature",properties:u(t),geometry:{type:"Point",coordinates:[h(t.x),f(t.y)]}}}function u(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return{cluster:!0,point_count:e,point_count_abbreviated:n}}function l(t){return t/360+.5}function c(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function h(t){return 360*(t-.5)}function f(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function p(t,e){for(var n in e)t[n]=e[n];return t}function d(t){return t.x}function g(t){return t.y}var m=t("kdbush");e.exports=i,r.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;var i=t.map(s);e&&console.timeEnd(n);for(var r=this.options.maxZoom;r>=this.options.minZoom;r--){var o=+Date.now();this.trees[r+1]=m(i,d,g,this.options.nodeSize,Float32Array),i=this._cluster(i,r),e&&console.log("z%d: %d clusters in %dms",r,i.length,+Date.now()-o)}return this.trees[this.options.minZoom]=m(i,d,g,this.options.nodeSize,Float32Array),e&&console.timeEnd("total time"),this},getClusters:function(t,e){for(var n=this.trees[this._limitZoom(e)],i=n.range(l(t[0]),c(t[3]),l(t[2]),c(t[1])),r=[],o=0;o<i.length;o++){var s=n.points[i[o]];r.push(s.id!==-1?this.points[s.id]:a(s))}return r},getTile:function(t,e,n){var i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),o=this.options.extent,s=this.options.radius,a=s/o,u=(n-a)/r,l=(n+1+a)/r,c={features:[]};return this._addTileFeatures(i.range((e-a)/r,u,(e+1+a)/r,l),i.points,e,n,r,c),0===e&&this._addTileFeatures(i.range(1-a/r,u,1,l),i.points,r,n,r,c),e===r-1&&this._addTileFeatures(i.range(0,u,a/r,l),i.points,-1,n,r,c),c.features.length?c:null},_addTileFeatures:function(t,e,n,i,r,o){for(var s=0;s<t.length;s++){var a=e[t[s]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(a.x*r-n)),Math.round(this.options.extent*(a.y*r-i))]],tags:a.id!==-1?this.points[a.id].properties:u(a)})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],i=this.options.radius/(this.options.extent*Math.pow(2,e)),r=0;r<t.length;r++){var s=t[r];if(!(s.zoom<=e)){s.zoom=e;for(var a=this.trees[e+1],u=a.within(s.x,s.y,i),l=!1,c=s.numPoints,h=s.x*c,f=s.y*c,p=0;p<u.length;p++){var d=a.points[u[p]];e<d.zoom&&(l=!0,d.zoom=e,h+=d.x*d.numPoints,f+=d.y*d.numPoints,c+=d.numPoints)}n.push(l?o(h/c,f/c,c,-1):s)}}return n}}},{kdbush:204}],204:[function(t,e,n){"use strict";function i(t,e,n,i,o){return new r(t,e,n,i,o)}function r(t,e,n,i,r){e=e||o,n=n||s,r=r||Array,this.nodeSize=i||64,this.points=t,this.ids=new r(t.length),this.coords=new r(2*t.length);for(var u=0;u<t.length;u++)this.ids[u]=u,this.coords[2*u]=e(t[u]),this.coords[2*u+1]=n(t[u]);a(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function o(t){return t[0]}function s(t){return t[1]}var a=t("./sort"),u=t("./range"),l=t("./within");e.exports=i,r.prototype={range:function(t,e,n,i){return u(this.ids,this.coords,t,e,n,i,this.nodeSize)},within:function(t,e,n){return l(this.ids,this.coords,t,e,n,this.nodeSize)}}},{"./range":205,"./sort":206,"./within":207}],205:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,s){for(var a,u,l=[0,t.length-1,0],c=[];l.length;){var h=l.pop(),f=l.pop(),p=l.pop();if(f-p<=s)for(var d=p;d<=f;d++)a=e[2*d],u=e[2*d+1],a>=n&&a<=r&&u>=i&&u<=o&&c.push(t[d]);else{var g=Math.floor((p+f)/2);a=e[2*g],u=e[2*g+1],a>=n&&a<=r&&u>=i&&u<=o&&c.push(t[g]);var m=(h+1)%2;(0===h?n<=a:i<=u)&&(l.push(p),l.push(g-1),l.push(m)),(0===h?r>=a:o>=u)&&(l.push(g+1),l.push(f),l.push(m))}}return c}e.exports=i},{}],206:[function(t,e,n){"use strict";function i(t,e,n,o,s,a){if(!(s-o<=n)){var u=Math.floor((o+s)/2);r(t,e,u,o,s,a%2),i(t,e,n,o,u-1,a+1),i(t,e,n,u+1,s,a+1)}}function r(t,e,n,i,s,a){for(;s>i;){if(s-i>600){var u=s-i+1,l=n-i+1,c=Math.log(u),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(u-h)/u)*(l-u/2<0?-1:1),p=Math.max(i,Math.floor(n-l*h/u+f)),d=Math.min(s,Math.floor(n+(u-l)*h/u+f));r(t,e,n,p,d,a)}var g=e[2*n+a],m=i,y=s;for(o(t,e,i,n),e[2*s+a]>g&&o(t,e,i,s);m<y;){for(o(t,e,m,y),m++,y--;e[2*m+a]<g;)m++;for(;e[2*y+a]>g;)y--}e[2*i+a]===g?o(t,e,i,y):(y++,o(t,e,y,s)),y<=n&&(i=y+1),n<=y&&(s=y-1)}}function o(t,e,n,i){s(t,n,i),s(e,2*n,2*i),s(e,2*n+1,2*i+1)}function s(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}e.exports=i},{}],207:[function(t,e,n){"use strict";function i(t,e,n,i,o,s){for(var a=[0,t.length-1,0],u=[],l=o*o;a.length;){var c=a.pop(),h=a.pop(),f=a.pop();if(h-f<=s)for(var p=f;p<=h;p++)r(e[2*p],e[2*p+1],n,i)<=l&&u.push(t[p]);else{var d=Math.floor((f+h)/2),g=e[2*d],m=e[2*d+1];r(g,m,n,i)<=l&&u.push(t[d]);var y=(c+1)%2;(0===c?n-o<=g:i-o<=m)&&(a.push(f),a.push(d-1),a.push(y)),(0===c?n+o>=g:i+o>=m)&&(a.push(d+1),a.push(h),a.push(y))}}return u}function r(t,e,n,i){var r=t-n,o=e-i;return r*r+o*o}e.exports=i},{}],208:[function(t,e,n){"use strict";function i(t,e){if(!(this instanceof i))return new i(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||r,t)for(var n=Math.floor(this.length/2);n>=0;n--)this._down(n)}function r(t,e){return t<e?-1:t>e?1:0}function o(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}e.exports=i,i.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){var t=this.data[0];return this.data[0]=this.data[this.length-1],this.length--,this.data.pop(),this._down(0),t},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare;t>0;){var i=Math.floor((t-1)/2);if(!(n(e[t],e[i])<0))break;o(e,i,t),t=i}},_down:function(t){for(var e=this.data,n=this.compare,i=this.length;;){var r=2*t+1,s=r+1,a=t;if(r<i&&n(e[r],e[a])<0&&(a=r),s<i&&n(e[s],e[a])<0&&(a=s),a===t)return;o(e,a,t),t=a}}}},{}],209:[function(t,e,n){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":210,"./lib/vectortilefeature.js":211,"./lib/vectortilelayer.js":212}],210:[function(t,e,n){"use strict";function i(t,e){this.layers=t.readFields(r,{},e)}function r(t,e,n){if(3===t){var i=new o(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}var o=t("./vectortilelayer");e.exports=i},{"./vectortilelayer":212}],211:[function(t,e,n){"use strict";function i(t,e,n,i,o){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=o,t.readFields(r,this,e)}function r(t,e,n){1==t?e.id=n.readVarint():2==t?o(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function o(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}function s(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],o=0;o<e;o++){var s=a(t[o]);0!==s&&(void 0===i&&(i=s<0),i===s<0?(n&&r.push(n),n=[t[o]]):n.push(t[o]))}return n&&r.push(n),r}function a(t){for(var e,n,i=0,r=0,o=t.length,s=o-1;r<o;s=r++)e=t[r],n=t[s],i+=(n.x-e.x)*(e.y+n.y);return i}var u=t("point-geometry");e.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,r=0,o=0,s=0,a=[];t.pos<n;){if(!r){var l=t.readVarint();i=7&l,r=l>>3}if(r--,1===i||2===i)o+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&a.push(e),e=[]),e.push(new u(o,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&a.push(e),a},i.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,o=0,s=1/0,a=-(1/0),u=1/0,l=-(1/0);t.pos<e;){if(!i){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)r+=t.readSVarint(),o+=t.readSVarint(),r<s&&(s=r),r>a&&(a=r),o<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[s,u,a,l]},i.prototype.toGeoJSON=function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],i=180-360*(n.y+c)/u;t[e]=[360*(n.x+l)/u-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}var o,a,u=this.extent*Math.pow(2,n),l=this.extent*t,c=this.extent*e,h=this.loadGeometry(),f=i.types[this.type];switch(this.type){case 1:var p=[];for(o=0;o<h.length;o++)p[o]=h[o][0];h=p,r(h);break;case 2:for(o=0;o<h.length;o++)r(h[o]);break;case 3:for(h=s(h),o=0;o<h.length;o++)for(a=0;a<h[o].length;a++)r(h[o][a])}1===h.length?h=h[0]:f="Multi"+f;var d={type:"Feature",geometry:{type:f,coordinates:h},properties:this.properties};return"id"in this&&(d.id=this.id),d}},{"point-geometry":200}],212:[function(t,e,n){"use strict";function i(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(r,this,e),this.length=this._features.length}function r(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(o(n))}function o(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}var s=t("./vectortilefeature.js");e.exports=i,i.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new s(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":211}],213:[function(t,e,n){function i(t){var e=[];for(var n in t.layers)e.push(o(t.layers[n]));var i=new c;return h.tile.write({layers:e},i),i.finish()}function r(t){var e={};for(var n in t)e[n]=new f(t[n].features),e[n].name=n;return i({layers:e})}function o(t){for(var e={name:t.name||"",version:t.version||1,extent:t.extent||4096,keys:[],values:[],features:[]},n={},i={},r=0;r<t.length;r++){var o=t.feature(r);o.geometry=u(o.loadGeometry());var s=[];for(var a in o.properties){var c=n[a];"undefined"==typeof c&&(e.keys.push(a),c=e.keys.length-1,n[a]=c);var h=l(o.properties[a]),f=i[h.key];"undefined"==typeof f&&(e.values.push(h),f=e.values.length-1,i[h.key]=f),s.push(c),s.push(f)}o.tags=s,e.features.push(o)}return e}function s(t,e){return(e<<3)+(7&t)}function a(t){return t<<1^t>>31}function u(t){for(var e=[],n=0,i=0,r=t.length,o=0;o<r;o++){var u=t[o];e.push(s(1,1));for(var l=0;l<u.length;l++){1===l&&e.push(s(2,u.length-1));var c=u[l].x-n,h=u[l].y-i;e.push(a(c),a(h)),n+=c,i+=h}}return e}function l(t){var e,n=typeof t;return"string"===n?e={string_value:t}:"boolean"===n?e={bool_value:t}:"number"===n?e=t%1!==0?{double_value:t}:t<0?{sint_value:t}:{uint_value:t}:(t=JSON.stringify(t),e={string_value:t}),e.key=n+":"+t,e}var c=t("pbf"),h=t("./vector-tile-pb"),f=t("./lib/geojson_wrapper");e.exports=i,e.exports.fromVectorTileJs=i,e.exports.fromGeojsonVt=r,e.exports.GeoJSONWrapper=f},{"./lib/geojson_wrapper":214,"./vector-tile-pb":215,pbf:198}],214:[function(t,e,n){"use strict";function i(t){this.features=t,this.length=t.length}function r(t){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=4096}var o=t("point-geometry"),s=t("vector-tile").VectorTileFeature;e.exports=i,i.prototype.feature=function(t){return new r(this.features[t])},r.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],i=[],r=0;r<n.length;r++)i.push(new o(n[r][0],n[r][1]));this.geometry.push(i)}return this.geometry},r.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-(1/0),i=1/0,r=-(1/0),o=0;o<t.length;o++)for(var s=t[o],a=0;a<s.length;a++){var u=s[a];e=Math.min(e,u.x),n=Math.max(n,u.x),i=Math.min(i,u.y),r=Math.max(r,u.y)}return[e,i,n,r]},r.prototype.toGeoJSON=s.prototype.toGeoJSON},{"point-geometry":200,"vector-tile":209}],215:[function(t,e,n){"use strict";function i(t,e){return t.readFields(r,{layers:[]},e)}function r(t,e,n){3===t&&e.layers.push(f(n,n.readVarint()+n.pos))}function o(t,e){var n;if(void 0!==t.layers)for(n=0;n<t.layers.length;n++)e.writeMessage(3,d,t.layers[n])}function s(t,e){return t.readFields(a,{},e)}function a(t,e,n){1===t?e.string_value=n.readString():2===t?e.float_value=n.readFloat():3===t?e.double_value=n.readDouble():4===t?e.int_value=n.readVarint():5===t?e.uint_value=n.readVarint():6===t?e.sint_value=n.readSVarint():7===t&&(e.bool_value=n.readBoolean())}function u(t,e){void 0!==t.string_value&&e.writeStringField(1,t.string_value),void 0!==t.float_value&&e.writeFloatField(2,t.float_value),void 0!==t.double_value&&e.writeDoubleField(3,t.double_value),void 0!==t.int_value&&e.writeVarintField(4,t.int_value),void 0!==t.uint_value&&e.writeVarintField(5,t.uint_value),void 0!==t.sint_value&&e.writeSVarintField(6,t.sint_value),void 0!==t.bool_value&&e.writeBooleanField(7,t.bool_value)}function l(t,e){var n=t.readFields(c,{},e);return void 0===n.type&&(n.type="Unknown"),n}function c(t,e,n){1===t?e.id=n.readVarint():2===t?e.tags=n.readPackedVarint():3===t?e.type=n.readVarint():4===t&&(e.geometry=n.readPackedVarint())}function h(t,e){void 0!==t.id&&e.writeVarintField(1,t.id),void 0!==t.tags&&e.writePackedVarint(2,t.tags),void 0!==t.type&&e.writeVarintField(3,t.type),void 0!==t.geometry&&e.writePackedVarint(4,t.geometry)}function f(t,e){return t.readFields(p,{features:[],keys:[],values:[]},e)}function p(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():2===t?e.features.push(l(n,n.readVarint()+n.pos)):3===t?e.keys.push(n.readString()):4===t?e.values.push(s(n,n.readVarint()+n.pos)):5===t&&(e.extent=n.readVarint())}function d(t,e){void 0!==t.version&&e.writeVarintField(15,t.version),void 0!==t.name&&e.writeStringField(1,t.name);var n;if(void 0!==t.features)for(n=0;n<t.features.length;n++)e.writeMessage(2,h,t.features[n]);if(void 0!==t.keys)for(n=0;n<t.keys.length;n++)e.writeStringField(3,t.keys[n]);if(void 0!==t.values)for(n=0;n<t.values.length;n++)e.writeMessage(4,u,t.values[n]);void 0!==t.extent&&e.writeVarintField(5,t.extent)}var g=n.tile={read:i,write:o};g.GeomType={Unknown:0,Point:1,LineString:2,Polygon:3},g.value={read:s,write:u},g.feature={read:l,write:h},g.layer={read:f,write:d}},{}],216:[function(t,e,n){var i=arguments[3],r=arguments[4],o=arguments[5],s=JSON.stringify;e.exports=function(t,e){function n(t){m[t]=!0;for(var e in r[t][1]){var i=r[t][1][e];m[i]||n(i)}}for(var a,u=Object.keys(o),l=0,c=u.length;l<c;l++){var h=u[l],f=o[h].exports;if(f===t||f&&f.default===t){a=h;break}}if(!a){a=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var p={},l=0,c=u.length;l<c;l++){var h=u[l];p[h]=h}r[a]=[Function(["require","module","exports"],"("+t+")(self)"),p]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[a]=a,r[d]=[Function(["require"],"var f = require("+s(a)+");(f.default ? f.default : f)(self);"),g];var m={};n(d);var y="("+i+")({"+Object.keys(m).map(function(t){return s(t)+":["+r[t][0]+","+s(r[t][1])+"]"}).join(",")+"},{},["+s(d)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([y],{type:"text/javascript"});if(e&&e.bare)return _;var x=v.createObjectURL(_),b=new Worker(x);return b.objectURL=x,b}},{}],217:[function(e,n,i){!function(e,r){"object"==typeof i&&"undefined"!=typeof n?r(i):"function"==typeof t&&t.amd?t(["exports"],r):r(e.WhooTS=e.WhooTS||{})}(this,function(t){function e(t,e,i,r,o,s){s=s||{};var a=t+"?"+["bbox="+n(i,r,o),"format="+(s.format||"image/png"),"service="+(s.service||"WMS"),"version="+(s.version||"1.1.1"),"request="+(s.request||"GetMap"),"srs="+(s.srs||"EPSG:3857"),"width="+(s.width||256),"height="+(s.height||256),"layers="+e].join("&");return a}function n(t,e,n){e=Math.pow(2,n)-e-1;var r=i(256*t,256*e,n),o=i(256*(t+1),256*(e+1),n);return r[0]+","+r[1]+","+o[0]+","+o[1]}function i(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n),r=t*i-2*Math.PI*6378137/2,o=e*i-2*Math.PI*6378137/2;return[r,o]}t.getURL=e,t.getTileBBox=n,t.getMercCoords=i,Object.defineProperty(t,"__esModule",{value:!0})})},{}],218:[function(t,e,n){e.exports={version:"0.32.1"}},{}]},{},[24])(24)})},function(t,e,n){"use strict";var i=n(648),r=n(205)("mapboxGLHelperMixin"),o={};"undefined"!=typeof window&&(o=n(646));var s={getBounds:function(){if(this.map)return this.map.getBounds().toArray()},getPosition:function(){if(this.map){var t=this.map.getCenter(),e=this.map.getZoom();return{zoom:e,lng:t.lng,lat:t.lat}}},updatePosition:function(){r("("+this.state.id+") UPDATE POSITION");var t=this.map;t.setView(this.state.map.position.center,this.state.map.position.zoom,{animate:!1})},flyTo:function(t,e){this.map.flyTo({center:t,zoom:e})},getBoundsObject:function(t){var e=new o.LngLat(t[0],t[1]),n=new o.LngLat(t[2],t[3]);return new o.LngLatBounds(e,n)},fitBounds:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=new o.LngLat(t[0],t[1]),s=new o.LngLat(t[2],t[3]),a=new o.LngLatBounds(r,s);this.map.fitBounds(a,{padding:n,curve:1,speed:.6,maxZoom:e,animate:i})},changeLocale:function(t,e){var n=["en","fr","es","de","de","ru","zh"],o=i(n,t);o||(t="en"),r("("+this.state.id+") changing map language to: "+t);try{e.setLayoutProperty("country-label-lg","text-field","{name_"+t+"}"),e.setLayoutProperty("country-label-md","text-field","{name_"+t+"}"),e.setLayoutProperty("country-label-sm","text-field","{name_"+t+"}"),e.setLayoutProperty("state-label-lg","text-field","{name_"+t+"}"),e.setLayoutProperty("marine_label_point_other","text-field","{name_"+t+"}"),e.setLayoutProperty("marine_label_point_3","text-field","{name_"+t+"}"),e.setLayoutProperty("marine_label_point_2","text-field","{name_"+t+"}"),e.setLayoutProperty("marine_label_point_1","text-field","{name_"+t+"}"),e.setLayoutProperty("marine_label_line_other","text-field","{name_"+t+"}"),e.setLayoutProperty("marine_label_line_3","text-field","{name_"+t+"}"),e.setLayoutProperty("marine_label_line_2","text-field","{name_"+t+"}"),e.setLayoutProperty("marine_label_line_1","text-field","{name_"+t+"}"),e.setLayoutProperty("place_label_neighborhood","text-field","{name_"+t+"}"),e.setLayoutProperty("place_label_other","text-field","{name_"+t+"}"),e.setLayoutProperty("place_label_city_small_s","text-field","{name_"+t+"}"),e.setLayoutProperty("place_label_city_small_n","text-field","{name_"+t+"}"),e.setLayoutProperty("place_label_city_medium_s","text-field","{name_"+t+"}"),e.setLayoutProperty("place_label_city_medium_n","text-field","{name_"+t+"}"),e.setLayoutProperty("place_label_city_large_s","text-field","{name_"+t+"}"),e.setLayoutProperty("place_label_city_large_n","text-field","{name_"+t+"}"),e.setLayoutProperty("road-label-sm","text-field","{name_"+t+"}"),e.setLayoutProperty("road-label-med","text-field","{name_"+t+"}"),e.setLayoutProperty("road-label-large","text-field","{name_"+t+"}"),e.setLayoutProperty("airport-label","text-field","{name_"+t+"}"),e.setLayoutProperty("poi-parks-scalerank1","text-field","{name_"+t+"}"),e.setLayoutProperty("poi-scalerank1","text-field","{name_"+t+"}"),e.setLayoutProperty("waterway-label","text-field","{name_"+t+"}"),e.setLayoutProperty("water-label","text-field","{name_"+t+"}")}catch(t){r(t)}}};t.exports=s},function(t,e){function n(t,e){for(var n=-1,i=t?t.length:0,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function i(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function r(t,e,n){if(e!==e)return i(t,o,n);for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}function o(t){return t!==t}function s(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function a(t,e){return n(e,function(e){return t[e]})}function u(t,e){return function(n){return t(e(n))}}function l(t,e){var n=Z(t)||d(t)?s(t.length,String):[],i=n.length,r=!!i;for(var o in t)!e&&!q.call(t,o)||r&&("length"==o||h(o,i))||n.push(o);return n}function c(t){if(!f(t))return W(t);var e=[];for(var n in Object(t))q.call(t,n)&&"constructor"!=n&&e.push(n);return e}function h(t,e){return e=null==e?L:e,!!e&&("number"==typeof t||V.test(t))&&t>-1&&t%1==0&&t<e}function f(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||U;return t===n}function p(t,e,n,i){t=g(t)?t:T(t),n=n&&!i?S(n):0;var o=t.length;return n<0&&(n=H(o+n,0)),b(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&r(t,e,n)>-1}function d(t){return m(t)&&q.call(t,"callee")&&(!Y.call(t,"callee")||X.call(t)==A)}function g(t){return null!=t&&v(t.length)&&!y(t)}function m(t){return x(t)&&g(t)}function y(t){var e=_(t)?X.call(t):"";return e==R||e==O}function v(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=L}function _(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function x(t){return!!t&&"object"==typeof t}function b(t){return"string"==typeof t||!Z(t)&&x(t)&&X.call(t)==F}function E(t){return"symbol"==typeof t||x(t)&&X.call(t)==D}function w(t){if(!t)return 0===t?t:0;if(t=I(t),t===N||t===-N){var e=t<0?-1:1;return e*M}return t===t?t:0}function S(t){var e=w(t),n=e%1;return e===e?n?e-n:e:0}function I(t){if("number"==typeof t)return t;if(E(t))return P;if(_(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=_(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(z,"");var n=B.test(t);return n||j.test(t)?G(t.slice(2),n?2:8):k.test(t)?P:+t}function C(t){return g(t)?l(t):c(t)}function T(t){return t?a(t,C(t)):[]}var N=1/0,L=9007199254740991,M=1.7976931348623157e308,P=NaN,A="[object Arguments]",R="[object Function]",O="[object GeneratorFunction]",F="[object String]",D="[object Symbol]",z=/^\s+|\s+$/g,k=/^[-+]0x[0-9a-f]+$/i,B=/^0b[01]+$/i,j=/^0o[0-7]+$/i,V=/^(?:0|[1-9]\d*)$/,G=parseInt,U=Object.prototype,q=U.hasOwnProperty,X=U.toString,Y=U.propertyIsEnumerable,W=u(Object.keys,Object),H=Math.max,Z=Array.isArray;t.exports=p},function(t,e,n){"use strict";var i=n(172),r=n(623),o=n(205)("MapInteractionMixin"),s=n(617),a={setSelectionFilter:function(t){var e=this;this.state.glStyle&&this.state.glStyle.layers.forEach(function(n){var i=["in","osm_id"];t.forEach(function(t){i.push(t.properties.osm_id)}),n.id.startsWith("omh-hover-point")?e.map.setFilter(n.id,["all",["in","$type","Point"],i]):n.id.startsWith("omh-hover-line")?e.map.setFilter(n.id,["all",["in","$type","LineString"],i]):n.id.startsWith("omh-hover-polygon")&&e.map.setFilter(n.id,["all",["in","$type","Polygon"],i])})},clearSelectionFilter:function(){var t=this;this.state.glStyle&&this.state.glStyle.layers.forEach(function(e){e.id.startsWith("omh-hover")&&t.map.setFilter(e.id,["==","osm_id",""])})},handleUnselectFeature:function(){this.setState({selected:!1}),this.clearSelection()},clearSelection:function(){this.map.hasClass("selected")&&this.map.removeClass("selected"),this.clearSelectionFilter(),this.setState({selectedFeatures:null})},getInteractiveLayers:function(t){var e=[];return t&&t.layers.forEach(function(t){t.metadata&&t.metadata["maphubs:interactive"]&&(t.id.startsWith("omh")||t.id.startsWith("osm"))&&e.push(t.id)}),e},clickHandler:function(t){var e=this.map,n=this;if(!this.state.enableMeasurementTools)if(!n.state.selected&&n.state.selectedFeatures&&n.state.selectedFeatures.length>0)n.setState({selected:!0});else{i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor","crosshair");var r=e.queryRenderedFeatures([[t.point.x-n.props.interactionBufferSize/2,t.point.y-n.props.interactionBufferSize/2],[t.point.x+n.props.interactionBufferSize/2,t.point.y+n.props.interactionBufferSize/2]],{layers:n.state.interactiveLayers});r.length?(n.state.selected&&n.clearSelection(),n.setSelectionFilter([r[0]]),n.setState({selectedFeatures:[r[0]],selected:!0}),e.addClass("selected")):null!=n.state.selectedFeatures&&(n.clearSelection(),n.setState({selected:!1}),i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor",""))}},moveendHandler:function(t){o("mouse up fired"),this.refs.insetMap&&this.refs.insetMap.updateInsetGeomFromBounds(this.map.getBounds(),this.map.getZoom()),s.updateMapPosition(this.getPosition(),this.getBounds())},mousemoveHandler:function(t){var e=this.map,n=this;if(!this.state.enableMeasurementTools&&!n.state.showBaseMaps){var s=r(function(){n.state.mapLoaded&&n.state.restoreBounds&&(o("("+n.state.id+") clearing restoreBounds"),n.setState({restoreBounds:null}));var r=e.queryRenderedFeatures([[t.point.x-n.props.interactionBufferSize/2,t.point.y-n.props.interactionBufferSize/2],[t.point.x+n.props.interactionBufferSize/2,t.point.y+n.props.interactionBufferSize/2]],{
layers:n.state.interactiveLayers});r.length?n.state.selected?i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor","crosshair"):n.props.hoverInteraction?(i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor","crosshair"),n.setSelectionFilter(r),n.setState({selectedFeatures:r}),e.addClass("selected")):i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor","pointer"):n.state.selected||null==n.state.selectedFeatures?i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor",""):(n.clearSelection(),i(n.refs.map).find(".mapboxgl-canvas-container").css("cursor",""))},300).bind(this);s()}}};t.exports=a},function(t,e,n){"use strict";var i=n(205)("Map/MeasureArea"),r=n(651),o=n(654),s=n(172),a={};"undefined"!=typeof window&&(a=n(655));var u={toggleMeasurementTools:function(t){t&&!this.state.enableMeasurementTools?this.startMeasurementTool():this.state.enableMeasurementTools&&!t&&this.stopMeasurementTool()},startMeasurementTool:function(){var t=this,e=new a({displayControlsDefault:!1,controls:{polygon:!0,line_string:!0,trash:!0}});this.draw=e,s(".mapboxgl-ctrl-top-right").addClass("mapboxgl-ctrl-maphubs-measure-tool"),this.map.addControl(e,"top-right"),this.map.on("draw.create",function(e){i("draw create"),t.updateMeasurement(e)}),this.map.on("draw.update",function(e){i("draw update"),t.updateMeasurement(e)}),this.map.on("draw.delete",function(){i("draw delete"),t.setState({measurementMessage:t.__("Use the drawing tools above")})}),this.setState({enableMeasurementTools:!0,measurementMessage:this.__("Use the drawing tools above")})},stopMeasurementTool:function(){s(".mapboxgl-ctrl-top-right").removeClass("mapboxgl-ctrl-maphubs-measure-tool"),this.map.removeControl(this.draw),this.setState({enableMeasurementTools:!1,measurementMessage:""})},updateMeasurement:function(){var t=this.draw.getAll();if(t.features.length>0){var e={type:"FeatureCollection",features:[]},n={type:"FeatureCollection",features:[]};if(t.features.forEach(function(t){"Polygon"===t.geometry.type?n.features.push(t):"LineString"===t.geometry.type&&e.features.push(t)}),n.features.length>0){var i=r(n),s=Math.round(100*i)/100,a=1e-6*i,u=s/1e4,l=this.__("Total area: ");l=s<1e3?l+s.toLocaleString()+"m2 ":l+a.toLocaleString()+"km2 ",l=l+u.toLocaleString()+"ha",this.setState({measurementMessage:l})}else if(e.features.length>0){var c=0;e.features.forEach(function(t){c+=o(t)});var h=.621371*c,f="Total distance: "+c.toLocaleString()+"km "+h.toLocaleString()+"mi";this.setState({measurementMessage:f})}}}};t.exports=u},function(t,e,n){function i(t){if("FeatureCollection"===t.type){for(var e=0,n=0;e<t.features.length;e++)t.features[e].geometry&&(n+=r(t.features[e].geometry));return n}return r("Feature"===t.type?t.geometry:t)}var r=n(652).geometry;t.exports=i},function(t,e,n){function i(t){var e,n=0;switch(t.type){case"Polygon":return r(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=r(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=i(t.geometries[e]);return n}}function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(o(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(o(t[n]))}return e}function o(t){var e,n,i,r,o,u,l,c=0,h=t.length;if(h>2){for(l=0;l<h;l++)l===h-2?(r=h-2,o=h-1,u=0):l===h-1?(r=h-1,o=0,u=1):(r=l,o=l+1,u=l+2),e=t[r],n=t[o],i=t[u],c+=(s(i[0])-s(e[0]))*Math.sin(s(n[1]));c=c*a.RADIUS*a.RADIUS/2}return c}function s(t){return t*Math.PI/180}var a=n(653);t.exports.geometry=i,t.exports.ring=o},function(t,e){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},function(t,e,n){function i(t,e){for(var n,i=0,s=o(t[0]),a=o(t[0]),u=1;u<t.length;u++)a.geometry.coordinates=t[u],i+=r(s,a,e),n=s,s=a,a=n;return i}var r=n(624),o=n(620).point;t.exports=function t(e,n){if("FeatureCollection"===e.type)return e.features.reduce(function(e,i){return e+t(i,n)},0);var r,o,s="Feature"===e.type?e.geometry:e;if("LineString"===s.type)return i(s.coordinates,n);if("Polygon"===s.type||"MultiLineString"===s.type){for(r=0,o=0;o<s.coordinates.length;o++)r+=i(s.coordinates[o],n);return r}if("MultiPolygon"===s.type){for(r=0,o=0;o<s.coordinates.length;o++)for(var a=0;a<s.coordinates[o].length;a++)r+=i(s.coordinates[o][a],n);return r}throw new Error("input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry (or a FeatureCollection containing only those types)")}},function(t,e){!function(n){if("object"==typeof e&&"undefined"!=typeof t)t.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.MapboxDraw=n()}}(function(){return function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";var i=t("./src/setup"),r=t("./src/options"),o=t("./src/api"),s=t("./src/constants"),a=function(t,e){t=r(t);var n={options:t};e=o(n,e),n.api=e;var a=i(n);return e.onAdd=a.onAdd,e.onRemove=a.onRemove,e.types=s.types,e.options=t,e};e.exports=function(t){a(t,this)}},{"./src/api":23,"./src/constants":24,"./src/options":58,"./src/setup":60}],2:[function(t,e,n){},{}],3:[function(t,e,n){(function(t){function e(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};n.resolve=function(){for(var n="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,r="/"===s.charAt(0))}return n=e(i(n.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+n||"."},n.normalize=function(t){var r=n.isAbsolute(t),o="/"===s(t,-1);return t=e(i(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var r=i(t.split("/")),o=i(e.split("/")),s=Math.min(r.length,o.length),a=s,u=0;u<s;u++)if(r[u]!==o[u]){a=u;break}for(var l=[],u=a;u<r.length;u++)l.push("..");return l=l.concat(o.slice(a)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:4}],4:[function(t,e,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function s(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){m&&d&&(m=!1,d.length?g=d.concat(g):y=-1,g.length&&u())}function u(){if(!m){var t=o(a);m=!0;for(var e=g.length;e;){for(d=g,g=[];++y<e;)d&&d[y].run();y=-1,e=g.length}d=null,m=!1,s(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var h,f,p=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(t){h=i}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var d,g=[],m=!1,y=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];g.push(new l(t,e)),1!==g.length||m||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],5:[function(t,e,n){function r(t){var e,n=0;switch(t.type){case"Polygon":return o(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=o(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=r(t.geometries[e]);return n}}function o(t){var e=0;if(t&&t.length>0){e+=Math.abs(s(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(s(t[n]))}return e}function s(t){var e,n,r,o,s,l,c=0,h=t.length;if(h>2){for(i=0;i<h;i++)i===h-2?(o=h-2,s=h-1,l=0):i===h-1?(o=h-1,s=0,l=1):(o=i,s=i+1,l=i+2),e=t[o],n=t[s],r=t[l],c+=(a(r[0])-a(e[0]))*Math.sin(a(n[1]));c=c*u.RADIUS*u.RADIUS/2}return c}function a(t){return t*Math.PI/180}var u=t("wgs84");e.exports.geometry=r,e.exports.ring=s},{wgs84:6}],6:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],7:[function(t,e,n){function i(t){for(var e=s(),n=r(t),i=0;i<n.length;i++)e.include(n[i]);return e}var r=t("geojson-coords"),o=t("traverse"),s=t("extent");e.exports=function(t){return i(t).bbox()},e.exports.polygon=function(t){return i(t).polygon()},e.exports.bboxify=function(t){return o(t).map(function(t){t&&"string"==typeof t.type&&(t.bbox=i(t).bbox(),this.update(t))})}},{extent:8,"geojson-coords":10,traverse:13}],8:[function(t,e,n){function i(){return this instanceof i?(this._bbox=[1/0,1/0,-(1/0),-(1/0)],void(this._valid=!1)):new i}e.exports=i,i.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},i.prototype.union=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this},i.prototype.bbox=function(){return this._valid?this._bbox:null},i.prototype.contains=function(t){return this._valid?this._bbox[0]<=t[0]&&this._bbox[1]<=t[1]&&this._bbox[2]>=t[0]&&this._bbox[3]>=t[1]:null},i.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},{}],9:[function(t,e,n){e.exports=function(t,e){function n(t){return Array.isArray(t)&&t.length&&"number"==typeof t[0]?[t]:t.reduce(function(t,e){return Array.isArray(e)&&Array.isArray(e[0])?t.concat(n(e)):(t.push(e),t)},[])}return n(t)}},{}],10:[function(t,e,n){var i=t("geojson-normalize"),r=t("geojson-flatten"),o=t("./flatten");e.exports=function(t){if(!t)return[];var e=r(i(t)),n=[];return e.features.forEach(function(t){t.geometry&&(n=n.concat(o(t.geometry.coordinates)))}),n}},{"./flatten":9,"geojson-flatten":11,"geojson-normalize":12}],11:[function(t,e,n){function i(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce(function(t,e){return t.concat(i(e))},[]),t;case"Feature":return i(t.geometry).map(function(e){return{type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e}});case"MultiPoint":return t.coordinates.map(function(t){return{type:"Point",coordinates:t}});case"MultiPolygon":return t.coordinates.map(function(t){return{type:"Polygon",coordinates:t}});case"MultiLineString":return t.coordinates.map(function(t){return{type:"LineString",coordinates:t}});case"GeometryCollection":return t.geometries;case"Point":case"Polygon":case"LineString":return[t];default:return t}}e.exports=i},{}],12:[function(t,e,n){function i(t){if(!t||!t.type)return null;var e=r[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null}e.exports=i;var r={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],13:[function(t,e,n){function i(t){this.value=t}function r(t,e,n){var i=[],r=[],s=!0;return function t(a){function u(){if("object"==typeof f.node&&null!==f.node){f.keys&&f.node_===f.node||(f.keys=d(f.node)),f.isLeaf=0==f.keys.length;for(var t=0;t<r.length;t++)if(r[t].node_===a){f.circular=r[t];break}}else f.isLeaf=!0,f.keys=null;f.notLeaf=!f.isLeaf,f.notRoot=!f.isRoot}var l=n?o(a):a,c={},h=!0,f={node:l,node_:a,path:[].concat(i),parent:r[r.length-1],parents:r,key:i.slice(-1)[0],isRoot:0===i.length,level:i.length,circular:null,update:function(t,e){f.isRoot||(f.parent.node[f.key]=t),f.node=t,e&&(h=!1)},delete:function(t){delete f.parent.node[f.key],t&&(h=!1)},remove:function(t){g(f.parent.node)?f.parent.node.splice(f.key,1):delete f.parent.node[f.key],t&&(h=!1)},keys:null,before:function(t){c.before=t},after:function(t){c.after=t},pre:function(t){c.pre=t},post:function(t){c.post=t},stop:function(){s=!1},block:function(){h=!1}};if(!s)return f;u();var p=e.call(f,f.node);return void 0!==p&&f.update&&f.update(p),c.before&&c.before.call(f,f.node),h?("object"!=typeof f.node||null===f.node||f.circular||(r.push(f),u(),m(f.keys,function(e,r){i.push(e),c.pre&&c.pre.call(f,f.node[e],e);var o=t(f.node[e]);n&&y.call(f.node,e)&&(f.node[e]=o.node),o.isLast=r==f.keys.length-1,o.isFirst=0==r,c.post&&c.post.call(f,o),i.pop()}),r.pop()),c.after&&c.after.call(f,f.node),f):f}(t).node}function o(t){if("object"==typeof t&&null!==t){var e;if(g(t))e=[];else if(a(t))e=new Date(t.getTime?t.getTime():t);else if(u(t))e=new RegExp(t);else if(l(t))e={message:t.message};else if(c(t))e=new Boolean(t);else if(h(t))e=new Number(t);else if(f(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var n=t.constructor&&t.constructor.prototype||t.__proto__||{},i=function(){};i.prototype=n,e=new i}return m(d(t),function(n){e[n]=t[n]}),e}return t}function s(t){return Object.prototype.toString.call(t)}function a(t){return"[object Date]"===s(t)}function u(t){return"[object RegExp]"===s(t)}function l(t){return"[object Error]"===s(t)}function c(t){return"[object Boolean]"===s(t)}function h(t){return"[object Number]"===s(t)}function f(t){return"[object String]"===s(t)}var p=e.exports=function(t){return new i(t)};i.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var i=t[n];if(!e||!y.call(e,i)){e=void 0;break}e=e[i]}return e},i.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var i=t[n];if(!e||!y.call(e,i))return!1;e=e[i]}return!0},i.prototype.set=function(t,e){for(var n=this.value,i=0;i<t.length-1;i++){var r=t[i];y.call(n,r)||(n[r]={}),n=n[r]}return n[t[i]]=e,e},i.prototype.map=function(t){return r(this.value,t,!0)},i.prototype.forEach=function(t){return this.value=r(this.value,t,!1),this.value},i.prototype.reduce=function(t,e){var n=1===arguments.length,i=n?this.value:e;return this.forEach(function(e){this.isRoot&&n||(i=t.call(this,i,e))}),i},i.prototype.paths=function(){var t=[];return this.forEach(function(e){t.push(this.path)}),t},i.prototype.nodes=function(){var t=[];return this.forEach(function(e){t.push(this.node)}),t},i.prototype.clone=function(){var t=[],e=[];return function n(i){for(var r=0;r<t.length;r++)if(t[r]===i)return e[r];if("object"==typeof i&&null!==i){var s=o(i);return t.push(i),e.push(s),m(d(i),function(t){s[t]=n(i[t])}),t.pop(),e.pop(),s}return i}(this.value)};var d=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},m=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};m(d(i.prototype),function(t){p[t]=function(e){var n=[].slice.call(arguments,1),r=new i(e);return r[t].apply(r,n)}});var y=Object.hasOwnProperty||function(t,e){return e in t}},{}],14:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],15:[function(t,e,n){function i(t,e){var n,i=[];if("object"==typeof t)n=t;else{if("string"!=typeof t)return[{message:"Expected string or object as input",line:0}];try{n=r.parse(t)}catch(t){var s=t.message.match(/line (\d+)/),a=parseInt(s[1],10);return[{line:a-1,message:t.message,error:t}]}}return i=i.concat(o.hint(n,e))}var r=t("jsonlint-lines"),o=t("./object");e.exports.hint=i},{"./object":16,"jsonlint-lines":18}],16:[function(t,e,n){function i(t,e){function n(t){if(e&&e.noDuplicateMembers===!1||!t.__duplicateProperties__||x.push({message:"An object contained duplicate members, making parsing ambigous: "+t.__duplicateProperties__.join(", "),line:t.__line__}),!o(t,"type","string"))if(S[t.type])t&&S[t.type](t);else{var n=I[t.type.toLowerCase()];void 0!==n?x.push({message:"Expected "+n+" but got "+t.type+" (case sensitive)",line:t.__line__}):x.push({message:"The type "+t.type+" is unknown",line:t.__line__})}}function i(t,e){return t.every(function(t){return null!==t&&typeof t===e})}function o(t,e,n){if("undefined"==typeof t[e])return x.push({message:'"'+e+'" member required',line:t.__line__});if("array"===n){if(!Array.isArray(t[e]))return x.push({message:'"'+e+'" member should be an array, but is an '+typeof t[e]+" instead",line:t.__line__})}else{if("object"===n&&t[e]&&"Object"!==t[e].constructor.name)return x.push({message:'"'+e+'" member should be '+n+", but is an "+t[e].constructor.name+" instead",line:t.__line__});if(n&&typeof t[e]!==n)return x.push({message:'"'+e+'" member should be '+n+", but is an "+typeof t[e]+" instead",line:t.__line__})}}function s(t){if(l(t),c(t),void 0!==t.properties&&x.push({message:'FeatureCollection object cannot contain a "properties" member',line:t.__line__}),void 0!==t.coordinates&&x.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:t.__line__}),!o(t,"features","array")){if(!i(t.features,"object"))return x.push({message:"Every feature must be an object",line:t.__line__});t.features.forEach(_)}}function a(t,n){if(!Array.isArray(t))return x.push({message:"position should be an array, is a "+typeof t+" instead",line:t.__line__||n});if(t.length<2)return x.push({message:"position must have 2 or more elements",line:t.__line__||n});if(t.length>3)return x.push({message:"position should not have more than 3 elements",line:t.__line__||n});if(!i(t,"number"))return x.push({message:"each element in a position must be a number",line:t.__line__||n});if(e&&e.precisionWarning){if(b===E)return b+=1,x.push({message:"truncated warnings: we've encountered coordinate precision warning "+E+" times, no more warnings will be reported",level:"message",line:t.__line__||n});b<E&&t.forEach(function(e){var i=0,r=String(e).split(".")[1];if(void 0!==r&&(i=r.length),i>w)return b+=1,x.push({message:"precision of coordinates should be reduced",level:"message",line:t.__line__||n})})}}function u(t,e,n,i){if(void 0===i&&void 0!==t.__line__&&(i=t.__line__),0===n)return a(t,i);if(1===n&&e)if("LinearRing"===e){if(!Array.isArray(t[t.length-1]))return x.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:i}),!0;if(t.length<4&&x.push({message:"a LinearRing of coordinates needs to have four or more positions",line:i}),t.length&&(t[t.length-1].length!==t[0].length||!t[t.length-1].every(function(e,n){return t[0][n]===e})))return x.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:i}),!0}else if("Line"===e&&t.length<2)return x.push({message:"a line needs to have two or more coordinates to be valid",line:i});if(Array.isArray(t)){var r=t.map(function(t){return u(t,e,n-1,t.__line__||i)});return r.some(function(t){return t})}x.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:i})}function l(t){if(t.crs){var e="urn:ogc:def:crs:OGC:1.3:CRS84";"object"==typeof t.crs&&t.crs.properties&&t.crs.properties.name===e?x.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:t.__line__}):x.push({message:"old-style crs member is not recommended",line:t.__line__})}}function c(t){if(t.bbox)return Array.isArray(t.bbox)?(i(t.bbox,"number")||x.push({message:"each element in a bbox member must be a number",line:t.bbox.__line__}),4!==t.bbox.length&&6!==t.bbox.length&&x.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:t.bbox.__line__}),x.length):void x.push({message:"bbox member must be an array of numbers, but is a "+typeof t.bbox,line:t.__line__})}function h(t){void 0!==t.properties&&x.push({message:'geometry object cannot contain a "properties" member',line:t.__line__}),void 0!==t.geometry&&x.push({message:'geometry object cannot contain a "geometry" member',line:t.__line__}),void 0!==t.features&&x.push({message:'geometry object cannot contain a "features" member',line:t.__line__})}function f(t){l(t),c(t),h(t),o(t,"coordinates","array")||a(t.coordinates)}function p(t){l(t),c(t),o(t,"coordinates","array")||u(t.coordinates,"LinearRing",2)||r(t,x)}function d(t){l(t),c(t),o(t,"coordinates","array")||u(t.coordinates,"LinearRing",3)||r(t,x)}function g(t){l(t),c(t),o(t,"coordinates","array")||u(t.coordinates,"Line",1)}function m(t){l(t),c(t),o(t,"coordinates","array")||u(t.coordinates,"Line",2)}function y(t){l(t),c(t),o(t,"coordinates","array")||u(t.coordinates,"",1)}function v(t){l(t),c(t),o(t,"geometries","array")||(i(t.geometries,"object")||x.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:t.__line__}),1===t.geometries.length&&x.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:t.geometries.__line__}),t.geometries.forEach(function(e){e&&("GeometryCollection"===e.type&&x.push({message:"GeometryCollection should avoid nested geometry collections",line:t.geometries.__line__}),n(e))}))}function _(t){l(t),c(t),void 0!==t.id&&"string"!=typeof t.id&&"number"!=typeof t.id&&x.push({message:'Feature "id" member must have a string or number value',line:t.__line__}),void 0!==t.features&&x.push({message:'Feature object cannot contain a "features" member',line:t.__line__}),void 0!==t.coordinates&&x.push({message:'Feature object cannot contain a "coordinates" member',line:t.__line__}),"Feature"!==t.type&&x.push({message:"GeoJSON features must have a type=feature member",line:t.__line__}),o(t,"properties","object"),o(t,"geometry","object")||t.geometry&&n(t.geometry)}var x=[],b=0,E=10,w=6,S={Point:f,Feature:_,MultiPoint:y,LineString:g,MultiLineString:m,FeatureCollection:s,GeometryCollection:v,Polygon:p,MultiPolygon:d},I=Object.keys(S).reduce(function(t,e){return t[e.toLowerCase()]=e,t},{});return"object"!=typeof t||null===t||void 0===t?(x.push({message:"The root of a GeoJSON object must be an object.",line:0}),x):(n(t),x.forEach(function(t){({}).hasOwnProperty.call(t,"line")&&void 0===t.line&&delete t.line}),x)}var r=t("./rhr");e.exports.hint=i},{"./rhr":17}],17:[function(t,e,n){function i(t){return t*Math.PI/180}function r(t){var e=0;if(t.length>2)for(var n,r,o=0;o<t.length-1;o++)n=t[o],r=t[o+1],e+=i(r[0]-n[0])*(2+Math.sin(i(n[1]))+Math.sin(i(r[1])));return e>=0}function o(t){if(t&&t.length>0){if(r(t[0]))return!1;var e=t.slice(1,t.length);if(!e.every(r))return!1}return!0}function s(t){return"Polygon"===t.type?o(t.coordinates):"MultiPolygon"===t.type?t.coordinates.every(o):void 0}e.exports=function(t,e){s(t)||e.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:t.__line__})}},{}],18:[function(t,e,n){(function(i){var r=function(){function t(){this.yy={}}var e=function(t,e,n,i){for(n=n||{},i=t.length;i--;n[t[i]]=e);return n},n=[1,12],i=[1,13],r=[1,9],o=[1,10],s=[1,11],a=[1,14],u=[1,15],l=[14,18,22,24],c=[18,22],h=[22,24],f={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,i,r,o,s){var a=o.length-1;switch(r){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=o[a-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[a-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[a-2],o[a]];break;case 16:this.$={},this.$[o[a][0]]=o[a][1];break;case 17:this.$=o[a-2],void 0!==o[a-2][o[a][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(o[a][0])),o[a-2][o[a][0]]=o[a][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[a]];break;case 21:this.$=o[a-2],o[a-2].push(o[a])}},table:[{3:5,4:n,5:6,6:i,7:3,8:r,9:4,10:o,11:s,12:1,13:2,15:7,16:8,17:a,23:u},{1:[3]},{14:[1,16]},e(l,[2,7]),e(l,[2,8]),e(l,[2,9]),e(l,[2,10]),e(l,[2,11]),e(l,[2,12]),e(l,[2,3]),e(l,[2,4]),e(l,[2,5]),e([14,18,21,22,24],[2,1]),e(l,[2,2]),{3:20,4:n,18:[1,17],19:18,20:19},{3:5,4:n,5:6,6:i,7:3,8:r,9:4,10:o,11:s,13:23,15:7,16:8,17:a,23:u,24:[1,21],25:22},{1:[2,6]},e(l,[2,13]),{18:[1,24],22:[1,25]},e(c,[2,16]),{21:[1,26]},e(l,[2,18]),{22:[1,28],24:[1,27]},e(h,[2,20]),e(l,[2,14]),{3:20,4:n,20:29},{3:5,4:n,5:6,6:i,7:3,8:r,9:4,10:o,11:s,13:30,15:7,16:8,17:a,23:u},e(l,[2,19]),{3:5,4:n,5:6,6:i,7:3,8:r,9:4,10:o,11:s,13:31,15:7,16:8,17:a,23:u},e(c,[2,17]),e(c,[2,15]),e(h,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){function n(t,e){this.message=t,this.hash=e}if(!e.recoverable)throw n.prototype=Error,new n(t,e);this.trace(t)},parse:function(t){var e=this,n=[0],i=[null],r=[],o=this.table,s="",a=0,u=0,l=0,c=2,h=1,f=r.slice.call(arguments,1),p=Object.create(this.lexer),d={yy:{}};for(var g in this.yy)Object.prototype.hasOwnProperty.call(this.yy,g)&&(d.yy[g]=this.yy[g]);p.setInput(t,d.yy),d.yy.lexer=p,d.yy.parser=this,"undefined"==typeof p.yylloc&&(p.yylloc={});var m=p.yylloc;r.push(m);var y=p.options&&p.options.ranges;"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,_,x,b,E,w,S,I,C,T=function(){var t;return t=p.lex()||h,"number"!=typeof t&&(t=e.symbols_[t]||t),t},N={};;){if(x=n[n.length-1],this.defaultActions[x]?b=this.defaultActions[x]:(null!==v&&"undefined"!=typeof v||(v=T()),b=o[x]&&o[x][v]),"undefined"==typeof b||!b.length||!b[0]){var L="";C=[];for(w in o[x])this.terminals_[w]&&w>c&&C.push("'"+this.terminals_[w]+"'");L=p.showPosition?"Parse error on line "+(a+1)+":\n"+p.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(a+1)+": Unexpected "+(v==h?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(L,{text:p.match,token:this.terminals_[v]||v,line:p.yylineno,loc:m,expected:C})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+v);switch(b[0]){case 1:n.push(v),i.push(p.yytext),r.push(p.yylloc),n.push(b[1]),v=null,_?(v=_,_=null):(u=p.yyleng,s=p.yytext,a=p.yylineno,m=p.yylloc,l>0&&l--);break;case 2:if(S=this.productions_[b[1]][1],N.$=i[i.length-S],N._$={first_line:r[r.length-(S||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(S||1)].first_column,last_column:r[r.length-1].last_column},y&&(N._$.range=[r[r.length-(S||1)].range[0],r[r.length-1].range[1]]),E=this.performAction.apply(N,[s,u,a,d.yy,b[1],i,r].concat(f)),"undefined"!=typeof E)return E;S&&(n=n.slice(0,-1*S*2),i=i.slice(0,-1*S),r=r.slice(0,-1*S)),n.push(this.productions_[b[1]][0]),i.push(N.$),r.push(N._$),I=o[n[n.length-2]][n[n.length-1]],n.push(I);break;case 3:return!0}}return!0}},p=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),
(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),i=t[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in r)this[o]=r[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length;o++)if(n=this._input.match(this.rules[r[o]]),n&&(!e||n[0].length>e[0].length)){if(e=n,i=o,this.options.backtrack_lexer){if(t=this.test_match(n,r[o]),t!==!1)return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?(t=this.test_match(e,r[i]),t!==!1&&t):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,i){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return t}();return f.lexer=p,t.prototype=f,f.Parser=t,new t}();"undefined"!=typeof t&&"undefined"!=typeof n&&(n.parser=r,n.Parser=r.Parser,n.parse=function(){return r.parse.apply(r,arguments)},n.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),i.exit(1));var r=t("fs").readFileSync(t("path").normalize(e[1]),"utf8");return n.parser.parse(r)},"undefined"!=typeof e&&t.main===e&&n.main(i.argv.slice(1)))}).call(this,t("_process"))},{_process:4,fs:2,path:3}],19:[function(t,e,n){var i=e.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),t<=0)return"0";for(var n=Math.log(Math.pow(2,t))/Math.log(e),r=2;n===1/0;r*=2)n=Math.log(Math.pow(2,t/r))/Math.log(e)*r;for(var o=n-Math.floor(n),s="",r=0;r<Math.floor(n);r++){var a=Math.floor(Math.random()*e).toString(e);s=a+s}if(o){var u=Math.pow(e,o),a=Math.floor(Math.random()*u).toString(e);s=a+s}var l=parseInt(s,e);return l!==1/0&&l>=Math.pow(2,t)?i(t,e):s};i.rack=function(t,e,n){var r=function(r){var s=0;do{if(s++>10){if(!n)throw new Error("too many ID collisions, use more bits");t+=n}var a=i(t,e)}while(Object.hasOwnProperty.call(o,a));return o[a]=r,a},o=r.hats={};return r.get=function(t){return r.hats[t]},r.set=function(t,e){return r.hats[t]=e,r},r.bits=t||128,r.base=e||16,r}},{}],20:[function(t,e,n){(function(t){function i(t,e){for(var n=-1,i=t?t.length:0;++n<i;)if(e(t[n],n,t))return!0;return!1}function r(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function o(t){return function(e){return t(e)}}function s(t,e){return null==t?void 0:t[e]}function a(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function u(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function l(t,e){return function(n){return t(e(n))}}function c(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function h(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function f(){this.__data__=Ee?Ee(null):{}}function p(t){return this.has(t)&&delete this.__data__[t]}function d(t){var e=this.__data__;if(Ee){var n=e[t];return n===pt?void 0:n}return le.call(e,t)?e[t]:void 0}function g(t){var e=this.__data__;return Ee?void 0!==e[t]:le.call(e,t)}function m(t,e){var n=this.__data__;return n[t]=Ee&&void 0===e?pt:e,this}function y(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function v(){this.__data__=[]}function _(t){var e=this.__data__,n=B(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():ge.call(e,n,1),!0}function x(t){var e=this.__data__,n=B(e,t);return n<0?void 0:e[n][1]}function b(t){return B(this.__data__,t)>-1}function E(t,e){var n=this.__data__,i=B(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function w(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function S(){this.__data__={hash:new h,map:new(ve||y),string:new h}}function I(t){return Z(this,t).delete(t)}function C(t){return Z(this,t).get(t)}function T(t){return Z(this,t).has(t)}function N(t,e){return Z(this,t).set(t,e),this}function L(t){var e=-1,n=t?t.length:0;for(this.__data__=new w;++e<n;)this.add(t[e])}function M(t){return this.__data__.set(t,pt),this}function P(t){return this.__data__.has(t)}function A(t){this.__data__=new y(t)}function R(){this.__data__=new y}function O(t){return this.__data__.delete(t)}function F(t){return this.__data__.get(t)}function D(t){return this.__data__.has(t)}function z(t,e){var n=this.__data__;if(n instanceof y){var i=n.__data__;if(!ve||i.length<ft-1)return i.push([t,e]),this;n=this.__data__=new w(i)}return n.set(t,e),this}function k(t,e){var n=Pe(t)||it(t)?r(t.length,String):[],i=n.length,o=!!i;for(var s in t)!e&&!le.call(t,s)||o&&("length"==s||$(s,i))||n.push(s);return n}function B(t,e){for(var n=t.length;n--;)if(nt(t[n][0],e))return n;return-1}function j(t){return ce.call(t)}function V(t,e,n,i,r){return t===e||(null==t||null==e||!lt(t)&&!ct(e)?t!==t&&e!==e:G(t,e,V,n,i,r))}function G(t,e,n,i,r,o){var s=Pe(t),u=Pe(e),l=vt,c=vt;s||(l=Me(t),l=l==yt?Ct:l),u||(c=Me(e),c=c==yt?Ct:c);var h=l==Ct&&!a(t),f=c==Ct&&!a(e),p=l==c;if(p&&!h)return o||(o=new A),s||Ae(t)?Y(t,e,n,i,r,o):W(t,e,l,n,i,r,o);if(!(r&gt)){var d=h&&le.call(t,"__wrapped__"),g=f&&le.call(e,"__wrapped__");if(d||g){var m=d?t.value():t,y=g?e.value():e;return o||(o=new A),n(m,y,i,r,o)}}return!!p&&(o||(o=new A),H(t,e,n,i,r,o))}function U(t){if(!lt(t)||Q(t))return!1;var e=at(t)||a(t)?he:Xt;return e.test(et(t))}function q(t){return ct(t)&&ut(t.length)&&!!Wt[ce.call(t)]}function X(t){if(!tt(t))return me(t);var e=[];for(var n in Object(t))le.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Y(t,e,n,r,o,s){var a=o&gt,u=t.length,l=e.length;if(u!=l&&!(a&&l>u))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var h=-1,f=!0,p=o&dt?new L:void 0;for(s.set(t,e),s.set(e,t);++h<u;){var d=t[h],g=e[h];if(r)var m=a?r(g,d,h,e,t,s):r(d,g,h,t,e,s);if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!i(e,function(t,e){if(!p.has(e)&&(d===t||n(d,t,r,o,s)))return p.add(e)})){f=!1;break}}else if(d!==g&&!n(d,g,r,o,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function W(t,e,n,i,r,o,s){switch(n){case Ot:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Rt:return!(t.byteLength!=e.byteLength||!i(new pe(t),new pe(e)));case _t:case xt:case It:return nt(+t,+e);case bt:return t.name==e.name&&t.message==e.message;case Nt:case Mt:return t==e+"";case St:var a=u;case Lt:var l=o&gt;if(a||(a=c),t.size!=e.size&&!l)return!1;var h=s.get(t);if(h)return h==e;o|=dt,s.set(t,e);var f=Y(a(t),a(e),i,r,o,s);return s.delete(t),f;case Pt:if(Le)return Le.call(t)==Le.call(e)}return!1}function H(t,e,n,i,r,o){var s=r&gt,a=ht(t),u=a.length,l=ht(e),c=l.length;if(u!=c&&!s)return!1;for(var h=u;h--;){var f=a[h];if(!(s?f in e:le.call(e,f)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var d=!0;o.set(t,e),o.set(e,t);for(var g=s;++h<u;){f=a[h];var m=t[f],y=e[f];if(i)var v=s?i(y,m,f,e,t,o):i(m,y,f,t,e,o);if(!(void 0===v?m===y||n(m,y,i,r,o):v)){d=!1;break}g||(g="constructor"==f)}if(d&&!g){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x)&&(d=!1)}return o.delete(t),o.delete(e),d}function Z(t,e){var n=t.__data__;return K(e)?n["string"==typeof e?"string":"hash"]:n.map}function J(t,e){var n=s(t,e);return U(n)?n:void 0}function $(t,e){return e=null==e?mt:e,!!e&&("number"==typeof t||Yt.test(t))&&t>-1&&t%1==0&&t<e}function K(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Q(t){return!!ae&&ae in t}function tt(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||oe;return t===n}function et(t){if(null!=t){try{return ue.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function nt(t,e){return t===e||t!==t&&e!==e}function it(t){return ot(t)&&le.call(t,"callee")&&(!de.call(t,"callee")||ce.call(t)==yt)}function rt(t){return null!=t&&ut(t.length)&&!at(t)}function ot(t){return ct(t)&&rt(t)}function st(t,e){return V(t,e)}function at(t){var e=lt(t)?ce.call(t):"";return e==Et||e==wt}function ut(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=mt}function lt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function ct(t){return!!t&&"object"==typeof t}function ht(t){return rt(t)?k(t):X(t)}var ft=200,pt="__lodash_hash_undefined__",dt=1,gt=2,mt=9007199254740991,yt="[object Arguments]",vt="[object Array]",_t="[object Boolean]",xt="[object Date]",bt="[object Error]",Et="[object Function]",wt="[object GeneratorFunction]",St="[object Map]",It="[object Number]",Ct="[object Object]",Tt="[object Promise]",Nt="[object RegExp]",Lt="[object Set]",Mt="[object String]",Pt="[object Symbol]",At="[object WeakMap]",Rt="[object ArrayBuffer]",Ot="[object DataView]",Ft="[object Float32Array]",Dt="[object Float64Array]",zt="[object Int8Array]",kt="[object Int16Array]",Bt="[object Int32Array]",jt="[object Uint8Array]",Vt="[object Uint8ClampedArray]",Gt="[object Uint16Array]",Ut="[object Uint32Array]",qt=/[\\^$.*+?()[\]{}|]/g,Xt=/^\[object .+?Constructor\]$/,Yt=/^(?:0|[1-9]\d*)$/,Wt={};Wt[Ft]=Wt[Dt]=Wt[zt]=Wt[kt]=Wt[Bt]=Wt[jt]=Wt[Vt]=Wt[Gt]=Wt[Ut]=!0,Wt[yt]=Wt[vt]=Wt[Rt]=Wt[_t]=Wt[Ot]=Wt[xt]=Wt[bt]=Wt[Et]=Wt[St]=Wt[It]=Wt[Ct]=Wt[Nt]=Wt[Lt]=Wt[Mt]=Wt[At]=!1;var Ht="object"==typeof t&&t&&t.Object===Object&&t,Zt="object"==typeof self&&self&&self.Object===Object&&self,Jt=Ht||Zt||Function("return this")(),$t="object"==typeof n&&n&&!n.nodeType&&n,Kt=$t&&"object"==typeof e&&e&&!e.nodeType&&e,Qt=Kt&&Kt.exports===$t,te=Qt&&Ht.process,ee=function(){try{return te&&te.binding("util")}catch(t){}}(),ne=ee&&ee.isTypedArray,ie=Array.prototype,re=Function.prototype,oe=Object.prototype,se=Jt["__core-js_shared__"],ae=function(){var t=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ue=re.toString,le=oe.hasOwnProperty,ce=oe.toString,he=RegExp("^"+ue.call(le).replace(qt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fe=Jt.Symbol,pe=Jt.Uint8Array,de=oe.propertyIsEnumerable,ge=ie.splice,me=l(Object.keys,Object),ye=J(Jt,"DataView"),ve=J(Jt,"Map"),_e=J(Jt,"Promise"),xe=J(Jt,"Set"),be=J(Jt,"WeakMap"),Ee=J(Object,"create"),we=et(ye),Se=et(ve),Ie=et(_e),Ce=et(xe),Te=et(be),Ne=fe?fe.prototype:void 0,Le=Ne?Ne.valueOf:void 0;h.prototype.clear=f,h.prototype.delete=p,h.prototype.get=d,h.prototype.has=g,h.prototype.set=m,y.prototype.clear=v,y.prototype.delete=_,y.prototype.get=x,y.prototype.has=b,y.prototype.set=E,w.prototype.clear=S,w.prototype.delete=I,w.prototype.get=C,w.prototype.has=T,w.prototype.set=N,L.prototype.add=L.prototype.push=M,L.prototype.has=P,A.prototype.clear=R,A.prototype.delete=O,A.prototype.get=F,A.prototype.has=D,A.prototype.set=z;var Me=j;(ye&&Me(new ye(new ArrayBuffer(1)))!=Ot||ve&&Me(new ve)!=St||_e&&Me(_e.resolve())!=Tt||xe&&Me(new xe)!=Lt||be&&Me(new be)!=At)&&(Me=function(t){var e=ce.call(t),n=e==Ct?t.constructor:void 0,i=n?et(n):void 0;if(i)switch(i){case we:return Ot;case Se:return St;case Ie:return Tt;case Ce:return Lt;case Te:return At}return e});var Pe=Array.isArray,Ae=ne?o(ne):q;e.exports=st}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(t,e,n){"use strict";function i(t,e){this.x=t,this.y=e}e.exports=i,i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=i,this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t}},{}],22:[function(t,e,n){function i(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t}e.exports=i;var r=Object.prototype.hasOwnProperty},{}],23:[function(t,e,n){"use strict";var i=t("lodash.isequal"),r=t("geojson-normalize"),o=t("hat"),s=t("./lib/features_at"),a=t("./lib/string_sets_are_equal"),u=t("geojsonhint"),l=t("./constants"),c=t("./lib/string_set"),h={Polygon:t("./feature_types/polygon"),LineString:t("./feature_types/line_string"),Point:t("./feature_types/point"),MultiPolygon:t("./feature_types/multi_feature"),MultiLineString:t("./feature_types/multi_feature"),MultiPoint:t("./feature_types/multi_feature")};e.exports=function(t,e){return e.modes=l.modes,e.getFeatureIdsAt=function(e){var n=s({point:e},null,t);return n.map(function(t){return t.properties.id})},e.getSelectedIds=function(){return t.store.getSelectedIds()},e.getSelected=function(){return{type:l.geojsonTypes.FEATURE_COLLECTION,features:t.store.getSelectedIds().map(function(e){return t.store.get(e)}).map(function(t){return t.toGeoJSON()})}},e.set=function(n){if(void 0===n.type||n.type!==l.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");var i=t.store.createRenderBatch(),r=t.store.getAllIds().slice(),o=e.add(n),s=new c(o);return r=r.filter(function(t){return!s.has(t)}),r.length&&e.delete(r),i(),o},e.add=function(e){var n=u.hint(e,{precisionWarning:!1}).filter(function(t){return"message"!==t.level});if(n.length)throw new Error(n[0].message);var s=JSON.parse(JSON.stringify(r(e))),a=s.features.map(function(e){if(e.id=e.id||o(),null===e.geometry)throw new Error("Invalid geometry: null");if(void 0===t.store.get(e.id)||t.store.get(e.id).type!==e.geometry.type){var n=h[e.geometry.type];if(void 0===n)throw new Error("Invalid geometry type: "+e.geometry.type+".");var r=new n(t,e);t.store.add(r)}else{var s=t.store.get(e.id);s.properties=e.properties,i(s.getCoordinates(),e.geometry.coordinates)||s.incomingCoords(e.geometry.coordinates)}return e.id});return t.store.render(),a},e.get=function(e){var n=t.store.get(e);if(n)return n.toGeoJSON()},e.getAll=function(){return{type:l.geojsonTypes.FEATURE_COLLECTION,features:t.store.getAll().map(function(t){return t.toGeoJSON()})}},e.delete=function(n){return t.store.delete(n,{silent:!0}),e.getMode()!==l.modes.DIRECT_SELECT||t.store.getSelectedIds().length?t.store.render():t.events.changeMode(l.modes.SIMPLE_SELECT,void 0,{silent:!0}),e},e.deleteAll=function(){return t.store.delete(t.store.getAllIds(),{silent:!0}),e.getMode()===l.modes.DIRECT_SELECT?t.events.changeMode(l.modes.SIMPLE_SELECT,void 0,{silent:!0}):t.store.render(),e},e.changeMode=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n===l.modes.SIMPLE_SELECT&&e.getMode()===l.modes.SIMPLE_SELECT?a(i.featureIds||[],t.store.getSelectedIds())?e:(t.store.setSelected(i.featureIds,{silent:!0}),t.store.render(),e):n===l.modes.DIRECT_SELECT&&e.getMode()===l.modes.DIRECT_SELECT&&i.featureId===t.store.getSelectedIds()[0]?e:(t.events.changeMode(n,i,{silent:!0}),e)},e.getMode=function(){return t.events.getMode()},e.trash=function(){return t.events.trash({silent:!0}),e},e.combineFeatures=function(){return t.events.combineFeatures({silent:!0}),e},e.uncombineFeatures=function(){return t.events.uncombineFeatures({silent:!0}),e},e.setFeatureProperty=function(n,i,r){return t.store.setFeatureProperty(n,i,r),e},e}},{"./constants":24,"./feature_types/line_string":27,"./feature_types/multi_feature":28,"./feature_types/point":29,"./feature_types/polygon":30,"./lib/features_at":38,"./lib/string_set":47,"./lib/string_sets_are_equal":48,"geojson-normalize":14,geojsonhint:15,hat:19,"lodash.isequal":20}],24:[function(t,e,n){"use strict";e.exports={classes:{CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sources:{HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}},{}],25:[function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r,o=t("./lib/mode_handler"),s=t("./lib/get_features_and_set_cursor"),a=t("./lib/is_click"),u=t("./constants"),l=(r={},i(r,u.modes.SIMPLE_SELECT,t("./modes/simple_select")),i(r,u.modes.DIRECT_SELECT,t("./modes/direct_select")),i(r,u.modes.DRAW_POINT,t("./modes/draw_point")),i(r,u.modes.DRAW_LINE_STRING,t("./modes/draw_line_string")),i(r,u.modes.DRAW_POLYGON,t("./modes/draw_polygon")),i(r,u.modes.STATIC,t("./modes/static")),r);e.exports=function(t){function e(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};h.stop();var r=l[e];if(void 0===r)throw new Error(e+" is not valid");c=e;var s=r(t,n);h=o(s,t),i.silent||t.map.fire(u.events.MODE_CHANGE,{mode:e}),t.store.setDirty(),t.store.render()}function n(e){var n=!1;Object.keys(e).forEach(function(t){if(void 0===p[t])throw new Error("Invalid action type");p[t]!==e[t]&&(n=!0),p[t]=e[t]}),n&&t.map.fire(u.events.ACTIONABLE,{actions:p})}var i={},r={},c=u.modes.SIMPLE_SELECT,h=o(l.simple_select(t),t);r.drag=function(e){a(i,{point:e.point,time:(new Date).getTime()})?e.originalEvent.stopPropagation():(t.ui.queueMapClasses({mouse:u.cursors.DRAG}),h.drag(e))},r.mousemove=function(e){var n=void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which;if(1===n)return r.drag(e);var i=s(e,t);e.featureTarget=i,h.mousemove(e)},r.mousedown=function(e){i={time:(new Date).getTime(),point:e.point};var n=s(e,t);e.featureTarget=n,h.mousedown(e)},r.mouseup=function(e){var n=s(e,t);e.featureTarget=n,a(i,{point:e.point,time:(new Date).getTime()})?h.click(e):h.mouseup(e)},r.mouseout=function(t){h.mouseout(t)};var f=function(t){return!(8===t||46===t||t>=48&&t<=57)};r.keydown=function(n){8!==n.keyCode&&46!==n.keyCode||!t.options.controls.trash?f(n.keyCode)?h.keydown(n):49===n.keyCode&&t.options.controls.point?e(u.modes.DRAW_POINT):50===n.keyCode&&t.options.controls.line_string?e(u.modes.DRAW_LINE_STRING):51===n.keyCode&&t.options.controls.polygon&&e(u.modes.DRAW_POLYGON):(n.preventDefault(),h.trash())},r.keyup=function(t){f(t.keyCode)&&h.keyup(t)},r.zoomend=function(){t.store.changeZoom()},r.data=function(e){"style"===e.dataType&&!function(){var e=t.setup,n=t.map,i=t.options,r=t.store,o=!!i.styles.find(function(t){return n.getLayer(t.id)});o||(e.addLayers(),r.setDirty(),r.render())}()};var p={trash:!1,combineFeatures:!1,uncombineFeatures:!1},d={changeMode:e,actionable:n,currentModeName:function(){return c},currentModeRender:function(t,e){return h.render(t,e)},fire:function(t,e){r[t]&&r[t](e)},addEventListeners:function(){t.map.on("mousemove",r.mousemove),t.map.on("mousedown",r.mousedown),t.map.on("mouseup",r.mouseup),t.map.on("data",r.data),t.container.addEventListener("mouseout",r.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",r.keydown),t.container.addEventListener("keyup",r.keyup))},removeEventListeners:function(){t.map.off("mousemove",r.mousemove),t.map.off("mousedown",r.mousedown),t.map.off("mouseup",r.mouseup),t.map.off("data",r.data),t.container.removeEventListener("mouseout",r.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",r.keydown),t.container.removeEventListener("keyup",r.keyup))},trash:function(t){h.trash(t)},combineFeatures:function(){h.combineFeatures()},uncombineFeatures:function(){h.uncombineFeatures()},getMode:function(){return c}};return d}},{"./constants":24,"./lib/get_features_and_set_cursor":39,"./lib/is_click":40,"./lib/mode_handler":43,"./modes/direct_select":52,"./modes/draw_line_string":53,"./modes/draw_point":54,"./modes/draw_polygon":55,"./modes/simple_select":56,"./modes/static":57}],26:[function(t,e,n){"use strict";var i=t("hat"),r=t("../constants"),o=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||i(),this.type=e.geometry.type};o.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},o.prototype.incomingCoords=function(t){this.setCoordinates(t)},o.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},o.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},o.prototype.setProperty=function(t,e){this.properties[t]=e},o.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:r.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},o.prototype.internal=function(t){var e={id:this.id,meta:r.meta.FEATURE,"meta:type":this.type,active:r.activeStates.INACTIVE,mode:t};if(this.ctx.options.userProperties)for(var n in this.properties)e["user_"+n]=this.properties[n];return{type:r.geojsonTypes.FEATURE,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}},e.exports=o},{"../constants":24,hat:19}],27:[function(t,e,n){"use strict";var i=t("./feature"),r=function(t,e){i.call(this,t,e)};r.prototype=Object.create(i.prototype),r.prototype.isValid=function(){return this.coordinates.length>1},r.prototype.addCoordinate=function(t,e,n){this.changed();var i=parseInt(t,10);this.coordinates.splice(i,0,[e,n])},r.prototype.getCoordinate=function(t){var e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},r.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},r.prototype.updateCoordinate=function(t,e,n){var i=parseInt(t,10);this.coordinates[i]=[e,n],this.changed()},e.exports=r},{"./feature":26}],28:[function(t,e,n){"use strict";var i=t("./feature"),r=t("../constants"),o=t("hat"),s={MultiPoint:t("./point"),MultiLineString:t("./line_string"),MultiPolygon:t("./polygon")},a=function(t,e,n,i,r){var o=n.split("."),s=parseInt(o[0],10),a=o[1]?o.slice(1).join("."):null;return t[s][e](a,i,r)},u=function(t,e){if(i.call(this,t,e),delete this.coordinates,this.model=s[e.geometry.type],void 0===this.model)throw new TypeError(e.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(e.geometry.coordinates)};u.prototype=Object.create(i.prototype),u.prototype._coordinatesToFeatures=function(t){var e=this,n=this.model.bind(this);return t.map(function(t){return new n(e.ctx,{id:o(),type:r.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:t,type:e.type.replace("Multi","")}})})},u.prototype.isValid=function(){return this.features.every(function(t){return t.isValid()})},u.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},u.prototype.getCoordinate=function(t){return a(this.features,"getCoordinate",t)},u.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(t){return t.type===r.geojsonTypes.POLYGON?t.getCoordinates():t.coordinates})))},u.prototype.updateCoordinate=function(t,e,n){a(this.features,"updateCoordinate",t,e,n),this.changed()},u.prototype.addCoordinate=function(t,e,n){a(this.features,"addCoordinate",t,e,n),this.changed()},u.prototype.removeCoordinate=function(t){a(this.features,"removeCoordinate",t),this.changed()},u.prototype.getFeatures=function(){return this.features},e.exports=u},{"../constants":24,"./feature":26,"./line_string":27,"./point":29,"./polygon":30,hat:19}],29:[function(t,e,n){"use strict";var i=t("./feature"),r=function(t,e){i.call(this,t,e)};r.prototype=Object.create(i.prototype),r.prototype.isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},r.prototype.updateCoordinate=function(t,e,n){3===arguments.length?this.coordinates=[e,n]:this.coordinates=[t,e],this.changed()},r.prototype.getCoordinate=function(){return this.getCoordinates()},e.exports=r},{"./feature":26}],30:[function(t,e,n){"use strict";var i=t("./feature"),r=function(t,e){i.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};r.prototype=Object.create(i.prototype),r.prototype.isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return t.length>2})},r.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},r.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},r.prototype.addCoordinate=function(t,e,n){this.changed();var i=t.split(".").map(function(t){return parseInt(t,10)}),r=this.coordinates[i[0]];r.splice(i[1],0,[e,n])},r.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},r.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},r.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},r.prototype.updateCoordinate=function(t,e,n){this.changed();var i=t.split("."),r=parseInt(i[0],10),o=parseInt(i[1],10);void 0===this.coordinates[r]&&(this.coordinates[r]=[]),this.coordinates[r][o]=[e,n]},e.exports=r},{"./feature":26}],31:[function(t,e,n){"use strict";var i=t("../constants");e.exports={isOfMetaType:function(t){return function(e){var n=e.featureTarget;return!!n&&!!n.properties&&n.properties.meta===t}},isShiftMousedown:function(t){return!!t.originalEvent&&!!t.originalEvent.shiftKey&&0===t.originalEvent.button},isActiveFeature:function(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===i.activeStates.ACTIVE&&t.featureTarget.properties.meta===i.meta.FEATURE},isInactiveFeature:function(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===i.activeStates.INACTIVE&&t.featureTarget.properties.meta===i.meta.FEATURE},noTarget:function(t){return void 0===t.featureTarget},isFeature:function(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.meta===i.meta.FEATURE},isVertex:function(t){var e=t.featureTarget;return!!e&&!!e.properties&&e.properties.meta===i.meta.VERTEX},isShiftDown:function(t){return!!t.originalEvent&&t.originalEvent.shiftKey===!0},isEscapeKey:function(t){return 27===t.keyCode},isEnterKey:function(t){return 13===t.keyCode},true:function(){return!0}}},{"../constants":24}],32:[function(t,e,n){"use strict";var i=t("geojson-extent"),r=t("../constants"),o=r.LAT_MIN,s=r.LAT_MAX,a=r.LAT_RENDERED_MIN,u=r.LAT_RENDERED_MAX,l=r.LNG_MIN,c=r.LNG_MAX;e.exports=function(t,e){var n=o,r=s,h=o,f=s,p=c,d=l;t.forEach(function(t){var e=i(t),o=e[1],s=e[3],a=e[0],u=e[2];o>n&&(n=o),s<r&&(r=s),s>h&&(h=s),o<f&&(f=o),a<p&&(p=a),u>d&&(d=u)});var g=e;return n+g.lat>u&&(g.lat=u-n),h+g.lat>s&&(g.lat=s-h),r+g.lat<a&&(g.lat=a-r),f+g.lat<o&&(g.lat=o-f),p+g.lng<=l&&(g.lng+=360*Math.ceil(Math.abs(g.lng)/360)),d+g.lng>=c&&(g.lng-=360*Math.ceil(Math.abs(g.lng)/360)),g}},{"../constants":24,"geojson-extent":7}],33:[function(t,e,n){"use strict";var i=t("../constants");e.exports=function(t,e,n,r){var o=e.geometry.coordinates,s=n.geometry.coordinates;if(o[1]>i.LAT_RENDERED_MAX||o[1]<i.LAT_RENDERED_MIN||s[1]>i.LAT_RENDERED_MAX||s[1]<i.LAT_RENDERED_MIN)return null;
var a=r.project([o[0],o[1]]),u=r.project([s[0],s[1]]),l=r.unproject([(a.x+u.x)/2,(a.y+u.y)/2]);return{type:i.geojsonTypes.FEATURE,properties:{meta:i.meta.MIDPOINT,parent:t,lng:l.lng,lat:l.lat,coord_path:n.properties.coord_path},geometry:{type:i.geojsonTypes.POINT,coordinates:[l.lng,l.lat]}}}},{"../constants":24}],34:[function(t,e,n){"use strict";function i(t){function e(t,e){var i="",s=null;t.forEach(function(t,a){var l=void 0!==e&&null!==e?e+"."+a:String(a),c=r(p,t,l,n(l));if(u.midpoints&&s){var h=o(p,s,c,u.map);h&&d.push(h)}s=c;var f=JSON.stringify(t);i!==f&&d.push(c),0===a&&(i=f)})}function n(t){return!!u.selectedPaths&&u.selectedPaths.indexOf(t)!==-1}function a(){var e=h.replace(s.geojsonTypes.MULTI_PREFIX,"");f.forEach(function(n,r){var o={type:s.geojsonTypes.FEATURE,properties:t.properties,geometry:{type:e,coordinates:n}};d=d.concat(i(o,u,r))})}var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=t.geometry,h=c.type,f=c.coordinates,p=t.properties&&t.properties.id,d=[];return h===s.geojsonTypes.POINT?d.push(r(p,f,l,n(l))):h===s.geojsonTypes.POLYGON?f.forEach(function(t,n){e(t,null!==l?l+"."+n:String(n))}):h===s.geojsonTypes.LINE_STRING?e(f,l):0===h.indexOf(s.geojsonTypes.MULTI_PREFIX)&&a(),d}var r=t("./create_vertex"),o=t("./create_midpoint"),s=t("../constants");e.exports=i},{"../constants":24,"./create_midpoint":33,"./create_vertex":35}],35:[function(t,e,n){"use strict";var i=t("../constants");e.exports=function(t,e,n,r){return{type:i.geojsonTypes.FEATURE,properties:{meta:i.meta.VERTEX,parent:t,coord_path:n,active:r?i.activeStates.ACTIVE:i.activeStates.INACTIVE},geometry:{type:i.geojsonTypes.POINT,coordinates:e}}}},{"../constants":24}],36:[function(t,e,n){"use strict";e.exports={enable:function(t){setTimeout(function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.enable()},0)},disable:function(t){setTimeout(function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()},0)}}},{}],37:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}},{}],38:[function(t,e,n){"use strict";var i=t("./sort_features"),r=t("./map_event_to_bounding_box"),o=t("../constants"),s=t("./string_set"),a=[o.meta.FEATURE,o.meta.MIDPOINT,o.meta.VERTEX];e.exports=function(t,e,n){if(null===n.map)return[];var o=t?r(t,n.options.clickBuffer):e,u={};n.options.styles&&(u.layers=n.options.styles.map(function(t){return t.id}));var l=n.map.queryRenderedFeatures(o,u).filter(function(t){return a.indexOf(t.properties.meta)!==-1}),c=new s,h=[];return l.forEach(function(t){var e=t.properties.id;c.has(e)||(c.add(e),h.push(t))}),i(h)}},{"../constants":24,"./map_event_to_bounding_box":42,"./sort_features":46,"./string_set":47}],39:[function(t,e,n){"use strict";var i=t("./features_at"),r=t("../constants");e.exports=function(t,e){var n=i(t,null,e),o={mouse:r.cursors.NONE};return n[0]&&(o.mouse=n[0].properties.active===r.activeStates.ACTIVE?r.cursors.MOVE:r.cursors.POINTER,o.feature=n[0].properties.meta),e.events.currentModeName().indexOf("draw")!==-1&&(o.mouse=r.cursors.ADD),e.ui.queueMapClasses(o),e.ui.updateMapClasses(),n[0]}},{"../constants":24,"./features_at":38}],40:[function(t,e,n){"use strict";var i=t("./euclidean_distance"),r=4,o=12,s=500;e.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null!=n.fineTolerance?n.fineTolerance:r,u=null!=n.grossTolerance?n.grossTolerance:o,l=null!=n.interval?n.interval:s;t.point=t.point||e.point,t.time=t.time||e.time;var c=i(t.point,e.point);return c<a||c<u&&e.time-t.time<l}},{"./euclidean_distance":37}],41:[function(t,e,n){"use strict";function i(t,e){return!!t.lngLat&&t.lngLat.lng===e[0]&&t.lngLat.lat===e[1]}e.exports=i},{}],42:[function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]}e.exports=i},{}],43:[function(t,e,n){"use strict";var i=function(t,e){var n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[]},i={on:function(t,e,i){if(void 0===n[t])throw new Error("Invalid event type: "+t);n[t].push({selector:e,fn:i})},render:function(t){e.store.featureChanged(t)}},r=function(t,r){for(var o=n[t],s=o.length;s--;){var a=o[s];if(a.selector(r)){a.fn.call(i,r),e.store.render(),e.ui.updateMapClasses();break}}};return t.start.call(i),{render:t.render,stop:function(){t.stop&&t.stop()},trash:function(){t.trash&&(t.trash(),e.store.render())},combineFeatures:function(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures:function(){t.uncombineFeatures&&t.uncombineFeatures()},drag:function(t){r("drag",t)},click:function(t){r("click",t)},mousemove:function(t){r("mousemove",t)},mousedown:function(t){r("mousedown",t)},mouseup:function(t){r("mouseup",t)},mouseout:function(t){r("mouseout",t)},keydown:function(t){r("keydown",t)},keyup:function(t){r("keyup",t)}}};e.exports=i},{}],44:[function(t,e,n){"use strict";function i(t,e){var n=e.getBoundingClientRect();return new r(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)}var r=t("point-geometry");e.exports=i},{"point-geometry":21}],45:[function(t,e,n){"use strict";var i=t("./constrain_feature_movement"),r=t("../constants");e.exports=function(t,e){var n=i(t.map(function(t){return t.toGeoJSON()}),e);t.forEach(function(t){var e=t.getCoordinates(),i=function(t){var e={lng:t[0]+n.lng,lat:t[1]+n.lat};return[e.lng,e.lat]},o=function(t){return t.map(function(t){return i(t)})},s=function(t){return t.map(function(t){return o(t)})},a=void 0;t.type===r.geojsonTypes.POINT?a=i(e):t.type===r.geojsonTypes.LINE_STRING||t.type===r.geojsonTypes.MULTI_POINT?a=e.map(i):t.type===r.geojsonTypes.POLYGON||t.type===r.geojsonTypes.MULTI_LINE_STRING?a=e.map(o):t.type===r.geojsonTypes.MULTI_POLYGON&&(a=e.map(s)),t.incomingCoords(a)})}},{"../constants":24,"./constrain_feature_movement":32}],46:[function(t,e,n){"use strict";function i(t,e){var n=a[t.geometry.type]-a[e.geometry.type];return 0===n&&t.geometry.type===s.geojsonTypes.POLYGON?t.area-e.area:n}function r(t){return t.map(function(t){return t.geometry.type===s.geojsonTypes.POLYGON&&(t.area=o.geometry({type:s.geojsonTypes.FEATURE,property:{},geometry:t.geometry})),t}).sort(i).map(function(t){return delete t.area,t})}var o=t("geojson-area"),s=t("../constants"),a={Point:0,LineString:1,Polygon:2};e.exports=r},{"../constants":24,"geojson-area":5}],47:[function(t,e,n){"use strict";function i(t){if(this._items={},this._length=t?t.length:0,t)for(var e=0,n=t.length;e<n;e++)void 0!==t[e]&&(this._items[t[e]]=e)}i.prototype.add=function(t){return this._length=this._items[t]?this._length:this._length+1,this._items[t]=this._items[t]?this._items[t]:this._length,this},i.prototype.delete=function(t){return this._length=this._items[t]?this._length-1:this._length,delete this._items[t],this},i.prototype.has=function(t){return void 0!==this._items[t]},i.prototype.values=function(){var t=this,e=Object.keys(this._items).sort(function(e,n){return t._items[e]-t._items[n]});return e},i.prototype.clear=function(){return this._length=0,this._items={},this},e.exports=i},{}],48:[function(t,e,n){"use strict";e.exports=function(t,e){return t.length===e.length&&JSON.stringify(t.map(function(t){return t}).sort())===JSON.stringify(e.map(function(t){return t}).sort())}},{}],49:[function(t,e,n){"use strict";e.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}]},{}],50:[function(t,e,n){"use strict";function i(t,e,n){function i(){o=!1,s&&(r.apply(n,s),s=!1)}function r(){o?s=arguments:(o=!0,t.apply(n,arguments),setTimeout(i,e))}var o=void 0,s=void 0;return r}e.exports=i},{}],51:[function(t,e,n){"use strict";function i(t){return[].concat(t).filter(function(t){return void 0!==t})}e.exports=i},{}],52:[function(t,e,n){"use strict";var i=t("../lib/common_selectors"),r=i.noTarget,o=i.isOfMetaType,s=i.isInactiveFeature,a=i.isShiftDown,u=t("../lib/create_supplementary_points"),l=t("../lib/constrain_feature_movement"),c=t("../lib/double_click_zoom"),h=t("../constants"),f=t("../lib/common_selectors"),p=t("../lib/move_features"),d=o(h.meta.VERTEX),g=o(h.meta.MIDPOINT);e.exports=function(t,e){var n=e.featureId,i=t.store.get(n);if(!i)throw new Error("You must provide a featureId to enter direct_select mode");if(i.type===h.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");var o=e.startPos||null,m=!1,y=!1,v=e.coordPath?[e.coordPath]:[],_=function(){t.map.fire(h.events.UPDATE,{action:h.updateActions.CHANGE_COORDINATES,features:t.store.getSelected().map(function(t){return t.toGeoJSON()})})},x=function(){return t.events.actionable({combineFeatures:!1,uncombineFeatures:!1,trash:v.length>0})},b=function(e){t.map.dragPan.disable(),y=!0,o=e.lngLat},E=function(){t.map.dragPan.enable(),m=!1,y=!1,o=null},w=function(t){b(t);var e=t.featureTarget.properties,n=v.indexOf(e.coord_path);a(t)||n!==-1?a(t)&&n===-1&&v.push(e.coord_path):v=[e.coord_path],i.changed()},S=function(t){b(t);var e=t.featureTarget.properties;i.addCoordinate(e.coord_path,e.lng,e.lat),_(),v=[e.coord_path]},I=function(t){0===v.length?b(t):E()},C=function(e,n){p(t.store.getSelected(),n),o=e.lngLat},T=function(t,e){for(var n=v.map(function(t){return i.getCoordinate(t)}),r=n.map(function(t){return{type:h.geojsonTypes.FEATURE,properties:{},geometry:{type:h.geojsonTypes.POINT,coordinates:t}}}),o=l(r,e),s=0;s<n.length;s++){var a=n[s];i.updateCoordinate(v[s],a[0]+o.lng,a[1]+o.lat)}};return{start:function(){t.store.setSelected(n),c.disable(t),this.on("mousemove",f.true,function(e){var n=f.isActiveFeature(e),i=d(e),r=0===v.length;n&&r?t.ui.queueMapClasses({mouse:h.cursors.MOVE}):i&&!r?t.ui.queueMapClasses({mouse:h.cursors.MOVE}):t.ui.queueMapClasses({mouse:h.cursors.NONE}),E(e)}),this.on("mouseout",function(){return m},_),this.on("mousedown",d,w),this.on("mousedown",f.isActiveFeature,I),this.on("mousedown",g,S),this.on("drag",function(){return y},function(t){m=!0,t.originalEvent.stopPropagation();var e={lng:t.lngLat.lng-o.lng,lat:t.lngLat.lat-o.lat};v.length>0?T(t,e):C(t,e),o=t.lngLat}),this.on("click",f.true,E),this.on("mouseup",f.true,function(){m&&_(),E()}),this.on("click",r,function(){t.events.changeMode(h.modes.SIMPLE_SELECT)}),this.on("click",s,function(){t.events.changeMode(h.modes.SIMPLE_SELECT)}),this.on("click",f.isActiveFeature,function(){v=[],i.changed()})},stop:function(){c.enable(t)},render:function(e,i){n===e.properties.id?(e.properties.active=h.activeStates.ACTIVE,i(e),u(e,{map:t.map,midpoints:!0,selectedPaths:v}).forEach(i)):(e.properties.active=h.activeStates.INACTIVE,i(e)),x()},trash:function(){v.sort().reverse().forEach(function(t){return i.removeCoordinate(t)}),t.map.fire(h.events.UPDATE,{action:h.updateActions.CHANGE_COORDINATES,features:t.store.getSelected().map(function(t){return t.toGeoJSON()})}),v=[],x(),i.isValid()===!1&&(t.store.delete([n]),t.events.changeMode(h.modes.SIMPLE_SELECT,{}))}}}},{"../constants":24,"../lib/common_selectors":31,"../lib/constrain_feature_movement":32,"../lib/create_supplementary_points":34,"../lib/double_click_zoom":36,"../lib/move_features":45}],53:[function(t,e,n){"use strict";var i=t("../lib/common_selectors"),r=t("../feature_types/line_string"),o=t("../lib/is_event_at_coordinates"),s=t("../lib/double_click_zoom"),a=t("../constants"),u=t("../lib/create_vertex");e.exports=function(t){var e=new r(t,{type:a.geojsonTypes.FEATURE,properties:{},geometry:{type:a.geojsonTypes.LINE_STRING,coordinates:[]}}),n=0;return t._test&&(t._test.line=e),t.store.add(e),{start:function(){t.store.clearSelected(),s.disable(t),t.ui.queueMapClasses({mouse:a.cursors.ADD}),t.ui.setActiveButton(a.types.LINE),this.on("mousemove",i.true,function(r){e.updateCoordinate(n,r.lngLat.lng,r.lngLat.lat),i.isVertex(r)&&t.ui.queueMapClasses({mouse:a.cursors.POINTER})}),this.on("click",i.true,function(i){return n>0&&o(i,e.coordinates[n-1])?t.events.changeMode(a.modes.SIMPLE_SELECT,{featureIds:[e.id]}):(t.ui.queueMapClasses({mouse:a.cursors.ADD}),e.updateCoordinate(n,i.lngLat.lng,i.lngLat.lat),void n++)}),this.on("click",i.isVertex,function(){return t.events.changeMode(a.modes.SIMPLE_SELECT,{featureIds:[e.id]})}),this.on("keyup",i.isEscapeKey,function(){t.store.delete([e.id],{silent:!0}),t.events.changeMode(a.modes.SIMPLE_SELECT)}),this.on("keyup",i.isEnterKey,function(){t.events.changeMode(a.modes.SIMPLE_SELECT,{featureIds:[e.id]})}),t.events.actionable({combineFeatures:!1,uncombineFeatures:!1,trash:!0})},stop:function(){s.enable(t),t.ui.setActiveButton(),void 0!==t.store.get(e.id)&&(e.removeCoordinate(""+n),e.isValid()?t.map.fire(a.events.CREATE,{features:[e.toGeoJSON()]}):(t.store.delete([e.id],{silent:!0}),t.events.changeMode(a.modes.SIMPLE_SELECT,{},{silent:!0})))},render:function(t,n){var i=t.properties.id===e.id;return t.properties.active=i?a.activeStates.ACTIVE:a.activeStates.INACTIVE,i?void(t.geometry.coordinates.length<2||(t.properties.meta=a.meta.FEATURE,t.geometry.coordinates.length>=3&&n(u(e.id,t.geometry.coordinates[t.geometry.coordinates.length-2],""+(t.geometry.coordinates.length-2),!1)),n(t))):n(t)},trash:function(){t.store.delete([e.id],{silent:!0}),t.events.changeMode(a.modes.SIMPLE_SELECT)}}}},{"../constants":24,"../feature_types/line_string":27,"../lib/common_selectors":31,"../lib/create_vertex":35,"../lib/double_click_zoom":36,"../lib/is_event_at_coordinates":41}],54:[function(t,e,n){"use strict";var i=t("../lib/common_selectors"),r=t("../feature_types/point"),o=t("../constants");e.exports=function(t){function e(){t.events.changeMode(o.modes.SIMPLE_SELECT),t.store.delete([s.id],{silent:!0})}function n(e){t.ui.queueMapClasses({mouse:o.cursors.MOVE}),s.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),t.map.fire(o.events.CREATE,{features:[s.toGeoJSON()]}),t.events.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[s.id]})}var s=new r(t,{type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.POINT,coordinates:[]}});return t._test&&(t._test.point=s),t.store.add(s),{start:function(){t.store.clearSelected(),t.ui.queueMapClasses({mouse:o.cursors.ADD}),t.ui.setActiveButton(o.types.POINT),this.on("click",i.true,n),this.on("keyup",i.isEscapeKey,e),this.on("keyup",i.isEnterKey,e),t.events.actionable({combineFeatures:!1,uncombineFeatures:!1,trash:!0})},stop:function(){t.ui.setActiveButton(),s.getCoordinate().length||t.store.delete([s.id],{silent:!0})},render:function(t,e){var n=t.properties.id===s.id;if(t.properties.active=n?o.activeStates.ACTIVE:o.activeStates.INACTIVE,!n)return e(t)},trash:function(){e()}}}},{"../constants":24,"../feature_types/point":29,"../lib/common_selectors":31}],55:[function(t,e,n){"use strict";var i=t("../lib/common_selectors"),r=t("../feature_types/polygon"),o=t("../lib/double_click_zoom"),s=t("../constants"),a=t("../lib/is_event_at_coordinates"),u=t("../lib/create_vertex");e.exports=function(t){var e=new r(t,{type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.POLYGON,coordinates:[[]]}}),n=0;return t._test&&(t._test.polygon=e),t.store.add(e),{start:function(){t.store.clearSelected(),o.disable(t),t.ui.queueMapClasses({mouse:s.cursors.ADD}),t.ui.setActiveButton(s.types.POLYGON),this.on("mousemove",i.true,function(r){e.updateCoordinate("0."+n,r.lngLat.lng,r.lngLat.lat),i.isVertex(r)&&t.ui.queueMapClasses({mouse:s.cursors.POINTER})}),this.on("click",i.true,function(i){return n>0&&a(i,e.coordinates[0][n-1])?t.events.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[e.id]}):(t.ui.queueMapClasses({mouse:s.cursors.ADD}),e.updateCoordinate("0."+n,i.lngLat.lng,i.lngLat.lat),void n++)}),this.on("click",i.isVertex,function(){return t.events.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[e.id]})}),this.on("keyup",i.isEscapeKey,function(){t.store.delete([e.id],{silent:!0}),t.events.changeMode(s.modes.SIMPLE_SELECT)}),this.on("keyup",i.isEnterKey,function(){t.events.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[e.id]})}),t.events.actionable({combineFeatures:!1,uncombineFeatures:!1,trash:!0})},stop:function(){t.ui.queueMapClasses({mouse:s.cursors.NONE}),o.enable(t),t.ui.setActiveButton(),void 0!==t.store.get(e.id)&&(e.removeCoordinate("0."+n),e.isValid()?t.map.fire(s.events.CREATE,{features:[e.toGeoJSON()]}):(t.store.delete([e.id],{silent:!0}),t.events.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},render:function(t,n){var i=t.properties.id===e.id;if(t.properties.active=i?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!i)return n(t);if(0!==t.geometry.coordinates.length){var r=t.geometry.coordinates[0].length;if(!(r<3)){if(t.properties.meta=s.meta.FEATURE,r>4){n(u(e.id,t.geometry.coordinates[0][0],"0.0",!1));var o=t.geometry.coordinates[0].length-3;n(u(e.id,t.geometry.coordinates[0][o],"0."+o,!1))}if(r>3)return n(t);var a=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];return n({type:s.geojsonTypes.FEATURE,properties:t.properties,geometry:{coordinates:a,type:s.geojsonTypes.LINE_STRING}})}}},trash:function(){t.store.delete([e.id],{silent:!0}),t.events.changeMode(s.modes.SIMPLE_SELECT)}}}},{"../constants":24,"../feature_types/polygon":30,"../lib/common_selectors":31,"../lib/create_vertex":35,"../lib/double_click_zoom":36,"../lib/is_event_at_coordinates":41}],56:[function(t,e,n){"use strict";var i=t("../lib/common_selectors"),r=t("../lib/mouse_event_point"),o=t("../lib/features_at"),s=t("../lib/create_supplementary_points"),a=t("../lib/string_set"),u=t("../lib/double_click_zoom"),l=t("../lib/move_features"),c=t("../constants"),h=t("../feature_types/multi_feature");e.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,f=null,p=void 0,d=!1,g=!1,m=!1,y=!1,v=e.featureIds||[],_=function(){t.map.fire(c.events.UPDATE,{action:c.updateActions.MOVE,features:t.store.getSelected().map(function(t){return t.toGeoJSON()})})},x=function(){var e=t.store.getSelected(),n=e.filter(function(t){return t instanceof h}),i=!1;e.length>1&&!function(){i=!0;var t=e[0].type.replace("Multi","");e.forEach(function(e){e.type.replace("Multi","")!==t&&(i=!1)})}();var r=n.length>0,o=e.length>0;t.events.actionable({combineFeatures:i,uncombineFeatures:r,trash:o})},b=function(t){if(!t.length)return[];var e=t.map(function(t){return t.properties.id}).filter(function(t){return void 0!==t}).reduce(function(t,e){return t.add(e),t},new a);return e.values()},E=function(){p&&(p.parentNode&&p.parentNode.removeChild(p),p=null),t.map.dragPan.enable(),d=!1,g=!1,m=!1,y=!1};return{stop:function(){u.enable(t)},start:function(){t.store&&(t.store.setSelected(v.filter(function(e){return void 0!==t.store.get(e)})),x()),this.on("mouseup",i.true,E),this.on("mousemove",i.true,E),this.on("mouseout",function(){return m},_),this.on("click",i.noTarget,function(){var e=this,n=t.store.getSelectedIds();n.length&&(t.store.clearSelected(),n.forEach(function(t){return e.render(t)})),u.enable(t),E()}),this.on("click",i.isOfMetaType(c.meta.VERTEX),function(e){t.events.changeMode(c.modes.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),t.ui.queueMapClasses({mouse:c.cursors.MOVE})}),this.on("mousedown",i.isActiveFeature,function(e){E(),t.map.dragPan.disable(),this.render(e.featureTarget.properties.id),y=!0,n=e.lngLat}),this.on("click",i.isFeature,function(e){u.disable(t),E();var n=i.isShiftDown(e),r=t.store.getSelectedIds(),o=e.featureTarget.properties.id,s=t.store.isSelected(o);return!n&&s&&t.store.get(o).type!==c.geojsonTypes.POINT?t.events.changeMode(c.modes.DIRECT_SELECT,{featureId:o}):(s&&n?(t.store.deselect(o),t.ui.queueMapClasses({mouse:c.cursors.POINTER}),1===r.length&&u.enable(t)):!s&&n?(t.store.select(o),t.ui.queueMapClasses({mouse:c.cursors.MOVE})):s||n||(r.forEach(this.render),t.store.setSelected(o),t.ui.queueMapClasses({mouse:c.cursors.MOVE})),void this.render(o))}),this.on("drag",function(){return y},function(e){m=!0,e.originalEvent.stopPropagation();var i={lng:e.lngLat.lng-n.lng,lat:e.lngLat.lat-n.lat};l(t.store.getSelected(),i),n=e.lngLat}),this.on("mouseup",i.true,function(e){if(m)_();else if(d){var n=[f,r(e.originalEvent,t.container)],i=o(null,n,t),s=b(i).filter(function(e){return!t.store.isSelected(e)});s.length&&(t.store.select(s),s.forEach(this.render),t.ui.queueMapClasses({mouse:c.cursors.MOVE}))}E()}),t.options.boxSelect&&(this.on("mousedown",i.isShiftMousedown,function(e){E(),t.map.dragPan.disable(),f=r(e.originalEvent,t.container),g=!0}),this.on("drag",function(){return g},function(e){d=!0,t.ui.queueMapClasses({mouse:c.cursors.ADD}),p||(p=document.createElement("div"),p.classList.add(c.classes.BOX_SELECT),t.container.appendChild(p));var n=r(e.originalEvent,t.container),i=Math.min(f.x,n.x),o=Math.max(f.x,n.x),s=Math.min(f.y,n.y),a=Math.max(f.y,n.y),u="translate("+i+"px, "+s+"px)";p.style.transform=u,p.style.WebkitTransform=u,p.style.width=o-i+"px",p.style.height=a-s+"px"}))},render:function(e,n){e.properties.active=t.store.isSelected(e.properties.id)?c.activeStates.ACTIVE:c.activeStates.INACTIVE,n(e),x(),e.properties.active===c.activeStates.ACTIVE&&e.geometry.type!==c.geojsonTypes.POINT&&s(e).forEach(n)},trash:function(){t.store.delete(t.store.getSelectedIds()),x()},combineFeatures:function(){var e=t.store.getSelected();if(!(0===e.length||e.length<2)){for(var n=[],i=[],r=e[0].type.replace("Multi",""),o=0;o<e.length;o++){var s=e[o];if(s.type.replace("Multi","")!==r)return;s.type.includes("Multi")?s.getCoordinates().forEach(function(t){n.push(t)}):n.push(s.getCoordinates()),i.push(s.toGeoJSON())}if(i.length>1){var a=new h(t,{type:c.geojsonTypes.FEATURE,properties:i[0].properties,geometry:{type:"Multi"+r,coordinates:n}});t.store.add(a),t.store.delete(t.store.getSelectedIds(),{silent:!0}),t.store.setSelected([a.id]),t.map.fire(c.events.COMBINE_FEATURES,{createdFeatures:[a.toGeoJSON()],deletedFeatures:i})}x()}},uncombineFeatures:function(){var e=t.store.getSelected();if(0!==e.length){for(var n=[],i=[],r=function(r){var o=e[r];o instanceof h&&(o.getFeatures().forEach(function(e){t.store.add(e),e.properties=o.properties,n.push(e.toGeoJSON()),t.store.select([e.id])}),t.store.delete(o.id,{silent:!0}),i.push(o.toGeoJSON()))},o=0;o<e.length;o++)r(o);n.length>1&&t.map.fire(c.events.UNCOMBINE_FEATURES,{createdFeatures:n,deletedFeatures:i}),x()}}}}},{"../constants":24,"../feature_types/multi_feature":28,"../lib/common_selectors":31,"../lib/create_supplementary_points":34,"../lib/double_click_zoom":36,"../lib/features_at":38,"../lib/mouse_event_point":44,"../lib/move_features":45,"../lib/string_set":47}],57:[function(t,e,n){"use strict";e.exports=function(t){return{stop:function(){},start:function(){t.events.actionable({combineFeatures:!1,uncombineFeatures:!1,trash:!1})},render:function(t,e){e(t)}}}},{}],58:[function(t,e,n){"use strict";function i(t,e){return t.map(function(t){return t.source?t:r(t,{id:t.id+"."+e,source:"hot"===e?o.sources.HOT:o.sources.COLD})})}var r=t("xtend"),o=t("./constants"),s={defaultMode:o.modes.SIMPLE_SELECT,keybindings:!0,clickBuffer:2,boxSelect:!0,displayControlsDefault:!0,styles:t("./lib/theme"),controls:{},userProperties:!1},a={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},u={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};e.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r(t);return t.controls||(e.controls={}),t.displayControlsDefault===!1?e.controls=r(u,t.controls):e.controls=r(a,t.controls),e=r(s,e),e.styles=i(e.styles,"cold").concat(i(e.styles,"hot")),e}},{"./constants":24,"./lib/theme":49,xtend:22}],59:[function(t,e,n){"use strict";var i=t("./constants");e.exports=function(){function t(t,e){var i=n.get(t),r=i.internal(o);n.ctx.events.currentModeRender(r,function(t){n.sources[e].push(t)})}function e(){n.isDirty=!1,n.clearChangedIds()}var n=this,r=n.ctx.map&&void 0!==n.ctx.map.getSource(i.sources.HOT);if(!r)return e();var o=n.ctx.events.currentModeName();n.ctx.ui.queueMapClasses({mode:o});var s=[],a=[];n.isDirty?a=n.getAllIds():(s=n.getChangedIds().filter(function(t){return void 0!==n.get(t)}),a=n.sources.hot.filter(function(t){return t.properties.id&&s.indexOf(t.properties.id)===-1&&void 0!==n.get(t.properties.id)}).map(function(t){return t.properties.id})),n.sources.hot=[];var u=n.sources.cold.length;n.sources.cold=n.isDirty?[]:n.sources.cold.filter(function(t){var e=t.properties.id||t.properties.parent;return s.indexOf(e)===-1});var l=u!==n.sources.cold.length||a.length>0;if(s.forEach(function(e){return t(e,"hot")}),a.forEach(function(e){return t(e,"cold")}),l&&n.ctx.map.getSource(i.sources.COLD).setData({type:i.geojsonTypes.FEATURE_COLLECTION,features:n.sources.cold}),n.ctx.map.getSource(i.sources.HOT).setData({type:i.geojsonTypes.FEATURE_COLLECTION,features:n.sources.hot}),n._emitSelectionChange&&(n.ctx.map.fire(i.events.SELECTION_CHANGE,{features:n.getSelected().map(function(t){return t.toGeoJSON()})}),n._emitSelectionChange=!1),n._deletedFeaturesToEmit.length){var c=n._deletedFeaturesToEmit.map(function(t){return t.toGeoJSON()});n._deletedFeaturesToEmit=[],n.ctx.map.fire(i.events.DELETE,{features:c})}n.ctx.map.fire(i.events.RENDER,{}),e()}},{"./constants":24}],60:[function(t,e,n){"use strict";var i=t("./events"),r=t("./store"),o=t("./ui"),s=t("./constants");e.exports=function(t){t.events=i(t),t.map=null,t.container=null,t.store=null,t.ui=o(t);var e=null,n={onRemove:function(){return n.removeLayers(),t.ui.removeButtons(),t.events.removeEventListeners(),t.map=null,t.container=null,t.store=null,e&&e.parentNode&&e.parentNode.removeChild(e),e=null,this},onAdd:function(i){t.map=i,t.container=i.getContainer(),t.store=new r(t),e=t.ui.addButtons(),t.options.boxSelect&&(i.boxZoom.disable(),i.dragPan.disable(),i.dragPan.enable());var o=null,s=function e(){i.off("load",e),clearInterval(o),n.addLayers(),t.events.addEventListeners()};return i.loaded()?s():(i.on("load",s),o=setInterval(function(){i.loaded()&&s()},16)),e},addLayers:function(){t.map.addSource(s.sources.COLD,{data:{type:s.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.map.addSource(s.sources.HOT,{data:{type:s.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.options.styles.forEach(function(e){t.map.addLayer(e)}),t.store.render()},removeLayers:function(){t.options.styles.forEach(function(e){t.map.removeLayer(e.id)}),t.map.removeSource(s.sources.COLD),t.map.removeSource(s.sources.HOT)}};return t.setup=n,n}},{"./constants":24,"./events":25,"./store":61,"./ui":62}],61:[function(t,e,n){"use strict";var i=t("./lib/throttle"),r=t("./lib/to_dense_array"),o=t("./lib/string_set"),s=t("./render"),a=e.exports=function(t){this._features={},this._featureIds=new o,this._selectedFeatureIds=new o,this._changedFeatureIds=new o,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this.ctx=t,this.sources={hot:[],cold:[]},this.render=i(s,16,this),this.isDirty=!1};a.prototype.createRenderBatch=function(){var t=this,e=this.render,n=0;return this.render=function(){n++},function(){t.render=e,n>0&&t.render()}},a.prototype.setDirty=function(){return this.isDirty=!0,this},a.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},a.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},a.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},a.prototype.getAllIds=function(){return this._featureIds.values()},a.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},a.prototype.delete=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(t).forEach(function(t){e._featureIds.has(t)&&(e._featureIds.delete(t),e._selectedFeatureIds.delete(t),n.silent||e._deletedFeaturesToEmit.indexOf(e._features[t])===-1&&e._deletedFeaturesToEmit.push(e._features[t]),delete e._features[t],e.isDirty=!0)}),this},a.prototype.get=function(t){return this._features[t]},a.prototype.getAll=function(){var t=this;return Object.keys(this._features).map(function(e){return t._features[e]})},a.prototype.select=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(t).forEach(function(t){e._selectedFeatureIds.has(t)||(e._selectedFeatureIds.add(t),e._changedFeatureIds.add(t),n.silent||(e._emitSelectionChange=!0))}),this},a.prototype.deselect=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(t).forEach(function(t){e._selectedFeatureIds.has(t)&&(e._selectedFeatureIds.delete(t),e._changedFeatureIds.add(t),n.silent||(e._emitSelectionChange=!0));
}),this},a.prototype.clearSelected=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},a.prototype.setSelected=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=r(t),this.deselect(this._selectedFeatureIds.values().filter(function(e){return t.indexOf(e)===-1}),{silent:n.silent}),this.select(t.filter(function(t){return!e._selectedFeatureIds.has(t)}),{silent:n.silent}),this},a.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},a.prototype.getSelected=function(){var t=this;return this._selectedFeatureIds.values().map(function(e){return t.get(e)})},a.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},a.prototype.setFeatureProperty=function(t,e,n){this.get(t).setProperty(e,n),this.featureChanged(t)}},{"./lib/string_set":47,"./lib/throttle":50,"./lib/to_dense_array":51,"./render":59}],62:[function(t,e,n){"use strict";var i=t("xtend"),r=t("./constants"),o=["mode","feature","mouse"];e.exports=function(t){function e(t){d=i(d,t)}function n(){if(t.container){var e=[],n=[];o.forEach(function(t){d[t]!==p[t]&&(e.push(t+"-"+p[t]),null!==d[t]&&n.push(t+"-"+d[t]))}),e.length>0&&t.container.classList.remove.apply(t.container.classList,e),n.length>0&&t.container.classList.add.apply(t.container.classList,n),p=i(p,d)}}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement("button");return n.className=r.classes.CONTROL_BUTTON+" "+e.className,n.setAttribute("title",e.title),e.container.appendChild(n),n.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();var i=n.target;return i===f?void a():(u(t),void e.onActivate())},!0),n}function a(){f&&(f.classList.remove(r.classes.ACTIVE_BUTTON),f=null)}function u(t){a();var e=h[t];e&&e&&"trash"!==t&&(e.classList.add(r.classes.ACTIVE_BUTTON),f=e)}function l(){var e=t.options.controls,n=document.createElement("div");return n.className=r.classes.CONTROL_GROUP+" "+r.classes.CONTROL_BASE,e?(e[r.types.LINE]&&(h[r.types.LINE]=s(r.types.LINE,{container:n,className:r.classes.CONTROL_BUTTON_LINE,title:"LineString tool "+(t.options.keybindings&&"(l)"),onActivate:function(){return t.events.changeMode(r.modes.DRAW_LINE_STRING)}})),e[r.types.POLYGON]&&(h[r.types.POLYGON]=s(r.types.POLYGON,{container:n,className:r.classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(t.options.keybindings&&"(p)"),onActivate:function(){return t.events.changeMode(r.modes.DRAW_POLYGON)}})),e[r.types.POINT]&&(h[r.types.POINT]=s(r.types.POINT,{container:n,className:r.classes.CONTROL_BUTTON_POINT,title:"Marker tool "+(t.options.keybindings&&"(m)"),onActivate:function(){return t.events.changeMode(r.modes.DRAW_POINT)}})),e.trash&&(h.trash=s("trash",{container:n,className:r.classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){t.events.trash()}})),e.combine_features&&(h.combine_features=s("combineFeatures",{container:n,className:r.classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){t.events.combineFeatures()}})),e.uncombine_features&&(h.uncombine_features=s("uncombineFeatures",{container:n,className:r.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){t.events.uncombineFeatures()}})),n):n}function c(){Object.keys(h).forEach(function(t){var e=h[t];e.parentNode&&e.parentNode.removeChild(e),delete h[t]})}var h={},f=null,p={mode:null,feature:null,mouse:null},d={mode:null,feature:null,mouse:null};return{setActiveButton:u,queueMapClasses:e,updateMapClasses:n,addButtons:l,removeButtons:c}}},{"./constants":24,xtend:22}]},{},[1])(1)})},function(t,e,n){"use strict";var i=(n(1),n(651)),r={getDefaultForestAlertState:function(){return{enableGLAD2017:!1,result:null}},toggleForestAlerts:function(t){var e;e=this.state.forestAlerts?JSON.parse(JSON.stringify(this.state.forestAlerts)):this.getDefaultForestAlertState(),!e.enableGLAD2017&&t.enableGLAD2017?(this.addGLADLayer(),e.enableGLAD2017=t.enableGLAD2017,this.setState({forestAlerts:e})):e.enableGLAD2017&&!t.enableGLAD2017&&(this.removeGLADLayer(),e.enableGLAD2017=t.enableGLAD2017,e.result=null,this.setState({forestAlerts:e}))},restoreForestAlerts:function(){this.state.forestAlerts.enableGLAD2017&&this.addGLADLayer()},calculateForestAlerts:function(){if(this.state.forestAlerts.enableGLAD2017){var t=this.map.queryRenderedFeatures({layers:["omh-glad-2017-polygon"]}),e=t.length,n=i({type:"FeatureCollection",features:t}),r=Math.round(100*n)/100,o=1e-6*n,s=r/1e4,a="";a=r<1e3?a+r.toLocaleString()+"m2 ":a+o.toLocaleString()+"km2 ",a=a+s.toLocaleString()+"ha";var u=JSON.parse(JSON.stringify(this.state.forestAlerts));u.result={alertCount:e,areaMessage:a},this.setState({forestAlerts:u})}},addGLADLayer:function(){this.map.addSource("omh-glad-2017",{type:"vector",url:"https://s3.amazonaws.com/maphubs-forest-alerts/glad/2017.json"}),this.map.addLayer({id:"omh-glad-2017-point",type:"circle",maxzoom:13,metadata:{"maphubs:interactive":!1,"maphubs:showBehindBaseMapLabels":!1},source:"omh-glad-2017",paint:{"circle-color":"red","circle-opacity":.5},"source-layer":"data"}),this.map.addLayer({id:"omh-glad-2017-polygon",type:"fill",maxzoom:22,metadata:{"maphubs:interactive":!1,"maphubs:showBehindBaseMapLabels":!1},source:"omh-glad-2017",filter:["in","$type","Polygon"],paint:{"fill-color":"red","fill-outline-color":"red","fill-opacity":.5},"source-layer":"data",layout:{visibility:"visible"}}),this.map.addLayer({id:"omh-glad-2017-outline-polygon",type:"line",maxzoom:22,source:"omh-glad-2017",filter:["in","$type","Polygon"],paint:{"line-color":"#222222","line-opacity":.8,"line-width":{base:.5,stops:[[3,.1],[4,.2],[5,.3],[6,.4],[7,.5],[8,.6],[9,.7],[10,.8]]}},"source-layer":"data",layout:{visibility:"visible"}})},removeGLADLayer:function(){this.map.removeLayer("omh-glad-2017-outline-polygon"),this.map.removeLayer("omh-glad-2017-polygon"),this.map.removeLayer("omh-glad-2017-point"),this.map.removeSource("omh-glad-2017")}};t.exports=r},function(t,e,n){"use strict";var i=n(205)("MapGeoJSONMixin"),r=n(658),o={};"undefined"!=typeof window&&(o=n(646));var s=n(661),a={initGeoJSON:function(t,e){if(e&&e.features&&e.features.length>0){t.addSource("omh-geojson",{type:"geojson",data:e});var n=r.defaultStyle("geojson",null,null);n.sources["omh-geojson"]={type:"geojson",data:{}},this.addLayers(t,n);var o=this.getInteractiveLayers(n);this.setState({interactiveLayers:o,glStyle:n}),this.zoomToData(e)}else i("("+this.state.id+") Empty/Missing GeoJSON Data")},resetGeoJSON:function(){var t=this.map.getSource("omh-geojson");t.setData({type:"FeatureCollection",features:[]}),this.map.flyTo({center:[0,0],zoom:0})},zoomToData:function(t){var e;if(e=t.bbox&&t.bbox.length>0?t.bbox:s(t)){var n=new o.LngLat(e[0],e[1]),i=new o.LngLat(e[2],e[3]),r=new o.LngLatBounds(n,i);this.map.fitBounds(r,{padding:25,curve:3,speed:.6,maxZoom:12})}}};t.exports=a},function(t,e,n){"use strict";var i=n(205)("map-styles"),r=n(659),o=n(660);t.exports={enableMarkers:function(t,e,n){return t.layers&&Array.isArray(t.layers)&&t.layers.length>0&&t.layers.forEach(function(t){if(t.id.startsWith("omh-data-point"))t.metadata||(t.metadata={}),t.metadata["maphubs:markers"]=e,t.metadata["maphubs:markers"].enabled=!0,t.metadata["maphubs:markers"].dataUrl="{MAPHUBS_DOMAIN}/api/layer/"+n+"/export/json/"+n+".json",t.metadata["maphubs:layer_id"]=n,t.metadata["maphubs:interactive"]&&(t.metadata["maphubs:markers"].interactive=!0),t.metadata["maphubs:interactive"]=!1;else if(t.id.startsWith("omh-label")){var i=t.layout["text-size"].base/2+t.paint["text-halo-width"];"MAP_PIN"===e.shape||"SQUARE_PIN"===e.shape?t.paint["text-translate"][1]=i:i+=e.height/2}else t.layout||(t.layout={}),t.layout.visibility="none"}),t},disableMarkers:function(t){return t.layers&&Array.isArray(t.layers)&&t.layers.length>0&&t.layers.forEach(function(t){t.id.startsWith("omh-data-point")?(t.metadata["maphubs:markers"].enabled=!1,t.metadata["maphubs:markers"].interactive&&(t.metadata["maphubs:interactive"].interactive=!0)):t.id.startsWith("omh-label")?t.paint["text-translate"][1]=0-t.layout["text-size"].base:(t.layout||(t.layout={}),t.layout.visibility="visible")}),t},updateStyleColor:function(t,e){return t.layers&&Array.isArray(t.layers)&&t.layers.length>0&&t.layers.forEach(function(t){t.id.startsWith("omh-data-point")?("circle"==t.type?t.paint["circle-color"]=e:i("unable to update point layer type: "+t.type),t.metadata["maphubs:markers"]&&(t.metadata["maphubs:markers"].shapeFill=e)):t.id.startsWith("omh-data-line")?"line"==t.type?t.paint["line-color"]=e:i("unable to update line layer type: "+t.type):t.id.startsWith("omh-data-polygon")?"fill"==t.type?(t.paint["fill-color"]=e,t.paint["fill-outline-color"]=e,t.paint["fill-opacity"]=1):i("unable to update polygon layer type: "+t.type):t.id.startsWith("omh-data-doublestroke-polygon")?"line"==t.type?t.paint["line-color"]=e:i("unable to update line layer type: "+t.type):t.id.startsWith("osm")&&t.id.endsWith("-polygon")?"fill"==t.type?t.paint["fill-color"]=e:i("unable to update osm polygon layer type: "+t.type):t.id.startsWith("osm")&&t.id.endsWith("-line")?"line"==t.type?t.paint["line-color"]=e:i("unable to update osm line layer type: "+t.type):"osm-buildings-polygon"==t.id&&("fill"==t.type?t.paint["fill-color"]=e:i("unable to update osm building layer type: "+t.type))}),t},removeStyleLabels:function(t){return t.layers&&Array.isArray(t.layers)&&t.layers.length>0&&r(t.layers,function(t){return t.id.startsWith("omh-label")}),t},addStyleLabels:function(t,e,n,i){if(t=this.removeStyleLabels(t),t.layers&&Array.isArray(t.layers)&&t.layers.length>0){var r="data",o=["in","$type","Point"],s="point",a=[0,0];"point"==i?(a=[0,-14],t.layers.forEach(function(t){if(t.id.startsWith("omh-data-point")&&t.metadata&&t.metadata["maphubs:markers"]&&t.metadata["maphubs:markers"].enabled){var e=t.metadata["maphubs:markers"],n=9;"MAP_PIN"!==e.shape&&"SQUARE_PIN"!==e.shape&&(n+=e.height/2),a=[0,n]}})):"line"==i?(s="line",o=["in","$type","LineString"]):"polygon"==i&&(r="data-centroids"),t.layers.push({id:"omh-label-"+n,type:"symbol",source:"omh-"+n,"source-layer":r,filter:o,layout:{"text-font":["Arial Unicode MS Regular"],visibility:"visible","symbol-placement":s,"text-field":"{"+e+"}","text-size":{base:14,stops:[[13,14],[18,14]]}},paint:{"text-color":"#000","text-halo-color":"#FFF","text-halo-width":2,"text-translate":a}})}return t},getPointLayers:function(t,e,n,i,r){var o=[{id:"omh-data-point-"+t,type:"circle",metadata:{"maphubs:interactive":i,"maphubs:showBehindBaseMapLabels":r},source:"omh-"+t,filter:["in","$type","Point"],paint:{"circle-color":e,"circle-opacity":.5}},{id:"omh-hover-point-"+t,type:"circle",source:"omh-"+t,filter:["==","osm_id",""],paint:{"circle-radius":15,"circle-color":n,"circle-opacity":.5},"paint.selected":{"circle-radius":15,"circle-color":n,"circle-opacity":.5}}];return"geojson"!==t&&o.forEach(function(t){t["source-layer"]="data"}),o},getLineLayers:function(t,e,n,i,r){var o=[{id:"omh-data-line-"+t,type:"line",metadata:{"maphubs:interactive":i,"maphubs:showBehindBaseMapLabels":r},source:"omh-"+t,filter:["in","$type","LineString"],paint:{"line-color":e,"line-opacity":.5,"line-width":2}},{id:"omh-hover-line-"+t,type:"line",source:"omh-"+t,filter:["==","osm_id",""],paint:{"line-color":n,"line-opacity":.3,"line-width":1},"paint.selected":{"line-color":n,"line-opacity":.3,"line-width":1}}];return"geojson"!==t&&o.forEach(function(t){t["source-layer"]="data"}),o},getPolygonLayers:function(t,e,n,i,r,o){var s=[{id:"omh-data-polygon-"+t,type:"fill",metadata:{"maphubs:interactive":r,"maphubs:showBehindBaseMapLabels":o},source:"omh-"+t,filter:["in","$type","Polygon"],paint:{"fill-color":e,"fill-outline-color":e,"fill-opacity":.5}},{id:"omh-data-doublestroke-polygon-"+t,type:"line",source:"omh-"+t,filter:["in","$type","Polygon"],paint:{"line-color":e,"line-opacity":.3,"line-width":{base:.5,stops:[[5,1],[6,2],[7,3],[8,4],[9,5],[10,6]]},"line-offset":{base:.5,stops:[[5,.5],[6,1],[7,1.5],[8,2],[9,2.5],[10,3]]}}},{id:"omh-data-outline-polygon-"+t,type:"line",source:"omh-"+t,filter:["in","$type","Polygon"],paint:{"line-color":"#222222","line-opacity":.8,"line-width":{base:.5,stops:[[3,.1],[4,.2],[5,.3],[6,.4],[7,.5],[8,.6],[9,.7],[10,.8]]}}},{id:"omh-hover-polygon-"+t,type:"fill",source:"omh-"+t,filter:["==","osm_id",""],paint:{"fill-color":n,"fill-outline-color":i,"fill-opacity":.7},"paint.selected":{"fill-color":n,"fill-outline-color":i,"fill-opacity":.7}}];return"geojson"!==t&&s.forEach(function(t){t["source-layer"]="data"}),s},styleWithColor:function(t,e,n,i,r,o){var s="yellow",a="black",u=[];u="point"===i?this.getPointLayers(t,n,s,r,o):"point"===i?this.getLineLayers(t,n,s,r,o):"polygon"===i?this.getPolygonLayers(t,n,s,a,r,o):this.getPointLayers(t,n,s,r,o).concat(this.getLineLayers(t,n,s,r,o)).concat(this.getPolygonLayers(t,n,s,a,r,o));var l={sources:{},layers:u};if(e)if("vector"===e.type){var c="{MAPHUBS_DOMAIN}/api/layer/"+t+"/tile.json";l.sources["omh-"+t]={type:"vector",url:c}}else"ags-mapserver-query"===e.type||"ags-featureserver-query"===e.type?l.sources["omh-"+t]={type:e.type,url:e.url}:"ags-mapserver-tiles"===e.type&&(l.sources["omh-"+t]={type:"arcgisraster",url:e.url+"?f=json"});return l},rasterStyleWithOpacity:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"raster";n/=100;var r={sources:{},layers:[{id:"omh-raster-"+t,type:"raster",source:"omh-"+t,minzoom:0,maxzoom:18,paint:{"raster-opacity":n}}]};return r.sources["omh-"+t]={type:i,url:e,tileSize:256},r},defaultRasterStyle:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"raster";return this.rasterStyleWithOpacity(t,e,100,n)},htmlEncode:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},legendWithColor:function(t,e){var n="",i=this.htmlEncode(t.name);return n="point"==t.data_type?'<div class="omh-legend">\n <div class="point double-stroke" style="background-color: '+e+'">\n </div>\n <h3>'+i+"</h3>\n </div>\n":"line"==t.data_type?'<div class="omh-legend">\n<div class="block double-stroke" style="height:  4px; background-color: '+e+'">\n</div>\n<h3>'+i+"</h3>\n</div>":"polygon"==t.data_type?'<div class="omh-legend">\n <div class="block double-stroke" style="background-color: '+e+'">\n </div>\n <h3>'+i+"</h3>\n </div>\n":'<div class="omh-legend">\n <div class="block double-stroke" style="background-color: '+e+'">\n </div>\n <h3>'+i+"</h3>\n </div>\n"},defaultLegend:function(t){return this.legendWithColor(t,"red")},defaultSettings:function(){return{interactive:!0,showBehindBaseMapLabels:!1}},rasterLegend:function(t){var e=this.htmlEncode(t.name),n='<div class="omh-legend">\n<h3>'+e+"</h3>\n</div>";return n},defaultStyle:function(t,e,n){var i=this.defaultSettings();return this.styleWithColor(t,e,"red",n,i.interactive,i.showBehindBaseMapLabels)},toggleInteractive:function(t,e,n,i){var r="omh-data-"+i+"-"+n,s=o(e.layers,{id:r}),a=e.layers[s];return a.metadata||(a.metadata={}),a.metadata["maphubs:interactive"]=t,e},toggleShowBehindBaseMapLabels:function(t,e){return e.layers.map(function(e){e.metadata||(e.metadata={}),e.metadata["maphubs:showBehindBaseMapLabels"]=t}),e},getMapboxStyle:function(t){var e={sources:{},layers:[{id:"mapbox-style-placeholder",type:"mapbox-style-placeholder"}]};return e.sources[t]={type:"mapbox-style",mapboxid:t},e}}},function(t,e,n){(function(t,n){function i(t,e){for(var n=-1,i=t?t.length:0;++n<i;)if(e(t[n],n,t))return!0;return!1}function r(t){return function(e){return null==e?void 0:e[t]}}function o(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function s(t){return function(e){return t(e)}}function a(t,e){return null==t?void 0:t[e]}function u(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function l(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function c(t,e){return function(n){return t(e(n))}}function h(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function f(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function p(){this.__data__=nn?nn(null):{}}function d(t){return this.has(t)&&delete this.__data__[t]}function g(t){var e=this.__data__;if(nn){var n=e[t];return n===Vt?void 0:n}return Ue.call(e,t)?e[t]:void 0}function m(t){var e=this.__data__;return nn?void 0!==e[t]:Ue.call(e,t)}function y(t,e){var n=this.__data__;return n[t]=nn&&void 0===e?Vt:e,this}function v(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function _(){this.__data__=[]}function x(t){var e=this.__data__,n=j(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():Ze.call(e,n,1),!0}function b(t){var e=this.__data__,n=j(e,t);return n<0?void 0:e[n][1]}function E(t){return j(this.__data__,t)>-1}function w(t,e){var n=this.__data__,i=j(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function S(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function I(){this.__data__={hash:new f,map:new(Ke||v),string:new f}}function C(t){return at(this,t).delete(t)}function T(t){return at(this,t).get(t)}function N(t){return at(this,t).has(t)}function L(t,e){return at(this,t).set(t,e),this}function M(t){var e=-1,n=t?t.length:0;for(this.__data__=new S;++e<n;)this.add(t[e])}function P(t){return this.__data__.set(t,Vt),this}function A(t){return this.__data__.has(t)}function R(t){this.__data__=new v(t)}function O(){this.__data__=new v}function F(t){return this.__data__.delete(t)}function D(t){return this.__data__.get(t)}function z(t){return this.__data__.has(t)}function k(t,e){var n=this.__data__;if(n instanceof v){var i=n.__data__;if(!Ke||i.length<Bt-1)return i.push([t,e]),this;n=this.__data__=new S(i)}return n.set(t,e),this}function B(t,e){var n=dn(t)||It(t)?o(t.length,String):[],i=n.length,r=!!i;for(var s in t)!e&&!Ue.call(t,s)||r&&("length"==s||ht(s,i))||n.push(s);return n}function j(t,e){for(var n=t.length;n--;)if(St(t[n][0],e))return n;return-1}function V(t,e){e=ft(e,t)?[e]:it(e);for(var n=0,i=e.length;null!=t&&n<i;)t=t[_t(e[n++])];return n&&n==i?t:void 0}function G(t){return qe.call(t)}function U(t,e){return null!=t&&e in Object(t)}function q(t,e,n,i,r){return t===e||(null==t||null==e||!Mt(t)&&!Pt(e)?t!==t&&e!==e:X(t,e,q,n,i,r))}function X(t,e,n,i,r,o){var s=dn(t),a=dn(e),l=Wt,c=Wt;s||(l=fn(t),l=l==Yt?ee:l),a||(c=fn(e),c=c==Yt?ee:c);var h=l==ee&&!u(t),f=c==ee&&!u(e),p=l==c;if(p&&!h)return o||(o=new R),s||gn(t)?rt(t,e,n,i,r,o):ot(t,e,l,n,i,r,o);if(!(r&Ut)){var d=h&&Ue.call(t,"__wrapped__"),g=f&&Ue.call(e,"__wrapped__");if(d||g){var m=d?t.value():t,y=g?e.value():e;return o||(o=new R),n(m,y,i,r,o)}}return!!p&&(o||(o=new R),st(t,e,n,i,r,o))}function Y(t,e,n,i){var r=n.length,o=r,s=!i;if(null==t)return!o;for(t=Object(t);r--;){var a=n[r];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<o;){a=n[r];var u=a[0],l=t[u],c=a[1];if(s&&a[2]){if(void 0===l&&!(u in t))return!1}else{var h=new R;if(i)var f=i(l,c,u,t,e,h);if(!(void 0===f?q(c,l,i,Gt|Ut,h):f))return!1}}return!0}function W(t){if(!Mt(t)||dt(t))return!1;var e=Nt(t)||u(t)?Xe:Ie;return e.test(xt(t))}function H(t){return Pt(t)&&Lt(t.length)&&!!Te[qe.call(t)]}function Z(t){return"function"==typeof t?t:null==t?zt:"object"==typeof t?dn(t)?K(t[0],t[1]):$(t):kt(t)}function J(t){if(!gt(t))return Je(t);var e=[];for(var n in Object(t))Ue.call(t,n)&&"constructor"!=n&&e.push(n);return e}function $(t){var e=ut(t);return 1==e.length&&e[0][2]?yt(e[0][0],e[0][1]):function(n){return n===t||Y(n,t,e)}}function K(t,e){return ft(t)&&mt(e)?yt(_t(t),e):function(n){var i=Ot(n,t);return void 0===i&&i===e?Ft(n,t):q(e,i,void 0,Gt|Ut)}}function Q(t){return function(e){return V(e,t)}}function tt(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;if(ht(r))Ze.call(t,r,1);else if(ft(r,t))delete t[_t(r)];else{var s=it(r),a=vt(t,s);null!=a&&delete a[_t(bt(s))]}}}return t}function et(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+e];return o}function nt(t){if("string"==typeof t)return t;if(At(t))return hn?hn.call(t):"";var e=t+"";return"0"==e&&1/t==-qt?"-0":e}function it(t){return dn(t)?t:pn(t)}function rt(t,e,n,r,o,s){var a=o&Ut,u=t.length,l=e.length;if(u!=l&&!(a&&l>u))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var h=-1,f=!0,p=o&Gt?new M:void 0;for(s.set(t,e),s.set(e,t);++h<u;){var d=t[h],g=e[h];if(r)var m=a?r(g,d,h,e,t,s):r(d,g,h,t,e,s);if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!i(e,function(t,e){if(!p.has(e)&&(d===t||n(d,t,r,o,s)))return p.add(e)})){f=!1;break}}else if(d!==g&&!n(d,g,r,o,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function ot(t,e,n,i,r,o,s){switch(n){case le:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ue:return!(t.byteLength!=e.byteLength||!i(new We(t),new We(e)));case Ht:case Zt:case te:return St(+t,+e);case Jt:return t.name==e.name&&t.message==e.message;case ie:case oe:return t==e+"";case Qt:var a=l;case re:var u=o&Ut;if(a||(a=h),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;o|=Gt,s.set(t,e);var f=rt(a(t),a(e),i,r,o,s);return s.delete(t),f;case se:if(cn)return cn.call(t)==cn.call(e)}return!1}function st(t,e,n,i,r,o){var s=r&Ut,a=Dt(t),u=a.length,l=Dt(e),c=l.length;if(u!=c&&!s)return!1;for(var h=u;h--;){var f=a[h];if(!(s?f in e:Ue.call(e,f)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var d=!0;o.set(t,e),o.set(e,t);for(var g=s;++h<u;){f=a[h];var m=t[f],y=e[f];if(i)var v=s?i(y,m,f,e,t,o):i(m,y,f,t,e,o);if(!(void 0===v?m===y||n(m,y,i,r,o):v)){d=!1;break}g||(g="constructor"==f)}if(d&&!g){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x)&&(d=!1)}return o.delete(t),o.delete(e),d}function at(t,e){var n=t.__data__;return pt(e)?n["string"==typeof e?"string":"hash"]:n.map}function ut(t){for(var e=Dt(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,mt(r)]}return e}function lt(t,e){var n=a(t,e);return W(n)?n:void 0}function ct(t,e,n){e=ft(e,t)?[e]:it(e);for(var i,r=-1,o=e.length;++r<o;){var s=_t(e[r]);if(!(i=null!=t&&n(t,s)))break;t=t[s]}if(i)return i;var o=t?t.length:0;return!!o&&Lt(o)&&ht(s,o)&&(dn(t)||It(t))}function ht(t,e){return e=null==e?Xt:e,!!e&&("number"==typeof t||Ce.test(t))&&t>-1&&t%1==0&&t<e}function ft(t,e){if(dn(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!At(t))||(xe.test(t)||!_e.test(t)||null!=e&&t in Object(e))}function pt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function dt(t){return!!Ve&&Ve in t}function gt(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||Be;return t===n}function mt(t){return t===t&&!Mt(t)}function yt(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function vt(t,e){return 1==e.length?t:V(t,et(e,0,-1))}function _t(t){if("string"==typeof t||At(t))return t;var e=t+"";return"0"==e&&1/t==-qt?"-0":e}function xt(t){if(null!=t){try{return Ge.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function bt(t){var e=t?t.length:0;return e?t[e-1]:void 0}function Et(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Z(e,3);++i<o;){var s=t[i];e(s,i,t)&&(n.push(s),r.push(i))}return tt(t,r),n}function wt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(jt);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s),s};return n.cache=new(wt.Cache||S),n}function St(t,e){return t===e||t!==t&&e!==e}function It(t){return Tt(t)&&Ue.call(t,"callee")&&(!He.call(t,"callee")||qe.call(t)==Yt)}function Ct(t){return null!=t&&Lt(t.length)&&!Nt(t)}function Tt(t){return Pt(t)&&Ct(t)}function Nt(t){var e=Mt(t)?qe.call(t):"";return e==$t||e==Kt}function Lt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Xt}function Mt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Pt(t){return!!t&&"object"==typeof t}function At(t){return"symbol"==typeof t||Pt(t)&&qe.call(t)==se}function Rt(t){return null==t?"":nt(t)}function Ot(t,e,n){var i=null==t?void 0:V(t,e);return void 0===i?n:i}function Ft(t,e){return null!=t&&ct(t,e,U)}function Dt(t){return Ct(t)?B(t):J(t)}function zt(t){return t}function kt(t){return ft(t)?r(_t(t)):Q(t)}var Bt=200,jt="Expected a function",Vt="__lodash_hash_undefined__",Gt=1,Ut=2,qt=1/0,Xt=9007199254740991,Yt="[object Arguments]",Wt="[object Array]",Ht="[object Boolean]",Zt="[object Date]",Jt="[object Error]",$t="[object Function]",Kt="[object GeneratorFunction]",Qt="[object Map]",te="[object Number]",ee="[object Object]",ne="[object Promise]",ie="[object RegExp]",re="[object Set]",oe="[object String]",se="[object Symbol]",ae="[object WeakMap]",ue="[object ArrayBuffer]",le="[object DataView]",ce="[object Float32Array]",he="[object Float64Array]",fe="[object Int8Array]",pe="[object Int16Array]",de="[object Int32Array]",ge="[object Uint8Array]",me="[object Uint8ClampedArray]",ye="[object Uint16Array]",ve="[object Uint32Array]",_e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xe=/^\w*$/,be=/^\./,Ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,we=/[\\^$.*+?()[\]{}|]/g,Se=/\\(\\)?/g,Ie=/^\[object .+?Constructor\]$/,Ce=/^(?:0|[1-9]\d*)$/,Te={};Te[ce]=Te[he]=Te[fe]=Te[pe]=Te[de]=Te[ge]=Te[me]=Te[ye]=Te[ve]=!0,Te[Yt]=Te[Wt]=Te[ue]=Te[Ht]=Te[le]=Te[Zt]=Te[Jt]=Te[$t]=Te[Qt]=Te[te]=Te[ee]=Te[ie]=Te[re]=Te[oe]=Te[ae]=!1;var Ne="object"==typeof t&&t&&t.Object===Object&&t,Le="object"==typeof self&&self&&self.Object===Object&&self,Me=Ne||Le||Function("return this")(),Pe="object"==typeof e&&e&&!e.nodeType&&e,Ae=Pe&&"object"==typeof n&&n&&!n.nodeType&&n,Re=Ae&&Ae.exports===Pe,Oe=Re&&Ne.process,Fe=function(){try{return Oe&&Oe.binding("util")}catch(t){}}(),De=Fe&&Fe.isTypedArray,ze=Array.prototype,ke=Function.prototype,Be=Object.prototype,je=Me["__core-js_shared__"],Ve=function(){var t=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ge=ke.toString,Ue=Be.hasOwnProperty,qe=Be.toString,Xe=RegExp("^"+Ge.call(Ue).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ye=Me.Symbol,We=Me.Uint8Array,He=Be.propertyIsEnumerable,Ze=ze.splice,Je=c(Object.keys,Object),$e=lt(Me,"DataView"),Ke=lt(Me,"Map"),Qe=lt(Me,"Promise"),tn=lt(Me,"Set"),en=lt(Me,"WeakMap"),nn=lt(Object,"create"),rn=xt($e),on=xt(Ke),sn=xt(Qe),an=xt(tn),un=xt(en),ln=Ye?Ye.prototype:void 0,cn=ln?ln.valueOf:void 0,hn=ln?ln.toString:void 0;f.prototype.clear=p,f.prototype.delete=d,f.prototype.get=g,f.prototype.has=m,f.prototype.set=y,v.prototype.clear=_,v.prototype.delete=x,v.prototype.get=b,v.prototype.has=E,v.prototype.set=w,S.prototype.clear=I,S.prototype.delete=C,S.prototype.get=T,S.prototype.has=N,S.prototype.set=L,M.prototype.add=M.prototype.push=P,M.prototype.has=A,R.prototype.clear=O,R.prototype.delete=F,R.prototype.get=D,R.prototype.has=z,R.prototype.set=k;var fn=G;($e&&fn(new $e(new ArrayBuffer(1)))!=le||Ke&&fn(new Ke)!=Qt||Qe&&fn(Qe.resolve())!=ne||tn&&fn(new tn)!=re||en&&fn(new en)!=ae)&&(fn=function(t){var e=qe.call(t),n=e==ee?t.constructor:void 0,i=n?xt(n):void 0;if(i)switch(i){case rn:return le;case on:return Qt;case sn:return ne;case an:return re;case un:return ae}return e});var pn=wt(function(t){t=Rt(t);var e=[];return be.test(t)&&e.push(""),t.replace(Ee,function(t,n,i,r){e.push(i?r.replace(Se,"$1"):n||t)}),e});wt.Cache=S;var dn=Array.isArray,gn=De?s(De):H;n.exports=Et}).call(e,function(){return this}(),n(615)(t))},function(t,e,n){(function(t,n){function i(t,e){for(var n=-1,i=t?t.length:0;++n<i;)if(e(t[n],n,t))return!0;return!1}function r(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function o(t){return function(e){return null==e?void 0:e[t]}}function s(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function a(t){return function(e){return t(e)}}function u(t,e){return null==t?void 0:t[e]}function l(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function c(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function h(t,e){return function(n){return t(e(n))}}function f(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function p(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function d(){this.__data__=hn?hn(null):{}}function g(t){return this.has(t)&&delete this.__data__[t]}function m(t){var e=this.__data__;if(hn){var n=e[t];return n===Vt?void 0:n}return Je.call(e,t)?e[t]:void 0}function y(t){var e=this.__data__;return hn?void 0!==e[t]:Je.call(e,t)}function v(t,e){var n=this.__data__;return n[t]=hn&&void 0===e?Vt:e,this}function _(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function x(){this.__data__=[]}function b(t){var e=this.__data__,n=V(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():nn.call(e,n,1),!0}function E(t){var e=this.__data__,n=V(e,t);return n<0?void 0:e[n][1]}function w(t){return V(this.__data__,t)>-1}function S(t,e){var n=this.__data__,i=V(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function I(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function C(){this.__data__={hash:new p,map:new(an||_),string:new p}}function T(t){return st(this,t).delete(t)}function N(t){return st(this,t).get(t)}function L(t){return st(this,t).has(t)}function M(t,e){return st(this,t).set(t,e),this}function P(t){var e=-1,n=t?t.length:0;for(this.__data__=new I;++e<n;)this.add(t[e])}function A(t){return this.__data__.set(t,Vt),this}function R(t){return this.__data__.has(t)}function O(t){this.__data__=new _(t)}function F(){this.__data__=new _}function D(t){return this.__data__.delete(t)}function z(t){return this.__data__.get(t)}function k(t){return this.__data__.has(t)}function B(t,e){var n=this.__data__;if(n instanceof _){var i=n.__data__;if(!an||i.length<Bt-1)return i.push([t,e]),this;n=this.__data__=new I(i)}return n.set(t,e),this}function j(t,e){var n=En(t)||Et(t)?s(t.length,String):[],i=n.length,r=!!i;for(var o in t)!e&&!Je.call(t,o)||r&&("length"==o||ct(o,i))||n.push(o);return n}function V(t,e){for(var n=t.length;n--;)if(bt(t[n][0],e))return n;return-1}function G(t,e){e=ht(e,t)?[e]:nt(e);for(var n=0,i=e.length;null!=t&&n<i;)t=t[yt(e[n++])];return n&&n==i?t:void 0}function U(t){return $e.call(t)}function q(t,e){return null!=t&&e in Object(t)}function X(t,e,n,i,r){return t===e||(null==t||null==e||!Tt(t)&&!Nt(e)?t!==t&&e!==e:Y(t,e,X,n,i,r))}function Y(t,e,n,i,r,o){var s=En(t),a=En(e),u=Zt,c=Zt;s||(u=xn(t),u=u==Ht?ie:u),a||(c=xn(e),c=c==Ht?ie:c);var h=u==ie&&!l(t),f=c==ie&&!l(e),p=u==c;if(p&&!h)return o||(o=new O),s||wn(t)?it(t,e,n,i,r,o):rt(t,e,u,n,i,r,o);if(!(r&Ut)){var d=h&&Je.call(t,"__wrapped__"),g=f&&Je.call(e,"__wrapped__");if(d||g){var m=d?t.value():t,y=g?e.value():e;return o||(o=new O),n(m,y,i,r,o)}}return!!p&&(o||(o=new O),ot(t,e,n,i,r,o))}function W(t,e,n,i){var r=n.length,o=r,s=!i;if(null==t)return!o;for(t=Object(t);r--;){var a=n[r];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<o;){a=n[r];var u=a[0],l=t[u],c=a[1];if(s&&a[2]){if(void 0===l&&!(u in t))return!1}else{var h=new O;if(i)var f=i(l,c,u,t,e,h);if(!(void 0===f?X(c,l,i,Gt|Ut,h):f))return!1}}return!0}function H(t){if(!Tt(t)||pt(t))return!1;var e=It(t)||l(t)?Ke:Me;return e.test(vt(t))}function Z(t){return Nt(t)&&Ct(t.length)&&!!Re[$e.call(t)]}function J(t){return"function"==typeof t?t:null==t?zt:"object"==typeof t?En(t)?Q(t[0],t[1]):K(t):kt(t)}function $(t){if(!dt(t))return rn(t);var e=[];for(var n in Object(t))Je.call(t,n)&&"constructor"!=n&&e.push(n);return e}function K(t){var e=at(t);return 1==e.length&&e[0][2]?mt(e[0][0],e[0][1]):function(n){return n===t||W(n,t,e)}}
function Q(t,e){return ht(t)&&gt(e)?mt(yt(t),e):function(n){var i=Ot(n,t);return void 0===i&&i===e?Ft(n,t):X(e,i,void 0,Gt|Ut)}}function tt(t){return function(e){return G(e,t)}}function et(t){if("string"==typeof t)return t;if(Lt(t))return _n?_n.call(t):"";var e=t+"";return"0"==e&&1/t==-qt?"-0":e}function nt(t){return En(t)?t:bn(t)}function it(t,e,n,r,o,s){var a=o&Ut,u=t.length,l=e.length;if(u!=l&&!(a&&l>u))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var h=-1,f=!0,p=o&Gt?new P:void 0;for(s.set(t,e),s.set(e,t);++h<u;){var d=t[h],g=e[h];if(r)var m=a?r(g,d,h,e,t,s):r(d,g,h,t,e,s);if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!i(e,function(t,e){if(!p.has(e)&&(d===t||n(d,t,r,o,s)))return p.add(e)})){f=!1;break}}else if(d!==g&&!n(d,g,r,o,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function rt(t,e,n,i,r,o,s){switch(n){case he:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ce:return!(t.byteLength!=e.byteLength||!i(new tn(t),new tn(e)));case Jt:case $t:case ne:return bt(+t,+e);case Kt:return t.name==e.name&&t.message==e.message;case oe:case ae:return t==e+"";case ee:var a=c;case se:var u=o&Ut;if(a||(a=f),t.size!=e.size&&!u)return!1;var l=s.get(t);if(l)return l==e;o|=Gt,s.set(t,e);var h=it(a(t),a(e),i,r,o,s);return s.delete(t),h;case ue:if(vn)return vn.call(t)==vn.call(e)}return!1}function ot(t,e,n,i,r,o){var s=r&Ut,a=Dt(t),u=a.length,l=Dt(e),c=l.length;if(u!=c&&!s)return!1;for(var h=u;h--;){var f=a[h];if(!(s?f in e:Je.call(e,f)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var d=!0;o.set(t,e),o.set(e,t);for(var g=s;++h<u;){f=a[h];var m=t[f],y=e[f];if(i)var v=s?i(y,m,f,e,t,o):i(m,y,f,t,e,o);if(!(void 0===v?m===y||n(m,y,i,r,o):v)){d=!1;break}g||(g="constructor"==f)}if(d&&!g){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x)&&(d=!1)}return o.delete(t),o.delete(e),d}function st(t,e){var n=t.__data__;return ft(e)?n["string"==typeof e?"string":"hash"]:n.map}function at(t){for(var e=Dt(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,gt(r)]}return e}function ut(t,e){var n=u(t,e);return H(n)?n:void 0}function lt(t,e,n){e=ht(e,t)?[e]:nt(e);for(var i,r=-1,o=e.length;++r<o;){var s=yt(e[r]);if(!(i=null!=t&&n(t,s)))break;t=t[s]}if(i)return i;var o=t?t.length:0;return!!o&&Ct(o)&&ct(s,o)&&(En(t)||Et(t))}function ct(t,e){return e=null==e?Xt:e,!!e&&("number"==typeof t||Ae.test(t))&&t>-1&&t%1==0&&t<e}function ht(t,e){if(En(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Lt(t))||(Ee.test(t)||!be.test(t)||null!=e&&t in Object(e))}function ft(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function pt(t){return!!He&&He in t}function dt(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||Ye;return t===n}function gt(t){return t===t&&!Tt(t)}function mt(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function yt(t){if("string"==typeof t||Lt(t))return t;var e=t+"";return"0"==e&&1/t==-qt?"-0":e}function vt(t){if(null!=t){try{return Ze.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function _t(t,e,n){var i=t?t.length:0;if(!i)return-1;var o=null==n?0:Pt(n);return o<0&&(o=on(i+o,0)),r(t,J(e,3),o)}function xt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(jt);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s),s};return n.cache=new(xt.Cache||I),n}function bt(t,e){return t===e||t!==t&&e!==e}function Et(t){return St(t)&&Je.call(t,"callee")&&(!en.call(t,"callee")||$e.call(t)==Ht)}function wt(t){return null!=t&&Ct(t.length)&&!It(t)}function St(t){return Nt(t)&&wt(t)}function It(t){var e=Tt(t)?$e.call(t):"";return e==Qt||e==te}function Ct(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Xt}function Tt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Nt(t){return!!t&&"object"==typeof t}function Lt(t){return"symbol"==typeof t||Nt(t)&&$e.call(t)==ue}function Mt(t){if(!t)return 0===t?t:0;if(t=At(t),t===qt||t===-qt){var e=t<0?-1:1;return e*Yt}return t===t?t:0}function Pt(t){var e=Mt(t),n=e%1;return e===e?n?e-n:e:0}function At(t){if("number"==typeof t)return t;if(Lt(t))return Wt;if(Tt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Tt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ce,"");var n=Le.test(t);return n||Pe.test(t)?Oe(t.slice(2),n?2:8):Ne.test(t)?Wt:+t}function Rt(t){return null==t?"":et(t)}function Ot(t,e,n){var i=null==t?void 0:G(t,e);return void 0===i?n:i}function Ft(t,e){return null!=t&&lt(t,e,q)}function Dt(t){return wt(t)?j(t):$(t)}function zt(t){return t}function kt(t){return ht(t)?o(yt(t)):tt(t)}var Bt=200,jt="Expected a function",Vt="__lodash_hash_undefined__",Gt=1,Ut=2,qt=1/0,Xt=9007199254740991,Yt=1.7976931348623157e308,Wt=NaN,Ht="[object Arguments]",Zt="[object Array]",Jt="[object Boolean]",$t="[object Date]",Kt="[object Error]",Qt="[object Function]",te="[object GeneratorFunction]",ee="[object Map]",ne="[object Number]",ie="[object Object]",re="[object Promise]",oe="[object RegExp]",se="[object Set]",ae="[object String]",ue="[object Symbol]",le="[object WeakMap]",ce="[object ArrayBuffer]",he="[object DataView]",fe="[object Float32Array]",pe="[object Float64Array]",de="[object Int8Array]",ge="[object Int16Array]",me="[object Int32Array]",ye="[object Uint8Array]",ve="[object Uint8ClampedArray]",_e="[object Uint16Array]",xe="[object Uint32Array]",be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ee=/^\w*$/,we=/^\./,Se=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ie=/[\\^$.*+?()[\]{}|]/g,Ce=/^\s+|\s+$/g,Te=/\\(\\)?/g,Ne=/^[-+]0x[0-9a-f]+$/i,Le=/^0b[01]+$/i,Me=/^\[object .+?Constructor\]$/,Pe=/^0o[0-7]+$/i,Ae=/^(?:0|[1-9]\d*)$/,Re={};Re[fe]=Re[pe]=Re[de]=Re[ge]=Re[me]=Re[ye]=Re[ve]=Re[_e]=Re[xe]=!0,Re[Ht]=Re[Zt]=Re[ce]=Re[Jt]=Re[he]=Re[$t]=Re[Kt]=Re[Qt]=Re[ee]=Re[ne]=Re[ie]=Re[oe]=Re[se]=Re[ae]=Re[le]=!1;var Oe=parseInt,Fe="object"==typeof t&&t&&t.Object===Object&&t,De="object"==typeof self&&self&&self.Object===Object&&self,ze=Fe||De||Function("return this")(),ke="object"==typeof e&&e&&!e.nodeType&&e,Be=ke&&"object"==typeof n&&n&&!n.nodeType&&n,je=Be&&Be.exports===ke,Ve=je&&Fe.process,Ge=function(){try{return Ve&&Ve.binding("util")}catch(t){}}(),Ue=Ge&&Ge.isTypedArray,qe=Array.prototype,Xe=Function.prototype,Ye=Object.prototype,We=ze["__core-js_shared__"],He=function(){var t=/[^.]+$/.exec(We&&We.keys&&We.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ze=Xe.toString,Je=Ye.hasOwnProperty,$e=Ye.toString,Ke=RegExp("^"+Ze.call(Je).replace(Ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qe=ze.Symbol,tn=ze.Uint8Array,en=Ye.propertyIsEnumerable,nn=qe.splice,rn=h(Object.keys,Object),on=Math.max,sn=ut(ze,"DataView"),an=ut(ze,"Map"),un=ut(ze,"Promise"),ln=ut(ze,"Set"),cn=ut(ze,"WeakMap"),hn=ut(Object,"create"),fn=vt(sn),pn=vt(an),dn=vt(un),gn=vt(ln),mn=vt(cn),yn=Qe?Qe.prototype:void 0,vn=yn?yn.valueOf:void 0,_n=yn?yn.toString:void 0;p.prototype.clear=d,p.prototype.delete=g,p.prototype.get=m,p.prototype.has=y,p.prototype.set=v,_.prototype.clear=x,_.prototype.delete=b,_.prototype.get=E,_.prototype.has=w,_.prototype.set=S,I.prototype.clear=C,I.prototype.delete=T,I.prototype.get=N,I.prototype.has=L,I.prototype.set=M,P.prototype.add=P.prototype.push=A,P.prototype.has=R,O.prototype.clear=F,O.prototype.delete=D,O.prototype.get=z,O.prototype.has=k,O.prototype.set=B;var xn=U;(sn&&xn(new sn(new ArrayBuffer(1)))!=he||an&&xn(new an)!=ee||un&&xn(un.resolve())!=re||ln&&xn(new ln)!=se||cn&&xn(new cn)!=le)&&(xn=function(t){var e=$e.call(t),n=e==ie?t.constructor:void 0,i=n?vt(n):void 0;if(i)switch(i){case fn:return he;case pn:return ee;case dn:return re;case gn:return se;case mn:return le}return e});var bn=xt(function(t){t=Rt(t);var e=[];return we.test(t)&&e.push(""),t.replace(Se,function(t,n,i,r){e.push(i?r.replace(Te,"$1"):n||t)}),e});xt.Cache=I;var En=Array.isArray,wn=Ue?a(Ue):Z;n.exports=_t}).call(e,function(){return this}(),n(615)(t))},,function(t,e,n){"use strict";t.exports={"ags-mapserver-query":n(663),"ags-featureserver-query":n(669),"mapbox-style":n(670),"maphubs-vector":n(671)}},function(t,e,n){"use strict";var i=n(664),r=n(205)("AGSFeatureServerQuery"),o={load:function(t,e,n,o){return i.getArcGISGeoJSON(e.url).then(function(e){e.bbox&&e.bbox.length>0&&o.state.allowLayersToMoveMap&&o.zoomToData(e),n.addSource(t,{type:"geojson",data:e})},function(t){r("("+o.state.id+") "+t)})},addLayer:function(t,e,n){n.addLayer(t)},removeLayer:function(t,e){e.removeLayer(t.id)},remove:function(t,e){e.removeSource(t)}};t.exports=o},function(t,e,n){"use strict";var i=n(665),r=n(205)("terraformerGL"),o=n(666),s=n(668);t.exports={getArcGISGeoJSON:function(t){var e=this;return e.getArcGISJSON(t).then(function(t){var i=e.convertAGSData(t),o=n(661)(i);return r(o),i.bbox=o,i})},getArcGISJSON:function(t){var e="query?where=1%3D1&text=&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outSR=4326&outFields=&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json";return t.endsWith("/")||(t+="/"),i.get(t+e).use(s).type("json").accept("json").then(function(t){return t.body})},getArcGISFeatureServiceGeoJSON:function(t){var e="query?where=1%3D1&outSR=4326&f=geojson";return t.endsWith("/")||(t+="/"),i.get(t+e).use(s).type("json").accept("json").then(function(t){var e=t.body,i=n(661)(e);return r(i),e.bbox=i,e})},convertAGSData:function(t){for(var e={type:"FeatureCollection",features:[]},n=0;n<t.features.length;n++){var i=o.parse(t.features[n]);i.id=n,e.features.push(i)}return e}}},function(t,e,n){var i=n(616),r=t.exports=n(200),o=r.Request;try{i.config({cancellation:!0})}catch(t){console.warn(["Enabling bluebird cancellation failed.","If you are using bluebird elsewhere in your application,","be sure to enable cancellation there as well.","Promise.config({cancellation: true});"].join(" ")),console.warn(t.stack)}var s=function(t,e){var n;this.message=t,this.name="SuperagentPromiseError",this.originalError=e,Error.captureStackTrace?(Error.captureStackTrace(this,this.constructor),n=this.stack):n=new Error(t).stack,Object.defineProperty&&Object.defineProperty(this,"stack",{get:function(){return this.originalError?n+"\nCaused by:  "+this.originalError.stack:n}})};s.prototype=new Error,s.prototype.constructor=s,r.SuperagentPromiseError=s,o.prototype.promise=function(){var t,e=this;return new i(function(n,i,r){e.end(function(r,o){if("undefined"!=typeof o&&null!==o&&o.status>=400){var a="cannot "+e.method+" "+e.url+" ("+o.status+")";t=new s(a),t.status=o.status,t.body=o.body,t.res=o,i(t)}else r?i(new s("Bad request",r)):n(o)}),"function"==typeof r&&r(function(){e.abort()})})},o.prototype.then=function(){var t=this.promise();return t.then.apply(t,arguments)},o.prototype.catch=function(){var t=this.promise();return t.catch.apply(t,arguments)}},function(t,e,n){!function(i,r){if("object"==typeof t&&"object"==typeof t.exports&&(e=t.exports=r(n(667))),"object"==typeof i.navigator){if(!i.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");i.Terraformer.ArcGIS=r(i.Terraformer)}}(this,function(t){function e(t){var e,n,i,r,o=0,s=0,a=[];i=t.match(/((\+|\-)[^\+\-]+)/g),r=parseInt(i[0],32);for(var u=1;u<i.length;u+=2)e=parseInt(i[u],32)+o,o=e,n=parseInt(i[u+1],32)+s,s=n,a.push([e/r,n/r]);return a}function n(t){return i(t[0],t[t.length-1])||t.push(t[0]),t}function i(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function r(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function o(t){var e,n=0,i=0,r=t.length,o=t[i];for(i;i<r-1;i++)e=t[i+1],n+=(e[0]-o[0])*(e[1]+o[1]),o=e;return n>=0}function s(t){var e=[],i=t.slice(0),r=n(i.shift().slice(0));if(r.length>=4){o(r)||r.reverse(),e.push(r);for(var s=0;s<i.length;s++){var a=n(i[s].slice(0));a.length>=4&&(o(a)&&a.reverse(),e.push(a))}}return e}function a(t){for(var e=[],n=0;n<t.length;n++)for(var i=s(t[n]),r=i.length-1;r>=0;r--){var o=i[r].slice(0);e.push(o)}return e}function u(e,n){var i=t.Tools.arraysIntersectArrays(e,n),r=t.Tools.coordinatesContainPoint(e,n[0]);return!(i||!r)}function l(e){for(var i,r,s,a=[],l=[],c=0;c<e.length;c++){var h=n(e[c].slice(0));if(!(h.length<4))if(o(h)){var f=[h];a.push(f)}else l.push(h)}for(var p=[];l.length;){s=l.pop();var d=!1;for(i=a.length-1;i>=0;i--)if(r=a[i][0],u(r,s)){a[i].push(s),d=!0;break}d||p.push(s)}for(;p.length;){s=p.pop();var g=!1;for(i=a.length-1;i>=0;i--)if(r=a[i][0],t.Tools.arraysIntersectArrays(r,s)){a[i].push(s),g=!0;break}g||a.push([s.reverse()])}return 1===a.length?{type:"Polygon",coordinates:a[0]}:{type:"MultiPolygon",coordinates:a}}function c(n,i){var o={};i=i||{},i.idAttribute=i.idAttribute||void 0,"number"==typeof n.x&&"number"==typeof n.y&&(o.type="Point",o.coordinates=[n.x,n.y],(n.z||n.m)&&o.coordinates.push(n.z),n.m&&o.coordinates.push(n.m)),n.points&&(o.type="MultiPoint",o.coordinates=n.points.slice(0)),n.paths&&(1===n.paths.length?(o.type="LineString",o.coordinates=n.paths[0].slice(0)):(o.type="MultiLineString",o.coordinates=n.paths.slice(0))),n.rings&&(o=l(n.rings.slice(0))),(n.compressedGeometry||n.geometry||n.attributes)&&(o.type="Feature",n.compressedGeometry&&(n.geometry={paths:[e(n.compressedGeometry)]}),o.geometry=n.geometry?c(n.geometry):null,o.properties=n.attributes?r(n.attributes):null,n.attributes&&(o.id=n.attributes[i.idAttribute]||n.attributes.OBJECTID||n.attributes.FID));var s=n.geometry?n.geometry.spatialReference:n.spatialReference;return s&&102100===s.wkid&&(o=t.toGeographic(o)),new t.Primitive(o)}function h(e,n){var i;n=n||{};var o=n.idAttribute||"OBJECTID";i=n.sr?{wkid:n.sr}:e&&e.crs===t.MercatorCRS?{wkid:102100}:{wkid:4326};var u,l={};switch(e.type){case"Point":l.x=e.coordinates[0],l.y=e.coordinates[1],e.coordinates[2]&&(l.z=e.coordinates[2]),e.coordinates[3]&&(l.m=e.coordinates[3]),l.spatialReference=i;break;case"MultiPoint":l.points=e.coordinates.slice(0),l.spatialReference=i;break;case"LineString":l.paths=[e.coordinates.slice(0)],l.spatialReference=i;break;case"MultiLineString":l.paths=e.coordinates.slice(0),l.spatialReference=i;break;case"Polygon":l.rings=s(e.coordinates.slice(0)),l.spatialReference=i;break;case"MultiPolygon":l.rings=a(e.coordinates.slice(0)),l.spatialReference=i;break;case"Feature":e.geometry&&(l.geometry=h(e.geometry,n)),l.attributes=e.properties?r(e.properties):{},e.id&&(l.attributes[o]=e.id);break;case"FeatureCollection":for(l=[],u=0;u<e.features.length;u++)l.push(h(e.features[u],n));break;case"GeometryCollection":for(l=[],u=0;u<e.geometries.length;u++)l.push(h(e.geometries[u],n))}return l}function f(n){return new t.LineString(e(n))}var p={};return p.parse=c,p.convert=h,p.toGeoJSON=c,p.fromGeoJSON=h,p.parseCompressedGeometry=f,p})},,,function(t,e,n){"use strict";var i=n(664),r=n(205)("AGSFeatureServerQuery"),o={load:function(t,e,n,o){return i.getArcGISFeatureServiceGeoJSON(e.url).then(function(e){e.bbox&&e.bbox.length>0&&o.state.allowLayersToMoveMap&&o.zoomToData(e),n.addSource(t,{type:"geojson",data:e})},function(t){r("("+o.state.id+") "+t)})},addLayer:function(t,e,n){n.addLayer(t)},removeLayer:function(t,e){e.removeLayer(t.id)},remove:function(t,e){e.removeSource(t)}};t.exports=o},function(t,e,n){"use strict";var i=n(665),r={load:function(t,e,n,r){var o=e.mapboxid,s="https://api.mapbox.com/styles/v1/"+o+"?access_token="+MAPHUBS_CONFIG.MAPBOX_ACCESS_TOKEN;return i.get(s).then(function(t){var e=t.body;r.mbstyle=e,Object.keys(e.sources).forEach(function(t){var i=e.sources[t];n.addSource(t,i)})})},addLayer:function(t,e,n){this.mbstyle.layers.forEach(function(t){"background"!==t.type&&n.addLayer(t)})},removeLayer:function(t,e){this.mbstyle.layers.forEach(function(t){e.removeLayer(t.id)})},remove:function(t,e){Object.keys(this.mbstyle.sources).forEach(function(t){e.removeSource(t)})}};t.exports=r},function(t,e,n){"use strict";var i=n(665),r=n(205)("MapHubsSource"),o=n(200),s=n(612),a=n(209).checkClientError,u=n(1),l=n(28),c=n(672),h=n(172),f={};"undefined"!=typeof window&&(f=n(646));var p={load:function(t,e,n,o){var a=e.url.replace("{MAPHUBS_DOMAIN}",s.getBaseUrl());return i.get(a).then(function(e){var i=e.body;i.type="vector",n.on("source.load",function(e){e.source.id===t&&o.state.allowLayersToMoveMap&&(r("Zooming map extent of source: "+e.source.id),n.fitBounds([[i.bounds[0],i.bounds[1]],[i.bounds[2],i.bounds[3]]]))}),n.addSource(t,i)},function(t){r("("+o.state.id+") "+t)})},addLayer:function(t,e,n,i){if(t.metadata&&t.metadata["maphubs:markers"]){var p=t.metadata["maphubs:layer_id"];h(".maphubs-marker-"+p).each(function(t,e){l.unmountComponentAtNode(e),h(e).remove()})}if(t.metadata&&t.metadata["maphubs:markers"]&&t.metadata["maphubs:markers"].enabled){var d=JSON.parse(JSON.stringify(t.metadata["maphubs:markers"]));d.dataUrl=d.dataUrl.replace("{MAPHUBS_DOMAIN}",s.getBaseUrl());var g=t.metadata["maphubs:layer_id"];o.get(d.dataUrl).type("json").accept("json").end(function(t,e){a(e,t,function(t){if(t)r(t);else{var o=e.body;o.features.forEach(function(t){var e=document.createElement("div");e.className="maphubs-marker-"+g,e.style.width=d.width+"px",e.style.height=d.height+"px",e.addEventListener("click",function(e){e.stopPropagation(),t.properties.layer_id=g,i.setSelectionFilter([t]),i.setState({selectedFeatures:[t],selected:!0}),n.addClass("selected")}),l.render(u.createElement(c,d),e);var r,o=-d.width/2;r="MAP_PIN"===d.shape||"SQUARE_PIN"===d.shape?-d.height:-d.height/2,new f.Marker(e,{offset:[o,r]}).setLngLat(t.geometry.coordinates).addTo(n)})}},function(t){t()})})}else t.metadata&&t.metadata["maphubs:showBehindBaseMapLabels"]?n.addLayer(t,"water"):n.addLayer(t)},removeLayer:function(t,e){if(t.metadata&&t.metadata["maphubs:markers"]){var n=t.metadata["maphubs:layer_id"];h(".maphubs-marker-"+n).each(function(t,e){l.unmountComponentAtNode(e),h(e).remove()})}e.removeLayer(t.id)},remove:function(t,e){e.removeSource(t)}};t.exports=p},function(t,e,n){"use strict";var i=n(1),r=i.createClass({displayName:"Marker",propTypes:{shape:i.PropTypes.string,width:i.PropTypes.number,height:i.PropTypes.number,shapeFill:i.PropTypes.string,shapeFillOpacity:i.PropTypes.number,shapeStroke:i.PropTypes.string,shapeStrokeWidth:i.PropTypes.number,icon:i.PropTypes.string,iconFill:i.PropTypes.string,iconFillOpacity:i.PropTypes.number,iconStroke:i.PropTypes.string,iconStrokeWidth:i.PropTypes.number},getDefaultProps:function(){return{shape:"MAP_PIN",width:48,height:48,shapeFill:"red",shapeFillOpacity:1,shapeStroke:"black",shapeStrokeWidth:1,icon:"none",iconFill:"white",iconFillOpacity:1,iconStroke:"#212121",iconStrokeWidth:0}},render:function(){var t="",e=.75,n=48;if("SQUARE"===this.props.shape)t=i.createElement("rect",{x:"1",y:"1",width:n,height:n}),n+=2;else if("CIRCLE"===this.props.shape){var r=n/2;t=i.createElement("circle",{cx:r+1,cy:r+1,r:r}),n+=2}else"MAP_PIN"===this.props.shape?(e=.5,t=i.createElement("path",{d:"M25.015,2.4c-7.8,0-14.121,6.204-14.121,13.854C10.894,23.906,25.015,49,25.015,49s14.122-25.094,14.122-32.746\tC39.137,8.604,32.812,2.4,25.015,2.4z"})):"SQUARE_PIN"===this.props.shape?t=i.createElement("polygon",{points:"45,1 5,1 5,41 20.093,41 25.532,49.05 30.972,41 45,41 "}):"SQUARE_ROUNDED"===this.props.shape&&(n=50,t=i.createElement("path",{d:"M49,41c0,4.4-3.6,8-8,8H9c-4.4,0-8-3.6-8-8V9c0-4.4,3.6-8,8-8h32c4.4,0,8,3.6,8,8V41z"}));var o="0 0 "+n+" "+n,s="";if(this.props.icon&&"none"!==this.props.icon){var a,u,l=n*e,c=n*e;"MAP_PIN"===this.props.shape?(a=13,u=6):"SQUARE_PIN"===this.props.shape?(a=6.5,u=6.5):"SQUARE"===this.props.shape?(a=6.5,u=9.5):"SQUARE_ROUNDED"===this.props.shape?(a=6.5,u=9.5):"CIRCLE"===this.props.shape&&(a=6.5,u=9.5),s=i.createElement("g",{fill:this.props.iconFill,width:n,height:n,fillOpacity:this.props.iconFillOpacity,stroke:this.props.iconStroke,strokeWidth:this.props.iconStrokeWidth},i.createElement("use",{x:a,y:u,width:l,height:c,xlinkHref:"#"+this.props.icon}))}return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:this.props.width,height:this.props.height,x:"0px",y:"0px",viewBox:o,preserveAspectRatio:"xMidYMid meet"},i.createElement("g",{stroke:this.props.shapeStroke,fill:this.props.shapeFill,strokeWidth:this.props.shapeStrokeWidth,fillOpacity:this.props.shapeFillOpacity},t),s)}});t.exports=r},function(t,e,n){"use strict";var i=n(1),r=i.createClass({displayName:"MarkerSprites",render:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"none"}},i.createElement("symbol",{id:"maphubs-icon-template",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"}),i.createElement("symbol",{id:"maphubs-icon-turtle2",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M60.089,37.105c0.276,0.478,0.947,0.902,1.497,0.949l4.355,0.364c0.55,0.046,0.769-0.303,0.455-0.758   c-2.17-3.169-5.301-5.357-9-6.567c-0.524-0.171-0.732,0.1-0.457,0.578L60.089,37.105z"}),i.createElement("path",{d:"M60.007,39.872l-4.194,3.621c-0.418,0.361-0.471,0.997-0.115,1.42l3.584,4.28c0.354,0.423,1.088,0.804,1.638,0.85   l7.687,0.642c0.549,0.046,1.017-0.269,1.029-0.704c0.01-0.264,0.014-0.527,0.014-0.788c0-3.247-0.578-6.068-1.6-8.489   c-0.214-0.509-0.859-0.948-1.408-0.994l-4.879-0.407C61.21,39.255,60.425,39.511,60.007,39.872z"}),i.createElement("path",{d:"M68.533,51.719l-7.369-0.615c-0.551-0.046-1.299,0.246-1.673,0.653L55.1,56.539c-0.373,0.406-0.431,1.109-0.127,1.57   l3.521,5.351c0.304,0.461,0.996,0.872,1.546,0.918l4.89,0.408c0.551,0.046,1.188-0.322,1.411-0.827   c1.571-3.564,2.649-7.43,3.087-11.161C69.492,52.249,69.083,51.766,68.533,51.719z"}),i.createElement("path",{d:"M64.393,65.882l-4.496-0.377c-0.549-0.046-1.334,0.209-1.754,0.569l-3.52,3.031c-0.419,0.359-0.471,0.994-0.115,1.418   l3.104,3.697c0.354,0.422,0.695,0.77,0.76,0.774s0.462-0.274,0.867-0.647c2.171-1.99,4.097-4.586,5.685-7.498   C65.188,66.363,64.941,65.928,64.393,65.882z"}),i.createElement("path",{d:"M45.376,69.105l-3.519-3.031c-0.418-0.36-1.204-0.615-1.754-0.569l-4.496,0.377c-0.55,0.046-0.794,0.481-0.529,0.968   c1.588,2.912,3.513,5.508,5.682,7.498c0.407,0.373,0.806,0.654,0.87,0.648s0.404-0.354,0.759-0.775l3.102-3.697   C45.847,70.102,45.795,69.466,45.376,69.105z"}),i.createElement("path",{d:"M52.546,56.732c0.554,0,1.304-0.33,1.677-0.736l4.258-4.638c0.373-0.406,0.39-1.08,0.035-1.502l-3.826-4.567   c-0.354-0.423-1.088-0.767-1.642-0.767h-6.096c-0.552,0-1.288,0.343-1.642,0.767l-3.823,4.567   c-0.354,0.423-0.339,1.096,0.034,1.502l4.258,4.638c0.374,0.406,1.124,0.736,1.676,0.736H52.546z"}),i.createElement("path",{d:"M42.628,65.395l3.48,2.996c0.418,0.36,1.206,0.652,1.758,0.652h4.268c0.554,0,1.339-0.292,1.759-0.652l3.479-2.996   c0.419-0.359,0.512-1.025,0.208-1.486l-3.515-5.34c-0.305-0.461-0.998-0.836-1.551-0.836h-5.029c-0.552,0-1.246,0.375-1.55,0.836   l-3.515,5.34C42.117,64.368,42.21,65.034,42.628,65.395z"}),i.createElement("path",{d:"M39.959,64.378c0.55-0.046,1.243-0.457,1.546-0.918l3.521-5.351c0.304-0.461,0.247-1.164-0.126-1.57l-4.392-4.782   c-0.374-0.407-1.123-0.699-1.673-0.653l-7.369,0.615c-0.55,0.046-0.959,0.53-0.896,1.079c0.437,3.731,1.515,7.599,3.087,11.161   c0.223,0.506,0.861,0.873,1.412,0.827L39.959,64.378z"}),i.createElement("path",{d:"M53.426,70.809c-0.354-0.422-1.09-0.766-1.643-0.766h-3.566c-0.552,0-1.288,0.344-1.643,0.766l-3.487,4.156   c-0.355,0.424-0.283,1.032,0.182,1.331c2.1,1.353,4.366,2.134,6.731,2.134s4.632-0.781,6.73-2.134   c0.465-0.299,0.537-0.907,0.183-1.331L53.426,70.809z"}),i.createElement("path",{d:"M40.923,39.329l4.102,3.54c0.418,0.361,1.205,0.653,1.757,0.653h6.436c0.554,0,1.339-0.292,1.757-0.653l4.104-3.54   c0.418-0.361,0.531-1.041,0.256-1.519l-3.746-6.465c-0.275-0.478-0.938-0.958-1.482-1.049c-1.326-0.221-2.695-0.34-4.105-0.34   s-2.78,0.12-4.104,0.341c-0.545,0.091-1.207,0.571-1.484,1.049l-3.746,6.465C40.39,38.289,40.504,38.968,40.923,39.329z"}),i.createElement("path",{d:"M31.397,50.684l7.685-0.642c0.55-0.046,1.284-0.427,1.639-0.85l3.583-4.28c0.354-0.423,0.303-1.059-0.115-1.42   l-4.196-3.621c-0.418-0.361-1.203-0.616-1.753-0.57l-4.877,0.407c-0.55,0.046-1.196,0.485-1.41,0.994   c-1.021,2.421-1.6,5.242-1.6,8.489c0,0.261,0.005,0.524,0.014,0.788C30.38,50.416,30.847,50.729,31.397,50.684z"}),i.createElement("path",{d:"M34.059,38.417l4.354-0.364c0.55-0.046,1.221-0.471,1.498-0.949l3.148-5.435c0.277-0.478,0.068-0.749-0.457-0.577   c-3.699,1.209-6.83,3.397-9.001,6.567C33.29,38.115,33.509,38.464,34.059,38.417z"}),i.createElement("path",{d:"M28.27,39.146c0.27-0.65,0.7-1.26,1.24-1.78c0.11-0.69,0.38-1.37,0.8-1.97c1.13-1.66,2.5-3.13,4.07-4.38   c-1.22-1.75-2.75-4.2-4.6-4.89c-2.24-0.84-5.89,0.69-9.11,1.68c-6.47,2-10.94,8.27-13.4,13.97c-2.62,5.87-2.43,10.32-2.04,9.89   c-0.08-0.17,2.56-1.54,3.71-3.35c2.77-4.35,6.54-11.24,12.56-9.86c2.44,0.04,4.59,0.67,6.48,1.43   C28.07,39.636,28.17,39.386,28.27,39.146z"}),i.createElement("path",{d:"M92.73,41.776c-2.461-5.7-6.932-11.97-13.4-13.97c-3.221-0.99-6.87-2.52-9.109-1.68c-1.851,0.69-3.381,3.15-4.591,4.9   c1.57,1.25,2.931,2.72,4.07,4.38c0.409,0.59,0.68,1.271,0.79,1.96c0.539,0.52,0.97,1.14,1.24,1.8c0.1,0.24,0.199,0.48,0.278,0.72   c1.9-0.75,4.05-1.39,6.49-1.43c6.021-1.38,9.79,5.51,12.56,9.86c1.15,1.81,3.791,3.18,3.711,3.35   C95.16,52.096,95.35,47.646,92.73,41.776z"}),i.createElement("path",{d:"M33.09,71.316c-2.37,1.068-4.62,2.75-6.16,5.18c-1.82,2.729-4.61,5.59-4.38,8.439c0.14,1.721,2.06,1.801,3.13,3.229   c1.31,1.739,1.96,4.62,2.82,5.37c1.74,1.52,3.06-5.98,7.63-12.92c0.73-1.141,1.51-2.131,2.28-3c-0.12-0.102-0.24-0.211-0.36-0.32   C36.26,75.646,34.59,73.646,33.09,71.316z"}),i.createElement("path",{d:"M66.9,71.336c-1.5,2.32-3.16,4.32-4.961,5.96c-0.129,0.12-0.25,0.22-0.369,0.32c0.779,0.88,1.56,1.88,2.3,3.03   c4.569,6.938,5.899,14.438,7.63,12.92c0.859-0.75,1.51-3.642,2.82-5.371c1.068-1.439,2.988-1.521,3.13-3.239   c0.229-2.84-2.562-5.71-4.38-8.431C71.529,74.096,69.279,72.406,66.9,71.336z"}),i.createElement("path",{d:"M67.561,68.286c0.279-0.521,0.42-1.091,0.449-1.649c0.45-0.41,0.83-0.9,1.08-1.471c1.7-3.859,2.852-8.02,3.32-12.02   c0.061-0.541,0.01-1.082-0.15-1.602c0.221-0.45,0.36-0.94,0.37-1.47c0.011-0.29,0.021-0.59,0.021-0.88c0-3.52-0.619-6.77-1.84-9.65   c-0.271-0.65-0.721-1.23-1.279-1.69c-0.03-0.65-0.25-1.3-0.66-1.89c-2.471-3.61-6.109-6.28-10.54-7.73   c-0.41-0.13-0.819-0.2-1.21-0.2c-0.221,0-0.43,0.03-0.63,0.07c-0.07-0.04-0.13-0.08-0.2-0.12c-0.529-0.32-1.109-0.55-1.689-0.65   c-1.521-0.25-3.069-0.38-4.601-0.38c-1.53,0-3.08,0.13-4.6,0.38c-0.58,0.1-1.16,0.33-1.69,0.65c-0.07,0.04-0.13,0.08-0.2,0.12   c-0.2-0.04-0.41-0.07-0.63-0.07c-0.39,0-0.8,0.07-1.21,0.21c-4.43,1.44-8.07,4.11-10.54,7.72c-0.41,0.59-0.63,1.24-0.66,1.89   c-0.56,0.46-1.01,1.04-1.28,1.68c-1.22,2.89-1.84,6.14-1.84,9.66c0,0.29,0.01,0.59,0.02,0.88c0.01,0.529,0.15,1.02,0.37,1.47   c-0.16,0.52-0.21,1.061-0.15,1.602c0.47,4,1.62,8.158,3.32,12.02c0.25,0.57,0.63,1.061,1.08,1.471   c0.03,0.561,0.17,1.129,0.45,1.649c1.82,3.319,3.93,6.11,6.29,8.271c0.72,0.659,1.31,1.061,1.88,1.26c0.28,0.391,0.62,0.74,1.03,1   C44.33,80.546,50,82.426,50,82.426s5.67-1.88,8.359-3.609c0.41-0.26,0.75-0.609,1.029-0.989c0.58-0.21,1.16-0.61,1.881-1.271   C63.63,74.396,65.74,71.605,67.561,68.286z M59.91,75.086c-0.5,0.471-0.9,0.75-1.189,0.85l-0.591,0.211l-0.36,0.5   c-0.148,0.211-0.318,0.381-0.5,0.49c-2.358,1.521-4.81,2.289-7.27,2.289s-4.91-0.77-7.27-2.289c-0.18-0.109-0.34-0.279-0.5-0.49   l-0.36-0.5l-0.58-0.211c-0.3-0.108-0.7-0.379-1.2-0.85c-2.2-2.02-4.18-4.63-5.89-7.76c-0.13-0.23-0.2-0.5-0.21-0.78l-0.04-0.84   l-0.63-0.56c-0.26-0.23-0.45-0.5-0.58-0.78c-1.62-3.69-2.72-7.65-3.16-11.45c-0.03-0.26-0.01-0.529,0.07-0.79l0.23-0.76l-0.35-0.7   c-0.1-0.21-0.16-0.43-0.16-0.65c-0.01-0.28-0.02-0.55-0.02-0.82c0-3.25,0.57-6.24,1.68-8.88c0.14-0.33,0.39-0.65,0.72-0.93   l0.66-0.56l0.05-0.86c0.02-0.29,0.13-0.6,0.32-0.87c2.22-3.24,5.51-5.64,9.51-6.95c0.21-0.07,0.41-0.11,0.59-0.11   c0.1,0,0.18,0.02,0.27,0.04l0.25,0.04l0.54,0.1l0.66-0.43c0.38-0.25,0.78-0.42,1.13-0.48c1.41-0.23,2.84-0.35,4.27-0.35   c1.42,0,2.859,0.12,4.27,0.35c0.352,0.06,0.75,0.23,1.131,0.48l0.66,0.43l0.539-0.1l0.25-0.04c0.08-0.02,0.17-0.04,0.271-0.04   c0.18,0,0.38,0.04,0.59,0.11c4,1.31,7.29,3.71,9.51,6.95c0.19,0.28,0.301,0.57,0.32,0.88l0.05,0.86l0.66,0.55   c0.33,0.28,0.58,0.6,0.72,0.93c1.11,2.64,1.682,5.63,1.682,8.88c0,0.27-0.012,0.54-0.021,0.82c0,0.22-0.061,0.44-0.16,0.65   l-0.35,0.71l0.229,0.75c0.08,0.261,0.102,0.53,0.07,0.79c-0.439,3.8-1.54,7.76-3.16,11.45c-0.13,0.28-0.318,0.55-0.58,0.78   l-0.63,0.56l-0.04,0.83c-0.01,0.29-0.08,0.56-0.21,0.8C64.09,70.456,62.109,73.066,59.91,75.086z"}),i.createElement("path",{d:"M43.44,24.236c0.19,0.85,0.28,1.72,0.29,2.6c0.48-0.23,1-0.4,1.5-0.49c1.59-0.26,3.2-0.39,4.77-0.39   c1.57,0,3.18,0.13,4.76,0.39c0.5,0.09,1.021,0.26,1.51,0.49c0.012-0.87,0.11-1.74,0.291-2.6c1.399-1.13,2.26-2.72,2.26-4.7   c0-1.58-0.539-3.31-1.471-4.87c-0.658-5.19-7.22-8.43-7.22-8.43s-6.11,3.02-7.14,7.88c-1.13,1.7-1.81,3.66-1.81,5.42   C41.18,21.516,42.04,23.106,43.44,24.236z"}))),i.createElement("symbol",{id:"maphubs-icon-farmer-wife",viewBox:"0 0 124.836 308.19",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M40.3,38.587c0.089-0.605,0.197-1.211,0.338-1.817C43.01,26.586,51.958,19.475,62.4,19.475   c1.705,0,3.417,0.197,5.089,0.586c9.255,2.155,15.823,9.805,17.071,18.696c21.771-1.595,37.216-5.59,37.216-10.269   c0-5.103-18.362-15.919-43.273-19.271C78.265,4.103,71.659,0,63.526,0c-8.133,0-14.739,4.103-14.978,9.217   C23.639,12.569,5.276,23.385,5.276,28.488C5.276,33.008,19.691,36.891,40.3,38.587z"}),i.createElement("ellipse",{transform:"matrix(0.2268 -0.9739 0.9739 0.2268 7.511 93.1425)",cx:"62.418",cy:"41.841",rx:"20.362",ry:"20.362"}),i.createElement("path",{d:"M5.86,158.108c3.813,0.631,7.417-1.95,8.049-5.765c4.038-24.668,9.4-43.387,17.028-55.036   c2.391-3.671,4.949-6.65,7.754-9.043C20.199,128.981,20.087,213.5,20.087,213.5c0,4.608,8.522,7.752,20.155,9.436V237.5   c0,5,4.052,9.052,9.052,9.052c4.998,0,9.052-4.052,9.052-9.052v-13.151c2.708,0.06,5.438,0.06,8.147,0V237.5   c0,5,4.052,9.052,9.052,9.052c4.998,0,9.052-4.052,9.052-9.052v-14.564c11.63-1.685,20.152-4.828,20.152-9.436   c0,0-0.109-84.518-18.601-125.234c5.05,4.308,9.327,10.537,13.061,19.087c4.939,11.326,8.671,26.497,11.72,44.991   c0.567,3.428,3.534,5.859,6.897,5.86c0.38,0,0.764-0.031,1.151-0.095c3.815-0.631,6.396-4.233,5.765-8.048   c-4.242-25.417-9.59-45.622-19.101-60.374c-4.762-7.351-10.706-13.324-18.007-17.339c-7.292-4.029-15.777-5.999-25.216-5.989   c-9.437-0.01-17.924,1.96-25.216,5.989c-10.99,6.056-18.748,16.368-24.409,29.421c-5.69,13.107-9.535,29.221-12.697,48.292   C-0.536,153.875,2.045,157.478,5.86,158.108z"}))),i.createElement("symbol",{id:"maphubs-icon-farmer-family",viewBox:"0 0 312.976 321.99375000000003",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("g",null,i.createElement("path",{d:"M87.571,38.513c2.079-11.416,12.09-20.101,24.097-20.101c12.006,0,22.017,8.685,24.096,20.101    c20.142-1.733,34.153-5.568,34.153-10.025c0-5.103-18.362-15.919-43.273-19.271C126.406,4.103,119.8,0,111.667,0    c-8.133,0-14.739,4.103-14.978,9.217c-17.916,2.411-32.443,8.682-39.19,13.913v9.407C63.053,35.19,73.893,37.336,87.571,38.513z"}),i.createElement("path",{d:"M19.128,101.597c-3.996,1.885-5.707,6.653-3.822,10.649c1.364,2.894,4.24,4.59,7.241,4.59    c0.067,0,0.135-0.009,0.203-0.011V99.898C21.546,100.46,20.339,101.025,19.128,101.597z"}),i.createElement("path",{d:"M73.076,95.227c4.461-1.858,8.356-3.451,11.546-4.741v154.746c0,6.83,5.537,12.363,12.363,12.363    c6.828,0,12.365-5.533,12.365-12.363V154.96h4.635v90.271c0,6.83,5.537,12.363,12.363,12.363c6.828,0,12.365-5.533,12.365-12.363    V95.482c0.593,1.216,1.191,2.611,1.781,4.238c2.819,7.813,5.189,20.63,5.18,40.638c0,5.516-0.177,11.574-0.565,18.224    c-0.257,4.411,3.109,8.195,7.52,8.452c0.159,0.009,0.318,0.014,0.475,0.014c4.205,0,7.729-3.283,7.979-7.535    c0.404-6.933,0.591-13.299,0.591-19.156c-0.04-30.182-4.861-46.887-11.434-56.932c-3.285-4.986-7.128-8.183-10.68-9.955    c-2.319-1.169-4.445-1.72-6.14-1.964c-0.766-0.254-1.583-0.398-2.436-0.398H92.351c-0.681,0-1.338,0.097-1.967,0.262    c-0.774,0.056-1.554,0.225-2.316,0.521v-0.002c-0.09,0.036-25.279,9.792-55.317,23.409v17.597    C47.813,105.939,62.108,99.798,73.076,95.227z"
}),i.createElement("circle",{cx:"111.668",cy:"42.913",r:"22.5"}),i.createElement("path",{d:"M24.75,255.5h6v-184H48.5c3.867-0.002,6.997-3.133,6.999-7.001V18.834H49.5v45.665c-0.002,0.55-0.45,1-1,1H30.75V18.833    h-6v46.666H6.999c-0.55,0-1-0.45-1-1V18.834H0v45.665c0.002,3.868,3.132,6.999,6.999,7.001h17.75V255.5z"})),i.createElement("g",null,i.createElement("path",{d:"M228.44,49.587c0.089-0.605,0.197-1.211,0.338-1.817c2.372-10.184,11.32-17.295,21.762-17.295    c1.705,0,3.417,0.197,5.089,0.586c9.255,2.155,15.823,9.805,17.071,18.696c21.771-1.595,37.216-5.59,37.216-10.269    c0-5.103-18.362-15.919-43.272-19.271C266.406,15.103,259.8,11,251.667,11c-8.133,0-14.739,4.103-14.978,9.217    c-24.91,3.352-43.272,14.168-43.272,19.271C193.417,44.008,207.831,47.891,228.44,49.587z"}),i.createElement("ellipse",{transform:"matrix(0.2268 -0.9739 0.9739 0.2268 142.268 284.8857)",cx:"250.559",cy:"52.841",rx:"20.362",ry:"20.362"}),i.createElement("path",{d:"M194,169.108c3.813,0.631,7.417-1.95,8.049-5.765c4.038-24.668,9.4-43.387,17.028-55.036    c2.391-3.671,4.949-6.65,7.754-9.043C208.339,139.981,208.228,224.5,208.228,224.5c0,4.608,8.522,7.752,20.155,9.436V248.5    c0,5,4.052,9.052,9.052,9.052c4.998,0,9.052-4.052,9.052-9.052v-13.151c2.708,0.06,5.438,0.06,8.146,0V248.5    c0,5,4.052,9.052,9.052,9.052c4.998,0,9.052-4.052,9.052-9.052v-14.564c11.63-1.685,20.152-4.828,20.152-9.436    c0,0-0.109-84.518-18.6-125.234c5.05,4.308,9.327,10.537,13.06,19.087c4.94,11.326,8.671,26.497,11.72,44.991    c0.567,3.428,3.534,5.859,6.898,5.86c0.38,0,0.764-0.031,1.151-0.095c3.815-0.631,6.396-4.233,5.765-8.048    c-4.242-25.417-9.59-45.622-19.101-60.374c-4.762-7.351-10.706-13.324-18.007-17.339c-7.292-4.029-15.777-5.999-25.216-5.989    c-9.436-0.01-17.924,1.96-25.216,5.989c-10.99,6.056-18.748,16.368-24.409,29.421c-5.69,13.107-9.535,29.221-12.697,48.292    C187.604,164.875,190.186,168.478,194,169.108z"})))),i.createElement("symbol",{id:"maphubs-icon-fox",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M89.919,68.213l-6.457-11.138l-9.084-15.139L62.023,36.22l-14.45-0.26l-12.429,2.391l-6.026-3.604l-6.035-3.45l3-4.392  l-0.016-2.991h-1.532l-3.947,3.213l-3.318,4.232l-6.982,4.802l-0.094,2.086l-5.117,5.527l1.345,1.083l4.057-0.957l5.212-0.126  l4.265,2.716l5.665,7.98l7.641,4.519l1.829,11.557l-1.022,2.206l-2.26,0.269l-1.237,2.046l1.077,1.021h2.367l4.627-4.896  l-0.269-7.036l0.978-7.09l12.205-3.241l3.444,4.949l8.555,6.027l-0.162,2.099l-3.705,5.058l-1.782,0.108l-0.915,1.937l1.614,0.699  l4.628-0.322l5.219-10.491l-1.184-2.207l-2.906-2.853l2.529-8.34l0.431-3.658l0.646,8.123l3.39,9.257l15.443,9.953l8.125-0.03  L89.919,68.213z M26.732,53.37l-6.089-7.676l-4.574-2.743l-7.424,0.001l7.586-2.906l7.021,2.609l5.327,5.381l3.605,2.332  l0.821,6.205L26.732,53.37z M51.286,53.121l-11.81,2.462l1.001-4.427l11.211,1.456L51.286,53.121z M79.506,67.481l3.903-1.26  l1.563-3.091l3.889,5.854l3.695,4.195l-5.643-0.484L79.506,67.481z"})),i.createElement("symbol",{id:"maphubs-icon-dolphin",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M97.938,72.279c-0.438-0.537-0.938-1.096-1.57-1.754c-2.088-2.172-4.909-4.82-8.246-6.043  c-1.534-0.562-4.633-1.426-5.605-1.426c-0.113,0-0.195,0.021-0.277,0.045c-1.641-8.574-4.697-17.323-10.865-23.704  c-2.904-3.005-6.391-5.382-10.282-6.921c-2.987-1.183-6.127-1.884-9.31-2.296c-1.661-0.311-3.315-2.078-3.259-3.816  c0.031-0.973,0.532-1.862,0.971-2.707c0.434-0.834,0.905-1.653,1.301-2.504c0.312-0.668,0.577-1.808-0.146-2.329  c-0.586-0.422-1.512-0.267-2.162-0.125c-2.38,0.52-4.614,1.807-6.516,3.293c-1.282,1.001-2.474,2.127-3.522,3.372  c-0.848,1.009-1.502,2.165-2.415,3.115c-0.493,0.513-1.009,1.033-1.599,1.436c-0.197,0.135-0.515,0.402-0.767,0.395  c-0.271-0.008-0.541-0.001-0.811,0.011c-1.513,0.065-3.021,0.29-4.5,0.608c-6.157,1.321-11.944,4.179-17.029,7.855  c-1.782,1.288-3.538,2.653-5.142,4.16c-1.156,1.085-2.24,2.266-2.989,3.677c-1.462,2.752-1.311,5.843-0.503,8.765  c-0.296,1.133-0.631,2.246-0.98,3.362c-0.241,0.774-0.431,1.582-0.515,2.39c-0.089,0.844-0.208,2.243,0.557,2.851  c0.584,0.462,1.65,0.112,2.24-0.144c0.972-0.422,1.641-1.156,2.422-1.83c0.855-0.738,4.686-3.578,5.834-3.815  c0.694-0.146,1.438,0.053,2.108,0.228c1.25,0.325,3.096,0.938,3.806,2.125c0.708,1.184,1.891,2.223,3.097,2.864  c2.177,1.163,4.517,1.084,6.837,0.419c0.766-0.221,1.225-0.764,1.094-1.616c-0.176-1.144-1.289-1.729-2.196-2.271  c-0.854-0.508-1.695-1.062-2.456-1.699c-0.239-0.2-0.531-0.432-0.767-0.691c0.86-0.242,4.749-0.608,5.788-0.724  c0.138-0.017,0.275-0.03,0.412-0.045c0.007,0.005,0.013,0.008,0.023,0.015c0.213,0.154,0.435,0.295,0.662,0.428  c1.132,0.664,2.354,1.186,3.608,1.572c1.848,0.571,3.816,1.049,5.759,0.773c0.948-0.135,3.009-0.428,3.414-1.52  c0.168-0.457,0.217-1.095-0.132-1.485c-0.352-0.394-1.111-0.427-1.585-0.556c-0.877-0.242-1.756-0.502-2.598-0.854  c-0.174-0.071-0.351-0.146-0.522-0.229c1.097-0.437,12.216-2.129,14.548-2.164c1.229-0.018,2.438,0.119,3.654,0.271  c5.188,0.649,10.246,2.754,13.973,6.478c1.201,1.198,4.688,4.643,5.656,5.898L76.3,65.499c-0.321,0.212-0.922,0.604-1.618,1.823  c-1.621,2.826-1.836,5.104-1.662,8.087l0.02,0.311c0.078,1.366,0.166,2.914,0.854,4.134c0.151,0.267,0.959,1.596,2.065,1.596  c0.218,0,0.429-0.051,0.628-0.152c0.611-0.312,1.045-1.031,1.463-1.729c0.244-0.404,0.495-0.822,0.727-1.045  c1.061-1.018,2.197-1.816,3.922-2.76c1.488-0.813,2.957-1.193,4.621-1.193l0.164,0.002c1.535,0.025,3.201,0.22,5.093,0.598  c1.481,0.299,2.597,0.569,3.663,0.895c0.307,0.093,0.654,0.196,1.025,0.196c0.301,0,0.573-0.069,0.812-0.21  c0.412-0.24,0.674-0.615,0.76-1.087C99.02,73.936,98.329,72.758,97.938,72.279z"})),i.createElement("symbol",{id:"maphubs-icon-gorilla",viewBox:"0 0 67 77.09875",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.834,61.679C21.26,61.679,19.822,54.195,13,48C6.08,41.715,1.818,42.496,3,32  c17.764-9.237,33.223-20.777,49-32c5.59,1.41,6.402,7.598,9,12c-2.801,0.532-5.199,1.468-8,2c-1.376,3.027,0.477,3.572,0,8  c-2.375,1.645-4.299-3.845-8-4c2.368,2.632,5.623,4.377,6,9c-0.479,4.521-4.076,5.924-6,9c-0.438,9.771,1.271,17.395,4,24  c-0.744,2.256-5.609,0.391-8,1c-1.902-1.131-1.969-5.58-7-6c-2.859-4.945,0.361-11.336,1-16c-3.492-1.697-8.077,2.922-14,2  c2.17,7.83,8.206,12.472,11.874,16.011c1.166,1.125,3.596,1.042,3.557,2.501C36.377,61.511,32.584,61.679,30.834,61.679z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M54,15c1.753-0.914,4.99-0.344,6-2c0.625,4.477,3.957,15.752-6,14  C51.447,23.718,55.167,20.024,54,15"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M52,28c1.793-0.127,2.109,1.225,4,1c2.333,11.334,9.008,18.326,11,30  c-2.006,2.994-8.209,1.791-13,2c0.014-1.987,2.729-1.271,2-4c-6.367-3.633-4.016-15.984-9-21C48.014,32.68,52.535,32.868,52,28"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5,33.666c7.76,0.24,3.014,21.82,6.5,26.334c-2.566,1.848-11.361,1.399-14,0  C0.475,53.809,6.088,38.921,7.5,33.666"})),i.createElement("symbol",{id:"maphubs-icon-hummingbird",viewBox:"0 0 100 81.8825",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M92.427,17.571C70.58,27.783,75.895,29.818,59.203,33.86c0.621,1.767,0.639,3.313,1.607,5.894  c14.625-3.563,10.521-7.906,39.627-20.034C99.189,18.031,95.527,16.775,92.427,17.571z"}),i.createElement("path",{d:"M92.081,15.546c2.444-1.143,5.196-2.363,8.356-3.68c-2.645-3.579-9.394-3.813-16.598-2.852  c-9.357,1.249-19.486,4.516-22.395,5.096c-5.143,1.028-11.405,3.646-15.24,3.085c-1.35-0.197-2.16-1.087-2.717-2.358  c-1.024-2.34-1.175-5.992-2.144-9.143c-1.496-4.862-6.405-6.312-10.753-5.47c-2.792,0.541-3.927,2.104-8.79,2.571  C13.469,1.678,0.438,1.488,0.438,1.488c4.769,1.963,16.036,3.599,20.336,4.628c4.301,1.029,5.103,7.855,5.891,14.072  c0.91,7.183,2.107,15.252,7.25,22.266c5.143,7.013,11.284,7.763,16.032,7.646c2.608-0.065,8.54,3.894,12.155,6.461  c4.133,2.935,12.25,10.66,13.371,8.603c1.123-2.058-1.775-3.927-10.099-15.147c-4.072-5.49-5.877-8.91-6.808-11.383  c-0.969-2.578-0.986-4.127-1.607-5.893C74.367,29.355,70.234,25.759,92.081,15.546z"})),i.createElement("symbol",{id:"maphubs-icon-whale",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M89.445,16.084c-0.977,0.161-8.383,0.357-11.742,0.357h-5.841h-6.28c-4.234,0.05-8.605,0.849-9.93,1.395  c0,0-1.66,0.605-2.878,1.804c-0.73,0.719-2.212,3.278-2.774,4.454c-0.558-1.171-2.045-3.734-2.775-4.454  c-1.217-1.199-2.878-1.804-2.878-1.804c-1.324-0.546-5.695-1.345-9.93-1.395h-6.28h-5.841c-3.359,0-10.765-0.196-11.742-0.357  c-5.553-0.912-5.565-1.352-5.553-0.912s4.044,11.565,15.981,14.602c3.982,1.013,10.734,3.032,17.172,4.485  c5.084,1.146,5.505,4.733,5.633,6.621C44.402,49.971,34.403,82.617,31.46,95h37.079c-2.942-12.383-12.941-45.029-12.326-54.12  c0.127-1.888,0.549-5.476,5.633-6.621c6.438-1.453,13.189-3.472,17.172-4.485c11.938-3.037,15.969-14.163,15.981-14.602  S94.999,15.172,89.445,16.084z"})),i.createElement("symbol",{id:"maphubs-icon-chipmunk",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M94.385,33.357c-2.204-7.303-7.676-13.073-16.309-17.171c-0.368-0.16-21.233-8.851-33.894,15.719  c-0.262,0.424-5.436,9.052-2.651,23.129c-2.499-5.367-2.207-10.652-1.919-15.773c0.124-2.216,0.241-4.309,0.132-6.36  c-0.4-7.424-6.101-12.899-6.344-13.128c-0.343-0.324-0.834-0.447-1.284-0.32c-0.455,0.126-0.81,0.48-0.939,0.933l-1.237,4.393  C14.728,25.816,8.853,38.32,8.604,38.863c-0.243,0.534-0.113,1.164,0.322,1.558c3.144,2.847,6.586,4.24,9.849,4.802  c-7.55,4.343-13.368,10.209-13.656,10.502c-0.391,0.398-0.496,0.997-0.263,1.504c0.232,0.507,0.754,0.828,1.309,0.785  c4.183-0.261,7.725-0.052,10.695,0.409c-6.674,11.369-2.67,20.407-0.917,23.415c-6.122,1.388-7.088,5.904-7.135,6.143  c-0.078,0.395,0.026,0.804,0.283,1.114c0.255,0.31,0.637,0.491,1.039,0.491h29.318c0.05,0,0.098-0.013,0.148-0.018  c0.039,0.003,0.076,0.014,0.115,0.014c0.139,0,0.279-0.022,0.417-0.066c25.661-8.348,23.71-26.992,23.693-27.126  c-0.033-0.411-0.666-10.111,9.913-12.666c1.025-0.248,2.025-0.373,2.972-0.373c8.208,0,11.139,9.311,11.26,9.707  c0.155,0.509,0.596,0.88,1.123,0.945c0.549,0.064,1.047-0.186,1.321-0.642C90.731,58.824,98.237,46.119,94.385,33.357z   M21.428,84.181c0.727,0.057,1.388-0.503,1.442-1.244c0.055-0.742-0.503-1.388-1.244-1.442c-1.003-0.075-1.903-0.069-2.757-0.029  c-0.036-0.068-0.053-0.141-0.101-0.204c-0.074-0.095-7.145-9.485,0.913-22.285c7.002,1.65,9.951,4.624,10.012,4.686  c0.264,0.283,0.624,0.426,0.983,0.426c0.328,0,0.656-0.119,0.916-0.359c0.546-0.506,0.578-1.358,0.072-1.904  c-0.27-0.291-6.332-6.625-21.847-6.625c-0.059,0-0.12,0-0.18,0c3.091-2.721,8.591-7.107,14.554-9.721  c4.688-0.314,8.185-1.855,8.465-1.981c0.678-0.307,0.977-1.104,0.672-1.781c-0.305-0.677-1.102-0.979-1.781-0.674  c-0.116,0.053-11.375,4.983-20.025-1.95c1.598-2.816,7.385-11.256,19.5-11.672c0.585-0.02,1.092-0.417,1.251-0.981l0.827-2.938  c1.551,1.991,3.735,5.48,3.953,9.544c0.103,1.903-0.011,3.924-0.13,6.065c-0.309,5.513-0.66,11.763,2.684,18.111  c4.037,7.663,7.609,16.894-0.874,29.668H12.308C13.428,85.497,15.935,83.781,21.428,84.181z M89.373,55.455  c-1.738-3.445-5.582-8.801-12.667-8.801c-1.16,0-2.372,0.151-3.603,0.448C60.245,50.208,61.126,62.486,61.14,62.658  c0.02,0.155,1.518,14.566-17.587,22.704c7.722-11.94,3.109-22.571,2.913-23.002c-6.78-17.58-0.058-28.931,0.061-29.131  c6.808-13.203,16.005-15.975,22.521-15.975c4.604,0,7.917,1.385,7.92,1.385c7.864,3.735,12.855,8.942,14.834,15.479  C94.358,42.565,91.271,51.286,89.373,55.455z"})),i.createElement("symbol",{id:"maphubs-icon-turtle",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M9.059,60.191"}),i.createElement("circle",{cx:"88.411",cy:"51.88",r:"1.923"}),i.createElement("g",null,i.createElement("circle",{fill:"none",cx:"88.411",cy:"51.879",r:"4.711"}),i.createElement("path",{d:"M99.649,60.34c0-9.979-8.09-18.07-18.069-18.07c-1.558,0-3.061,0.218-4.503,0.589    c-6.161-11.124-18.014-18.657-31.63-18.657c-16.838,0-30.987,11.516-34.999,27.102c-0.145-0.006-0.289-0.021-0.436-0.021    C5.023,51.295,0.987,55.35,1,60.34l8.31-0.021c0,0.007,0,0.014,0,0.021h11.032l-7.365,12.756    c8.643,4.99,19.693,2.029,24.682-6.614c1.129-1.956,1.831-4.037,2.172-6.142h11.574c0.4,1.546,0.995,3.066,1.832,4.517    c4.99,8.644,16.039,11.604,24.683,6.615L71.492,60.34h10.094H99.649z M88.411,47.168c2.601,0,4.709,2.109,4.709,4.711    c0,2.601-2.108,4.71-4.709,4.71c-2.603,0-4.712-2.109-4.712-4.71C83.699,49.277,85.809,47.168,88.411,47.168z"})))),i.createElement("symbol",{id:"maphubs-icon-elephant",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M98.843,48.244L90,27.708v-0.001C89,23.92,85.585,21,81.541,21h-9.188l-4.344-1.864c-3.842-1.688-7.863-1.014-8.982,1.53  L58.871,21h0.435l-7.225,16.496c-0.485,1.104-0.28,2.467,0.576,3.799c0.891,1.383,2.365,2.587,4.152,3.373l12.99,5.5  c1.323,0.58,3.2,0.752,4.2,0.752v0.006c2,0,3.3-0.545,4.036-1.7l0.214,0.989C77.285,51.303,75.6,52,73.647,52  c-0.001,0-0.008,0-0.008,0c-1.414,0-2.918-0.336-4.341-0.961l-12.808-5.63c-1.928-0.847-3.529-2.147-4.503-3.66  c-1.006-1.563-1.232-3.216-0.637-4.574L58.436,21H36.891c-2.171-1-4.477-0.981-6.869-0.981c-30.692,0-29.34,42.737-29.34,42.737  C0.653,62.863,0.64,62.98,0.64,63.088c0,0.537,0.358,1.033,0.902,1.18c0.65,0.177,1.321-0.203,1.498-0.854l4.285-15.122  C7.503,49.146,7,53.156,7,54.553v26.339c0,1.812,0.553,3.447,1.738,4.634c1.186,1.185,3.199,1.92,5.008,1.92  c1.94,0,3.253-0.844,5.253-2.183v-15.67c0-0.461-0.09-0.835,0.371-0.835c0.231,0,0.338,0.093,0.49,0.243  c0.15,0.152,0.139,0.36,0.139,0.592v15.923c0,0.092,0.034,0.18,0.121,0.265c1.184,1.187,2.671,1.921,4.48,1.921  c3.62,0,6.399-2.935,6.399-6.554V70h-0.087l0.518-0.35c2.569-0.371,5.171-3.155,7.475-4.403l0.58-0.068  c-0.377,5.285,6.064,5.246,5.166,15.305c0.042,2.181,0.743,3.428,1.929,4.615c1.184,1.184,2.944,1.909,4.752,1.909  c3.618,0,6.668-2.943,6.668-6.562V61.839c1-0.1,2-1.774,2-1.936v21.184c0,1.809,0.585,3.448,1.774,4.634  c1.182,1.186,2.843,1.919,4.651,1.919c3.617,0,6.574-2.935,6.574-6.553V54.746C73,54.63,73.014,54,73.115,54h8.426  c5.011,0,0.22-5.085,1.115-5.406c0.894-0.32,2.203,4.456,4.193,3.333l0.571,1.278c0.194,0.446,0.673,26.489,0.673,26.489  c0,1.101,0.446,2.088,1.167,2.809c0.72,0.721,1.717,1.162,2.816,1.162c2.199,0,4.028-1.785,4.028-3.985  C96.105,79.68,100.225,51.416,98.843,48.244z M87.164,40.433c-0.502,0.609-1,0.959-1.785,0.959c-1.442,0-2.379-1.172-2.379-2.613  c0-0.021,0-0.043,0-0.065c0-1.402,0.968-2.546,2.379-2.546c1.44,0,2.49,1.172,2.49,2.612C87.869,39.38,87.543,39.967,87.164,40.433z  "})),i.createElement("symbol",{id:"maphubs-icon-wolf",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M98.984,51.463c0.269-1.746,0.786-1.177,0.487-2.744c-0.082-0.43-0.298-0.845-0.491-1.602 c-0.198-0.777-0.796-2.059-0.986-2.826c-0.233-0.956,0.005-1.373-0.207-2.343c-0.214-0.978-0.732-1.394-0.908-2.382 c-0.11-0.622-1.562-1.575-1.7-2.211c-0.231-1.065-1.338-1.941-2.193-2.709c-0.914-0.825-2.053-3.304-2.702-4.463 c-0.492-0.877-2.316-2.059-3.434-2.875c-1.888-2.316-3.02-3.974-6.505-5.328c-3.612-1.405-6.908-0.986-10.79-1.079 c-2.366-0.058-4.646,0-7.012,0c-2.092,0-3.247-0.924-5.313-0.612c-2.018,0.304-3.112-0.613-5.057-1.226 c-1.112-0.351-2.512-0.407-3.727-0.412c-0.666-0.004-1.533,0.164-2.085-0.197c0.135-0.329,0.499,0.05,0.81-0.369 c0.311-0.419-3.866-0.45-5.803-0.689c-1.938-0.239-2.867-1.742-4.25-2.036c-1.383-0.295-5.569-2.987-6.727-3.559 c-0.662-0.327-2.934-1.412-5.121-2.327c-0.862-0.36-0.29-0.47-1.127-1.069c-0.837-0.598-3.17-1.091-3.769-1.33 c-0.599-0.24-2.369-0.572-3.928-2.643c0,0-2.032-2.151-2.272-1.552C14,3.314,14.018,4.344,13.935,4.719 c-0.033,0.144-0.08,0.19-0.158,0.07c-0.537-0.4-3.911-2.172-4.156-1.751c-0.244,0.421,2.99,4.833,2.731,5.031 c-0.257,0.198-0.542,0.114-0.736,0.389c0,0-1.378,1.246-1.6,1.513c-0.363,0.44-1.545,1.663-1.545,1.663s-0.662,1.658-0.765,2.659 L7.585,15.02l-0.517,0.866c-1.861,1.567-3.192,3.021-3.654,3.225c-0.461,0.205-2.729,1.396-3.215,1.762 c-0.693,0.519,0.039,1.661,0.626,1.942c0.204,0.229,0.38,0.516,0.595,0.66c1.454,0.981,1.768,0.426,2.335,0.507l1.047-0.135 c0.387-0.102,0.477-0.211,0.643-0.271c0.476-0.173,1.205-0.553,1.726-0.813c0.519-0.259,2.24-1.698,2.587-1.914 c0.346-0.215,1.299-0.711,1.776-0.842c0.476-0.129,0.864-0.043,0.864-0.043s-0.736,0.562-0.952,0.692s-0.969,0.782-1.358,1.214 c-0.389,0.432-1.558,1.982-1.558,1.982s-0.727,0.349-0.927,0.539c-0.304,0.287-0.674,0.674-0.674,0.674s0.161-0.003-0.186-0.219 c-0.347-0.215-0.402-0.168-0.272,0.265c0.131,0.433,0.086,0.257,0.086,0.257s-0.405,0.542-0.691,0.997 c-0.448,0.709-0.652,1.528-0.659,1.54c-0.101,0.608,0.306,0.643,0.879-0.135c0.033-0.083,0.387-0.563,0.387-0.563 s0.102-0.161,0.188,0.056c0.087,0.217-0.087,0.282,0.114,0.433c0.718,0.369,1.303,0.613,1.754,0.506 c0.994-0.236,1.558-1.053,2.354-1.663c1.527-1.171,1.875-1.552,2.442-1.914c0.668-0.427,0.882-0.44,1.083,1.455 c0.101,0.959-0.212,1.482-0.096,2.1c0.073,0.395,0.185-0.826,0.288-0.443c0.247,0.931,0.854,1.923,0.854,1.923l0.082-0.494 c0,0,0.384,0.409,0.637,0.76c0.701,0.976,0.486,0.004,0.603-0.39c0,0-0.168,0.694,0.638,1.579c0.186-0.442,0.765,0.514,1.464,1.385 c1.167,1.452,3.289,4.078,3.33,3.601c0.123-1.4,0.302-0.069,0.302-0.069c1.373,1.146,3.417,4.412,4.846,6.1 c0.168,0.2,0.421,0.197,0.581,0.076c0.161-0.125,0.537-0.042,1.402,0.782c0.107,0.168,0.466,1.062,0.571,1.229 c0.269,0.428,1.157,0.226,1.357,0.687c0.168,0.384,0.304,0.757,0.467,1.095c0.508,1.058,0.899,1.24,1.399,2.375 c0.482,1.094,0.709,2.767,0.785,3.986c0.232,3.772-0.143,6.432-0.407,8.37c-0.229,1.685-0.812,3.174-0.955,4.891 c-0.104,1.252-0.193,2.354-0.589,3.544c-0.271,0.818-0.547,1.411-0.793,2.226c-0.206,0.686-0.962,1.858-1.487,2.243 c-0.815,0.601-1.693,0.175-2.659,0.377c-0.221,0.048-0.186,0.134-0.636,0.383l-0.702,0.136c-0.511,0.281-0.865,0.834-0.973,1.137 c-0.21,0.586,0,0.681,0.467,0.805c0.355,0.095,1.279,0.15,1.716,0.17c0.942,0.041,1.892-0.22,2.757,0.021 c0.158,0.045,0.388,0.323,0.848,0.359c0.669,0.053,1.663-0.021,2.056-0.021c0.798,0,1.216-0.064,2.015-0.064 c1.247,0,1.293,0.204,2.451-0.085c1.423-0.356,3.366,0.01,3.889-0.403c0.16-0.126,0.104-0.845,0.403-1.271 c0.499-0.71,0.309-1.016,0.561-1.194c0.251-0.179,0.483,0.636,0.636,0.181c0.152-0.455,1.193-2.911,1.697-4.062 c0.504-1.149,0.666-1.32,1.153-2.485c0.27-0.646,0.592-1.221,0.606-1.91c-0.292,1.566,0.345-2.08,0.243-1.91 c0.511-1.191,0.165-0.089,0.575-1.333c0.778-2.362,0.479-4.726,0.954-7.196c0.193-1.011,0.788-1.878,0.988-2.895 c0.098-0.499-0.063-1.342,0.157-1.773c0.253-0.497,1.381-0.97,1.835-1.384c0.741-0.675,1.464-1.142,2.32-1.654 c0.849-0.509,1.44-1.326,2.334-1.75c0.911-0.432,1.135-0.194,2.121-0.057c1.626,0.228,2.963-0.316,4.458-0.446 c1.671-0.146,1.311,0.291,1.715,0.256l0.973-0.074c0.811,0.088,1.889-0.471,2.711-0.188c1.25,0.431,1.247,2.688,1.849,3.739 c1.511,2.643,4.66,5.696,5.783,6.205c1.212,0.547,1.734,2.033,2.843,2.871c1.572,1.194,2.477,2.672,3.302,4.583 c1.12,2.585,0.673,4.939-0.324,7.363c-0.524,1.272-0.832,1.979-1.875,2.673c-0.493,0.33-1.734-0.079-2.273,0.227 c-0.281,0.158-0.826,0.551-1.058,0.676c-0.637,0.345-1.805,1.008-1.303,1.772c0.626,0.955,2.118,0.104,3.092,0.382 c1.003,0.286,1.836-0.158,2.933-0.158c0.822,0.002,2.381,0.1,2.935-0.519c0.341-0.382,0.417-0.609,0.557-1.06 c0.152-0.5,0.207-1.135,0.52-1.597c0.239-0.351,0.732-0.985,0.834-1.303c0.173-0.544-0.023-1.26,0.203-1.751 c0.354-0.77,1.392-1.949,1.744-2.855c0.249-0.637-0.021-2.544,0.855-2.687c-0.07-1.007-0.217-1.44,0.228-2.092 c0.418-0.615-0.819-1.308-1.145-1.973c-0.423-0.873-0.833-1.552-1.618-2.23c-0.892-0.771-1.803-1.771-3.007-2.674 c2.31,0.899,4.749,2.532,6.265,4.504c1.354,1.763,2.673,3.804,2.943,6.021c0.23,1.865,1.225,4.907-0.012,5.894 c-0.528,0.422-1.086,0.486-1.477,0.885c-0.277,0.284-0.538,0.95-0.87,1.5c-0.131,0.217-0.425,0.444-0.483,0.636 c-0.104,0.334-0.264,0.72-0.12,0.957c0.124,0.207,0.596,0.409,0.937,0.519c0.159,0.052,0.623-0.026,0.833,0 c1.018,0.132,2.162,0.106,3.132-0.22c0.565-0.191,1.277-0.469,1.823-0.704c0.838-0.364,0.729-0.325,1.289-1.018 c-0.32,0.589-0.256-1.101-0.297-1.094c0.055-0.904-0.247-1.118-0.184-2.01c0.044-0.62,0.358-1.254,0.395-1.933 c0.09-1.687,0.534-3.886,0.307-5.551c-0.158-1.161-1.038-1.532-1.582-2.596c-0.346-0.679-0.71-1.299-1.175-1.926 c-0.194-0.261-0.766-2.257-2.212-4.46c-1.618-2.463-3.232-4.132-3.401-4.781c-0.126-0.175-1.374-1.34-1.812-2.548 c-0.086-0.237-0.298-1.395-0.086-1.457c0.218-0.065,0.293,0.572,0.583,0.881c0.523,0.562,1.333,1.597,1.688,1.775 c-0.004,0.03,0.571,1.563,0.586,1.613c0.285,0.391,1.5,1.07,1.973,2.145c0.944,2.146,2.451,3.239,2.917,4.636 c0.093,0.275,0.922,0.545,1.588,1.329c1.093,1.287,2.434,2.406,2.533,1.847c0.104-0.591-0.052-2.006,0.171-2.79 c0.169-0.599,0.708-1.592,0.635-2.061C99.087,53.45,98.766,52.887,98.984,51.463z M39.62,64.505 c-0.325,0.544-0.445,3.646-0.614,4.431c-0.092,0.424-1.09,2.043-1.167,2.796c-0.086,0.848-1.784,2.213-1.784,2.213 s-0.449-0.32-0.531-0.554c-0.081-0.234,0.254-0.619,0.449-1.062c0.176-0.4,0.281-1.26,0.488-1.676 c0.435-0.869,0.122-0.632,0.231-1.283s0.601,0.16,1.104-0.879c0.123-0.249,0.115-0.56,0.213-0.892 c0.05-0.164,0.018-0.581,0.148-0.678c0.202-0.149,0.569,0.042,0.509-0.211c-0.054-0.223,0.132-1.674,0.057-1.95 c-0.077-0.279,0.038-1.482,0.243-2.152c0.673-2.203,0.752-4.832,1.061-4.336C40.178,58.516,39.946,63.961,39.62,64.505z"})),i.createElement("symbol",{id:"maphubs-icon-truck",viewBox:"0 0 100 51.086",preserveAspectRatio:"xMidYMid meet"},i.createElement("circle",{cx:"13.955",cy:"42.837",r:"8.249"}),i.createElement("circle",{cx:"76.521",cy:"42.837",r:"8.249"}),i.createElement("rect",{x:"32.363",width:"67.637",height:"32.322"}),i.createElement("path",{d:"M70.126,34.587H28.073V7.999L6.438,9.646c0,0-4.745,11.746-6.438,15.884v11.202v4.021c0,1.151,0.933,2.084,2.083,2.084 h1.432c0-5.767,4.675-10.44,10.44-10.44c5.767,0,10.44,4.674,10.44,10.44h41.686C66.081,39.48,67.666,36.497,70.126,34.587z M19.733,23.681L3.08,25.775l4.81-12.491l11.844-0.903V23.681z"}),i.createElement("path",{d:"M99.944,34.587H82.917c2.46,1.91,4.045,4.894,4.045,8.25h2.437h4.322l6.244-2.211L99.944,34.587z"})),i.createElement("symbol",{id:"maphubs-icon-cargo-ship",viewBox:"0 0 120 150",preserveAspectRatio:"xMidYMid meet"},i.createElement("polygon",{points:"-715.8,-44.8 -791.8,-44.8 -801.8,-51.5 -801.8,-60.1 -705.8,-60.1 "}),i.createElement("rect",{x:"-801.8",y:"-89.9",width:"17.5",height:"29.8"}),i.createElement("line",{x1:"-793",y1:"-89.9",x2:"-793",y2:"-99.1"}),i.createElement("line",{x1:"-801.8",y1:"-44.8",x2:"-705.8",y2:"-44.8"}),i.createElement("rect",{x:"-796.4",y:"-70",width:"6.8",height:"9.9"}),i.createElement("g",null,i.createElement("rect",{x:"-784.3",y:"-67.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-771",y:"-67.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-757.6",y:"-67.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-744.3",y:"-67.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-731",y:"-67.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-784.3",y:"-75.1",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-771",y:"-75.1",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-757.6",y:"-75.1",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-784.3",y:"-82.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-771",y:"-82.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-757.6",y:"-82.6",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-744.3",y:"-75.1",width:"13.3",height:"7.5"}),i.createElement("rect",{x:"-731",y:"-75.1",width:"13.3",height:"7.5"})),i.createElement("g",null,i.createElement("path",{d:"M21,33.3c0-0.6-0.5-1-1-1c-0.6,0-1,0.5-1,1v8.3h2V33.3z"}),i.createElement("path",{d:"M109,85.7h-7l-1.3,2h8.3c0.6,0,1-0.5,1-1C110,86.1,109.5,85.7,109,85.7z"}),i.createElement("path",{d:"M11,85.7c-0.6,0-1,0.5-1,1c0,0.6,0.5,1,1,1h6.8l-3.1-2H11z"}),i.createElement("polygon",{points:"107.1,74.1 96.9,74.1 83.3,74.1 69.7,74.1 56.1,74.1 42.5,74.1 28.9,74.1 23.4,74.1 16.5,74.1 12,74.1 12,81.3    21.5,87.7 98.2,87.7  "}),i.createElement("path",{d:"M15.5,63c0-0.6,0.5-1,1-1h6.9c0.6,0,1,0.5,1,1v9.1h3.4v-6.6v-7.7v-7.7v-6.4H12v28.4h3.4V63z"}),i.createElement("rect",{x:"17.5",y:"64",width:"4.8",height:"8.1"}),i.createElement("rect",{x:"29.9",y:"66.5",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"43.5",y:"66.5",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"57.1",y:"66.5",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"70.7",y:"66.5",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"84.3",y:"66.5",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"29.9",y:"58.8",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"43.5",y:"58.8",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"57.1",y:"58.8",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"29.9",y:"51.2",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"43.5",y:"51.2",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"57.1",y:"51.2",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"70.7",y:"58.8",width:"11.6",height:"5.6"}),i.createElement("rect",{x:"84.3",y:"58.8",width:"11.6",height:"5.6"}))),i.createElement("symbol",{id:"maphubs-icon-tug-boat",viewBox:"0 0 90 112.5",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M66.8,18.7l0,25l20.1-5.8L74.4,75.5l-63.9,3.7L5.7,66.9l54.6-12.5l-0.4-3L14.8,62.3l-1.3-3.5l24.6-5.4l-0.2-28.7l-3.1,0.6   l-0.3-3.7l6-1.5v-8.2h-2.6v-3h9.5v2.8h-2.6v7.4l25.7-5l0.3,3.8L66.8,18.7z M56.1,39c4,0,7.3-3.3,7.3-7.3s-3.3-7.3-7.3-7.3   s-7.3,3.3-7.3,7.3S52.1,39,56.1,39z"}),i.createElement("polygon",{points:"2.1,58.7 6.1,67.9 65,57.3 62,47.9  "}))),i.createElement("symbol",{id:"maphubs-icon-boat",viewBox:"0 0 763.17 953.9625",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M742.981,346.057c4.425,16.63,0.506,29.036-6.658,41.065c-51.952,87.241-124.926,147.343-223.962,173.905  c-59.403,15.932-119.879,19.647-181.122,17.261c-55.904-2.177-109.105-14.367-159.803-37.946  c-59.671-27.752-128.118-79.646-150.96-143.741c-4.411-12.378-2.205-20.409,7.962-28.155c4.992-3.803,10.86-6.739,16.73-9.063  c98.775-39.113,199.236-73.166,303.138-95.807c45.529-9.921,91.79-16.558,137.817-24.092c24.411-3.996,49.123-6.174,73.511-10.286  c9.837-1.659,18.139-0.437,26.259,4.782c2.378,1.528,5.092,2.555,7.392,4.18C643.564,273.706,695.162,307.437,742.981,346.057z   M552.123,419.154c-13.897-16.568-85.941-83.332-152.726-131.28c-42.549,7.451-86.178,17.136-131.318,32.596  c50.568,45.044,96.118,85.619,144.536,128.748C466.489,443.105,504.5,436.859,552.123,419.154z M454.333,278.333  c26.047,22.465,49.822,43.181,73.832,63.619c24.196,20.597,47.34,42.552,74.968,59.946c31.967-12.923,64.045-24.872,93.363-45.818  c-4.613-4.706-9.578-8.851-9.578-8.851c-27.808-20.825-55.642-41.617-83.6-62.24c-3.342-2.465-20.655-14.094-20.655-14.094  s-10.172-8.298-18.154-7.995c-29.219-3.019-52.783,3.712-81.853,9.294C474.492,273.762,466.231,275.671,454.333,278.333z   M74.483,385.758c42.932,24.186,85.454,39.175,129.459,49.335c76.526,17.671,122.266,26.699,143.338,18.719  c-42.087-37.582-91.347-80.825-133.393-118.371C167.263,349.764,122.15,365.482,74.483,385.758z"})),i.createElement("symbol",{id:"maphubs-icon-video",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M93.5,17.5c-1.4,0-2.5,1.1-2.5,2.5v3h-4v-3c0-1.4-1.1-2.5-2.5-2.5S82,18.6,82,20v3H18v-3c0-1.4-1.1-2.5-2.5-2.5    S13,18.6,13,20v3H9v-3c0-1.4-1.1-2.5-2.5-2.5S4,18.6,4,20v61c0,1.4,1.1,2.5,2.5,2.5S9,82.4,9,81v-3h4v3c0,1.4,1.1,2.5,2.5,2.5    S18,82.4,18,81v-3h64v3c0,1.4,1.1,2.5,2.5,2.5S87,82.4,87,81v-3h4v3c0,1.4,1.1,2.5,2.5,2.5S96,82.4,96,81V20    C96,18.6,94.9,17.5,93.5,17.5z M87,48h4v5h-4V48z M91,43h-4v-5h4V43z M87,58h4v5h-4V58z M91,28v5h-4v-5H91z M9,48h4v5H9V48z     M13,43H9v-5h4V43z M9,58h4v5H9V58z M13,28v5H9v-5H13z M9,73v-5h4v5H9z M18,73V28h64v45H18z M87,73v-5h4v5H87z"}),i.createElement("path",{d:"M37.2,50V37.2c0-1.4,1.6-2.3,2.8-1.6L50.9,42l11,6.4c1.2,0.7,1.2,2.5,0,3.2l-11,6.4L40,64.4c-1.2,0.7-2.8-0.2-2.8-1.6V50z    "}))),i.createElement("symbol",{id:"maphubs-icon-play",viewBox:"0 0 80 100",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",{transform:"translate(0,-972.36218)"},i.createElement("path",{style:{direction:"ltr",blockProgression:"tb",baselineShift:"baseline",enableBackground:"accumulate"},d:"m 40,991.36218 c -11.5743,0 -21,9.42572 -21,21.00002 0,11.5743 9.4257,21 21,21 11.5742,0 21,-9.4257 21,-21 0,-11.5743 -9.4258,-21.00002 -21,-21.00002 z m 0,4 c 9.4124,0 17,7.58752 17,17.00002 0,9.4125 -7.5876,17 -17,17 -9.4125,0 -17,-7.5875 -17,-17 0,-9.4125 7.5875,-17.00002 17,-17.00002 z m -6,6.00002 0,22 18,-11 -18,-11 z",fillOpacity:"1",stroke:"none",visibility:"visible",display:"inline",overflow:"visible"}))),i.createElement("symbol",{id:"maphubs-icon-oil",viewBox:"0 0 74 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M71,94V84H3v10c-1.656,0-3,1.343-3,3s1.344,3,3,3h68c1.657,0,3-1.343,3-3S72.657,94,71,94z"}),i.createElement("path",{d:"M3,6v10h68V6c1.657,0,3-1.343,3-3s-1.343-3-3-3H3C1.344,0,0,1.343,0,3S1.344,6,3,6z"}),i.createElement("path",{d:"M3,22v56h68V22H3z M37,65c-5.523,0-10-4.477-10-10c0-5.523,10-20,10-20s10,14.477,10,20C47,60.523,42.523,65,37,65z"})),i.createElement("symbol",{id:"maphubs-icon-tractor",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("g",null,i.createElement("path",{d:"M59.451,24.196c0.992-0.205,2.009-0.155,3.014-0.157c5.159,0.002,10.322,0.002,15.482,0    c1.146,0.008,2.375,0.157,3.288,0.917c1.015,0.782,1.69,2.014,1.644,3.312c-0.002,5.163,0.008,10.326-0.005,15.488    c-0.212,2.15,1.45,3.802,2.122,5.724c-0.844,1.755-1.718,3.492-2.605,5.226c-2.342-0.76-4.84-1.25-7.303-0.928    c-4.633,0.325-9.049,2.768-11.88,6.439c-2.272,2.941-3.604,6.646-3.545,10.38c-9.366,0.036-18.734,0.008-28.1,0.013    c-1.375-3.768-4.539-6.867-8.425-7.953c-2.587-0.81-5.36-0.553-7.926,0.189c-0.024-4.363-0.003-8.729-0.013-13.094    c-0.026-1.568,0.739-3.186,2.145-3.951c1.353-0.816,2.983-0.527,4.481-0.577c4.156-0.044,8.322,0.091,12.473-0.066    c-0.052-5.619-0.01-11.235-0.023-16.854c1.41-0.01,2.821-0.013,4.231,0.003c0.008,5.637-0.008,11.275,0.005,16.913    c3.511,0.013,7.021,0.005,10.533,0.002c2.538-6.138,4.928-12.339,7.436-18.49C56.99,25.475,58.125,24.49,59.451,24.196z     M61.491,28.349c-0.794,0.089-1.416,0.708-1.678,1.435c-1.681,4.187-3.359,8.375-5.026,12.567    c-0.542,1.303,0.493,2.908,1.924,2.865c5.854,0.021,11.709,0.003,17.561,0.008c1.141,0.1,2.299-0.847,2.268-2.024    c0.014-4.279,0.014-8.559,0-12.838c0.047-1.206-1.127-2.14-2.281-2.059C70.004,28.328,65.742,28.237,61.491,28.349z"})),i.createElement("g",null,i.createElement("path",{d:"M74.371,55.965c3.309-0.488,6.789,0.152,9.67,1.863c3.75,2.156,6.43,6.062,7.119,10.328    c0.646,3.611-0.191,7.435-2.182,10.502c-2.203,3.422-5.865,5.83-9.866,6.541c-2.947,0.392-6.049,0.178-8.745-1.164    c-4.245-1.924-7.477-5.985-8.316-10.58c-0.709-3.492-0.084-7.239,1.726-10.312C65.971,59.303,69.995,56.594,74.371,55.965z     M75.417,62.232c-3.659,0.434-6.77,3.538-7.226,7.196c-0.512,3.33,1.214,6.838,4.143,8.489c3.445,2.074,8.32,1.201,10.787-1.992    c2.499-2.96,2.489-7.672,0.016-10.646C81.338,62.996,78.286,61.82,75.417,62.232z"})),i.createElement("g",null,i.createElement("path",{d:"M18.255,64.34c2.446-0.27,4.981,0.24,7.045,1.607c2.802,1.762,4.625,4.93,4.821,8.226    c0.184,2.911-0.889,5.886-2.929,7.976c-1.99,2.064-4.848,3.346-7.737,3.209c-2.86,0.076-5.664-1.256-7.604-3.324    c-2.344-2.455-3.327-6.086-2.612-9.395C10.084,68.324,13.891,64.832,18.255,64.34z M18.534,69.855    c-2.231,0.451-4.009,2.541-4.024,4.827c-0.123,2.437,1.783,4.78,4.195,5.142c0.921,0.065,1.899,0.107,2.764-0.281    c1.993-0.807,3.383-2.946,3.144-5.109C24.51,71.479,21.398,69.18,18.534,69.855z"})))),i.createElement("symbol",{id:"maphubs-icon-farmer",viewBox:"0 0 169.917 321.99375000000003",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M87.571,38.513c2.079-11.416,12.09-20.101,24.097-20.101c12.006,0,22.017,8.685,24.096,20.101   c20.142-1.733,34.153-5.568,34.153-10.025c0-5.103-18.362-15.919-43.273-19.271C126.406,4.103,119.8,0,111.667,0   c-8.133,0-14.739,4.103-14.978,9.217c-17.916,2.411-32.443,8.682-39.19,13.913v9.407C63.053,35.19,73.893,37.336,87.571,38.513z"
}),i.createElement("path",{d:"M19.128,101.597c-3.996,1.885-5.707,6.653-3.822,10.649c1.364,2.894,4.24,4.59,7.241,4.59c0.067,0,0.135-0.009,0.203-0.011   V99.898C21.546,100.46,20.339,101.025,19.128,101.597z"}),i.createElement("path",{d:"M73.076,95.227c4.461-1.858,8.356-3.451,11.546-4.741v154.746c0,6.83,5.537,12.363,12.363,12.363   c6.828,0,12.365-5.533,12.365-12.363V154.96h4.635v90.271c0,6.83,5.537,12.363,12.363,12.363c6.828,0,12.365-5.533,12.365-12.363   V95.482c0.593,1.216,1.191,2.611,1.781,4.238c2.819,7.813,5.189,20.63,5.18,40.638c0,5.516-0.177,11.574-0.565,18.224   c-0.257,4.411,3.109,8.195,7.52,8.452c0.159,0.009,0.318,0.014,0.475,0.014c4.205,0,7.729-3.283,7.979-7.535   c0.404-6.933,0.591-13.299,0.591-19.156c-0.04-30.182-4.861-46.887-11.434-56.932c-3.285-4.986-7.128-8.183-10.68-9.955   c-2.319-1.169-4.445-1.72-6.14-1.964c-0.766-0.254-1.583-0.398-2.436-0.398H92.351c-0.681,0-1.338,0.097-1.967,0.262   c-0.774,0.056-1.554,0.225-2.316,0.521v-0.002c-0.09,0.036-25.279,9.792-55.317,23.409v17.597   C47.813,105.939,62.108,99.798,73.076,95.227z"}),i.createElement("circle",{cx:"111.668",cy:"42.913",r:"22.5"}),i.createElement("path",{d:"M24.75,255.5h6v-184H48.5c3.867-0.002,6.997-3.133,6.999-7.001V18.834H49.5v45.665c-0.002,0.55-0.45,1-1,1H30.75V18.833h-6   v46.666H6.999c-0.55,0-1-0.45-1-1V18.834H0v45.665c0.002,3.868,3.132,6.999,6.999,7.001h17.75V255.5z"}))),i.createElement("symbol",{id:"maphubs-icon-clipboard",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M37.532,24.217h24.473c1.423,0,2.577-1.142,2.577-2.584v-3.849c0-1.427-1.152-2.584-2.583-2.584h-3.858   c0,0,0-9.017-8.373-9.017c-8.373,0-8.403,9.017-8.403,9.017h-3.84c-1.42,0-2.571,1.142-2.571,2.584v3.849   C34.954,23.06,36.116,24.217,37.532,24.217z"}),i.createElement("path",{d:"M76.221,17.428h-4.687v4.202h4.687c0,0,4.202,0,4.202,4.201v59.582c0,4.635-4.202,4.202-4.202,4.202H23.779   c0,0-4.202,0-4.202-4.202V25.831c0-4.201,4.202-4.201,4.202-4.201h4.684v-4.202h-4.684c0,0-8.404,0-8.404,8.403   c0,24.329,0,59.582,0,59.582c0,8.404,8.404,8.404,8.404,8.404h52.441c0,0,8.404,0,8.404-8.404V25.831   C84.625,17.428,76.221,17.428,76.221,17.428z"}),i.createElement("rect",{x:"27.553",y:"55.001",width:"44.894",height:"4.588"}),i.createElement("rect",{x:"27.553",y:"71.729",width:"44.894",height:"4.588"}),i.createElement("rect",{x:"27.553",y:"38.273",width:"44.894",height:"4.588"}))),i.createElement("symbol",{id:"maphubs-icon-hand-one",viewBox:"0 0 5000000 6250000",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{fill:"black",d:"M2123689 843452c-58112,0 -110909,23859 -149296,62128 -38269,38387 -62128,91184 -62128,149296l0 1854979 0 0c-118,11457 -4843,23033 -14056,31301 -17362,15354 -43820,13819 -59175,-3426 -11221,-12638 -22205,-24331 -32953,-35080l-2127 -2126c-97798,-97798 -212014,-165359 -329065,-183194 -112681,-17009 -229495,12520 -338042,107011l1019087 1019087c199376,199376 459581,307451 719786,312884 251347,5315 502812,-85278 699353,-281702 288553,-288670 288316,-644311 287962,-1025111l0 -34371 -118 0 0 -565530c0,-58112 -23859,-110909 -62128,-149296 -38387,-38269 -91184,-62128 -149296,-62128 -58112,0 -111027,23859 -149296,62128 -38387,38387 -62128,91184 -62128,149296l0 151659c0,23150 -18780,41930 -42049,41930l-2480 0c-23150,0 -41930,-18780 -41930,-41930l0 -312766c0,-58112 -23741,-110909 -62128,-149296 -38269,-38387 -91184,-62128 -149296,-62128 -58112,0 -110909,23741 -149296,62128 -38269,38387 -62128,91184 -62128,149296l0 312766c0,23150 -18781,41930 -41931,41930l-2480 0c-23151,0 -41931,-18780 -41931,-41930l0 -453440c0,-58112 -23859,-111027 -62128,-149296 -38387,-38387 -91184,-62128 -149296,-62128 -58112,0 -111027,23741 -149296,62128 -38387,38269 -62128,91184 -62128,149296l0 453440c0,23150 -18780,41930 -42048,41930l-2481 0c-23150,0 -41930,-18780 -41930,-41930l0 -1346381c0,-58112 -23741,-110909 -62128,-149296 -38269,-38269 -91184,-62128 -149296,-62128z"}))),i.createElement("symbol",{id:"maphubs-icon-magnifier",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M100,80.665L76.874,57.537c2.457-5.213,3.834-11.037,3.834-17.185C80.708,18.065,62.641,0,40.354,0   C18.067,0,0,18.065,0,40.353c0,22.289,18.067,40.355,40.354,40.355c6.147,0,11.971-1.375,17.186-3.835L80.665,100L100,80.665z    M19.526,40.353c0-11.5,9.325-20.826,20.827-20.826c11.503,0,20.828,9.326,20.828,20.826c0,11.503-9.325,20.828-20.828,20.828   C28.852,61.181,19.526,51.855,19.526,40.353z"}))),i.createElement("symbol",{id:"maphubs-icon-wifi",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M8.055,46.753L0,40.33c10.822-16.073,29.188-26.647,50.022-26.647c20.806,0,39.147,10.543,49.978,26.575l-8.078,6.388   C82.995,32.977,67.566,23.94,50.022,23.94C32.436,23.94,16.97,33.023,8.055,46.753z M50.056,59.838   c6.134,0,11.364,3.936,13.304,9.412l8.248-6.521c-4.053-7.771-12.182-13.077-21.552-13.077c-9.458,0-17.649,5.402-21.665,13.29   l8.264,6.588C38.512,63.906,43.816,59.838,50.056,59.838z M50.124,41.355c11.993,0,22.478,6.45,28.181,16.067l7.979-6.307   C78.697,39.1,65.303,31.115,50.042,31.115c-15.319,0-28.756,8.043-36.326,20.136l8.073,6.438   C27.455,47.925,38.023,41.355,50.124,41.355z M49.999,68.639c-4.882,0-8.839,3.959-8.839,8.841c0,4.881,3.957,8.838,8.839,8.838   c4.883,0,8.841-3.957,8.841-8.838C58.84,72.598,54.882,68.639,49.999,68.639z"}))),i.createElement("symbol",{id:"maphubs-icon-money",viewBox:"0 0 512 640",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M512.188,320V0h-512v320H66.75c1.75,5.594,4.313,10.969,7.828,16c-6.719,9.625-10.391,20.375-10.391,32  s3.672,22.375,10.391,32c-6.719,9.625-10.391,20.375-10.391,32c0,47.125,59.219,80,144,80s144-32.875,144-80  c0-11.625-3.656-22.375-10.375-32c0,0-0.031,0-0.031,0.031c6.719-9.625,10.406-20.406,10.406-32.031s-3.656-22.375-10.375-32  c0,0-0.031,0-0.031,0.031c3.5-5.031,6.094-10.406,7.844-16.031H512.188z M66.75,288H32.188V32h448v256H349.625  c-1.75-5.625-4.313-11-7.844-16.031c0,0.031,0.031,0.031,0.031,0.031h74.375c0-26.531,21.5-48,48-48V96c-26.5,0-48-21.469-48-48  H294.156c24.938,21.688,42.031,63.438,42.031,112c0,34.188-8.594,64.813-22.313,87.625C288.375,232.813,251.766,224,208.188,224  c-7.188,0-13.922,0.563-20.734,1c0.031,0,0.047,0,0.063,0c-7.156-18.969-11.328-41.125-11.328-65c0-48.563,17.125-90.313,42-112  h-122c0,26.531-21.5,48-48,48v128c20.25,0,37.5,12.563,44.547,30.313C79.906,263.844,70.75,275.125,66.75,288z M368.188,160  c0-13.25,10.75-24,24-24s24,10.75,24,24s-10.75,24-24,24S368.188,173.25,368.188,160z M331.063,260.25  c-0.469-0.438-0.75-0.938-1.25-1.375C330.313,259.313,330.594,259.813,331.063,260.25z M96.188,160c0-13.25,10.75-24,24-24  s24,10.75,24,24s-10.75,24-24,24S96.188,173.25,96.188,160z M208.188,480c-61.859,0-112-21.5-112-48c0-3.5,0.969-6.875,2.625-10.156  C124.391,438.125,162.313,448,208.188,448s83.813-9.875,109.375-26.156c1.656,3.281,2.625,6.656,2.625,10.156  C320.188,458.5,270.063,480,208.188,480z M208.188,416c-61.859,0-112-21.5-112-48c0-3.5,0.969-6.875,2.625-10.156  C124.391,374.125,162.313,384,208.188,384s83.813-9.875,109.375-26.156c1.656,3.281,2.625,6.656,2.625,10.156  C320.188,394.5,270.063,416,208.188,416z M208.188,352c-61.859,0-112-21.5-112-48s50.141-48,112-48c61.875,0,112,21.5,112,48  S270.063,352,208.188,352z"})),i.createElement("symbol",{id:"maphubs-icon-campfire",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("path",{d:"M74.256,81.934l-6.426-2.04l6.426-2.039c0.271-0.085,0.498-0.276,0.629-0.53c0.131-0.252,0.156-0.547,0.07-0.817   l-2.553-8.047c-0.178-0.564-0.776-0.876-1.349-0.698L50.32,74.34l-20.733-6.578c-0.567-0.178-1.171,0.134-1.348,0.698l-2.555,8.047   c-0.084,0.27-0.06,0.565,0.071,0.817c0.132,0.253,0.358,0.444,0.629,0.53l6.426,2.039l-6.426,2.04   c-0.564,0.178-0.878,0.781-0.698,1.346l2.553,8.047c0.085,0.271,0.275,0.497,0.529,0.628c0.153,0.08,0.322,0.121,0.493,0.121   c0.107,0,0.219-0.017,0.325-0.05l20.733-6.578l20.733,6.578c0.106,0.033,0.218,0.05,0.325,0.05c0.172,0,0.34-0.041,0.493-0.121   c0.254-0.131,0.444-0.357,0.53-0.628l2.553-8.047C75.132,82.715,74.82,82.112,74.256,81.934z"}),i.createElement("path",{d:"M50.646,65.841c26.751-2.229,16.186-36.697,11.396-44.995C56.646,11.498,49.336,5.523,49.336,5.523   c1.946,14.062-3.691,23.684-3.691,23.684l-5.788-6.953c-2.086,16.911-11.338,23.52-5.473,34.308   C40.043,66.97,50.646,65.841,50.646,65.841z M47.231,39.783l2.545,3.057c0,0,5.359-7.878,4.503-14.062c0,0,3.304,4.616,4.806,9.119   c1.497,4.485,4.654,20.073-7.108,21.053c0,0-4.663,0.496-7.152-4.081C42.246,50.125,46.314,47.219,47.231,39.783z"}))),i.createElement("symbol",{id:"maphubs-icon-village",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M72.579,48.714L51.546,27.682c-0.825-0.825-2.286-0.825-3.111,0L27.247,48.871c-0.629,0.629-0.817,1.575-0.477,2.397  c0.34,0.822,1.143,1.358,2.033,1.358h3.637v28.678c0,1.214,0.985,2.2,2.2,2.2h30.703c1.216,0,2.2-0.986,2.2-2.2V52.626h3.637  c0.008,0.001,0.014,0,0.018,0c1.215,0,2.2-0.985,2.2-2.2C73.397,49.734,73.078,49.117,72.579,48.714z"}),i.createElement("path",{d:"M97.055,43.588L75.867,22.399c-0.826-0.825-2.287-0.825-3.111,0L62,33.155l12.967,12.967  c1.243,1.088,1.951,2.644,1.951,4.304c0,3.11-2.495,5.648-5.588,5.719l-0.029,0.002h-0.112h-0.116h-0.009v22.075h18.599  c1.215,0,2.199-0.985,2.199-2.2V47.344h3.638c0.89,0,1.692-0.535,2.032-1.357C97.872,45.165,97.684,44.217,97.055,43.588z"}),i.createElement("path",{d:"M2.945,43.588l21.188-21.189c0.825-0.825,2.286-0.825,3.111,0L38,33.155L25.033,46.122  c-1.243,1.088-1.951,2.644-1.951,4.304c0,3.11,2.495,5.648,5.588,5.719l0.029,0.002h0.112h0.116h0.009v22.075H10.338  c-1.215,0-2.2-0.985-2.2-2.2V47.344H4.501c-0.89,0-1.692-0.535-2.033-1.357C2.128,45.165,2.316,44.217,2.945,43.588z"})),i.createElement("symbol",{id:"maphubs-icon-clinic",viewBox:"0 0 16 20",preserveAspectRatio:"xMidYMid meet"},i.createElement("polygon",{points:"15,6 10,6 10,1 6,1 6,6 1,6 1,10 6,10 6,15 10,15 10,10 15,10 "})),i.createElement("symbol",{id:"maphubs-icon-star",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",null,i.createElement("polygon",{points:"50,77.4 23.7,91.2 28.8,62 7.5,41.3 36.9,37 50,10.4 63.1,37 92.5,41.3 71.2,62 76.3,91.2  "}))),i.createElement("symbol",{id:"maphubs-icon-eye",viewBox:"0 0 100 70.66625",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M99.995,28.08c-0.002-0.042-0.006-0.082-0.009-0.123c-0.002-0.021-0.003-0.042-0.005-0.062 c-0.003-0.03-0.008-0.06-0.012-0.089c-0.004-0.035-0.008-0.07-0.014-0.104c-0.001-0.004-0.002-0.009-0.002-0.013 c-0.123-0.773-0.487-1.498-1.045-2.056c-3.19-3.781-6.985-7.146-10.844-10.219C79.753,8.792,70.248,3.252,59.756,1.022 C53.692-0.266,47.59-0.321,41.494,0.769c-5.545,0.992-10.889,3.054-15.891,5.61c-7.829,4-14.979,9.515-21.209,15.698 c-1.153,1.144-2.3,2.312-3.348,3.555c-1.396,1.654-1.396,3.613,0,5.267c3.19,3.781,6.985,7.145,10.844,10.219 c8.312,6.622,17.817,12.161,28.309,14.391c6.064,1.289,12.167,1.344,18.263,0.254c5.544-0.992,10.888-3.054,15.891-5.61 c7.829-4.001,14.979-9.515,21.209-15.698c1.153-1.145,2.3-2.312,3.348-3.555c0.558-0.559,0.922-1.283,1.045-2.057 c0-0.004,0.001-0.009,0.002-0.013c0.006-0.035,0.01-0.069,0.014-0.104c0.004-0.029,0.009-0.059,0.012-0.089 c0.002-0.021,0.003-0.041,0.005-0.062c0.003-0.04,0.007-0.08,0.009-0.122c0.003-0.062,0.005-0.124,0.005-0.187 S99.998,28.142,99.995,28.08z M50,47.507c-10.627,0-19.241-8.614-19.241-19.241C30.759,17.64,39.373,9.025,50,9.025 s19.241,8.614,19.241,19.241C69.241,38.893,60.627,47.507,50,47.507z"}),i.createElement("circle",{cx:"50",cy:"28.266",r:"6.369"})),i.createElement("symbol",{id:"maphubs-icon-palm-oil",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M89.664,31.345c-6.29-17.548-29.178-12.972-29.178-12.972C46.561-6.042,19.856,3.496,19.856,3.496  C39.884,8.265,46.371,22.19,46.371,22.19C8.988,11.318,4.599,44.887,4.599,44.887c15.991-11.152,30.594-9.213,36.499-7.724  l-1.595,1.427c0,0-24.412,14.116-32.995,55.313c0,0,1.051,4.178,7.584,4.378c6.528,0.199,6.528-3.423,6.528-3.423  s9.534-39.485,25.176-53.408L47.025,40c11.865,9.734,6.915,36.736,6.915,36.736c23.401-12.97,8.259-45.834,8.259-45.834  c23.433,4.327,25.365,29.242,25.365,29.242S95.961,48.889,89.664,31.345z"}),i.createElement("path",{d:"M78.146,97.679c6.069,0,10.99-4.919,10.99-10.986c0-6.07-10.99-17.76-10.99-25.406h-0.381  c0,7.646-10.987,19.336-10.987,25.406c0,6.067,4.921,10.986,10.987,10.986H78.146z"})),i.createElement("symbol",{id:"maphubs-icon-log-pile",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M21.2,59.2c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2s16.2-7.3,16.2-16.2S30.1,59.2,21.2,59.2z M21.2,87.8  c-6.9,0-12.4-5.6-12.4-12.4c0-6.9,5.6-12.4,12.4-12.4s12.4,5.6,12.4,12.4C33.6,82.3,28,87.8,21.2,87.8z"}),i.createElement("path",{d:"M50.1,59.2c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2s16.2-7.3,16.2-16.2S59,59.2,50.1,59.2z M50.1,87.8  c-6.9,0-12.4-5.6-12.4-12.4c0-6.9,5.6-12.4,12.4-12.4s12.4,5.6,12.4,12.4C62.5,82.3,56.9,87.8,50.1,87.8z"}),i.createElement("path",{d:"M78.7,59.2c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2S95,84.4,95,75.4S87.7,59.2,78.7,59.2z M78.7,87.8  c-6.9,0-12.4-5.6-12.4-12.4c0-6.9,5.6-12.4,12.4-12.4c6.9,0,12.4,5.6,12.4,12.4C91.2,82.3,85.6,87.8,78.7,87.8z"}),i.createElement("path",{d:"M64.5,34.5c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2s16.2-7.3,16.2-16.2S73.5,34.5,64.5,34.5z M64.5,63.1  c-6.9,0-12.4-5.6-12.4-12.4s5.6-12.4,12.4-12.4S77,43.8,77,50.7S71.4,63.1,64.5,63.1z"}),i.createElement("path",{d:"M50.1,9.4c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2s16.2-7.3,16.2-16.2S59,9.4,50.1,9.4z M50.1,38  c-6.9,0-12.4-5.6-12.4-12.4s5.6-12.4,12.4-12.4s12.4,5.6,12.4,12.4S56.9,38,50.1,38z"}),i.createElement("path",{d:"M35.8,34.5c-9,0-16.2,7.3-16.2,16.2s7.3,16.2,16.2,16.2S52,59.6,52,50.7S44.7,34.5,35.8,34.5z M35.8,63.1  c-6.9,0-12.4-5.6-12.4-12.4s5.6-12.4,12.4-12.4s12.4,5.6,12.4,12.4S42.6,63.1,35.8,63.1z"})),i.createElement("symbol",{id:"maphubs-icon-clearcutting",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("polygon",{points:"68.9,63.2 60.9,48.2 62.8,48.2 56.2,36.7 55.9,36.2 58,36.2 53.8,29 52.5,26.8 54.3,26.8 52,22.7 49.6,18.7   47.3,22.7 44.9,26.8 46.7,26.8 45.4,29 41.3,36.2 43.3,36.2 43,36.7 36.4,48.2 39.1,48.2 31.1,63.2 46.9,63.2 46.9,74.6 52.2,74.6   52.2,63.2 "}),i.createElement("rect",{x:"16",y:"61.8",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"24.9",y:"48.7",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"74.5",y:"64.7",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"61.4",y:"74.6",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"83.4",y:"76.9",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"84.9",y:"51.5",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"66.7",y:"46.5",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"11.3",y:"43.7",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"30.2",y:"73",width:"5.3",height:"9.9"}),i.createElement("rect",{x:"11.3",y:"77.9",width:"5.3",height:"9.9"})),i.createElement("symbol",{id:"maphubs-icon-dam",viewBox:"0 0 100 73.939",preserveAspectRatio:"xMidYMid meet"},i.createElement("polygon",{points:"34.284,73.939 0,73.939 0.024,67.227 34.284,67.227 "}),i.createElement("polygon",{points:"34.284,63.773 0,63.773 0.024,57.061 34.284,57.061 "}),i.createElement("polygon",{points:"34.284,53.584 0,53.584 0.024,46.871 34.284,46.871 "}),i.createElement("polygon",{points:"34.284,43.395 0,43.395 0.024,36.682 34.284,36.682 "}),i.createElement("path",{d:"M48.166,2.542C47.542,1.055,46.056,0,44.354,0l-5.516,0.024v73.915h26.109L48.166,2.542z"}),i.createElement("polygon",{points:"34.284,33.206 0,33.206 0.024,26.517 34.284,26.517 "}),i.createElement("polygon",{points:"34.284,23.04 0,23.04 0.024,16.327 34.284,16.327 "}),i.createElement("polygon",{points:"34.284,12.851 0,12.851 0.024,6.138 34.284,6.138 "}),i.createElement("path",{d:"M68.138,68.09c0.503,0.096,1.006,0.144,1.51,0.144c1.343,0,2.613-0.312,3.74-0.815c1.175-0.551,2.469-0.863,3.859-0.863 c1.367,0,2.662,0.312,3.836,0.863c1.127,0.504,2.422,0.815,3.74,0.815s2.59-0.312,3.74-0.815c1.15-0.551,2.47-0.863,3.836-0.863 c1.367,0,2.686,0.312,3.86,0.863c1.127,0.504,2.397,0.815,3.74,0.815v5.586c-1.343,0-2.613-0.288-3.74-0.791 c-1.175-0.552-2.493-0.863-3.86-0.863c-1.366,0-2.686,0.312-3.836,0.863c-1.15,0.503-2.422,0.791-3.74,0.791 s-2.613-0.288-3.74-0.791c-1.174-0.552-2.469-0.863-3.836-0.863c-1.391,0-2.685,0.312-3.859,0.863 c-1.127,0.503-2.397,0.791-3.74,0.791c-0.072,0-0.145,0-0.216,0L68.138,68.09z"}),i.createElement("path",{d:"M65.907,57.133c1.15,0.504,2.422,0.815,3.74,0.815c1.343,0,2.613-0.312,3.74-0.815c1.175-0.552,2.469-0.863,3.859-0.863 c1.367,0,2.662,0.312,3.836,0.863c1.127,0.504,2.422,0.815,3.74,0.815s2.59-0.312,3.74-0.815c1.15-0.552,2.47-0.863,3.836-0.863 c1.367,0,2.686,0.312,3.86,0.863c1.127,0.504,2.397,0.815,3.74,0.815v5.586c-1.343,0-2.613-0.288-3.74-0.791 c-1.175-0.552-2.493-0.863-3.86-0.863c-1.366,0-2.686,0.312-3.836,0.863c-1.15,0.503-2.422,0.791-3.74,0.791 s-2.613-0.288-3.74-0.791c-1.174-0.552-2.469-0.863-3.836-0.863c-1.391,0-2.685,0.312-3.859,0.863 c-1.127,0.503-2.397,0.791-3.74,0.791c-0.814,0-1.606-0.096-2.373-0.312L65.907,57.133z"})),i.createElement("symbol",{id:"maphubs-icon-sawblade",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("path",{d:"M94.9,59.1c0-0.2-0.1-0.4-0.3-0.5c-0.1-0.1-0.2-0.2-0.2-0.4c0.2-1.6,0-3.3,0.2-4.9c0.1-0.7-0.1-1.3-0.5-1.8  c-1-1.2-2-2.5-3-3.7c-0.9-1.2-1.9-2.3-2.8-3.5c-0.7-0.9-0.4-2.1,0.6-2.5c0.7-0.2,1.5-0.3,2.2-0.2c0.9,0.2,1.8,0.2,2.6,0.3  c0.2,0,0.4,0,0.6,0c0.8,0.1,0.8,0,0.5-0.8c-0.1-0.3-0.5-0.3-0.6-0.7c-0.5-1.7-1.3-3.4-1.9-5c-0.2-0.5-0.5-0.8-1-1.1  c-1.6-0.9-3.2-1.7-4.9-2.6c-1.1-0.6-2.1-1.1-3.2-1.7c-1.2-0.7-1.2-2.1,0-2.8c0.5-0.3,1-0.6,1.6-0.8c1.1-0.3,2.2-0.7,3.2-1.1  c0.4-0.2,0.5-0.3,0.1-0.6c-0.2-0.1-0.4-0.3-0.7-0.3c-0.2,0-0.3-0.1-0.5-0.2c-1.1-1.2-2.3-2.4-3.4-3.6c-0.5-0.6-1.1-0.9-1.9-0.9  c-0.6,0-1.2-0.1-1.9-0.2c-2.3-0.2-4.6-0.5-6.9-0.7c-0.7-0.1-1.3-0.4-1.4-1.1c-0.2-0.7,0-1.4,0.6-1.8c0.3-0.2,0.6-0.5,0.9-0.8  c0.9-0.8,1.7-1.5,2.6-2.3c0.5-0.4,0.4-0.7-0.2-0.8c-0.2-0.1-0.4-0.1-0.6,0c-0.1,0.1-0.3,0.1-0.4,0c-1.6-0.8-3.3-1.4-4.9-2.2  c-0.5-0.2-1.1-0.3-1.6-0.1c-1.1,0.3-2.3,0.7-3.4,1c-1.8,0.5-3.6,1.1-5.4,1.6c-0.6,0.2-1.2,0-1.6-0.5c-0.4-0.5-0.5-1.1-0.2-1.7  c0.4-0.9,0.8-1.8,1.3-2.8c0.3-0.6,0.6-1.2,0.9-1.8c0.2-0.4,0.1-0.6-0.4-0.5c-0.3,0-0.7-0.1-0.9,0.3c-0.1,0.1-0.2,0.1-0.3,0.1  c-1.9-0.2-3.8-0.1-5.6-0.1c-0.4,0-0.8,0.1-1.1,0.4c-2.3,1.9-4.6,3.8-7,5.7c-0.6,0.5-1.2,0.7-1.9,0.4c-0.7-0.3-0.8-0.9-0.8-1.6  c0-1.6,0.1-3.2,0.3-4.8c0.1-0.6-0.1-0.5-0.6-0.4c-0.4,0.2-0.7,0.6-1.1,0.7c-1.7,0.6-3.3,1.3-5,2c-0.5,0.2-0.8,0.5-1.1,1  c-0.9,1.7-1.8,3.3-2.7,5c-0.6,1.1-1.2,2.2-1.8,3.2c-0.7,1.1-2,0.9-2.5-0.2c-0.2-0.5-0.4-1-0.6-1.5c-0.3-1.1-0.6-2.1-1-3.2  c-0.1-0.4-0.4-0.7-0.8-0.6c-0.4,0.1-0.8,0.4-0.7,0.9c0.1,0.4-0.1,0.6-0.4,0.8c-1.3,1.2-2.5,2.4-3.7,3.5c-0.3,0.3-0.4,0.6-0.5,1  c-0.2,1.5-0.3,3-0.5,4.6c-0.2,1.6-0.3,3.2-0.5,4.8c-0.1,1.1-1.3,1.7-2.2,1.1c-0.5-0.4-1-0.8-1.3-1.3c-0.7-1-1.6-1.9-2.4-2.8  c-0.1-0.2-0.3-0.3-0.5-0.1c-0.3,0.3-0.6,0.7-0.5,1.2c0.1,0.2,0,0.4-0.1,0.6c-0.6,1.4-1.2,2.9-1.9,4.3c-0.4,0.8-0.4,1.6-0.1,2.4  c0.8,2.6,1.6,5.2,2.3,7.9c0.1,0.3,0.2,0.6,0.2,0.9c0,1.2-1.1,1.9-2.2,1.4c-1.5-0.7-2.9-1.4-4.4-2.1c-0.2-0.1-0.4-0.3-0.5-0.1  c-0.1,0.3-0.3,0.7,0,1c0.1,0.1,0.3,0.2,0.3,0.4c-0.2,1,0,2-0.1,3c-0.2,1.9,0,3.6,1.4,5.1c1.6,1.7,3,3.7,4.5,5.5  c0.5,0.6,0.8,1.3,0.4,2.1c-0.4,0.8-1.1,0.8-1.9,0.8c-1.4-0.1-2.7-0.2-4.1-0.3c-0.6,0-0.6,0.2-0.6,0.7c0.1,0.5,0.5,0.7,0.6,1.1  c0.5,1.4,1.1,2.7,1.6,4.1c0.3,0.9,0.9,1.6,1.7,2c0.4,0.2,0.8,0.5,1.3,0.7c2,1.1,4.1,2.2,6.1,3.3c0.6,0.3,1.1,0.8,1,1.5  c0,0.7-0.4,1.3-1.1,1.6c-0.6,0.3-1.2,0.4-1.9,0.6c-1,0.2-2,0.7-2.9,1c-0.4,0.2-0.4,0.4-0.1,0.7c0.2,0.2,0.4,0.3,0.6,0.3  c0.2,0,0.4,0.1,0.6,0.3c1.3,1.3,2.5,2.5,3.8,3.8c0.4,0.4,0.8,0.6,1.3,0.6c1.6,0.2,3.2,0.3,4.8,0.5c1.3,0.1,2.7,0.2,4,0.4  c0.4,0,0.8,0.1,1.1,0.5c0.7,1.1,0.8,1.7-0.2,2.6c-1.1,1-2.3,1.8-3.3,2.9c-0.2,0.2-0.6,0.4-0.3,0.7c0.2,0.3,0.6,0.4,1,0.2  c0.2-0.1,0.3-0.1,0.5,0c1.7,0.7,3.3,1.4,5,2.2c0.5,0.2,0.9,0.2,1.4,0.1c3-0.9,5.9-1.8,8.9-2.6c1-0.3,1.6,0.1,1.9,1.1  c0.1,0.4,0,0.9-0.2,1.3c-0.6,1.3-1.3,2.6-1.9,4c-0.1,0.2-0.4,0.5-0.1,0.6c0.3,0.2,0.7,0.3,1,0c0.2-0.2,0.3-0.3,0.5-0.1  c0.2,0.1,0.4,0.1,0.6,0.1c1.5,0,3,0,4.5,0c0.7,0,1.3-0.2,1.8-0.7c2.1-1.7,4.3-3.5,6.4-5.2c0.4-0.4,0.9-0.6,1.5-0.6  c0.7-0.1,1.3,0.4,1.4,1.2c0,0.2,0,0.5,0,0.7c-0.1,1.3-0.2,2.6-0.2,4c0,0.2-0.1,0.6,0.3,0.7c0.3,0.1,0.7,0.1,0.9-0.2  c0.1-0.1,0.2-0.2,0.3-0.2c1.8-0.4,3.5-1.3,5.2-1.9c0.3-0.1,0.6-0.4,0.8-0.7c1.3-2.5,2.7-4.9,4-7.4c0.3-0.6,0.6-1.1,1.1-1.5  c0.6-0.4,1.6-0.4,1.9,0.2c0.3,0.6,0.7,1.3,0.8,2c0.1,1.2,0.7,2.2,1,3.3c0.1,0.2,0.3,0.5,0.5,0.3c0.3-0.2,0.7-0.4,0.7-0.9  c0-0.2,0-0.4,0.2-0.5c1.4-1.1,2.5-2.4,3.8-3.5c0.4-0.3,0.6-0.7,0.7-1.2c0.1-1.3,0.3-2.6,0.4-3.8c0.2-1.8,0.4-3.7,0.6-5.5  c0.1-0.5,0.3-0.9,0.8-1.2c0.8-0.4,1.4-0.3,2.1,0.3c0.5,0.4,0.7,1,1.1,1.5c0.5,0.7,1.2,1.4,1.7,2.1c0.4,0.5,0.4,0.5,0.8-0.1  c0.3-0.6,0.1-1.3,0.4-1.9c0.7-1.2,1.1-2.5,1.8-3.7c0.4-0.8,0.4-1.6,0.2-2.5c-0.8-2.7-1.6-5.4-2.4-8.1c-0.2-0.6-0.2-1.3,0.2-1.8  c0.6-0.6,1.3-0.6,2-0.3c0.7,0.2,1.3,0.6,1.9,1c0.7,0.5,1.6,0.8,2.5,1.1c0.2,0.1,0.4,0.3,0.6,0.1C95,59.7,94.9,59.4,94.9,59.1z   M50,55.7c-3.1,0-5.7-2.5-5.7-5.7s2.5-5.7,5.7-5.7s5.7,2.5,5.7,5.7S53.1,55.7,50,55.7z"})),i.createElement("symbol",{id:"maphubs-icon-chainsaw",viewBox:"0 0 100 125",preserveAspectRatio:"xMidYMid meet"},i.createElement("g",{style:{display:"inline",opacity:1}},i.createElement("path",{style:{opacity:1,fillOpacity:1,stroke:"none",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},d:"m 27.389978,30.839493 c -1.18069,0.715742 -2.23836,1.673042 -3.090596,2.857868 l -5.27304,7.331668 c -3.250791,4.519428 -2.39997,10.805272 1.795005,14.335604 l -6.846561,3.946098 c -5.0582387,2.9147 -6.8199347,9.462829 -3.905219,14.521117 l 1.686785,2.925503 c 2.914717,5.058288 9.46283,6.819937 14.521117,3.90522 l 3.946429,-2.273961 0.07227,0.125168 32.783797,-18.927734 -2.116211,-3.665385 4.473901,-2.583008 c 0.706744,1.212001 1.355601,2.576171 1.801405,4.456063 2.473464,-2.539867 2.571462,-4.729825 2.39848,-6.880867 l 1.924877,-1.111329 c 0.706744,1.212001 1.353908,2.577148 1.799714,4.457039 2.473464,-2.539866 2.571461,-4.729824 2.398479,-6.880867 l 1.706679,-0.985351 c 0.706744,1.212 1.353909,2.577147 1.799714,4.457039 2.473657,-2.540065 2.573209,-4.73064 2.400171,-6.881844 l 1.794635,-1.036133 c 1.162646,0.811055 2.3349,1.788254 3.540637,3.327876 0.980018,-2.764994 0.58181,-4.632657 -0.18244,-6.261308 0.279405,-0.391246 0.527891,-0.800657 0.74457,-1.22599 1.499547,0.105971 3.08343,0.338011 5.027449,1.114045 -0.621385,-3.302327 -2.212413,-4.681635 -3.959866,-5.749313 -0.0094,-0.420644 -0.05592,-0.841449 -0.12117,-1.260655 1.354023,-0.861215 2.829965,-1.677535 5.015967,-2.226153 -2.561983,-2.430688 -4.746376,-2.509594 -6.887021,-2.311482 l -0.08301,-0.143774 c -0.196201,-0.33983 -0.416012,-0.657658 -0.64676,-0.963971 0.644415,-1.537752 1.401305,-3.103576 2.956889,-4.8668 -3.365502,-0.533169 -5.203203,0.537782 -6.812291,1.849204 -0.562208,-0.242465 -1.145197,-0.430896 -1.741922,-0.563972 -0.282558,-1.461489 -0.465514,-3.037558 -0.225205,-5.093192 -2.97423,1.43461 -3.90743,3.290622 -4.485419,5.219308 -0.602361,0.170157 -1.193166,0.401728 -1.766829,0.697575 -0.728679,-1.235947 -1.397754,-2.623723 -1.855378,-4.553453 -2.510488,2.577885 -2.573501,4.795407 -2.390055,6.977491 l -1.999301,1.154297 c -0.72399,-1.230817 -1.388563,-2.614086 -1.843659,-4.533155 -2.510646,2.578046 -2.575236,4.796251 -2.391746,6.978467 l -1.887665,1.089844 c -0.723989,-1.230817 -1.388563,-2.614086 -1.843659,-4.533155 -2.510646,2.578046 -2.575236,4.796252 -2.391747,6.978467 l -1.669466,0.963867 c -0.72399,-1.230816 -1.388564,-2.614085 -1.84366,-4.533154 -2.510488,2.577885 -2.575192,4.796383 -2.391746,6.978467 l -0.774687,0.447266 -2.793945,-4.839255 -3.443804,1.988281 c -0.167667,-0.137021 -0.3294,-0.278154 -0.5074,-0.406188 l -4.669448,-3.35725 C 35.583548,28.716929 30.932054,28.692266 27.38998,30.839493 Z m 3.136868,5.085558 c 1.535048,-0.954347 3.514667,-0.927162 5.108496,0.219269 l 3.009766,2.166191 -4.184661,2.416016 -8.202593,11.210663 -1.305111,-0.940206 c -2.125106,-1.528572 -2.583319,-4.338477 -1.054742,-6.463585 l 5.273041,-7.331669 c 0.382144,-0.531276 0.844122,-0.958563 1.355804,-1.276679 z M 53.552617,43.0842 76.432941,29.874239 c 1.775567,-1.025124 3.902705,-0.455159 4.92783,1.320408 l 0.803711,1.392068 c 1.025124,1.775568 0.455159,3.902706 -1.320408,4.92783 L 57.96375,50.724507 53.552617,43.0842 Z m -36.582905,21.425613 3.932897,-2.266149 6.321289,10.948794 -3.941354,2.271031 c -2.268141,1.306962 -5.020148,0.567077 -6.32711,-1.701063 l -1.686785,-2.925504 c -1.30696,-2.268141 -0.567077,-5.020148 1.701063,-6.327109 z"}))))}});t.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},,function(t,e){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(1),r=n(172),o=n(925),s=n(174),a=n(193)(s),u=n(270),l=n(618),c=n(272),h=i.createClass({displayName:"Legend",mixins:[a.connect(u),a.connect(l)],__:function(t){return c.getLocaleString(this.state.locale,t)},propTypes:{layers:i.PropTypes.array,className:i.PropTypes.string,style:i.PropTypes.object,title:i.PropTypes.string,collapsible:i.PropTypes.bool},getDefaultProps:function(){return{layers:[],style:{},collapsible:!0}},getInitialState:function(){return{collapsed:!1}},toggleCollapsed:function(){this.setState({collapsed:!this.state.collapsed})},componentDidMount:function(){r(this.refs.legend).collapsible()},render:function(){var t="";t=this.props.title?this.props.title:this.__("Legend");var e="";if(this.props.collapsible){var n="keyboard_arrow_up";this.state.collapsed&&(n="keyboard_arrow_down"),e=i.createElement("div",{className:"row no-margin",style:{height:"44px"}},i.createElement("div",{className:"col s10 no-padding valign-wrapper",style:{height:"44px",wordBreak:"break-all"}},i.createElement("h6",{className:"black-text valign",style:{padding:"0.2rem",marginLeft:"2px",fontWeight:"500"}},t)),i.createElement("div",{className:"col s2 no-padding valign"},i.createElement("i",{ref:"titleIcon",className:"material-icons icon-fade-in",style:{float:"right",marginRight:0}},n)))}else e=i.createElement("div",{className:"row no-margin valign-wrapper",style:{height:"44px",wordBreak:"break-all"}},i.createElement("h6",{className:"black-text valign",style:{padding:"0.2rem",marginLeft:"2px",fontWeight:"500",wordWrap:"break-word"}},t));var r=!0;return(this.state.collapsed||1==this.props.layers.length)&&(r=!1),i.createElement("div",{className:this.props.className,style:this.props.style},i.createElement("ul",{ref:"legend",className:"collapsible","data-collapsible":"accordion",style:{textAlign:"left",display:"flex",flexDirection:"column",marginTop:0}},i.createElement("li",{style:{display:"flex",flexDirection:"column",backgroundColor:"#FFF"}},i.createElement("div",{className:"collapsible-header active no-padding",onClick:this.toggleCollapsed},e),i.createElement("div",{className:"collapsible-body",style:{display:"flex",flexDirection:"column"}},i.createElement("ul",{className:"collection no-margin z-depth-2",style:{overflowY:r?"auto":"hidden"}},this.props.layers.map(function(t){return i.createElement(o,{key:t.layer_id,layer:t,style:{padding:"2px",width:"100%",margin:"auto"}})}),i.createElement("li",{className:"collection-item no-margin no-padding",style:{lineHeight:"0.75em"}},i.createElement("span",{style:{fontSize:"8px",paddingLeft:"2px",lineHeight:"0.75rem",minHeight:"10px",padding:0,display:"inherit"},className:"grey-text"},"Base Map - ",i.createElement("span",{className:"no-margin no-padding",dangerouslySetInnerHTML:{__html:this.state.attribution}}))))))))}});t.exports=h},function(t,e,n){"use strict";var i=n(1),r=n(612),o=n(613),s=n(672),a=n(638),u=i.createClass({displayName:"LegendItem",mixins:[a],propTypes:{layer:i.PropTypes.object.isRequired,mini:i.PropTypes.bool,style:i.PropTypes.object},getDefaultProps:function(){return{style:{},mini:!1}},render:function(){var t=this;if(void 0==this.props.layer)return i.createElement("div",null);var e=r.getBaseUrl(),n=e+"/lyr/"+this.props.layer.layer_id,a=this.props.layer.map_legend_html?this.props.layer.map_legend_html:this.props.layer.legend_html;if(!this.props.layer||!this.props.layer.layer_id)return i.createElement("div",null);var u=i.createElement("div",{className:"no-margin no-padding valign",dangerouslySetInnerHTML:{__html:a}});return this.props.layer.style.layers&&Array.isArray(this.props.layer.style.layers)&&this.props.layer.style.layers.length>0&&this.props.layer.style.layers.forEach(function(e){if(e.id.startsWith("omh-data-point")&&e.metadata&&e.metadata["maphubs:markers"]&&e.metadata["maphubs:markers"].enabled){var n=JSON.parse(JSON.stringify(e.metadata["maphubs:markers"]));n.width=18,n.height=18,u=i.createElement("div",{className:"omh-legend valign-wrapper"},i.createElement("div",{className:"valign",style:{float:"left"}},i.createElement(s,n)),i.createElement("h3",{className:"valign",style:{paddingLeft:"5px",paddingTop:"0px",paddingBottom:"5px"}},t.props.layer.name))}}),this.props.mini?u:i.createElement("li",{key:this.props.layer.layer_id,style:this.props.style,className:"collection-item row"},i.createElement("div",{className:"row no-margin valign-wrapper",style:{padding:"2px"}},i.createElement("div",{className:"col s6 no-margin no-padding valign"},u),i.createElement("div",{className:"col s6 no-margin no-padding"},i.createElement("div",{className:"row no-margin no-padding center"},i.createElement("div",{className:"col s12 no-margin no-padding"},i.createElement(o,{className:"right",group:this.props.layer.owned_by_group_id,size:15,fontSize:8}))))),i.createElement("div",{className:"row no-margin no-padding right-align",style:{lineHeight:"0.75em"}},i.createElement("p",{className:"grey-text left left-align truncate no-padding",style:{margin:0,fontSize:"8px",lineHeight:"0.75em",width:"50%"}},this.props.layer.source),i.createElement("a",{target:"_blank",className:"grey-text right no-padding",style:{height:"10px",fontSize:"8px",lineHeight:"0.75em"},href:n},n)))}});t.exports=u},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(1),r=n(172),o=n(924),s=n(609),a=n(174),u=n(193)(a),l=n(270),c=n(272),h=n(623),f=i.createClass({displayName:"StaticMap",mixins:[u.connect(l,{initWithProps:["locale","_csrf"]})],__:function(t){return c.getLocaleString(this.state.locale,t)},propTypes:{name:i.PropTypes.string,layers:i.PropTypes.array.isRequired,style:i.PropTypes.object.isRequired,position:i.PropTypes.object.isRequired,basemap:i.PropTypes.string.isRequired,showLegend:i.PropTypes.bool,showLogo:i.PropTypes.bool,insetMap:i.PropTypes.bool,locale:i.PropTypes.string.isRequired},getDefaultProps:function(){return{showLegend:!0,showLogo:!0,insetMap:!0}},getInitialState:function(){return{retina:!1,width:1024,height:600}},componentWillMount:function(){function t(){var t=Math.floor(r(window).width()),e=r(window).height();return{width:t,height:e}}var e=this;if("undefined"!=typeof window){var n=t();this.setState({width:n.width,height:n.height}),r(window).resize(function(){var n=h(function(){var n=t();e.setState({width:n.width,height:n.height})},2500).bind(this);n();
})}},render:function(){var t="",e=null;this.props.name&&""!=this.props.name&&(e=this.props.name);var n="",r="";this.props.showLegend&&(this.state.width<600?r=i.createElement(o,{style:{width:"100%"},title:e,layers:this.props.layers}):n=i.createElement(o,{style:{position:"absolute",top:"5px",left:"5px",minWidth:"275px",zIndex:"9999",width:"25%"},title:e,layers:this.props.layers}));var a=this.props.position.bbox,u=[a[0][0],a[0][1],a[1][0],a[1][1]];return t=i.createElement(s,{ref:"map",interactive:!1,showPlayButton:!1,fitBounds:u,insetMap:this.props.insetMap,showLogo:this.props.showLogo,style:{width:"100%",height:this.state.height+"px"},glStyle:this.props.style,baseMap:this.props.basemap,navPosition:"top-right"},n),i.createElement("div",{className:"embed-map"},t,r)}});t.exports=f}]);